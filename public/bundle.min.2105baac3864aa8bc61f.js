webpackJsonp([1,2],[,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.closeCart=t.openCart=t.updateCartItem=t.updateCartItemsCount=t.updateCartSubtotal=t.addToCart=t.startAddorUpdateCartItem=void 0;var i=n(24),o=r(i),a=(t.startAddorUpdateCartItem=function(e,t){return function(n,r){function i(e){return o.lineItems.filter(function(t){return t.variant_id===e})[0]}var o=r().cart,c=void 0;c=e.variant_id?e.variant_id:e.id;var f=i(c);n(f?u(f,parseInt(t)):a(e,t)),n(s()),n(l(t))}},t.addToCart=function(e,t){return function(n,r){o.default.cart.createLineItemsFromVariants({variant:e,quantity:t}).then(function(e){var t=e.lineItems;n({type:"UPDATE_CART_ITEMS",updatedCartItems:t}),n(c())}).catch(function(e){console.log("Failed to addToCart",e)})}}),s=t.updateCartSubtotal=function(){return function(e,t){var n=o.default.cart.subtotal;e({type:"UPDATE_CART_SUBTOTAL",newSubtotal:n})}},l=t.updateCartItemsCount=function(e){return function(t,n){var r=n().cart,i=parseInt(r.lineItemsCount)+parseInt(e);console.log("new quantity: ",e),console.log("old quantity: ",r.lineItemsCount),console.log("updatedCartItemsCount: ",i),t({type:"UPDATE_CART_ITEMS_COUNT",updatedCartItemsCount:i}),t(parseInt(i)<1?f():c())}},u=t.updateCartItem=function(e,t){return function(n,r){var i=r().cart,a=e.quantity+t,s=[];i.lineItems.forEach(function(t){if(e.id===t.id){if(a>0){var n=[];n=t,n.quantity=a,s.push(n)}}else s.push(t)}),o.default.cart.updateLineItem(e.id,a).then(function(){n({type:"UPDATE_CART_ITEMS",updatedCartItems:s})})}},c=t.openCart=function(){return{type:"OPEN_CART"}},f=t.closeCart=function(){return{type:"CLOSE_CART"}}},,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(n(0),n(335)),a=(n(49).configure(),function(){function e(){r(this,e),this.client=o.buildClient({apiKey:"e0ab8cf9b5a30cee2616bf151a56c763",domain:"rmc-preview.myshopify.com",appId:"6"}),this.cart={}}return i(e,[{key:"createCart",value:function(){var e=this;return new Promise(function(t,n){e.client.createCart().then(function(n){localStorage.setItem("lastCartId",n.id),console.log("created new cart",n),e.cart=n;var r={isOpen:!1,lineItemsCount:0,lineItems:[],subtotal:0};t(r)})})}},{key:"restoreCart",value:function(){var e=this;return new Promise(function(t,n){e.client.fetchCart(localStorage.getItem("lastCartId")).then(function(n){e.cart=n;var r={isOpen:!1,lineItemsCount:n.lineItemCount,lineItems:n.lineItems,subtotal:n.subtotal};t(r)})})}}]),e}());t.default=new a},,,,,,,,,,,,,,function(e,t,n){var r,i;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===i)for(var a in r)o.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(r=[],i=function(){return n}.apply(t,r),!(void 0!==i&&(e.exports=i)))}()},,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addCollections=t.startAddCollections=t.setActiveCollection=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(24),a=r(o),s=(t.setActiveCollection=function(e){return function(t){return a.default.client.fetchCollection(e).then(function(e){var n=e||{},r=i({},n);t({type:"SET_ACTIVE_COLLECTION",parsedCollection:r})})}},t.startAddCollections=function(){return function(e){return a.default.client.fetchAllCollections().then(function(t){var n=t||{},r=[];Object.keys(n).forEach(function(e){r.push(i({key:e},n[e]))}),e(s(r))})}},t.addCollections=function(e){return{type:"ADD_COLLECTIONS",collections:e}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateActiveProductOptions=t.clearActiveProduct=t.setActiveProduct=t.preloadProductImages=t.addProducts=t.startAddProducts=void 0;var i=n(24),o=r(i),a=(t.startAddProducts=function(){return function(e){return o.default.client.fetchAllProducts().then(function(t){var n=t||{},r=n.map(function(e,t){var n=[];return n=e,n.key=t,n});e(a(r)),e(s())})}},t.addProducts=function(e){return{type:"ADD_PRODUCTS",products:e}}),s=t.preloadProductImages=function(){return function(e,t){var n=t().products.all,r=[];n.map(function(e,t){return r[t]=new Image,r[t].src=e.selectedVariant.imageVariants[4].src,r[t]})}};t.setActiveProduct=function(e){return{type:"SET_ACTIVE_PRODUCT",options:e}},t.clearActiveProduct=function(){return{type:"CLEAR_ACTIVE_PRODUCT"}},t.updateActiveProductOptions=function(e){return{type:"UPDATE_ACTIVE_PRODUCT_OPTIONS",options:e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=void 0;var o=n(148),a=i(o),s=n(330),l=r(s),u=n(168);t.configure=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.combineReducers({products:u.productsReducer,collections:u.collectionsReducer,cart:u.cartReducer,nav:u.navReducer}),n=a.createStore(t,e,a.compose(a.applyMiddleware(l.default),window.devToolsExtension?window.devToolsExtension():function(e){return e}));return n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return a.default.createElement("div",{className:"loader"},a.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-3x fa-fw"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(0),a=r(o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"asMoney",value:function(e,t,n,r,i){t=t||"$",n=n||",",r=r||".",i=i||".";var o=new RegExp("(\\d)(?=(\\d{3})+\\.)","g");return t+parseFloat(e,10).toFixed(2).replace(i,r).replace(o,"$1"+n).toString()}}]),e}();t.default=new o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),s=n(17),l=r(s),u=n(140),c=n(3),f=r(c),d={initialize:function(e){var t,n=l.default.findDOMNode(this.list),r=a.default.Children.count(e.children),i=this.getWidth(n),o=this.getWidth(l.default.findDOMNode(this.track));if(e.vertical)t=this.getWidth(l.default.findDOMNode(this));else{var s=e.centerMode&&2*parseInt(e.centerPadding);t=(this.getWidth(l.default.findDOMNode(this))-s)/e.slidesToShow}var c=this.getHeight(n.querySelector('[data-index="0"]')),d=c*e.slidesToShow,p=e.rtl?r-1-e.initialSlide:e.initialSlide;this.setState({slideCount:r,slideWidth:t,listWidth:i,trackWidth:o,currentSlide:p,slideHeight:c,listHeight:d},function(){var t=(0,u.getTrackLeft)((0,f.default)({slideIndex:this.state.currentSlide,trackRef:this.track},e,this.state)),n=(0,u.getTrackCSS)((0,f.default)({left:t},e,this.state));this.setState({trackStyle:n}),this.autoPlay()})},update:function(e){var t,n=l.default.findDOMNode(this.list),r=a.default.Children.count(e.children),i=this.getWidth(n),o=this.getWidth(l.default.findDOMNode(this.track));if(e.vertical)t=this.getWidth(l.default.findDOMNode(this));else{var s=e.centerMode&&2*parseInt(e.centerPadding);t=(this.getWidth(l.default.findDOMNode(this))-s)/e.slidesToShow}var c=this.getHeight(n.querySelector('[data-index="0"]')),d=c*e.slidesToShow;e.autoplay?this.pause():this.autoPlay(),this.setState({slideCount:r,slideWidth:t,listWidth:i,trackWidth:o,slideHeight:c,listHeight:d},function(){var t=(0,u.getTrackLeft)((0,f.default)({slideIndex:this.state.currentSlide,trackRef:this.track},e,this.state)),n=(0,u.getTrackCSS)((0,f.default)({left:t},e,this.state));this.setState({trackStyle:n})})},getWidth:function(e){return e.getBoundingClientRect().width||e.offsetWidth||0},getHeight:function(e){return e.getBoundingClientRect().height||e.offsetHeight||0},adaptHeight:function(){if(this.props.adaptiveHeight){var e='[data-index="'+this.state.currentSlide+'"]';if(this.list){var t=l.default.findDOMNode(this.list);t.style.height=t.querySelector(e).offsetHeight+"px"}}},canGoNext:function(e){var t=!0;return e.infinite||(e.centerMode?e.currentSlide>=e.slideCount-1&&(t=!1):(e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1)),t},slideHandler:function(e){var t,n,r,i,o,a=this;if(!this.props.waitForAnimate||!this.state.animating){if(this.props.fade){if(n=this.state.currentSlide,this.props.infinite===!1&&(e<0||e>=this.state.slideCount))return;return t=e<0?e+this.state.slideCount:e>=this.state.slideCount?e-this.state.slideCount:e,this.props.lazyLoad&&this.state.lazyLoadedList.indexOf(t)<0&&this.setState({lazyLoadedList:this.state.lazyLoadedList.concat(t)}),o=function(){a.setState({animating:!1}),a.props.afterChange&&a.props.afterChange(t),delete a.animationEndCallback},this.setState({animating:!0,currentSlide:t},function(){this.animationEndCallback=setTimeout(o,this.props.speed)}),this.props.beforeChange&&this.props.beforeChange(this.state.currentSlide,t),void this.autoPlay()}if(t=e,n=t<0?this.props.infinite===!1?0:this.state.slideCount%this.props.slidesToScroll!==0?this.state.slideCount-this.state.slideCount%this.props.slidesToScroll:this.state.slideCount+t:t>=this.state.slideCount?this.props.infinite===!1?this.state.slideCount-this.props.slidesToShow:this.state.slideCount%this.props.slidesToScroll!==0?0:t-this.state.slideCount:t,r=(0,u.getTrackLeft)((0,f.default)({slideIndex:t,trackRef:this.track},this.props,this.state)),i=(0,u.getTrackLeft)((0,f.default)({slideIndex:n,trackRef:this.track},this.props,this.state)),this.props.infinite===!1&&(r=i),this.props.beforeChange&&this.props.beforeChange(this.state.currentSlide,n),this.props.lazyLoad){for(var s=!0,l=[],c=t;c<t+this.props.slidesToShow;c++)s=s&&this.state.lazyLoadedList.indexOf(c)>=0,s||l.push(c);s||this.setState({lazyLoadedList:this.state.lazyLoadedList.concat(l)})}if(this.props.useCSS===!1)this.setState({currentSlide:n,trackStyle:(0,u.getTrackCSS)((0,f.default)({left:i},this.props,this.state))},function(){this.props.afterChange&&this.props.afterChange(n)});else{var d={animating:!1,currentSlide:n,trackStyle:(0,u.getTrackCSS)((0,f.default)({left:i},this.props,this.state)),swipeLeft:null};o=function(){a.setState(d),a.props.afterChange&&a.props.afterChange(n),delete a.animationEndCallback},this.setState({animating:!0,currentSlide:n,trackStyle:(0,u.getTrackAnimateCSS)((0,f.default)({left:r},this.props,this.state))},function(){this.animationEndCallback=setTimeout(o,this.props.speed)})}this.autoPlay()}},swipeDirection:function(e){var t,n,r,i;return t=e.startX-e.curX,n=e.startY-e.curY,r=Math.atan2(n,t),i=Math.round(180*r/Math.PI),i<0&&(i=360-Math.abs(i)),i<=45&&i>=0||i<=360&&i>=315?this.props.rtl===!1?"left":"right":i>=135&&i<=225?this.props.rtl===!1?"right":"left":this.props.verticalSwiping===!0?i>=35&&i<=135?"down":"up":"vertical"},play:function(){var e;if(!this.state.mounted)return!1;if(this.props.rtl)e=this.state.currentSlide-this.props.slidesToScroll;else{if(!this.canGoNext(i({},this.props,this.state)))return!1;e=this.state.currentSlide+this.props.slidesToScroll}this.slideHandler(e)},autoPlay:function(){this.state.autoPlayTimer&&clearTimeout(this.state.autoPlayTimer),this.props.autoplay&&this.setState({autoPlayTimer:setTimeout(this.play,this.props.autoplaySpeed)})},pause:function(){this.state.autoPlayTimer&&(clearTimeout(this.state.autoPlayTimer),this.setState({autoPlayTimer:null}))}};t.default=d},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(8),f=c.connect,d=n(47),p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this.props.dispatch;e(d.setActiveCollection(this.props.params.collectionId))}},{key:"render",value:function(){var e=void 0;if(e=this.props.collection){var t=(this.props.dispatch,e),n=(t.collection_id,t.title);return u.default.createElement("div",{className:"collection-index"},u.default.createElement("h1",{className:"text-center"},n))}return u.default.createElement("div",null,"Loading collection...")}}]),t}(u.default.Component);t.default=f(function(e){return{collection:e.collections.active}})(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=n(51),d=r(f),p=n(283),h=r(p),m=n(24),v=r(m),y=n(50),g=r(y),b=n(8),w=b.connect,E=n(48),_=n(15),S=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={modalIsOpen:!1},e.openModal=e.openModal.bind(e),e.closeModal=e.closeModal.bind(e);return e}return a(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.dispatch=this.props.dispatch,v.default.client.fetchProduct(this.props.params.productId).then(function(t){var n=t||{};e.product=n,e.dispatch(E.setActiveProduct(n.options))})}},{key:"componentWillUnmount",value:function(){this.dispatch(E.clearActiveProduct())}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"handleOptionChange",value:function(e,t){this.product.options.filter(function(t){return t.name===e})[0].selected=t,this.dispatch(E.updateActiveProductOptions(this.product.options))}},{key:"render",value:function(){var e=this,t=void 0;if(t=this.product){var n=this.props.dispatch,r=t.attrs,i=(r.product_id,r.title),o=(r.images,r.options,t),a=o.description,s=o.selectedVariant,l=o.selectedVariantImage,f=function(){return u.default.createElement("div",{className:"product-options"},t.options.map(function(t,n){if("Size"!=t.name&&"Title"!=t.name)return u.default.createElement("select",{key:n,name:t.name,value:t.selected,onChange:function(n){e.handleOptionChange(t.name,n.target.value)}},t.values.map(function(e,t){return u.default.createElement("option",{key:t,value:e},e)}))}))},p=function(){return t.options.map(function(t,n){if("Size"==t.name)return u.default.createElement("ul",{key:n,className:"product-sizes"},t.values.map(function(n,r){return u.default.createElement("li",{key:r,className:"product-size "+(t.selected===n?"selected":""),onClick:function(){e.handleOptionChange(t.name,n)}},n)}))})};return console.log("activeProduct: ",t),u.default.createElement("div",{className:"container"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"small-12 medium-8 column"},u.default.createElement("button",{onClick:c.browserHistory.goBack,className:"button hollow"},"â€¹ Back to products"),u.default.createElement("p",{className:"text-center"},u.default.createElement("img",{src:l.src,alt:""}))),u.default.createElement("div",{className:"small-12 medium-4 column"},u.default.createElement("h1",{className:"product-title"},i),u.default.createElement("div",{className:"product-info"},u.default.createElement("h5",{className:"product-info__headline"},"Artist"),u.default.createElement("p",null,"JWISH88"),u.default.createElement("h5",{className:"product-info__headline"},"Description"),u.default.createElement("div",{dangerouslySetInnerHTML:{__html:a}}),f(),p(),u.default.createElement("div",{className:"product-price"},d.default.asMoney(s.price)),u.default.createElement("div",{className:"product-charity"},u.default.createElement("input",{type:"text",placeholder:"Choose Charity"}),u.default.createElement("button",{type:"submit",className:"product-charity__button"},u.default.createElement("i",{className:"fa fa-caret-right"})),u.default.createElement("div",{className:"product-charity__more-info",onClick:this.openModal},u.default.createElement("i",{className:"fa fa-info-circle"})," ",u.default.createElement("a",{href:"#"},"more info")),u.default.createElement(h.default,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal,contentLabel:"more info",closeTimeoutMS:200,className:"ReactModal__Content"},u.default.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque egestas, nibh sed tristique ornare, nunc dui sollicitudin elit, id consectetur odio lectus eu nulla. Proin dapibus convallis urna sit amet dictum. Ut porttitor ligula at purus auctor molestie. Etiam velit nibh, porttitor at ipsum mattis, consectetur egestas arcu. Donec pellentesque augue sit amet elementum facilisis. Aenean semper malesuada ligula faucibus sollicitudin. Curabitur ut lorem ac erat porta lacinia pulvinar et risus."),u.default.createElement("p",null,"Sed at nulla dolor. Ut quis quam finibus, efficitur mi sed, sollicitudin urna. Nunc vel tortor commodo, mollis est eu, blandit massa. Vivamus sed mi vitae sem commodo consectetur eu in sem. Donec ut facilisis odio. Nullam id elementum eros, non tempus tortor. Nullam in mattis felis. Praesent bibendum blandit ante, et elementum metus consectetur vitae."),u.default.createElement("button",{className:"close-modal-icon",onClick:this.closeModal},u.default.createElement("i",{className:"fa fa-times"})))),u.default.createElement("button",{onClick:function(){n(_.startAddorUpdateCartItem(t.selectedVariant,1))},className:"button large add-to-cart"},"Add To Cart"),u.default.createElement("img",{src:"/images/credit-cards.png",alt:"Accepted credit cards"})))))}return u.default.createElement(g.default,null)}}]),t}(u.default.Component);t.default=w(function(e){return{activeProduct:e.products.active}})(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.id,r=e.image;return u.default.createElement("div",{className:"product-item"},u.default.createElement("div",{className:"product-item-inner"},u.default.createElement(c.Link,{to:"/product/"+n},u.default.createElement("div",{className:"product-item-image",style:{backgroundImage:"url("+r+")"}})),u.default.createElement("hr",null),u.default.createElement("h6",{className:"product-item-title"},u.default.createElement(c.Link,{to:"/product/"+n},t)),u.default.createElement("div",{className:"author"},u.default.createElement("div",{className:"author__photo",style:{backgroundImage:"url("+r+")"}}),u.default.createElement("div",{className:"author__info"},u.default.createElement(c.Link,{to:"/author/"},u.default.createElement("div",{className:"author__name"},"James88"),u.default.createElement("div",{className:"author__location"},"Canton Ohio"))))))}}]),t}(u.default.Component);e.exports=f},,,,,,,,function(e,t,n){var r=n(337),i=function(e){var t=/[height|width]$/;return t.test(e)},o=function(e){var t="",n=Object.keys(e);return n.forEach(function(o,a){var s=e[o];o=r(o),i(o)&&"number"==typeof s&&(s+="px"),t+=s===!0?o:s===!1?"not "+o:"("+o+": "+s+")",a<n.length-1&&(t+=" and ")}),t},a=function(e){var t="";return"string"==typeof e?e:e instanceof Array?(e.forEach(function(n,r){t+=o(n),r<e.length-1&&(t+=", ")}),t):o(e)};e.exports=a},,function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function i(e,t){return function(n){return e(t(n))}}function o(e,t){var n=R(e)||m(e)?r(e.length,String):[],i=n.length,o=!!i;for(var a in e)!t&&!A.call(e,a)||o&&("length"==a||f(a,i))||n.push(a);return n}function a(e,t,n){var r=e[t];A.call(e,t)&&h(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function s(e){if(!p(e))return M(e);var t=[];for(var n in Object(e))A.call(e,n)&&"constructor"!=n&&t.push(n);return t}function l(e,t){return t=j(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=j(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=a,n(e,this,s)}}function u(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;a(n,s,void 0===l?e[s]:l)}return n}function c(e){return l(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&d(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function f(e,t){return t=null==t?S:t,!!t&&("number"==typeof e||k.test(e))&&e>-1&&e%1==0&&e<t}function d(e,t,n){if(!w(n))return!1;var r=typeof t;return!!("number"==r?v(n)&&f(t,n.length):"string"==r&&t in n)&&h(n[t],e)}function p(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||P;return e===n}function h(e,t){return e===t||e!==e&&t!==t}function m(e){return y(e)&&A.call(e,"callee")&&(!x.call(e,"callee")||N.call(e)==C)}function v(e){return null!=e&&b(e.length)&&!g(e)}function y(e){return E(e)&&v(e)}function g(e){var t=w(e)?N.call(e):"";return t==O||t==T}function b(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=S}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function E(e){return!!e&&"object"==typeof e}function _(e){return v(e)?o(e):s(e)}var S=9007199254740991,C="[object Arguments]",O="[object Function]",T="[object GeneratorFunction]",k=/^(?:0|[1-9]\d*)$/,P=Object.prototype,A=P.hasOwnProperty,N=P.toString,x=P.propertyIsEnumerable,M=i(Object.keys,Object),j=Math.max,I=!x.call({valueOf:1},"valueOf"),R=Array.isArray,L=c(function(e,t){if(I||p(t)||v(t))return void u(t,_(t),e);for(var n in t)A.call(t,n)&&a(e,n,t[n])});e.exports=L},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function n(e){console.warn("[react-ga]",e)}e.exports=n},function(e,t){function n(e){return e.replace(/^\s+|\s+$/g,"")}e.exports=n},function(e,t){/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function n(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&i(e)}function r(e){return e.offsetWidth<=0&&e.offsetHeight<=0||"none"===e.style.display}function i(e){for(;e&&e!==document.body;){if(r(e))return!1;e=e.parentNode}return!0}function o(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var r=isNaN(t);return(r||t>=0)&&n(e,!r)}function a(e){return[].slice.call(e.querySelectorAll("*"),0).filter(function(e){return o(e)})}e.exports=a},,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a={className:"",accessibility:!0,adaptiveHeight:!1,arrows:!0,autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e){return o.default.createElement("button",null,e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:!1,pauseOnHover:!0,responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,afterChange:null,beforeChange:null,edgeEvent:null,init:null,swipeEvent:null,nextArrow:null,prevArrow:null};e.exports=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.getTrackLeft=t.getTrackAnimateCSS=t.getTrackCSS=void 0;var i=n(17),o=r(i),a=n(3),s=r(a),l=function(e,t){return t.reduce(function(t,n){return t&&e.hasOwnProperty(n)},!0)?null:console.error("Keys Missing",e)},u=t.getTrackCSS=function(e){l(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var t,n,r=e.slideCount+2*e.slidesToShow;e.vertical?n=r*e.slideHeight:t=e.variableWidth?(e.slideCount+2*e.slidesToShow)*e.slideWidth:e.centerMode?(e.slideCount+2*(e.slidesToShow+1))*e.slideWidth:(e.slideCount+2*e.slidesToShow)*e.slideWidth;var i={opacity:1,WebkitTransform:e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",transform:e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",transition:"",WebkitTransition:"",msTransform:e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)"};return t&&(0,s.default)(i,{width:t}),n&&(0,s.default)(i,{height:n}),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?i.marginTop=e.left+"px":i.marginLeft=e.left+"px"),i};t.getTrackAnimateCSS=function(e){l(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=u(e);return t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase,t},t.getTrackLeft=function(e){l(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t,n,r=0,i=0;if(e.fade)return 0;if(e.infinite)e.slideCount>=e.slidesToShow&&(r=e.slideWidth*e.slidesToShow*-1,i=e.slideHeight*e.slidesToShow*-1),e.slideCount%e.slidesToScroll!==0&&e.slideIndex+e.slidesToScroll>e.slideCount&&e.slideCount>e.slidesToShow&&(e.slideIndex>e.slideCount?(r=(e.slidesToShow-(e.slideIndex-e.slideCount))*e.slideWidth*-1,i=(e.slidesToShow-(e.slideIndex-e.slideCount))*e.slideHeight*-1):(r=e.slideCount%e.slidesToScroll*e.slideWidth*-1,i=e.slideCount%e.slidesToScroll*e.slideHeight*-1));else if(e.slideCount%e.slidesToScroll!==0&&e.slideIndex+e.slidesToScroll>e.slideCount&&e.slideCount>e.slidesToShow){var a=e.slidesToShow-e.slideCount%e.slidesToScroll;r=a*e.slideWidth}if(e.centerMode&&(e.infinite?r+=e.slideWidth*Math.floor(e.slidesToShow/2):r=e.slideWidth*Math.floor(e.slidesToShow/2)),t=e.vertical?e.slideIndex*e.slideHeight*-1+i:e.slideIndex*e.slideWidth*-1+r,e.variableWidth===!0){var s;e.slideCount<=e.slidesToShow||e.infinite===!1?n=o.default.findDOMNode(e.trackRef).childNodes[e.slideIndex]:(s=e.slideIndex+e.slidesToShow,n=o.default.findDOMNode(e.trackRef).childNodes[s]),t=n?n.offsetLeft*-1:0,e.centerMode===!0&&(n=e.infinite===!1?o.default.findDOMNode(e.trackRef).children[e.slideIndex]:o.default.findDOMNode(e.trackRef).children[e.slideIndex+e.slidesToShow+1],n&&(t=n.offsetLeft*-1+(e.listWidth-n.offsetWidth)/2))}return t}},,,,,,,,,,function(e,t){throw new Error("Module parse failed: /Users/julianjorgensen/sites/rmc/app/styles/app.scss Unexpected character '@' (1:0)\nYou may need an appropriate loader to handle this file type.\n| @import \"base/variables\";\n| \n| // foundation")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){I.default.set({page:e.pathname}),I.default.pageview(e.pathname)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=r(o),s=n(12),l=n(16),u=(r(l),n(159)),c=r(u),f=n(158),d=r(f),p=n(160),h=r(p),m=n(84),v=r(m),y=n(155),g=r(y),b=n(83),w=r(b),E=n(161),_=r(E),S=n(167),C=r(S),O=n(166),T=r(O),k=n(165),P=r(k),A=n(163),N=r(A),x=n(164),M=r(x),j=n(272),I=r(j),R=n(8);R.connect,n(49).configure();s.browserHistory.listen(function(e){i(e),window.scrollTo(0,0)}),t.default=a.default.createElement(s.Router,{history:s.browserHistory},a.default.createElement(s.Route,{path:"/",component:c.default},a.default.createElement(s.IndexRoute,{path:"/",component:d.default}),a.default.createElement(s.Route,{path:"products",component:h.default}),a.default.createElement(s.Route,{path:"product/:productId",component:v.default}),a.default.createElement(s.Route,{path:"collections",component:g.default}),a.default.createElement(s.Route,{path:"collection/:collectionId",component:w.default}),a.default.createElement(s.Route,{path:"my-city",component:h.default}),a.default.createElement(s.Route,{path:"upload",component:_.default}),a.default.createElement(s.Route,{path:"order-status",component:C.default}),a.default.createElement(s.Route,{path:"map",component:T.default}),a.default.createElement(s.Route,{path:"login",component:P.default}),a.default.createElement(s.Route,{path:"about",component:N.default}),a.default.createElement(s.Route,{path:"contact",component:M.default})))},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(51),f=r(c),d=n(8),p=d.connect,h=n(15),m=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.item,r=(e.incrementLineItem,e.quantity),i=function(e){t(h.startAddorUpdateCartItem(n,parseInt(e)))};return u.default.createElement("div",{className:"cart-item"},u.default.createElement("div",{className:"cart-item__img",style:{backgroundImage:"url("+n.imageVariants[2].src+")"}}),u.default.createElement("div",{className:"cart-item__content"},u.default.createElement("div",{className:"cart-item__content-row"},u.default.createElement("div",{className:"cart-item__variant-title"},n.variant_title),u.default.createElement("span",{className:"cart-item__title"},n.title)),u.default.createElement("div",{className:"cart-item__content-row"},u.default.createElement("div",{className:"cart-item__quantity-container"},u.default.createElement("button",{className:"btn--seamless quantity-decrement",type:"button",onClick:function(){i(-1)}},u.default.createElement("span",null,"-"),u.default.createElement("span",{className:"hide"},"Decrement")),u.default.createElement("input",{value:r,className:"cart-item__quantity",type:"number",min:"0",readOnly:!0}),u.default.createElement("button",{className:"btn--seamless quantity-increment",type:"button",onClick:function(){i(1)}},u.default.createElement("span",null,"+"),u.default.createElement("span",{className:"hide"},"Increment"))),u.default.createElement("span",{className:"cart-item__price"},f.default.asMoney(n.price*r)))))}}]),t}(u.default.Component);t.default=p(function(e){return{cart:e.cart}})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.id;return u.default.createElement("div",{className:"collection-item"},u.default.createElement("div",{className:"collection-item-inner"},u.default.createElement("h2",{className:"text-center"},u.default.createElement(c.Link,{to:"/collection/"+n},t))))}}]),t}(u.default.Component);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(83),f=(r(c),n(154)),d=r(f),p=n(8),h=p.connect,m=(n(47),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.collections;return e.length>0?u.default.createElement("div",{className:"row"},e.map(function(e){return u.default.createElement(d.default,{key:e.collection_id,id:e.collection_id,title:e.title})})):u.default.createElement("div",null,"Loading collections...")}}]),t}(u.default.Component));t.default=h(function(e){return{collections:e.collections.all}})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("footer",{id:"site-footer"},u.default.createElement("nav",{className:"footer-nav"},u.default.createElement("li",null,u.default.createElement(c.Link,{to:"/about",activeClassName:"active"},"About")),u.default.createElement("li",null,u.default.createElement(c.Link,{to:"/products",activeClassName:"active"},"Shop All")),u.default.createElement("li",null,u.default.createElement(c.Link,{to:"/contact",activeClassName:"active"},"Contact")),u.default.createElement("li",null,u.default.createElement(c.Link,{to:"/upload",activeClassName:"active"},"Upload Design"))),u.default.createElement("p",null,"Lorem ipsum dolar sit amit. Sed dono avec."))}}]),t}(u.default.Component);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=n(8),d=f.connect,p=n(15),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.cartItems;return u.default.createElement("header",{id:"site-header"},u.default.createElement("ul",{className:"mini-nav"},u.default.createElement("li",{className:"mini-nav-item"},u.default.createElement(c.Link,{to:"/about",activeClassName:"active"},"About")),u.default.createElement("li",{className:"mini-nav-item"},u.default.createElement(c.Link,{to:"/order-status",activeClassName:"active"},"Order Status")),u.default.createElement("li",{className:"mini-nav-item"},u.default.createElement(c.Link,{to:"/map",activeClassName:"active"},"Map")),u.default.createElement("li",{className:"mini-nav-item"},u.default.createElement(c.Link,{to:"/login",activeClassName:"active"},"Login")),u.default.createElement("li",{className:"mini-nav-item mini-nav-item-cart",onClick:function(){t(p.openCart())}},u.default.createElement("i",{className:"fa fa-shopping-cart"})," ",n>0?"["+n+"]":"")),u.default.createElement("div",{id:"site-logo"},u.default.createElement(c.IndexLink,{to:"/",activeClassName:"active",activeStyle:{fontWeight:"bold"}},u.default.createElement("img",{src:"/images/logo.png"}))),u.default.createElement("nav",{id:"site-nav"},u.default.createElement("li",{className:"site-nav-item"},u.default.createElement(c.Link,{to:"/products",activeClassName:"active"},"Shop")),u.default.createElement("li",{className:"site-nav-item"},u.default.createElement(c.Link,{to:"/my-city",activeClassName:"active"},"My City")),u.default.createElement("li",{className:"site-nav-item"},u.default.createElement(c.Link,{to:"/categories",activeClassName:"active"},"Categories")),u.default.createElement("div",{id:"site-nav-upload"},u.default.createElement(c.Link,{to:"/upload"},u.default.createElement("img",{src:"/images/upload.png"})))))}}]),t}(u.default.Component);t.default=d(function(e){return{cartItems:e.cart.lineItemsCount}})(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(313),f=r(c),d=n(12),p=n(50),h=r(p),m=n(85),v=r(m),y=n(8),g=y.connect,b=n(15),w=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"handleAddToCart",value:function(e){var t=this.props.dispatch;t(b.startAddorUpdateCartItem(e.selectedVariant,1))}},{key:"render",value:function(){var e=this,t=this.props.products;t=t.slice(0,12);var n={className:"center products-carousel",infinite:!0,centerPadding:"60px",autoplay:!0,slidesToShow:4,speed:500,arrows:!1,lazyLoad:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]};return t.length>0?u.default.createElement("div",null,u.default.createElement(f.default,n,t.map(function(e,t){return u.default.createElement("div",{key:t,className:"products-carousel-item"},u.default.createElement(d.Link,{to:"/product/"+e.attrs.product_id},u.default.createElement("div",{className:"product-item-image",style:{backgroundImage:"url("+e.selectedVariant.imageVariants[5].src+")"}})))})),u.default.createElement("section",{className:"section-callout"},u.default.createElement("div",{className:"container"},u.default.createElement("h4",{className:"section-headline"},"Show your pride. Display your talents. ",u.default.createElement("span",{className:"font-white"},"Rep your city.")),u.default.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam semper nulla vel elit gravida, vel placerat turpis convallis. Praesent eu lorem suscipit, gravida leo sed, luctus erat. Nullam consectetur, tortor a facilisis lobortis, velit massa mattis risus, eget imperdiet velit arcu non mauris. Mauris bibendum bibendum ligula, nec maximus sapien porta non."),u.default.createElement("div",{className:"section-callout__cta-items"},u.default.createElement(d.Link,{to:"/products"},u.default.createElement("img",{src:"/images/button-shop.png",alt:"Shop now"})),u.default.createElement("div",{className:"search-box"},u.default.createElement("i",{className:"fa fa-search"}),u.default.createElement("input",{tyep:"text",placeholder:"Keyword Search"})),u.default.createElement(d.Link,{to:"/upload"},u.default.createElement("img",{src:"/images/button-upload.png",alt:"Shop now"}))))),u.default.createElement("div",{className:"container"},u.default.createElement("h3",{className:"products-grid-title"},"What's hot / What's new"),u.default.createElement("div",{className:"products-grid"},t.map(function(t){return u.default.createElement(v.default,{key:t.key,addToCart:function(){return e.handleAddToCart(t)},id:t.attrs.product_id,title:t.attrs.title,image:t.selectedVariant.imageVariants[5].src})})))):u.default.createElement(h.default,null)}}]),t}(u.default.Component);t.default=g(function(e){return{products:e.products.all}})(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(157),f=r(c),d=n(156),p=r(d),h=n(16),m=r(h),v=n(162),y=r(v),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={title:"",content:""},n}return a(t,e),s(t,[{key:"render",value:function(){var e={title:"Rep Your City",description:"Rep Your City description",meta:{charset:"utf-8"},auto:{ograph:!0}},t=this.props.location.pathname.substr(1).split("/");return u.default.createElement("div",{id:"main",className:"page-"+(t[0]?t[0]+" subpage":"home")},u.default.createElement(m.default,e),u.default.createElement(f.default,null),u.default.createElement("div",{id:"main-container"},u.default.createElement(y.default,null),this.props.children),u.default.createElement(p.default,null))}}]),t}(u.default.Component);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(50),f=r(c),d=n(85),p=r(d),h=n(8),m=h.connect,v=n(15),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"handleAddToCart",value:function(e){var t=this.props.dispatch;t(v.startAddorUpdateCartItem(e.selectedVariant,1))}},{key:"render",value:function(){var e=this,t=this.props.products;return t.length>0?u.default.createElement("div",{className:"container"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"small-12 medium-3 columns"},u.default.createElement("nav",{className:"products-nav"},u.default.createElement("h4",{className:"products-nav__headline"},"Categories"),u.default.createElement("ul",null,u.default.createElement("li",null,"City / state"),u.default.createElement("li",null,"Sports"),u.default.createElement("li",null,"Hobbies"),u.default.createElement("li",null,"Music"),u.default.createElement("li",null,"Animals"),u.default.createElement("li",null,"Show all")),u.default.createElement("h4",{className:"products-nav__headline"},"Style"),u.default.createElement("div",{className:"products-nav__search"},u.default.createElement("input",{type:"text",placeholder:"Select style"}),u.default.createElement("button",{type:"submit",className:"products-nav__search-button"},u.default.createElement("i",{className:"fa fa-search"}))),u.default.createElement("h4",{className:"products-nav__headline"},"Search"),u.default.createElement("div",{className:"products-nav__search"},u.default.createElement("input",{type:"text",placeholder:"Enter keywords"}),u.default.createElement("button",{type:"submit",className:"products-nav__search-button"},u.default.createElement("i",{className:"fa fa-search"}))))),u.default.createElement("div",{className:"small-12 medium-9 column"},u.default.createElement("div",{className:"products-grid"},t.map(function(t){return u.default.createElement(p.default,{key:t.key,addToCart:function(){return e.handleAddToCart(t)},id:t.attrs.product_id,title:t.attrs.title,image:t.selectedVariant.imageVariants[4].src})}))))):u.default.createElement(f.default,null)}}]),t}(u.default.Component);t.default=m(function(e){return{products:e.products.all}})(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=(n(12),n(8)),f=c.connect,d=(n(48),n(15),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){this.props.dispatch;return u.default.createElement("div",{className:"container text-center"},u.default.createElement("img",{src:"/images/upload-placeholder.png"}))}}]),t}(u.default.Component));t.default=f(function(e){return{activeProduct:e.products.active}})(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(24),f=r(c),d=n(153),p=r(d),h=n(51),m=r(h),v=n(8),y=v.connect,g=n(15),b=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.handleCheckout();return e}return a(t,e),s(t,[{key:"componentWillMount",value:function(){this.dispatch=this.props.dispatch}},{key:"handleCloseCart",value:function(){this.dispatch(g.closeCart())}},{key:"handleCheckout",value:function(){window.open(f.default.cart.checkoutUrl,"_self")}},{key:"render",value:function(){var e=this.props.cart,t=e.isOpen,n=e.lineItems,r=(e.lineItemCount,e.subtotal),i=function(){if(n.length>0)return n.map(function(e){return u.default.createElement(p.default,{key:e.id,item:e,quantity:e.quantity})})};return u.default.createElement("div",{className:"cart "+(t?"js-active":"")},u.default.createElement("div",{className:"cart-section cart-section--top"},u.default.createElement("h2",{className:"cart-title"},"Your cart: ",t),u.default.createElement("button",{className:"btn--close"},u.default.createElement("div",{onClick:this.handleCloseCart.bind(this)},"Ã—"),u.default.createElement("span",{className:"hide"},"Close"))),u.default.createElement("div",{className:"cart-form"},u.default.createElement("div",{className:"cart-item-container cart-section"},u.default.createElement("div",null,i())),u.default.createElement("div",{className:"cart-bottom"},u.default.createElement("div",{className:"cart-info clearfix cart-section"},u.default.createElement("div",{className:"type--caps cart-info__total cart-info__small"},"Total"),u.default.createElement("div",{className:"cart-info__pricing"},u.default.createElement("span",{className:"cart-info__small cart-info__total"},"USD"),u.default.createElement("span",{className:"pricing pricing--no-padding"},m.default.asMoney(r)))),u.default.createElement("div",{className:"cart-actions-container cart-section type--center"},u.default.createElement("div",{className:"cart-discount-notice cart-info__small"},"Shipping and discount codes are added at checkout."),u.default.createElement("input",{type:"submit",className:"btn btn--cart-checkout",id:"checkout",name:"checkout",value:"Checkout",onClick:this.handleCheckout})))))}}]),t}(u.default.Component);t.default=y(function(e){return{cart:e.cart}})(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"About us")))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),
r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"Contact")))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"Login"),u.default.createElement("form",null,u.default.createElement("input",{type:"text",placeholder:"Email"}),u.default.createElement("input",{type:"password",placeholder:"Password"}),u.default.createElement("input",{type:"submit",className:"button",value:"Login"}))))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"Map page")))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"Order Status page")))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.productsReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:[],active:null},t=arguments[1];switch(t.type){case"ADD_PRODUCTS":return r({},e,{all:t.products});case"SET_ACTIVE_PRODUCT":return r({},e,{active:r({},e.active,{fetched:!0,options:t.options})});case"CLEAR_ACTIVE_PRODUCT":return r({},e,{active:null});case"UPDATE_ACTIVE_PRODUCT_OPTIONS":return r({},e,{active:r({},e.active,{options:t.options})});default:return e}},t.collectionsReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:[],active:null},t=arguments[1];switch(t.type){case"ADD_COLLECTIONS":return r({},e,{all:t.collections});case"SET_ACTIVE_COLLECTION":return r({},e,{active:t.parsedCollection});default:return e}},t.cartReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,lineItems:[]},t=arguments[1];switch(t.type){case"SET_INITIAL_CART_STATE":return r({},t.localCart);case"UPDATE_CART_ITEMS":return r({},e,{lineItems:t.updatedCartItems});case"UPDATE_CART_ITEMS_COUNT":return r({},e,{lineItemsCount:t.updatedCartItemsCount});case"UPDATE_CART_SUBTOTAL":return r({},e,{subtotal:t.newSubtotal});case"OPEN_CART":return r({},e,{isOpen:!0});case"CLOSE_CART":return r({},e,{isOpen:!1});default:return e}},t.navReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showClose:!1,showNav:!1},t=arguments[1];switch(t.type){case"TOGGLE_NAV_ICON":return r({},e,{showClose:!e.showClose,showNav:e.showNav});case"TOGGLE_NAV":return r({},e,{showClose:!e.showClose,showNav:!e.showNav});case"CLOSE_NAV":return r({},e,{showClose:!1,showNav:!1});default:return e}}},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,a,s,l=e.length;a=r(e),s=new f(3*l/4-a),i=a>0?l-4:l;var u=0;for(t=0,n=0;t<i;t+=4,n+=3)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[u++]=o>>16&255,s[u++]=o>>8&255,s[u++]=255&o;return 2===a?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[u++]=255&o):1===a&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[u++]=o>>8&255,s[u++]=255&o),s}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i="",o=[],a=16383,l=0,c=n-r;l<c;l+=a)o.push(s(e,l,l+a>c?c:l+a));return 1===r?(t=e[n-1],i+=u[t>>2],i+=u[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=u[t>>10],i+=u[t>>4&63],i+=u[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=l;for(var u=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=d.length;p<h;++p)u[p]=d[p],c[d.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t,n){"use strict";(function(e){function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?f(e,t,n):h(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return l(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function c(e,t){if(l(t),e=o(e,t<0?0:0|m(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function d(e,t){var n=t.length<0?0:0|m(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=d(e,t),e}function h(e,t){if(a.isBuffer(t)){var n=0|m(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?o(e,0):d(e,t);if("Buffer"===t.type&&Z(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),a.alloc(+e)}function y(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function w(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var u;if(i){var c=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===l)return c*a}else c!==-1&&(u-=u-c),c=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var f=!0,d=0;d<l;d++)if(o(e,u+d)!==o(t,d)){f=!1;break}if(f)return u}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function S(e,t,n,r){return G(Y(t,e.length-n),e,n,r)}function C(e,t,n,r){return G(V(t),e,n,r)}function O(e,t,n,r){return C(e,t,n,r)}function T(e,t,n,r){return G(X(t),e,n,r)}function k(e,t,n,r){return G(K(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var l,u,c,f;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(f=(31&o)<<6|63&l,f>127&&(a=f));break;case 3:l=e[i+1],u=e[i+2],128===(192&l)&&128===(192&u)&&(f=(15&o)<<12|(63&l)<<6|63&u,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(f=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return N(r)}function N(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function q(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(e,t,n,r,i){return i||q(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,i){return i||q(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,n,r,52,8),n+8}function H(e){if(e=B(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function B(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function K(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function X(e){return Q.toByteArray(H(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function J(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Q=n(169),$=n(194),Z=n(171);t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return u(null,e,t,n)},a.allocUnsafe=function(e){return c(null,e)},a.allocUnsafeSlow=function(e){return c(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):g.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,l=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),f=0;f<l;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},a.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),$.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),$.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),$.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),$.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:Y(new a(e,r).toString()),l=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(46))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){var n=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=n},function(e,t){function n(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function r(e){if(!(this instanceof r))return new r(e);e||(e={}),e.nodeType&&(e={el:e}),this.opts=e,this.el=e.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}e.exports=function(e){return new r(e)},r.prototype.add=function(e){var t=this.el;if(t){if(""===t.className)return t.className=e;var r=t.className.split(" ");return n(r,e)>-1?r:(r.push(e),t.className=r.join(" "),r)}},r.prototype.remove=function(e){var t=this.el;if(t&&""!==t.className){var r=t.className.split(" "),i=n(r,e);return i>-1&&r.splice(i,1),t.className=r.join(" "),r}},r.prototype.has=function(e){var t=this.el;if(t){var r=t.className.split(" ");return n(r,e)>-1}},r.prototype.toggle=function(e){var t=this.el;t&&(this.has(e)?this.remove(e):this.add(e))}},function(e,t,n){var r;!function(i,o,a){var s=window.matchMedia;"undefined"!=typeof e&&e.exports?e.exports=a(s):(r=function(){return o[i]=a(s)}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))}("enquire",this,function(e){"use strict";function t(e,t){var n,r=0,i=e.length;for(r;r<i&&(n=t(e[r],r),n!==!1);r++);}function n(e){return"[object Array]"===Object.prototype.toString.apply(e)}function r(e){return"function"==typeof e}function i(e){this.options=e,!e.deferSetup&&this.setup()}function o(t,n){this.query=t,this.isUnconditional=n,this.handlers=[],this.mql=e(t);var r=this;this.listener=function(e){r.mql=e,r.assess()},this.mql.addListener(this.listener)}function a(){if(!e)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!e("only all").matches}return i.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},o.prototype={addHandler:function(e){var t=new i(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var n=this.handlers;t(n,function(t,r){if(t.equals(e))return t.destroy(),!n.splice(r,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){t(this.handlers,function(e){e.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";t(this.handlers,function(t){t[e]()})}},a.prototype={register:function(e,i,a){var s=this.queries,l=a&&this.browserIsIncapable;return s[e]||(s[e]=new o(e,l)),r(i)&&(i={match:i}),n(i)||(i=[i]),t(i,function(t){s[e].addHandler(t)}),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}},new a})},function(e,t,n){var r;/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};r=function(){return o}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}()},,,,,,,,,,,,,,,,,,,function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+f>=1?d/l:d*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*m}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(0),i=n(3),o="_blank",a=r.createClass({displayName:"OutboundLink",propTypes:{eventLabel:r.PropTypes.string.isRequired},statics:{trackLink:function(){console.warn("ga tracking not enabled")}},handleClick:function(e){e.preventDefault();var t=this.props,n={label:t.eventLabel};a.trackLink(n,function(){t.target===o?window.open(t.to,o):window.location.href=t.to}),t.onClick&&t.onClick(e)},render:function(){var e=i({},this.props,{href:this.props.to,onClick:this.handleClick});return delete e.eventLabel,r.createElement("a",e)}});e.exports=a},function(e,t,n){var r=n(274),i=n(276),o=n(124),a=n(123),s=n(273),l=!1,u=!0,c=function(e){return r(e,u)},f={initialize:function(e,t){return e?(t&&(t.debug&&t.debug===!0&&(l=!0),t.titleCase===!1&&(u=!1)),function(e,t,n,r,i,o,a){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),a=t.getElementsByTagName(n)[0],o.async=1,o.src=r,a.parentNode.insertBefore(o,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),void(t&&t.gaOptions?ga("create",e,t.gaOptions):ga("create",e,"auto"))):void a("gaTrackingID is required in initialize()")},ga:function(){return arguments.length>0?(ga.apply(this,arguments),void(l&&(s("called ga('arguments');"),s("with arguments: "+JSON.stringify([].slice.apply(arguments)))))):ga},set:function(e){if("function"==typeof ga){if(!e)return void a("`fieldsObject` is required in .set()");if("object"!=typeof e)return void a("Expected `fieldsObject` arg to be an Object");0===Object.keys(e).length&&a("empty `fieldsObject` given to .set()"),ga("set",e),l&&(s("called ga('set', fieldsObject);"),s("with fieldsObject: "+JSON.stringify(e)))}},send:function(e){"function"==typeof ga&&(ga("send",e),l&&(s("called ga('send', fieldObject);"),s("with fieldObject: "+JSON.stringify(e))))},pageview:function(e){return e?(e=o(e),""===e?void a("path cannot be an empty string in .pageview()"):void("function"==typeof ga&&(ga("send","pageview",e),l&&(s("called ga('send', 'pageview', path);"),s("with path: "+e))))):void a("path is required in .pageview()")},modalview:function(e){if(!e)return void a("modalName is required in .modalview(modalName)");if(e=o(e),e=i(e),""===e)return void a("modalName cannot be an empty string or a single / in .modalview()");if("function"==typeof ga){e=o(e);var t="/modal/"+e;ga("send","pageview",t),l&&(s("called ga('send', 'pageview', path);"),s("with path: "+t))}},timing:function(e){if("function"==typeof ga){if(!(e&&e.category&&e.variable&&e.value&&"number"==typeof e.value))return void a("args.category, args.variable AND args.value are required in timing() AND args.value has to be a number");var t={hitType:"timing",timingCategory:c(e.category),timingVar:c(e.variable),timingValue:e.value};e.label&&(t.timingLabel=c(e.label)),this.send(t)}},event:function(e){if("function"==typeof ga){if(!e||!e.category||!e.action)return void a("args.category AND args.action are required in event()");var t={hitType:"event",eventCategory:c(e.category),eventAction:c(e.action)};e.label&&(t.eventLabel=c(e.label)),e.value&&("number"!=typeof e.value?a("Expected `args.value` arg to be a Number."):t.eventValue=e.value),e.nonInteraction&&("boolean"!=typeof e.nonInteraction?a("`args.nonInteraction` must be a boolean."):t.nonInteraction=e.nonInteraction),e.transport&&("string"!=typeof e.transport?a("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(e.transport)===-1&&a("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),t.transport=e.transport)),this.send(t)}},exception:function(e){if("function"==typeof ga){var t={hitType:"exception"};e.description&&(t.exDescription=c(e.description)),"undefined"!=typeof e.fatal&&("boolean"!=typeof e.fatal?a("`args.fatal` must be a boolean."):t.exFatal=e.fatal),this.send(t)}},plugin:{require:function(e,t){if("function"==typeof ga)return e?(e=o(e),""===e?void a("`name` cannot be an empty string in .require()"):t?"object"!=typeof t?void a("Expected `options` arg to be an Object"):(0===Object.keys(t).length&&a("Empty `options` given to .require()"),ga("require",e,t),void(l&&s("called ga('require', '"+e+"', "+JSON.stringify(t)+");"))):(ga("require",e),void(l&&s("called ga('require', '"+e+"');")))):void a("`name` is required in .require()")},execute:function(){var e,t,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1];if(3===n.length?e=n[2]:(t=n[2],e=n[3]),"function"==typeof ga)if("string"!=typeof r)a("Expected `pluginName` arg to be a String.");else if("string"!=typeof i)a("Expected `action` arg to be a String.");else{var o=r+":"+i;e=e||null,t&&e?(ga(o,t,e),l&&(s("called ga('"+o+"');"),s('actionType: "'+t+'" with payload: '+JSON.stringify(e)))):e?(ga(o,e),l&&(s("called ga('"+o+"');"),s("with payload: "+JSON.stringify(e)))):(ga(o),l&&s("called ga('"+o+"');"))}}},outboundLink:function(e,t){if("function"!=typeof t)return void a("hitCallback function is required");if("function"==typeof ga){if(!e||!e.label)return void a("args.label is required in outboundLink()");var n={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:c(e.label)},r=!1,i=function(){r=!0,t()},o=setTimeout(i,250),s=function(){clearTimeout(o),r||t()};n.hitCallback=s,this.send(n)}else setTimeout(t,0)}},d=n(271);d.origTrackLink=d.trackLink,d.trackLink=f.outboundLink.bind(f),f.OutboundLink=d,e.exports=f},function(e,t){function n(e){console.info("[react-ga]",e)}e.exports=n},function(e,t,n){function r(e,t){return i(e)?(a("This arg looks like an email address, redacting."),s):t?o(e):e}var i=n(275),o=n(277),a=n(123),s="REDACTED (Potential Email Address)";e.exports=r},function(e,t){function n(e){return/[^@]+@[^@]+/.test(e)}e.exports=n},function(e,t){function n(e){return"/"===e.substring(0,1)&&(e=e.substring(1)),e}e.exports=n},function(e,t,n){function r(e){var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return e=i(e),e.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,n,r){return n>0&&n+e.length!==r.length&&e.search(t)>-1&&":"!==r.charAt(n-2)&&("-"!==r.charAt(n+e.length)||"-"===r.charAt(n-1))&&r.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})}var i=n(124);e.exports=r},function(e,t,n){function r(e){return e()}var i=n(0),o=n(17),a=n(175),s=i.createFactory(n(279)),l=n(280),u=n(173),c=n(17).unstable_renderSubtreeIntoContainer,f=n(95),d=a.canUseDOM?window.HTMLElement:{},p=a.canUseDOM?document.body:{appendChild:function(){}},h=i.createClass({displayName:"Modal",statics:{setAppElement:function(e){p=l.setElement(e)},injectCSS:function(){}},propTypes:{isOpen:i.PropTypes.bool.isRequired,style:i.PropTypes.shape({content:i.PropTypes.object,overlay:i.PropTypes.object}),portalClassName:i.PropTypes.string,appElement:i.PropTypes.instanceOf(d),onAfterOpen:i.PropTypes.func,onRequestClose:i.PropTypes.func,closeTimeoutMS:i.PropTypes.number,ariaHideApp:i.PropTypes.bool,shouldCloseOnOverlayClick:i.PropTypes.bool,parentSelector:i.PropTypes.func,role:i.PropTypes.string,contentLabel:i.PropTypes.string.isRequired},getDefaultProps:function(){return{isOpen:!1,portalClassName:"ReactModalPortal",ariaHideApp:!0,closeTimeoutMS:0,shouldCloseOnOverlayClick:!0,parentSelector:function(){return document.body}}},componentDidMount:function(){this.node=document.createElement("div"),this.node.className=this.props.portalClassName;var e=r(this.props.parentSelector);e.appendChild(this.node),this.renderPortal(this.props)},componentWillReceiveProps:function(e){var t=r(this.props.parentSelector),n=r(e.parentSelector);n!==t&&(t.removeChild(this.node),n.appendChild(this.node)),this.renderPortal(e)},componentWillUnmount:function(){this.props.ariaHideApp&&l.show(this.props.appElement),o.unmountComponentAtNode(this.node);var e=r(this.props.parentSelector);e.removeChild(this.node),u(document.body).remove("ReactModal__Body--open")},renderPortal:function(e){e.isOpen?u(document.body).add("ReactModal__Body--open"):u(document.body).remove("ReactModal__Body--open"),e.ariaHideApp&&l.toggle(e.isOpen,e.appElement),this.portal=c(this,s(f({},e,{defaultStyles:h.defaultStyles})),this.node)},render:function(){return i.DOM.noscript()}});h.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},e.exports=h},function(e,t,n){var r=n(0),i=r.DOM.div,o=n(281),a=n(282),s=n(95),l={overlay:{base:"ReactModal__Overlay",afterOpen:"ReactModal__Overlay--after-open",beforeClose:"ReactModal__Overlay--before-close"},content:{base:"ReactModal__Content",afterOpen:"ReactModal__Content--after-open",beforeClose:"ReactModal__Content--before-close"}};e.exports=r.createClass({displayName:"ModalPortal",shouldClose:null,getDefaultProps:function(){return{style:{overlay:{},content:{}}}},getInitialState:function(){return{afterOpen:!1,beforeClose:!1}},componentDidMount:function(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())},componentWillUnmount:function(){clearTimeout(this.closeTimer)},componentWillReceiveProps:function(e){!this.props.isOpen&&e.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!e.isOpen&&this.close()},componentDidUpdate:function(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))},setFocusAfterRender:function(e){this.focusAfterRender=e},open:function(){this.state.afterOpen&&this.state.beforeClose?(clearTimeout(this.closeTimer),this.setState({beforeClose:!1})):(o.setupScopedFocus(this.node),o.markForFocusLater(),this.setState({isOpen:!0},function(){this.setState({afterOpen:!0}),this.props.isOpen&&this.props.onAfterOpen&&this.props.onAfterOpen()}.bind(this)))},close:function(){this.props.closeTimeoutMS>0?this.closeWithTimeout():this.closeWithoutTimeout()},focusContent:function(){this.contentHasFocus()||this.refs.content.focus()},closeWithTimeout:function(){this.setState({beforeClose:!0},function(){this.closeTimer=setTimeout(this.closeWithoutTimeout,this.props.closeTimeoutMS)}.bind(this))},closeWithoutTimeout:function(){this.setState({beforeClose:!1,isOpen:!1,afterOpen:!1},this.afterClose)},afterClose:function(){o.returnFocus(),o.teardownScopedFocus()},handleKeyDown:function(e){9==e.keyCode&&a(this.refs.content,e),27==e.keyCode&&(e.preventDefault(),this.requestClose(e))},handleOverlayMouseDown:function(e){null===this.shouldClose&&(this.shouldClose=!0)},handleOverlayMouseUp:function(e){this.shouldClose&&this.props.shouldCloseOnOverlayClick&&(this.ownerHandlesClose()?this.requestClose(e):this.focusContent()),this.shouldClose=null},handleContentMouseDown:function(e){this.shouldClose=!1},handleContentMouseUp:function(e){this.shouldClose=!1},requestClose:function(e){this.ownerHandlesClose()&&this.props.onRequestClose(e)},ownerHandlesClose:function(){return this.props.onRequestClose},shouldBeClosed:function(){return!this.props.isOpen&&!this.state.beforeClose},contentHasFocus:function(){return document.activeElement===this.refs.content||this.refs.content.contains(document.activeElement)},buildClassName:function(e,t){var n=l[e].base;return this.state.afterOpen&&(n+=" "+l[e].afterOpen),this.state.beforeClose&&(n+=" "+l[e].beforeClose),t?n+" "+t:n},render:function(){var e=this.props.className?{}:this.props.defaultStyles.content,t=this.props.overlayClassName?{}:this.props.defaultStyles.overlay;return this.shouldBeClosed()?i():i({ref:"overlay",className:this.buildClassName("overlay",this.props.overlayClassName),style:s({},t,this.props.style.overlay||{}),onMouseDown:this.handleOverlayMouseDown,onMouseUp:this.handleOverlayMouseUp},i({ref:"content",style:s({},e,this.props.style.content||{}),className:this.buildClassName("content",this.props.className),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentMouseDown,onMouseUp:this.handleContentMouseUp,role:this.props.role,"aria-label":this.props.contentLabel},this.props.children))}})},function(e,t){function n(e){if("string"==typeof e){var t=document.querySelectorAll(e);e="length"in t?t[0]:t}return l=e||l}function r(e){a(e),(e||l).setAttribute("aria-hidden","true")}function i(e){a(e),(e||l).removeAttribute("aria-hidden")}function o(e,t){e?r(t):i(t)}function a(e){if(!e&&!l)throw new Error("react-modal: You must set an element with `Modal.setAppElement(el)` to make this accessible")}function s(){l=document.body}var l="undefined"!=typeof document?document.body:null;t.toggle=o,t.setElement=n,t.show=i,t.hide=r,t.resetForTesting=s},function(e,t,n){function r(e){l=!0}function i(e){if(l){if(l=!1,!a)return;setTimeout(function(){if(!a.contains(document.activeElement)){var e=o(a)[0]||a;e.focus()}},0)}}var o=n(125),a=null,s=null,l=!1;t.markForFocusLater=function(){s=document.activeElement},t.returnFocus=function(){try{s.focus()}catch(e){console.warn("You tried to return focus to "+s+" but it is not in the DOM anymore")}s=null},t.setupScopedFocus=function(e){a=e,window.addEventListener?(window.addEventListener("blur",r,!1),document.addEventListener("focus",i,!0)):(window.attachEvent("onBlur",r),document.attachEvent("onFocus",i))},t.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",r),document.removeEventListener("focus",i)):(window.detachEvent("onBlur",r),document.detachEvent("onFocus",i))}},function(e,t,n){var r=n(125);e.exports=function(e,t){var n=r(e);if(!n.length)return void t.preventDefault();var i=n[t.shiftKey?0:n.length-1],o=i===document.activeElement||e===document.activeElement;if(o){t.preventDefault();var a=n[t.shiftKey?n.length-1:0];a.focus()}}},function(e,t,n){e.exports=n(278)},,,,,,,,,function(e,t,n){var r=n(172),i=r&&n(174),o=n(93),a={media:function(e,t){e=o(e),"function"==typeof t&&(t={match:t}),r&&i.register(e,t),this._responsiveMediaHandlers||(this._responsiveMediaHandlers=[]),this._responsiveMediaHandlers.push({query:e,handler:t})},componentWillUnmount:function(){this._responsiveMediaHandlers&&this._responsiveMediaHandlers.forEach(function(e){r&&i.unregister(e.query,e.handler)})}};e.exports=a},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.NextArrow=t.PrevArrow=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),s=n(38),l=r(s),u=n(80),c=r(u);t.PrevArrow=a.default.createClass({displayName:"PrevArrow",clickHandler:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)},render:function(){var e={"slick-arrow":!0,"slick-prev":!0},t=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(e["slick-disabled"]=!0,t=null);var n,r={key:"0","data-role":"none",className:(0,l.default)(e),currentSlide:this.props.currentSlide,slideCount:this.props.slideCount,style:{display:"block"},onClick:t};return n=this.props.prevArrow?a.default.cloneElement(this.props.prevArrow,r):a.default.createElement("button",i({key:"0",type:"button"},r)," Previous")}}),t.NextArrow=a.default.createClass({displayName:"NextArrow",clickHandler:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)},render:function(){var e={"slick-arrow":!0,"slick-next":!0},t=this.clickHandler.bind(this,{message:"next"});c.default.canGoNext(this.props)||(e["slick-disabled"]=!0,t=null);var n,r={key:"1","data-role":"none",className:(0,l.default)(e),currentSlide:this.props.currentSlide,slideCount:this.props.slideCount,style:{display:"block"},onClick:t};return n=this.props.nextArrow?a.default.cloneElement(this.props.nextArrow,r):a.default.createElement("button",i({key:"1",type:"button"},r)," Next")}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Dots=void 0;var i=n(0),o=r(i),a=n(38),s=r(a),l=function(e){var t;return t=Math.ceil(e.slideCount/e.slidesToScroll)};t.Dots=o.default.createClass({displayName:"Dots",clickHandler:function(e,t){t.preventDefault(),this.props.clickHandler(e)},render:function(){var e=this,t=l({slideCount:this.props.slideCount,slidesToScroll:this.props.slidesToScroll}),n=Array.apply(null,Array(t+1).join("0").split("")).map(function(t,n){var r=n*e.props.slidesToScroll,i=n*e.props.slidesToScroll+(e.props.slidesToScroll-1),a=(0,s.default)({"slick-active":e.props.currentSlide>=r&&e.props.currentSlide<=i}),l={message:"dots",index:n,slidesToScroll:e.props.slidesToScroll,currentSlide:e.props.currentSlide},u=e.clickHandler.bind(e,l);return o.default.createElement("li",{key:n,className:a},o.default.cloneElement(e.props.customPaging(n),{onClick:u}))});return o.default.createElement("ul",{className:this.props.dotsClass,style:{display:"block"}},n)}})},function(e,t,n){"use strict";e.exports=n(317)},function(e,t,n){"use strict";var r={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,listWidth:null,listHeight:null,slideCount:null,slideWidth:null,slideHeight:null,swipeLeft:null,touchObject:{startX:0,startY:0,curX:0,curY:0},lazyLoadedList:[],initialized:!1,edgeDragged:!1,swiped:!1,trackStyle:{},trackWidth:0};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.InnerSlider=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),s=n(316),l=r(s),u=n(80),c=r(u),f=n(314),d=r(f),p=n(139),h=r(p),m=n(38),v=r(m),y=n(3),g=r(y),b=n(318),w=n(312),E=n(311);t.InnerSlider=a.default.createClass({displayName:"InnerSlider",mixins:[c.default,l.default],list:null,track:null,listRefHandler:function(e){this.list=e},trackRefHandler:function(e){this.track=e},getInitialState:function(){return i({},d.default,{currentSlide:this.props.initialSlide})},getDefaultProps:function(){return h.default},componentWillMount:function(){this.props.init&&this.props.init(),this.setState({mounted:!0});for(var e=[],t=0;t<a.default.Children.count(this.props.children);t++)t>=this.state.currentSlide&&t<this.state.currentSlide+this.props.slidesToShow&&e.push(t);this.props.lazyLoad&&0===this.state.lazyLoadedList.length&&this.setState({lazyLoadedList:e})},componentDidMount:function(){this.initialize(this.props),this.adaptHeight(),window&&(window.addEventListener?window.addEventListener("resize",this.onWindowResized):window.attachEvent("onresize",this.onWindowResized))},componentWillUnmount:function(){this.animationEndCallback&&clearTimeout(this.animationEndCallback),window.addEventListener?window.removeEventListener("resize",this.onWindowResized):window.detachEvent("onresize",this.onWindowResized),this.state.autoPlayTimer&&clearInterval(this.state.autoPlayTimer)},componentWillReceiveProps:function(e){this.props.slickGoTo!=e.slickGoTo?this.changeSlide({message:"index",index:e.slickGoTo,currentSlide:this.state.currentSlide}):this.state.currentSlide>=e.children.length?(this.update(e),this.changeSlide({message:"index",index:e.children.length-e.slidesToShow,currentSlide:this.state.currentSlide})):this.update(e)},componentDidUpdate:function(){this.adaptHeight()},onWindowResized:function(){this.update(this.props),this.setState({animating:!1}),clearTimeout(this.animationEndCallback),delete this.animationEndCallback},slickPrev:function(){this.changeSlide({message:"previous"})},slickNext:function(){this.changeSlide({message:"next"})},slickGoTo:function(e){"number"==typeof e&&this.changeSlide({message:"index",index:e,currentSlide:this.state.currentSlide})},render:function(){var e,t=(0,v.default)("slick-initialized","slick-slider",this.props.className,{"slick-vertical":this.props.vertical}),n={fade:this.props.fade,cssEase:this.props.cssEase,speed:this.props.speed,infinite:this.props.infinite,centerMode:this.props.centerMode,focusOnSelect:this.props.focusOnSelect?this.selectHandler:null,currentSlide:this.state.currentSlide,lazyLoad:this.props.lazyLoad,lazyLoadedList:this.state.lazyLoadedList,rtl:this.props.rtl,slideWidth:this.state.slideWidth,slidesToShow:this.props.slidesToShow,slidesToScroll:this.props.slidesToScroll,slideCount:this.state.slideCount,trackStyle:this.state.trackStyle,variableWidth:this.props.variableWidth};if(this.props.dots===!0&&this.state.slideCount>=this.props.slidesToShow){var r={dotsClass:this.props.dotsClass,slideCount:this.state.slideCount,slidesToShow:this.props.slidesToShow,currentSlide:this.state.currentSlide,slidesToScroll:this.props.slidesToScroll,clickHandler:this.changeSlide,children:this.props.children,customPaging:this.props.customPaging};e=a.default.createElement(w.Dots,r)}var o,s,l={infinite:this.props.infinite,centerMode:this.props.centerMode,currentSlide:this.state.currentSlide,slideCount:this.state.slideCount,slidesToShow:this.props.slidesToShow,prevArrow:this.props.prevArrow,nextArrow:this.props.nextArrow,clickHandler:this.changeSlide};this.props.arrows&&(o=a.default.createElement(E.PrevArrow,l),s=a.default.createElement(E.NextArrow,l));var u=null;this.props.vertical&&(u={height:this.state.listHeight});var c=null;this.props.vertical===!1?this.props.centerMode===!0&&(c={padding:"0px "+this.props.centerPadding}):this.props.centerMode===!0&&(c={padding:this.props.centerPadding+" 0px"});var f=(0,g.default)({},u,c);return a.default.createElement("div",{className:t,onMouseEnter:this.onInnerSliderEnter,onMouseLeave:this.onInnerSliderLeave,onMouseOver:this.onInnerSliderOver},o,a.default.createElement("div",{ref:this.listRefHandler,className:"slick-list",style:f,onMouseDown:this.swipeStart,onMouseMove:this.state.dragging?this.swipeMove:null,onMouseUp:this.swipeEnd,onMouseLeave:this.state.dragging?this.swipeEnd:null,onTouchStart:this.swipeStart,onTouchMove:this.state.dragging?this.swipeMove:null,onTouchEnd:this.swipeEnd,onTouchCancel:this.state.dragging?this.swipeEnd:null,onKeyDown:this.props.accessibility?this.keyHandler:null},a.default.createElement(b.Track,i({ref:this.trackRefHandler},n),this.props.children)),s,e)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(140),o=n(80),a=(r(o),n(3)),s=r(a),l=n(17),u=r(l),c={changeSlide:function(e){var t,n,r,i,o,a=this.props,s=a.slidesToScroll,l=a.slidesToShow,u=this.state,c=u.slideCount,f=u.currentSlide;if(i=c%s!==0,t=i?0:(c-f)%s,"previous"===e.message)r=0===t?s:l-t,o=f-r,this.props.lazyLoad&&(n=f-r,o=n===-1?c-1:n);else if("next"===e.message)r=0===t?s:t,o=f+r,this.props.lazyLoad&&(o=(f+s)%c+t);else if("dots"===e.message||"children"===e.message){if(o=e.index*e.slidesToScroll,o===e.currentSlide)return}else if("index"===e.message&&(o=parseInt(e.index),o===e.currentSlide))return;this.slideHandler(o)},keyHandler:function(e){e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&this.props.accessibility===!0?this.changeSlide({message:this.props.rtl===!0?"next":"previous"}):39===e.keyCode&&this.props.accessibility===!0&&this.changeSlide({message:this.props.rtl===!0?"previous":"next"}))},selectHandler:function(e){this.changeSlide(e)},swipeStart:function(e){var t,n;this.props.swipe===!1||"ontouchend"in document&&this.props.swipe===!1||this.props.draggable===!1&&e.type.indexOf("mouse")!==-1||(t=void 0!==e.touches?e.touches[0].pageX:e.clientX,n=void 0!==e.touches?e.touches[0].pageY:e.clientY,this.setState({dragging:!0,touchObject:{startX:t,startY:n,curX:t,curY:n}}))},swipeMove:function(e){if(!this.state.dragging)return void e.preventDefault();if(!this.state.animating){this.props.vertical&&this.props.swipeToSlide&&this.props.verticalSwiping&&e.preventDefault();var t,n,r,o=this.state.touchObject;n=(0,i.getTrackLeft)((0,s.default)({slideIndex:this.state.currentSlide,trackRef:this.track},this.props,this.state)),o.curX=e.touches?e.touches[0].pageX:e.clientX,o.curY=e.touches?e.touches[0].pageY:e.clientY,o.swipeLength=Math.round(Math.sqrt(Math.pow(o.curX-o.startX,2))),this.props.verticalSwiping&&(o.swipeLength=Math.round(Math.sqrt(Math.pow(o.curY-o.startY,2)))),r=(this.props.rtl===!1?1:-1)*(o.curX>o.startX?1:-1),this.props.verticalSwiping&&(r=o.curY>o.startY?1:-1);var a=this.state.currentSlide,l=Math.ceil(this.state.slideCount/this.props.slidesToScroll),u=this.swipeDirection(this.state.touchObject),c=o.swipeLength;this.props.infinite===!1&&(0===a&&"right"===u||a+1>=l&&"left"===u)&&(c=o.swipeLength*this.props.edgeFriction,this.state.edgeDragged===!1&&this.props.edgeEvent&&(this.props.edgeEvent(u),this.setState({edgeDragged:!0}))),this.state.swiped===!1&&this.props.swipeEvent&&(this.props.swipeEvent(u),this.setState({swiped:!0})),t=this.props.vertical?n+c*(this.state.listHeight/this.state.listWidth)*r:n+c*r,this.props.verticalSwiping&&(t=n+c*r),this.setState({touchObject:o,swipeLeft:t,trackStyle:(0,i.getTrackCSS)((0,s.default)({left:t},this.props,this.state))}),Math.abs(o.curX-o.startX)<.8*Math.abs(o.curY-o.startY)||o.swipeLength>4&&e.preventDefault()}},getNavigableIndexes:function(){var e=void 0,t=0,n=0,r=[];for(this.props.infinite?(t=this.props.slidesToShow*-1,n=this.props.slidesToShow*-1,e=2*this.state.slideCount):e=this.state.slideCount;t<e;)r.push(t),t=n+this.props.slidesToScroll,n+=this.props.slidesToScroll<=this.props.slidesToShow?this.props.slidesToScroll:this.props.slidesToShow;return r},checkNavigable:function(e){var t=this.getNavigableIndexes(),n=0;if(e>t[t.length-1])e=t[t.length-1];else for(var r in t){if(e<t[r]){e=n;break}n=t[r]}return e},getSlideCount:function(){var e=this,t=this.props.centerMode?this.state.slideWidth*Math.floor(this.props.slidesToShow/2):0;if(this.props.swipeToSlide){var n=void 0,r=u.default.findDOMNode(this.list),i=r.querySelectorAll(".slick-slide");Array.from(i).every(function(r){if(e.props.vertical){if(r.offsetTop+e.getHeight(r)/2>e.state.swipeLeft*-1)return n=r,!1}else if(r.offsetLeft-t+e.getWidth(r)/2>e.state.swipeLeft*-1)return n=r,!1;return!0});var o=Math.abs(n.dataset.index-this.state.currentSlide)||1;return o}return this.props.slidesToScroll},swipeEnd:function(e){if(!this.state.dragging)return void(this.props.swipe&&e.preventDefault());var t=this.state.touchObject,n=this.state.listWidth/this.props.touchThreshold,r=this.swipeDirection(t);if(this.props.verticalSwiping&&(n=this.state.listHeight/this.props.touchThreshold),this.setState({dragging:!1,edgeDragged:!1,swiped:!1,swipeLeft:null,touchObject:{}}),t.swipeLength)if(t.swipeLength>n){e.preventDefault();var o=void 0,a=void 0;switch(r){case"left":case"down":a=this.state.currentSlide+this.getSlideCount(),o=this.props.swipeToSlide?this.checkNavigable(a):a,this.state.currentDirection=0;break;case"right":case"up":a=this.state.currentSlide-this.getSlideCount(),o=this.props.swipeToSlide?this.checkNavigable(a):a,this.state.currentDirection=1;break;default:o=this.state.currentSlide}this.slideHandler(o)}else{var l=(0,i.getTrackLeft)((0,s.default)({slideIndex:this.state.currentSlide,trackRef:this.track},this.props,this.state));this.setState({trackStyle:(0,i.getTrackAnimateCSS)((0,s.default)({left:l},this.props,this.state))})}},onInnerSliderEnter:function(e){this.props.autoplay&&this.props.pauseOnHover&&this.pause()},onInnerSliderOver:function(e){this.props.autoplay&&this.props.pauseOnHover&&this.pause()},onInnerSliderLeave:function(e){this.props.autoplay&&this.props.pauseOnHover&&this.autoPlay()}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),s=n(315),l=n(3),u=r(l),c=n(93),f=r(c),d=n(292),p=r(d),h=n(139),m=r(h),v=a.default.createClass({displayName:"Slider",mixins:[p.default],innerSlider:null,innerSliderRefHandler:function(e){this.innerSlider=e},getInitialState:function(){return{breakpoint:null}},componentWillMount:function(){var e=this;if(this.props.responsive){var t=this.props.responsive.map(function(e){return e.breakpoint});t.sort(function(e,t){return e-t}),t.forEach(function(n,r){var i;i=0===r?(0,f.default)({minWidth:0,maxWidth:n}):(0,f.default)({minWidth:t[r-1],maxWidth:n}),e.media(i,function(){e.setState({breakpoint:n})})});var n=(0,f.default)({minWidth:t.slice(-1)[0]});this.media(n,function(){e.setState({breakpoint:null})})}},slickPrev:function(){this.innerSlider.slickPrev()},slickNext:function(){this.innerSlider.slickNext()},slickGoTo:function(e){this.innerSlider.slickGoTo(e)},render:function(){var e,t,n=this;this.state.breakpoint?(t=this.props.responsive.filter(function(e){return e.breakpoint===n.state.breakpoint}),e="unslick"===t[0].settings?"unslick":(0,u.default)({},this.props,t[0].settings)):e=(0,u.default)({},m.default,this.props);var r=this.props.children;return Array.isArray(r)||(r=[r]),r=r.filter(function(e){return!!e}),"unslick"===e?a.default.createElement("div",null,r):a.default.createElement(s.InnerSlider,i({ref:this.innerSliderRefHandler},e),r)}});e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Track=void 0;var i=n(0),o=r(i),a=n(3),s=r(a),l=n(38),u=r(l),c=function(e){var t,n,r,i,o;return o=e.rtl?e.slideCount-1-e.index:e.index,r=o<0||o>=e.slideCount,e.centerMode?(i=Math.floor(e.slidesToShow/2),n=(o-e.currentSlide)%e.slideCount===0,o>e.currentSlide-i-1&&o<=e.currentSlide+i&&(t=!0)):t=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow,(0,u.default)({"slick-slide":!0,"slick-active":t,"slick-center":n,"slick-cloned":r})},f=function(e){var t={};return void 0!==e.variableWidth&&e.variableWidth!==!1||(t.width=e.slideWidth),e.fade&&(t.position="relative",t.left=-e.index*e.slideWidth,t.opacity=e.currentSlide===e.index?1:0,t.transition="opacity "+e.speed+"ms "+e.cssEase,t.WebkitTransition="opacity "+e.speed+"ms "+e.cssEase),t},d=function(e,t){return null===e.key||void 0===e.key?t:e.key},p=function(e){var t,n=[],r=[],i=[],a=o.default.Children.count(e.children);return o.default.Children.forEach(e.children,function(l,p){var h=void 0,m={message:"children",index:p,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};h=!e.lazyLoad|(e.lazyLoad&&e.lazyLoadedList.indexOf(p)>=0)?l:o.default.createElement("div",null);var v,y=f((0,s.default)({},e,{index:p})),g=c((0,s.default)({index:p},e));v=h.props.className?(0,u.default)(g,h.props.className):g;var b=function(t){h.props&&h.props.onClick&&h.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(m)};if(n.push(o.default.cloneElement(h,{key:"original"+d(h,p),"data-index":p,className:v,tabIndex:"-1",style:(0,s.default)({
outline:"none"},h.props.style||{},y),onClick:b})),e.infinite&&e.fade===!1){var w=e.variableWidth?e.slidesToShow+1:e.slidesToShow;p>=a-w&&(t=-(a-p),r.push(o.default.cloneElement(h,{key:"precloned"+d(h,t),"data-index":t,className:v,style:(0,s.default)({},h.props.style||{},y),onClick:b}))),p<w&&(t=a+p,i.push(o.default.cloneElement(h,{key:"postcloned"+d(h,t),"data-index":t,className:v,style:(0,s.default)({},h.props.style||{},y),onClick:b})))}}),e.rtl?r.concat(n,i).reverse():r.concat(n,i)};t.Track=o.default.createClass({displayName:"Track",render:function(){var e=p.call(this,this.props);return o.default.createElement("div",{className:"slick-track",style:this.props.trackStyle},e)}})},,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}t.__esModule=!0;var i=r();i.withExtraArgument=r,t.default=i},,,,,function(e,t,n){"use strict";(function(t,r){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){function n(){var n=this.super;this.super=function(){return t.apply(this,arguments)};var r=e.apply(this,arguments);return this.super=n,r}return n.wrappedFunction=e,n}function a(e,t,n){var r=Object.getPrototypeOf(n);e.forEach(function(e){var i=Object.getOwnPropertyDescriptor(t,e),a=r.hasOwnProperty(e)&&Object.getOwnPropertyDescriptor(r,e);if("function"==typeof a.value&&"function"==typeof i.value){var s=o(i.value,a.value);Object.defineProperty(n,e,{value:s})}else Object.defineProperty(n,e,i)})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=o(e.constructor,t),r=Object.getOwnPropertyNames(e).filter(function(e){return!O(["constructor","static"],e)});S(n,t),n.prototype=Object.create(t.prototype),a(r,e,n.prototype),n.prototype.constructor=n;var i=e.static;if(i){var s=Object.getOwnPropertyNames(i);a(s,i,n)}return n}function l(e){var t=function(){var t=void 0;t=console[e]?Function.prototype.bind.call(console[e],console):Function.prototype.bind.call(console.log,console),t.apply(void 0,arguments)};return function(){var e=[].concat(Array.prototype.slice.call(arguments));e.unshift("[JS-BUY-SDK]: "),t.apply(void 0,i(e))}}function u(e,t){var n=void 0;if(t.headers&&Object.keys(t.headers).forEach(function(e){"authorization"===e.toLowerCase()&&(n=t.headers[e])}),n){var r=n.split(" ").slice(-1)[0];try{var i=atob(r),o=void 0;return o=e.indexOf("?")>-1?e+"&_x_http_authorization="+i:e+"?_x_http_authorization="+i}catch(e){}}return e}function c(e,t,n){return new Promise(function(r,i){function o(){i(new Error("There was an error with the XDR"))}var a=new XDomainRequest;a.onload=function(){try{var e=JSON.parse(a.responseText);r({json:e,originalResponse:a,isJSON:!0})}catch(e){r({text:a.responseText,originalResponse:a,isText:!0})}},a.onerror=o,a.ontimeout=o,a.open(e,u(t,n)),a.send(n.data)})}function f(){var e="undefined"==typeof window,t=!0;return e&&t}function d(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.status=e.status,t.response=e,t}function p(e){return e.json().then(function(t){return{json:t,originalResponse:e,isJSON:!0}}).catch(function(){var t=e.clone();return t.text().then(function(e){return{text:e,originalResponse:t,isText:!0}})})}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!f()){var r=new XMLHttpRequest;if(!("withCredentials"in r))return c.apply(void 0,arguments)}return n.method=e,n.mode="cors",fetch(t,n).then(d).then(p)}function m(){return++Y}function v(e){if(e&&e[z])return e[z];if(void 0===e)return"(undefined)";if(null===e)return"(null)";var t="undefined"==typeof e?"undefined":E(e),n=void 0;switch(t){case"number":n=V[e],n||(n=V[e]="nu"+e);break;case"string":n=K[e],n||(n=K[e]="st"+m());break;case"boolean":n=e?"(true)":"(false)";break;default:if(e===Object){n="(Object)";break}if(e===Array){n="(Array)";break}n=B+"."+m(),null===e[z]?e[z]=n:(F.value=n,Object.defineProperty(e,z,F))}return n}function y(e,t){X[e]||(X[e]=t)}function g(e){return X[e]}function b(e,t){return e===t||Object.keys(e).every(function(n){return e[n]instanceof Date?e[n].toString()===t[n].toString():"object"===E(e[n])?b(e[n],t[n]):e[n]===t[n]})}function w(e,t){var n=void 0;switch(e){case"all":n=function(){return this.fetchAll(t)};break;case"one":n=function(){return this.fetch.apply(this,[t].concat(Array.prototype.slice.call(arguments)))};break;case"query":n=function(){return this.fetchQuery.apply(this,[t].concat(Array.prototype.slice.call(arguments)))}}return n}var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=void 0;_="function"==typeof Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var t=Object(e),n=[].slice.call(arguments,1);return n.length>0&&n.forEach(function(e){if(void 0!==e&&null!==e){var n=void 0;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}),t};var S=_,C=void 0;C=Array.prototype.includes?function(e){var t=[].slice.call(arguments,1);return Array.prototype.includes.apply(e,t)}:function(e,t){var n=Object(e),r=parseInt(n.length,10)||0;if(0===r)return!1;var i=parseInt(arguments[2],10)||0,o=void 0;for(i>=0?o=i:(o=r+i,o<0&&(o=0));o<r;){var a=n[o];if(t===a||t!==t&&a!==a)return!0;o++}return!1};var O=C,T=s({constructor:function(){},static:{extend:function(e){return s(e,this)}}}),k=T.extend({constructor:function(){},debug:l("debug"),info:l("info"),warn:l("warn"),error:l("error")}),P=new k,A=T.extend({constructor:function(e){var t=this;Object.keys(this.deprecatedProperties).forEach(function(n){if(e.hasOwnProperty(n)){var r=t.deprecatedProperties[n],i=t[r];i(e[n],e)}}),this.requiredProperties.forEach(function(n){if(!e.hasOwnProperty(n))throw new Error("new Config() requires the option '"+n+"'");t[n]=e[n]}),this.optionalProperties.forEach(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})},deprecatedProperties:{myShopifyDomain:"transformMyShopifyDomain"},transformMyShopifyDomain:function(e,t){P.warn("Config - ","myShopifyDomain is deprecated, please use domain and provide the full shop domain."),t.domain=e+".myshopify.com"},requiredProperties:["apiKey","appId","domain"],optionalProperties:["ajaxHeaders"],apiKey:"",appId:"",domain:"",myShopifyDomain:"",ajaxHeaders:{}}),N="v0.6.2-c8f438f",x=T.extend({constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.attrs=e,S(this,t)},attrs:null,serializer:null,adapter:null,shopClient:null}),M=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments),this.selected=this.values[0]}},{name:{get:function(){return this.attrs.name},configurable:!0,enumerable:!0},values:{get:function(){return this.attrs.values},configurable:!0,enumerable:!0},selected:{get:function(){return this._selected},set:function(e){if(!O(this.values,e))throw new Error("Invalid option selection for "+this.name+".");return this._selected=e,e},configurable:!0,enumerable:!0}})),j=[{name:"pico",dimension:"16x16"},{name:"icon",dimension:"32x32"},{name:"thumb",dimension:"50x50"},{name:"small",dimension:"100x100"},{name:"compact",dimension:"160x160"},{name:"medium",dimension:"240x240"},{name:"large",dimension:"480x480"},{name:"grande",dimension:"600x600"},{name:"1024x1024",dimension:"1024x1024"},{name:"2048x2048",dimension:"2048x2048"}],I=T.extend(Object.defineProperties({constructor:function(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]})}},{variants:{get:function(){var e=this.src,t=e.lastIndexOf("."),n=e.slice(0,t),r=e.slice(t);return j.forEach(function(e){e.src=n+"_"+e.name+r}),j},configurable:!0,enumerable:!0}})),R=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments)},checkoutUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.config,n="https://"+t.domain+"/cart",r=this.id+":"+parseInt(e,10),i="access_token="+t.apiKey+"&_fd=0";return n+"/"+r+"?"+i}},{id:{get:function(){return this.attrs.variant.id},configurable:!0,enumerable:!0},productId:{get:function(){return this.attrs.product.id},configurable:!0,enumerable:!0},title:{get:function(){return this.attrs.variant.title},configurable:!0,enumerable:!0},productTitle:{get:function(){return this.attrs.product.title},configurable:!0,enumerable:!0},compareAtPrice:{get:function(){return this.attrs.variant.compare_at_price},configurable:!0,enumerable:!0},price:{get:function(){return this.attrs.variant.price},configurable:!0,enumerable:!0},formattedPrice:{get:function(){return this.attrs.variant.formatted_price},configurable:!0,enumerable:!0},grams:{get:function(){return this.attrs.variant.grams},configurable:!0,enumerable:!0},optionValues:{get:function(){return this.attrs.variant.option_values},configurable:!0,enumerable:!0},available:{get:function(){return this.attrs.variant.available},configurable:!0,enumerable:!0},image:{get:function(){var e=this.id,t=this.attrs.product.images,n=t[0],r=t.filter(function(t){return t.variant_ids.indexOf(e)!==-1})[0],i=r||n;return i?new I(i):null},configurable:!0,enumerable:!0},imageVariants:{get:function(){return this.image?this.image.variants:[]},configurable:!0,enumerable:!0}})),L=function(e){return e.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])},D="https://widgets.shopifyapps.com/assets/no-image.svg",U=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments)}},{id:{get:function(){return this.attrs.product_id},configurable:!0,enumerable:!0},title:{get:function(){return this.attrs.title},configurable:!0,enumerable:!0},description:{get:function(){return this.attrs.body_html},configurable:!0,enumerable:!0},images:{get:function(){return this.attrs.images.map(function(e){return new I(e)})},configurable:!0,enumerable:!0},memoized:{get:function(){return this._memoized=this._memoized||{},this._memoized},configurable:!0,enumerable:!0},options:{get:function(){if(this.memoized.options)return this.memoized.options;var e=this.attrs.options,t=this.variants;return this.memoized.options=e.map(function(e){var n=e.name,r=t.reduce(function(t,n){var r=n.optionValues.filter(function(t){return t.name===e.name})[0];return t.push(r.value),t},[]),i=L(r);return new M({name:n,values:i})}),this.memoized.options},configurable:!0,enumerable:!0},variants:{get:function(){var e=this;return this.attrs.variants.map(function(t){return new R({variant:t,product:e},{config:e.config})})},configurable:!0,enumerable:!0},selections:{get:function(){return this.options.map(function(e){return e.selected})},configurable:!0,enumerable:!0},selectedVariant:{get:function(){var e=this.selections.join(" / ");return this.variants.filter(function(t){return t.title===e})[0]||null},configurable:!0,enumerable:!0},selectedVariantImage:{get:function(){return this.selectedVariant?this.selectedVariant.image:null},configurable:!0,enumerable:!0}})),q=T.extend({constructor:function(e){this.config=e},rootKeyForType:function(e){return e.slice(0,-1)+"_listing"},models:{collections:x,products:U},modelForType:function(e){return this.models[e]},deserializeSingle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t[this.rootKeyForType(e)],i=this.modelFromAttrs(e,r,n);return i},deserializeMultiple:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n[this.rootKeyForType(e)+"s"];return i.map(function(n){var i=t.modelFromAttrs(e,n,r);return i})},modelFromAttrs:function(e,t,n){var r=this.modelForType(e);return n.config=this.config,new r(t,n)}}),W=T.extend(Object.defineProperties({ajax:h,constructor:function(e){this.config=e},pathForType:function(e){return"/"+e.slice(0,-1)+"_listings"},buildUrl:function(e,t,n){switch(e){case"multiple":return this.buildMultipleUrl(t,n);case"single":return this.buildSingleUrl(t,n);default:return""}},buildMultipleUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=""+this.baseUrl+this.pathForType(e),r=Object.keys(t);if(r.length>0){var i=r.map(function(e){var n=void 0;return n=Array.isArray(t[e])?t[e].join(","):t[e],e+"="+encodeURIComponent(n)}).join("&");return n+"?"+i}return n},buildSingleUrl:function(e,t){return""+this.baseUrl+this.pathForType(e)+"/"+t},fetchMultiple:function(){var e=this.buildUrl.apply(this,["multiple"].concat(Array.prototype.slice.call(arguments)));return this.ajax("GET",e,{headers:this.headers}).then(function(e){return e.json})},fetchSingle:function(){var e=this.buildUrl.apply(this,["single"].concat(Array.prototype.slice.call(arguments)));return this.ajax("GET",e,{headers:this.headers}).then(function(e){return e.json})}},{base64ApiKey:{get:function(){return btoa(this.config.apiKey)},configurable:!0,enumerable:!0},baseUrl:{get:function(){var e=this.config,t=e.domain,n=e.appId;return"https://"+t+"/api/apps/"+n},configurable:!0,enumerable:!0},headers:{get:function(){return S({},{Authorization:"Basic "+this.base64ApiKey,"Content-Type":"application/json","X-SDK-Variant":"javascript","X-SDK-Version":N},this.config.ajaxHeaders)},configurable:!0,enumerable:!0}})),z="shopify-buy-uuid",H=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments)}},{id:{get:function(){return this.attrs[z]},configurable:!0,enumerable:!0},variant_id:{get:function(){return this.attrs.variant_id},configurable:!0,enumerable:!0},product_id:{get:function(){return this.attrs.product_id},configurable:!0,enumerable:!0},image:{get:function(){return this.attrs.image?new I(this.attrs.image):null},configurable:!0,enumerable:!0},imageVariants:{get:function(){return this.image?this.image.variants:[]},configurable:!0,enumerable:!0},title:{get:function(){return this.attrs.title},configurable:!0,enumerable:!0},quantity:{get:function(){return this.attrs.quantity},set:function(e){var t=parseInt(e,10);if(t<0)throw new Error("Quantities must be positive");if(t!==parseFloat(e))throw new Error("Quantities must be whole numbers");return this.attrs.quantity=t,this.attrs.quantity},configurable:!0,enumerable:!0},properties:{get:function(){return this.attrs.properties||{}},set:function(e){return this.attrs.properties=e||{},e},configurable:!0,enumerable:!0},variant_title:{get:function(){return this.attrs.variant_title},configurable:!0,enumerable:!0},price:{get:function(){return this.attrs.price},configurable:!0,enumerable:!0},compare_at_price:{get:function(){return this.attrs.compare_at_price},configurable:!0,enumerable:!0},line_price:{get:function(){return(this.quantity*parseFloat(this.price)).toFixed(2)},configurable:!0,enumerable:!0},grams:{get:function(){return this.attrs.grams},configurable:!0,enumerable:!0}})),B="shopify-buy."+Date.now(),F={writable:!0,configurable:!0,enumerable:!0,value:null},Y=0,V={},K={},X=void 0;X="undefined"==typeof t?window:t;var G={set:y,get:g},J=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments)},addVariants:function(){return P.warn("CartModel - ","addVariants is deprecated, please use createLineItemsFromVariants instead"),this.createLineItemsFromVariants.apply(this,arguments)},createLineItemsFromVariants:function(){var e=[].concat(Array.prototype.slice.call(arguments)).map(function(e){var t={image:e.variant.image,image_variants:e.variant.imageVariants,variant_id:e.variant.id,product_id:e.variant.productId,title:e.variant.productTitle,quantity:parseInt(e.quantity,10),properties:e.properties||{},variant_title:e.variant.title,price:e.variant.price,compare_at_price:e.variant.compareAtPrice,grams:e.variant.grams};return v(t),t}),t=this.attrs.line_items;t.push.apply(t,i(e));var n=t.reduce(function(e,t){var n=e.filter(function(e){return e.variant_id===t.variant_id&&b(e.properties,t.properties)})[0];return n?n.quantity=n.quantity+t.quantity:e.push(t),e},[]);return this.attrs.line_items=n.reduce(function(e,t){return t.quantity>=1&&e.push(t),e},[]),this.updateModel()},updateLineItem:function(e,t){if(t<1)return this.removeLineItem(e);var n=this.lineItems.filter(function(t){return t.id===e})[0];return n?(n.quantity=t,this.updateModel()):new Promise(function(t,n){n(new Error("line item with id: "+e+" not found in cart#"+this.id))})},removeLineItem:function(e){var t=this.lineItems.length,n=this.lineItems.filter(function(t){return t.id!==e}),r=n.length;return r<t?(this.attrs.line_items=n.map(function(e){return e.attrs}),this.updateModel()):new Promise(function(t,n){n(new Error("line item with id: "+e+" not found in cart#"+this.id))})},clearLineItems:function(){return this.attrs.line_items=[],this.updateModel()},updateModel:function(){var e=this;return this.shopClient.update("carts",this).then(function(t){return S(e.attrs,t.attrs),e})}},{id:{get:function(){return this.attrs[z]},configurable:!0,enumerable:!0},lineItems:{get:function(){return(this.attrs.line_items||[]).map(function(e){return new H(e)})},configurable:!0,enumerable:!0},lineItemCount:{get:function(){return this.lineItems.reduce(function(e,t){return e+t.quantity},0)},configurable:!0,enumerable:!0},subtotal:{get:function(){var e=this.lineItems.reduce(function(e,t){return e+parseFloat(t.line_price)},0);return e.toFixed(2)},configurable:!0,enumerable:!0},checkoutUrl:{get:function(){var e=this.config,t="https://"+e.domain+"/cart",n=G.get("ga"),r=this.lineItems.map(function(e){return e.variant_id+":"+e.quantity}),i="access_token="+e.apiKey+"&_fd=0";if("function"==typeof n){var o=void 0;n(function(e){o=e.get("linkerParam")}),o&&(i+="&"+o)}return t+"/"+r+"?"+i},configurable:!0,enumerable:!0}})),Q=T.extend({constructor:function(e){this.config=e},rootKeyForType:function(e){return e.slice(0,-1)},modelForType:function(){return J},deserializeSingle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t[this.rootKeyForType(e)],i=this.modelFromAttrs(e,r,n);return i},modelFromAttrs:function(e,t,n){var r=this.modelForType(e);return n.config=this.config,new r(t,n)},serialize:function(e,t){var n=this.rootKeyForType(e),r={},i=S({},t.attrs);return r[n]=i,delete i.attributes,Object.keys(i).forEach(function(e){var t=i[e];(null===t||"string"==typeof t&&0===t.length)&&delete i[e]}),r}}),$=x.extend(Object.defineProperties({constructor:function(e){if(Object.keys(e).indexOf("referenceId")<0)throw new Error("Missing key referenceId of reference. References to null are not allowed");this.super.apply(this,arguments)}},{id:{get:function(){return this.attrs[z]},configurable:!0,enumerable:!0},referenceId:{get:function(){return this.attrs.referenceId},set:function(e){return this.attrs.referenceId=e,e},configurable:!0,enumerable:!0}})),Z=T.extend({constructor:function(e){this.config=e},modelForType:function(){return $},deserializeSingle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.modelForType(e);return new r(t,n)},serialize:function(e,t){var n=S({},t.attrs);return n}}),ee=T.extend({constructor:function(){this.localStorageAvailable=this.storageAvailable("localStorage"),this.cache={}},setItem:function(e,t){return this.localStorageAvailable?localStorage.setItem(e,JSON.stringify(t)):this.cache[e]=t,t},getItem:function(e){if(!this.localStorageAvailable)return this.cache[e]||null;var t=localStorage.getItem(e);try{return JSON.parse(t)}catch(e){return null}},storageAvailable:function(e){try{var t=G.get(e),n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}}}),te=T.extend({constructor:function(){this.store=new ee},idKeyForType:function(){return z},fetchSingle:function(e,t){var n=this;return new Promise(function(r,i){var o=n.store.getItem(n.storageKey(e,t));return null===o?void i(new Error(e+"#"+t+" not found")):void r(o)})},create:function(e,t){var n=this;return new Promise(function(r){var i=n.identify(t);n.store.setItem(n.storageKey(e,i),t),r(t)})},update:function(e,t,n){var r=this;return new Promise(function(i){r.store.setItem(r.storageKey(e,t),n),i(n)})},storageKey:function(e,t){return e+"."+t},identify:function(e){var t=Object.keys(e);return v(1===t.length&&"object"===E(e[t[0]])?e[t[0]]:e)}}),ne=T.extend(Object.defineProperties({constructor:function(e){this.config=e,this.serializers={products:q,collections:q,carts:Q,references:Z},this.adapters={products:W,collections:W,carts:te,references:te}},config:null,fetchAll:function(e){var t=this,n=new this.adapters[e](this.config);return n.fetchMultiple(e).then(function(r){return t.deserialize(e,r,n,null,{multiple:!0})})},fetch:function(e,t){var n=this,r=new this.adapters[e](this.config);return r.fetchSingle(e,t).then(function(t){return n.deserialize(e,t,r,null,{single:!0})})},fetchQuery:function(e,t){var n=this,r=new this.adapters[e](this.config);return r.fetchMultiple(e,t).then(function(t){return n.deserialize(e,t,r,null,{multiple:!0})})},create:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new this.adapters[e](this.config),i=new this.serializers[e](this.config),o=i.modelForType(e),a=new o(n,{shopClient:this}),s=i.serialize(e,a);return r.create(e,s).then(function(n){return t.deserialize(e,n,r,i,{single:!0})})},update:function(e,t){var n=this,r=t.adapter,i=t.serializer,o=i.serialize(e,t),a=t.attrs[r.idKeyForType(e)];return r.update(e,a,o).then(function(t){return n.deserialize(e,t,r,i,{single:!0})})},deserialize:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r||new this.serializers[e](this.config),a={shopClient:this,adapter:n,serializer:o,type:e},s=void 0;return s=i.multiple?o.deserializeMultiple(e,t,a):o.deserializeSingle(e,t,a)},createCart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={line_items:[]},n={};return S(n,t),S(n,e),this.create("carts",n)},updateCart:function(e){return this.update("carts",e)},fetchCart:w("one","carts"),fetchAllProducts:w("all","products"),fetchAllCollections:w("all","collections"),fetchProduct:w("one","products"),fetchCollection:w("one","collections"),fetchQueryProducts:w("query","products"),fetchQueryCollections:w("query","collections"),fetchRecentCart:function(){var e=this;return this.fetch("references",this.config.domain+".recent-cart").then(function(t){var n=t.referenceId;return e.fetchCart(n)}).catch(function(){return e.createCart().then(function(t){var n={referenceId:t.id};return n[z]=e.config.domain+".recent-cart",e.create("references",n),t})})}},{serializers:{get:function(){return S({},this.shadowedSerializers)},set:function(e){this.shadowedSerializers=S({},e)},configurable:!0,enumerable:!0},adapters:{get:function(){return S({},this.shadowedAdapters)},set:function(e){this.shadowedAdapters=S({},e)},configurable:!0,enumerable:!0}}));if(f()){var re=n(342);G.set("fetch",re),G.set("Response",re.Response)}f()&&G.set("btoa",function(e){return new r(e).toString("base64")});var ie={ShopClient:ne,Config:A,version:N,NO_IMAGE_URI:D,buildClient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new this.Config(e);return new this.ShopClient(t)}};e.exports=ie}).call(t,n(46),n(170).Buffer)},,function(e,t){var n=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()};e.exports=n},,,,,function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(17),s=r(a),l=n(8),u=n(24),c=r(u);n(150);var f=n(151),d=r(f),p=(n(15),n(48)),h=n(47),m=n(49).configure();m.subscribe(function(){var e=m.getState();console.log("New state",e)}),m.dispatch(p.startAddProducts()),m.dispatch(h.startAddCollections()),localStorage.getItem("lastCartId")?c.default.restoreCart().then(function(e){m.dispatch({type:"SET_INITIAL_CART_STATE",localCart:e})}):c.default.createCart().then(function(e){m.dispatch({type:"SET_INITIAL_CART_STATE",localCart:e})}),s.default.render(o.default.createElement(l.Provider,{store:m},d.default),document.getElementById("app"))}],[343]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLm1pbi4yMTA1YmFhYzM4NjRhYThiYzYxZi5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvYWN0aW9ucy9jYXJ0QWN0aW9ucy5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2FwaS9zaG9waWZ5QVBJLmpzeCIsIndlYnBhY2s6Ly8vLi9+L2NsYXNzbmFtZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2FjdGlvbnMvY29sbGVjdGlvbkFjdGlvbnMuanN4Iiwid2VicGFjazovLy8uL2FwcC9hY3Rpb25zL3Byb2R1Y3RBY3Rpb25zLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvc3RvcmUvY29uZmlndXJlU3RvcmUuanN4Iiwid2VicGFjazovLy8uL2FwcC9wcmVzZW50YXRpb25hbC9Mb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3V0aWxzL2Zvcm1hdC5qc3giLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zbGljay9saWIvbWl4aW5zL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvQ29sbGVjdGlvbi5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvUHJvZHVjdC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvUHJvZHVjdEl0ZW0uanN4Iiwid2VicGFjazovLy8uL34vanNvbjJtcS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5hc3NpZ24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvY29uc29sZS93YXJuLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtZ2Evc3JjL3V0aWxzL3RyaW0uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb2RhbC9saWIvaGVscGVycy90YWJiYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXNsaWNrL2xpYi9kZWZhdWx0LXByb3BzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2xpY2svbGliL21peGlucy90cmFja0hlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvcm91dGVyL3JvdXRlci5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvQ2FydC1pdGVtLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvY29udGFpbmVycy9Db2xsZWN0aW9uSXRlbS5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvQ29sbGVjdGlvbnMuanN4Iiwid2VicGFjazovLy8uL2FwcC9jb250YWluZXJzL0Zvb3Rlci5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvSGVhZGVyLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvY29udGFpbmVycy9JbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvTWFpbi5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvUHJvZHVjdHMuanN4Iiwid2VicGFjazovLy8uL2FwcC9jb250YWluZXJzL1VwbG9hZC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvY2FydC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL3ByZXNlbnRhdGlvbmFsL0Fib3V0LmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvcHJlc2VudGF0aW9uYWwvQ29udGFjdC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL3ByZXNlbnRhdGlvbmFsL0xvZ2luLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvcHJlc2VudGF0aW9uYWwvTWFwLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvcHJlc2VudGF0aW9uYWwvT3JkZXJTdGF0dXMuanN4Iiwid2VicGFjazovLy8uL2FwcC9yZWR1Y2Vycy9yZWR1Y2Vycy5qc3giLCJ3ZWJwYWNrOi8vLy4vfi9iYXNlNjQtanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9idWZmZXIvfi9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vY2FuLXVzZS1kb20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9lbGVtZW50LWNsYXNzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vZW5xdWlyZS5qcy9kaXN0L2VucXVpcmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9leGVudi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2llZWU3NTQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1nYS9zcmMvY29tcG9uZW50cy9PdXRib3VuZExpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1nYS9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvY29uc29sZS9sb2cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvZm9ybWF0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtZ2Evc3JjL3V0aWxzL21pZ2h0QmVFbWFpbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LWdhL3NyYy91dGlscy9yZW1vdmVMZWFkaW5nU2xhc2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvdG9UaXRsZUNhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb2RhbC9saWIvY29tcG9uZW50cy9Nb2RhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vZGFsL2xpYi9jb21wb25lbnRzL01vZGFsUG9ydGFsLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvYXJpYUFwcEhpZGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvZm9jdXNNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvc2NvcGVUYWIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb2RhbC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yZXNwb25zaXZlLW1peGluL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2xpY2svbGliL2Fycm93cy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXNsaWNrL2xpYi9kb3RzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2xpY2svbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2xpY2svbGliL2luaXRpYWwtc3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zbGljay9saWIvaW5uZXItc2xpZGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2xpY2svbGliL21peGlucy9ldmVudC1oYW5kbGVycy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXNsaWNrL2xpYi9zbGlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zbGljay9saWIvdHJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWR1eC10aHVuay9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9zaG9waWZ5LWJ1eS9saWIvc2hvcGlmeS5qcyIsIndlYnBhY2s6Ly8vLi9+L3N0cmluZy1jb252ZXJ0L2NhbWVsMmh5cGhlbi5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvYXBwLmpzeCJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJjbG9zZUNhcnQiLCJvcGVuQ2FydCIsInVwZGF0ZUNhcnRJdGVtIiwidXBkYXRlQ2FydEl0ZW1zQ291bnQiLCJ1cGRhdGVDYXJ0U3VidG90YWwiLCJhZGRUb0NhcnQiLCJzdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0iLCJ1bmRlZmluZWQiLCJfc2hvcGlmeUFQSSIsIl9zaG9waWZ5QVBJMiIsInByb2R1Y3RWYXJpYW50IiwicXVhbnRpdHkiLCJkaXNwYXRjaCIsImdldFN0YXRlIiwiZmluZENhcnRJdGVtQnlWYXJpYW50SWQiLCJ2YXJpYW50SWQiLCJjYXJ0IiwibGluZUl0ZW1zIiwiZmlsdGVyIiwiaXRlbSIsInZhcmlhbnRfaWQiLCJpZCIsImNhcnRMaW5lSXRlbSIsInBhcnNlSW50IiwiY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzIiwidmFyaWFudCIsInRoZW4iLCJ1cGRhdGVkQ2FydCIsInVwZGF0ZWRDYXJ0SXRlbXMiLCJ0eXBlIiwiY2F0Y2giLCJlcnJvcnMiLCJjb25zb2xlIiwibG9nIiwibmV3U3VidG90YWwiLCJzdWJ0b3RhbCIsInVwZGF0ZWRDYXJ0SXRlbXNDb3VudCIsImxpbmVJdGVtc0NvdW50Iiwic2VsZWN0ZWRDYXJ0SXRlbSIsInVwZGF0ZWRRdWFudGl0eSIsImZvckVhY2giLCJjYXJ0SXRlbSIsInVwZGF0ZWRDYXJ0SXRlbSIsInB1c2giLCJ1cGRhdGVMaW5lSXRlbSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIlNob3BpZnlCdXkiLCJzaG9waWZ5QVBJIiwiY29uZmlndXJlIiwidGhpcyIsImNsaWVudCIsImJ1aWxkQ2xpZW50IiwiYXBpS2V5IiwiZG9tYWluIiwiYXBwSWQiLCJfdGhpcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY3JlYXRlQ2FydCIsIm5ld0NhcnQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwibG9jYWxDYXJ0IiwiaXNPcGVuIiwiX3RoaXMyIiwiZmV0Y2hDYXJ0IiwiZ2V0SXRlbSIsInJlbW90ZUNhcnQiLCJsaW5lSXRlbUNvdW50IiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiY2xhc3NOYW1lcyIsImNsYXNzZXMiLCJhcmd1bWVudHMiLCJhcmciLCJhcmdUeXBlIiwiQXJyYXkiLCJpc0FycmF5IiwiYXBwbHkiLCJoYXNPd24iLCJjYWxsIiwiam9pbiIsImhhc093blByb3BlcnR5IiwiYWRkQ29sbGVjdGlvbnMiLCJzdGFydEFkZENvbGxlY3Rpb25zIiwic2V0QWN0aXZlQ29sbGVjdGlvbiIsIl9leHRlbmRzIiwiYXNzaWduIiwic291cmNlIiwiZmV0Y2hDb2xsZWN0aW9uIiwiZGF0YSIsImNvbGxlY3Rpb24iLCJwYXJzZWRDb2xsZWN0aW9uIiwiZmV0Y2hBbGxDb2xsZWN0aW9ucyIsImNvbGxlY3Rpb25zIiwicGFyc2VkQ29sbGVjdGlvbnMiLCJrZXlzIiwiY29sbGVjdGlvbklkIiwidXBkYXRlQWN0aXZlUHJvZHVjdE9wdGlvbnMiLCJjbGVhckFjdGl2ZVByb2R1Y3QiLCJzZXRBY3RpdmVQcm9kdWN0IiwicHJlbG9hZFByb2R1Y3RJbWFnZXMiLCJhZGRQcm9kdWN0cyIsInN0YXJ0QWRkUHJvZHVjdHMiLCJmZXRjaEFsbFByb2R1Y3RzIiwicHJvZHVjdHMiLCJwYXJzZWRQcm9kdWN0cyIsIm1hcCIsInByb2R1Y3QiLCJpbmRleCIsInVwZGF0ZWRQcm9kdWN0IiwiYWxsIiwiaW1hZ2VzIiwiSW1hZ2UiLCJzcmMiLCJzZWxlY3RlZFZhcmlhbnQiLCJpbWFnZVZhcmlhbnRzIiwib3B0aW9ucyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwibmV3T2JqIiwiX3JlZHV4IiwicmVkdXgiLCJfcmVkdXhUaHVuayIsIl9yZWR1eFRodW5rMiIsIl9yZWR1Y2VycyIsImluaXRpYWxTdGF0ZSIsInJlZHVjZXIiLCJjb21iaW5lUmVkdWNlcnMiLCJuYXYiLCJzdG9yZSIsImNyZWF0ZVN0b3JlIiwiY29tcG9zZSIsImFwcGx5TWlkZGxld2FyZSIsIndpbmRvdyIsImRldlRvb2xzRXh0ZW5zaW9uIiwiZiIsIkxvYWRlciIsIl9yZWFjdDIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiX3JlYWN0IiwiRm9ybWF0IiwiYW1vdW50IiwiY3VycmVuY3kiLCJ0aG91c2FuZFNlcGFyYXRvciIsImRlY2ltYWxTZXBhcmF0b3IiLCJsb2NhbGVEZWNpbWFsU2VwYXJhdG9yIiwicmVnZXgiLCJSZWdFeHAiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInJlcGxhY2UiLCJ0b1N0cmluZyIsIl9yZWFjdERvbSIsIl9yZWFjdERvbTIiLCJfdHJhY2tIZWxwZXIiLCJfb2JqZWN0QXNzaWduIiwiX29iamVjdEFzc2lnbjIiLCJoZWxwZXJzIiwiaW5pdGlhbGl6ZSIsInNsaWRlV2lkdGgiLCJzbGlja0xpc3QiLCJmaW5kRE9NTm9kZSIsImxpc3QiLCJzbGlkZUNvdW50IiwiQ2hpbGRyZW4iLCJjb3VudCIsImNoaWxkcmVuIiwibGlzdFdpZHRoIiwiZ2V0V2lkdGgiLCJ0cmFja1dpZHRoIiwidHJhY2siLCJ2ZXJ0aWNhbCIsImNlbnRlclBhZGRpbmdBZGoiLCJjZW50ZXJNb2RlIiwiY2VudGVyUGFkZGluZyIsInNsaWRlc1RvU2hvdyIsInNsaWRlSGVpZ2h0IiwiZ2V0SGVpZ2h0IiwicXVlcnlTZWxlY3RvciIsImxpc3RIZWlnaHQiLCJjdXJyZW50U2xpZGUiLCJydGwiLCJpbml0aWFsU2xpZGUiLCJzZXRTdGF0ZSIsInRhcmdldExlZnQiLCJnZXRUcmFja0xlZnQiLCJzbGlkZUluZGV4Iiwic3RhdGUiLCJ0cmFja1JlZiIsInRyYWNrU3R5bGUiLCJnZXRUcmFja0NTUyIsImxlZnQiLCJhdXRvUGxheSIsInVwZGF0ZSIsImF1dG9wbGF5IiwicGF1c2UiLCJlbGVtIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsImFkYXB0SGVpZ2h0IiwiYWRhcHRpdmVIZWlnaHQiLCJzZWxlY3RvciIsInN0eWxlIiwiY2FuR29OZXh0Iiwib3B0cyIsImNhbkdvIiwiaW5maW5pdGUiLCJzbGlkZUhhbmRsZXIiLCJ0YXJnZXRTbGlkZSIsImN1cnJlbnRMZWZ0IiwiY2FsbGJhY2siLCJ3YWl0Rm9yQW5pbWF0ZSIsImFuaW1hdGluZyIsImZhZGUiLCJsYXp5TG9hZCIsImxhenlMb2FkZWRMaXN0IiwiaW5kZXhPZiIsImNvbmNhdCIsImFmdGVyQ2hhbmdlIiwiYW5pbWF0aW9uRW5kQ2FsbGJhY2siLCJzZXRUaW1lb3V0Iiwic3BlZWQiLCJiZWZvcmVDaGFuZ2UiLCJzbGlkZXNUb1Njcm9sbCIsImxvYWRlZCIsInNsaWRlc1RvTG9hZCIsInVzZUNTUyIsIm5leHRTdGF0ZUNoYW5nZXMiLCJzd2lwZUxlZnQiLCJnZXRUcmFja0FuaW1hdGVDU1MiLCJzd2lwZURpcmVjdGlvbiIsInRvdWNoT2JqZWN0IiwieERpc3QiLCJ5RGlzdCIsInIiLCJzd2lwZUFuZ2xlIiwic3RhcnRYIiwiY3VyWCIsInN0YXJ0WSIsImN1clkiLCJNYXRoIiwiYXRhbjIiLCJyb3VuZCIsIlBJIiwiYWJzIiwidmVydGljYWxTd2lwaW5nIiwicGxheSIsIm5leHRJbmRleCIsIm1vdW50ZWQiLCJhdXRvUGxheVRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiYXV0b3BsYXlTcGVlZCIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9yZXF1aXJlIiwiY29ubmVjdCIsImFjdGlvbnMiLCJDb2xsZWN0aW9uIiwiX1JlYWN0JENvbXBvbmVudCIsImdldFByb3RvdHlwZU9mIiwicGFyYW1zIiwiX2NvbGxlY3Rpb24iLCJ0aXRsZSIsImNvbGxlY3Rpb25faWQiLCJDb21wb25lbnQiLCJhY3RpdmUiLCJfcmVhY3RSb3V0ZXIiLCJfZm9ybWF0IiwiX2Zvcm1hdDIiLCJfcmVhY3RNb2RhbCIsIl9yZWFjdE1vZGFsMiIsIl9Mb2FkZXIiLCJfTG9hZGVyMiIsInByb2R1Y3RBY3Rpb25zIiwiY2FydEFjdGlvbnMiLCJQcm9kdWN0IiwibW9kYWxJc09wZW4iLCJvcGVuTW9kYWwiLCJiaW5kIiwiY2xvc2VNb2RhbCIsImZldGNoUHJvZHVjdCIsInByb2R1Y3RJZCIsIm9wdGlvbk5hbWUiLCJvcHRpb24iLCJuYW1lIiwic2VsZWN0ZWQiLCJfdGhpczMiLCJhY3RpdmVQcm9kdWN0IiwiX2FjdGl2ZVByb2R1Y3QkYXR0cnMiLCJhdHRycyIsInByb2R1Y3RfaWQiLCJfYWN0aXZlUHJvZHVjdCIsImRlc2NyaXB0aW9uIiwic2VsZWN0ZWRWYXJpYW50SW1hZ2UiLCJyZW5kZXJPcHRpb25zIiwib25DaGFuZ2UiLCJldmVudCIsImhhbmRsZU9wdGlvbkNoYW5nZSIsInZhbHVlcyIsInJlbmRlclNpemVzIiwib3B0aW9uc0luZGV4Iiwib25DbGljayIsImJyb3dzZXJIaXN0b3J5IiwiZ29CYWNrIiwiYWx0IiwiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiLCJfX2h0bWwiLCJhc01vbmV5IiwicHJpY2UiLCJwbGFjZWhvbGRlciIsImhyZWYiLCJvblJlcXVlc3RDbG9zZSIsImNvbnRlbnRMYWJlbCIsImNsb3NlVGltZW91dE1TIiwiUHJvZHVjdEl0ZW0iLCJfcHJvcHMiLCJpbWFnZSIsIkxpbmsiLCJ0byIsImJhY2tncm91bmRJbWFnZSIsImNhbWVsMmh5cGhlbiIsImlzRGltZW5zaW9uIiwiZmVhdHVyZSIsInJlIiwidGVzdCIsIm9iajJtcSIsIm1xIiwiZmVhdHVyZXMiLCJqc29uMm1xIiwicXVlcnkiLCJxIiwiZnVuYyIsInRoaXNBcmciLCJhcmdzIiwiYmFzZVRpbWVzIiwibiIsIml0ZXJhdGVlIiwicmVzdWx0Iiwib3ZlckFyZyIsInRyYW5zZm9ybSIsImFycmF5TGlrZUtleXMiLCJpbmhlcml0ZWQiLCJpc0FyZ3VtZW50cyIsIlN0cmluZyIsInNraXBJbmRleGVzIiwiaXNJbmRleCIsImFzc2lnblZhbHVlIiwib2JqZWN0Iiwib2JqVmFsdWUiLCJlcSIsImJhc2VLZXlzIiwiaXNQcm90b3R5cGUiLCJuYXRpdmVLZXlzIiwiYmFzZVJlc3QiLCJzdGFydCIsIm5hdGl2ZU1heCIsImFycmF5Iiwib3RoZXJBcmdzIiwiY29weU9iamVjdCIsImN1c3RvbWl6ZXIiLCJuZXdWYWx1ZSIsImNyZWF0ZUFzc2lnbmVyIiwiYXNzaWduZXIiLCJzb3VyY2VzIiwiZ3VhcmQiLCJpc0l0ZXJhdGVlQ2FsbCIsIk1BWF9TQUZFX0lOVEVHRVIiLCJyZUlzVWludCIsImlzT2JqZWN0IiwiaXNBcnJheUxpa2UiLCJDdG9yIiwicHJvdG8iLCJvYmplY3RQcm90byIsIm90aGVyIiwiaXNBcnJheUxpa2VPYmplY3QiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIm9iamVjdFRvU3RyaW5nIiwiYXJnc1RhZyIsImlzTGVuZ3RoIiwiaXNGdW5jdGlvbiIsImlzT2JqZWN0TGlrZSIsInRhZyIsImZ1bmNUYWciLCJnZW5UYWciLCJtYXgiLCJub25FbnVtU2hhZG93cyIsInZhbHVlT2YiLCJ3YXJuIiwicyIsInRyaW0iLCJmb2N1c2FibGUiLCJlbGVtZW50IiwiaXNUYWJJbmRleE5vdE5hTiIsIm5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJkaXNhYmxlZCIsInZpc2libGUiLCJoaWRkZW4iLCJlbCIsImRpc3BsYXkiLCJkb2N1bWVudCIsImJvZHkiLCJwYXJlbnROb2RlIiwidGFiYmFibGUiLCJ0YWJJbmRleCIsImdldEF0dHJpYnV0ZSIsImlzVGFiSW5kZXhOYU4iLCJpc05hTiIsImZpbmRUYWJiYWJsZURlc2NlbmRhbnRzIiwic2xpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGVmYXVsdFByb3BzIiwiYWNjZXNzaWJpbGl0eSIsImFycm93cyIsImNzc0Vhc2UiLCJjdXN0b21QYWdpbmciLCJkb3RzIiwiZG90c0NsYXNzIiwiZHJhZ2dhYmxlIiwiZWFzaW5nIiwiZWRnZUZyaWN0aW9uIiwiZm9jdXNPblNlbGVjdCIsInBhdXNlT25Ib3ZlciIsInJlc3BvbnNpdmUiLCJzbGlkZSIsInN3aXBlIiwic3dpcGVUb1NsaWRlIiwidG91Y2hNb3ZlIiwidG91Y2hUaHJlc2hvbGQiLCJ2YXJpYWJsZVdpZHRoIiwiZWRnZUV2ZW50IiwiaW5pdCIsInN3aXBlRXZlbnQiLCJuZXh0QXJyb3ciLCJwcmV2QXJyb3ciLCJjaGVja1NwZWNLZXlzIiwic3BlYyIsImtleXNBcnJheSIsInJlZHVjZSIsImVycm9yIiwidHJhY2tIZWlnaHQiLCJ0cmFja0NoaWxkcmVuIiwib3BhY2l0eSIsIldlYmtpdFRyYW5zZm9ybSIsInRyYW5zaXRpb24iLCJXZWJraXRUcmFuc2l0aW9uIiwibXNUcmFuc2Zvcm0iLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5MZWZ0Iiwic2xpZGVPZmZzZXQiLCJ2ZXJ0aWNhbE9mZnNldCIsInNsaWRlc1RvT2Zmc2V0IiwiZmxvb3IiLCJ0YXJnZXRTbGlkZUluZGV4IiwiY2hpbGROb2RlcyIsIm9mZnNldExlZnQiLCJFcnJvciIsImxvZ1BhZ2VWaWV3IiwibG9jYXRpb24iLCJfcmVhY3RHYTIiLCJzZXQiLCJwYWdlIiwicGF0aG5hbWUiLCJwYWdldmlldyIsIl9yZWFjdERvY3VtZW50TWV0YSIsIl9NYWluIiwiX01haW4yIiwiX0luZGV4IiwiX0luZGV4MiIsIl9Qcm9kdWN0cyIsIl9Qcm9kdWN0czIiLCJfUHJvZHVjdCIsIl9Qcm9kdWN0MiIsIl9Db2xsZWN0aW9ucyIsIl9Db2xsZWN0aW9uczIiLCJfQ29sbGVjdGlvbiIsIl9Db2xsZWN0aW9uMiIsIl9VcGxvYWQiLCJfVXBsb2FkMiIsIl9PcmRlclN0YXR1cyIsIl9PcmRlclN0YXR1czIiLCJfTWFwIiwiX01hcDIiLCJfTG9naW4iLCJfTG9naW4yIiwiX0Fib3V0IiwiX0Fib3V0MiIsIl9Db250YWN0IiwiX0NvbnRhY3QyIiwiX3JlYWN0R2EiLCJsaXN0ZW4iLCJzY3JvbGxUbyIsIlJvdXRlciIsImhpc3RvcnkiLCJSb3V0ZSIsInBhdGgiLCJjb21wb25lbnQiLCJJbmRleFJvdXRlIiwiQ2FydEl0ZW0iLCJpbmNyZW1lbnRMaW5lSXRlbSIsImNoYW5nZVF1YW50aXR5IiwidmFyaWFudF90aXRsZSIsIm1pbiIsInJlYWRPbmx5IiwiQ29sbGVjdGlvbkl0ZW0iLCJfQ29sbGVjdGlvbkl0ZW0iLCJfQ29sbGVjdGlvbkl0ZW0yIiwiQ29sbGVjdGlvbnMiLCJGb290ZXIiLCJhY3RpdmVDbGFzc05hbWUiLCJIZWFkZXIiLCJjYXJ0SXRlbXMiLCJJbmRleExpbmsiLCJhY3RpdmVTdHlsZSIsImZvbnRXZWlnaHQiLCJfcmVhY3RTbGljayIsIl9yZWFjdFNsaWNrMiIsIl9Qcm9kdWN0SXRlbSIsIl9Qcm9kdWN0SXRlbTIiLCJJbmRleCIsInNldHRpbmdzIiwiYnJlYWtwb2ludCIsInR5ZXAiLCJoYW5kbGVBZGRUb0NhcnQiLCJfSGVhZGVyIiwiX0hlYWRlcjIiLCJfRm9vdGVyIiwiX0Zvb3RlcjIiLCJfcmVhY3REb2N1bWVudE1ldGEyIiwiX2NhcnQiLCJfY2FydDIiLCJNYWluIiwiY29udGVudCIsIm1ldGEiLCJjaGFyc2V0IiwiYXV0byIsIm9ncmFwaCIsInBhZ2VOYW1lIiwic3Vic3RyIiwic3BsaXQiLCJQcm9kdWN0cyIsIlVwbG9hZCIsIl9DYXJ0SXRlbSIsIl9DYXJ0SXRlbTIiLCJDYXJ0IiwiaGFuZGxlQ2hlY2tvdXQiLCJvcGVuIiwiY2hlY2tvdXRVcmwiLCJfcHJvcHMkY2FydCIsInJlbmRlckxpbmVJdGVtcyIsImxpbmVJdGVtIiwiaGFuZGxlQ2xvc2VDYXJ0IiwiQWJvdXQiLCJDb250YWN0IiwiTG9naW4iLCJNYXAiLCJPcmRlclN0YXR1cyIsInByb2R1Y3RzUmVkdWNlciIsImFjdGlvbiIsImZldGNoZWQiLCJjb2xsZWN0aW9uc1JlZHVjZXIiLCJjYXJ0UmVkdWNlciIsIm5hdlJlZHVjZXIiLCJzaG93Q2xvc2UiLCJzaG93TmF2IiwicGxhY2VIb2xkZXJzQ291bnQiLCJiNjQiLCJsZW4iLCJieXRlTGVuZ3RoIiwidG9CeXRlQXJyYXkiLCJqIiwibCIsInRtcCIsInBsYWNlSG9sZGVycyIsImFyciIsIkFyciIsIkwiLCJyZXZMb29rdXAiLCJjaGFyQ29kZUF0IiwidHJpcGxldFRvQmFzZTY0IiwibnVtIiwibG9va3VwIiwiZW5jb2RlQ2h1bmsiLCJ1aW50OCIsImVuZCIsIm91dHB1dCIsImZyb21CeXRlQXJyYXkiLCJleHRyYUJ5dGVzIiwicGFydHMiLCJtYXhDaHVua0xlbmd0aCIsImxlbjIiLCJVaW50OEFycmF5IiwiY29kZSIsImdsb2JhbCIsInR5cGVkQXJyYXlTdXBwb3J0IiwiZm9vIiwic3ViYXJyYXkiLCJlIiwia01heExlbmd0aCIsIkJ1ZmZlciIsIlRZUEVEX0FSUkFZX1NVUFBPUlQiLCJjcmVhdGVCdWZmZXIiLCJ0aGF0IiwiUmFuZ2VFcnJvciIsImVuY29kaW5nT3JPZmZzZXQiLCJhbGxvY1Vuc2FmZSIsImZyb20iLCJBcnJheUJ1ZmZlciIsImZyb21BcnJheUJ1ZmZlciIsImZyb21TdHJpbmciLCJmcm9tT2JqZWN0IiwiYXNzZXJ0U2l6ZSIsInNpemUiLCJhbGxvYyIsImZpbGwiLCJlbmNvZGluZyIsImNoZWNrZWQiLCJzdHJpbmciLCJpc0VuY29kaW5nIiwiYWN0dWFsIiwid3JpdGUiLCJmcm9tQXJyYXlMaWtlIiwiYnl0ZU9mZnNldCIsImlzQnVmZmVyIiwiY29weSIsImJ1ZmZlciIsImlzbmFuIiwiU2xvd0J1ZmZlciIsImlzVmlldyIsImxvd2VyZWRDYXNlIiwidXRmOFRvQnl0ZXMiLCJiYXNlNjRUb0J5dGVzIiwic2xvd1RvU3RyaW5nIiwiaGV4U2xpY2UiLCJ1dGY4U2xpY2UiLCJhc2NpaVNsaWNlIiwibGF0aW4xU2xpY2UiLCJiYXNlNjRTbGljZSIsInV0ZjE2bGVTbGljZSIsInN3YXAiLCJiIiwibSIsImJpZGlyZWN0aW9uYWxJbmRleE9mIiwidmFsIiwiZGlyIiwiYXJyYXlJbmRleE9mIiwibGFzdEluZGV4T2YiLCJyZWFkIiwiYnVmIiwiaW5kZXhTaXplIiwicmVhZFVJbnQxNkJFIiwiYXJyTGVuZ3RoIiwidmFsTGVuZ3RoIiwiZm91bmRJbmRleCIsImZvdW5kIiwiaGV4V3JpdGUiLCJvZmZzZXQiLCJOdW1iZXIiLCJyZW1haW5pbmciLCJzdHJMZW4iLCJwYXJzZWQiLCJ1dGY4V3JpdGUiLCJibGl0QnVmZmVyIiwiYXNjaWlXcml0ZSIsImFzY2lpVG9CeXRlcyIsImxhdGluMVdyaXRlIiwiYmFzZTY0V3JpdGUiLCJ1Y3MyV3JpdGUiLCJ1dGYxNmxlVG9CeXRlcyIsImJhc2U2NCIsInJlcyIsImZpcnN0Qnl0ZSIsImNvZGVQb2ludCIsImJ5dGVzUGVyU2VxdWVuY2UiLCJzZWNvbmRCeXRlIiwidGhpcmRCeXRlIiwiZm91cnRoQnl0ZSIsInRlbXBDb2RlUG9pbnQiLCJkZWNvZGVDb2RlUG9pbnRzQXJyYXkiLCJjb2RlUG9pbnRzIiwiTUFYX0FSR1VNRU5UU19MRU5HVEgiLCJmcm9tQ2hhckNvZGUiLCJyZXQiLCJvdXQiLCJ0b0hleCIsImJ5dGVzIiwiY2hlY2tPZmZzZXQiLCJleHQiLCJjaGVja0ludCIsIm9iamVjdFdyaXRlVUludDE2IiwibGl0dGxlRW5kaWFuIiwib2JqZWN0V3JpdGVVSW50MzIiLCJjaGVja0lFRUU3NTQiLCJ3cml0ZUZsb2F0Iiwibm9Bc3NlcnQiLCJpZWVlNzU0Iiwid3JpdGVEb3VibGUiLCJiYXNlNjRjbGVhbiIsInN0ciIsInN0cmluZ3RyaW0iLCJJTlZBTElEX0JBU0U2NF9SRSIsInVuaXRzIiwiSW5maW5pdHkiLCJsZWFkU3Vycm9nYXRlIiwiYnl0ZUFycmF5IiwiYyIsImhpIiwibG8iLCJkc3QiLCJJTlNQRUNUX01BWF9CWVRFUyIsInBvb2xTaXplIiwiX2F1Z21lbnQiLCJTeW1ib2wiLCJzcGVjaWVzIiwiYWxsb2NVbnNhZmVTbG93IiwiX2lzQnVmZmVyIiwiY29tcGFyZSIsImEiLCJ4IiwieSIsInBvcyIsInN3YXAxNiIsInN3YXAzMiIsInN3YXA2NCIsImVxdWFscyIsImluc3BlY3QiLCJtYXRjaCIsInRoaXNTdGFydCIsInRoaXNFbmQiLCJ0aGlzQ29weSIsInRhcmdldENvcHkiLCJpbmNsdWRlcyIsImlzRmluaXRlIiwidG9KU09OIiwiX2FyciIsIm5ld0J1ZiIsInNsaWNlTGVuIiwicmVhZFVJbnRMRSIsIm11bCIsInJlYWRVSW50QkUiLCJyZWFkVUludDgiLCJyZWFkVUludDE2TEUiLCJyZWFkVUludDMyTEUiLCJyZWFkVUludDMyQkUiLCJyZWFkSW50TEUiLCJwb3ciLCJyZWFkSW50QkUiLCJyZWFkSW50OCIsInJlYWRJbnQxNkxFIiwicmVhZEludDE2QkUiLCJyZWFkSW50MzJMRSIsInJlYWRJbnQzMkJFIiwicmVhZEZsb2F0TEUiLCJyZWFkRmxvYXRCRSIsInJlYWREb3VibGVMRSIsInJlYWREb3VibGVCRSIsIndyaXRlVUludExFIiwibWF4Qnl0ZXMiLCJ3cml0ZVVJbnRCRSIsIndyaXRlVUludDgiLCJ3cml0ZVVJbnQxNkxFIiwid3JpdGVVSW50MTZCRSIsIndyaXRlVUludDMyTEUiLCJ3cml0ZVVJbnQzMkJFIiwid3JpdGVJbnRMRSIsImxpbWl0Iiwic3ViIiwid3JpdGVJbnRCRSIsIndyaXRlSW50OCIsIndyaXRlSW50MTZMRSIsIndyaXRlSW50MTZCRSIsIndyaXRlSW50MzJMRSIsIndyaXRlSW50MzJCRSIsIndyaXRlRmxvYXRMRSIsIndyaXRlRmxvYXRCRSIsIndyaXRlRG91YmxlTEUiLCJ3cml0ZURvdWJsZUJFIiwidGFyZ2V0U3RhcnQiLCJjYW5Vc2VET00iLCJwcm9wIiwiRWxlbWVudENsYXNzIiwibm9kZVR5cGUiLCJhZGQiLCJyZW1vdmUiLCJpZHgiLCJzcGxpY2UiLCJoYXMiLCJ0b2dnbGUiLCJjb250ZXh0IiwiZmFjdG9yeSIsIm1hdGNoTWVkaWEiLCJlYWNoIiwiZm4iLCJjb250IiwiUXVlcnlIYW5kbGVyIiwiZGVmZXJTZXR1cCIsInNldHVwIiwiTWVkaWFRdWVyeSIsImlzVW5jb25kaXRpb25hbCIsImhhbmRsZXJzIiwibXFsIiwibGlzdGVuZXIiLCJhc3Nlc3MiLCJhZGRMaXN0ZW5lciIsIk1lZGlhUXVlcnlEaXNwYXRjaCIsInF1ZXJpZXMiLCJicm93c2VySXNJbmNhcGFibGUiLCJtYXRjaGVzIiwiaW5pdGlhbGlzZWQiLCJvbiIsIm9mZiIsInVubWF0Y2giLCJkZXN0cm95IiwiYWRkSGFuZGxlciIsImhhbmRsZXIiLCJxaCIsInJlbW92ZUhhbmRsZXIiLCJoIiwiY2xlYXIiLCJyZW1vdmVMaXN0ZW5lciIsInJlZ2lzdGVyIiwic2hvdWxkRGVncmFkZSIsInVucmVnaXN0ZXIiLCJFeGVjdXRpb25FbnZpcm9ubWVudCIsImNhblVzZVdvcmtlcnMiLCJXb3JrZXIiLCJjYW5Vc2VFdmVudExpc3RlbmVycyIsImNhblVzZVZpZXdwb3J0Iiwic2NyZWVuIiwiaXNMRSIsIm1MZW4iLCJuQnl0ZXMiLCJlTGVuIiwiZU1heCIsImVCaWFzIiwibkJpdHMiLCJkIiwiTmFOIiwicnQiLCJMTjIiLCJSZWFjdCIsIk5FV1RBQiIsIk91dGJvdW5kTGluayIsImNyZWF0ZUNsYXNzIiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJldmVudExhYmVsIiwiUHJvcFR5cGVzIiwiaXNSZXF1aXJlZCIsInN0YXRpY3MiLCJ0cmFja0xpbmsiLCJoYW5kbGVDbGljayIsInByZXZlbnREZWZhdWx0IiwiZXZlbnRNZXRhIiwibGFiZWwiLCJyZW5kZXIiLCJmb3JtYXQiLCJyZW1vdmVMZWFkaW5nU2xhc2giLCJfZGVidWciLCJfdGl0bGVDYXNlIiwiUmVhY3RHQSIsImdhVHJhY2tpbmdJRCIsImRlYnVnIiwidGl0bGVDYXNlIiwibyIsImciLCJEYXRlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhc3luYyIsImluc2VydEJlZm9yZSIsImdhT3B0aW9ucyIsImdhIiwiSlNPTiIsInN0cmluZ2lmeSIsImZpZWxkc09iamVjdCIsInNlbmQiLCJmaWVsZE9iamVjdCIsIm1vZGFsdmlldyIsIm1vZGFsTmFtZSIsInRpbWluZyIsImNhdGVnb3J5IiwidmFyaWFibGUiLCJoaXRUeXBlIiwidGltaW5nQ2F0ZWdvcnkiLCJ0aW1pbmdWYXIiLCJ0aW1pbmdWYWx1ZSIsInRpbWluZ0xhYmVsIiwiZXZlbnRDYXRlZ29yeSIsImV2ZW50QWN0aW9uIiwiZXZlbnRWYWx1ZSIsIm5vbkludGVyYWN0aW9uIiwidHJhbnNwb3J0IiwiZXhjZXB0aW9uIiwiZXhEZXNjcmlwdGlvbiIsImZhdGFsIiwiZXhGYXRhbCIsInBsdWdpbiIsInJlcXVpcmUiLCJleGVjdXRlIiwicGF5bG9hZCIsImFjdGlvblR5cGUiLCJwbHVnaW5OYW1lIiwiY29tbWFuZCIsIm91dGJvdW5kTGluayIsImhpdENhbGxiYWNrIiwic2FmZXR5Q2FsbGJhY2tDYWxsZWQiLCJzYWZldHlDYWxsYmFjayIsInQiLCJjbGVhcmFibGVDYWxsYmFja0ZvckdBIiwib3JpZ1RyYWNrTGluayIsImluZm8iLCJtaWdodEJlRW1haWwiLCJfcmVkYWN0ZWQiLCJ0b1RpdGxlQ2FzZSIsInN1YnN0cmluZyIsInNtYWxsV29yZHMiLCJzZWFyY2giLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImdldFBhcmVudEVsZW1lbnQiLCJwYXJlbnRTZWxlY3RvciIsIlJlYWN0RE9NIiwiTW9kYWxQb3J0YWwiLCJjcmVhdGVGYWN0b3J5IiwiYXJpYUFwcEhpZGVyIiwiZWxlbWVudENsYXNzIiwicmVuZGVyU3VidHJlZUludG9Db250YWluZXIiLCJ1bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciIsIkFzc2lnbiIsIlNhZmVIVE1MRWxlbWVudCIsIkhUTUxFbGVtZW50IiwiQXBwRWxlbWVudCIsImFwcGVuZENoaWxkIiwiTW9kYWwiLCJzZXRBcHBFbGVtZW50Iiwic2V0RWxlbWVudCIsImluamVjdENTUyIsImJvb2wiLCJzaGFwZSIsIm92ZXJsYXkiLCJwb3J0YWxDbGFzc05hbWUiLCJhcHBFbGVtZW50IiwiaW5zdGFuY2VPZiIsIm9uQWZ0ZXJPcGVuIiwibnVtYmVyIiwiYXJpYUhpZGVBcHAiLCJzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrIiwicm9sZSIsImdldERlZmF1bHRQcm9wcyIsImNvbXBvbmVudERpZE1vdW50Iiwibm9kZSIsInBhcmVudCIsInJlbmRlclBvcnRhbCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXdQcm9wcyIsImN1cnJlbnRQYXJlbnQiLCJuZXdQYXJlbnQiLCJyZW1vdmVDaGlsZCIsImNvbXBvbmVudFdpbGxVbm1vdW50Iiwic2hvdyIsInVubW91bnRDb21wb25lbnRBdE5vZGUiLCJwb3J0YWwiLCJkZWZhdWx0U3R5bGVzIiwiRE9NIiwibm9zY3JpcHQiLCJwb3NpdGlvbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyIiwiYmFja2dyb3VuZCIsIm92ZXJmbG93IiwiV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmciLCJib3JkZXJSYWRpdXMiLCJvdXRsaW5lIiwicGFkZGluZyIsImRpdiIsImZvY3VzTWFuYWdlciIsInNjb3BlVGFiIiwiQ0xBU1NfTkFNRVMiLCJiYXNlIiwiYWZ0ZXJPcGVuIiwiYmVmb3JlQ2xvc2UiLCJzaG91bGRDbG9zZSIsImdldEluaXRpYWxTdGF0ZSIsInNldEZvY3VzQWZ0ZXJSZW5kZXIiLCJjbG9zZVRpbWVyIiwiY2xvc2UiLCJjb21wb25lbnREaWRVcGRhdGUiLCJmb2N1c0FmdGVyUmVuZGVyIiwiZm9jdXNDb250ZW50IiwiZm9jdXMiLCJzZXR1cFNjb3BlZEZvY3VzIiwibWFya0ZvckZvY3VzTGF0ZXIiLCJjbG9zZVdpdGhUaW1lb3V0IiwiY2xvc2VXaXRob3V0VGltZW91dCIsImNvbnRlbnRIYXNGb2N1cyIsInJlZnMiLCJhZnRlckNsb3NlIiwicmV0dXJuRm9jdXMiLCJ0ZWFyZG93blNjb3BlZEZvY3VzIiwiaGFuZGxlS2V5RG93biIsImtleUNvZGUiLCJyZXF1ZXN0Q2xvc2UiLCJoYW5kbGVPdmVybGF5TW91c2VEb3duIiwiaGFuZGxlT3ZlcmxheU1vdXNlVXAiLCJvd25lckhhbmRsZXNDbG9zZSIsImhhbmRsZUNvbnRlbnRNb3VzZURvd24iLCJoYW5kbGVDb250ZW50TW91c2VVcCIsInNob3VsZEJlQ2xvc2VkIiwiYWN0aXZlRWxlbWVudCIsImNvbnRhaW5zIiwiYnVpbGRDbGFzc05hbWUiLCJ3aGljaCIsImFkZGl0aW9uYWwiLCJjb250ZW50U3R5bGVzIiwib3ZlcmxheVN0eWxlcyIsInJlZiIsIm92ZXJsYXlDbGFzc05hbWUiLCJvbk1vdXNlRG93biIsIm9uTW91c2VVcCIsIm9uS2V5RG93biIsImFyaWEtbGFiZWwiLCJfZWxlbWVudCIsImhpZGUiLCJ2YWxpZGF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzaG91bGRIaWRlIiwicmVzZXRGb3JUZXN0aW5nIiwiaGFuZGxlQmx1ciIsIm5lZWRUb0ZvY3VzIiwiaGFuZGxlRm9jdXMiLCJtb2RhbEVsZW1lbnQiLCJmaW5kVGFiYmFibGUiLCJmb2N1c0xhdGVyRWxlbWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsImZpbmFsVGFiYmFibGUiLCJzaGlmdEtleSIsImxlYXZpbmdGaW5hbFRhYmJhYmxlIiwiZW5xdWlyZSIsIlJlc3BvbnNpdmVNaXhpbiIsIm1lZGlhIiwiX3Jlc3BvbnNpdmVNZWRpYUhhbmRsZXJzIiwiTmV4dEFycm93IiwiUHJldkFycm93IiwiX2NsYXNzbmFtZXMiLCJfY2xhc3NuYW1lczIiLCJfaGVscGVycyIsIl9oZWxwZXJzMiIsImNsaWNrSGFuZGxlciIsInByZXZDbGFzc2VzIiwic2xpY2stYXJyb3ciLCJzbGljay1wcmV2IiwicHJldkhhbmRsZXIiLCJtZXNzYWdlIiwicHJldkFycm93UHJvcHMiLCJkYXRhLXJvbGUiLCJjbG9uZUVsZW1lbnQiLCJuZXh0Q2xhc3NlcyIsInNsaWNrLW5leHQiLCJuZXh0SGFuZGxlciIsIm5leHRBcnJvd1Byb3BzIiwiRG90cyIsImdldERvdENvdW50IiwiY2VpbCIsImRvdENvdW50IiwibGVmdEJvdW5kIiwicmlnaHRCb3VuZCIsInNsaWNrLWFjdGl2ZSIsImRvdE9wdGlvbnMiLCJkcmFnZ2luZyIsImN1cnJlbnREaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJpbml0aWFsaXplZCIsImVkZ2VEcmFnZ2VkIiwic3dpcGVkIiwiSW5uZXJTbGlkZXIiLCJfZXZlbnRIYW5kbGVycyIsIl9ldmVudEhhbmRsZXJzMiIsIl9pbml0aWFsU3RhdGUiLCJfaW5pdGlhbFN0YXRlMiIsIl9kZWZhdWx0UHJvcHMiLCJfZGVmYXVsdFByb3BzMiIsIl90cmFjayIsIl9kb3RzIiwiX2Fycm93cyIsIm1peGlucyIsImxpc3RSZWZIYW5kbGVyIiwidHJhY2tSZWZIYW5kbGVyIiwiY29tcG9uZW50V2lsbE1vdW50Iiwib25XaW5kb3dSZXNpemVkIiwiY2xlYXJJbnRlcnZhbCIsIm5leHRQcm9wcyIsInNsaWNrR29UbyIsImNoYW5nZVNsaWRlIiwic2xpY2tQcmV2Iiwic2xpY2tOZXh0Iiwic2xpY2stdmVydGljYWwiLCJ0cmFja1Byb3BzIiwic2VsZWN0SGFuZGxlciIsImRvdFByb3BzIiwiYXJyb3dQcm9wcyIsInZlcnRpY2FsSGVpZ2h0U3R5bGUiLCJjZW50ZXJQYWRkaW5nU3R5bGUiLCJsaXN0U3R5bGUiLCJvbk1vdXNlRW50ZXIiLCJvbklubmVyU2xpZGVyRW50ZXIiLCJvbk1vdXNlTGVhdmUiLCJvbklubmVyU2xpZGVyTGVhdmUiLCJvbk1vdXNlT3ZlciIsIm9uSW5uZXJTbGlkZXJPdmVyIiwic3dpcGVTdGFydCIsIm9uTW91c2VNb3ZlIiwic3dpcGVNb3ZlIiwic3dpcGVFbmQiLCJvblRvdWNoU3RhcnQiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJvblRvdWNoQ2FuY2VsIiwia2V5SGFuZGxlciIsIlRyYWNrIiwiRXZlbnRIYW5kbGVycyIsImluZGV4T2Zmc2V0IiwicHJldmlvdXNJbnQiLCJ1bmV2ZW5PZmZzZXQiLCJfc3RhdGUiLCJ0YWdOYW1lIiwicG9zWCIsInBvc1kiLCJ0b3VjaGVzIiwicGFnZVgiLCJjbGllbnRYIiwicGFnZVkiLCJjbGllbnRZIiwiY3VyTGVmdCIsInBvc2l0aW9uT2Zmc2V0Iiwic3dpcGVMZW5ndGgiLCJzcXJ0IiwidG91Y2hTd2lwZUxlbmd0aCIsImdldE5hdmlnYWJsZUluZGV4ZXMiLCJicmVha1BvaW50IiwiY291bnRlciIsImluZGV4ZXMiLCJjaGVja05hdmlnYWJsZSIsIm5hdmlnYWJsZXMiLCJwcmV2TmF2aWdhYmxlIiwiZ2V0U2xpZGVDb3VudCIsImNlbnRlck9mZnNldCIsInN3aXBlZFNsaWRlIiwic2xpZGVzIiwiZXZlcnkiLCJvZmZzZXRUb3AiLCJzbGlkZXNUcmF2ZXJzZWQiLCJkYXRhc2V0IiwibWluU3dpcGUiLCJuZXdTbGlkZSIsIl9pbm5lclNsaWRlciIsIl9qc29uMm1xIiwiX2pzb24ybXEyIiwiX3JlYWN0UmVzcG9uc2l2ZU1peGluIiwiX3JlYWN0UmVzcG9uc2l2ZU1peGluMiIsIlNsaWRlciIsImlubmVyU2xpZGVyIiwiaW5uZXJTbGlkZXJSZWZIYW5kbGVyIiwiYnJlYWtwb2ludHMiLCJicmVha3B0Iiwic29ydCIsImJRdWVyeSIsIm1pbldpZHRoIiwibWF4V2lkdGgiLCJyZXNwIiwiY2hpbGQiLCJnZXRTbGlkZUNsYXNzZXMiLCJzbGlja0FjdGl2ZSIsInNsaWNrQ2VudGVyIiwic2xpY2tDbG9uZWQiLCJzbGljay1zbGlkZSIsInNsaWNrLWNlbnRlciIsInNsaWNrLWNsb25lZCIsImdldFNsaWRlU3R5bGUiLCJnZXRLZXkiLCJmYWxsYmFja0tleSIsInJlbmRlclNsaWRlcyIsInByZUNsb25lU2xpZGVzIiwicG9zdENsb25lU2xpZGVzIiwiY2hpbGRPbkNsaWNrT3B0aW9ucyIsImNzc0NsYXNzZXMiLCJjaGlsZFN0eWxlIiwic2xpY2tDbGFzc2VzIiwiZGF0YS1pbmRleCIsImluZmluaXRlQ291bnQiLCJyZXZlcnNlIiwiY3JlYXRlVGh1bmtNaWRkbGV3YXJlIiwiZXh0cmFBcmd1bWVudCIsIl9yZWYiLCJuZXh0IiwidGh1bmsiLCJ3aXRoRXh0cmFBcmd1bWVudCIsIl90b0NvbnN1bWFibGVBcnJheSIsImFycjIiLCJ3cmFwIiwic3VwZXJGdW5jIiwic3VwZXJXcmFwcGVyIiwib3JpZ2luYWxTdXBlciIsIndyYXBwZWRGdW5jdGlvbiIsIm5hbWVzIiwiZGVzdGluYXRpb24iLCJwYXJlbnRQcm90byIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInBhcmVudERlc2NyaXB0b3IiLCJpbnN0YW5jZVByb3BlcnR5TmFtZXMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiaW5jbHVkZXMkMSIsImFzc2lnbiQxIiwic3RhdGljUHJvcGVydHlOYW1lcyIsIndyYXBDb25zb2xlIiwibG9nQ29tbWFuZCIsImxvZ01ldGhvZCIsIkZ1bmN0aW9uIiwidW5zaGlmdCIsImF1dGhUb1VybCIsInVybCIsImF1dGhvcml6YXRpb24iLCJoZWFkZXJzIiwiaGFzaGVkS2V5IiwicGxhaW5LZXkiLCJhdG9iIiwibmV3VXJsIiwiaWU5QWpheCIsIm1ldGhvZCIsImhhbmRsZUVycm9yIiwieGRyIiwiWERvbWFpblJlcXVlc3QiLCJvbmxvYWQiLCJqc29uIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJvcmlnaW5hbFJlc3BvbnNlIiwiaXNKU09OIiwidGV4dCIsImlzVGV4dCIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJpc05vZGVMaWtlRW52aXJvbm1lbnQiLCJ3aW5kb3dBYnNlbnQiLCJyZXF1aXJlUHJlc2VudCIsImNoZWNrU3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwicGFyc2VSZXNwb25zZSIsInJlc3BvbnNlQ2xvbmUiLCJjbG9uZSIsImFqYXgiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm1vZGUiLCJmZXRjaCIsInV1aWQiLCJ1dWlkU2VlZCIsInNldEd1aWRGb3IiLCJHVUlEX0tFWSIsIl90eXBlb2YiLCJudW1iZXJDYWNoZSIsInN0cmluZ0NhY2hlIiwiR1VJRF9QUkVGSVgiLCJHVUlEX0RFU0MiLCJnbG9iYWxOYW1lc3BhY2UiLCJnZXQiLCJvYmplY3RzRXF1YWwiLCJvbmUiLCJ0d28iLCJmZXRjaEZhY3RvcnkiLCJmZXRjaFR5cGUiLCJmZXRjaEFsbCIsImZldGNoUXVlcnkiLCJpdGVyYXRvciIsInByb3BlcnR5T2JqZWN0cyIsIm5leHRLZXkiLCJzZWFyY2hFbGVtZW50IiwiT2JqZWN0aWZpZWRBcnJheSIsInN0YXJ0SW5kZXgiLCJjdXJyZW50RWxlbWVudCIsIkNvcmVPYmplY3QiLCJzdGF0aWMiLCJleHRlbmQiLCJzdWJDbGFzc1Byb3BzIiwiTG9nZ2VyIiwibG9nZ2VyIiwiQ29uZmlnIiwiZGVwcmVjYXRlZFByb3BlcnRpZXMiLCJ0cmFuc2Zvcm1OYW1lIiwicmVxdWlyZWRQcm9wZXJ0aWVzIiwib3B0aW9uYWxQcm9wZXJ0aWVzIiwibXlTaG9waWZ5RG9tYWluIiwidHJhbnNmb3JtTXlTaG9waWZ5RG9tYWluIiwic3ViZG9tYWluIiwiYWpheEhlYWRlcnMiLCJ2ZXJzaW9uIiwiQmFzZU1vZGVsIiwibWV0YUF0dHJzIiwic2VyaWFsaXplciIsImFkYXB0ZXIiLCJzaG9wQ2xpZW50IiwiUHJvZHVjdE9wdGlvbk1vZGVsIiwiX3NlbGVjdGVkIiwidmFyaWFudHMiLCJkaW1lbnNpb24iLCJJbWFnZU1vZGVsIiwiZXh0ZW5zaW9uSW5kZXgiLCJwYXRoQW5kQmFzZW5hbWUiLCJleHRlbnNpb24iLCJQcm9kdWN0VmFyaWFudE1vZGVsIiwiY29uZmlnIiwiYmFzZVVybCIsInZhcmlhbnRQYXRoIiwicHJvZHVjdFRpdGxlIiwiY29tcGFyZUF0UHJpY2UiLCJjb21wYXJlX2F0X3ByaWNlIiwiZm9ybWF0dGVkUHJpY2UiLCJmb3JtYXR0ZWRfcHJpY2UiLCJncmFtcyIsIm9wdGlvblZhbHVlcyIsIm9wdGlvbl92YWx1ZXMiLCJhdmFpbGFibGUiLCJwcmltYXJ5SW1hZ2UiLCJ2YXJpYW50SW1hZ2UiLCJ2YXJpYW50X2lkcyIsInVuaXEiLCJ1bmlxdWVBcnJheSIsIk5PX0lNQUdFX1VSSSIsIlByb2R1Y3RNb2RlbCIsImJvZHlfaHRtbCIsIm1lbW9pemVkIiwiX21lbW9pemVkIiwiYmFzZU9wdGlvbnMiLCJ2YXJpYW50cyQkMSIsImR1cGVkVmFsdWVzIiwidmFsdWVMaXN0Iiwib3B0aW9uVmFsdWVGb3JPcHRpb24iLCJvcHRpb25WYWx1ZSIsInNlbGVjdGlvbnMiLCJ2YXJpYW50VGl0bGUiLCJMaXN0aW5nc1NlcmlhbGl6ZXIiLCJyb290S2V5Rm9yVHlwZSIsIm1vZGVscyIsIm1vZGVsRm9yVHlwZSIsImRlc2VyaWFsaXplU2luZ2xlIiwic2luZ2xlUGF5bG9hZCIsIm1vZGVsQXR0cnMiLCJtb2RlbCIsIm1vZGVsRnJvbUF0dHJzIiwiZGVzZXJpYWxpemVNdWx0aXBsZSIsIl90aGlzNCIsImNvbGxlY3Rpb25QYXlsb2FkIiwiTW9kZWwiLCJMaXN0aW5nc0FkYXB0ZXIiLCJwYXRoRm9yVHlwZSIsImJ1aWxkVXJsIiwic2luZ2xlT3JNdWx0aXBsZSIsImlkT3JRdWVyeSIsImJ1aWxkTXVsdGlwbGVVcmwiLCJidWlsZFNpbmdsZVVybCIsInBhcmFtTmFtZXMiLCJxdWVyeVN0cmluZyIsImVuY29kZVVSSUNvbXBvbmVudCIsImZldGNoTXVsdGlwbGUiLCJmZXRjaFNpbmdsZSIsImJhc2U2NEFwaUtleSIsImJ0b2EiLCJfY29uZmlnIiwiQXV0aG9yaXphdGlvbiIsIkNvbnRlbnQtVHlwZSIsIlgtU0RLLVZhcmlhbnQiLCJYLVNESy1WZXJzaW9uIiwiQ2FydExpbmVJdGVtTW9kZWwiLCJwYXJzZWRWYWx1ZSIsInByb3BlcnRpZXMiLCJsaW5lX3ByaWNlIiwibm93IiwiZ2xvYmFsVmFycyIsIkNhcnRNb2RlbCIsImFkZFZhcmlhbnRzIiwibmV3TGluZUl0ZW1zIiwiaW1hZ2VfdmFyaWFudHMiLCJleGlzdGluZ0xpbmVJdGVtcyIsImxpbmVfaXRlbXMiLCJkZWR1cGVkTGluZUl0ZW1zIiwiaXRlbUFjYyIsIm1hdGNoaW5nSXRlbSIsImV4aXN0aW5nSXRlbSIsInVwZGF0ZU1vZGVsIiwicmVtb3ZlTGluZUl0ZW0iLCJvbGRMZW5ndGgiLCJuZXdMZW5ndGgiLCJjbGVhckxpbmVJdGVtcyIsIl90aGlzNSIsInVwZGF0ZUNhcnQiLCJ0b3RhbCIsInJ1bm5pbmdUb3RhbCIsImxpbmtlclBhcmFtIiwidHJhY2tlciIsIkNhcnRTZXJpYWxpemVyIiwic2VyaWFsaXplIiwicm9vdCIsImF0dHJpYnV0ZXMiLCJSZWZlcmVuY2VNb2RlbCIsInJlZmVyZW5jZUlkIiwiUmVmZXJlbmNlU2VyaWFsaXplciIsIlN0b3JlIiwibG9jYWxTdG9yYWdlQXZhaWxhYmxlIiwic3RvcmFnZUF2YWlsYWJsZSIsImNhY2hlIiwic3RyaW5nVmFsdWUiLCJzdG9yYWdlIiwicmVtb3ZlSXRlbSIsIkxvY2FsU3RvcmFnZUFkYXB0ZXIiLCJpZEtleUZvclR5cGUiLCJfdGhpczYiLCJzdG9yYWdlS2V5IiwiX3RoaXM3IiwiaWRlbnRpZnkiLCJfdGhpczgiLCJTaG9wQ2xpZW50Iiwic2VyaWFsaXplcnMiLCJjYXJ0cyIsInJlZmVyZW5jZXMiLCJhZGFwdGVycyIsIl90aGlzOSIsImRlc2VyaWFsaXplIiwibXVsdGlwbGUiLCJfdGhpczEwIiwic2luZ2xlIiwiX3RoaXMxMSIsIl90aGlzMTIiLCJ1cGRhdGVkTW9kZWwiLCJfdGhpczEzIiwic2VyaWFsaXplZE1vZGVsIiwiZXhpc3RpbmdTZXJpYWxpemVyIiwic2VyaWFsaXplZFBheWxvYWQiLCJ1c2VyQXR0cnMiLCJiYXNlQXR0cnMiLCJmZXRjaFF1ZXJ5UHJvZHVjdHMiLCJmZXRjaFF1ZXJ5Q29sbGVjdGlvbnMiLCJmZXRjaFJlY2VudENhcnQiLCJfdGhpczE0IiwicmVmZXJlbmNlIiwiY2FydElkIiwicmVmQXR0cnMiLCJzaGFkb3dlZFNlcmlhbGl6ZXJzIiwic2hhZG93ZWRBZGFwdGVycyIsIl9mZXRjaCIsIlJlc3BvbnNlIiwiU2hvcGlmeSIsImNvbmZpZ0F0dHJzIiwiX3JlYWN0UmVkdXgiLCJfcm91dGVyIiwiX3JvdXRlcjIiLCJjb2xsZWN0aW9uQWN0aW9ucyIsInN1YnNjcmliZSIsInJlc3RvcmVDYXJ0IiwiUHJvdmlkZXIiLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6IkFBQUFBLGNBQWMsRUFBRSxJQUNULENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0MsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUVGLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWpDLFlBWUEsU0FB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SXRFNjNYSWlCLEVBQWVoQixFQUF1QmUsRXNFNTNYMUNoQixHQUFBLElBTUEsSUFBQTI5QyxHQUFBMzlDLEVBQUEsS3RFNDNYSTQ5QyxFQUFXMzlDLEVBQXVCMDlDLEdzRS8zWGxDcHFDLEdBRGN2VCxFQUFRLElBQ0xBLEVBQVEsS0FDekI2OUMsRUFBb0I3OUMsRUFBUSxJQUM1QjJKLEVBQVEzSixFQUFRLElBQWtCeUUsV0FLdENrRixHQUFNbTBDLFVBQVUsV0FDZCxHQUFJeHdDLEdBQVEzRCxFQUFNdEksVUFDbEJtQixTQUFRQyxJQUFJLFlBQWE2SyxLQUkzQjNELEVBQU12SSxTQUFTbVMsRUFBZXRMLG9CQUM5QjBCLEVBQU12SSxTQUFTeThDLEVBQWtCLzJDLHVCQUc5QnhCLGFBQWFNLFFBQVEsY0FDdEIzRSxFQUFBYixRQUFXMjlDLGNBQWM3N0MsS0FBSyxTQUFDc0QsR0FDN0JtRSxFQUFNdkksVUFBV2lCLEtBQU0seUJBQTBCbUQsZ0JBR25EdkUsRUFBQWIsUUFBV2dGLGFBQWFsRCxLQUFLLFNBQUNzRCxHQUM1Qm1FLEVBQU12SSxVQUFXaUIsS0FBTSx5QkFBMEJtRCxnQkFPckQ0RixFQUFBaEwsUUFBUzIzQixPQUNQNXRCLEVBQUEvSixRQUFBZ0ssY0FBQXN6QyxFQUFBTSxVQUFVcjBDLE1BQU9BLEdBQWpCaTBDLEVBQUF4OUMsU0FHQWtiLFNBQVMyaUMsZUFBZSxXdEVzNFh2QiIsImZpbGUiOiJidW5kbGUubWluLjIxMDViYWFjMzg2NGFhOGJjNjFmLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFsxLDJdLFtcbi8qIDAgKi8sXG4vKiAxICovLFxuLyogMiAqLyxcbi8qIDMgKi8sXG4vKiA0ICovLFxuLyogNSAqLyxcbi8qIDYgKi8sXG4vKiA3ICovLFxuLyogOCAqLyxcbi8qIDkgKi8sXG4vKiAxMCAqLyxcbi8qIDExICovLFxuLyogMTIgKi8sXG4vKiAxMyAqLyxcbi8qIDE0ICovLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY2xvc2VDYXJ0ID0gZXhwb3J0cy5vcGVuQ2FydCA9IGV4cG9ydHMudXBkYXRlQ2FydEl0ZW0gPSBleHBvcnRzLnVwZGF0ZUNhcnRJdGVtc0NvdW50ID0gZXhwb3J0cy51cGRhdGVDYXJ0U3VidG90YWwgPSBleHBvcnRzLmFkZFRvQ2FydCA9IGV4cG9ydHMuc3RhcnRBZGRvclVwZGF0ZUNhcnRJdGVtID0gdW5kZWZpbmVkO1xuXG52YXIgX3Nob3BpZnlBUEkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblxudmFyIF9zaG9waWZ5QVBJMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Nob3BpZnlBUEkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgc3RhcnRBZGRvclVwZGF0ZUNhcnRJdGVtID0gZXhwb3J0cy5zdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0gPSBmdW5jdGlvbiBzdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0ocHJvZHVjdFZhcmlhbnQsIHF1YW50aXR5KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gsIGdldFN0YXRlKSB7XG4gICAgdmFyIGNhcnQgPSBnZXRTdGF0ZSgpLmNhcnQ7XG4gICAgdmFyIHZhcmlhbnRJZCA9IHZvaWQgMDtcblxuICAgIC8vIGFzc2lnbiB2YXJpYW50IGlkIGJhc2VkIG9uIGlzIHByb2R1Y3Qgb3IgY2FydCBsaW5lIGl0ZW1cbiAgICBpZiAocHJvZHVjdFZhcmlhbnQudmFyaWFudF9pZCkge1xuICAgICAgdmFyaWFudElkID0gcHJvZHVjdFZhcmlhbnQudmFyaWFudF9pZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyaWFudElkID0gcHJvZHVjdFZhcmlhbnQuaWQ7XG4gICAgfVxuXG4gICAgdmFyIGNhcnRMaW5lSXRlbSA9IGZpbmRDYXJ0SXRlbUJ5VmFyaWFudElkKHZhcmlhbnRJZCk7XG5cbiAgICAvLyBmdW5jdGlvbiB0byBjaGVjayBpZiBwcm9kdWN0IHZhcmlhbnQgYWxyZWFkeSBleGlzdHMgaW4gY2FydFxuICAgIGZ1bmN0aW9uIGZpbmRDYXJ0SXRlbUJ5VmFyaWFudElkKHZhcmlhbnRJZCkge1xuICAgICAgcmV0dXJuIGNhcnQubGluZUl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnaXRlbS52YXJpYW50X2lkOiAnLCBpdGVtLnZhcmlhbnRfaWQpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygndmFyaWFudElkOiAnLCB2YXJpYW50SWQpO1xuICAgICAgICByZXR1cm4gaXRlbS52YXJpYW50X2lkID09PSB2YXJpYW50SWQ7XG4gICAgICB9KVswXTtcbiAgICB9XG5cbiAgICBpZiAoY2FydExpbmVJdGVtKSB7XG4gICAgICBkaXNwYXRjaCh1cGRhdGVDYXJ0SXRlbShjYXJ0TGluZUl0ZW0sIHBhcnNlSW50KHF1YW50aXR5KSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXNwYXRjaChhZGRUb0NhcnQocHJvZHVjdFZhcmlhbnQsIHF1YW50aXR5KSk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIHRoZSBjYXJ0IHN1YnRvdGFsXG4gICAgZGlzcGF0Y2godXBkYXRlQ2FydFN1YnRvdGFsKCkpO1xuXG4gICAgLy8gIHVwZGF0ZSB0aGUgY2FydCBpdGVtcyBjb3VudFxuICAgIGRpc3BhdGNoKHVwZGF0ZUNhcnRJdGVtc0NvdW50KHF1YW50aXR5KSk7XG4gIH07XG59O1xuXG4vLyBhZGQgcHJvZHVjdCB0byBjYXJ0XG52YXIgYWRkVG9DYXJ0ID0gZXhwb3J0cy5hZGRUb0NhcnQgPSBmdW5jdGlvbiBhZGRUb0NhcnQocHJvZHVjdFZhcmlhbnQsIHF1YW50aXR5KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gsIGdldFN0YXRlKSB7XG4gICAgX3Nob3BpZnlBUEkyLmRlZmF1bHQuY2FydC5jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHMoeyB2YXJpYW50OiBwcm9kdWN0VmFyaWFudCwgcXVhbnRpdHk6IHF1YW50aXR5IH0pLnRoZW4oZnVuY3Rpb24gKHVwZGF0ZWRDYXJ0KSB7XG4gICAgICB2YXIgdXBkYXRlZENhcnRJdGVtcyA9IHVwZGF0ZWRDYXJ0LmxpbmVJdGVtcztcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DQVJUX0lURU1TJywgdXBkYXRlZENhcnRJdGVtczogdXBkYXRlZENhcnRJdGVtcyB9KTtcbiAgICAgIGRpc3BhdGNoKG9wZW5DYXJ0KCkpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcnMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gYWRkVG9DYXJ0JywgZXJyb3JzKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbi8vIHVwZGF0ZSBjYXJ0IHN1YnRvdGFsXG52YXIgdXBkYXRlQ2FydFN1YnRvdGFsID0gZXhwb3J0cy51cGRhdGVDYXJ0U3VidG90YWwgPSBmdW5jdGlvbiB1cGRhdGVDYXJ0U3VidG90YWwoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gsIGdldFN0YXRlKSB7XG4gICAgdmFyIG5ld1N1YnRvdGFsID0gX3Nob3BpZnlBUEkyLmRlZmF1bHQuY2FydC5zdWJ0b3RhbDtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfQ0FSVF9TVUJUT1RBTCcsIG5ld1N1YnRvdGFsOiBuZXdTdWJ0b3RhbCB9KTtcbiAgfTtcbn07XG5cbi8vIHVwZGF0ZSBjYXJ0IGl0ZW1zIGNvdW50XG52YXIgdXBkYXRlQ2FydEl0ZW1zQ291bnQgPSBleHBvcnRzLnVwZGF0ZUNhcnRJdGVtc0NvdW50ID0gZnVuY3Rpb24gdXBkYXRlQ2FydEl0ZW1zQ291bnQocXVhbnRpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCwgZ2V0U3RhdGUpIHtcbiAgICB2YXIgY2FydCA9IGdldFN0YXRlKCkuY2FydDtcbiAgICB2YXIgdXBkYXRlZENhcnRJdGVtc0NvdW50ID0gcGFyc2VJbnQoY2FydC5saW5lSXRlbXNDb3VudCkgKyBwYXJzZUludChxdWFudGl0eSk7XG4gICAgY29uc29sZS5sb2coJ25ldyBxdWFudGl0eTogJywgcXVhbnRpdHkpO1xuICAgIGNvbnNvbGUubG9nKCdvbGQgcXVhbnRpdHk6ICcsIGNhcnQubGluZUl0ZW1zQ291bnQpO1xuICAgIGNvbnNvbGUubG9nKCd1cGRhdGVkQ2FydEl0ZW1zQ291bnQ6ICcsIHVwZGF0ZWRDYXJ0SXRlbXNDb3VudCk7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnVVBEQVRFX0NBUlRfSVRFTVNfQ09VTlQnLCB1cGRhdGVkQ2FydEl0ZW1zQ291bnQ6IHVwZGF0ZWRDYXJ0SXRlbXNDb3VudCB9KTtcblxuICAgIGlmIChwYXJzZUludCh1cGRhdGVkQ2FydEl0ZW1zQ291bnQpIDwgMSkge1xuICAgICAgZGlzcGF0Y2goY2xvc2VDYXJ0KCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXNwYXRjaChvcGVuQ2FydCgpKTtcbiAgICB9XG4gIH07XG59O1xuXG4vLyB1cGRhdGUgYSBjYXJ0IGl0ZW1cbnZhciB1cGRhdGVDYXJ0SXRlbSA9IGV4cG9ydHMudXBkYXRlQ2FydEl0ZW0gPSBmdW5jdGlvbiB1cGRhdGVDYXJ0SXRlbShzZWxlY3RlZENhcnRJdGVtLCBxdWFudGl0eSkge1xuICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoLCBnZXRTdGF0ZSkge1xuICAgIHZhciBjYXJ0ID0gZ2V0U3RhdGUoKS5jYXJ0O1xuICAgIHZhciB1cGRhdGVkUXVhbnRpdHkgPSBzZWxlY3RlZENhcnRJdGVtLnF1YW50aXR5ICsgcXVhbnRpdHk7XG4gICAgdmFyIHVwZGF0ZWRDYXJ0SXRlbXMgPSBbXTtcblxuICAgIC8vIGlmIHRoZSBuZXcgcXVhbnRpdHkgaXMgbW9yZSB0aGFuIDAsIGtlZXAgaXQgaW4gdGhlIG5ldyBhcnJheVxuICAgIGNhcnQubGluZUl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGNhcnRJdGVtKSB7XG4gICAgICBpZiAoc2VsZWN0ZWRDYXJ0SXRlbS5pZCA9PT0gY2FydEl0ZW0uaWQpIHtcbiAgICAgICAgaWYgKHVwZGF0ZWRRdWFudGl0eSA+IDApIHtcbiAgICAgICAgICB2YXIgdXBkYXRlZENhcnRJdGVtID0gW107XG5cbiAgICAgICAgICAvLyBjbG9uZSB0aGUgbGluZSBpdGVtXG4gICAgICAgICAgdXBkYXRlZENhcnRJdGVtID0gY2FydEl0ZW07XG5cbiAgICAgICAgICAvLyB1cGRhdGUgdGhlIHF1YW50aXR5IG9mIHRoZSBuZXcgY2xvbmVcbiAgICAgICAgICB1cGRhdGVkQ2FydEl0ZW0ucXVhbnRpdHkgPSB1cGRhdGVkUXVhbnRpdHk7XG5cbiAgICAgICAgICAvLyByZXR1cm4gdGhlIHVwZGF0ZWQgY2FydCBpdGVtXG4gICAgICAgICAgdXBkYXRlZENhcnRJdGVtcy5wdXNoKHVwZGF0ZWRDYXJ0SXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJldHVybiB0aGUgdW5tb2RpZmllZCBpdGVtXG4gICAgICAgIHVwZGF0ZWRDYXJ0SXRlbXMucHVzaChjYXJ0SXRlbSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyB1cGRhdGUgdGhlIHNob3BpZnkgY2FydCBhcGkgc2luZ2xldG9uXG4gICAgX3Nob3BpZnlBUEkyLmRlZmF1bHQuY2FydC51cGRhdGVMaW5lSXRlbShzZWxlY3RlZENhcnRJdGVtLmlkLCB1cGRhdGVkUXVhbnRpdHkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdXBkYXRlIHRoZSBsb2NhbCBjYXJ0IGl0ZW1zIChpbiByZWR1eCBzdG9yZSlcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DQVJUX0lURU1TJywgdXBkYXRlZENhcnRJdGVtczogdXBkYXRlZENhcnRJdGVtcyB9KTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbi8vIG9wZW4gY2FydFxudmFyIG9wZW5DYXJ0ID0gZXhwb3J0cy5vcGVuQ2FydCA9IGZ1bmN0aW9uIG9wZW5DYXJ0KCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdPUEVOX0NBUlQnXG4gIH07XG59O1xuXG4vLyBjbG9zZSBjYXJ0XG52YXIgY2xvc2VDYXJ0ID0gZXhwb3J0cy5jbG9zZUNhcnQgPSBmdW5jdGlvbiBjbG9zZUNhcnQoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0NMT1NFX0NBUlQnXG4gIH07XG59O1xuXG4vKioqLyB9KSxcbi8qIDE2ICovLFxuLyogMTcgKi8sXG4vKiAxOCAqLyxcbi8qIDE5ICovLFxuLyogMjAgKi8sXG4vKiAyMSAqLyxcbi8qIDIyICovLFxuLyogMjMgKi8sXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xudmFyIFNob3BpZnlCdXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNSk7XG52YXIgc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KS5jb25maWd1cmUoKTtcblxudmFyIHNob3BpZnlBUEkgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIHNob3BpZnlBUEkoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIHNob3BpZnlBUEkpO1xuXG4gICAgdGhpcy5jbGllbnQgPSBTaG9waWZ5QnV5LmJ1aWxkQ2xpZW50KHtcbiAgICAgIGFwaUtleTogJ2UwYWI4Y2Y5YjVhMzBjZWUyNjE2YmYxNTFhNTZjNzYzJyxcbiAgICAgIGRvbWFpbjogJ3JtYy1wcmV2aWV3Lm15c2hvcGlmeS5jb20nLFxuICAgICAgYXBwSWQ6ICc2J1xuICAgIH0pO1xuICAgIHRoaXMuY2FydCA9IHt9O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKHNob3BpZnlBUEksIFt7XG4gICAga2V5OiAnY3JlYXRlQ2FydCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUNhcnQoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBfdGhpcy5jbGllbnQuY3JlYXRlQ2FydCgpLnRoZW4oZnVuY3Rpb24gKG5ld0NhcnQpIHtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGFzdENhcnRJZCcsIG5ld0NhcnQuaWQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGVkIG5ldyBjYXJ0JywgbmV3Q2FydCk7XG4gICAgICAgICAgLy8gc2V0IHNpbmdsZXRvbiBjYXJ0IG9iamVjdCB0byByZWZlcmVuY2Ugc2hvcGlmeSBjYXJ0XG4gICAgICAgICAgX3RoaXMuY2FydCA9IG5ld0NhcnQ7XG5cbiAgICAgICAgICAvLyBzZXQgbG9jYWxDYXJ0IChyZWR1eCBjb25uZWN0ZWQpIHRvIGtlZXAgdHJhY2sgb2Ygc3RhdGUgY2hhbmdlc1xuICAgICAgICAgIHZhciBsb2NhbENhcnQgPSB7XG4gICAgICAgICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgICAgICAgbGluZUl0ZW1zQ291bnQ6IDAsXG4gICAgICAgICAgICBsaW5lSXRlbXM6IFtdLFxuICAgICAgICAgICAgc3VidG90YWw6IDBcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJlc29sdmUobG9jYWxDYXJ0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZXN0b3JlQ2FydCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3RvcmVDYXJ0KCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIF90aGlzMi5jbGllbnQuZmV0Y2hDYXJ0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYXN0Q2FydElkJykpLnRoZW4oZnVuY3Rpb24gKHJlbW90ZUNhcnQpIHtcbiAgICAgICAgICAvLyBzZXQgc2luZ2xldG9uIGNhcnQgb2JqZWN0IHRvIHJlZmVyZW5jZSBzaG9waWZ5IGNhcnRcbiAgICAgICAgICBfdGhpczIuY2FydCA9IHJlbW90ZUNhcnQ7XG5cbiAgICAgICAgICAvLyBzZXQgbG9jYWxDYXJ0IChyZWR1eCBjb25uZWN0ZWQpIHRvIGtlZXAgdHJhY2sgb2Ygc3RhdGUgY2hhbmdlc1xuICAgICAgICAgIHZhciBsb2NhbENhcnQgPSB7XG4gICAgICAgICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgICAgICAgbGluZUl0ZW1zQ291bnQ6IHJlbW90ZUNhcnQubGluZUl0ZW1Db3VudCxcbiAgICAgICAgICAgIGxpbmVJdGVtczogcmVtb3RlQ2FydC5saW5lSXRlbXMsXG4gICAgICAgICAgICBzdWJ0b3RhbDogcmVtb3RlQ2FydC5zdWJ0b3RhbFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmVzb2x2ZShsb2NhbENhcnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBzaG9waWZ5QVBJO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBuZXcgc2hvcGlmeUFQSSgpO1xuXG4vKioqLyB9KSxcbi8qIDI1ICovLFxuLyogMjYgKi8sXG4vKiAyNyAqLyxcbi8qIDI4ICovLFxuLyogMjkgKi8sXG4vKiAzMCAqLyxcbi8qIDMxICovLFxuLyogMzIgKi8sXG4vKiAzMyAqLyxcbi8qIDM0ICovLFxuLyogMzUgKi8sXG4vKiAzNiAqLyxcbi8qIDM3ICovLFxuLyogMzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHJ1ZSkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHQhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9LmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuXG5cbi8qKiovIH0pLFxuLyogMzkgKi8sXG4vKiA0MCAqLyxcbi8qIDQxICovLFxuLyogNDIgKi8sXG4vKiA0MyAqLyxcbi8qIDQ0ICovLFxuLyogNDUgKi8sXG4vKiA0NiAqLyxcbi8qIDQ3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmFkZENvbGxlY3Rpb25zID0gZXhwb3J0cy5zdGFydEFkZENvbGxlY3Rpb25zID0gZXhwb3J0cy5zZXRBY3RpdmVDb2xsZWN0aW9uID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3Nob3BpZnlBUEkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblxudmFyIF9zaG9waWZ5QVBJMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Nob3BpZnlBUEkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgc2V0QWN0aXZlQ29sbGVjdGlvbiA9IGV4cG9ydHMuc2V0QWN0aXZlQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIHNldEFjdGl2ZUNvbGxlY3Rpb24oaWQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkge1xuICAgIHJldHVybiBfc2hvcGlmeUFQSTIuZGVmYXVsdC5jbGllbnQuZmV0Y2hDb2xsZWN0aW9uKGlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IGRhdGEgfHwge307XG4gICAgICB2YXIgcGFyc2VkQ29sbGVjdGlvbiA9IF9leHRlbmRzKHt9LCBjb2xsZWN0aW9uKTtcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9BQ1RJVkVfQ09MTEVDVElPTicsIHBhcnNlZENvbGxlY3Rpb246IHBhcnNlZENvbGxlY3Rpb24gfSk7XG4gICAgfSk7XG4gIH07XG59O1xuXG4vLyBBZGQgY29sbGVjdGlvbnMgdG8gc3RvcmVcbnZhciBzdGFydEFkZENvbGxlY3Rpb25zID0gZXhwb3J0cy5zdGFydEFkZENvbGxlY3Rpb25zID0gZnVuY3Rpb24gc3RhcnRBZGRDb2xsZWN0aW9ucygpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCkge1xuICAgIHJldHVybiBfc2hvcGlmeUFQSTIuZGVmYXVsdC5jbGllbnQuZmV0Y2hBbGxDb2xsZWN0aW9ucygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHZhciBjb2xsZWN0aW9ucyA9IGRhdGEgfHwge307XG4gICAgICB2YXIgcGFyc2VkQ29sbGVjdGlvbnMgPSBbXTtcblxuICAgICAgT2JqZWN0LmtleXMoY29sbGVjdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKGNvbGxlY3Rpb25JZCkge1xuICAgICAgICBwYXJzZWRDb2xsZWN0aW9ucy5wdXNoKF9leHRlbmRzKHtcbiAgICAgICAgICBrZXk6IGNvbGxlY3Rpb25JZFxuICAgICAgICB9LCBjb2xsZWN0aW9uc1tjb2xsZWN0aW9uSWRdKSk7XG4gICAgICB9KTtcblxuICAgICAgZGlzcGF0Y2goYWRkQ29sbGVjdGlvbnMocGFyc2VkQ29sbGVjdGlvbnMpKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbnZhciBhZGRDb2xsZWN0aW9ucyA9IGV4cG9ydHMuYWRkQ29sbGVjdGlvbnMgPSBmdW5jdGlvbiBhZGRDb2xsZWN0aW9ucyhjb2xsZWN0aW9ucykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdBRERfQ09MTEVDVElPTlMnLFxuICAgIGNvbGxlY3Rpb25zOiBjb2xsZWN0aW9uc1xuICB9O1xufTtcblxuLyoqKi8gfSksXG4vKiA0OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy51cGRhdGVBY3RpdmVQcm9kdWN0T3B0aW9ucyA9IGV4cG9ydHMuY2xlYXJBY3RpdmVQcm9kdWN0ID0gZXhwb3J0cy5zZXRBY3RpdmVQcm9kdWN0ID0gZXhwb3J0cy5wcmVsb2FkUHJvZHVjdEltYWdlcyA9IGV4cG9ydHMuYWRkUHJvZHVjdHMgPSBleHBvcnRzLnN0YXJ0QWRkUHJvZHVjdHMgPSB1bmRlZmluZWQ7XG5cbnZhciBfc2hvcGlmeUFQSSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX3Nob3BpZnlBUEkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2hvcGlmeUFQSSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vIEFkZCBwcm9kdWN0cyB0byBzdG9yZVxudmFyIHN0YXJ0QWRkUHJvZHVjdHMgPSBleHBvcnRzLnN0YXJ0QWRkUHJvZHVjdHMgPSBmdW5jdGlvbiBzdGFydEFkZFByb2R1Y3RzKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7XG4gICAgcmV0dXJuIF9zaG9waWZ5QVBJMi5kZWZhdWx0LmNsaWVudC5mZXRjaEFsbFByb2R1Y3RzKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgdmFyIHByb2R1Y3RzID0gZGF0YSB8fCB7fTtcbiAgICAgIHZhciBwYXJzZWRQcm9kdWN0cyA9IHByb2R1Y3RzLm1hcChmdW5jdGlvbiAocHJvZHVjdCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRQcm9kdWN0ID0gW107XG4gICAgICAgIHVwZGF0ZWRQcm9kdWN0ID0gcHJvZHVjdDtcbiAgICAgICAgdXBkYXRlZFByb2R1Y3Qua2V5ID0gaW5kZXg7XG4gICAgICAgIHJldHVybiB1cGRhdGVkUHJvZHVjdDtcbiAgICAgIH0pO1xuXG4gICAgICBkaXNwYXRjaChhZGRQcm9kdWN0cyhwYXJzZWRQcm9kdWN0cykpO1xuICAgICAgZGlzcGF0Y2gocHJlbG9hZFByb2R1Y3RJbWFnZXMoKSk7XG4gICAgfSk7XG4gIH07XG59O1xuXG52YXIgYWRkUHJvZHVjdHMgPSBleHBvcnRzLmFkZFByb2R1Y3RzID0gZnVuY3Rpb24gYWRkUHJvZHVjdHMocHJvZHVjdHMpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQUREX1BST0RVQ1RTJyxcbiAgICBwcm9kdWN0czogcHJvZHVjdHNcbiAgfTtcbn07XG5cbnZhciBwcmVsb2FkUHJvZHVjdEltYWdlcyA9IGV4cG9ydHMucHJlbG9hZFByb2R1Y3RJbWFnZXMgPSBmdW5jdGlvbiBwcmVsb2FkUHJvZHVjdEltYWdlcygpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCwgZ2V0U3RhdGUpIHtcbiAgICB2YXIgcHJvZHVjdHMgPSBnZXRTdGF0ZSgpLnByb2R1Y3RzLmFsbDtcbiAgICB2YXIgaW1hZ2VzID0gW107XG4gICAgcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChwcm9kdWN0LCBpbmRleCkge1xuICAgICAgaW1hZ2VzW2luZGV4XSA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1hZ2VzW2luZGV4XS5zcmMgPSBwcm9kdWN0LnNlbGVjdGVkVmFyaWFudC5pbWFnZVZhcmlhbnRzWzRdLnNyYztcbiAgICAgIHJldHVybiBpbWFnZXNbaW5kZXhdO1xuICAgIH0pO1xuICB9O1xufTtcblxuLy8gc2V0IGFjdGl2ZSBwcm9kdWN0XG52YXIgc2V0QWN0aXZlUHJvZHVjdCA9IGV4cG9ydHMuc2V0QWN0aXZlUHJvZHVjdCA9IGZ1bmN0aW9uIHNldEFjdGl2ZVByb2R1Y3Qob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdTRVRfQUNUSVZFX1BST0RVQ1QnLFxuICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgfTtcbn07XG5cbi8vIGNsZWFyIGFjdGl2ZSBwcm9kdWN0IGZyb20gcmVkdXhcbnZhciBjbGVhckFjdGl2ZVByb2R1Y3QgPSBleHBvcnRzLmNsZWFyQWN0aXZlUHJvZHVjdCA9IGZ1bmN0aW9uIGNsZWFyQWN0aXZlUHJvZHVjdCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQ0xFQVJfQUNUSVZFX1BST0RVQ1QnXG4gIH07XG59O1xuXG4vLyB1cGRhdGUgYWN0aXZlIHByb2R1Y3Qgb3B0aW9uXG52YXIgdXBkYXRlQWN0aXZlUHJvZHVjdE9wdGlvbnMgPSBleHBvcnRzLnVwZGF0ZUFjdGl2ZVByb2R1Y3RPcHRpb25zID0gZnVuY3Rpb24gdXBkYXRlQWN0aXZlUHJvZHVjdE9wdGlvbnMob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdVUERBVEVfQUNUSVZFX1BST0RVQ1RfT1BUSU9OUycsXG4gICAgb3B0aW9uczogb3B0aW9uc1xuICB9O1xufTtcblxuLyoqKi8gfSksXG4vKiA0OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jb25maWd1cmUgPSB1bmRlZmluZWQ7XG5cbnZhciBfcmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OCk7XG5cbnZhciByZWR1eCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9yZWR1eCk7XG5cbnZhciBfcmVkdXhUaHVuayA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblxudmFyIF9yZWR1eFRodW5rMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlZHV4VGh1bmspO1xuXG52YXIgX3JlZHVjZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG52YXIgY29uZmlndXJlID0gZXhwb3J0cy5jb25maWd1cmUgPSBmdW5jdGlvbiBjb25maWd1cmUoKSB7XG4gIHZhciBpbml0aWFsU3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gIHZhciByZWR1Y2VyID0gcmVkdXguY29tYmluZVJlZHVjZXJzKHtcbiAgICBwcm9kdWN0czogX3JlZHVjZXJzLnByb2R1Y3RzUmVkdWNlcixcbiAgICBjb2xsZWN0aW9uczogX3JlZHVjZXJzLmNvbGxlY3Rpb25zUmVkdWNlcixcbiAgICBjYXJ0OiBfcmVkdWNlcnMuY2FydFJlZHVjZXIsXG4gICAgbmF2OiBfcmVkdWNlcnMubmF2UmVkdWNlclxuICB9KTtcblxuICB2YXIgc3RvcmUgPSByZWR1eC5jcmVhdGVTdG9yZShyZWR1Y2VyLCBpbml0aWFsU3RhdGUsIHJlZHV4LmNvbXBvc2UocmVkdXguYXBwbHlNaWRkbGV3YXJlKF9yZWR1eFRodW5rMi5kZWZhdWx0KSwgd2luZG93LmRldlRvb2xzRXh0ZW5zaW9uID8gd2luZG93LmRldlRvb2xzRXh0ZW5zaW9uKCkgOiBmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmO1xuICB9KSk7XG5cbiAgcmV0dXJuIHN0b3JlO1xufTtcblxuLyoqKi8gfSksXG4vKiA1MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gTG9hZGVyO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIExvYWRlcigpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIFwiZGl2XCIsXG4gICAgeyBjbGFzc05hbWU6IFwibG9hZGVyXCIgfSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImlcIiwgeyBjbGFzc05hbWU6IFwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBmYS0zeCBmYS1md1wiIH0pXG4gICk7XG59XG5cbi8qKiovIH0pLFxuLyogNTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIEZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRm9ybWF0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGb3JtYXQpO1xuICB9XG5cbiAgLy8gZm9ybWF0IGFtb3VudCBhcyBjdXJyZW5jeVxuXG5cbiAgX2NyZWF0ZUNsYXNzKEZvcm1hdCwgW3tcbiAgICBrZXk6ICdhc01vbmV5JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYXNNb25leShhbW91bnQsIGN1cnJlbmN5LCB0aG91c2FuZFNlcGFyYXRvciwgZGVjaW1hbFNlcGFyYXRvciwgbG9jYWxlRGVjaW1hbFNlcGFyYXRvcikge1xuICAgICAgY3VycmVuY3kgPSBjdXJyZW5jeSB8fCAnJCc7XG4gICAgICB0aG91c2FuZFNlcGFyYXRvciA9IHRob3VzYW5kU2VwYXJhdG9yIHx8ICcsJztcbiAgICAgIGRlY2ltYWxTZXBhcmF0b3IgPSBkZWNpbWFsU2VwYXJhdG9yIHx8ICcuJztcbiAgICAgIGxvY2FsZURlY2ltYWxTZXBhcmF0b3IgPSBsb2NhbGVEZWNpbWFsU2VwYXJhdG9yIHx8ICcuJztcbiAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJyhcXFxcZCkoPz0oXFxcXGR7M30pK1xcXFwuKScsICdnJyk7XG5cbiAgICAgIHJldHVybiBjdXJyZW5jeSArIHBhcnNlRmxvYXQoYW1vdW50LCAxMCkudG9GaXhlZCgyKS5yZXBsYWNlKGxvY2FsZURlY2ltYWxTZXBhcmF0b3IsIGRlY2ltYWxTZXBhcmF0b3IpLnJlcGxhY2UocmVnZXgsICckMScgKyB0aG91c2FuZFNlcGFyYXRvcikudG9TdHJpbmcoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRm9ybWF0O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBuZXcgRm9ybWF0KCk7XG5cbi8qKiovIH0pLFxuLyogNTIgKi8sXG4vKiA1MyAqLyxcbi8qIDU0ICovLFxuLyogNTUgKi8sXG4vKiA1NiAqLyxcbi8qIDU3ICovLFxuLyogNTggKi8sXG4vKiA1OSAqLyxcbi8qIDYwICovLFxuLyogNjEgKi8sXG4vKiA2MiAqLyxcbi8qIDYzICovLFxuLyogNjQgKi8sXG4vKiA2NSAqLyxcbi8qIDY2ICovLFxuLyogNjcgKi8sXG4vKiA2OCAqLyxcbi8qIDY5ICovLFxuLyogNzAgKi8sXG4vKiA3MSAqLyxcbi8qIDcyICovLFxuLyogNzMgKi8sXG4vKiA3NCAqLyxcbi8qIDc1ICovLFxuLyogNzYgKi8sXG4vKiA3NyAqLyxcbi8qIDc4ICovLFxuLyogNzkgKi8sXG4vKiA4MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfdHJhY2tIZWxwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MCk7XG5cbnZhciBfb2JqZWN0QXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGhlbHBlcnMgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUocHJvcHMpIHtcbiAgICB2YXIgc2xpY2tMaXN0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMubGlzdCk7XG5cbiAgICB2YXIgc2xpZGVDb3VudCA9IF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5jb3VudChwcm9wcy5jaGlsZHJlbik7XG4gICAgdmFyIGxpc3RXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoc2xpY2tMaXN0KTtcbiAgICB2YXIgdHJhY2tXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMudHJhY2spKTtcbiAgICB2YXIgc2xpZGVXaWR0aDtcblxuICAgIGlmICghcHJvcHMudmVydGljYWwpIHtcbiAgICAgIHZhciBjZW50ZXJQYWRkaW5nQWRqID0gcHJvcHMuY2VudGVyTW9kZSAmJiBwYXJzZUludChwcm9wcy5jZW50ZXJQYWRkaW5nKSAqIDI7XG4gICAgICBzbGlkZVdpZHRoID0gKHRoaXMuZ2V0V2lkdGgoX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpKSAtIGNlbnRlclBhZGRpbmdBZGopIC8gcHJvcHMuc2xpZGVzVG9TaG93O1xuICAgIH0gZWxzZSB7XG4gICAgICBzbGlkZVdpZHRoID0gdGhpcy5nZXRXaWR0aChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykpO1xuICAgIH1cblxuICAgIHZhciBzbGlkZUhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KHNsaWNrTGlzdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbmRleD1cIjBcIl0nKSk7XG4gICAgdmFyIGxpc3RIZWlnaHQgPSBzbGlkZUhlaWdodCAqIHByb3BzLnNsaWRlc1RvU2hvdztcblxuICAgIHZhciBjdXJyZW50U2xpZGUgPSBwcm9wcy5ydGwgPyBzbGlkZUNvdW50IC0gMSAtIHByb3BzLmluaXRpYWxTbGlkZSA6IHByb3BzLmluaXRpYWxTbGlkZTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2xpZGVDb3VudDogc2xpZGVDb3VudCxcbiAgICAgIHNsaWRlV2lkdGg6IHNsaWRlV2lkdGgsXG4gICAgICBsaXN0V2lkdGg6IGxpc3RXaWR0aCxcbiAgICAgIHRyYWNrV2lkdGg6IHRyYWNrV2lkdGgsXG4gICAgICBjdXJyZW50U2xpZGU6IGN1cnJlbnRTbGlkZSxcbiAgICAgIHNsaWRlSGVpZ2h0OiBzbGlkZUhlaWdodCxcbiAgICAgIGxpc3RIZWlnaHQ6IGxpc3RIZWlnaHRcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIHZhciB0YXJnZXRMZWZ0ID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0xlZnQpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7XG4gICAgICAgIHNsaWRlSW5kZXg6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLFxuICAgICAgICB0cmFja1JlZjogdGhpcy50cmFja1xuICAgICAgfSwgcHJvcHMsIHRoaXMuc3RhdGUpKTtcbiAgICAgIC8vIGdldENTUyBmdW5jdGlvbiBuZWVkcyBwcmV2aW91c2x5IHNldCBzdGF0ZVxuICAgICAgdmFyIHRyYWNrU3R5bGUgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiB0YXJnZXRMZWZ0IH0sIHByb3BzLCB0aGlzLnN0YXRlKSk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoeyB0cmFja1N0eWxlOiB0cmFja1N0eWxlIH0pO1xuXG4gICAgICB0aGlzLmF1dG9QbGF5KCk7IC8vIG9uY2Ugd2UncmUgc2V0IHVwLCB0cmlnZ2VyIHRoZSBpbml0aWFsIGF1dG9wbGF5LlxuICAgIH0pO1xuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShwcm9wcykge1xuICAgIHZhciBzbGlja0xpc3QgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5saXN0KTtcbiAgICAvLyBUaGlzIG1ldGhvZCBoYXMgbW9zdGx5IHNhbWUgY29kZSBhcyBpbml0aWFsaXplIG1ldGhvZC5cbiAgICAvLyBSZWZhY3RvciBpdFxuICAgIHZhciBzbGlkZUNvdW50ID0gX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KHByb3BzLmNoaWxkcmVuKTtcbiAgICB2YXIgbGlzdFdpZHRoID0gdGhpcy5nZXRXaWR0aChzbGlja0xpc3QpO1xuICAgIHZhciB0cmFja1dpZHRoID0gdGhpcy5nZXRXaWR0aChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy50cmFjaykpO1xuICAgIHZhciBzbGlkZVdpZHRoO1xuXG4gICAgaWYgKCFwcm9wcy52ZXJ0aWNhbCkge1xuICAgICAgdmFyIGNlbnRlclBhZGRpbmdBZGogPSBwcm9wcy5jZW50ZXJNb2RlICYmIHBhcnNlSW50KHByb3BzLmNlbnRlclBhZGRpbmcpICogMjtcbiAgICAgIHNsaWRlV2lkdGggPSAodGhpcy5nZXRXaWR0aChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykpIC0gY2VudGVyUGFkZGluZ0FkaikgLyBwcm9wcy5zbGlkZXNUb1Nob3c7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlV2lkdGggPSB0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKSk7XG4gICAgfVxuXG4gICAgdmFyIHNsaWRlSGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoc2xpY2tMaXN0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWluZGV4PVwiMFwiXScpKTtcbiAgICB2YXIgbGlzdEhlaWdodCA9IHNsaWRlSGVpZ2h0ICogcHJvcHMuc2xpZGVzVG9TaG93O1xuXG4gICAgLy8gcGF1c2Ugc2xpZGVyIGlmIGF1dG9wbGF5IGlzIHNldCB0byBmYWxzZVxuICAgIGlmIChwcm9wcy5hdXRvcGxheSkge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF1dG9QbGF5KCk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzbGlkZUNvdW50OiBzbGlkZUNvdW50LFxuICAgICAgc2xpZGVXaWR0aDogc2xpZGVXaWR0aCxcbiAgICAgIGxpc3RXaWR0aDogbGlzdFdpZHRoLFxuICAgICAgdHJhY2tXaWR0aDogdHJhY2tXaWR0aCxcbiAgICAgIHNsaWRlSGVpZ2h0OiBzbGlkZUhlaWdodCxcbiAgICAgIGxpc3RIZWlnaHQ6IGxpc3RIZWlnaHRcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIHZhciB0YXJnZXRMZWZ0ID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0xlZnQpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7XG4gICAgICAgIHNsaWRlSW5kZXg6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLFxuICAgICAgICB0cmFja1JlZjogdGhpcy50cmFja1xuICAgICAgfSwgcHJvcHMsIHRoaXMuc3RhdGUpKTtcbiAgICAgIC8vIGdldENTUyBmdW5jdGlvbiBuZWVkcyBwcmV2aW91c2x5IHNldCBzdGF0ZVxuICAgICAgdmFyIHRyYWNrU3R5bGUgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiB0YXJnZXRMZWZ0IH0sIHByb3BzLCB0aGlzLnN0YXRlKSk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoeyB0cmFja1N0eWxlOiB0cmFja1N0eWxlIH0pO1xuICAgIH0pO1xuICB9LFxuICBnZXRXaWR0aDogZnVuY3Rpb24gZ2V0V2lkdGgoZWxlbSkge1xuICAgIHJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIHx8IGVsZW0ub2Zmc2V0V2lkdGggfHwgMDtcbiAgfSxcbiAgZ2V0SGVpZ2h0OiBmdW5jdGlvbiBnZXRIZWlnaHQoZWxlbSkge1xuICAgIHJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCB8fCBlbGVtLm9mZnNldEhlaWdodCB8fCAwO1xuICB9LFxuXG4gIGFkYXB0SGVpZ2h0OiBmdW5jdGlvbiBhZGFwdEhlaWdodCgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hZGFwdGl2ZUhlaWdodCkge1xuICAgICAgdmFyIHNlbGVjdG9yID0gJ1tkYXRhLWluZGV4PVwiJyArIHRoaXMuc3RhdGUuY3VycmVudFNsaWRlICsgJ1wiXSc7XG4gICAgICBpZiAodGhpcy5saXN0KSB7XG4gICAgICAgIHZhciBzbGlja0xpc3QgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5saXN0KTtcbiAgICAgICAgc2xpY2tMaXN0LnN0eWxlLmhlaWdodCA9IHNsaWNrTGlzdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgY2FuR29OZXh0OiBmdW5jdGlvbiBjYW5Hb05leHQob3B0cykge1xuICAgIHZhciBjYW5HbyA9IHRydWU7XG4gICAgaWYgKCFvcHRzLmluZmluaXRlKSB7XG4gICAgICBpZiAob3B0cy5jZW50ZXJNb2RlKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIGN1cnJlbnQgc2xpZGUgaXMgbGFzdCBzbGlkZVxuICAgICAgICBpZiAob3B0cy5jdXJyZW50U2xpZGUgPj0gb3B0cy5zbGlkZUNvdW50IC0gMSkge1xuICAgICAgICAgIGNhbkdvID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIGFsbCBzbGlkZXMgYXJlIHNob3duIGluIHNsaWRlclxuICAgICAgICBpZiAob3B0cy5zbGlkZUNvdW50IDw9IG9wdHMuc2xpZGVzVG9TaG93IHx8IG9wdHMuY3VycmVudFNsaWRlID49IG9wdHMuc2xpZGVDb3VudCAtIG9wdHMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgY2FuR28gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FuR287XG4gIH0sXG4gIHNsaWRlSGFuZGxlcjogZnVuY3Rpb24gc2xpZGVIYW5kbGVyKGluZGV4KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIC8vIEZ1bmN0aW9uYWxpdHkgb2YgYW5pbWF0ZVNsaWRlIGFuZCBwb3N0U2xpZGUgaXMgbWVyZ2VkIGludG8gdGhpcyBmdW5jdGlvblxuICAgIC8vIGNvbnNvbGUubG9nKCdzbGlkZUhhbmRsZXInLCBpbmRleCk7XG4gICAgdmFyIHRhcmdldFNsaWRlLCBjdXJyZW50U2xpZGU7XG4gICAgdmFyIHRhcmdldExlZnQsIGN1cnJlbnRMZWZ0O1xuICAgIHZhciBjYWxsYmFjaztcblxuICAgIGlmICh0aGlzLnByb3BzLndhaXRGb3JBbmltYXRlICYmIHRoaXMuc3RhdGUuYW5pbWF0aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuZmFkZSkge1xuICAgICAgY3VycmVudFNsaWRlID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGU7XG5cbiAgICAgIC8vIERvbid0IGNoYW5nZSBzbGlkZSBpZiBpdCdzIG5vdCBpbmZpdGUgYW5kIGN1cnJlbnQgc2xpZGUgaXMgdGhlIGZpcnN0IG9yIGxhc3Qgc2xpZGUuXG4gICAgICBpZiAodGhpcy5wcm9wcy5pbmZpbml0ZSA9PT0gZmFsc2UgJiYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLnN0YXRlLnNsaWRlQ291bnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gIFNoaWZ0aW5nIHRhcmdldFNsaWRlIGJhY2sgaW50byB0aGUgcmFuZ2VcbiAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBpbmRleCArIHRoaXMuc3RhdGUuc2xpZGVDb3VudDtcbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPj0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50KSB7XG4gICAgICAgIHRhcmdldFNsaWRlID0gaW5kZXggLSB0aGlzLnN0YXRlLnNsaWRlQ291bnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRTbGlkZSA9IGluZGV4O1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5sYXp5TG9hZCAmJiB0aGlzLnN0YXRlLmxhenlMb2FkZWRMaXN0LmluZGV4T2YodGFyZ2V0U2xpZGUpIDwgMCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBsYXp5TG9hZGVkTGlzdDogdGhpcy5zdGF0ZS5sYXp5TG9hZGVkTGlzdC5jb25jYXQodGFyZ2V0U2xpZGUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgYW5pbWF0aW5nOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKF90aGlzLnByb3BzLmFmdGVyQ2hhbmdlKSB7XG4gICAgICAgICAgX3RoaXMucHJvcHMuYWZ0ZXJDaGFuZ2UodGFyZ2V0U2xpZGUpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBfdGhpcy5hbmltYXRpb25FbmRDYWxsYmFjaztcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhbmltYXRpbmc6IHRydWUsXG4gICAgICAgIGN1cnJlbnRTbGlkZTogdGFyZ2V0U2xpZGVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb25FbmRDYWxsYmFjayA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIHRoaXMucHJvcHMuc3BlZWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmJlZm9yZUNoYW5nZSkge1xuICAgICAgICB0aGlzLnByb3BzLmJlZm9yZUNoYW5nZSh0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSwgdGFyZ2V0U2xpZGUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmF1dG9QbGF5KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGFyZ2V0U2xpZGUgPSBpbmRleDtcbiAgICBpZiAodGFyZ2V0U2xpZGUgPCAwKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY3VycmVudFNsaWRlID0gMDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5zbGlkZUNvdW50ICUgdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCAhPT0gMCkge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSB0aGlzLnN0YXRlLnNsaWRlQ291bnQgLSB0aGlzLnN0YXRlLnNsaWRlQ291bnQgJSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFNsaWRlID0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50ICsgdGFyZ2V0U2xpZGU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0YXJnZXRTbGlkZSA+PSB0aGlzLnN0YXRlLnNsaWRlQ291bnQpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSB0aGlzLnN0YXRlLnNsaWRlQ291bnQgLSB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5zbGlkZUNvdW50ICUgdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCAhPT0gMCkge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFNsaWRlID0gdGFyZ2V0U2xpZGUgLSB0aGlzLnN0YXRlLnNsaWRlQ291bnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRTbGlkZSA9IHRhcmdldFNsaWRlO1xuICAgIH1cblxuICAgIHRhcmdldExlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgIHNsaWRlSW5kZXg6IHRhcmdldFNsaWRlLFxuICAgICAgdHJhY2tSZWY6IHRoaXMudHJhY2tcbiAgICB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSk7XG5cbiAgICBjdXJyZW50TGVmdCA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tMZWZ0KSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgc2xpZGVJbmRleDogY3VycmVudFNsaWRlLFxuICAgICAgdHJhY2tSZWY6IHRoaXMudHJhY2tcbiAgICB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHRhcmdldExlZnQgPSBjdXJyZW50TGVmdDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5iZWZvcmVDaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMuYmVmb3JlQ2hhbmdlKHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLCBjdXJyZW50U2xpZGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmxhenlMb2FkKSB7XG4gICAgICB2YXIgbG9hZGVkID0gdHJ1ZTtcbiAgICAgIHZhciBzbGlkZXNUb0xvYWQgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSB0YXJnZXRTbGlkZTsgaSA8IHRhcmdldFNsaWRlICsgdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3c7IGkrKykge1xuICAgICAgICBsb2FkZWQgPSBsb2FkZWQgJiYgdGhpcy5zdGF0ZS5sYXp5TG9hZGVkTGlzdC5pbmRleE9mKGkpID49IDA7XG4gICAgICAgIGlmICghbG9hZGVkKSB7XG4gICAgICAgICAgc2xpZGVzVG9Mb2FkLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghbG9hZGVkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGxhenlMb2FkZWRMaXN0OiB0aGlzLnN0YXRlLmxhenlMb2FkZWRMaXN0LmNvbmNhdChzbGlkZXNUb0xvYWQpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNsaWRlIFRyYW5zaXRpb24gaGFwcGVucyBoZXJlLlxuICAgIC8vIGFuaW1hdGVkIHRyYW5zaXRpb24gaGFwcGVucyB0byB0YXJnZXQgU2xpZGUgYW5kXG4gICAgLy8gbm9uIC0gYW5pbWF0ZWQgdHJhbnNpdGlvbiBoYXBwZW5zIHRvIGN1cnJlbnQgU2xpZGVcbiAgICAvLyBJZiBDU1MgdHJhbnNpdGlvbnMgYXJlIGZhbHNlLCBkaXJlY3RseSBnbyB0aGUgY3VycmVudCBzbGlkZS5cblxuICAgIGlmICh0aGlzLnByb3BzLnVzZUNTUyA9PT0gZmFsc2UpIHtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGN1cnJlbnRTbGlkZTogY3VycmVudFNsaWRlLFxuICAgICAgICB0cmFja1N0eWxlOiAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiBjdXJyZW50TGVmdCB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSlcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWZ0ZXJDaGFuZ2UpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmFmdGVyQ2hhbmdlKGN1cnJlbnRTbGlkZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgIHZhciBuZXh0U3RhdGVDaGFuZ2VzID0ge1xuICAgICAgICBhbmltYXRpbmc6IGZhbHNlLFxuICAgICAgICBjdXJyZW50U2xpZGU6IGN1cnJlbnRTbGlkZSxcbiAgICAgICAgdHJhY2tTdHlsZTogKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0NTUykoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgbGVmdDogY3VycmVudExlZnQgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpLFxuICAgICAgICBzd2lwZUxlZnQ6IG51bGxcbiAgICAgIH07XG5cbiAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKG5leHRTdGF0ZUNoYW5nZXMpO1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMuYWZ0ZXJDaGFuZ2UpIHtcbiAgICAgICAgICBfdGhpcy5wcm9wcy5hZnRlckNoYW5nZShjdXJyZW50U2xpZGUpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBfdGhpcy5hbmltYXRpb25FbmRDYWxsYmFjaztcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhbmltYXRpbmc6IHRydWUsXG4gICAgICAgIGN1cnJlbnRTbGlkZTogY3VycmVudFNsaWRlLFxuICAgICAgICB0cmFja1N0eWxlOiAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQW5pbWF0ZUNTUykoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgbGVmdDogdGFyZ2V0TGVmdCB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSlcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb25FbmRDYWxsYmFjayA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIHRoaXMucHJvcHMuc3BlZWQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5hdXRvUGxheSgpO1xuICB9LFxuICBzd2lwZURpcmVjdGlvbjogZnVuY3Rpb24gc3dpcGVEaXJlY3Rpb24odG91Y2hPYmplY3QpIHtcbiAgICB2YXIgeERpc3QsIHlEaXN0LCByLCBzd2lwZUFuZ2xlO1xuXG4gICAgeERpc3QgPSB0b3VjaE9iamVjdC5zdGFydFggLSB0b3VjaE9iamVjdC5jdXJYO1xuICAgIHlEaXN0ID0gdG91Y2hPYmplY3Quc3RhcnRZIC0gdG91Y2hPYmplY3QuY3VyWTtcbiAgICByID0gTWF0aC5hdGFuMih5RGlzdCwgeERpc3QpO1xuXG4gICAgc3dpcGVBbmdsZSA9IE1hdGgucm91bmQociAqIDE4MCAvIE1hdGguUEkpO1xuICAgIGlmIChzd2lwZUFuZ2xlIDwgMCkge1xuICAgICAgc3dpcGVBbmdsZSA9IDM2MCAtIE1hdGguYWJzKHN3aXBlQW5nbGUpO1xuICAgIH1cbiAgICBpZiAoc3dpcGVBbmdsZSA8PSA0NSAmJiBzd2lwZUFuZ2xlID49IDAgfHwgc3dpcGVBbmdsZSA8PSAzNjAgJiYgc3dpcGVBbmdsZSA+PSAzMTUpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnJ0bCA9PT0gZmFsc2UgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgIH1cbiAgICBpZiAoc3dpcGVBbmdsZSA+PSAxMzUgJiYgc3dpcGVBbmdsZSA8PSAyMjUpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnJ0bCA9PT0gZmFsc2UgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcgPT09IHRydWUpIHtcbiAgICAgIGlmIChzd2lwZUFuZ2xlID49IDM1ICYmIHN3aXBlQW5nbGUgPD0gMTM1KSB7XG4gICAgICAgIHJldHVybiAnZG93bic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ3VwJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJ3ZlcnRpY2FsJztcbiAgfSxcbiAgcGxheTogZnVuY3Rpb24gcGxheSgpIHtcbiAgICB2YXIgbmV4dEluZGV4O1xuXG4gICAgaWYgKCF0aGlzLnN0YXRlLm1vdW50ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5ydGwpIHtcbiAgICAgIG5leHRJbmRleCA9IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlIC0gdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuY2FuR29OZXh0KF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSkpIHtcbiAgICAgICAgbmV4dEluZGV4ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgKyB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2xpZGVIYW5kbGVyKG5leHRJbmRleCk7XG4gIH0sXG4gIGF1dG9QbGF5OiBmdW5jdGlvbiBhdXRvUGxheSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5hdXRvUGxheVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zdGF0ZS5hdXRvUGxheVRpbWVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b3BsYXkpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhdXRvUGxheVRpbWVyOiBzZXRUaW1lb3V0KHRoaXMucGxheSwgdGhpcy5wcm9wcy5hdXRvcGxheVNwZWVkKVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBwYXVzZTogZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXV0b1BsYXlUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3RhdGUuYXV0b1BsYXlUaW1lcik7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgYXV0b1BsYXlUaW1lcjogbnVsbFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBoZWxwZXJzO1xuXG4vKioqLyB9KSxcbi8qIDgxICovLFxuLyogODIgKi8sXG4vKiA4MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSxcbiAgICBjb25uZWN0ID0gX3JlcXVpcmUuY29ubmVjdDtcblxudmFyIGFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblxudmFyIENvbGxlY3Rpb24gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQ29sbGVjdGlvbiwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ29sbGVjdGlvbigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sbGVjdGlvbik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvbGxlY3Rpb24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xsZWN0aW9uKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ29sbGVjdGlvbiwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2ggPSB0aGlzLnByb3BzLmRpc3BhdGNoO1xuXG4gICAgICBkaXNwYXRjaChhY3Rpb25zLnNldEFjdGl2ZUNvbGxlY3Rpb24odGhpcy5wcm9wcy5wYXJhbXMuY29sbGVjdGlvbklkKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGNvbGxlY3Rpb24gPSB2b2lkIDA7XG4gICAgICBjb2xsZWN0aW9uID0gdGhpcy5wcm9wcy5jb2xsZWN0aW9uO1xuICAgICAgaWYgKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdmFyIGRpc3BhdGNoID0gdGhpcy5wcm9wcy5kaXNwYXRjaDtcbiAgICAgICAgdmFyIF9jb2xsZWN0aW9uID0gY29sbGVjdGlvbixcbiAgICAgICAgICAgIGNvbGxlY3Rpb25faWQgPSBfY29sbGVjdGlvbi5jb2xsZWN0aW9uX2lkLFxuICAgICAgICAgICAgdGl0bGUgPSBfY29sbGVjdGlvbi50aXRsZTtcblxuXG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbGxlY3Rpb24taW5kZXgnIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd0ZXh0LWNlbnRlcicgfSxcbiAgICAgICAgICAgIHRpdGxlXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgJ0xvYWRpbmcgY29sbGVjdGlvbi4uLidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ29sbGVjdGlvbjtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNvbm5lY3QoZnVuY3Rpb24gKHN0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgY29sbGVjdGlvbjogc3RhdGUuY29sbGVjdGlvbnMuYWN0aXZlXG4gIH07XG59KShDb2xsZWN0aW9uKTtcblxuLyoqKi8gfSksXG4vKiA4NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSb3V0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIF9mb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblxudmFyIF9mb3JtYXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm9ybWF0KTtcblxudmFyIF9yZWFjdE1vZGFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyODMpO1xuXG52YXIgX3JlYWN0TW9kYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RNb2RhbCk7XG5cbnZhciBfc2hvcGlmeUFQSSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX3Nob3BpZnlBUEkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2hvcGlmeUFQSSk7XG5cbnZhciBfTG9hZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cbnZhciBfTG9hZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvYWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSxcbiAgICBjb25uZWN0ID0gX3JlcXVpcmUuY29ubmVjdDtcblxudmFyIHByb2R1Y3RBY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG52YXIgY2FydEFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIFByb2R1Y3QgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUHJvZHVjdCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUHJvZHVjdCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZHVjdCk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvZHVjdC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb2R1Y3QpKS5jYWxsKHRoaXMpKTtcblxuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgbW9kYWxJc09wZW46IGZhbHNlXG4gICAgfTtcblxuICAgIF90aGlzLm9wZW5Nb2RhbCA9IF90aGlzLm9wZW5Nb2RhbC5iaW5kKF90aGlzKTtcbiAgICBfdGhpcy5jbG9zZU1vZGFsID0gX3RoaXMuY2xvc2VNb2RhbC5iaW5kKF90aGlzKTtcblxuICAgIHZhciBkaXNwYXRjaCA9IHZvaWQgMDtcbiAgICB2YXIgcHJvZHVjdCA9IHZvaWQgMDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvZHVjdCwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5kaXNwYXRjaCA9IHRoaXMucHJvcHMuZGlzcGF0Y2g7XG5cbiAgICAgIF9zaG9waWZ5QVBJMi5kZWZhdWx0LmNsaWVudC5mZXRjaFByb2R1Y3QodGhpcy5wcm9wcy5wYXJhbXMucHJvZHVjdElkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBwcm9kdWN0ID0gZGF0YSB8fCB7fTtcbiAgICAgICAgX3RoaXMyLnByb2R1Y3QgPSBwcm9kdWN0O1xuICAgICAgICBfdGhpczIuZGlzcGF0Y2gocHJvZHVjdEFjdGlvbnMuc2V0QWN0aXZlUHJvZHVjdChwcm9kdWN0Lm9wdGlvbnMpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoKHByb2R1Y3RBY3Rpb25zLmNsZWFyQWN0aXZlUHJvZHVjdCgpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbG9zZU1vZGFsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBtb2RhbElzT3BlbjogZmFsc2UgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb3Blbk1vZGFsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb3Blbk1vZGFsKCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1vZGFsSXNPcGVuOiB0cnVlIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2hhbmRsZU9wdGlvbkNoYW5nZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZU9wdGlvbkNoYW5nZShvcHRpb25OYW1lLCB2YWx1ZSkge1xuICAgICAgLy8gdXBkYXRlIHByb2R1Y3Qgb3B0aW9ucyBpbiB0aGUgU2hvcGlmeSBzaW5nbGV0b25cbiAgICAgIHRoaXMucHJvZHVjdC5vcHRpb25zLmZpbHRlcihmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHJldHVybiBvcHRpb24ubmFtZSA9PT0gb3B0aW9uTmFtZTtcbiAgICAgIH0pWzBdLnNlbGVjdGVkID0gdmFsdWU7XG5cbiAgICAgIC8vIHVwZGF0ZSBwcm9kdWN0IG9wdGlvbnNcbiAgICAgIHRoaXMuZGlzcGF0Y2gocHJvZHVjdEFjdGlvbnMudXBkYXRlQWN0aXZlUHJvZHVjdE9wdGlvbnModGhpcy5wcm9kdWN0Lm9wdGlvbnMpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIGFjdGl2ZVByb2R1Y3QgPSB2b2lkIDA7XG4gICAgICBhY3RpdmVQcm9kdWN0ID0gdGhpcy5wcm9kdWN0O1xuICAgICAgaWYgKGFjdGl2ZVByb2R1Y3QpIHtcbiAgICAgICAgdmFyIGRpc3BhdGNoID0gdGhpcy5wcm9wcy5kaXNwYXRjaDtcbiAgICAgICAgdmFyIF9hY3RpdmVQcm9kdWN0JGF0dHJzID0gYWN0aXZlUHJvZHVjdC5hdHRycyxcbiAgICAgICAgICAgIHByb2R1Y3RfaWQgPSBfYWN0aXZlUHJvZHVjdCRhdHRycy5wcm9kdWN0X2lkLFxuICAgICAgICAgICAgdGl0bGUgPSBfYWN0aXZlUHJvZHVjdCRhdHRycy50aXRsZSxcbiAgICAgICAgICAgIGltYWdlcyA9IF9hY3RpdmVQcm9kdWN0JGF0dHJzLmltYWdlcyxcbiAgICAgICAgICAgIG9wdGlvbnMgPSBfYWN0aXZlUHJvZHVjdCRhdHRycy5vcHRpb25zO1xuICAgICAgICB2YXIgX2FjdGl2ZVByb2R1Y3QgPSBhY3RpdmVQcm9kdWN0LFxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBfYWN0aXZlUHJvZHVjdC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHNlbGVjdGVkVmFyaWFudCA9IF9hY3RpdmVQcm9kdWN0LnNlbGVjdGVkVmFyaWFudCxcbiAgICAgICAgICAgIHNlbGVjdGVkVmFyaWFudEltYWdlID0gX2FjdGl2ZVByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50SW1hZ2U7XG5cblxuICAgICAgICB2YXIgcmVuZGVyT3B0aW9ucyA9IGZ1bmN0aW9uIHJlbmRlck9wdGlvbnMoKSB7XG4gICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3Qtb3B0aW9ucycgfSxcbiAgICAgICAgICAgIGFjdGl2ZVByb2R1Y3Qub3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbi5uYW1lICE9IFwiU2l6ZVwiICYmIG9wdGlvbi5uYW1lICE9IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgeyBrZXk6IGluZGV4LCBuYW1lOiBvcHRpb24ubmFtZSwgdmFsdWU6IG9wdGlvbi5zZWxlY3RlZCwgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmhhbmRsZU9wdGlvbkNoYW5nZShvcHRpb24ubmFtZSwgZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgJ29wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGluZGV4LCB2YWx1ZTogdmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJlbmRlclNpemVzID0gZnVuY3Rpb24gcmVuZGVyU2l6ZXMoKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdGl2ZVByb2R1Y3Qub3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbiwgb3B0aW9uc0luZGV4KSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uLm5hbWUgPT0gXCJTaXplXCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICd1bCcsXG4gICAgICAgICAgICAgICAgeyBrZXk6IG9wdGlvbnNJbmRleCwgY2xhc3NOYW1lOiAncHJvZHVjdC1zaXplcycgfSxcbiAgICAgICAgICAgICAgICBvcHRpb24udmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3Byb2R1Y3Qtc2l6ZSAnICsgKG9wdGlvbi5zZWxlY3RlZCA9PT0gdmFsdWUgPyAnc2VsZWN0ZWQnIDogJycpLFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuaGFuZGxlT3B0aW9uQ2hhbmdlKG9wdGlvbi5uYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdhY3RpdmVQcm9kdWN0OiAnLCBhY3RpdmVQcm9kdWN0KTtcblxuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjb250YWluZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NtYWxsLTEyIG1lZGl1bS04IGNvbHVtbicgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgeyBvbkNsaWNrOiBfcmVhY3RSb3V0ZXIuYnJvd3Nlckhpc3RvcnkuZ29CYWNrLCBjbGFzc05hbWU6ICdidXR0b24gaG9sbG93JyB9LFxuICAgICAgICAgICAgICAgICdcXHUyMDM5IEJhY2sgdG8gcHJvZHVjdHMnXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RleHQtY2VudGVyJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHNyYzogc2VsZWN0ZWRWYXJpYW50SW1hZ2Uuc3JjLCBhbHQ6ICcnIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc21hbGwtMTIgbWVkaXVtLTQgY29sdW1uJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC10aXRsZScgfSxcbiAgICAgICAgICAgICAgICB0aXRsZVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3QtaW5mbycgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdoNScsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3QtaW5mb19faGVhZGxpbmUnIH0sXG4gICAgICAgICAgICAgICAgICAnQXJ0aXN0J1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgJ0pXSVNIODgnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdoNScsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3QtaW5mb19faGVhZGxpbmUnIH0sXG4gICAgICAgICAgICAgICAgICAnRGVzY3JpcHRpb24nXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IGRlc2NyaXB0aW9uIH0gfSksXG4gICAgICAgICAgICAgICAgcmVuZGVyT3B0aW9ucygpLFxuICAgICAgICAgICAgICAgIHJlbmRlclNpemVzKCksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1wcmljZScgfSxcbiAgICAgICAgICAgICAgICAgIF9mb3JtYXQyLmRlZmF1bHQuYXNNb25leShzZWxlY3RlZFZhcmlhbnQucHJpY2UpXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0LWNoYXJpdHknIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgcGxhY2Vob2xkZXI6ICdDaG9vc2UgQ2hhcml0eScgfSksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ3N1Ym1pdCcsIGNsYXNzTmFtZTogJ3Byb2R1Y3QtY2hhcml0eV9fYnV0dG9uJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaScsIHsgY2xhc3NOYW1lOiAnZmEgZmEtY2FyZXQtcmlnaHQnIH0pXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3QtY2hhcml0eV9fbW9yZS1pbmZvJywgb25DbGljazogdGhpcy5vcGVuTW9kYWwgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLWluZm8tY2lyY2xlJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgJyAnLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnIycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAnbW9yZSBpbmZvJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdE1vZGFsMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiB0aGlzLnN0YXRlLm1vZGFsSXNPcGVuLFxuICAgICAgICAgICAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlOiB0aGlzLmNsb3NlTW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgY29udGVudExhYmVsOiAnbW9yZSBpbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgICBjbG9zZVRpbWVvdXRNUzogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1JlYWN0TW9kYWxfX0NvbnRlbnQnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBQZWxsZW50ZXNxdWUgZWdlc3RhcywgbmliaCBzZWQgdHJpc3RpcXVlIG9ybmFyZSwgbnVuYyBkdWkgc29sbGljaXR1ZGluIGVsaXQsIGlkIGNvbnNlY3RldHVyIG9kaW8gbGVjdHVzIGV1IG51bGxhLiBQcm9pbiBkYXBpYnVzIGNvbnZhbGxpcyB1cm5hIHNpdCBhbWV0IGRpY3R1bS4gVXQgcG9ydHRpdG9yIGxpZ3VsYSBhdCBwdXJ1cyBhdWN0b3IgbW9sZXN0aWUuIEV0aWFtIHZlbGl0IG5pYmgsIHBvcnR0aXRvciBhdCBpcHN1bSBtYXR0aXMsIGNvbnNlY3RldHVyIGVnZXN0YXMgYXJjdS4gRG9uZWMgcGVsbGVudGVzcXVlIGF1Z3VlIHNpdCBhbWV0IGVsZW1lbnR1bSBmYWNpbGlzaXMuIEFlbmVhbiBzZW1wZXIgbWFsZXN1YWRhIGxpZ3VsYSBmYXVjaWJ1cyBzb2xsaWNpdHVkaW4uIEN1cmFiaXR1ciB1dCBsb3JlbSBhYyBlcmF0IHBvcnRhIGxhY2luaWEgcHVsdmluYXIgZXQgcmlzdXMuJ1xuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAnU2VkIGF0IG51bGxhIGRvbG9yLiBVdCBxdWlzIHF1YW0gZmluaWJ1cywgZWZmaWNpdHVyIG1pIHNlZCwgc29sbGljaXR1ZGluIHVybmEuIE51bmMgdmVsIHRvcnRvciBjb21tb2RvLCBtb2xsaXMgZXN0IGV1LCBibGFuZGl0IG1hc3NhLiBWaXZhbXVzIHNlZCBtaSB2aXRhZSBzZW0gY29tbW9kbyBjb25zZWN0ZXR1ciBldSBpbiBzZW0uIERvbmVjIHV0IGZhY2lsaXNpcyBvZGlvLiBOdWxsYW0gaWQgZWxlbWVudHVtIGVyb3MsIG5vbiB0ZW1wdXMgdG9ydG9yLiBOdWxsYW0gaW4gbWF0dGlzIGZlbGlzLiBQcmFlc2VudCBiaWJlbmR1bSBibGFuZGl0IGFudGUsIGV0IGVsZW1lbnR1bSBtZXR1cyBjb25zZWN0ZXR1ciB2aXRhZS4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2xvc2UtbW9kYWwtaWNvbicsIG9uQ2xpY2s6IHRoaXMuY2xvc2VNb2RhbCB9LFxuICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS10aW1lcycgfSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChjYXJ0QWN0aW9ucy5zdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0oYWN0aXZlUHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQsIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9uIGxhcmdlIGFkZC10by1jYXJ0JyB9LFxuICAgICAgICAgICAgICAgICAgJ0FkZCBUbyBDYXJ0J1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgc3JjOiAnL2ltYWdlcy9jcmVkaXQtY2FyZHMucG5nJywgYWx0OiAnQWNjZXB0ZWQgY3JlZGl0IGNhcmRzJyB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Mb2FkZXIyLmRlZmF1bHQsIG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm9kdWN0O1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBhY3RpdmVQcm9kdWN0OiBzdGF0ZS5wcm9kdWN0cy5hY3RpdmVcbiAgfTtcbn0pKFByb2R1Y3QpO1xuXG4vKioqLyB9KSxcbi8qIDg1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9kdWN0SXRlbSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhQcm9kdWN0SXRlbSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUHJvZHVjdEl0ZW0oKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2R1Y3RJdGVtKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvZHVjdEl0ZW0uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm9kdWN0SXRlbSkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb2R1Y3RJdGVtLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHRpdGxlID0gX3Byb3BzLnRpdGxlLFxuICAgICAgICAgIGlkID0gX3Byb3BzLmlkLFxuICAgICAgICAgIGltYWdlID0gX3Byb3BzLmltYWdlO1xuXG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1pdGVtJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3QtaXRlbS1pbm5lcicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgeyB0bzogJy9wcm9kdWN0LycgKyBpZCB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1pdGVtLWltYWdlJywgc3R5bGU6IHsgYmFja2dyb3VuZEltYWdlOiAndXJsKCcgKyBpbWFnZSArICcpJyB9IH0pXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaHInLCBudWxsKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdoNicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3QtaXRlbS10aXRsZScgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9wcm9kdWN0LycgKyBpZCB9LFxuICAgICAgICAgICAgICB0aXRsZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYXV0aG9yJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnYXV0aG9yX19waG90bycsIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogJ3VybCgnICsgaW1hZ2UgKyAnKScgfSB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhdXRob3JfX2luZm8nIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICAgIHsgdG86ICcvYXV0aG9yLycgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhdXRob3JfX25hbWUnIH0sXG4gICAgICAgICAgICAgICAgICAnSmFtZXM4OCdcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2F1dGhvcl9fbG9jYXRpb24nIH0sXG4gICAgICAgICAgICAgICAgICAnQ2FudG9uIE9oaW8nXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm9kdWN0SXRlbTtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvZHVjdEl0ZW07XG5cbi8qKiovIH0pLFxuLyogODYgKi8sXG4vKiA4NyAqLyxcbi8qIDg4ICovLFxuLyogODkgKi8sXG4vKiA5MCAqLyxcbi8qIDkxICovLFxuLyogOTIgKi8sXG4vKiA5MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgY2FtZWwyaHlwaGVuID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzcpO1xuXG52YXIgaXNEaW1lbnNpb24gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgcmUgPSAvW2hlaWdodHx3aWR0aF0kLztcbiAgcmV0dXJuIHJlLnRlc3QoZmVhdHVyZSk7XG59O1xuXG52YXIgb2JqMm1xID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIgbXEgPSAnJztcbiAgdmFyIGZlYXR1cmVzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSwgaW5kZXgpIHtcbiAgICB2YXIgdmFsdWUgPSBvYmpbZmVhdHVyZV07XG4gICAgZmVhdHVyZSA9IGNhbWVsMmh5cGhlbihmZWF0dXJlKTtcbiAgICAvLyBBZGQgcHggdG8gZGltZW5zaW9uIGZlYXR1cmVzXG4gICAgaWYgKGlzRGltZW5zaW9uKGZlYXR1cmUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUgKyAncHgnO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IHRydWUpIHtcbiAgICAgIG1xICs9IGZlYXR1cmU7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIG1xICs9ICdub3QgJyArIGZlYXR1cmU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1xICs9ICcoJyArIGZlYXR1cmUgKyAnOiAnICsgdmFsdWUgKyAnKSc7XG4gICAgfVxuICAgIGlmIChpbmRleCA8IGZlYXR1cmVzLmxlbmd0aC0xKSB7XG4gICAgICBtcSArPSAnIGFuZCAnXG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG1xO1xufTtcblxudmFyIGpzb24ybXEgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgdmFyIG1xID0gJyc7XG4gIGlmICh0eXBlb2YgcXVlcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG4gIC8vIEhhbmRsaW5nIGFycmF5IG9mIG1lZGlhIHF1ZXJpZXNcbiAgaWYgKHF1ZXJ5IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBxdWVyeS5mb3JFYWNoKGZ1bmN0aW9uIChxLCBpbmRleCkge1xuICAgICAgbXEgKz0gb2JqMm1xKHEpO1xuICAgICAgaWYgKGluZGV4IDwgcXVlcnkubGVuZ3RoLTEpIHtcbiAgICAgICAgbXEgKz0gJywgJ1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtcTtcbiAgfVxuICAvLyBIYW5kbGluZyBzaW5nbGUgbWVkaWEgcXVlcnlcbiAgcmV0dXJuIG9iajJtcShxdWVyeSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGpzb24ybXE7XG5cbi8qKiovIH0pLFxuLyogOTQgKi8sXG4vKiA5NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqXG4gKiBBIGZhc3RlciBhbHRlcm5hdGl2ZSB0byBgRnVuY3Rpb24jYXBwbHlgLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgYGZ1bmNgXG4gKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBhcmd1bWVudHMgb2YgYGFyZ3NgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBmdW5jYC5cbiAqL1xuZnVuY3Rpb24gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncykge1xuICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdKTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICB9XG4gIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB1bmFyeSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KSxcbiAgICBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqIERldGVjdCBpZiBwcm9wZXJ0aWVzIHNoYWRvd2luZyB0aG9zZSBvbiBgT2JqZWN0LnByb3RvdHlwZWAgYXJlIG5vbi1lbnVtZXJhYmxlLiAqL1xudmFyIG5vbkVudW1TaGFkb3dzID0gIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoeyAndmFsdWVPZic6IDEgfSwgJ3ZhbHVlT2YnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIHRoZSBhcnJheS1saWtlIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtib29sZWFufSBpbmhlcml0ZWQgU3BlY2lmeSByZXR1cm5pbmcgaW5oZXJpdGVkIHByb3BlcnR5IG5hbWVzLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYXJyYXlMaWtlS2V5cyh2YWx1ZSwgaW5oZXJpdGVkKSB7XG4gIC8vIFNhZmFyaSA4LjEgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG4gIC8vIFNhZmFyaSA5IG1ha2VzIGBhcmd1bWVudHMubGVuZ3RoYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICB2YXIgcmVzdWx0ID0gKGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSlcbiAgICA/IGJhc2VUaW1lcyh2YWx1ZS5sZW5ndGgsIFN0cmluZylcbiAgICA6IFtdO1xuXG4gIHZhciBsZW5ndGggPSByZXN1bHQubGVuZ3RoLFxuICAgICAgc2tpcEluZGV4ZXMgPSAhIWxlbmd0aDtcblxuICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICBpZiAoKGluaGVyaXRlZCB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrZXkpKSAmJlxuICAgICAgICAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gJ2xlbmd0aCcgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBBc3NpZ25zIGB2YWx1ZWAgdG8gYGtleWAgb2YgYG9iamVjdGAgaWYgdGhlIGV4aXN0aW5nIHZhbHVlIGlzIG5vdCBlcXVpdmFsZW50XG4gKiB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhc3NpZ24uXG4gKi9cbmZ1bmN0aW9uIGFzc2lnblZhbHVlKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgaWYgKCEoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYgZXEob2JqVmFsdWUsIHZhbHVlKSkgfHxcbiAgICAgICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpKSB7XG4gICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3QgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYmFzZUtleXMob2JqZWN0KSB7XG4gIGlmICghaXNQcm90b3R5cGUob2JqZWN0KSkge1xuICAgIHJldHVybiBuYXRpdmVLZXlzKG9iamVjdCk7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYga2V5ICE9ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmVzdGAgd2hpY2ggZG9lc24ndCB2YWxpZGF0ZSBvciBjb2VyY2UgYXJndW1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VSZXN0KGZ1bmMsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQgPyAoZnVuYy5sZW5ndGggLSAxKSA6IHN0YXJ0LCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgIGFycmF5ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBhcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuICAgIH1cbiAgICBpbmRleCA9IC0xO1xuICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICB9XG4gICAgb3RoZXJBcmdzW3N0YXJ0XSA9IGFycmF5O1xuICAgIHJldHVybiBhcHBseShmdW5jLCB0aGlzLCBvdGhlckFyZ3MpO1xuICB9O1xufVxuXG4vKipcbiAqIENvcGllcyBwcm9wZXJ0aWVzIG9mIGBzb3VyY2VgIHRvIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20uXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgaWRlbnRpZmllcnMgdG8gY29weS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0by5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvcGllZCB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBjb3B5T2JqZWN0KHNvdXJjZSwgcHJvcHMsIG9iamVjdCwgY3VzdG9taXplcikge1xuICBvYmplY3QgfHwgKG9iamVjdCA9IHt9KTtcblxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG5cbiAgICB2YXIgbmV3VmFsdWUgPSBjdXN0b21pemVyXG4gICAgICA/IGN1c3RvbWl6ZXIob2JqZWN0W2tleV0sIHNvdXJjZVtrZXldLCBrZXksIG9iamVjdCwgc291cmNlKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBhc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgbmV3VmFsdWUgPT09IHVuZGVmaW5lZCA/IHNvdXJjZVtrZXldIDogbmV3VmFsdWUpO1xuICB9XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGxpa2UgYF8uYXNzaWduYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gYXNzaWduZXIgVGhlIGZ1bmN0aW9uIHRvIGFzc2lnbiB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhc3NpZ25lciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQXNzaWduZXIoYXNzaWduZXIpIHtcbiAgcmV0dXJuIGJhc2VSZXN0KGZ1bmN0aW9uKG9iamVjdCwgc291cmNlcykge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBzb3VyY2VzLmxlbmd0aCxcbiAgICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA+IDEgPyBzb3VyY2VzW2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkLFxuICAgICAgICBndWFyZCA9IGxlbmd0aCA+IDIgPyBzb3VyY2VzWzJdIDogdW5kZWZpbmVkO1xuXG4gICAgY3VzdG9taXplciA9IChhc3NpZ25lci5sZW5ndGggPiAzICYmIHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicpXG4gICAgICA/IChsZW5ndGgtLSwgY3VzdG9taXplcilcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHNvdXJjZXNbMF0sIHNvdXJjZXNbMV0sIGd1YXJkKSkge1xuICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiBjdXN0b21pemVyO1xuICAgICAgbGVuZ3RoID0gMTtcbiAgICB9XG4gICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgYXNzaWduZXIob2JqZWN0LCBzb3VyY2UsIGluZGV4LCBjdXN0b21pemVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG4gIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcbiAgcmV0dXJuICEhbGVuZ3RoICYmXG4gICAgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgJiZcbiAgICAodmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIHZhbHVlIGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfSBpbmRleCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIGluZGV4IG9yIGtleSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgb2JqZWN0IGFyZ3VtZW50LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDtcbiAgaWYgKHR5cGUgPT0gJ251bWJlcidcbiAgICAgICAgPyAoaXNBcnJheUxpa2Uob2JqZWN0KSAmJiBpc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSlcbiAgICAgICAgOiAodHlwZSA9PSAnc3RyaW5nJyAmJiBpbmRleCBpbiBvYmplY3QpXG4gICAgICApIHtcbiAgICByZXR1cm4gZXEob2JqZWN0W2luZGV4XSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG4gIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblxuICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xufVxuXG4vKipcbiAqIFBlcmZvcm1zIGFcbiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07XG4gKlxuICogXy5lcShvYmplY3QsIG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcShvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcSgnYScsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcShOYU4sIE5hTik7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcbiAgLy8gU2FmYXJpIDguMSBtYWtlcyBgYXJndW1lbnRzLmNhbGxlZWAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cbiAgcmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiZcbiAgICAoIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKSB8fCBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvclxuICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgIWlzRnVuY3Rpb24odmFsdWUpO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uaXNBcnJheUxpa2VgIGV4Y2VwdCB0aGF0IGl0IGFsc28gY2hlY2tzIGlmIGB2YWx1ZWBcbiAqIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS1saWtlIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBTYWZhcmkgOC05IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGFuZCBvdGhlciBjb25zdHJ1Y3RvcnMuXG4gIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNMZW5ndGgoMyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aChJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcbiAgICB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3RzIHRvIHRoZVxuICogZGVzdGluYXRpb24gb2JqZWN0LiBTb3VyY2Ugb2JqZWN0cyBhcmUgYXBwbGllZCBmcm9tIGxlZnQgdG8gcmlnaHQuXG4gKiBTdWJzZXF1ZW50IHNvdXJjZXMgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAgYW5kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgT2JqZWN0LmFzc2lnbmBdKGh0dHBzOi8vbWRuLmlvL09iamVjdC9hc3NpZ24pLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xMC4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKiBAc2VlIF8uYXNzaWduSW5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogfVxuICpcbiAqIGZ1bmN0aW9uIEJhcigpIHtcbiAqICAgdGhpcy5jID0gMztcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmIgPSAyO1xuICogQmFyLnByb3RvdHlwZS5kID0gNDtcbiAqXG4gKiBfLmFzc2lnbih7ICdhJzogMCB9LCBuZXcgRm9vLCBuZXcgQmFyKTtcbiAqIC8vID0+IHsgJ2EnOiAxLCAnYyc6IDMgfVxuICovXG52YXIgYXNzaWduID0gY3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UpIHtcbiAgaWYgKG5vbkVudW1TaGFkb3dzIHx8IGlzUHJvdG90eXBlKHNvdXJjZSkgfHwgaXNBcnJheUxpa2Uoc291cmNlKSkge1xuICAgIGNvcHlPYmplY3Qoc291cmNlLCBrZXlzKHNvdXJjZSksIG9iamVjdCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgIGFzc2lnblZhbHVlKG9iamVjdCwga2V5LCBzb3VyY2Vba2V5XSk7XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5rZXlzKVxuICogZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXMobmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogXy5rZXlzKCdoaScpO1xuICogLy8gPT4gWycwJywgJzEnXVxuICovXG5mdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuICByZXR1cm4gaXNBcnJheUxpa2Uob2JqZWN0KSA/IGFycmF5TGlrZUtleXMob2JqZWN0KSA6IGJhc2VLZXlzKG9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXNzaWduO1xuXG5cbi8qKiovIH0pLFxuLyogOTYgKi8sXG4vKiA5NyAqLyxcbi8qIDk4ICovLFxuLyogOTkgKi8sXG4vKiAxMDAgKi8sXG4vKiAxMDEgKi8sXG4vKiAxMDIgKi8sXG4vKiAxMDMgKi8sXG4vKiAxMDQgKi8sXG4vKiAxMDUgKi8sXG4vKiAxMDYgKi8sXG4vKiAxMDcgKi8sXG4vKiAxMDggKi8sXG4vKiAxMDkgKi8sXG4vKiAxMTAgKi8sXG4vKiAxMTEgKi8sXG4vKiAxMTIgKi8sXG4vKiAxMTMgKi8sXG4vKiAxMTQgKi8sXG4vKiAxMTUgKi8sXG4vKiAxMTYgKi8sXG4vKiAxMTcgKi8sXG4vKiAxMTggKi8sXG4vKiAxMTkgKi8sXG4vKiAxMjAgKi8sXG4vKiAxMjEgKi8sXG4vKiAxMjIgKi8sXG4vKiAxMjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuZnVuY3Rpb24gd2FybihzKSB7XG4gIGNvbnNvbGUud2FybignW3JlYWN0LWdhXScsIHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdhcm47XG5cblxuLyoqKi8gfSksXG4vKiAxMjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gR0Egc3RyaW5ncyBuZWVkIHRvIGhhdmUgbGVhZGluZy90cmFpbGluZyB3aGl0ZXNwYWNlIHRyaW1tZWQsIGFuZCBub3QgYWxsXG4vLyBicm93c2VycyBoYXZlIFN0cmluZy5wcm90b3RveXBlLnRyaW0oKS5cblxuZnVuY3Rpb24gdHJpbShzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmltO1xuXG5cbi8qKiovIH0pLFxuLyogMTI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qIVxuICogQWRhcHRlZCBmcm9tIGpRdWVyeSBVSSBjb3JlXG4gKlxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jYXRlZ29yeS91aS1jb3JlL1xuICovXG5cbmZ1bmN0aW9uIGZvY3VzYWJsZShlbGVtZW50LCBpc1RhYkluZGV4Tm90TmFOKSB7XG4gIHZhciBub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuICgvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3Qobm9kZU5hbWUpID9cbiAgICAhZWxlbWVudC5kaXNhYmxlZCA6XG4gICAgXCJhXCIgPT09IG5vZGVOYW1lID9cbiAgICAgIGVsZW1lbnQuaHJlZiB8fCBpc1RhYkluZGV4Tm90TmFOIDpcbiAgICAgIGlzVGFiSW5kZXhOb3ROYU4pICYmIHZpc2libGUoZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGhpZGRlbihlbCkge1xuICByZXR1cm4gKGVsLm9mZnNldFdpZHRoIDw9IDAgJiYgZWwub2Zmc2V0SGVpZ2h0IDw9IDApIHx8XG4gICAgZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnO1xufVxuXG5mdW5jdGlvbiB2aXNpYmxlKGVsZW1lbnQpIHtcbiAgd2hpbGUgKGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSkgYnJlYWs7XG4gICAgaWYgKGhpZGRlbihlbGVtZW50KSkgcmV0dXJuIGZhbHNlO1xuICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHRhYmJhYmxlKGVsZW1lbnQpIHtcbiAgdmFyIHRhYkluZGV4ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gIGlmICh0YWJJbmRleCA9PT0gbnVsbCkgdGFiSW5kZXggPSB1bmRlZmluZWQ7XG4gIHZhciBpc1RhYkluZGV4TmFOID0gaXNOYU4odGFiSW5kZXgpO1xuICByZXR1cm4gKGlzVGFiSW5kZXhOYU4gfHwgdGFiSW5kZXggPj0gMCkgJiYgZm9jdXNhYmxlKGVsZW1lbnQsICFpc1RhYkluZGV4TmFOKTtcbn1cblxuZnVuY3Rpb24gZmluZFRhYmJhYmxlRGVzY2VuZGFudHMoZWxlbWVudCkge1xuICByZXR1cm4gW10uc2xpY2UuY2FsbChlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSwgMCkuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgcmV0dXJuIHRhYmJhYmxlKGVsKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmluZFRhYmJhYmxlRGVzY2VuZGFudHM7XG5cblxuXG4vKioqLyB9KSxcbi8qIDEyNiAqLyxcbi8qIDEyNyAqLyxcbi8qIDEyOCAqLyxcbi8qIDEyOSAqLyxcbi8qIDEzMCAqLyxcbi8qIDEzMSAqLyxcbi8qIDEzMiAqLyxcbi8qIDEzMyAqLyxcbi8qIDEzNCAqLyxcbi8qIDEzNSAqLyxcbi8qIDEzNiAqLyxcbi8qIDEzNyAqLyxcbi8qIDEzOCAqLyxcbi8qIDEzOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gICAgY2xhc3NOYW1lOiAnJyxcbiAgICBhY2Nlc3NpYmlsaXR5OiB0cnVlLFxuICAgIGFkYXB0aXZlSGVpZ2h0OiBmYWxzZSxcbiAgICBhcnJvd3M6IHRydWUsXG4gICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgIGF1dG9wbGF5U3BlZWQ6IDMwMDAsXG4gICAgY2VudGVyTW9kZTogZmFsc2UsXG4gICAgY2VudGVyUGFkZGluZzogJzUwcHgnLFxuICAgIGNzc0Vhc2U6ICdlYXNlJyxcbiAgICBjdXN0b21QYWdpbmc6IGZ1bmN0aW9uIGN1c3RvbVBhZ2luZyhpKSB7XG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGkgKyAxXG4gICAgICAgICk7XG4gICAgfSxcbiAgICBkb3RzOiBmYWxzZSxcbiAgICBkb3RzQ2xhc3M6ICdzbGljay1kb3RzJyxcbiAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICBlZGdlRnJpY3Rpb246IDAuMzUsXG4gICAgZmFkZTogZmFsc2UsXG4gICAgZm9jdXNPblNlbGVjdDogZmFsc2UsXG4gICAgaW5maW5pdGU6IHRydWUsXG4gICAgaW5pdGlhbFNsaWRlOiAwLFxuICAgIGxhenlMb2FkOiBmYWxzZSxcbiAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgcmVzcG9uc2l2ZTogbnVsbCxcbiAgICBydGw6IGZhbHNlLFxuICAgIHNsaWRlOiAnZGl2JyxcbiAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgc3BlZWQ6IDUwMCxcbiAgICBzd2lwZTogdHJ1ZSxcbiAgICBzd2lwZVRvU2xpZGU6IGZhbHNlLFxuICAgIHRvdWNoTW92ZTogdHJ1ZSxcbiAgICB0b3VjaFRocmVzaG9sZDogNSxcbiAgICB1c2VDU1M6IHRydWUsXG4gICAgdmFyaWFibGVXaWR0aDogZmFsc2UsXG4gICAgdmVydGljYWw6IGZhbHNlLFxuICAgIHdhaXRGb3JBbmltYXRlOiB0cnVlLFxuICAgIGFmdGVyQ2hhbmdlOiBudWxsLFxuICAgIGJlZm9yZUNoYW5nZTogbnVsbCxcbiAgICBlZGdlRXZlbnQ6IG51bGwsXG4gICAgaW5pdDogbnVsbCxcbiAgICBzd2lwZUV2ZW50OiBudWxsLFxuICAgIC8vIG5leHRBcnJvdywgcHJldkFycm93IGFyZSByZWFjdCBjb21wb25ldHNcbiAgICBuZXh0QXJyb3c6IG51bGwsXG4gICAgcHJldkFycm93OiBudWxsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRQcm9wcztcblxuLyoqKi8gfSksXG4vKiAxNDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZ2V0VHJhY2tMZWZ0ID0gZXhwb3J0cy5nZXRUcmFja0FuaW1hdGVDU1MgPSBleHBvcnRzLmdldFRyYWNrQ1NTID0gdW5kZWZpbmVkO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBjaGVja1NwZWNLZXlzID0gZnVuY3Rpb24gY2hlY2tTcGVjS2V5cyhzcGVjLCBrZXlzQXJyYXkpIHtcbiAgcmV0dXJuIGtleXNBcnJheS5yZWR1Y2UoZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgc3BlYy5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICB9LCB0cnVlKSA/IG51bGwgOiBjb25zb2xlLmVycm9yKCdLZXlzIE1pc3NpbmcnLCBzcGVjKTtcbn07XG5cbnZhciBnZXRUcmFja0NTUyA9IGV4cG9ydHMuZ2V0VHJhY2tDU1MgPSBmdW5jdGlvbiBnZXRUcmFja0NTUyhzcGVjKSB7XG4gIGNoZWNrU3BlY0tleXMoc3BlYywgWydsZWZ0JywgJ3ZhcmlhYmxlV2lkdGgnLCAnc2xpZGVDb3VudCcsICdzbGlkZXNUb1Nob3cnLCAnc2xpZGVXaWR0aCddKTtcblxuICB2YXIgdHJhY2tXaWR0aCwgdHJhY2tIZWlnaHQ7XG5cbiAgdmFyIHRyYWNrQ2hpbGRyZW4gPSBzcGVjLnNsaWRlQ291bnQgKyAyICogc3BlYy5zbGlkZXNUb1Nob3c7XG5cbiAgaWYgKCFzcGVjLnZlcnRpY2FsKSB7XG4gICAgaWYgKHNwZWMudmFyaWFibGVXaWR0aCkge1xuICAgICAgdHJhY2tXaWR0aCA9IChzcGVjLnNsaWRlQ291bnQgKyAyICogc3BlYy5zbGlkZXNUb1Nob3cpICogc3BlYy5zbGlkZVdpZHRoO1xuICAgIH0gZWxzZSBpZiAoc3BlYy5jZW50ZXJNb2RlKSB7XG4gICAgICB0cmFja1dpZHRoID0gKHNwZWMuc2xpZGVDb3VudCArIDIgKiAoc3BlYy5zbGlkZXNUb1Nob3cgKyAxKSkgKiBzcGVjLnNsaWRlV2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYWNrV2lkdGggPSAoc3BlYy5zbGlkZUNvdW50ICsgMiAqIHNwZWMuc2xpZGVzVG9TaG93KSAqIHNwZWMuc2xpZGVXaWR0aDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdHJhY2tIZWlnaHQgPSB0cmFja0NoaWxkcmVuICogc3BlYy5zbGlkZUhlaWdodDtcbiAgfVxuXG4gIHZhciBzdHlsZSA9IHtcbiAgICBvcGFjaXR5OiAxLFxuICAgIFdlYmtpdFRyYW5zZm9ybTogIXNwZWMudmVydGljYWwgPyAndHJhbnNsYXRlM2QoJyArIHNwZWMubGVmdCArICdweCwgMHB4LCAwcHgpJyA6ICd0cmFuc2xhdGUzZCgwcHgsICcgKyBzcGVjLmxlZnQgKyAncHgsIDBweCknLFxuICAgIHRyYW5zZm9ybTogIXNwZWMudmVydGljYWwgPyAndHJhbnNsYXRlM2QoJyArIHNwZWMubGVmdCArICdweCwgMHB4LCAwcHgpJyA6ICd0cmFuc2xhdGUzZCgwcHgsICcgKyBzcGVjLmxlZnQgKyAncHgsIDBweCknLFxuICAgIHRyYW5zaXRpb246ICcnLFxuICAgIFdlYmtpdFRyYW5zaXRpb246ICcnLFxuICAgIG1zVHJhbnNmb3JtOiAhc3BlYy52ZXJ0aWNhbCA/ICd0cmFuc2xhdGVYKCcgKyBzcGVjLmxlZnQgKyAncHgpJyA6ICd0cmFuc2xhdGVZKCcgKyBzcGVjLmxlZnQgKyAncHgpJ1xuICB9O1xuXG4gIGlmICh0cmFja1dpZHRoKSB7XG4gICAgKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHN0eWxlLCB7IHdpZHRoOiB0cmFja1dpZHRoIH0pO1xuICB9XG5cbiAgaWYgKHRyYWNrSGVpZ2h0KSB7XG4gICAgKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHN0eWxlLCB7IGhlaWdodDogdHJhY2tIZWlnaHQgfSk7XG4gIH1cblxuICAvLyBGYWxsYmFjayBmb3IgSUU4XG4gIGlmICh3aW5kb3cgJiYgIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHdpbmRvdy5hdHRhY2hFdmVudCkge1xuICAgIGlmICghc3BlYy52ZXJ0aWNhbCkge1xuICAgICAgc3R5bGUubWFyZ2luTGVmdCA9IHNwZWMubGVmdCArICdweCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLm1hcmdpblRvcCA9IHNwZWMubGVmdCArICdweCc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufTtcblxudmFyIGdldFRyYWNrQW5pbWF0ZUNTUyA9IGV4cG9ydHMuZ2V0VHJhY2tBbmltYXRlQ1NTID0gZnVuY3Rpb24gZ2V0VHJhY2tBbmltYXRlQ1NTKHNwZWMpIHtcbiAgY2hlY2tTcGVjS2V5cyhzcGVjLCBbJ2xlZnQnLCAndmFyaWFibGVXaWR0aCcsICdzbGlkZUNvdW50JywgJ3NsaWRlc1RvU2hvdycsICdzbGlkZVdpZHRoJywgJ3NwZWVkJywgJ2Nzc0Vhc2UnXSk7XG5cbiAgdmFyIHN0eWxlID0gZ2V0VHJhY2tDU1Moc3BlYyk7XG4gIC8vIHVzZUNTUyBpcyB0cnVlIGJ5IGRlZmF1bHQgc28gaXQgY2FuIGJlIHVuZGVmaW5lZFxuICBzdHlsZS5XZWJraXRUcmFuc2l0aW9uID0gJy13ZWJraXQtdHJhbnNmb3JtICcgKyBzcGVjLnNwZWVkICsgJ21zICcgKyBzcGVjLmNzc0Vhc2U7XG4gIHN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtICcgKyBzcGVjLnNwZWVkICsgJ21zICcgKyBzcGVjLmNzc0Vhc2U7XG4gIHJldHVybiBzdHlsZTtcbn07XG5cbnZhciBnZXRUcmFja0xlZnQgPSBleHBvcnRzLmdldFRyYWNrTGVmdCA9IGZ1bmN0aW9uIGdldFRyYWNrTGVmdChzcGVjKSB7XG5cbiAgY2hlY2tTcGVjS2V5cyhzcGVjLCBbJ3NsaWRlSW5kZXgnLCAndHJhY2tSZWYnLCAnaW5maW5pdGUnLCAnY2VudGVyTW9kZScsICdzbGlkZUNvdW50JywgJ3NsaWRlc1RvU2hvdycsICdzbGlkZXNUb1Njcm9sbCcsICdzbGlkZVdpZHRoJywgJ2xpc3RXaWR0aCcsICd2YXJpYWJsZVdpZHRoJywgJ3NsaWRlSGVpZ2h0J10pO1xuXG4gIHZhciBzbGlkZU9mZnNldCA9IDA7XG4gIHZhciB0YXJnZXRMZWZ0O1xuICB2YXIgdGFyZ2V0U2xpZGU7XG4gIHZhciB2ZXJ0aWNhbE9mZnNldCA9IDA7XG5cbiAgaWYgKHNwZWMuZmFkZSkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgaWYgKHNwZWMuaW5maW5pdGUpIHtcbiAgICBpZiAoc3BlYy5zbGlkZUNvdW50ID49IHNwZWMuc2xpZGVzVG9TaG93KSB7XG4gICAgICBzbGlkZU9mZnNldCA9IHNwZWMuc2xpZGVXaWR0aCAqIHNwZWMuc2xpZGVzVG9TaG93ICogLTE7XG4gICAgICB2ZXJ0aWNhbE9mZnNldCA9IHNwZWMuc2xpZGVIZWlnaHQgKiBzcGVjLnNsaWRlc1RvU2hvdyAqIC0xO1xuICAgIH1cbiAgICBpZiAoc3BlYy5zbGlkZUNvdW50ICUgc3BlYy5zbGlkZXNUb1Njcm9sbCAhPT0gMCkge1xuICAgICAgaWYgKHNwZWMuc2xpZGVJbmRleCArIHNwZWMuc2xpZGVzVG9TY3JvbGwgPiBzcGVjLnNsaWRlQ291bnQgJiYgc3BlYy5zbGlkZUNvdW50ID4gc3BlYy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgaWYgKHNwZWMuc2xpZGVJbmRleCA+IHNwZWMuc2xpZGVDb3VudCkge1xuICAgICAgICAgIHNsaWRlT2Zmc2V0ID0gKHNwZWMuc2xpZGVzVG9TaG93IC0gKHNwZWMuc2xpZGVJbmRleCAtIHNwZWMuc2xpZGVDb3VudCkpICogc3BlYy5zbGlkZVdpZHRoICogLTE7XG4gICAgICAgICAgdmVydGljYWxPZmZzZXQgPSAoc3BlYy5zbGlkZXNUb1Nob3cgLSAoc3BlYy5zbGlkZUluZGV4IC0gc3BlYy5zbGlkZUNvdW50KSkgKiBzcGVjLnNsaWRlSGVpZ2h0ICogLTE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2xpZGVPZmZzZXQgPSBzcGVjLnNsaWRlQ291bnQgJSBzcGVjLnNsaWRlc1RvU2Nyb2xsICogc3BlYy5zbGlkZVdpZHRoICogLTE7XG4gICAgICAgICAgdmVydGljYWxPZmZzZXQgPSBzcGVjLnNsaWRlQ291bnQgJSBzcGVjLnNsaWRlc1RvU2Nyb2xsICogc3BlYy5zbGlkZUhlaWdodCAqIC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuXG4gICAgaWYgKHNwZWMuc2xpZGVDb3VudCAlIHNwZWMuc2xpZGVzVG9TY3JvbGwgIT09IDApIHtcbiAgICAgIGlmIChzcGVjLnNsaWRlSW5kZXggKyBzcGVjLnNsaWRlc1RvU2Nyb2xsID4gc3BlYy5zbGlkZUNvdW50ICYmIHNwZWMuc2xpZGVDb3VudCA+IHNwZWMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgIHZhciBzbGlkZXNUb09mZnNldCA9IHNwZWMuc2xpZGVzVG9TaG93IC0gc3BlYy5zbGlkZUNvdW50ICUgc3BlYy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgICAgc2xpZGVPZmZzZXQgPSBzbGlkZXNUb09mZnNldCAqIHNwZWMuc2xpZGVXaWR0aDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc3BlYy5jZW50ZXJNb2RlKSB7XG4gICAgaWYgKHNwZWMuaW5maW5pdGUpIHtcbiAgICAgIHNsaWRlT2Zmc2V0ICs9IHNwZWMuc2xpZGVXaWR0aCAqIE1hdGguZmxvb3Ioc3BlYy5zbGlkZXNUb1Nob3cgLyAyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVPZmZzZXQgPSBzcGVjLnNsaWRlV2lkdGggKiBNYXRoLmZsb29yKHNwZWMuc2xpZGVzVG9TaG93IC8gMik7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFzcGVjLnZlcnRpY2FsKSB7XG4gICAgdGFyZ2V0TGVmdCA9IHNwZWMuc2xpZGVJbmRleCAqIHNwZWMuc2xpZGVXaWR0aCAqIC0xICsgc2xpZGVPZmZzZXQ7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0TGVmdCA9IHNwZWMuc2xpZGVJbmRleCAqIHNwZWMuc2xpZGVIZWlnaHQgKiAtMSArIHZlcnRpY2FsT2Zmc2V0O1xuICB9XG5cbiAgaWYgKHNwZWMudmFyaWFibGVXaWR0aCA9PT0gdHJ1ZSkge1xuICAgIHZhciB0YXJnZXRTbGlkZUluZGV4O1xuICAgIGlmIChzcGVjLnNsaWRlQ291bnQgPD0gc3BlYy5zbGlkZXNUb1Nob3cgfHwgc3BlYy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHRhcmdldFNsaWRlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHNwZWMudHJhY2tSZWYpLmNoaWxkTm9kZXNbc3BlYy5zbGlkZUluZGV4XTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0U2xpZGVJbmRleCA9IHNwZWMuc2xpZGVJbmRleCArIHNwZWMuc2xpZGVzVG9TaG93O1xuICAgICAgdGFyZ2V0U2xpZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoc3BlYy50cmFja1JlZikuY2hpbGROb2Rlc1t0YXJnZXRTbGlkZUluZGV4XTtcbiAgICB9XG4gICAgdGFyZ2V0TGVmdCA9IHRhcmdldFNsaWRlID8gdGFyZ2V0U2xpZGUub2Zmc2V0TGVmdCAqIC0xIDogMDtcbiAgICBpZiAoc3BlYy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG4gICAgICBpZiAoc3BlYy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoc3BlYy50cmFja1JlZikuY2hpbGRyZW5bc3BlYy5zbGlkZUluZGV4XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFNsaWRlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHNwZWMudHJhY2tSZWYpLmNoaWxkcmVuW3NwZWMuc2xpZGVJbmRleCArIHNwZWMuc2xpZGVzVG9TaG93ICsgMV07XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXRTbGlkZSkge1xuICAgICAgICB0YXJnZXRMZWZ0ID0gdGFyZ2V0U2xpZGUub2Zmc2V0TGVmdCAqIC0xICsgKHNwZWMubGlzdFdpZHRoIC0gdGFyZ2V0U2xpZGUub2Zmc2V0V2lkdGgpIC8gMjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0TGVmdDtcbn07XG5cbi8qKiovIH0pLFxuLyogMTQxICovLFxuLyogMTQyICovLFxuLyogMTQzICovLFxuLyogMTQ0ICovLFxuLyogMTQ1ICovLFxuLyogMTQ2ICovLFxuLyogMTQ3ICovLFxuLyogMTQ4ICovLFxuLyogMTQ5ICovLFxuLyogMTUwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnRocm93IG5ldyBFcnJvcihcIk1vZHVsZSBwYXJzZSBmYWlsZWQ6IC9Vc2Vycy9qdWxpYW5qb3JnZW5zZW4vc2l0ZXMvcm1jL2FwcC9zdHlsZXMvYXBwLnNjc3MgVW5leHBlY3RlZCBjaGFyYWN0ZXIgJ0AnICgxOjApXFxuWW91IG1heSBuZWVkIGFuIGFwcHJvcHJpYXRlIGxvYWRlciB0byBoYW5kbGUgdGhpcyBmaWxlIHR5cGUuXFxufCBAaW1wb3J0IFxcXCJiYXNlL3ZhcmlhYmxlc1xcXCI7XFxufCBcXG58IC8vIGZvdW5kYXRpb25cIik7XG5cbi8qKiovIH0pLFxuLyogMTUxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3JlYWN0RG9jdW1lbnRNZXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb2N1bWVudE1ldGEpO1xuXG52YXIgX01haW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OSk7XG5cbnZhciBfTWFpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NYWluKTtcblxudmFyIF9JbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblxudmFyIF9JbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JbmRleCk7XG5cbnZhciBfUHJvZHVjdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MCk7XG5cbnZhciBfUHJvZHVjdHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJvZHVjdHMpO1xuXG52YXIgX1Byb2R1Y3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTtcblxudmFyIF9Qcm9kdWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb2R1Y3QpO1xuXG52YXIgX0NvbGxlY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTUpO1xuXG52YXIgX0NvbGxlY3Rpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbGxlY3Rpb25zKTtcblxudmFyIF9Db2xsZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cbnZhciBfQ29sbGVjdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db2xsZWN0aW9uKTtcblxudmFyIF9VcGxvYWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7XG5cbnZhciBfVXBsb2FkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1VwbG9hZCk7XG5cbnZhciBfT3JkZXJTdGF0dXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nyk7XG5cbnZhciBfT3JkZXJTdGF0dXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfT3JkZXJTdGF0dXMpO1xuXG52YXIgX01hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTY2KTtcblxudmFyIF9NYXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWFwKTtcblxudmFyIF9Mb2dpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTY1KTtcblxudmFyIF9Mb2dpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Mb2dpbik7XG5cbnZhciBfQWJvdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Myk7XG5cbnZhciBfQWJvdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQWJvdXQpO1xuXG52YXIgX0NvbnRhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NCk7XG5cbnZhciBfQ29udGFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db250YWN0KTtcblxudmFyIF9yZWFjdEdhID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzIpO1xuXG52YXIgX3JlYWN0R2EyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RHYSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCksXG4gICAgY29ubmVjdCA9IF9yZXF1aXJlLmNvbm5lY3Q7XG5cbnZhciBzdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpLmNvbmZpZ3VyZSgpO1xuXG4vLyBSZWFjdEdBLmluaXRpYWxpemUoJ1VBLTYyNDE4MjUtOScpOyAvLyBpbml0aWFsaXplIEdvb2dsZSBBbmFseXRpY3NcblxuZnVuY3Rpb24gbG9nUGFnZVZpZXcobG9jYXRpb24pIHtcbiAgX3JlYWN0R2EyLmRlZmF1bHQuc2V0KHsgcGFnZTogbG9jYXRpb24ucGF0aG5hbWUgfSk7XG4gIF9yZWFjdEdhMi5kZWZhdWx0LnBhZ2V2aWV3KGxvY2F0aW9uLnBhdGhuYW1lKTtcbn1cblxuX3JlYWN0Um91dGVyLmJyb3dzZXJIaXN0b3J5Lmxpc3RlbihmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgbG9nUGFnZVZpZXcobG9jYXRpb24pO1xuXG4gIC8vIHNjcm9sbCB0byB0b3Agd2hlbiBjaGFuZ2luZyBwYWdlXG4gIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgX3JlYWN0Um91dGVyLlJvdXRlcixcbiAgeyBoaXN0b3J5OiBfcmVhY3RSb3V0ZXIuYnJvd3Nlckhpc3RvcnkgfSxcbiAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX3JlYWN0Um91dGVyLlJvdXRlLFxuICAgIHsgcGF0aDogJy8nLCBjb21wb25lbnQ6IF9NYWluMi5kZWZhdWx0IH0sXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyLkluZGV4Um91dGUsIHsgcGF0aDogJy8nLCBjb21wb25lbnQ6IF9JbmRleDIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ3Byb2R1Y3RzJywgY29tcG9uZW50OiBfUHJvZHVjdHMyLmRlZmF1bHQgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyLlJvdXRlLCB7IHBhdGg6ICdwcm9kdWN0Lzpwcm9kdWN0SWQnLCBjb21wb25lbnQ6IF9Qcm9kdWN0Mi5kZWZhdWx0IH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlci5Sb3V0ZSwgeyBwYXRoOiAnY29sbGVjdGlvbnMnLCBjb21wb25lbnQ6IF9Db2xsZWN0aW9uczIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ2NvbGxlY3Rpb24vOmNvbGxlY3Rpb25JZCcsIGNvbXBvbmVudDogX0NvbGxlY3Rpb24yLmRlZmF1bHQgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyLlJvdXRlLCB7IHBhdGg6ICdteS1jaXR5JywgY29tcG9uZW50OiBfUHJvZHVjdHMyLmRlZmF1bHQgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyLlJvdXRlLCB7IHBhdGg6ICd1cGxvYWQnLCBjb21wb25lbnQ6IF9VcGxvYWQyLmRlZmF1bHQgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyLlJvdXRlLCB7IHBhdGg6ICdvcmRlci1zdGF0dXMnLCBjb21wb25lbnQ6IF9PcmRlclN0YXR1czIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ21hcCcsIGNvbXBvbmVudDogX01hcDIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ2xvZ2luJywgY29tcG9uZW50OiBfTG9naW4yLmRlZmF1bHQgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyLlJvdXRlLCB7IHBhdGg6ICdhYm91dCcsIGNvbXBvbmVudDogX0Fib3V0Mi5kZWZhdWx0IH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlci5Sb3V0ZSwgeyBwYXRoOiAnY29udGFjdCcsIGNvbXBvbmVudDogX0NvbnRhY3QyLmRlZmF1bHQgfSlcbiAgKVxuKTtcblxuLy8gY29uc3QgY29tcG9uZW50Um91dGVzID0ge1xuLy8gICBjb21wb25lbnQ6ICdNYWluJyxcbi8vICAgcGF0aDogJy8nLFxuLy8gICBpbmRleFJvdXRlOiB7IGNvbXBvbmVudDogJ0luZGV4JyB9LFxuLy8gICBjaGlsZFJvdXRlczogW1xuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdjb2xsZWN0aW9ucycsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0NvbGxlY3Rpb25zJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdjb2xsZWN0aW9uLzpjb2xsZWN0aW9uSWQnLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdDb2xsZWN0aW9uJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdwcm9kdWN0cycsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ1Byb2R1Y3RzJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdwcm9kdWN0L3Byb2R1Y3RJZCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ1Byb2R1Y3QnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ215LWNpdHknLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdQcm9kdWN0cycpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAnYWJvdXQnLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdBYm91dCcpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAnY29udGFjdCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0NvbnRhY3QnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ3VwbG9hZCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ1VwbG9hZCcpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAnbWFwJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnTWFwJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdsb2dpbicsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0xvZ2luJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdvcmRlci1zdGF0dXMnLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdPcmRlclN0YXR1cycpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfVxuLy8gICBdXG4vLyB9O1xuXG4vKioqLyB9KSxcbi8qIDE1MiAqLyxcbi8qIDE1MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cbnZhciBfZm9ybWF0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Zvcm1hdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSxcbiAgICBjb25uZWN0ID0gX3JlcXVpcmUuY29ubmVjdDtcblxudmFyIGFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIENhcnRJdGVtID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKENhcnRJdGVtLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDYXJ0SXRlbSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FydEl0ZW0pO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDYXJ0SXRlbS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENhcnRJdGVtKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ2FydEl0ZW0sIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgZGlzcGF0Y2ggPSBfcHJvcHMuZGlzcGF0Y2gsXG4gICAgICAgICAgaXRlbSA9IF9wcm9wcy5pdGVtLFxuICAgICAgICAgIGluY3JlbWVudExpbmVJdGVtID0gX3Byb3BzLmluY3JlbWVudExpbmVJdGVtLFxuICAgICAgICAgIHF1YW50aXR5ID0gX3Byb3BzLnF1YW50aXR5O1xuXG5cbiAgICAgIHZhciBjaGFuZ2VRdWFudGl0eSA9IGZ1bmN0aW9uIGNoYW5nZVF1YW50aXR5KHF1YW50aXR5KSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjYXJ0IEl0ZW0gb2JqZWN0OiAnLCBpdGVtKTtcbiAgICAgICAgZGlzcGF0Y2goYWN0aW9ucy5zdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0oaXRlbSwgcGFyc2VJbnQocXVhbnRpdHkpKSk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtaXRlbScgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnY2FydC1pdGVtX19pbWcnLCBzdHlsZTogeyBiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoJyArIGl0ZW0uaW1hZ2VWYXJpYW50c1syXS5zcmMgKyAnKScgfSB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWl0ZW1fX2NvbnRlbnQnIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1pdGVtX19jb250ZW50LXJvdycgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWl0ZW1fX3ZhcmlhbnQtdGl0bGUnIH0sXG4gICAgICAgICAgICAgIGl0ZW0udmFyaWFudF90aXRsZVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1pdGVtX190aXRsZScgfSxcbiAgICAgICAgICAgICAgaXRlbS50aXRsZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1pdGVtX19jb250ZW50LXJvdycgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWl0ZW1fX3F1YW50aXR5LWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuLS1zZWFtbGVzcyBxdWFudGl0eS1kZWNyZW1lbnQnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VRdWFudGl0eSgtMSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAnLSdcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoaWRlJyB9LFxuICAgICAgICAgICAgICAgICAgJ0RlY3JlbWVudCdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcXVhbnRpdHksXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnY2FydC1pdGVtX19xdWFudGl0eScsXG4gICAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgICAgICAgbWluOiAnMCcsXG4gICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRydWVcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0bi0tc2VhbWxlc3MgcXVhbnRpdHktaW5jcmVtZW50JyxcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlUXVhbnRpdHkoMSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAnKydcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoaWRlJyB9LFxuICAgICAgICAgICAgICAgICAgJ0luY3JlbWVudCdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtaXRlbV9fcHJpY2UnIH0sXG4gICAgICAgICAgICAgIF9mb3JtYXQyLmRlZmF1bHQuYXNNb25leShpdGVtLnByaWNlICogcXVhbnRpdHkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDYXJ0SXRlbTtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNvbm5lY3QoZnVuY3Rpb24gKHN0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgY2FydDogc3RhdGUuY2FydFxuICB9O1xufSkoQ2FydEl0ZW0pO1xuXG4vKioqLyB9KSxcbi8qIDE1NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSb3V0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQ29sbGVjdGlvbkl0ZW0gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQ29sbGVjdGlvbkl0ZW0sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENvbGxlY3Rpb25JdGVtKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xsZWN0aW9uSXRlbSk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvbGxlY3Rpb25JdGVtLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ29sbGVjdGlvbkl0ZW0pKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDb2xsZWN0aW9uSXRlbSwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICB0aXRsZSA9IF9wcm9wcy50aXRsZSxcbiAgICAgICAgICBpZCA9IF9wcm9wcy5pZDtcblxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbGxlY3Rpb24taXRlbScgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2xsZWN0aW9uLWl0ZW0taW5uZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDInLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd0ZXh0LWNlbnRlcicgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9jb2xsZWN0aW9uLycgKyBpZCB9LFxuICAgICAgICAgICAgICB0aXRsZVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ29sbGVjdGlvbkl0ZW07XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbGxlY3Rpb25JdGVtO1xuXG4vKioqLyB9KSxcbi8qIDE1NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfQ29sbGVjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oODMpO1xuXG52YXIgX0NvbGxlY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29sbGVjdGlvbik7XG5cbnZhciBfQ29sbGVjdGlvbkl0ZW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NCk7XG5cbnZhciBfQ29sbGVjdGlvbkl0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29sbGVjdGlvbkl0ZW0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCksXG4gICAgY29ubmVjdCA9IF9yZXF1aXJlLmNvbm5lY3Q7XG5cbnZhciBhY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cbnZhciBDb2xsZWN0aW9ucyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDb2xsZWN0aW9ucywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ29sbGVjdGlvbnMoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbGxlY3Rpb25zKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29sbGVjdGlvbnMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xsZWN0aW9ucykpLmNhbGwodGhpcykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENvbGxlY3Rpb25zLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBjb2xsZWN0aW9ucyA9IHRoaXMucHJvcHMuY29sbGVjdGlvbnM7XG5cblxuICAgICAgaWYgKGNvbGxlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgIGNvbGxlY3Rpb25zLm1hcChmdW5jdGlvbiAoY29sbGVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Db2xsZWN0aW9uSXRlbTIuZGVmYXVsdCwgeyBrZXk6IGNvbGxlY3Rpb24uY29sbGVjdGlvbl9pZCwgaWQ6IGNvbGxlY3Rpb24uY29sbGVjdGlvbl9pZCwgdGl0bGU6IGNvbGxlY3Rpb24udGl0bGUgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgICdMb2FkaW5nIGNvbGxlY3Rpb25zLi4uJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDb2xsZWN0aW9ucztcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNvbm5lY3QoZnVuY3Rpb24gKHN0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgY29sbGVjdGlvbnM6IHN0YXRlLmNvbGxlY3Rpb25zLmFsbFxuICB9O1xufSkoQ29sbGVjdGlvbnMpO1xuXG4vKioqLyB9KSxcbi8qIDE1NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSb3V0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgRm9vdGVyID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEZvb3RlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRm9vdGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGb290ZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGb290ZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGb290ZXIpKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhGb290ZXIsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZm9vdGVyJyxcbiAgICAgICAgeyBpZDogJ3NpdGUtZm9vdGVyJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnbmF2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvb3Rlci1uYXYnIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9hYm91dCcsIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScgfSxcbiAgICAgICAgICAgICAgJ0Fib3V0J1xuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9wcm9kdWN0cycsIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScgfSxcbiAgICAgICAgICAgICAgJ1Nob3AgQWxsJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9jb250YWN0JywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnQ29udGFjdCdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgIHsgdG86ICcvdXBsb2FkJywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnVXBsb2FkIERlc2lnbidcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdwJyxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgICdMb3JlbSBpcHN1bSBkb2xhciBzaXQgYW1pdC4gU2VkIGRvbm8gYXZlYy4nXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEZvb3Rlcjtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gRm9vdGVyO1xuXG4vKioqLyB9KSxcbi8qIDE1NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSb3V0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLFxuICAgIGNvbm5lY3QgPSBfcmVxdWlyZS5jb25uZWN0O1xuXG52YXIgY2FydEFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIEhlYWRlciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhIZWFkZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEhlYWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVhZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoSGVhZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSGVhZGVyKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoSGVhZGVyLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGRpc3BhdGNoID0gX3Byb3BzLmRpc3BhdGNoLFxuICAgICAgICAgIGNhcnRJdGVtcyA9IF9wcm9wcy5jYXJ0SXRlbXM7XG5cblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnaGVhZGVyJyxcbiAgICAgICAgeyBpZDogJ3NpdGUtaGVhZGVyJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAndWwnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbWluaS1uYXYnIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdtaW5pLW5hdi1pdGVtJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL2Fib3V0JywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnQWJvdXQnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ21pbmktbmF2LWl0ZW0nIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgIHsgdG86ICcvb3JkZXItc3RhdHVzJywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnT3JkZXIgU3RhdHVzJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdtaW5pLW5hdi1pdGVtJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL21hcCcsIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScgfSxcbiAgICAgICAgICAgICAgJ01hcCdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbWluaS1uYXYtaXRlbScgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9sb2dpbicsIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScgfSxcbiAgICAgICAgICAgICAgJ0xvZ2luJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdtaW5pLW5hdi1pdGVtIG1pbmktbmF2LWl0ZW0tY2FydCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goY2FydEFjdGlvbnMub3BlbkNhcnQoKSk7XG4gICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS1zaG9wcGluZy1jYXJ0JyB9KSxcbiAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgIGNhcnRJdGVtcyA+IDAgPyAnWycgKyBjYXJ0SXRlbXMgKyAnXScgOiAnJ1xuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBpZDogJ3NpdGUtbG9nbycgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9yZWFjdFJvdXRlci5JbmRleExpbmssXG4gICAgICAgICAgICB7IHRvOiAnLycsIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScsIGFjdGl2ZVN0eWxlOiB7IGZvbnRXZWlnaHQ6ICdib2xkJyB9IH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW1nJywgeyBzcmM6ICcvaW1hZ2VzL2xvZ28ucG5nJyB9KVxuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ25hdicsXG4gICAgICAgICAgeyBpZDogJ3NpdGUtbmF2JyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2l0ZS1uYXYtaXRlbScgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9wcm9kdWN0cycsIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScgfSxcbiAgICAgICAgICAgICAgJ1Nob3AnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NpdGUtbmF2LWl0ZW0nIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgIHsgdG86ICcvbXktY2l0eScsIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScgfSxcbiAgICAgICAgICAgICAgJ015IENpdHknXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NpdGUtbmF2LWl0ZW0nIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgIHsgdG86ICcvY2F0ZWdvcmllcycsIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScgfSxcbiAgICAgICAgICAgICAgJ0NhdGVnb3JpZXMnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBpZDogJ3NpdGUtbmF2LXVwbG9hZCcgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy91cGxvYWQnIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHNyYzogJy9pbWFnZXMvdXBsb2FkLnBuZycgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEhlYWRlcjtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNvbm5lY3QoZnVuY3Rpb24gKHN0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgY2FydEl0ZW1zOiBzdGF0ZS5jYXJ0LmxpbmVJdGVtc0NvdW50XG4gIH07XG59KShIZWFkZXIpO1xuXG4vKioqLyB9KSxcbi8qIDE1OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RTbGljayA9IF9fd2VicGFja19yZXF1aXJlX18oMzEzKTtcblxudmFyIF9yZWFjdFNsaWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0U2xpY2spO1xuXG52YXIgX3JlYWN0Um91dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfTG9hZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cbnZhciBfTG9hZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvYWRlcik7XG5cbnZhciBfUHJvZHVjdEl0ZW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KTtcblxudmFyIF9Qcm9kdWN0SXRlbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm9kdWN0SXRlbSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSxcbiAgICBjb25uZWN0ID0gX3JlcXVpcmUuY29ubmVjdDtcblxudmFyIGFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIEluZGV4ID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEluZGV4LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBJbmRleCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW5kZXgpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChJbmRleC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEluZGV4KSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoSW5kZXgsIFt7XG4gICAga2V5OiAnaGFuZGxlQWRkVG9DYXJ0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQWRkVG9DYXJ0KHByb2R1Y3QpIHtcbiAgICAgIHZhciBkaXNwYXRjaCA9IHRoaXMucHJvcHMuZGlzcGF0Y2g7XG5cbiAgICAgIGRpc3BhdGNoKGFjdGlvbnMuc3RhcnRBZGRvclVwZGF0ZUNhcnRJdGVtKHByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LCAxKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBwcm9kdWN0cyA9IHRoaXMucHJvcHMucHJvZHVjdHM7XG5cbiAgICAgIHByb2R1Y3RzID0gcHJvZHVjdHMuc2xpY2UoMCwgMTIpO1xuXG4gICAgICAvLyBzbGlkZXIgc2V0dGluZ3NcbiAgICAgIHZhciBzZXR0aW5ncyA9IHtcbiAgICAgICAgY2xhc3NOYW1lOiAnY2VudGVyIHByb2R1Y3RzLWNhcm91c2VsJyxcbiAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgIGNlbnRlclBhZGRpbmc6ICc2MHB4JyxcbiAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgIHNsaWRlc1RvU2hvdzogNCxcbiAgICAgICAgc3BlZWQ6IDUwMCxcbiAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgbGF6eUxvYWQ6IHRydWUsXG4gICAgICAgIHJlc3BvbnNpdmU6IFt7XG4gICAgICAgICAgYnJlYWtwb2ludDogMTAyNCxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxuICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDMsXG4gICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgIGJyZWFrcG9pbnQ6IDYwMCxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxuICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDIsXG4gICAgICAgICAgICBpbml0aWFsU2xpZGU6IDJcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBicmVha3BvaW50OiA0ODAsXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XVxuICAgICAgfTtcblxuICAgICAgaWYgKHByb2R1Y3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfcmVhY3RTbGljazIuZGVmYXVsdCxcbiAgICAgICAgICAgIHNldHRpbmdzLFxuICAgICAgICAgICAgcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChwcm9kdWN0LCBpbmRleCkge1xuICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBrZXk6IGluZGV4LCBjbGFzc05hbWU6ICdwcm9kdWN0cy1jYXJvdXNlbC1pdGVtJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgICAgICB7IHRvOiAnL3Byb2R1Y3QvJyArIHByb2R1Y3QuYXR0cnMucHJvZHVjdF9pZCB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1pdGVtLWltYWdlJywgc3R5bGU6IHsgYmFja2dyb3VuZEltYWdlOiAndXJsKCcgKyBwcm9kdWN0LnNlbGVjdGVkVmFyaWFudC5pbWFnZVZhcmlhbnRzWzVdLnNyYyArICcpJyB9IH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzZWN0aW9uLWNhbGxvdXQnIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnaDQnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2VjdGlvbi1oZWFkbGluZScgfSxcbiAgICAgICAgICAgICAgICAnU2hvdyB5b3VyIHByaWRlLiBEaXNwbGF5IHlvdXIgdGFsZW50cy4gJyxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZm9udC13aGl0ZScgfSxcbiAgICAgICAgICAgICAgICAgICdSZXAgeW91ciBjaXR5LidcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBOdWxsYW0gc2VtcGVyIG51bGxhIHZlbCBlbGl0IGdyYXZpZGEsIHZlbCBwbGFjZXJhdCB0dXJwaXMgY29udmFsbGlzLiBQcmFlc2VudCBldSBsb3JlbSBzdXNjaXBpdCwgZ3JhdmlkYSBsZW8gc2VkLCBsdWN0dXMgZXJhdC4gTnVsbGFtIGNvbnNlY3RldHVyLCB0b3J0b3IgYSBmYWNpbGlzaXMgbG9ib3J0aXMsIHZlbGl0IG1hc3NhIG1hdHRpcyByaXN1cywgZWdldCBpbXBlcmRpZXQgdmVsaXQgYXJjdSBub24gbWF1cmlzLiBNYXVyaXMgYmliZW5kdW0gYmliZW5kdW0gbGlndWxhLCBuZWMgbWF4aW11cyBzYXBpZW4gcG9ydGEgbm9uLidcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzZWN0aW9uLWNhbGxvdXRfX2N0YS1pdGVtcycgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICAgICAgeyB0bzogJy9wcm9kdWN0cycgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHNyYzogJy9pbWFnZXMvYnV0dG9uLXNob3AucG5nJywgYWx0OiAnU2hvcCBub3cnIH0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzZWFyY2gtYm94JyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXNlYXJjaCcgfSksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5ZXA6ICd0ZXh0JywgcGxhY2Vob2xkZXI6ICdLZXl3b3JkIFNlYXJjaCcgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgICAgICB7IHRvOiAnL3VwbG9hZCcgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHNyYzogJy9pbWFnZXMvYnV0dG9uLXVwbG9hZC5wbmcnLCBhbHQ6ICdTaG9wIG5vdycgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbnRhaW5lcicgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnaDMnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3RzLWdyaWQtdGl0bGUnIH0sXG4gICAgICAgICAgICAgICdXaGF0XFwncyBob3QgLyBXaGF0XFwncyBuZXcnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3RzLWdyaWQnIH0sXG4gICAgICAgICAgICAgIHByb2R1Y3RzLm1hcChmdW5jdGlvbiAocHJvZHVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfUHJvZHVjdEl0ZW0yLmRlZmF1bHQsIHsga2V5OiBwcm9kdWN0LmtleSwgYWRkVG9DYXJ0OiBmdW5jdGlvbiBhZGRUb0NhcnQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQWRkVG9DYXJ0KHByb2R1Y3QpO1xuICAgICAgICAgICAgICAgICAgfSwgaWQ6IHByb2R1Y3QuYXR0cnMucHJvZHVjdF9pZCwgdGl0bGU6IHByb2R1Y3QuYXR0cnMudGl0bGUsIGltYWdlOiBwcm9kdWN0LnNlbGVjdGVkVmFyaWFudC5pbWFnZVZhcmlhbnRzWzVdLnNyYyB9KTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xvYWRlcjIuZGVmYXVsdCwgbnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEluZGV4O1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBwcm9kdWN0czogc3RhdGUucHJvZHVjdHMuYWxsXG4gIH07XG59KShJbmRleCk7XG5cbi8qKiovIH0pLFxuLyogMTU5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9IZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7XG5cbnZhciBfSGVhZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0hlYWRlcik7XG5cbnZhciBfRm9vdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTYpO1xuXG52YXIgX0Zvb3RlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Gb290ZXIpO1xuXG52YXIgX3JlYWN0RG9jdW1lbnRNZXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb2N1bWVudE1ldGEpO1xuXG52YXIgX2NhcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Mik7XG5cbnZhciBfY2FydDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jYXJ0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgTWFpbiA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNYWluLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBNYWluKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1haW4pO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1haW4uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYWluKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICB0aXRsZTogJycsXG4gICAgICBjb250ZW50OiAnJ1xuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE1haW4sIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIG1ldGEgPSB7XG4gICAgICAgIHRpdGxlOiAnUmVwIFlvdXIgQ2l0eScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUmVwIFlvdXIgQ2l0eSBkZXNjcmlwdGlvbicsXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBjaGFyc2V0OiAndXRmLTgnXG4gICAgICAgIH0sXG4gICAgICAgIGF1dG86IHtcbiAgICAgICAgICBvZ3JhcGg6IHRydWVcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIHBhZ2VOYW1lID0gdGhpcy5wcm9wcy5sb2NhdGlvbi5wYXRobmFtZS5zdWJzdHIoMSkuc3BsaXQoJy8nKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBpZDogJ21haW4nLCBjbGFzc05hbWU6ICdwYWdlLScgKyAocGFnZU5hbWVbMF0gPyBwYWdlTmFtZVswXSArICcgc3VicGFnZScgOiAnaG9tZScpIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdERvY3VtZW50TWV0YTIuZGVmYXVsdCwgbWV0YSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9IZWFkZXIyLmRlZmF1bHQsIG51bGwpLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGlkOiAnbWFpbi1jb250YWluZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NhcnQyLmRlZmF1bHQsIG51bGwpLFxuICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0Zvb3RlcjIuZGVmYXVsdCwgbnVsbClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE1haW47XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1haW47XG5cbi8qKiovIH0pLFxuLyogMTYwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9Mb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblxudmFyIF9Mb2FkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9hZGVyKTtcblxudmFyIF9Qcm9kdWN0SXRlbSA9IF9fd2VicGFja19yZXF1aXJlX18oODUpO1xuXG52YXIgX1Byb2R1Y3RJdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb2R1Y3RJdGVtKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLFxuICAgIGNvbm5lY3QgPSBfcmVxdWlyZS5jb25uZWN0O1xuXG52YXIgYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgUHJvZHVjdHMgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUHJvZHVjdHMsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFByb2R1Y3RzKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm9kdWN0cyk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb2R1Y3RzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvZHVjdHMpKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm9kdWN0cywgW3tcbiAgICBrZXk6ICdoYW5kbGVBZGRUb0NhcnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVBZGRUb0NhcnQocHJvZHVjdCkge1xuICAgICAgdmFyIGRpc3BhdGNoID0gdGhpcy5wcm9wcy5kaXNwYXRjaDtcblxuICAgICAgZGlzcGF0Y2goYWN0aW9ucy5zdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0ocHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQsIDEpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHByb2R1Y3RzID0gdGhpcy5wcm9wcy5wcm9kdWN0cztcblxuXG4gICAgICBpZiAocHJvZHVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjb250YWluZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NtYWxsLTEyIG1lZGl1bS0zIGNvbHVtbnMnIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICduYXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdHMtbmF2JyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2g0JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdHMtbmF2X19oZWFkbGluZScgfSxcbiAgICAgICAgICAgICAgICAgICdDYXRlZ29yaWVzJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAndWwnLFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAnQ2l0eSAvIHN0YXRlJ1xuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAnU3BvcnRzJ1xuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAnSG9iYmllcydcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgJ011c2ljJ1xuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAnQW5pbWFscydcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgJ1Nob3cgYWxsJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnaDQnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0cy1uYXZfX2hlYWRsaW5lJyB9LFxuICAgICAgICAgICAgICAgICAgJ1N0eWxlJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdHMtbmF2X19zZWFyY2gnIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgcGxhY2Vob2xkZXI6ICdTZWxlY3Qgc3R5bGUnIH0pLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdzdWJtaXQnLCBjbGFzc05hbWU6ICdwcm9kdWN0cy1uYXZfX3NlYXJjaC1idXR0b24nIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS1zZWFyY2gnIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdoNCcsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3RzLW5hdl9faGVhZGxpbmUnIH0sXG4gICAgICAgICAgICAgICAgICAnU2VhcmNoJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdHMtbmF2X19zZWFyY2gnIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgcGxhY2Vob2xkZXI6ICdFbnRlciBrZXl3b3JkcycgfSksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ3N1Ym1pdCcsIGNsYXNzTmFtZTogJ3Byb2R1Y3RzLW5hdl9fc2VhcmNoLWJ1dHRvbicgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXNlYXJjaCcgfSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc21hbGwtMTIgbWVkaXVtLTkgY29sdW1uJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3RzLWdyaWQnIH0sXG4gICAgICAgICAgICAgICAgcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChwcm9kdWN0KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Byb2R1Y3RJdGVtMi5kZWZhdWx0LCB7IGtleTogcHJvZHVjdC5rZXksIGFkZFRvQ2FydDogZnVuY3Rpb24gYWRkVG9DYXJ0KCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQWRkVG9DYXJ0KHByb2R1Y3QpO1xuICAgICAgICAgICAgICAgICAgICB9LCBpZDogcHJvZHVjdC5hdHRycy5wcm9kdWN0X2lkLCB0aXRsZTogcHJvZHVjdC5hdHRycy50aXRsZSwgaW1hZ2U6IHByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LmltYWdlVmFyaWFudHNbNF0uc3JjIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xvYWRlcjIuZGVmYXVsdCwgbnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb2R1Y3RzO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBwcm9kdWN0czogc3RhdGUucHJvZHVjdHMuYWxsXG4gIH07XG59KShQcm9kdWN0cyk7XG5cbi8qKiovIH0pLFxuLyogMTYxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCksXG4gICAgY29ubmVjdCA9IF9yZXF1aXJlLmNvbm5lY3Q7XG5cbnZhciBwcm9kdWN0QWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xudmFyIGNhcnRBY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBVcGxvYWQgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoVXBsb2FkLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBVcGxvYWQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVwbG9hZCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVwbG9hZC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFVwbG9hZCkpLmNhbGwodGhpcykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFVwbG9hZCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2ggPSB0aGlzLnByb3BzLmRpc3BhdGNoO1xuXG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyIHRleHQtY2VudGVyJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW1nJywgeyBzcmM6ICcvaW1hZ2VzL3VwbG9hZC1wbGFjZWhvbGRlci5wbmcnIH0pXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBVcGxvYWQ7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjb25uZWN0KGZ1bmN0aW9uIChzdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIGFjdGl2ZVByb2R1Y3Q6IHN0YXRlLnByb2R1Y3RzLmFjdGl2ZVxuICB9O1xufSkoVXBsb2FkKTtcblxuLyoqKi8gfSksXG4vKiAxNjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Nob3BpZnlBUEkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblxudmFyIF9zaG9waWZ5QVBJMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Nob3BpZnlBUEkpO1xuXG52YXIgX0NhcnRJdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTMpO1xuXG52YXIgX0NhcnRJdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NhcnRJdGVtKTtcblxudmFyIF9mb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblxudmFyIF9mb3JtYXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm9ybWF0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLFxuICAgIGNvbm5lY3QgPSBfcmVxdWlyZS5jb25uZWN0O1xuXG52YXIgYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgQ2FydCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDYXJ0LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDYXJ0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYXJ0KTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDYXJ0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2FydCkpLmNhbGwodGhpcykpO1xuXG4gICAgdmFyIGRpc3BhdGNoID0gdm9pZCAwO1xuICAgIHZhciBoYW5kbGVDaGVja291dCA9IF90aGlzLmhhbmRsZUNoZWNrb3V0KCk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENhcnQsIFt7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgdGhpcy5kaXNwYXRjaCA9IHRoaXMucHJvcHMuZGlzcGF0Y2g7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaGFuZGxlQ2xvc2VDYXJ0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xvc2VDYXJ0KCkge1xuICAgICAgdGhpcy5kaXNwYXRjaChhY3Rpb25zLmNsb3NlQ2FydCgpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdoYW5kbGVDaGVja291dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNoZWNrb3V0KCkge1xuICAgICAgd2luZG93Lm9wZW4oX3Nob3BpZnlBUEkyLmRlZmF1bHQuY2FydC5jaGVja291dFVybCwgJ19zZWxmJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyRjYXJ0ID0gdGhpcy5wcm9wcy5jYXJ0LFxuICAgICAgICAgIGlzT3BlbiA9IF9wcm9wcyRjYXJ0LmlzT3BlbixcbiAgICAgICAgICBsaW5lSXRlbXMgPSBfcHJvcHMkY2FydC5saW5lSXRlbXMsXG4gICAgICAgICAgbGluZUl0ZW1Db3VudCA9IF9wcm9wcyRjYXJ0LmxpbmVJdGVtQ291bnQsXG4gICAgICAgICAgc3VidG90YWwgPSBfcHJvcHMkY2FydC5zdWJ0b3RhbDtcblxuICAgICAgdmFyIHJlbmRlckxpbmVJdGVtcyA9IGZ1bmN0aW9uIHJlbmRlckxpbmVJdGVtcygpIHtcbiAgICAgICAgaWYgKGxpbmVJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIGxpbmVJdGVtcy5tYXAoZnVuY3Rpb24gKGxpbmVJdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NhcnRJdGVtMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgIGtleTogbGluZUl0ZW0uaWQsXG4gICAgICAgICAgICAgIGl0ZW06IGxpbmVJdGVtLFxuICAgICAgICAgICAgICBxdWFudGl0eTogbGluZUl0ZW0ucXVhbnRpdHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogXCJjYXJ0IFwiICsgKGlzT3BlbiA/ICdqcy1hY3RpdmUnIDogJycpIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1zZWN0aW9uIGNhcnQtc2VjdGlvbi0tdG9wJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2gyJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC10aXRsZScgfSxcbiAgICAgICAgICAgICdZb3VyIGNhcnQ6ICcsXG4gICAgICAgICAgICBpc09wZW5cbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2J0bi0tY2xvc2UnIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgb25DbGljazogdGhpcy5oYW5kbGVDbG9zZUNhcnQuYmluZCh0aGlzKSB9LFxuICAgICAgICAgICAgICAnXFx4RDcnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoaWRlJyB9LFxuICAgICAgICAgICAgICAnQ2xvc2UnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtZm9ybScgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWl0ZW0tY29udGFpbmVyIGNhcnQtc2VjdGlvbicgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgcmVuZGVyTGluZUl0ZW1zKClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtYm90dG9tJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtaW5mbyBjbGVhcmZpeCBjYXJ0LXNlY3Rpb24nIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndHlwZS0tY2FwcyBjYXJ0LWluZm9fX3RvdGFsIGNhcnQtaW5mb19fc21hbGwnIH0sXG4gICAgICAgICAgICAgICAgJ1RvdGFsJ1xuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtaW5mb19fcHJpY2luZycgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1pbmZvX19zbWFsbCBjYXJ0LWluZm9fX3RvdGFsJyB9LFxuICAgICAgICAgICAgICAgICAgJ1VTRCdcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcmljaW5nIHByaWNpbmctLW5vLXBhZGRpbmcnIH0sXG4gICAgICAgICAgICAgICAgICBfZm9ybWF0Mi5kZWZhdWx0LmFzTW9uZXkoc3VidG90YWwpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtYWN0aW9ucy1jb250YWluZXIgY2FydC1zZWN0aW9uIHR5cGUtLWNlbnRlcicgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWRpc2NvdW50LW5vdGljZSBjYXJ0LWluZm9fX3NtYWxsJyB9LFxuICAgICAgICAgICAgICAgICdTaGlwcGluZyBhbmQgZGlzY291bnQgY29kZXMgYXJlIGFkZGVkIGF0IGNoZWNrb3V0LidcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0biBidG4tLWNhcnQtY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIGlkOiAnY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdjaGVja291dCcsXG4gICAgICAgICAgICAgICAgdmFsdWU6ICdDaGVja291dCcsXG4gICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDaGVja291dFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ2FydDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNvbm5lY3QoZnVuY3Rpb24gKHN0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgY2FydDogc3RhdGUuY2FydFxuICB9O1xufSkoQ2FydCk7XG5cbi8qKiovIH0pLFxuLyogMTYzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgX3JlYWN0RG9jdW1lbnRNZXRhMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9jdW1lbnRNZXRhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQWJvdXQgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQWJvdXQsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEFib3V0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBYm91dCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEFib3V0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQWJvdXQpKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhBYm91dCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdzZWN0aW9uJyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdzZWN0aW9uJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbnRhaW5lcicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgJ0Fib3V0IHVzJ1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQWJvdXQ7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFib3V0O1xuXG4vKioqLyB9KSxcbi8qIDE2NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvY3VtZW50TWV0YSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIENvbnRhY3QgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQ29udGFjdCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ29udGFjdCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udGFjdCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvbnRhY3QuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb250YWN0KSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ29udGFjdCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdzZWN0aW9uJyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdzZWN0aW9uJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbnRhaW5lcicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgJ0NvbnRhY3QnXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDb250YWN0O1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb250YWN0O1xuXG4vKioqLyB9KSxcbi8qIDE2NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvY3VtZW50TWV0YSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIExvZ2luID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKExvZ2luLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBMb2dpbigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9naW4pO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMb2dpbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKExvZ2luKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTG9naW4sIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnc2VjdGlvbicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnc2VjdGlvbicgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjb250YWluZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICdMb2dpbidcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2Zvcm0nLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBwbGFjZWhvbGRlcjogJ0VtYWlsJyB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3Bhc3N3b3JkJywgcGxhY2Vob2xkZXI6ICdQYXNzd29yZCcgfSksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICdzdWJtaXQnLCBjbGFzc05hbWU6ICdidXR0b24nLCB2YWx1ZTogJ0xvZ2luJyB9KVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTG9naW47XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IExvZ2luO1xuXG4vKioqLyB9KSxcbi8qIDE2NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvY3VtZW50TWV0YSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIE1hcCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNYXAsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIE1hcCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFwKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWFwLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFwKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTWFwLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2gxJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAnTWFwIHBhZ2UnXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBNYXA7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hcDtcblxuLyoqKi8gfSksXG4vKiAxNjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9jdW1lbnRNZXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb2N1bWVudE1ldGEpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBPcmRlclN0YXR1cyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhPcmRlclN0YXR1cywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gT3JkZXJTdGF0dXMoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9yZGVyU3RhdHVzKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoT3JkZXJTdGF0dXMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihPcmRlclN0YXR1cykpLmNhbGwodGhpcykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE9yZGVyU3RhdHVzLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2gxJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAnT3JkZXIgU3RhdHVzIHBhZ2UnXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBPcmRlclN0YXR1cztcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gT3JkZXJTdGF0dXM7XG5cbi8qKiovIH0pLFxuLyogMTY4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBwcm9kdWN0c1JlZHVjZXIgPSBleHBvcnRzLnByb2R1Y3RzUmVkdWNlciA9IGZ1bmN0aW9uIHByb2R1Y3RzUmVkdWNlcigpIHtcbiAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7IGFsbDogW10sIGFjdGl2ZTogbnVsbCB9O1xuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzWzFdO1xuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdBRERfUFJPRFVDVFMnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBhbGw6IGFjdGlvbi5wcm9kdWN0c1xuICAgICAgfSk7XG4gICAgY2FzZSAnU0VUX0FDVElWRV9QUk9EVUNUJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgYWN0aXZlOiBfZXh0ZW5kcyh7fSwgc3RhdGUuYWN0aXZlLCB7XG4gICAgICAgICAgZmV0Y2hlZDogdHJ1ZSxcbiAgICAgICAgICBvcHRpb25zOiBhY3Rpb24ub3B0aW9uc1xuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgY2FzZSAnQ0xFQVJfQUNUSVZFX1BST0RVQ1QnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBhY3RpdmU6IG51bGxcbiAgICAgIH0pO1xuICAgIGNhc2UgJ1VQREFURV9BQ1RJVkVfUFJPRFVDVF9PUFRJT05TJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgYWN0aXZlOiBfZXh0ZW5kcyh7fSwgc3RhdGUuYWN0aXZlLCB7XG4gICAgICAgICAgb3B0aW9uczogYWN0aW9uLm9wdGlvbnNcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbnZhciBjb2xsZWN0aW9uc1JlZHVjZXIgPSBleHBvcnRzLmNvbGxlY3Rpb25zUmVkdWNlciA9IGZ1bmN0aW9uIGNvbGxlY3Rpb25zUmVkdWNlcigpIHtcbiAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7IGFsbDogW10sIGFjdGl2ZTogbnVsbCB9O1xuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzWzFdO1xuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdBRERfQ09MTEVDVElPTlMnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBhbGw6IGFjdGlvbi5jb2xsZWN0aW9uc1xuICAgICAgfSk7XG4gICAgY2FzZSAnU0VUX0FDVElWRV9DT0xMRUNUSU9OJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgYWN0aXZlOiBhY3Rpb24ucGFyc2VkQ29sbGVjdGlvblxuICAgICAgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxudmFyIGNhcnRSZWR1Y2VyID0gZXhwb3J0cy5jYXJ0UmVkdWNlciA9IGZ1bmN0aW9uIGNhcnRSZWR1Y2VyKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHsgaXNPcGVuOiBmYWxzZSwgbGluZUl0ZW1zOiBbXSB9O1xuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzWzFdO1xuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAvLyBjYXNlICdSRVNUT1JFX1BSRVZJT1VTX0NBUlQnOlxuICAgIC8vICAgcmV0dXJuIGFjdGlvbi5yZW1vdGVDYXJ0O1xuICAgIGNhc2UgJ1NFVF9JTklUSUFMX0NBUlRfU1RBVEUnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBhY3Rpb24ubG9jYWxDYXJ0KTtcbiAgICBjYXNlICdVUERBVEVfQ0FSVF9JVEVNUyc6XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0YXRlLCB7XG4gICAgICAgIGxpbmVJdGVtczogYWN0aW9uLnVwZGF0ZWRDYXJ0SXRlbXNcbiAgICAgIH0pO1xuICAgIGNhc2UgJ1VQREFURV9DQVJUX0lURU1TX0NPVU5UJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgbGluZUl0ZW1zQ291bnQ6IGFjdGlvbi51cGRhdGVkQ2FydEl0ZW1zQ291bnRcbiAgICAgIH0pO1xuICAgIGNhc2UgJ1VQREFURV9DQVJUX1NVQlRPVEFMJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgc3VidG90YWw6IGFjdGlvbi5uZXdTdWJ0b3RhbFxuICAgICAgfSk7XG4gICAgY2FzZSAnT1BFTl9DQVJUJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgaXNPcGVuOiB0cnVlXG4gICAgICB9KTtcbiAgICBjYXNlICdDTE9TRV9DQVJUJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxudmFyIG5hdlJlZHVjZXIgPSBleHBvcnRzLm5hdlJlZHVjZXIgPSBmdW5jdGlvbiBuYXZSZWR1Y2VyKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHsgc2hvd0Nsb3NlOiBmYWxzZSwgc2hvd05hdjogZmFsc2UgfTtcbiAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnVE9HR0xFX05BVl9JQ09OJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgc2hvd0Nsb3NlOiAhc3RhdGUuc2hvd0Nsb3NlLFxuICAgICAgICBzaG93TmF2OiBzdGF0ZS5zaG93TmF2XG4gICAgICB9KTtcbiAgICBjYXNlICdUT0dHTEVfTkFWJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgc2hvd0Nsb3NlOiAhc3RhdGUuc2hvd0Nsb3NlLFxuICAgICAgICBzaG93TmF2OiAhc3RhdGUuc2hvd05hdlxuICAgICAgfSk7XG4gICAgY2FzZSAnQ0xPU0VfTkFWJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgc2hvd05hdjogZmFsc2VcbiAgICAgIH0pO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogMTY5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gcGxhY2VIb2xkZXJzQ291bnQgKGI2NCkge1xuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuICB9XG5cbiAgLy8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcbiAgLy8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuICAvLyByZXByZXNlbnQgb25lIGJ5dGVcbiAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG4gIC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2VcbiAgcmV0dXJuIGI2NFtsZW4gLSAyXSA9PT0gJz0nID8gMiA6IGI2NFtsZW4gLSAxXSA9PT0gJz0nID8gMSA6IDBcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuICByZXR1cm4gYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxufVxuXG5mdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7XG4gIHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG4gIHBsYWNlSG9sZGVycyA9IHBsYWNlSG9sZGVyc0NvdW50KGI2NClcblxuICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG4gIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcbiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuXG5cbiAgdmFyIEwgPSAwXG5cbiAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgb3V0cHV0ID0gJydcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpKSlcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXVxuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDJdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gJz09J1xuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pXG4gICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMTBdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXVxuICAgIG91dHB1dCArPSAnPSdcbiAgfVxuXG4gIHBhcnRzLnB1c2gob3V0cHV0KVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKVxufVxuXG5cbi8qKiovIH0pLFxuLyogMTcwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cblxuXG52YXIgYmFzZTY0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjkpXG52YXIgaWVlZTc1NCA9IF9fd2VicGFja19yZXF1aXJlX18oMTk0KVxudmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSlcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuLypcbiAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cbiAqL1xuZXhwb3J0cy5rTWF4TGVuZ3RoID0ga01heExlbmd0aCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuX19wcm90b19fID0ge19fcHJvdG9fXzogVWludDhBcnJheS5wcm90b3R5cGUsIGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfX1cbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG4gIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuICAgID8gMHg3ZmZmZmZmZlxuICAgIDogMHgzZmZmZmZmZlxufVxuXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXIgKHRoYXQsIGxlbmd0aCkge1xuICBpZiAoa01heExlbmd0aCgpIDwgbGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcbiAgfVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICBpZiAodGhhdCA9PT0gbnVsbCkge1xuICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICAgIH1cbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcbiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcbiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cbiAqL1xuXG5mdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKVxuICB9XG4gIHJldHVybiBmcm9tKHRoaXMsIGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxuLy8gVE9ETzogTGVnYWN5LCBub3QgbmVlZGVkIGFueW1vcmUuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHZlcnNpb24uXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gZnJvbSAodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcbiAgfVxuXG4gIHJldHVybiBmcm9tT2JqZWN0KHRoYXQsIHZhbHVlKVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG4gKiBpZiB2YWx1ZSBpcyBhIG51bWJlci5cbiAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSlcbiAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuICogQnVmZmVyLmZyb20oYnVmZmVyKVxuICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pXG4gKiovXG5CdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBmcm9tKG51bGwsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG4gIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJlxuICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7XG4gICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTdcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywge1xuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJylcbiAgfVxufVxuXG5mdW5jdGlvbiBhbGxvYyAodGhhdCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICBpZiAoc2l6ZSA8PSAwKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuICB9XG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xuICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcbiAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcbiAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgICA6IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwpXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2MobnVsbCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG59XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlICh0aGF0LCBzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG4gICAgICB0aGF0W2ldID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gU2xvd0J1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICovXG5CdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgfVxuXG4gIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxuICB9XG5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXG4gIHZhciBhY3R1YWwgPSB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cbiAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7XG4gICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsXG4gICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cbiAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJylcbiAgICB0aGF0ID0gdGhhdC5zbGljZSgwLCBhY3R1YWwpXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG4gIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXG4gIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ2xlbmd0aFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChieXRlT2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgbGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcbiAgfSBlbHNlIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gYXJyYXlcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMFxuICAgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuKVxuXG4gICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhhdFxuICAgIH1cblxuICAgIG9iai5jb3B5KHRoYXQsIDAsIDAsIGxlbilcbiAgICByZXR1cm4gdGhhdFxuICB9XG5cbiAgaWYgKG9iaikge1xuICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8ICdsZW5ndGgnIGluIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApXG4gICAgICB9XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG4gICAgfVxuXG4gICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpXG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpXG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxXG4gICAgbGVuZ3RoID0gMFxuICB9XG4gIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aClcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgIHggPSBhW2ldXG4gICAgICB5ID0gYltpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnbGF0aW4xJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYnVmID0gbGlzdFtpXVxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gICAgfVxuICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKVxuICAgIHBvcyArPSBidWYubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHN0cmluZyA9ICcnICsgc3RyaW5nXG4gIH1cblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsZW5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0IFwidGhpcy5sZW5ndGggPD0gTUFYX1VJTlQzMlwiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHlcbiAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblxuICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmRcbiAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLFxuICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcbiAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cbiAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoZW5kIDw9IDApIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuXG4gIGVuZCA+Pj49IDBcbiAgc3RhcnQgPj4+PSAwXG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlXG5cbmZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHtcbiAgdmFyIGkgPSBiW25dXG4gIGJbbl0gPSBiW21dXG4gIGJbbV0gPSBpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSAyICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgNCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDggIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KVxuICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KVxuICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIH1cblxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMFxuICB9XG4gIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG4gICAgcmV0dXJuIC0xXG4gIH1cbiAgaWYgKHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBzdGFydCA+Pj49IDBcbiAgZW5kID4+Pj0gMFxuICB0aGlzU3RhcnQgPj4+PSAwXG4gIHRoaXNFbmQgPj4+PSAwXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblxuICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcbiAgdmFyIHkgPSBlbmQgLSBzdGFydFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZClcbiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG4gICAgICB4ID0gdGhpc0NvcHlbaV1cbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuLy8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC5cbi8vXG4vLyBBcmd1bWVudHM6XG4vLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaFxuLy8gLSB2YWwgLSBhIHN0cmluZywgQnVmZmVyLCBvciBudW1iZXJcbi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuLy8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmdcbi8vIC0gZGlyIC0gdHJ1ZSBmb3IgaW5kZXhPZiwgZmFsc2UgZm9yIGxhc3RJbmRleE9mXG5mdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG4gIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldFxuICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG4gICAgYnl0ZU9mZnNldCA9IDBcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7XG4gICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIH1cbiAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuICBpZiAoaXNOYU4oYnl0ZU9mZnNldCkpIHtcbiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcbiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG4gICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcbiAgICBlbHNlIHJldHVybiAtMVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJlxuICAgICAgICB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGRpcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcbn1cblxuZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICB2YXIgaW5kZXhTaXplID0gMVxuICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aFxuICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXG4gIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fFxuICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG4gICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9XG4gICAgICBpbmRleFNpemUgPSAyXG4gICAgICBhcnJMZW5ndGggLz0gMlxuICAgICAgdmFsTGVuZ3RoIC89IDJcbiAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkge1xuICAgIGlmIChpbmRleFNpemUgPT09IDEpIHtcbiAgICAgIHJldHVybiBidWZbaV1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSlcbiAgICB9XG4gIH1cblxuICB2YXIgaVxuICBpZiAoZGlyKSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG4gICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleFxuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGhcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7XG4gICAgICAgICAgZm91bmQgPSBmYWxzZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKHBhcnNlZCkpIHJldHVybiBpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuICAgIClcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcbiAgdmFyIHJlcyA9IFtdXG5cbiAgdmFyIGkgPSBzdGFydFxuICB3aGlsZSAoaSA8IGVuZCkge1xuICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbFxuICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXG4gICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDJcbiAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxudmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwXG5cbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGhcbiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKVxuICB9XG5cbiAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxuICB2YXIgcmVzID0gJydcbiAgdmFyIGkgPSAwXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICBTdHJpbmcsXG4gICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG4gICAgKVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NilcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuXG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcbiAgICBzdGFydCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuXG4gICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICB2YXIgbmV3QnVmXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcbiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG4gICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkge1xuICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld0J1ZlxufVxuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG4gIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcbiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgdGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGhcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSArIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcbiAgICAgIHRhcmdldCxcbiAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcbiAgICAgIHRhcmdldFN0YXJ0XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBVc2FnZTpcbi8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSlcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcbiAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczpcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gc3RhcnRcbiAgICAgIHN0YXJ0ID0gMFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IGVuZFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcbiAgICAgIGlmIChjb2RlIDwgMjU2KSB7XG4gICAgICAgIHZhbCA9IGNvZGVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAyNTVcbiAgfVxuXG4gIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwXG5cbiAgaWYgKCF2YWwpIHZhbCA9IDBcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgICB0aGlzW2ldID0gdmFsXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG4gICAgICA/IHZhbFxuICAgICAgOiB1dGY4VG9CeXRlcyhuZXcgQnVmZmVyKHZhbCwgZW5jb2RpbmcpLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG4gICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiB0b0hleCAobikge1xuICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcbiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG59XG5cbmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7XG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGNvZGVQb2ludFxuICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgdmFyIGJ5dGVzID0gW11cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuICB9XG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHtcbiAgdmFyIGMsIGhpLCBsb1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGhpID0gYyA+PiA4XG4gICAgbG8gPSBjICUgMjU2XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pXG4gICAgYnl0ZUFycmF5LnB1c2goaGkpXG4gIH1cblxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIGlzbmFuICh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG59XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KSkpXG5cbi8qKiovIH0pLFxuLyogMTcxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTcyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnZhciBjYW5Vc2VET00gPSAhIShcbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgd2luZG93LmRvY3VtZW50ICYmXG4gIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50XG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNhblVzZURPTTtcblxuLyoqKi8gfSksXG4vKiAxNzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcHRzKSB7XG4gIHJldHVybiBuZXcgRWxlbWVudENsYXNzKG9wdHMpXG59XG5cbmZ1bmN0aW9uIGluZGV4T2YoYXJyLCBwcm9wKSB7XG4gIGlmIChhcnIuaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKHByb3ApXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspXG4gICAgaWYgKGFycltpXSA9PT0gcHJvcCkgcmV0dXJuIGlcbiAgcmV0dXJuIC0xXG59XG5cbmZ1bmN0aW9uIEVsZW1lbnRDbGFzcyhvcHRzKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBFbGVtZW50Q2xhc3MpKSByZXR1cm4gbmV3IEVsZW1lbnRDbGFzcyhvcHRzKVxuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKCFvcHRzKSBvcHRzID0ge31cblxuICAvLyBzaW1pbGFyIGRvaW5nIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgYnV0IHdvcmtzIGluIElFOFxuICBpZiAob3B0cy5ub2RlVHlwZSkgb3B0cyA9IHtlbDogb3B0c31cblxuICB0aGlzLm9wdHMgPSBvcHRzXG4gIHRoaXMuZWwgPSBvcHRzLmVsIHx8IGRvY3VtZW50LmJvZHlcbiAgaWYgKHR5cGVvZiB0aGlzLmVsICE9PSAnb2JqZWN0JykgdGhpcy5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5lbClcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKGVsLmNsYXNzTmFtZSA9PT0gXCJcIikgcmV0dXJuIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZVxuICB2YXIgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZS5zcGxpdCgnICcpXG4gIGlmIChpbmRleE9mKGNsYXNzZXMsIGNsYXNzTmFtZSkgPiAtMSkgcmV0dXJuIGNsYXNzZXNcbiAgY2xhc3Nlcy5wdXNoKGNsYXNzTmFtZSlcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJylcbiAgcmV0dXJuIGNsYXNzZXNcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKGVsLmNsYXNzTmFtZSA9PT0gXCJcIikgcmV0dXJuXG4gIHZhciBjbGFzc2VzID0gZWwuY2xhc3NOYW1lLnNwbGl0KCcgJylcbiAgdmFyIGlkeCA9IGluZGV4T2YoY2xhc3NlcywgY2xhc3NOYW1lKVxuICBpZiAoaWR4ID4gLTEpIGNsYXNzZXMuc3BsaWNlKGlkeCwgMSlcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJylcbiAgcmV0dXJuIGNsYXNzZXNcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoJyAnKVxuICByZXR1cm4gaW5kZXhPZihjbGFzc2VzLCBjbGFzc05hbWUpID4gLTFcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKHRoaXMuaGFzKGNsYXNzTmFtZSkpIHRoaXMucmVtb3ZlKGNsYXNzTmFtZSlcbiAgZWxzZSB0aGlzLmFkZChjbGFzc05hbWUpXG59XG5cblxuLyoqKi8gfSksXG4vKiAxNzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIVxuICogZW5xdWlyZS5qcyB2Mi4xLjEgLSBBd2Vzb21lIE1lZGlhIFF1ZXJpZXMgaW4gSmF2YVNjcmlwdFxuICogQ29weXJpZ2h0IChjKSAyMDE0IE5pY2sgV2lsbGlhbXMgLSBodHRwOi8vd2lja3kubmlsbGlhLm1zL2VucXVpcmUuanNcbiAqIExpY2Vuc2U6IE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXG4gKi9cblxuOyhmdW5jdGlvbiAobmFtZSwgY29udGV4dCwgZmFjdG9yeSkge1xuXHR2YXIgbWF0Y2hNZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhO1xuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShtYXRjaE1lZGlhKTtcblx0fVxuXHRlbHNlIGlmICh0cnVlKSB7XG5cdFx0IShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIChjb250ZXh0W25hbWVdID0gZmFjdG9yeShtYXRjaE1lZGlhKSk7XG5cdFx0fS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSksXG5cdFx0XHRcdF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0fVxuXHRlbHNlIHtcblx0XHRjb250ZXh0W25hbWVdID0gZmFjdG9yeShtYXRjaE1lZGlhKTtcblx0fVxufSgnZW5xdWlyZScsIHRoaXMsIGZ1bmN0aW9uIChtYXRjaE1lZGlhKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG4gICAgLypqc2hpbnQgdW51c2VkOmZhbHNlICovXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBpdGVyYXRpbmcgb3ZlciBhIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIGZuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFjaChjb2xsZWN0aW9uLCBmbikge1xuICAgICAgICB2YXIgaSAgICAgID0gMCxcbiAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgICAgY29udDtcblxuICAgICAgICBmb3IoaTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb250ID0gZm4oY29sbGVjdGlvbltpXSwgaSk7XG4gICAgICAgICAgICBpZihjb250ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrOyAvL2FsbG93IGVhcmx5IGV4aXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0YXJnZXQgb2JqZWN0IGlzIGFuIGFycmF5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IHRoZSBvYmplY3QgdW5kZXIgdGVzdFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgYXJyYXksIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXJyYXkodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHRhcmdldCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHRhcmdldCBvYmplY3QgaXMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCB0aGUgb2JqZWN0IHVuZGVyIHRlc3RcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGZ1bmN0aW9uLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxlZ2F0ZSB0byBoYW5kbGUgYSBtZWRpYSBxdWVyeSBiZWluZyBtYXRjaGVkIGFuZCB1bm1hdGNoZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMubWF0Y2ggY2FsbGJhY2sgZm9yIHdoZW4gdGhlIG1lZGlhIHF1ZXJ5IGlzIG1hdGNoZWRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy51bm1hdGNoXSBjYWxsYmFjayBmb3Igd2hlbiB0aGUgbWVkaWEgcXVlcnkgaXMgdW5tYXRjaGVkXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW29wdGlvbnMuc2V0dXBdIG9uZS10aW1lIGNhbGxiYWNrIHRyaWdnZXJlZCB0aGUgZmlyc3QgdGltZSBhIHF1ZXJ5IGlzIG1hdGNoZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmVyU2V0dXA9ZmFsc2VdIHNob3VsZCB0aGUgc2V0dXAgY2FsbGJhY2sgYmUgcnVuIGltbWVkaWF0ZWx5LCByYXRoZXIgdGhhbiBmaXJzdCB0aW1lIHF1ZXJ5IGlzIG1hdGNoZWQ/XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gUXVlcnlIYW5kbGVyKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgIW9wdGlvbnMuZGVmZXJTZXR1cCAmJiB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIFF1ZXJ5SGFuZGxlci5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHNldHVwIG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKHRoaXMub3B0aW9ucy5zZXR1cCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zZXR1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHNldHVwIGFuZCB0cmlnZ2VyaW5nIG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb24gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICF0aGlzLmluaXRpYWxpc2VkICYmIHRoaXMuc2V0dXAoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tYXRjaCAmJiB0aGlzLm9wdGlvbnMubWF0Y2goKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29vcmRpbmF0ZXMgdGhlIHVubWF0Y2ggZXZlbnQgZm9yIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb2ZmIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudW5tYXRjaCAmJiB0aGlzLm9wdGlvbnMudW5tYXRjaCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIGhhbmRsZXIgaXMgdG8gYmUgZGVzdHJveWVkLlxuICAgICAgICAgKiBkZWxlZ2F0ZXMgdG8gdGhlIGRlc3Ryb3kgb3IgdW5tYXRjaCBjYWxsYmFja3MsIGRlcGVuZGluZyBvbiBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRlc3Ryb3kgPyB0aGlzLm9wdGlvbnMuZGVzdHJveSgpIDogdGhpcy5vZmYoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyBlcXVhbGl0eSBieSByZWZlcmVuY2UuXG4gICAgICAgICAqIGlmIG9iamVjdCBpcyBzdXBwbGllZCBjb21wYXJlIG9wdGlvbnMsIGlmIGZ1bmN0aW9uLCBjb21wYXJlIG1hdGNoIGNhbGxiYWNrXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBmdW5jdGlvbn0gW3RhcmdldF0gdGhlIHRhcmdldCBmb3IgY29tcGFyaXNvblxuICAgICAgICAgKi9cbiAgICAgICAgZXF1YWxzIDogZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zID09PSB0YXJnZXQgfHwgdGhpcy5vcHRpb25zLm1hdGNoID09PSB0YXJnZXQ7XG4gICAgICAgIH1cblxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyBhIHNpbmdsZSBtZWRpYSBxdWVyeSwgbWFuYWdlcyBpdCdzIHN0YXRlIGFuZCByZWdpc3RlcmVkIGhhbmRsZXJzIGZvciB0aGlzIHF1ZXJ5XG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgdGhlIG1lZGlhIHF1ZXJ5IHN0cmluZ1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzVW5jb25kaXRpb25hbD1mYWxzZV0gd2hldGhlciB0aGUgbWVkaWEgcXVlcnkgc2hvdWxkIHJ1biByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGNvbmRpdGlvbnMgYXJlIG1ldC4gUHJpbWFyaWx5IGZvciBoZWxwaW5nIG9sZGVyIGJyb3dzZXJzIGRlYWwgd2l0aCBtb2JpbGUtZmlyc3QgZGVzaWduXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWVkaWFRdWVyeShxdWVyeSwgaXNVbmNvbmRpdGlvbmFsKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgdGhpcy5pc1VuY29uZGl0aW9uYWwgPSBpc1VuY29uZGl0aW9uYWw7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tcWwgPSBtYXRjaE1lZGlhKHF1ZXJ5KTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbihtcWwpIHtcbiAgICAgICAgICAgIHNlbGYubXFsID0gbXFsO1xuICAgICAgICAgICAgc2VsZi5hc3Nlc3MoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tcWwuYWRkTGlzdGVuZXIodGhpcy5saXN0ZW5lcik7XG4gICAgfVxuICAgIE1lZGlhUXVlcnkucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhZGQgYSBoYW5kbGVyIGZvciB0aGlzIHF1ZXJ5LCB0cmlnZ2VyaW5nIGlmIGFscmVhZHkgYWN0aXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGVyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIubWF0Y2ggY2FsbGJhY2sgZm9yIHdoZW4gcXVlcnkgaXMgYWN0aXZhdGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtoYW5kbGVyLnVubWF0Y2hdIGNhbGxiYWNrIGZvciB3aGVuIHF1ZXJ5IGlzIGRlYWN0aXZhdGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtoYW5kbGVyLnNldHVwXSBjYWxsYmFjayBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbiB3aGVuIGEgcXVlcnkgaGFuZGxlciBpcyByZWdpc3RlcmVkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2hhbmRsZXIuZGVmZXJTZXR1cD1mYWxzZV0gc2hvdWxkIHRoZSBzZXR1cCBjYWxsYmFjayBiZSBkZWZlcnJlZCB1bnRpbCB0aGUgZmlyc3QgdGltZSB0aGUgaGFuZGxlciBpcyBtYXRjaGVkP1xuICAgICAgICAgKi9cbiAgICAgICAgYWRkSGFuZGxlciA6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBxaCA9IG5ldyBRdWVyeUhhbmRsZXIoaGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2gocWgpO1xuXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXMoKSAmJiBxaC5vbigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZW1vdmVzIHRoZSBnaXZlbiBoYW5kbGVyIGZyb20gdGhlIGNvbGxlY3Rpb24sIGFuZCBjYWxscyBpdCdzIGRlc3Ryb3kgbWV0aG9kc1xuICAgICAgICAgKiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3QgfHwgZnVuY3Rpb259IGhhbmRsZXIgdGhlIGhhbmRsZXIgdG8gcmVtb3ZlXG4gICAgICAgICAqL1xuICAgICAgICByZW1vdmVIYW5kbGVyIDogZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgICAgIGVhY2goaGFuZGxlcnMsIGZ1bmN0aW9uKGgsIGkpIHtcbiAgICAgICAgICAgICAgICBpZihoLmVxdWFscyhoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBoLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFoYW5kbGVycy5zcGxpY2UoaSwxKTsgLy9yZW1vdmUgZnJvbSBhcnJheSBhbmQgZXhpdCBlYWNoIGVhcmx5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZSB3aGV0aGVyIHRoZSBtZWRpYSBxdWVyeSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIG1hdGNoXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIG1lZGlhIHF1ZXJ5IGNhbiBiZSBjb25zaWRlcmVkIGEgbWF0Y2gsIGZhbHNlIG90aGVyd2lzZVxuICAgICAgICAgKi9cbiAgICAgICAgbWF0Y2hlcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubXFsLm1hdGNoZXMgfHwgdGhpcy5pc1VuY29uZGl0aW9uYWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFycyBhbGwgaGFuZGxlcnMgYW5kIHVuYmluZHMgZXZlbnRzXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhciA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubXFsLnJlbW92ZUxpc3RlbmVyKHRoaXMubGlzdGVuZXIpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5sZW5ndGggPSAwOyAvL2NsZWFyIGFycmF5XG4gICAgICAgIH0sXG5cbiAgICAgICAgLypcbiAgICAgICAgICogQXNzZXNzZXMgdGhlIHF1ZXJ5LCB0dXJuaW5nIG9uIGFsbCBoYW5kbGVycyBpZiBpdCBtYXRjaGVzLCB0dXJuaW5nIHRoZW0gb2ZmIGlmIGl0IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICovXG4gICAgICAgIGFzc2VzcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXMubWF0Y2hlcygpID8gJ29uJyA6ICdvZmYnO1xuXG4gICAgICAgICAgICBlYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyW2FjdGlvbl0oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgZm9yIHJlZ2lzdHJhdGlvbiBvZiBxdWVyeSBoYW5kbGVycy5cbiAgICAgKiBNYW5hZ2VzIHRoZSBxdWVyeSBoYW5kbGVyJ3Mgc3RhdGUgYW5kIGlzIHJlc3BvbnNpYmxlIGZvciB3aXJpbmcgdXAgYnJvd3NlciBldmVudHNcbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lZGlhUXVlcnlEaXNwYXRjaCAoKSB7XG4gICAgICAgIGlmKCFtYXRjaE1lZGlhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21hdGNoTWVkaWEgbm90IHByZXNlbnQsIGxlZ2FjeSBicm93c2VycyByZXF1aXJlIGEgcG9seWZpbGwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucXVlcmllcyA9IHt9O1xuICAgICAgICB0aGlzLmJyb3dzZXJJc0luY2FwYWJsZSA9ICFtYXRjaE1lZGlhKCdvbmx5IGFsbCcpLm1hdGNoZXM7XG4gICAgfVxuXG4gICAgTWVkaWFRdWVyeURpc3BhdGNoLnByb3RvdHlwZSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgaGFuZGxlciBmb3IgdGhlIGdpdmVuIG1lZGlhIHF1ZXJ5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxIHRoZSBtZWRpYSBxdWVyeVxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBBcnJheSB8fCBGdW5jdGlvbn0gb3B0aW9ucyBlaXRoZXIgYSBzaW5nbGUgcXVlcnkgaGFuZGxlciBvYmplY3QsIGEgZnVuY3Rpb24sIG9yIGFuIGFycmF5IG9mIHF1ZXJ5IGhhbmRsZXJzXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMubWF0Y2ggZmlyZWQgd2hlbiBxdWVyeSBtYXRjaGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtvcHRpb25zLnVubWF0Y2hdIGZpcmVkIHdoZW4gYSBxdWVyeSBpcyBubyBsb25nZXIgbWF0Y2hlZFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy5zZXR1cF0gZmlyZWQgd2hlbiBoYW5kbGVyIGZpcnN0IHRyaWdnZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmVyU2V0dXA9ZmFsc2VdIHdoZXRoZXIgc2V0dXAgc2hvdWxkIGJlIHJ1biBpbW1lZGlhdGVseSBvciBkZWZlcnJlZCB1bnRpbCBxdWVyeSBpcyBmaXJzdCBtYXRjaGVkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3VsZERlZ3JhZGU9ZmFsc2VdIHdoZXRoZXIgdGhpcyBwYXJ0aWN1bGFyIG1lZGlhIHF1ZXJ5IHNob3VsZCBhbHdheXMgcnVuIG9uIGluY2FwYWJsZSBicm93c2Vyc1xuICAgICAgICAgKi9cbiAgICAgICAgcmVnaXN0ZXIgOiBmdW5jdGlvbihxLCBvcHRpb25zLCBzaG91bGREZWdyYWRlKSB7XG4gICAgICAgICAgICB2YXIgcXVlcmllcyAgICAgICAgID0gdGhpcy5xdWVyaWVzLFxuICAgICAgICAgICAgICAgIGlzVW5jb25kaXRpb25hbCA9IHNob3VsZERlZ3JhZGUgJiYgdGhpcy5icm93c2VySXNJbmNhcGFibGU7XG5cbiAgICAgICAgICAgIGlmKCFxdWVyaWVzW3FdKSB7XG4gICAgICAgICAgICAgICAgcXVlcmllc1txXSA9IG5ldyBNZWRpYVF1ZXJ5KHEsIGlzVW5jb25kaXRpb25hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vbm9ybWFsaXNlIHRvIG9iamVjdCBpbiBhbiBhcnJheVxuICAgICAgICAgICAgaWYoaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7IG1hdGNoIDogb3B0aW9ucyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIWlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gW29wdGlvbnNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWFjaChvcHRpb25zLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgcXVlcmllc1txXS5hZGRIYW5kbGVyKGhhbmRsZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB1bnJlZ2lzdGVycyBhIHF1ZXJ5IGFuZCBhbGwgaXQncyBoYW5kbGVycywgb3IgYSBzcGVjaWZpYyBoYW5kbGVyIGZvciBhIHF1ZXJ5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxIHRoZSBtZWRpYSBxdWVyeSB0byB0YXJnZXRcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3QgfHwgZnVuY3Rpb259IFtoYW5kbGVyXSBzcGVjaWZpYyBoYW5kbGVyIHRvIHVucmVnaXN0ZXJcbiAgICAgICAgICovXG4gICAgICAgIHVucmVnaXN0ZXIgOiBmdW5jdGlvbihxLCBoYW5kbGVyKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJpZXNbcV07XG5cbiAgICAgICAgICAgIGlmKHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgaWYoaGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeS5yZW1vdmVIYW5kbGVyKGhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVlcmllc1txXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcblxuXHRyZXR1cm4gbmV3IE1lZGlhUXVlcnlEaXNwYXRjaCgpO1xuXG59KSk7XG5cbi8qKiovIH0pLFxuLyogMTc1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE1IEplZCBXYXRzb24uXG4gIEJhc2VkIG9uIGNvZGUgdGhhdCBpcyBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICBBbGwgcmlnaHRzIHJlc2VydmVkLlxuKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBjYW5Vc2VET00gPSAhIShcblx0XHR0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuXHRcdHdpbmRvdy5kb2N1bWVudCAmJlxuXHRcdHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50XG5cdCk7XG5cblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0ge1xuXG5cdFx0Y2FuVXNlRE9NOiBjYW5Vc2VET00sXG5cblx0XHRjYW5Vc2VXb3JrZXJzOiB0eXBlb2YgV29ya2VyICE9PSAndW5kZWZpbmVkJyxcblxuXHRcdGNhblVzZUV2ZW50TGlzdGVuZXJzOlxuXHRcdFx0Y2FuVXNlRE9NICYmICEhKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IHdpbmRvdy5hdHRhY2hFdmVudCksXG5cblx0XHRjYW5Vc2VWaWV3cG9ydDogY2FuVXNlRE9NICYmICEhd2luZG93LnNjcmVlblxuXG5cdH07XG5cblx0aWYgKHRydWUpIHtcblx0XHQhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIEV4ZWN1dGlvbkVudmlyb25tZW50O1xuXHRcdH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IEV4ZWN1dGlvbkVudmlyb25tZW50O1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5FeGVjdXRpb25FbnZpcm9ubWVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50O1xuXHR9XG5cbn0oKSk7XG5cblxuLyoqKi8gfSksXG4vKiAxNzYgKi8sXG4vKiAxNzcgKi8sXG4vKiAxNzggKi8sXG4vKiAxNzkgKi8sXG4vKiAxODAgKi8sXG4vKiAxODEgKi8sXG4vKiAxODIgKi8sXG4vKiAxODMgKi8sXG4vKiAxODQgKi8sXG4vKiAxODUgKi8sXG4vKiAxODYgKi8sXG4vKiAxODcgKi8sXG4vKiAxODggKi8sXG4vKiAxODkgKi8sXG4vKiAxOTAgKi8sXG4vKiAxOTEgKi8sXG4vKiAxOTIgKi8sXG4vKiAxOTMgKi8sXG4vKiAxOTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG5cblxuLyoqKi8gfSksXG4vKiAxOTUgKi8sXG4vKiAxOTYgKi8sXG4vKiAxOTcgKi8sXG4vKiAxOTggKi8sXG4vKiAxOTkgKi8sXG4vKiAyMDAgKi8sXG4vKiAyMDEgKi8sXG4vKiAyMDIgKi8sXG4vKiAyMDMgKi8sXG4vKiAyMDQgKi8sXG4vKiAyMDUgKi8sXG4vKiAyMDYgKi8sXG4vKiAyMDcgKi8sXG4vKiAyMDggKi8sXG4vKiAyMDkgKi8sXG4vKiAyMTAgKi8sXG4vKiAyMTEgKi8sXG4vKiAyMTIgKi8sXG4vKiAyMTMgKi8sXG4vKiAyMTQgKi8sXG4vKiAyMTUgKi8sXG4vKiAyMTYgKi8sXG4vKiAyMTcgKi8sXG4vKiAyMTggKi8sXG4vKiAyMTkgKi8sXG4vKiAyMjAgKi8sXG4vKiAyMjEgKi8sXG4vKiAyMjIgKi8sXG4vKiAyMjMgKi8sXG4vKiAyMjQgKi8sXG4vKiAyMjUgKi8sXG4vKiAyMjYgKi8sXG4vKiAyMjcgKi8sXG4vKiAyMjggKi8sXG4vKiAyMjkgKi8sXG4vKiAyMzAgKi8sXG4vKiAyMzEgKi8sXG4vKiAyMzIgKi8sXG4vKiAyMzMgKi8sXG4vKiAyMzQgKi8sXG4vKiAyMzUgKi8sXG4vKiAyMzYgKi8sXG4vKiAyMzcgKi8sXG4vKiAyMzggKi8sXG4vKiAyMzkgKi8sXG4vKiAyNDAgKi8sXG4vKiAyNDEgKi8sXG4vKiAyNDIgKi8sXG4vKiAyNDMgKi8sXG4vKiAyNDQgKi8sXG4vKiAyNDUgKi8sXG4vKiAyNDYgKi8sXG4vKiAyNDcgKi8sXG4vKiAyNDggKi8sXG4vKiAyNDkgKi8sXG4vKiAyNTAgKi8sXG4vKiAyNTEgKi8sXG4vKiAyNTIgKi8sXG4vKiAyNTMgKi8sXG4vKiAyNTQgKi8sXG4vKiAyNTUgKi8sXG4vKiAyNTYgKi8sXG4vKiAyNTcgKi8sXG4vKiAyNTggKi8sXG4vKiAyNTkgKi8sXG4vKiAyNjAgKi8sXG4vKiAyNjEgKi8sXG4vKiAyNjIgKi8sXG4vKiAyNjMgKi8sXG4vKiAyNjQgKi8sXG4vKiAyNjUgKi8sXG4vKiAyNjYgKi8sXG4vKiAyNjcgKi8sXG4vKiAyNjggKi8sXG4vKiAyNjkgKi8sXG4vKiAyNzAgKi8sXG4vKiAyNzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgTkVXVEFCID0gJ19ibGFuayc7XG5cbnZhciBPdXRib3VuZExpbmsgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnT3V0Ym91bmRMaW5rJyxcbiAgcHJvcFR5cGVzOiB7XG4gICAgZXZlbnRMYWJlbDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gIH0sXG4gIHN0YXRpY3M6IHtcbiAgICB0cmFja0xpbms6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnNvbGUud2FybignZ2EgdHJhY2tpbmcgbm90IGVuYWJsZWQnKTtcbiAgICB9XG4gIH0sXG4gIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIHZhciBldmVudE1ldGEgPSB7IGxhYmVsOiBwcm9wcy5ldmVudExhYmVsIH07XG4gICAgT3V0Ym91bmRMaW5rLnRyYWNrTGluayhldmVudE1ldGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChwcm9wcy50YXJnZXQgPT09IE5FV1RBQikge1xuICAgICAgICB3aW5kb3cub3Blbihwcm9wcy50bywgTkVXVEFCKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcHJvcHMudG87XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAocHJvcHMub25DbGljaykge1xuICAgICAgcHJvcHMub25DbGljayhlKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCB0aGlzLnByb3BzLCB7XG4gICAgICBocmVmOiB0aGlzLnByb3BzLnRvLFxuICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDbGlja1xuICAgIH0pO1xuICAgIGRlbGV0ZSBwcm9wcy5ldmVudExhYmVsO1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdhJywgcHJvcHMpO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBPdXRib3VuZExpbms7XG5cblxuLyoqKi8gfSksXG4vKiAyNzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBSZWFjdCBHb29nbGUgQW5hbHl0aWNzIE1vZHVsZVxuICpcbiAqIEBwYWNrYWdlIHJlYWN0LWdhXG4gKiBAYXV0aG9yICBBZGFtIExvZnRpbmcgPGFkYW1AbW96aWxsYWZvdW5kYXRpb24ub3JnPlxuICogICAgICAgICAgQXR1bCBWYXJtYSA8YXR1bEBtb3ppbGxhZm91bmRhdGlvbi5vcmc+XG4gKi9cblxuLyoqXG4gKiBVdGlsaXRpZXNcbiAqL1xudmFyIGZvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjc0KTtcbnZhciByZW1vdmVMZWFkaW5nU2xhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3Nik7XG52YXIgdHJpbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KTtcblxudmFyIHdhcm4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMyk7XG52YXIgbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzMpO1xuXG52YXIgX2RlYnVnID0gZmFsc2U7XG52YXIgX3RpdGxlQ2FzZSA9IHRydWU7XG5cbnZhciBfZm9ybWF0ID0gZnVuY3Rpb24gKHMpIHtcbiAgcmV0dXJuIGZvcm1hdChzLCBfdGl0bGVDYXNlKTtcbn07XG5cbnZhciBSZWFjdEdBID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoZ2FUcmFja2luZ0lELCBvcHRpb25zKSB7XG4gICAgaWYgKCFnYVRyYWNraW5nSUQpIHtcbiAgICAgIHdhcm4oJ2dhVHJhY2tpbmdJRCBpcyByZXF1aXJlZCBpbiBpbml0aWFsaXplKCknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMuZGVidWcgJiYgb3B0aW9ucy5kZWJ1ZyA9PT0gdHJ1ZSkge1xuICAgICAgICBfZGVidWcgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy50aXRsZUNhc2UgPT09IGZhbHNlKSB7XG4gICAgICAgIF90aXRsZUNhc2UgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvXG4gICAgLy8ganNjczpkaXNhYmxlXG4gICAgKGZ1bmN0aW9uIChpLCBzLCBvLCBnLCByLCBhLCBtKSB7XG4gICAgICBpWydHb29nbGVBbmFseXRpY3NPYmplY3QnXSA9IHI7XG4gICAgICBpW3JdID0gaVtyXSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIChpW3JdLnEgPSBpW3JdLnEgfHwgW10pLnB1c2goYXJndW1lbnRzKTtcbiAgICAgIH0sIGlbcl0ubCA9IDEgKiBuZXcgRGF0ZSgpO1xuICAgICAgYSA9IHMuY3JlYXRlRWxlbWVudChvKSxcbiAgICAgICAgICBtID0gcy5nZXRFbGVtZW50c0J5VGFnTmFtZShvKVswXTtcbiAgICAgIGEuYXN5bmMgPSAxO1xuICAgICAgYS5zcmMgPSBnO1xuICAgICAgbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLCBtKTtcbiAgICB9KSh3aW5kb3csIGRvY3VtZW50LCAnc2NyaXB0JywgJ2h0dHBzOi8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qcycsICdnYScpO1xuICAgIC8vIGpzY3M6ZW5hYmxlXG5cbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdhT3B0aW9ucykge1xuICAgICAgZ2EoJ2NyZWF0ZScsIGdhVHJhY2tpbmdJRCwgb3B0aW9ucy5nYU9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnYSgnY3JlYXRlJywgZ2FUcmFja2luZ0lELCAnYXV0bycpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogZ2E6XG4gICAqIFJldHVybnMgdGhlIG9yaWdpbmFsIEdBIG9iamVjdC5cbiAgICovXG4gIGdhOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBnYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdhcmd1bWVudHNcXCcpOycpO1xuICAgICAgICBsb2coJ3dpdGggYXJndW1lbnRzOiAnICsgSlNPTi5zdHJpbmdpZnkoW10uc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIGdhO1xuICB9LFxuXG4gIC8qKlxuICAgKiBzZXQ6XG4gICAqIEdBIHRyYWNrZXIgc2V0IG1ldGhvZFxuICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGRzT2JqZWN0IC0gYSBmaWVsZC92YWx1ZSBwYWlyIG9yIGEgZ3JvdXAgb2YgZmllbGQvdmFsdWUgcGFpcnMgb24gdGhlIHRyYWNrZXJcbiAgICovXG4gIHNldDogZnVuY3Rpb24gKGZpZWxkc09iamVjdCkge1xuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmICghZmllbGRzT2JqZWN0KSB7XG4gICAgICAgIHdhcm4oJ2BmaWVsZHNPYmplY3RgIGlzIHJlcXVpcmVkIGluIC5zZXQoKScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZmllbGRzT2JqZWN0ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB3YXJuKCdFeHBlY3RlZCBgZmllbGRzT2JqZWN0YCBhcmcgdG8gYmUgYW4gT2JqZWN0Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGZpZWxkc09iamVjdCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHdhcm4oJ2VtcHR5IGBmaWVsZHNPYmplY3RgIGdpdmVuIHRvIC5zZXQoKScpO1xuICAgICAgfVxuXG4gICAgICBnYSgnc2V0JywgZmllbGRzT2JqZWN0KTtcblxuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdzZXRcXCcsIGZpZWxkc09iamVjdCk7Jyk7XG4gICAgICAgIGxvZygnd2l0aCBmaWVsZHNPYmplY3Q6ICcgKyBKU09OLnN0cmluZ2lmeShmaWVsZHNPYmplY3QpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIHNlbmQ6XG4gICAqIENsb25lIG9mIHRoZSBsb3cgbGV2ZWwgYGdhLnNlbmRgIG1ldGhvZFxuICAgKiBXQVJOSU5HOiBObyB2YWxpZGF0aW9ucyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhpc1xuICAgKiBAcGFyYW0gIHtPYmplY3R9IGZpZWxkT2JqZWN0IC0gZmllbGQgb2JqZWN0IGZvciB0cmFja2luZyBkaWZmZXJlbnQgYW5hbHl0aWNzXG4gICAqL1xuICBzZW5kOiBmdW5jdGlvbiAoZmllbGRPYmplY3QpIHtcbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBnYSgnc2VuZCcsIGZpZWxkT2JqZWN0KTtcblxuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdzZW5kXFwnLCBmaWVsZE9iamVjdCk7Jyk7XG4gICAgICAgIGxvZygnd2l0aCBmaWVsZE9iamVjdDogJyArIEpTT04uc3RyaW5naWZ5KGZpZWxkT2JqZWN0KSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBwYWdldmlldzpcbiAgICogQmFzaWMgR0EgcGFnZXZpZXcgdHJhY2tpbmdcbiAgICogQHBhcmFtICB7U3RyaW5nfSBwYXRoIC0gdGhlIGN1cnJlbnQgcGFnZSBwYWdlIGUuZy4gJy9hYm91dCdcbiAgICovXG4gIHBhZ2V2aWV3OiBmdW5jdGlvbiAocGF0aCkge1xuICAgIGlmICghcGF0aCkge1xuICAgICAgd2FybigncGF0aCBpcyByZXF1aXJlZCBpbiAucGFnZXZpZXcoKScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHBhdGggPSB0cmltKHBhdGgpO1xuICAgIGlmIChwYXRoID09PSAnJykge1xuICAgICAgd2FybigncGF0aCBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nIGluIC5wYWdldmlldygpJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZ2EoJ3NlbmQnLCAncGFnZXZpZXcnLCBwYXRoKTtcblxuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdzZW5kXFwnLCBcXCdwYWdldmlld1xcJywgcGF0aCk7Jyk7XG4gICAgICAgIGxvZygnd2l0aCBwYXRoOiAnICsgcGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBtb2RhbHZpZXc6XG4gICAqIGEgcHJveHkgdG8gYmFzaWMgR0EgcGFnZXZpZXcgdHJhY2tpbmcgdG8gY29uc2lzdGVudGx5IHRyYWNrXG4gICAqIG1vZGFsIHZpZXdzIHRoYXQgYXJlIGFuIGVxdWl2YWxlbnQgVVggdG8gYSB0cmFkaXRpb25hbCBwYWdldmlld1xuICAgKiBAcGFyYW0gIHtTdHJpbmd9IG1vZGFsTmFtZSBlLmcuICdhZGQtb3ItZWRpdC1jbHViJ1xuICAgKi9cbiAgbW9kYWx2aWV3OiBmdW5jdGlvbiAobW9kYWxOYW1lKSB7XG4gICAgaWYgKCFtb2RhbE5hbWUpIHtcbiAgICAgIHdhcm4oJ21vZGFsTmFtZSBpcyByZXF1aXJlZCBpbiAubW9kYWx2aWV3KG1vZGFsTmFtZSknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBtb2RhbE5hbWUgPSB0cmltKG1vZGFsTmFtZSk7XG4gICAgbW9kYWxOYW1lID0gcmVtb3ZlTGVhZGluZ1NsYXNoKG1vZGFsTmFtZSk7XG5cbiAgICBpZiAobW9kYWxOYW1lID09PSAnJykge1xuICAgICAgd2FybignbW9kYWxOYW1lIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmcgb3IgYSBzaW5nbGUgLyBpbiAubW9kYWx2aWV3KCknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBtb2RhbE5hbWUgPSB0cmltKG1vZGFsTmFtZSk7XG4gICAgICB2YXIgcGF0aCA9ICcvbW9kYWwvJyArIG1vZGFsTmFtZTtcbiAgICAgIGdhKCdzZW5kJywgJ3BhZ2V2aWV3JywgcGF0aCk7XG5cbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnc2VuZFxcJywgXFwncGFnZXZpZXdcXCcsIHBhdGgpOycpO1xuICAgICAgICBsb2coJ3dpdGggcGF0aDogJyArIHBhdGgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogdGltaW5nOlxuICAgKiBHQSB0aW1pbmdcbiAgICogQHBhcmFtIGFyZ3MuY2F0ZWdvcnkge1N0cmluZ30gcmVxdWlyZWRcbiAgICogQHBhcmFtIGFyZ3MudmFyaWFibGUge1N0cmluZ30gcmVxdWlyZWRcbiAgICogQHBhcmFtIGFyZ3MudmFsdWUgIHtJbnR9ICByZXF1aXJlZFxuICAgKiBAcGFyYW0gYXJncy5sYWJlbCAge1N0cmluZ30gcmVxdWlyZWRcbiAgICovXG4gIHRpbWluZzogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuY2F0ZWdvcnkgfHwgIWFyZ3MudmFyaWFibGVcbiAgICAgICAgICB8fCAhYXJncy52YWx1ZSB8fCB0eXBlb2YgYXJncy52YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2FybignYXJncy5jYXRlZ29yeSwgYXJncy52YXJpYWJsZSAnICtcbiAgICAgICAgICAgICAgJ0FORCBhcmdzLnZhbHVlIGFyZSByZXF1aXJlZCBpbiB0aW1pbmcoKSAnICtcbiAgICAgICAgICAgICAgJ0FORCBhcmdzLnZhbHVlIGhhcyB0byBiZSBhIG51bWJlcicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vUmVxdWlyZWQgRmllbGRzXG4gICAgICB2YXIgZmllbGRPYmplY3QgPSB7XG4gICAgICAgIGhpdFR5cGU6ICd0aW1pbmcnLFxuICAgICAgICB0aW1pbmdDYXRlZ29yeTogX2Zvcm1hdChhcmdzLmNhdGVnb3J5KSxcbiAgICAgICAgdGltaW5nVmFyOiBfZm9ybWF0KGFyZ3MudmFyaWFibGUpLFxuICAgICAgICB0aW1pbmdWYWx1ZTogYXJncy52YWx1ZVxuICAgICAgfTtcblxuICAgICAgaWYgKGFyZ3MubGFiZWwpIHtcbiAgICAgICAgZmllbGRPYmplY3QudGltaW5nTGFiZWwgPSBfZm9ybWF0KGFyZ3MubGFiZWwpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNlbmQoZmllbGRPYmplY3QpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogZXZlbnQ6XG4gICAqIEdBIGV2ZW50IHRyYWNraW5nXG4gICAqIEBwYXJhbSBhcmdzLmNhdGVnb3J5IHtTdHJpbmd9IHJlcXVpcmVkXG4gICAqIEBwYXJhbSBhcmdzLmFjdGlvbiB7U3RyaW5nfSByZXF1aXJlZFxuICAgKiBAcGFyYW0gYXJncy5sYWJlbCB7U3RyaW5nfSBvcHRpb25hbFxuICAgKiBAcGFyYW0gYXJncy52YWx1ZSB7SW50fSBvcHRpb25hbFxuICAgKiBAcGFyYW0gYXJncy5ub25JbnRlcmFjdGlvbiB7Ym9vbGVhbn0gb3B0aW9uYWxcbiAgICovXG4gIGV2ZW50OiBmdW5jdGlvbiAoYXJncykge1xuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcblxuICAgICAgLy8gU2ltcGxlIFZhbGlkYXRpb25cbiAgICAgIGlmICghYXJncyB8fCAhYXJncy5jYXRlZ29yeSB8fCAhYXJncy5hY3Rpb24pIHtcbiAgICAgICAgd2FybignYXJncy5jYXRlZ29yeSBBTkQgYXJncy5hY3Rpb24gYXJlIHJlcXVpcmVkIGluIGV2ZW50KCknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXF1aXJlZCBGaWVsZHNcbiAgICAgIHZhciBmaWVsZE9iamVjdCA9IHtcbiAgICAgICAgaGl0VHlwZTogJ2V2ZW50JyxcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogX2Zvcm1hdChhcmdzLmNhdGVnb3J5KSxcbiAgICAgICAgZXZlbnRBY3Rpb246IF9mb3JtYXQoYXJncy5hY3Rpb24pXG4gICAgICB9O1xuXG4gICAgICAvLyBPcHRpb25hbCBGaWVsZHNcbiAgICAgIGlmIChhcmdzLmxhYmVsKSB7XG4gICAgICAgIGZpZWxkT2JqZWN0LmV2ZW50TGFiZWwgPSBfZm9ybWF0KGFyZ3MubGFiZWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXJncy52YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3MudmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgd2FybignRXhwZWN0ZWQgYGFyZ3MudmFsdWVgIGFyZyB0byBiZSBhIE51bWJlci4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWVsZE9iamVjdC5ldmVudFZhbHVlID0gYXJncy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYXJncy5ub25JbnRlcmFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3Mubm9uSW50ZXJhY3Rpb24gIT09ICdib29sZWFuJykge1xuICAgICAgICAgIHdhcm4oJ2BhcmdzLm5vbkludGVyYWN0aW9uYCBtdXN0IGJlIGEgYm9vbGVhbi4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWVsZE9iamVjdC5ub25JbnRlcmFjdGlvbiA9IGFyZ3Mubm9uSW50ZXJhY3Rpb247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFyZ3MudHJhbnNwb3J0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJncy50cmFuc3BvcnQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgd2FybignYGFyZ3MudHJhbnNwb3J0YCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChbJ2JlYWNvbicsICd4aHInLCAnaW1hZ2UnXS5pbmRleE9mKGFyZ3MudHJhbnNwb3J0KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHdhcm4oJ2BhcmdzLnRyYW5zcG9ydGAgbXVzdCBiZSBlaXRoZXIgb25lIG9mIHRoZXNlIHZhbHVlczogYGJlYWNvbmAsIGB4aHJgIG9yIGBpbWFnZWAnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmaWVsZE9iamVjdC50cmFuc3BvcnQgPSBhcmdzLnRyYW5zcG9ydDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTZW5kIHRvIEdBXG4gICAgICB0aGlzLnNlbmQoZmllbGRPYmplY3QpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogZXhjZXB0aW9uOlxuICAgKiBHQSBleGNlcHRpb24gdHJhY2tpbmdcbiAgICogQHBhcmFtIGFyZ3MuZGVzY3JpcHRpb24ge1N0cmluZ30gb3B0aW9uYWxcbiAgICogQHBhcmFtIGFyZ3MuZmF0YWwge2Jvb2xlYW59IG9wdGlvbmFsXG4gICAqL1xuICBleGNlcHRpb246IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAvLyBSZXF1aXJlZCBGaWVsZHNcbiAgICAgIHZhciBmaWVsZE9iamVjdCA9IHtcbiAgICAgICAgaGl0VHlwZTogJ2V4Y2VwdGlvbidcbiAgICAgIH07XG5cbiAgICAgIC8vIE9wdGlvbmFsIEZpZWxkc1xuICAgICAgaWYgKGFyZ3MuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgZmllbGRPYmplY3QuZXhEZXNjcmlwdGlvbiA9IF9mb3JtYXQoYXJncy5kZXNjcmlwdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgYXJncy5mYXRhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzLmZhdGFsICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICB3YXJuKCdgYXJncy5mYXRhbGAgbXVzdCBiZSBhIGJvb2xlYW4uJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmllbGRPYmplY3QuZXhGYXRhbCA9IGFyZ3MuZmF0YWw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCB0byBHQVxuICAgICAgdGhpcy5zZW5kKGZpZWxkT2JqZWN0KTtcbiAgICB9XG4gIH0sXG5cbiAgcGx1Z2luOiB7XG4gICAgLyoqXG4gICAgICogcmVxdWlyZTpcbiAgICAgKiBHQSByZXF1aXJlcyBhIHBsdWdpblxuICAgICAqIEBwYXJhbSBuYW1lIHtTdHJpbmd9IGUuZy4gJ2Vjb21tZXJjZScgb3IgJ215cGx1Z2luJ1xuICAgICAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IG9wdGlvbmFsIGUuZyB7cGF0aDogJy9sb2cnLCBkZWJ1ZzogdHJ1ZX1cbiAgICAgKi9cbiAgICByZXF1aXJlOiBmdW5jdGlvbiAobmFtZSwgb3B0aW9ucykge1xuICAgICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAgIC8vIFJlcXVpcmVkIEZpZWxkc1xuICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICB3YXJuKCdgbmFtZWAgaXMgcmVxdWlyZWQgaW4gLnJlcXVpcmUoKScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG5hbWUgPSB0cmltKG5hbWUpO1xuICAgICAgICBpZiAobmFtZSA9PT0gJycpIHtcbiAgICAgICAgICB3YXJuKCdgbmFtZWAgY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZyBpbiAucmVxdWlyZSgpJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3B0aW9uYWwgRmllbGRzXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgd2FybignRXhwZWN0ZWQgYG9wdGlvbnNgIGFyZyB0byBiZSBhbiBPYmplY3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMob3B0aW9ucykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB3YXJuKCdFbXB0eSBgb3B0aW9uc2AgZ2l2ZW4gdG8gLnJlcXVpcmUoKScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGdhKCdyZXF1aXJlJywgbmFtZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdyZXF1aXJlXFwnLCBcXCcnICsgbmFtZSArICdcXCcsICcgKyBKU09OLnN0cmluZ2lmeShvcHRpb25zKSArICcpOycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnYSgncmVxdWlyZScsIG5hbWUpO1xuXG4gICAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwncmVxdWlyZVxcJywgXFwnJyArIG5hbWUgKyAnXFwnKTsnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZXhlY3V0ZTpcbiAgICAgKiBHQSBleGVjdXRlIGFjdGlvbiBmb3IgcGx1Z2luXG4gICAgICogVGFrZXMgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50c1xuICAgICAqIEBwYXJhbSBwbHVnaW5OYW1lIHtTdHJpbmd9IGUuZy4gJ2Vjb21tZXJjZScgb3IgJ215cGx1Z2luJ1xuICAgICAqIEBwYXJhbSBhY3Rpb24ge1N0cmluZ30gZS5nLiAnYWRkSXRlbScgb3IgJ215Q3VzdG9tQWN0aW9uJ1xuICAgICAqIEBwYXJhbSBhY3Rpb25UeXBlIHtTdHJpbmd9IG9wdGlvbmFsIGUuZy4gJ2RldGFpbCdcbiAgICAgKiBAcGFyYW0gcGF5bG9hZCB7T2JqZWN0fSBvcHRpb25hbCBlLmcgeyBpZDogJzF4NWUnLCBuYW1lIDogJ015IHByb2R1Y3QgdG8gdHJhY2snIH1cbiAgICAgKi9cbiAgICBleGVjdXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICAgIHZhciBwbHVnaW5OYW1lID0gYXJnc1swXTtcbiAgICAgIHZhciBhY3Rpb24gPSBhcmdzWzFdO1xuICAgICAgdmFyIHBheWxvYWQ7XG4gICAgICB2YXIgYWN0aW9uVHlwZTtcblxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIHBheWxvYWQgPSBhcmdzWzJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aW9uVHlwZSA9IGFyZ3NbMl07XG4gICAgICAgIHBheWxvYWQgPSBhcmdzWzNdO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGx1Z2luTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB3YXJuKCdFeHBlY3RlZCBgcGx1Z2luTmFtZWAgYXJnIHRvIGJlIGEgU3RyaW5nLicpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhY3Rpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgd2FybignRXhwZWN0ZWQgYGFjdGlvbmAgYXJnIHRvIGJlIGEgU3RyaW5nLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBjb21tYW5kID0gcGx1Z2luTmFtZSArICc6JyArIGFjdGlvbjtcbiAgICAgICAgICBwYXlsb2FkID0gcGF5bG9hZCB8fCBudWxsO1xuICAgICAgICAgIGlmIChhY3Rpb25UeXBlICYmIHBheWxvYWQpIHtcbiAgICAgICAgICAgIGdhKGNvbW1hbmQsIGFjdGlvblR5cGUsIHBheWxvYWQpO1xuICAgICAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCcnICsgY29tbWFuZCArICdcXCcpOycpO1xuICAgICAgICAgICAgICBsb2coJ2FjdGlvblR5cGU6IFwiJyArIGFjdGlvblR5cGUgKyAnXCIgd2l0aCBwYXlsb2FkOiAnICsgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAocGF5bG9hZCkge1xuICAgICAgICAgICAgZ2EoY29tbWFuZCwgcGF5bG9hZCk7XG4gICAgICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJycgKyBjb21tYW5kICsgJ1xcJyk7Jyk7XG4gICAgICAgICAgICAgIGxvZygnd2l0aCBwYXlsb2FkOiAnICsgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnYShjb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnJyArIGNvbW1hbmQgKyAnXFwnKTsnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogb3V0Ym91bmRMaW5rOlxuICAgKiBHQSBvdXRib3VuZExpbmsgdHJhY2tpbmdcbiAgICogQHBhcmFtIGFyZ3MubGFiZWwge1N0cmluZ30gZS5nLiB1cmwsIG9yICdDcmVhdGUgYW4gQWNjb3VudCdcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gaGl0Q2FsbGJhY2sgLSBDYWxsZWQgYWZ0ZXIgcHJvY2Vzc2luZyBhIGhpdC5cbiAgICovXG4gIG91dGJvdW5kTGluazogZnVuY3Rpb24gKGFyZ3MsIGhpdENhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBoaXRDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgd2FybignaGl0Q2FsbGJhY2sgZnVuY3Rpb24gaXMgcmVxdWlyZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgIC8vIFNpbXBsZSBWYWxpZGF0aW9uXG4gICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubGFiZWwpIHtcbiAgICAgICAgd2FybignYXJncy5sYWJlbCBpcyByZXF1aXJlZCBpbiBvdXRib3VuZExpbmsoKScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFJlcXVpcmVkIEZpZWxkc1xuICAgICAgdmFyIGZpZWxkT2JqZWN0ID0ge1xuICAgICAgICBoaXRUeXBlOiAnZXZlbnQnLFxuICAgICAgICBldmVudENhdGVnb3J5OiAnT3V0Ym91bmQnLFxuICAgICAgICBldmVudEFjdGlvbjogJ0NsaWNrJyxcbiAgICAgICAgZXZlbnRMYWJlbDogX2Zvcm1hdChhcmdzLmxhYmVsKVxuICAgICAgfTtcblxuICAgICAgdmFyIHNhZmV0eUNhbGxiYWNrQ2FsbGVkID0gZmFsc2U7XG4gICAgICB2YXIgc2FmZXR5Q2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyBhIGRlbGF5ZWQgcmVzcG9uc2UgZnJvbSBHQVxuICAgICAgICAvLyBjYXVzaW5nIGhpdENhbGxiYWNrIGZyb20gYmVpbmcgZmlyZWQgdHdpY2VcbiAgICAgICAgc2FmZXR5Q2FsbGJhY2tDYWxsZWQgPSB0cnVlO1xuXG4gICAgICAgIGhpdENhbGxiYWNrKCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBVc2luZyBhIHRpbWVvdXQgdG8gZW5zdXJlIHRoZSBleGVjdXRpb24gb2YgY3JpdGljYWwgYXBwbGljYXRpb24gY29kZVxuICAgICAgLy8gaW4gdGhlIGNhc2Ugd2hlbiB0aGUgR0Egc2VydmVyIG1pZ2h0IGJlIGRvd25cbiAgICAgIC8vIG9yIGFuIGFkIGJsb2NrZXIgcHJldmVudHMgc2VuZGluZyB0aGUgZGF0YVxuXG4gICAgICAvLyByZWdpc3RlciBzYWZldHkgbmV0IHRpbWVvdXQ6XG4gICAgICB2YXIgdCA9IHNldFRpbWVvdXQoc2FmZXR5Q2FsbGJhY2ssIDI1MCk7XG5cbiAgICAgIHZhciBjbGVhcmFibGVDYWxsYmFja0ZvckdBID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgIGlmICghc2FmZXR5Q2FsbGJhY2tDYWxsZWQpIHtcbiAgICAgICAgICBoaXRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBmaWVsZE9iamVjdC5oaXRDYWxsYmFjayA9IGNsZWFyYWJsZUNhbGxiYWNrRm9yR0E7XG5cbiAgICAgIC8vIFNlbmQgdG8gR0FcbiAgICAgIHRoaXMuc2VuZChmaWVsZE9iamVjdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGlmIGdhIGlzIG5vdCBkZWZpbmVkLCByZXR1cm4gdGhlIGNhbGxiYWNrIHNvIHRoZSBhcHBsaWNhdGlvblxuICAgICAgLy8gY29udGludWVzIHRvIHdvcmsgYXMgZXhwZWN0ZWRcbiAgICAgIHNldFRpbWVvdXQoaGl0Q2FsbGJhY2ssIDApO1xuICAgIH1cbiAgfVxufTtcblxudmFyIE91dGJvdW5kTGluayA9IF9fd2VicGFja19yZXF1aXJlX18oMjcxKTtcbk91dGJvdW5kTGluay5vcmlnVHJhY2tMaW5rID0gT3V0Ym91bmRMaW5rLnRyYWNrTGluaztcbk91dGJvdW5kTGluay50cmFja0xpbmsgPSBSZWFjdEdBLm91dGJvdW5kTGluay5iaW5kKFJlYWN0R0EpO1xuUmVhY3RHQS5PdXRib3VuZExpbmsgPSBPdXRib3VuZExpbms7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RHQTtcblxuXG4vKioqLyB9KSxcbi8qIDI3MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5mdW5jdGlvbiBsb2cocykge1xuICBjb25zb2xlLmluZm8oJ1tyZWFjdC1nYV0nLCBzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsb2c7XG5cblxuLyoqKi8gfSksXG4vKiAyNzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIG1pZ2h0QmVFbWFpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjc1KTtcbnZhciB0b1RpdGxlQ2FzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjc3KTtcbnZhciB3YXJuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpO1xuXG52YXIgX3JlZGFjdGVkID0gJ1JFREFDVEVEIChQb3RlbnRpYWwgRW1haWwgQWRkcmVzcyknO1xuXG5mdW5jdGlvbiBmb3JtYXQocywgdGl0bGVDYXNlKSB7XG4gIGlmIChtaWdodEJlRW1haWwocykpIHtcbiAgICB3YXJuKCdUaGlzIGFyZyBsb29rcyBsaWtlIGFuIGVtYWlsIGFkZHJlc3MsIHJlZGFjdGluZy4nKTtcbiAgICByZXR1cm4gX3JlZGFjdGVkO1xuICB9XG5cbiAgaWYgKHRpdGxlQ2FzZSkge1xuICAgIHJldHVybiB0b1RpdGxlQ2FzZShzKTtcbiAgfVxuXG4gIHJldHVybiBzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZvcm1hdDtcblxuXG4vKioqLyB9KSxcbi8qIDI3NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyBTZWUgaWYgcyBjb3VsZCBiZSBhbiBlbWFpbCBhZGRyZXNzLiBXZSBkb24ndCB3YW50IHRvIHNlbmQgcGVyc29uYWwgZGF0YSBsaWtlIGVtYWlsLlxuLy8gaHR0cHM6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vYW5hbHl0aWNzL2Fuc3dlci8yNzk1OTgzP2hsPWVuXG5mdW5jdGlvbiBtaWdodEJlRW1haWwocykge1xuICAvLyBUaGVyZSdzIG5vIHBvaW50IHRyeWluZyB0byB2YWxpZGF0ZSByZmM4MjIgZnVsbHksIGp1c3QgbG9vayBmb3IgLi4uQC4uLlxuICByZXR1cm4gKC9bXkBdK0BbXkBdKy8pLnRlc3Qocyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWlnaHRCZUVtYWlsO1xuXG5cbi8qKiovIH0pLFxuLyogMjc2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbmZ1bmN0aW9uIHJlbW92ZUxlYWRpbmdTbGFzaChzKSB7XG4gIGlmIChzLnN1YnN0cmluZygwLCAxKSA9PT0gJy8nKSB7XG4gICAgcyA9IHMuc3Vic3RyaW5nKDEpO1xuICB9XG5cbiAgcmV0dXJuIHM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVtb3ZlTGVhZGluZ1NsYXNoO1xuXG5cbi8qKiovIH0pLFxuLyogMjc3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qKlxuICogVG8gVGl0bGUgQ2FzZSAyLjEgLSBodHRwOi8vaW5kaXZpZGVkLmNvbS9jb2RlL3RvLXRpdGxlLWNhc2UvXG4gKiBDb3B5cmlnaHQgMjAwOC0yMDEzIERhdmlkIEdvdWNoLiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ291Y2gvdG8tdGl0bGUtY2FzZVxuICovXG5cbnZhciB0cmltID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpO1xuXG5mdW5jdGlvbiB0b1RpdGxlQ2FzZShzKSB7XG4gIHZhciBzbWFsbFdvcmRzID0gL14oYXxhbnxhbmR8YXN8YXR8YnV0fGJ5fGVufGZvcnxpZnxpbnxub3J8b2Z8b258b3J8cGVyfHRoZXx0b3x2cz9cXC4/fHZpYSkkL2k7XG4gIHMgPSB0cmltKHMpO1xuXG4gIHJldHVybiBzLnJlcGxhY2UoL1tBLVphLXowLTlcXHUwMEMwLVxcdTAwRkZdK1teXFxzLV0qL2csIGZ1bmN0aW9uIChtYXRjaCwgaW5kZXgsIHRpdGxlKSB7XG4gICAgaWYgKGluZGV4ID4gMCAmJlxuICAgICAgICBpbmRleCArIG1hdGNoLmxlbmd0aCAhPT0gdGl0bGUubGVuZ3RoICYmXG4gICAgICAgIG1hdGNoLnNlYXJjaChzbWFsbFdvcmRzKSA+IC0xICYmXG4gICAgICAgIHRpdGxlLmNoYXJBdChpbmRleCAtIDIpICE9PSAnOicgJiZcbiAgICAgICAgKHRpdGxlLmNoYXJBdChpbmRleCArIG1hdGNoLmxlbmd0aCkgIT09ICctJyB8fCB0aXRsZS5jaGFyQXQoaW5kZXggLSAxKSA9PT0gJy0nKSAmJlxuICAgICAgICB0aXRsZS5jaGFyQXQoaW5kZXggLSAxKS5zZWFyY2goL1teXFxzLV0vKSA8IDApIHtcbiAgICAgIHJldHVybiBtYXRjaC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGlmIChtYXRjaC5zdWJzdHIoMSkuc2VhcmNoKC9bQS1aXXxcXC4uLykgPiAtMSkge1xuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cblxuICAgIHJldHVybiBtYXRjaC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1hdGNoLnN1YnN0cigxKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9UaXRsZUNhc2U7XG5cblxuLyoqKi8gfSksXG4vKiAyNzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBSZWFjdERPTSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzUpO1xudmFyIE1vZGFsUG9ydGFsID0gUmVhY3QuY3JlYXRlRmFjdG9yeShfX3dlYnBhY2tfcmVxdWlyZV9fKDI3OSkpO1xudmFyIGFyaWFBcHBIaWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjgwKTtcbnZhciBlbGVtZW50Q2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Myk7XG52YXIgcmVuZGVyU3VidHJlZUludG9Db250YWluZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KS51bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjtcbnZhciBBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblxudmFyIFNhZmVIVE1MRWxlbWVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IHdpbmRvdy5IVE1MRWxlbWVudCA6IHt9O1xudmFyIEFwcEVsZW1lbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBkb2N1bWVudC5ib2R5IDoge2FwcGVuZENoaWxkOiBmdW5jdGlvbigpIHt9fTtcblxuZnVuY3Rpb24gZ2V0UGFyZW50RWxlbWVudChwYXJlbnRTZWxlY3Rvcikge1xuICByZXR1cm4gcGFyZW50U2VsZWN0b3IoKTtcbn1cblxudmFyIE1vZGFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gIGRpc3BsYXlOYW1lOiAnTW9kYWwnLFxuICBzdGF0aWNzOiB7XG4gICAgc2V0QXBwRWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBBcHBFbGVtZW50ID0gYXJpYUFwcEhpZGVyLnNldEVsZW1lbnQoZWxlbWVudCk7XG4gICAgfSxcbiAgICBpbmplY3RDU1M6IGZ1bmN0aW9uKCkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09IFwicHJvZHVjdGlvblwiXG4gICAgICAgICYmIGNvbnNvbGUud2FybignUmVhY3QtTW9kYWw6IGluamVjdENTUyBoYXMgYmVlbiBkZXByZWNhdGVkICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FuZCBubyBsb25nZXIgaGFzIGFueSBlZmZlY3QuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGxhdGVyIHZlcnNpb24nKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJvcFR5cGVzOiB7XG4gICAgaXNPcGVuOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIHN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgY29udGVudDogUmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgIG92ZXJsYXk6IFJlYWN0LlByb3BUeXBlcy5vYmplY3RcbiAgICB9KSxcbiAgICBwb3J0YWxDbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgYXBwRWxlbWVudDogUmVhY3QuUHJvcFR5cGVzLmluc3RhbmNlT2YoU2FmZUhUTUxFbGVtZW50KSxcbiAgICBvbkFmdGVyT3BlbjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25SZXF1ZXN0Q2xvc2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgIGNsb3NlVGltZW91dE1TOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxuICAgIGFyaWFIaWRlQXBwOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBwYXJlbnRTZWxlY3RvcjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgcm9sZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjb250ZW50TGFiZWw6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICB9LFxuXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgcG9ydGFsQ2xhc3NOYW1lOiAnUmVhY3RNb2RhbFBvcnRhbCcsXG4gICAgICBhcmlhSGlkZUFwcDogdHJ1ZSxcbiAgICAgIGNsb3NlVGltZW91dE1TOiAwLFxuICAgICAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljazogdHJ1ZSxcbiAgICAgIHBhcmVudFNlbGVjdG9yOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5ib2R5OyB9XG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5ub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5ub2RlLmNsYXNzTmFtZSA9IHRoaXMucHJvcHMucG9ydGFsQ2xhc3NOYW1lO1xuXG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQodGhpcy5wcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgdGhpcy5yZW5kZXJQb3J0YWwodGhpcy5wcm9wcyk7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV3UHJvcHMpIHtcbiAgICB2YXIgY3VycmVudFBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQodGhpcy5wcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG4gICAgdmFyIG5ld1BhcmVudCA9IGdldFBhcmVudEVsZW1lbnQobmV3UHJvcHMucGFyZW50U2VsZWN0b3IpO1xuXG4gICAgaWYobmV3UGFyZW50ICE9PSBjdXJyZW50UGFyZW50KSB7XG4gICAgICBjdXJyZW50UGFyZW50LnJlbW92ZUNoaWxkKHRoaXMubm9kZSk7XG4gICAgICBuZXdQYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlclBvcnRhbChuZXdQcm9wcyk7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmFyaWFIaWRlQXBwKSB7XG4gICAgICBhcmlhQXBwSGlkZXIuc2hvdyh0aGlzLnByb3BzLmFwcEVsZW1lbnQpO1xuICAgIH1cblxuICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUodGhpcy5ub2RlKTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50RWxlbWVudCh0aGlzLnByb3BzLnBhcmVudFNlbGVjdG9yKTtcbiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKTtcbiAgICBlbGVtZW50Q2xhc3MoZG9jdW1lbnQuYm9keSkucmVtb3ZlKCdSZWFjdE1vZGFsX19Cb2R5LS1vcGVuJyk7XG4gIH0sXG5cbiAgcmVuZGVyUG9ydGFsOiBmdW5jdGlvbihwcm9wcykge1xuICAgIGlmIChwcm9wcy5pc09wZW4pIHtcbiAgICAgIGVsZW1lbnRDbGFzcyhkb2N1bWVudC5ib2R5KS5hZGQoJ1JlYWN0TW9kYWxfX0JvZHktLW9wZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudENsYXNzKGRvY3VtZW50LmJvZHkpLnJlbW92ZSgnUmVhY3RNb2RhbF9fQm9keS0tb3BlbicpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5hcmlhSGlkZUFwcCkge1xuICAgICAgYXJpYUFwcEhpZGVyLnRvZ2dsZShwcm9wcy5pc09wZW4sIHByb3BzLmFwcEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHRoaXMucG9ydGFsID0gcmVuZGVyU3VidHJlZUludG9Db250YWluZXIodGhpcywgTW9kYWxQb3J0YWwoQXNzaWduKHt9LCBwcm9wcywge2RlZmF1bHRTdHlsZXM6IE1vZGFsLmRlZmF1bHRTdHlsZXN9KSksIHRoaXMubm9kZSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFJlYWN0LkRPTS5ub3NjcmlwdCgpO1xuICB9XG59KTtcblxuTW9kYWwuZGVmYXVsdFN0eWxlcyA9IHtcbiAgb3ZlcmxheToge1xuICAgIHBvc2l0aW9uICAgICAgICA6ICdmaXhlZCcsXG4gICAgdG9wICAgICAgICAgICAgIDogMCxcbiAgICBsZWZ0ICAgICAgICAgICAgOiAwLFxuICAgIHJpZ2h0ICAgICAgICAgICA6IDAsXG4gICAgYm90dG9tICAgICAgICAgIDogMCxcbiAgICBiYWNrZ3JvdW5kQ29sb3IgOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjc1KSdcbiAgfSxcbiAgY29udGVudDoge1xuICAgIHBvc2l0aW9uICAgICAgICAgICAgICAgIDogJ2Fic29sdXRlJyxcbiAgICB0b3AgICAgICAgICAgICAgICAgICAgICA6ICc0MHB4JyxcbiAgICBsZWZ0ICAgICAgICAgICAgICAgICAgICA6ICc0MHB4JyxcbiAgICByaWdodCAgICAgICAgICAgICAgICAgICA6ICc0MHB4JyxcbiAgICBib3R0b20gICAgICAgICAgICAgICAgICA6ICc0MHB4JyxcbiAgICBib3JkZXIgICAgICAgICAgICAgICAgICA6ICcxcHggc29saWQgI2NjYycsXG4gICAgYmFja2dyb3VuZCAgICAgICAgICAgICAgOiAnI2ZmZicsXG4gICAgb3ZlcmZsb3cgICAgICAgICAgICAgICAgOiAnYXV0bycsXG4gICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmcgOiAndG91Y2gnLFxuICAgIGJvcmRlclJhZGl1cyAgICAgICAgICAgIDogJzRweCcsXG4gICAgb3V0bGluZSAgICAgICAgICAgICAgICAgOiAnbm9uZScsXG4gICAgcGFkZGluZyAgICAgICAgICAgICAgICAgOiAnMjBweCdcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE1vZGFsXG5cblxuLyoqKi8gfSksXG4vKiAyNzkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBkaXYgPSBSZWFjdC5ET00uZGl2O1xudmFyIGZvY3VzTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjgxKTtcbnZhciBzY29wZVRhYiA9IF9fd2VicGFja19yZXF1aXJlX18oMjgyKTtcbnZhciBBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblxuLy8gc28gdGhhdCBvdXIgQ1NTIGlzIHN0YXRpY2FsbHkgYW5hbHl6YWJsZVxudmFyIENMQVNTX05BTUVTID0ge1xuICBvdmVybGF5OiB7XG4gICAgYmFzZTogJ1JlYWN0TW9kYWxfX092ZXJsYXknLFxuICAgIGFmdGVyT3BlbjogJ1JlYWN0TW9kYWxfX092ZXJsYXktLWFmdGVyLW9wZW4nLFxuICAgIGJlZm9yZUNsb3NlOiAnUmVhY3RNb2RhbF9fT3ZlcmxheS0tYmVmb3JlLWNsb3NlJ1xuICB9LFxuICBjb250ZW50OiB7XG4gICAgYmFzZTogJ1JlYWN0TW9kYWxfX0NvbnRlbnQnLFxuICAgIGFmdGVyT3BlbjogJ1JlYWN0TW9kYWxfX0NvbnRlbnQtLWFmdGVyLW9wZW4nLFxuICAgIGJlZm9yZUNsb3NlOiAnUmVhY3RNb2RhbF9fQ29udGVudC0tYmVmb3JlLWNsb3NlJ1xuICB9XG59O1xuXG52YXIgTW9kYWxQb3J0YWwgPSBtb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICBkaXNwbGF5TmFtZTogJ01vZGFsUG9ydGFsJyxcbiAgc2hvdWxkQ2xvc2U6IG51bGwsXG5cbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgb3ZlcmxheToge30sXG4gICAgICAgIGNvbnRlbnQ6IHt9XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhZnRlck9wZW46IGZhbHNlLFxuICAgICAgYmVmb3JlQ2xvc2U6IGZhbHNlXG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy8gRm9jdXMgbmVlZHMgdG8gYmUgc2V0IHdoZW4gbW91bnRpbmcgYW5kIGFscmVhZHkgb3BlblxuICAgIGlmICh0aGlzLnByb3BzLmlzT3Blbikge1xuICAgICAgdGhpcy5zZXRGb2N1c0FmdGVyUmVuZGVyKHRydWUpO1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jbG9zZVRpbWVyKTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXdQcm9wcykge1xuICAgIC8vIEZvY3VzIG9ubHkgbmVlZHMgdG8gYmUgc2V0IG9uY2Ugd2hlbiB0aGUgbW9kYWwgaXMgYmVpbmcgb3BlbmVkXG4gICAgaWYgKCF0aGlzLnByb3BzLmlzT3BlbiAmJiBuZXdQcm9wcy5pc09wZW4pIHtcbiAgICAgIHRoaXMuc2V0Rm9jdXNBZnRlclJlbmRlcih0cnVlKTtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5pc09wZW4gJiYgIW5ld1Byb3BzLmlzT3Blbikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5mb2N1c0FmdGVyUmVuZGVyKSB7XG4gICAgICB0aGlzLmZvY3VzQ29udGVudCgpO1xuICAgICAgdGhpcy5zZXRGb2N1c0FmdGVyUmVuZGVyKGZhbHNlKTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0Rm9jdXNBZnRlclJlbmRlcjogZnVuY3Rpb24gKGZvY3VzKSB7XG4gICAgdGhpcy5mb2N1c0FmdGVyUmVuZGVyID0gZm9jdXM7XG4gIH0sXG5cbiAgb3BlbjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYWZ0ZXJPcGVuICYmIHRoaXMuc3RhdGUuYmVmb3JlQ2xvc2UpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsb3NlVGltZXIpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGJlZm9yZUNsb3NlOiBmYWxzZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9jdXNNYW5hZ2VyLnNldHVwU2NvcGVkRm9jdXModGhpcy5ub2RlKTtcbiAgICAgIGZvY3VzTWFuYWdlci5tYXJrRm9yRm9jdXNMYXRlcigpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNPcGVuOiB0cnVlfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2FmdGVyT3BlbjogdHJ1ZX0pO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzT3BlbiAmJiB0aGlzLnByb3BzLm9uQWZ0ZXJPcGVuKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vbkFmdGVyT3BlbigpO1xuICAgICAgICB9XG4gICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cbiAgfSxcblxuICBjbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuY2xvc2VUaW1lb3V0TVMgPiAwKVxuICAgICAgdGhpcy5jbG9zZVdpdGhUaW1lb3V0KCk7XG4gICAgZWxzZVxuICAgICAgdGhpcy5jbG9zZVdpdGhvdXRUaW1lb3V0KCk7XG4gIH0sXG5cbiAgZm9jdXNDb250ZW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyBEb24ndCBzdGVhbCBmb2N1cyBmcm9tIGlubmVyIGVsZW1lbnRzXG4gICAgaWYgKCF0aGlzLmNvbnRlbnRIYXNGb2N1cygpKSB7XG4gICAgICB0aGlzLnJlZnMuY29udGVudC5mb2N1cygpO1xuICAgIH1cbiAgfSxcblxuICBjbG9zZVdpdGhUaW1lb3V0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtiZWZvcmVDbG9zZTogdHJ1ZX0sIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jbG9zZVRpbWVyID0gc2V0VGltZW91dCh0aGlzLmNsb3NlV2l0aG91dFRpbWVvdXQsIHRoaXMucHJvcHMuY2xvc2VUaW1lb3V0TVMpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH0sXG5cbiAgY2xvc2VXaXRob3V0VGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBiZWZvcmVDbG9zZTogZmFsc2UsXG4gICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgYWZ0ZXJPcGVuOiBmYWxzZSxcbiAgICB9LCB0aGlzLmFmdGVyQ2xvc2UpO1xuICB9LFxuXG4gIGFmdGVyQ2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgIGZvY3VzTWFuYWdlci5yZXR1cm5Gb2N1cygpO1xuICAgIGZvY3VzTWFuYWdlci50ZWFyZG93blNjb3BlZEZvY3VzKCk7XG4gIH0sXG5cbiAgaGFuZGxlS2V5RG93bjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSA5IC8qdGFiKi8pIHNjb3BlVGFiKHRoaXMucmVmcy5jb250ZW50LCBldmVudCk7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMjcgLyplc2MqLykge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMucmVxdWVzdENsb3NlKGV2ZW50KTtcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlT3ZlcmxheU1vdXNlRG93bjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5zaG91bGRDbG9zZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5zaG91bGRDbG9zZSA9IHRydWU7XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZU92ZXJsYXlNb3VzZVVwOiBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICh0aGlzLnNob3VsZENsb3NlICYmIHRoaXMucHJvcHMuc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljaykge1xuICAgICAgaWYgKHRoaXMub3duZXJIYW5kbGVzQ2xvc2UoKSlcbiAgICAgICAgdGhpcy5yZXF1ZXN0Q2xvc2UoZXZlbnQpO1xuICAgICAgZWxzZVxuICAgICAgICB0aGlzLmZvY3VzQ29udGVudCgpO1xuICAgIH1cbiAgICB0aGlzLnNob3VsZENsb3NlID0gbnVsbDtcbiAgfSxcblxuICBoYW5kbGVDb250ZW50TW91c2VEb3duOiBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuc2hvdWxkQ2xvc2UgPSBmYWxzZTtcbiAgfSxcblxuICBoYW5kbGVDb250ZW50TW91c2VVcDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLnNob3VsZENsb3NlID0gZmFsc2U7XG4gIH0sXG5cbiAgcmVxdWVzdENsb3NlOiBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICh0aGlzLm93bmVySGFuZGxlc0Nsb3NlKCkpXG4gICAgICB0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKGV2ZW50KTtcbiAgfSxcblxuICBvd25lckhhbmRsZXNDbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2U7XG4gIH0sXG5cbiAgc2hvdWxkQmVDbG9zZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAhdGhpcy5wcm9wcy5pc09wZW4gJiYgIXRoaXMuc3RhdGUuYmVmb3JlQ2xvc2U7XG4gIH0sXG5cbiAgY29udGVudEhhc0ZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5yZWZzLmNvbnRlbnQgfHwgdGhpcy5yZWZzLmNvbnRlbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG4gIH0sXG5cbiAgYnVpbGRDbGFzc05hbWU6IGZ1bmN0aW9uKHdoaWNoLCBhZGRpdGlvbmFsKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9IENMQVNTX05BTUVTW3doaWNoXS5iYXNlO1xuICAgIGlmICh0aGlzLnN0YXRlLmFmdGVyT3BlbilcbiAgICAgIGNsYXNzTmFtZSArPSAnICcrQ0xBU1NfTkFNRVNbd2hpY2hdLmFmdGVyT3BlbjtcbiAgICBpZiAodGhpcy5zdGF0ZS5iZWZvcmVDbG9zZSlcbiAgICAgIGNsYXNzTmFtZSArPSAnICcrQ0xBU1NfTkFNRVNbd2hpY2hdLmJlZm9yZUNsb3NlO1xuICAgIHJldHVybiBhZGRpdGlvbmFsID8gY2xhc3NOYW1lICsgJyAnICsgYWRkaXRpb25hbCA6IGNsYXNzTmFtZTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb250ZW50U3R5bGVzID0gKHRoaXMucHJvcHMuY2xhc3NOYW1lKSA/IHt9IDogdGhpcy5wcm9wcy5kZWZhdWx0U3R5bGVzLmNvbnRlbnQ7XG4gICAgdmFyIG92ZXJsYXlTdHlsZXMgPSAodGhpcy5wcm9wcy5vdmVybGF5Q2xhc3NOYW1lKSA/IHt9IDogdGhpcy5wcm9wcy5kZWZhdWx0U3R5bGVzLm92ZXJsYXk7XG5cbiAgICByZXR1cm4gdGhpcy5zaG91bGRCZUNsb3NlZCgpID8gZGl2KCkgOiAoXG4gICAgICBkaXYoe1xuICAgICAgICByZWY6IFwib3ZlcmxheVwiLFxuICAgICAgICBjbGFzc05hbWU6IHRoaXMuYnVpbGRDbGFzc05hbWUoJ292ZXJsYXknLCB0aGlzLnByb3BzLm92ZXJsYXlDbGFzc05hbWUpLFxuICAgICAgICBzdHlsZTogQXNzaWduKHt9LCBvdmVybGF5U3R5bGVzLCB0aGlzLnByb3BzLnN0eWxlLm92ZXJsYXkgfHwge30pLFxuICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVPdmVybGF5TW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlVXA6IHRoaXMuaGFuZGxlT3ZlcmxheU1vdXNlVXBcbiAgICAgIH0sXG4gICAgICAgIGRpdih7XG4gICAgICAgICAgcmVmOiBcImNvbnRlbnRcIixcbiAgICAgICAgICBzdHlsZTogQXNzaWduKHt9LCBjb250ZW50U3R5bGVzLCB0aGlzLnByb3BzLnN0eWxlLmNvbnRlbnQgfHwge30pLFxuICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENsYXNzTmFtZSgnY29udGVudCcsIHRoaXMucHJvcHMuY2xhc3NOYW1lKSxcbiAgICAgICAgICB0YWJJbmRleDogXCItMVwiLFxuICAgICAgICAgIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLFxuICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUNvbnRlbnRNb3VzZURvd24sXG4gICAgICAgICAgb25Nb3VzZVVwOiB0aGlzLmhhbmRsZUNvbnRlbnRNb3VzZVVwLFxuICAgICAgICAgIHJvbGU6IHRoaXMucHJvcHMucm9sZSxcbiAgICAgICAgICBcImFyaWEtbGFiZWxcIjogdGhpcy5wcm9wcy5jb250ZW50TGFiZWxcbiAgICAgICAgfSxcbiAgICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuXG4vKioqLyB9KSxcbi8qIDI4MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG52YXIgX2VsZW1lbnQgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQuYm9keSA6IG51bGw7XG5cbmZ1bmN0aW9uIHNldEVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50KTtcbiAgICBlbGVtZW50ID0gJ2xlbmd0aCcgaW4gZWwgPyBlbFswXSA6IGVsO1xuICB9XG4gIF9lbGVtZW50ID0gZWxlbWVudCB8fCBfZWxlbWVudDtcbiAgcmV0dXJuIF9lbGVtZW50O1xufVxuXG5mdW5jdGlvbiBoaWRlKGFwcEVsZW1lbnQpIHtcbiAgdmFsaWRhdGVFbGVtZW50KGFwcEVsZW1lbnQpO1xuICAoYXBwRWxlbWVudCB8fCBfZWxlbWVudCkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG59XG5cbmZ1bmN0aW9uIHNob3coYXBwRWxlbWVudCkge1xuICB2YWxpZGF0ZUVsZW1lbnQoYXBwRWxlbWVudCk7XG4gIChhcHBFbGVtZW50IHx8IF9lbGVtZW50KS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZShzaG91bGRIaWRlLCBhcHBFbGVtZW50KSB7XG4gIGlmIChzaG91bGRIaWRlKVxuICAgIGhpZGUoYXBwRWxlbWVudCk7XG4gIGVsc2VcbiAgICBzaG93KGFwcEVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUVsZW1lbnQoYXBwRWxlbWVudCkge1xuICBpZiAoIWFwcEVsZW1lbnQgJiYgIV9lbGVtZW50KVxuICAgIHRocm93IG5ldyBFcnJvcigncmVhY3QtbW9kYWw6IFlvdSBtdXN0IHNldCBhbiBlbGVtZW50IHdpdGggYE1vZGFsLnNldEFwcEVsZW1lbnQoZWwpYCB0byBtYWtlIHRoaXMgYWNjZXNzaWJsZScpO1xufVxuXG5mdW5jdGlvbiByZXNldEZvclRlc3RpbmcoKSB7XG4gIF9lbGVtZW50ID0gZG9jdW1lbnQuYm9keTtcbn1cblxuZXhwb3J0cy50b2dnbGUgPSB0b2dnbGU7XG5leHBvcnRzLnNldEVsZW1lbnQgPSBzZXRFbGVtZW50O1xuZXhwb3J0cy5zaG93ID0gc2hvdztcbmV4cG9ydHMuaGlkZSA9IGhpZGU7XG5leHBvcnRzLnJlc2V0Rm9yVGVzdGluZyA9IHJlc2V0Rm9yVGVzdGluZztcblxuXG4vKioqLyB9KSxcbi8qIDI4MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgZmluZFRhYmJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpO1xudmFyIG1vZGFsRWxlbWVudCA9IG51bGw7XG52YXIgZm9jdXNMYXRlckVsZW1lbnQgPSBudWxsO1xudmFyIG5lZWRUb0ZvY3VzID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGhhbmRsZUJsdXIoZXZlbnQpIHtcbiAgbmVlZFRvRm9jdXMgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVGb2N1cyhldmVudCkge1xuICBpZiAobmVlZFRvRm9jdXMpIHtcbiAgICBuZWVkVG9Gb2N1cyA9IGZhbHNlO1xuICAgIGlmICghbW9kYWxFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG5lZWQgdG8gc2VlIGhvdyBqUXVlcnkgc2hpbXMgZG9jdW1lbnQub24oJ2ZvY3VzaW4nKSBzbyB3ZSBkb24ndCBuZWVkIHRoZVxuICAgIC8vIHNldFRpbWVvdXQsIGZpcmVmb3ggZG9lc24ndCBzdXBwb3J0IGZvY3VzaW4sIGlmIGl0IGRpZCwgd2UgY291bGQgZm9jdXNcbiAgICAvLyB0aGUgZWxlbWVudCBvdXRzaWRlIG9mIGEgc2V0VGltZW91dC4gU2lkZS1lZmZlY3Qgb2YgdGhpcyBpbXBsZW1lbnRhdGlvbiBcbiAgICAvLyBpcyB0aGF0IHRoZSBkb2N1bWVudC5ib2R5IGdldHMgZm9jdXMsIGFuZCB0aGVuIHdlIGZvY3VzIG91ciBlbGVtZW50IHJpZ2h0IFxuICAgIC8vIGFmdGVyLCBzZWVtcyBmaW5lLlxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAobW9kYWxFbGVtZW50LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKVxuICAgICAgICByZXR1cm47XG4gICAgICB2YXIgZWwgPSAoZmluZFRhYmJhYmxlKG1vZGFsRWxlbWVudClbMF0gfHwgbW9kYWxFbGVtZW50KTtcbiAgICAgIGVsLmZvY3VzKCk7XG4gICAgfSwgMCk7XG4gIH1cbn1cblxuZXhwb3J0cy5tYXJrRm9yRm9jdXNMYXRlciA9IGZ1bmN0aW9uKCkge1xuICBmb2N1c0xhdGVyRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG59O1xuXG5leHBvcnRzLnJldHVybkZvY3VzID0gZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgZm9jdXNMYXRlckVsZW1lbnQuZm9jdXMoKTtcbiAgfVxuICBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybignWW91IHRyaWVkIHRvIHJldHVybiBmb2N1cyB0byAnK2ZvY3VzTGF0ZXJFbGVtZW50KycgYnV0IGl0IGlzIG5vdCBpbiB0aGUgRE9NIGFueW1vcmUnKTtcbiAgfVxuICBmb2N1c0xhdGVyRWxlbWVudCA9IG51bGw7XG59O1xuXG5leHBvcnRzLnNldHVwU2NvcGVkRm9jdXMgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gIG1vZGFsRWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBoYW5kbGVCbHVyLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBoYW5kbGVGb2N1cywgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbkJsdXInLCBoYW5kbGVCbHVyKTtcbiAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgnb25Gb2N1cycsIGhhbmRsZUZvY3VzKTtcbiAgfVxufTtcblxuZXhwb3J0cy50ZWFyZG93blNjb3BlZEZvY3VzID0gZnVuY3Rpb24oKSB7XG4gIG1vZGFsRWxlbWVudCA9IG51bGw7XG5cbiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBoYW5kbGVCbHVyKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIGhhbmRsZUZvY3VzKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuZGV0YWNoRXZlbnQoJ29uQmx1cicsIGhhbmRsZUJsdXIpO1xuICAgIGRvY3VtZW50LmRldGFjaEV2ZW50KCdvbkZvY3VzJywgaGFuZGxlRm9jdXMpO1xuICB9XG59O1xuXG5cblxuXG4vKioqLyB9KSxcbi8qIDI4MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgZmluZFRhYmJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5vZGUsIGV2ZW50KSB7XG4gIHZhciB0YWJiYWJsZSA9IGZpbmRUYWJiYWJsZShub2RlKTtcbiAgaWYgKCF0YWJiYWJsZS5sZW5ndGgpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm47XG4gIH1cbiAgdmFyIGZpbmFsVGFiYmFibGUgPSB0YWJiYWJsZVtldmVudC5zaGlmdEtleSA/IDAgOiB0YWJiYWJsZS5sZW5ndGggLSAxXTtcbiAgdmFyIGxlYXZpbmdGaW5hbFRhYmJhYmxlID0gKFxuICAgIGZpbmFsVGFiYmFibGUgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHxcbiAgICAvLyBoYW5kbGUgaW1tZWRpYXRlIHNoaWZ0K3RhYiBhZnRlciBvcGVuaW5nIHdpdGggbW91c2VcbiAgICBub2RlID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICk7XG4gIGlmICghbGVhdmluZ0ZpbmFsVGFiYmFibGUpIHJldHVybjtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgdmFyIHRhcmdldCA9IHRhYmJhYmxlW2V2ZW50LnNoaWZ0S2V5ID8gdGFiYmFibGUubGVuZ3RoIC0gMSA6IDBdO1xuICB0YXJnZXQuZm9jdXMoKTtcbn07XG5cblxuLyoqKi8gfSksXG4vKiAyODMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3OCk7XG5cblxuXG4vKioqLyB9KSxcbi8qIDI4NCAqLyxcbi8qIDI4NSAqLyxcbi8qIDI4NiAqLyxcbi8qIDI4NyAqLyxcbi8qIDI4OCAqLyxcbi8qIDI4OSAqLyxcbi8qIDI5MCAqLyxcbi8qIDI5MSAqLyxcbi8qIDI5MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgY2FuVXNlRE9NID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzIpO1xudmFyIGVucXVpcmUgPSBjYW5Vc2VET00gJiYgX193ZWJwYWNrX3JlcXVpcmVfXygxNzQpO1xudmFyIGpzb24ybXEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKTtcblxudmFyIFJlc3BvbnNpdmVNaXhpbiA9IHtcbiAgbWVkaWE6IGZ1bmN0aW9uIChxdWVyeSwgaGFuZGxlcikge1xuICAgIHF1ZXJ5ID0ganNvbjJtcShxdWVyeSk7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBoYW5kbGVyID0ge1xuICAgICAgICBtYXRjaDogaGFuZGxlclxuICAgICAgfTtcbiAgICB9XG4gICAgY2FuVXNlRE9NICYmIGVucXVpcmUucmVnaXN0ZXIocXVlcnksIGhhbmRsZXIpO1xuXG4gICAgLy8gUXVldWUgdGhlIGhhbmRsZXJzIHRvIHVucmVnaXN0ZXIgdGhlbSBhdCB1bm1vdW50ICBcbiAgICBpZiAoISB0aGlzLl9yZXNwb25zaXZlTWVkaWFIYW5kbGVycykge1xuICAgICAgdGhpcy5fcmVzcG9uc2l2ZU1lZGlhSGFuZGxlcnMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5fcmVzcG9uc2l2ZU1lZGlhSGFuZGxlcnMucHVzaCh7cXVlcnk6IHF1ZXJ5LCBoYW5kbGVyOiBoYW5kbGVyfSk7XG4gIH0sXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3Jlc3BvbnNpdmVNZWRpYUhhbmRsZXJzKSB7XG4gICAgICB0aGlzLl9yZXNwb25zaXZlTWVkaWFIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICBjYW5Vc2VET00gJiYgZW5xdWlyZS51bnJlZ2lzdGVyKG9iai5xdWVyeSwgb2JqLmhhbmRsZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlc3BvbnNpdmVNaXhpbjtcblxuXG4vKioqLyB9KSxcbi8qIDI5MyAqLyxcbi8qIDI5NCAqLyxcbi8qIDI5NSAqLyxcbi8qIDI5NiAqLyxcbi8qIDI5NyAqLyxcbi8qIDI5OCAqLyxcbi8qIDI5OSAqLyxcbi8qIDMwMCAqLyxcbi8qIDMwMSAqLyxcbi8qIDMwMiAqLyxcbi8qIDMwMyAqLyxcbi8qIDMwNCAqLyxcbi8qIDMwNSAqLyxcbi8qIDMwNiAqLyxcbi8qIDMwNyAqLyxcbi8qIDMwOCAqLyxcbi8qIDMwOSAqLyxcbi8qIDMxMCAqLyxcbi8qIDMxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5OZXh0QXJyb3cgPSBleHBvcnRzLlByZXZBcnJvdyA9IHVuZGVmaW5lZDtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2NsYXNzbmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblxudmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXG52YXIgX2hlbHBlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTtcblxudmFyIF9oZWxwZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlbHBlcnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgUHJldkFycm93ID0gZXhwb3J0cy5QcmV2QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ1ByZXZBcnJvdycsXG5cblxuICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihvcHRpb25zLCBlKSB7XG4gICAgaWYgKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5jbGlja0hhbmRsZXIob3B0aW9ucywgZSk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBwcmV2Q2xhc3NlcyA9IHsgJ3NsaWNrLWFycm93JzogdHJ1ZSwgJ3NsaWNrLXByZXYnOiB0cnVlIH07XG4gICAgdmFyIHByZXZIYW5kbGVyID0gdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzLCB7IG1lc3NhZ2U6ICdwcmV2aW91cycgfSk7XG5cbiAgICBpZiAoIXRoaXMucHJvcHMuaW5maW5pdGUgJiYgKHRoaXMucHJvcHMuY3VycmVudFNsaWRlID09PSAwIHx8IHRoaXMucHJvcHMuc2xpZGVDb3VudCA8PSB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdykpIHtcbiAgICAgIHByZXZDbGFzc2VzWydzbGljay1kaXNhYmxlZCddID0gdHJ1ZTtcbiAgICAgIHByZXZIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgcHJldkFycm93UHJvcHMgPSB7XG4gICAgICBrZXk6ICcwJyxcbiAgICAgICdkYXRhLXJvbGUnOiAnbm9uZScsXG4gICAgICBjbGFzc05hbWU6ICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkocHJldkNsYXNzZXMpLFxuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnByb3BzLmN1cnJlbnRTbGlkZSxcbiAgICAgIHNsaWRlQ291bnQ6IHRoaXMucHJvcHMuc2xpZGVDb3VudCxcbiAgICAgIHN0eWxlOiB7IGRpc3BsYXk6ICdibG9jaycgfSxcbiAgICAgIG9uQ2xpY2s6IHByZXZIYW5kbGVyXG4gICAgfTtcbiAgICB2YXIgcHJldkFycm93O1xuXG4gICAgaWYgKHRoaXMucHJvcHMucHJldkFycm93KSB7XG4gICAgICBwcmV2QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KHRoaXMucHJvcHMucHJldkFycm93LCBwcmV2QXJyb3dQcm9wcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZXZBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgX2V4dGVuZHMoeyBrZXk6ICcwJywgdHlwZTogJ2J1dHRvbicgfSwgcHJldkFycm93UHJvcHMpLFxuICAgICAgICAnIFByZXZpb3VzJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJldkFycm93O1xuICB9XG59KTtcblxudmFyIE5leHRBcnJvdyA9IGV4cG9ydHMuTmV4dEFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdOZXh0QXJyb3cnLFxuXG4gIGNsaWNrSGFuZGxlcjogZnVuY3Rpb24gY2xpY2tIYW5kbGVyKG9wdGlvbnMsIGUpIHtcbiAgICBpZiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLmNsaWNrSGFuZGxlcihvcHRpb25zLCBlKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIG5leHRDbGFzc2VzID0geyAnc2xpY2stYXJyb3cnOiB0cnVlLCAnc2xpY2stbmV4dCc6IHRydWUgfTtcbiAgICB2YXIgbmV4dEhhbmRsZXIgPSB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMsIHsgbWVzc2FnZTogJ25leHQnIH0pO1xuXG4gICAgaWYgKCFfaGVscGVyczIuZGVmYXVsdC5jYW5Hb05leHQodGhpcy5wcm9wcykpIHtcbiAgICAgIG5leHRDbGFzc2VzWydzbGljay1kaXNhYmxlZCddID0gdHJ1ZTtcbiAgICAgIG5leHRIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEFycm93UHJvcHMgPSB7XG4gICAgICBrZXk6ICcxJyxcbiAgICAgICdkYXRhLXJvbGUnOiAnbm9uZScsXG4gICAgICBjbGFzc05hbWU6ICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkobmV4dENsYXNzZXMpLFxuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnByb3BzLmN1cnJlbnRTbGlkZSxcbiAgICAgIHNsaWRlQ291bnQ6IHRoaXMucHJvcHMuc2xpZGVDb3VudCxcbiAgICAgIHN0eWxlOiB7IGRpc3BsYXk6ICdibG9jaycgfSxcbiAgICAgIG9uQ2xpY2s6IG5leHRIYW5kbGVyXG4gICAgfTtcblxuICAgIHZhciBuZXh0QXJyb3c7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5uZXh0QXJyb3cpIHtcbiAgICAgIG5leHRBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5uZXh0QXJyb3csIG5leHRBcnJvd1Byb3BzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dEFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdidXR0b24nLFxuICAgICAgICBfZXh0ZW5kcyh7IGtleTogJzEnLCB0eXBlOiAnYnV0dG9uJyB9LCBuZXh0QXJyb3dQcm9wcyksXG4gICAgICAgICcgTmV4dCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRBcnJvdztcbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuLyogMzEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLkRvdHMgPSB1bmRlZmluZWQ7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGdldERvdENvdW50ID0gZnVuY3Rpb24gZ2V0RG90Q291bnQoc3BlYykge1xuICB2YXIgZG90cztcbiAgZG90cyA9IE1hdGguY2VpbChzcGVjLnNsaWRlQ291bnQgLyBzcGVjLnNsaWRlc1RvU2Nyb2xsKTtcbiAgcmV0dXJuIGRvdHM7XG59O1xuXG52YXIgRG90cyA9IGV4cG9ydHMuRG90cyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnRG90cycsXG5cblxuICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihvcHRpb25zLCBlKSB7XG4gICAgLy8gSW4gQXV0b3BsYXkgdGhlIGZvY3VzIHN0YXlzIG9uIGNsaWNrZWQgYnV0dG9uIGV2ZW4gYWZ0ZXIgdHJhbnNpdGlvblxuICAgIC8vIHRvIG5leHQgc2xpZGUuIFRoYXQgb25seSBnb2VzIGF3YXkgYnkgY2xpY2sgc29tZXdoZXJlIG91dHNpZGVcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5wcm9wcy5jbGlja0hhbmRsZXIob3B0aW9ucyk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgZG90Q291bnQgPSBnZXREb3RDb3VudCh7XG4gICAgICBzbGlkZUNvdW50OiB0aGlzLnByb3BzLnNsaWRlQ291bnQsXG4gICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbFxuICAgIH0pO1xuXG4gICAgLy8gQXBwbHkgam9pbiAmIHNwbGl0IHRvIEFycmF5IHRvIHByZS1maWxsIGl0IGZvciBJRThcbiAgICAvL1xuICAgIC8vIENyZWRpdDogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTM3MzU0MjUvMTg0OTQ1OFxuICAgIHZhciBkb3RzID0gQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkoZG90Q291bnQgKyAxKS5qb2luKCcwJykuc3BsaXQoJycpKS5tYXAoZnVuY3Rpb24gKHgsIGkpIHtcblxuICAgICAgdmFyIGxlZnRCb3VuZCA9IGkgKiBfdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgIHZhciByaWdodEJvdW5kID0gaSAqIF90aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsICsgKF90aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsIC0gMSk7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KSh7XG4gICAgICAgICdzbGljay1hY3RpdmUnOiBfdGhpcy5wcm9wcy5jdXJyZW50U2xpZGUgPj0gbGVmdEJvdW5kICYmIF90aGlzLnByb3BzLmN1cnJlbnRTbGlkZSA8PSByaWdodEJvdW5kXG4gICAgICB9KTtcblxuICAgICAgdmFyIGRvdE9wdGlvbnMgPSB7XG4gICAgICAgIG1lc3NhZ2U6ICdkb3RzJyxcbiAgICAgICAgaW5kZXg6IGksXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiBfdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCxcbiAgICAgICAgY3VycmVudFNsaWRlOiBfdGhpcy5wcm9wcy5jdXJyZW50U2xpZGVcbiAgICAgIH07XG5cbiAgICAgIHZhciBvbkNsaWNrID0gX3RoaXMuY2xpY2tIYW5kbGVyLmJpbmQoX3RoaXMsIGRvdE9wdGlvbnMpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdsaScsXG4gICAgICAgIHsga2V5OiBpLCBjbGFzc05hbWU6IGNsYXNzTmFtZSB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KF90aGlzLnByb3BzLmN1c3RvbVBhZ2luZyhpKSwgeyBvbkNsaWNrOiBvbkNsaWNrIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ3VsJyxcbiAgICAgIHsgY2xhc3NOYW1lOiB0aGlzLnByb3BzLmRvdHNDbGFzcywgc3R5bGU6IHsgZGlzcGxheTogJ2Jsb2NrJyB9IH0sXG4gICAgICBkb3RzXG4gICAgKTtcbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuLyogMzEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTcpO1xuXG4vKioqLyB9KSxcbi8qIDMxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgaW5pdGlhbFN0YXRlID0ge1xuICAgIGFuaW1hdGluZzogZmFsc2UsXG4gICAgZHJhZ2dpbmc6IGZhbHNlLFxuICAgIGF1dG9QbGF5VGltZXI6IG51bGwsXG4gICAgY3VycmVudERpcmVjdGlvbjogMCxcbiAgICBjdXJyZW50TGVmdDogbnVsbCxcbiAgICBjdXJyZW50U2xpZGU6IDAsXG4gICAgZGlyZWN0aW9uOiAxLFxuICAgIGxpc3RXaWR0aDogbnVsbCxcbiAgICBsaXN0SGVpZ2h0OiBudWxsLFxuICAgIC8vIGxvYWRJbmRleDogMCxcbiAgICBzbGlkZUNvdW50OiBudWxsLFxuICAgIHNsaWRlV2lkdGg6IG51bGwsXG4gICAgc2xpZGVIZWlnaHQ6IG51bGwsXG4gICAgLy8gc2xpZGluZzogZmFsc2UsXG4gICAgLy8gc2xpZGVPZmZzZXQ6IDAsXG4gICAgc3dpcGVMZWZ0OiBudWxsLFxuICAgIHRvdWNoT2JqZWN0OiB7XG4gICAgICAgIHN0YXJ0WDogMCxcbiAgICAgICAgc3RhcnRZOiAwLFxuICAgICAgICBjdXJYOiAwLFxuICAgICAgICBjdXJZOiAwXG4gICAgfSxcblxuICAgIGxhenlMb2FkZWRMaXN0OiBbXSxcblxuICAgIC8vIGFkZGVkIGZvciByZWFjdFxuICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICBlZGdlRHJhZ2dlZDogZmFsc2UsXG4gICAgc3dpcGVkOiBmYWxzZSwgLy8gdXNlZCBieSBzd2lwZUV2ZW50LiBkaWZmZXJlbnRpdGVzIGJldHdlZW4gdG91Y2ggYW5kIHN3aXBlLlxuICAgIHRyYWNrU3R5bGU6IHt9LFxuICAgIHRyYWNrV2lkdGg6IDBcblxuICAgIC8vIFJlbW92ZWRcbiAgICAvLyB0cmFuc2Zvcm1zRW5hYmxlZDogZmFsc2UsXG4gICAgLy8gJG5leHRBcnJvdzogbnVsbCxcbiAgICAvLyAkcHJldkFycm93OiBudWxsLFxuICAgIC8vICRkb3RzOiBudWxsLFxuICAgIC8vICRsaXN0OiBudWxsLFxuICAgIC8vICRzbGlkZVRyYWNrOiBudWxsLFxuICAgIC8vICRzbGlkZXM6IG51bGwsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGluaXRpYWxTdGF0ZTtcblxuLyoqKi8gfSksXG4vKiAzMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuSW5uZXJTbGlkZXIgPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9ldmVudEhhbmRsZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTYpO1xuXG52YXIgX2V2ZW50SGFuZGxlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRIYW5kbGVycyk7XG5cbnZhciBfaGVscGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXG52YXIgX2hlbHBlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVscGVycyk7XG5cbnZhciBfaW5pdGlhbFN0YXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTQpO1xuXG52YXIgX2luaXRpYWxTdGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbml0aWFsU3RhdGUpO1xuXG52YXIgX2RlZmF1bHRQcm9wcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM5KTtcblxudmFyIF9kZWZhdWx0UHJvcHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmYXVsdFByb3BzKTtcblxudmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXG52YXIgX3RyYWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTgpO1xuXG52YXIgX2RvdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxMik7XG5cbnZhciBfYXJyb3dzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTEpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgSW5uZXJTbGlkZXIgPSBleHBvcnRzLklubmVyU2xpZGVyID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdJbm5lclNsaWRlcicsXG5cbiAgbWl4aW5zOiBbX2hlbHBlcnMyLmRlZmF1bHQsIF9ldmVudEhhbmRsZXJzMi5kZWZhdWx0XSxcbiAgbGlzdDogbnVsbCxcbiAgdHJhY2s6IG51bGwsXG4gIGxpc3RSZWZIYW5kbGVyOiBmdW5jdGlvbiBsaXN0UmVmSGFuZGxlcihyZWYpIHtcbiAgICB0aGlzLmxpc3QgPSByZWY7XG4gIH0sXG4gIHRyYWNrUmVmSGFuZGxlcjogZnVuY3Rpb24gdHJhY2tSZWZIYW5kbGVyKHJlZikge1xuICAgIHRoaXMudHJhY2sgPSByZWY7XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgX2luaXRpYWxTdGF0ZTIuZGVmYXVsdCwge1xuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnByb3BzLmluaXRpYWxTbGlkZVxuICAgIH0pO1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4gX2RlZmF1bHRQcm9wczIuZGVmYXVsdDtcbiAgfSxcbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuaW5pdCkge1xuICAgICAgdGhpcy5wcm9wcy5pbml0KCk7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgbW91bnRlZDogdHJ1ZVxuICAgIH0pO1xuICAgIHZhciBsYXp5TG9hZGVkTGlzdCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KHRoaXMucHJvcHMuY2hpbGRyZW4pOyBpKyspIHtcbiAgICAgIGlmIChpID49IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlICYmIGkgPCB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSArIHRoaXMucHJvcHMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgIGxhenlMb2FkZWRMaXN0LnB1c2goaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMubGF6eUxvYWQgJiYgdGhpcy5zdGF0ZS5sYXp5TG9hZGVkTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBsYXp5TG9hZGVkTGlzdDogbGF6eUxvYWRlZExpc3RcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIEhhY2sgZm9yIGF1dG9wbGF5IC0tIEluc3BlY3QgTGF0ZXJcbiAgICB0aGlzLmluaXRpYWxpemUodGhpcy5wcm9wcyk7XG4gICAgdGhpcy5hZGFwdEhlaWdodCgpO1xuXG4gICAgLy8gVG8gc3VwcG9ydCBzZXJ2ZXItc2lkZSByZW5kZXJpbmdcbiAgICBpZiAoIXdpbmRvdykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uV2luZG93UmVzaXplZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb25yZXNpemUnLCB0aGlzLm9uV2luZG93UmVzaXplZCk7XG4gICAgfVxuICB9LFxuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2spIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuZGV0YWNoRXZlbnQoJ29ucmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZWQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS5hdXRvUGxheVRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3RhdGUuYXV0b1BsYXlUaW1lcik7XG4gICAgfVxuICB9LFxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmICh0aGlzLnByb3BzLnNsaWNrR29UbyAhPSBuZXh0UHJvcHMuc2xpY2tHb1RvKSB7XG4gICAgICBpZiAoZmFsc2UpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdyZWFjdC1zbGljayBkZXByZWNhdGlvbiB3YXJuaW5nOiBzbGlja0dvVG8gcHJvcCBpcyBkZXByZWNhdGVkIGFuZCBpdCB3aWxsIGJlIHJlbW92ZWQgaW4gbmV4dCByZWxlYXNlLiBVc2Ugc2xpY2tHb1RvIG1ldGhvZCBpbnN0ZWFkJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgbWVzc2FnZTogJ2luZGV4JyxcbiAgICAgICAgaW5kZXg6IG5leHRQcm9wcy5zbGlja0dvVG8sXG4gICAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgPj0gbmV4dFByb3BzLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgdGhpcy51cGRhdGUobmV4dFByb3BzKTtcbiAgICAgIHRoaXMuY2hhbmdlU2xpZGUoe1xuICAgICAgICBtZXNzYWdlOiAnaW5kZXgnLFxuICAgICAgICBpbmRleDogbmV4dFByb3BzLmNoaWxkcmVuLmxlbmd0aCAtIG5leHRQcm9wcy5zbGlkZXNUb1Nob3csXG4gICAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVwZGF0ZShuZXh0UHJvcHMpO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5hZGFwdEhlaWdodCgpO1xuICB9LFxuICBvbldpbmRvd1Jlc2l6ZWQ6IGZ1bmN0aW9uIG9uV2luZG93UmVzaXplZCgpIHtcbiAgICB0aGlzLnVwZGF0ZSh0aGlzLnByb3BzKTtcbiAgICAvLyBhbmltYXRpbmcgc3RhdGUgc2hvdWxkIGJlIGNsZWFyZWQgd2hpbGUgcmVzaXppbmcsIG90aGVyd2lzZSBhdXRvcGxheSBzdG9wcyB3b3JraW5nXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBhbmltYXRpbmc6IGZhbHNlXG4gICAgfSk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2spO1xuICAgIGRlbGV0ZSB0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrO1xuICB9LFxuICBzbGlja1ByZXY6IGZ1bmN0aW9uIHNsaWNrUHJldigpIHtcbiAgICB0aGlzLmNoYW5nZVNsaWRlKHsgbWVzc2FnZTogJ3ByZXZpb3VzJyB9KTtcbiAgfSxcbiAgc2xpY2tOZXh0OiBmdW5jdGlvbiBzbGlja05leHQoKSB7XG4gICAgdGhpcy5jaGFuZ2VTbGlkZSh7IG1lc3NhZ2U6ICduZXh0JyB9KTtcbiAgfSxcbiAgc2xpY2tHb1RvOiBmdW5jdGlvbiBzbGlja0dvVG8oc2xpZGUpIHtcbiAgICB0eXBlb2Ygc2xpZGUgPT09ICdudW1iZXInICYmIHRoaXMuY2hhbmdlU2xpZGUoe1xuICAgICAgbWVzc2FnZTogJ2luZGV4JyxcbiAgICAgIGluZGV4OiBzbGlkZSxcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGVcbiAgICB9KTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9ICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkoJ3NsaWNrLWluaXRpYWxpemVkJywgJ3NsaWNrLXNsaWRlcicsIHRoaXMucHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAnc2xpY2stdmVydGljYWwnOiB0aGlzLnByb3BzLnZlcnRpY2FsXG4gICAgfSk7XG5cbiAgICB2YXIgdHJhY2tQcm9wcyA9IHtcbiAgICAgIGZhZGU6IHRoaXMucHJvcHMuZmFkZSxcbiAgICAgIGNzc0Vhc2U6IHRoaXMucHJvcHMuY3NzRWFzZSxcbiAgICAgIHNwZWVkOiB0aGlzLnByb3BzLnNwZWVkLFxuICAgICAgaW5maW5pdGU6IHRoaXMucHJvcHMuaW5maW5pdGUsXG4gICAgICBjZW50ZXJNb2RlOiB0aGlzLnByb3BzLmNlbnRlck1vZGUsXG4gICAgICBmb2N1c09uU2VsZWN0OiB0aGlzLnByb3BzLmZvY3VzT25TZWxlY3QgPyB0aGlzLnNlbGVjdEhhbmRsZXIgOiBudWxsLFxuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgIGxhenlMb2FkOiB0aGlzLnByb3BzLmxhenlMb2FkLFxuICAgICAgbGF6eUxvYWRlZExpc3Q6IHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QsXG4gICAgICBydGw6IHRoaXMucHJvcHMucnRsLFxuICAgICAgc2xpZGVXaWR0aDogdGhpcy5zdGF0ZS5zbGlkZVdpZHRoLFxuICAgICAgc2xpZGVzVG9TaG93OiB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyxcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsLFxuICAgICAgc2xpZGVDb3VudDogdGhpcy5zdGF0ZS5zbGlkZUNvdW50LFxuICAgICAgdHJhY2tTdHlsZTogdGhpcy5zdGF0ZS50cmFja1N0eWxlLFxuICAgICAgdmFyaWFibGVXaWR0aDogdGhpcy5wcm9wcy52YXJpYWJsZVdpZHRoXG4gICAgfTtcblxuICAgIHZhciBkb3RzO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuZG90cyA9PT0gdHJ1ZSAmJiB0aGlzLnN0YXRlLnNsaWRlQ291bnQgPj0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgIHZhciBkb3RQcm9wcyA9IHtcbiAgICAgICAgZG90c0NsYXNzOiB0aGlzLnByb3BzLmRvdHNDbGFzcyxcbiAgICAgICAgc2xpZGVDb3VudDogdGhpcy5zdGF0ZS5zbGlkZUNvdW50LFxuICAgICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93LFxuICAgICAgICBjdXJyZW50U2xpZGU6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLFxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCxcbiAgICAgICAgY2xpY2tIYW5kbGVyOiB0aGlzLmNoYW5nZVNsaWRlLFxuICAgICAgICBjaGlsZHJlbjogdGhpcy5wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgY3VzdG9tUGFnaW5nOiB0aGlzLnByb3BzLmN1c3RvbVBhZ2luZ1xuICAgICAgfTtcblxuICAgICAgZG90cyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9kb3RzLkRvdHMsIGRvdFByb3BzKTtcbiAgICB9XG5cbiAgICB2YXIgcHJldkFycm93LCBuZXh0QXJyb3c7XG5cbiAgICB2YXIgYXJyb3dQcm9wcyA9IHtcbiAgICAgIGluZmluaXRlOiB0aGlzLnByb3BzLmluZmluaXRlLFxuICAgICAgY2VudGVyTW9kZTogdGhpcy5wcm9wcy5jZW50ZXJNb2RlLFxuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgIHNsaWRlQ291bnQ6IHRoaXMuc3RhdGUuc2xpZGVDb3VudCxcbiAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3csXG4gICAgICBwcmV2QXJyb3c6IHRoaXMucHJvcHMucHJldkFycm93LFxuICAgICAgbmV4dEFycm93OiB0aGlzLnByb3BzLm5leHRBcnJvdyxcbiAgICAgIGNsaWNrSGFuZGxlcjogdGhpcy5jaGFuZ2VTbGlkZVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5wcm9wcy5hcnJvd3MpIHtcbiAgICAgIHByZXZBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hcnJvd3MuUHJldkFycm93LCBhcnJvd1Byb3BzKTtcbiAgICAgIG5leHRBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hcnJvd3MuTmV4dEFycm93LCBhcnJvd1Byb3BzKTtcbiAgICB9XG5cbiAgICB2YXIgdmVydGljYWxIZWlnaHRTdHlsZSA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbCkge1xuICAgICAgdmVydGljYWxIZWlnaHRTdHlsZSA9IHtcbiAgICAgICAgaGVpZ2h0OiB0aGlzLnN0YXRlLmxpc3RIZWlnaHRcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGNlbnRlclBhZGRpbmdTdHlsZSA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmNlbnRlck1vZGUgPT09IHRydWUpIHtcbiAgICAgICAgY2VudGVyUGFkZGluZ1N0eWxlID0ge1xuICAgICAgICAgIHBhZGRpbmc6ICcwcHggJyArIHRoaXMucHJvcHMuY2VudGVyUGFkZGluZ1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG4gICAgICAgIGNlbnRlclBhZGRpbmdTdHlsZSA9IHtcbiAgICAgICAgICBwYWRkaW5nOiB0aGlzLnByb3BzLmNlbnRlclBhZGRpbmcgKyAnIDBweCdcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbGlzdFN0eWxlID0gKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCB2ZXJ0aWNhbEhlaWdodFN0eWxlLCBjZW50ZXJQYWRkaW5nU3R5bGUpO1xuXG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBvbk1vdXNlRW50ZXI6IHRoaXMub25Jbm5lclNsaWRlckVudGVyLFxuICAgICAgICBvbk1vdXNlTGVhdmU6IHRoaXMub25Jbm5lclNsaWRlckxlYXZlLFxuICAgICAgICBvbk1vdXNlT3ZlcjogdGhpcy5vbklubmVyU2xpZGVyT3ZlclxuICAgICAgfSxcbiAgICAgIHByZXZBcnJvdyxcbiAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAge1xuICAgICAgICAgIHJlZjogdGhpcy5saXN0UmVmSGFuZGxlcixcbiAgICAgICAgICBjbGFzc05hbWU6ICdzbGljay1saXN0JyxcbiAgICAgICAgICBzdHlsZTogbGlzdFN0eWxlLFxuICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLnN3aXBlU3RhcnQsXG4gICAgICAgICAgb25Nb3VzZU1vdmU6IHRoaXMuc3RhdGUuZHJhZ2dpbmcgPyB0aGlzLnN3aXBlTW92ZSA6IG51bGwsXG4gICAgICAgICAgb25Nb3VzZVVwOiB0aGlzLnN3aXBlRW5kLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZTogdGhpcy5zdGF0ZS5kcmFnZ2luZyA/IHRoaXMuc3dpcGVFbmQgOiBudWxsLFxuICAgICAgICAgIG9uVG91Y2hTdGFydDogdGhpcy5zd2lwZVN0YXJ0LFxuICAgICAgICAgIG9uVG91Y2hNb3ZlOiB0aGlzLnN0YXRlLmRyYWdnaW5nID8gdGhpcy5zd2lwZU1vdmUgOiBudWxsLFxuICAgICAgICAgIG9uVG91Y2hFbmQ6IHRoaXMuc3dpcGVFbmQsXG4gICAgICAgICAgb25Ub3VjaENhbmNlbDogdGhpcy5zdGF0ZS5kcmFnZ2luZyA/IHRoaXMuc3dpcGVFbmQgOiBudWxsLFxuICAgICAgICAgIG9uS2V5RG93bjogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5ID8gdGhpcy5rZXlIYW5kbGVyIDogbnVsbCB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfdHJhY2suVHJhY2ssXG4gICAgICAgICAgX2V4dGVuZHMoeyByZWY6IHRoaXMudHJhY2tSZWZIYW5kbGVyIH0sIHRyYWNrUHJvcHMpLFxuICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgKVxuICAgICAgKSxcbiAgICAgIG5leHRBcnJvdyxcbiAgICAgIGRvdHNcbiAgICApO1xuICB9XG59KTtcblxuLyoqKi8gfSksXG4vKiAzMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF90cmFja0hlbHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQwKTtcblxudmFyIF9oZWxwZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCk7XG5cbnZhciBfaGVscGVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWxwZXJzKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgRXZlbnRIYW5kbGVycyA9IHtcbiAgLy8gRXZlbnQgaGFuZGxlciBmb3IgcHJldmlvdXMgYW5kIG5leHRcbiAgY2hhbmdlU2xpZGU6IGZ1bmN0aW9uIGNoYW5nZVNsaWRlKG9wdGlvbnMpIHtcbiAgICB2YXIgaW5kZXhPZmZzZXQsIHByZXZpb3VzSW50LCBzbGlkZU9mZnNldCwgdW5ldmVuT2Zmc2V0LCB0YXJnZXRTbGlkZTtcbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcztcbiAgICB2YXIgc2xpZGVzVG9TY3JvbGwgPSBfcHJvcHMuc2xpZGVzVG9TY3JvbGw7XG4gICAgdmFyIHNsaWRlc1RvU2hvdyA9IF9wcm9wcy5zbGlkZXNUb1Nob3c7XG4gICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgdmFyIHNsaWRlQ291bnQgPSBfc3RhdGUuc2xpZGVDb3VudDtcbiAgICB2YXIgY3VycmVudFNsaWRlID0gX3N0YXRlLmN1cnJlbnRTbGlkZTtcblxuICAgIHVuZXZlbk9mZnNldCA9IHNsaWRlQ291bnQgJSBzbGlkZXNUb1Njcm9sbCAhPT0gMDtcbiAgICBpbmRleE9mZnNldCA9IHVuZXZlbk9mZnNldCA/IDAgOiAoc2xpZGVDb3VudCAtIGN1cnJlbnRTbGlkZSkgJSBzbGlkZXNUb1Njcm9sbDtcblxuICAgIGlmIChvcHRpb25zLm1lc3NhZ2UgPT09ICdwcmV2aW91cycpIHtcbiAgICAgIHNsaWRlT2Zmc2V0ID0gaW5kZXhPZmZzZXQgPT09IDAgPyBzbGlkZXNUb1Njcm9sbCA6IHNsaWRlc1RvU2hvdyAtIGluZGV4T2Zmc2V0O1xuICAgICAgdGFyZ2V0U2xpZGUgPSBjdXJyZW50U2xpZGUgLSBzbGlkZU9mZnNldDtcbiAgICAgIGlmICh0aGlzLnByb3BzLmxhenlMb2FkKSB7XG4gICAgICAgIHByZXZpb3VzSW50ID0gY3VycmVudFNsaWRlIC0gc2xpZGVPZmZzZXQ7XG4gICAgICAgIHRhcmdldFNsaWRlID0gcHJldmlvdXNJbnQgPT09IC0xID8gc2xpZGVDb3VudCAtIDEgOiBwcmV2aW91c0ludDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMubWVzc2FnZSA9PT0gJ25leHQnKSB7XG4gICAgICBzbGlkZU9mZnNldCA9IGluZGV4T2Zmc2V0ID09PSAwID8gc2xpZGVzVG9TY3JvbGwgOiBpbmRleE9mZnNldDtcbiAgICAgIHRhcmdldFNsaWRlID0gY3VycmVudFNsaWRlICsgc2xpZGVPZmZzZXQ7XG4gICAgICBpZiAodGhpcy5wcm9wcy5sYXp5TG9hZCkge1xuICAgICAgICB0YXJnZXRTbGlkZSA9IChjdXJyZW50U2xpZGUgKyBzbGlkZXNUb1Njcm9sbCkgJSBzbGlkZUNvdW50ICsgaW5kZXhPZmZzZXQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1lc3NhZ2UgPT09ICdkb3RzJyB8fCBvcHRpb25zLm1lc3NhZ2UgPT09ICdjaGlsZHJlbicpIHtcbiAgICAgIC8vIENsaWNrIG9uIGRvdHNcbiAgICAgIHRhcmdldFNsaWRlID0gb3B0aW9ucy5pbmRleCAqIG9wdGlvbnMuc2xpZGVzVG9TY3JvbGw7XG4gICAgICBpZiAodGFyZ2V0U2xpZGUgPT09IG9wdGlvbnMuY3VycmVudFNsaWRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMubWVzc2FnZSA9PT0gJ2luZGV4Jykge1xuICAgICAgdGFyZ2V0U2xpZGUgPSBwYXJzZUludChvcHRpb25zLmluZGV4KTtcbiAgICAgIGlmICh0YXJnZXRTbGlkZSA9PT0gb3B0aW9ucy5jdXJyZW50U2xpZGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2xpZGVIYW5kbGVyKHRhcmdldFNsaWRlKTtcbiAgfSxcblxuICAvLyBBY2Nlc3NpYmxpdHkgaGFuZGxlciBmb3IgcHJldmlvdXMgYW5kIG5leHRcbiAga2V5SGFuZGxlcjogZnVuY3Rpb24ga2V5SGFuZGxlcihlKSB7XG4gICAgLy9Eb250IHNsaWRlIGlmIHRoZSBjdXJzb3IgaXMgaW5zaWRlIHRoZSBmb3JtIGZpZWxkcyBhbmQgYXJyb3cga2V5cyBhcmUgcHJlc3NlZFxuICAgIGlmICghZS50YXJnZXQudGFnTmFtZS5tYXRjaCgnVEVYVEFSRUF8SU5QVVR8U0VMRUNUJykpIHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT09IDM3ICYmIHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLnJ0bCA9PT0gdHJ1ZSA/ICduZXh0JyA6ICdwcmV2aW91cydcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzkgJiYgdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5ID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlU2xpZGUoe1xuICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMucnRsID09PSB0cnVlID8gJ3ByZXZpb3VzJyA6ICduZXh0J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIC8vIEZvY3VzIG9uIHNlbGVjdGluZyBhIHNsaWRlIChjbGljayBoYW5kbGVyIG9uIHRyYWNrKVxuICBzZWxlY3RIYW5kbGVyOiBmdW5jdGlvbiBzZWxlY3RIYW5kbGVyKG9wdGlvbnMpIHtcbiAgICB0aGlzLmNoYW5nZVNsaWRlKG9wdGlvbnMpO1xuICB9LFxuICBzd2lwZVN0YXJ0OiBmdW5jdGlvbiBzd2lwZVN0YXJ0KGUpIHtcbiAgICB2YXIgdG91Y2hlcywgcG9zWCwgcG9zWTtcblxuICAgIGlmICh0aGlzLnByb3BzLnN3aXBlID09PSBmYWxzZSB8fCAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQgJiYgdGhpcy5wcm9wcy5zd2lwZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuZHJhZ2dhYmxlID09PSBmYWxzZSAmJiBlLnR5cGUuaW5kZXhPZignbW91c2UnKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcG9zWCA9IGUudG91Y2hlcyAhPT0gdW5kZWZpbmVkID8gZS50b3VjaGVzWzBdLnBhZ2VYIDogZS5jbGllbnRYO1xuICAgIHBvc1kgPSBlLnRvdWNoZXMgIT09IHVuZGVmaW5lZCA/IGUudG91Y2hlc1swXS5wYWdlWSA6IGUuY2xpZW50WTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRyYWdnaW5nOiB0cnVlLFxuICAgICAgdG91Y2hPYmplY3Q6IHtcbiAgICAgICAgc3RhcnRYOiBwb3NYLFxuICAgICAgICBzdGFydFk6IHBvc1ksXG4gICAgICAgIGN1clg6IHBvc1gsXG4gICAgICAgIGN1clk6IHBvc1lcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc3dpcGVNb3ZlOiBmdW5jdGlvbiBzd2lwZU1vdmUoZSkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS5hbmltYXRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWwgJiYgdGhpcy5wcm9wcy5zd2lwZVRvU2xpZGUgJiYgdGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgdmFyIHN3aXBlTGVmdDtcbiAgICB2YXIgY3VyTGVmdCwgcG9zaXRpb25PZmZzZXQ7XG4gICAgdmFyIHRvdWNoT2JqZWN0ID0gdGhpcy5zdGF0ZS50b3VjaE9iamVjdDtcblxuICAgIGN1ckxlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgIHNsaWRlSW5kZXg6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLFxuICAgICAgdHJhY2tSZWY6IHRoaXMudHJhY2tcbiAgICB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSk7XG4gICAgdG91Y2hPYmplY3QuY3VyWCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5wYWdlWCA6IGUuY2xpZW50WDtcbiAgICB0b3VjaE9iamVjdC5jdXJZID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdLnBhZ2VZIDogZS5jbGllbnRZO1xuICAgIHRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID0gTWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3codG91Y2hPYmplY3QuY3VyWCAtIHRvdWNoT2JqZWN0LnN0YXJ0WCwgMikpKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsU3dpcGluZykge1xuICAgICAgdG91Y2hPYmplY3Quc3dpcGVMZW5ndGggPSBNYXRoLnJvdW5kKE1hdGguc3FydChNYXRoLnBvdyh0b3VjaE9iamVjdC5jdXJZIC0gdG91Y2hPYmplY3Quc3RhcnRZLCAyKSkpO1xuICAgIH1cblxuICAgIHBvc2l0aW9uT2Zmc2V0ID0gKHRoaXMucHJvcHMucnRsID09PSBmYWxzZSA/IDEgOiAtMSkgKiAodG91Y2hPYmplY3QuY3VyWCA+IHRvdWNoT2JqZWN0LnN0YXJ0WCA/IDEgOiAtMSk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcpIHtcbiAgICAgIHBvc2l0aW9uT2Zmc2V0ID0gdG91Y2hPYmplY3QuY3VyWSA+IHRvdWNoT2JqZWN0LnN0YXJ0WSA/IDEgOiAtMTtcbiAgICB9XG5cbiAgICB2YXIgY3VycmVudFNsaWRlID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGU7XG4gICAgdmFyIGRvdENvdW50ID0gTWF0aC5jZWlsKHRoaXMuc3RhdGUuc2xpZGVDb3VudCAvIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwpO1xuICAgIHZhciBzd2lwZURpcmVjdGlvbiA9IHRoaXMuc3dpcGVEaXJlY3Rpb24odGhpcy5zdGF0ZS50b3VjaE9iamVjdCk7XG4gICAgdmFyIHRvdWNoU3dpcGVMZW5ndGggPSB0b3VjaE9iamVjdC5zd2lwZUxlbmd0aDtcblxuICAgIGlmICh0aGlzLnByb3BzLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgaWYgKGN1cnJlbnRTbGlkZSA9PT0gMCAmJiBzd2lwZURpcmVjdGlvbiA9PT0gJ3JpZ2h0JyB8fCBjdXJyZW50U2xpZGUgKyAxID49IGRvdENvdW50ICYmIHN3aXBlRGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgdG91Y2hTd2lwZUxlbmd0aCA9IHRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoICogdGhpcy5wcm9wcy5lZGdlRnJpY3Rpb247XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZWRnZURyYWdnZWQgPT09IGZhbHNlICYmIHRoaXMucHJvcHMuZWRnZUV2ZW50KSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5lZGdlRXZlbnQoc3dpcGVEaXJlY3Rpb24pO1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlZGdlRHJhZ2dlZDogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLnN3aXBlZCA9PT0gZmFsc2UgJiYgdGhpcy5wcm9wcy5zd2lwZUV2ZW50KSB7XG4gICAgICB0aGlzLnByb3BzLnN3aXBlRXZlbnQoc3dpcGVEaXJlY3Rpb24pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHN3aXBlZDogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucHJvcHMudmVydGljYWwpIHtcbiAgICAgIHN3aXBlTGVmdCA9IGN1ckxlZnQgKyB0b3VjaFN3aXBlTGVuZ3RoICogcG9zaXRpb25PZmZzZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXBlTGVmdCA9IGN1ckxlZnQgKyB0b3VjaFN3aXBlTGVuZ3RoICogKHRoaXMuc3RhdGUubGlzdEhlaWdodCAvIHRoaXMuc3RhdGUubGlzdFdpZHRoKSAqIHBvc2l0aW9uT2Zmc2V0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsU3dpcGluZykge1xuICAgICAgc3dpcGVMZWZ0ID0gY3VyTGVmdCArIHRvdWNoU3dpcGVMZW5ndGggKiBwb3NpdGlvbk9mZnNldDtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHRvdWNoT2JqZWN0OiB0b3VjaE9iamVjdCxcbiAgICAgIHN3aXBlTGVmdDogc3dpcGVMZWZ0LFxuICAgICAgdHJhY2tTdHlsZTogKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0NTUykoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgbGVmdDogc3dpcGVMZWZ0IH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKVxuICAgIH0pO1xuXG4gICAgaWYgKE1hdGguYWJzKHRvdWNoT2JqZWN0LmN1clggLSB0b3VjaE9iamVjdC5zdGFydFgpIDwgTWF0aC5hYnModG91Y2hPYmplY3QuY3VyWSAtIHRvdWNoT2JqZWN0LnN0YXJ0WSkgKiAwLjgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID4gNCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSxcbiAgZ2V0TmF2aWdhYmxlSW5kZXhlczogZnVuY3Rpb24gZ2V0TmF2aWdhYmxlSW5kZXhlcygpIHtcbiAgICB2YXIgbWF4ID0gdm9pZCAwO1xuICAgIHZhciBicmVha1BvaW50ID0gMDtcbiAgICB2YXIgY291bnRlciA9IDA7XG4gICAgdmFyIGluZGV4ZXMgPSBbXTtcblxuICAgIGlmICghdGhpcy5wcm9wcy5pbmZpbml0ZSkge1xuICAgICAgbWF4ID0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVha1BvaW50ID0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cgKiAtMTtcbiAgICAgIGNvdW50ZXIgPSB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyAqIC0xO1xuICAgICAgbWF4ID0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50ICogMjtcbiAgICB9XG5cbiAgICB3aGlsZSAoYnJlYWtQb2ludCA8IG1heCkge1xuICAgICAgaW5kZXhlcy5wdXNoKGJyZWFrUG9pbnQpO1xuICAgICAgYnJlYWtQb2ludCA9IGNvdW50ZXIgKyB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsO1xuXG4gICAgICBjb3VudGVyICs9IHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwgPD0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cgPyB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsIDogdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3c7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4ZXM7XG4gIH0sXG4gIGNoZWNrTmF2aWdhYmxlOiBmdW5jdGlvbiBjaGVja05hdmlnYWJsZShpbmRleCkge1xuICAgIHZhciBuYXZpZ2FibGVzID0gdGhpcy5nZXROYXZpZ2FibGVJbmRleGVzKCk7XG4gICAgdmFyIHByZXZOYXZpZ2FibGUgPSAwO1xuXG4gICAgaWYgKGluZGV4ID4gbmF2aWdhYmxlc1tuYXZpZ2FibGVzLmxlbmd0aCAtIDFdKSB7XG4gICAgICBpbmRleCA9IG5hdmlnYWJsZXNbbmF2aWdhYmxlcy5sZW5ndGggLSAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgbiBpbiBuYXZpZ2FibGVzKSB7XG4gICAgICAgIGlmIChpbmRleCA8IG5hdmlnYWJsZXNbbl0pIHtcbiAgICAgICAgICBpbmRleCA9IHByZXZOYXZpZ2FibGU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBwcmV2TmF2aWdhYmxlID0gbmF2aWdhYmxlc1tuXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH0sXG4gIGdldFNsaWRlQ291bnQ6IGZ1bmN0aW9uIGdldFNsaWRlQ291bnQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBjZW50ZXJPZmZzZXQgPSB0aGlzLnByb3BzLmNlbnRlck1vZGUgPyB0aGlzLnN0YXRlLnNsaWRlV2lkdGggKiBNYXRoLmZsb29yKHRoaXMucHJvcHMuc2xpZGVzVG9TaG93IC8gMikgOiAwO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuc3dpcGVUb1NsaWRlKSB7XG4gICAgICB2YXIgc3dpcGVkU2xpZGUgPSB2b2lkIDA7XG5cbiAgICAgIHZhciBzbGlja0xpc3QgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5saXN0KTtcblxuICAgICAgdmFyIHNsaWRlcyA9IHNsaWNrTGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpY2stc2xpZGUnKTtcblxuICAgICAgQXJyYXkuZnJvbShzbGlkZXMpLmV2ZXJ5KGZ1bmN0aW9uIChzbGlkZSkge1xuICAgICAgICBpZiAoIV90aGlzLnByb3BzLnZlcnRpY2FsKSB7XG4gICAgICAgICAgaWYgKHNsaWRlLm9mZnNldExlZnQgLSBjZW50ZXJPZmZzZXQgKyBfdGhpcy5nZXRXaWR0aChzbGlkZSkgLyAyID4gX3RoaXMuc3RhdGUuc3dpcGVMZWZ0ICogLTEpIHtcbiAgICAgICAgICAgIHN3aXBlZFNsaWRlID0gc2xpZGU7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzbGlkZS5vZmZzZXRUb3AgKyBfdGhpcy5nZXRIZWlnaHQoc2xpZGUpIC8gMiA+IF90aGlzLnN0YXRlLnN3aXBlTGVmdCAqIC0xKSB7XG4gICAgICAgICAgICBzd2lwZWRTbGlkZSA9IHNsaWRlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBzbGlkZXNUcmF2ZXJzZWQgPSBNYXRoLmFicyhzd2lwZWRTbGlkZS5kYXRhc2V0LmluZGV4IC0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUpIHx8IDE7XG5cbiAgICAgIHJldHVybiBzbGlkZXNUcmF2ZXJzZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsO1xuICAgIH1cbiAgfSxcblxuICBzd2lwZUVuZDogZnVuY3Rpb24gc3dpcGVFbmQoZSkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuc3dpcGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdG91Y2hPYmplY3QgPSB0aGlzLnN0YXRlLnRvdWNoT2JqZWN0O1xuICAgIHZhciBtaW5Td2lwZSA9IHRoaXMuc3RhdGUubGlzdFdpZHRoIC8gdGhpcy5wcm9wcy50b3VjaFRocmVzaG9sZDtcbiAgICB2YXIgc3dpcGVEaXJlY3Rpb24gPSB0aGlzLnN3aXBlRGlyZWN0aW9uKHRvdWNoT2JqZWN0KTtcblxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsU3dpcGluZykge1xuICAgICAgbWluU3dpcGUgPSB0aGlzLnN0YXRlLmxpc3RIZWlnaHQgLyB0aGlzLnByb3BzLnRvdWNoVGhyZXNob2xkO1xuICAgIH1cblxuICAgIC8vIHJlc2V0IHRoZSBzdGF0ZSBvZiB0b3VjaCByZWxhdGVkIHN0YXRlIHZhcmlhYmxlcy5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgIGVkZ2VEcmFnZ2VkOiBmYWxzZSxcbiAgICAgIHN3aXBlZDogZmFsc2UsXG4gICAgICBzd2lwZUxlZnQ6IG51bGwsXG4gICAgICB0b3VjaE9iamVjdDoge31cbiAgICB9KTtcbiAgICAvLyBGaXggZm9yICMxM1xuICAgIGlmICghdG91Y2hPYmplY3Quc3dpcGVMZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID4gbWluU3dpcGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgdmFyIHNsaWRlQ291bnQgPSB2b2lkIDAsXG4gICAgICAgICAgbmV3U2xpZGUgPSB2b2lkIDA7XG5cbiAgICAgIHN3aXRjaCAoc3dpcGVEaXJlY3Rpb24pIHtcblxuICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgY2FzZSAnZG93bic6XG4gICAgICAgICAgbmV3U2xpZGUgPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSArIHRoaXMuZ2V0U2xpZGVDb3VudCgpO1xuICAgICAgICAgIHNsaWRlQ291bnQgPSB0aGlzLnByb3BzLnN3aXBlVG9TbGlkZSA/IHRoaXMuY2hlY2tOYXZpZ2FibGUobmV3U2xpZGUpIDogbmV3U2xpZGU7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50RGlyZWN0aW9uID0gMDtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgICBuZXdTbGlkZSA9IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlIC0gdGhpcy5nZXRTbGlkZUNvdW50KCk7XG4gICAgICAgICAgc2xpZGVDb3VudCA9IHRoaXMucHJvcHMuc3dpcGVUb1NsaWRlID8gdGhpcy5jaGVja05hdmlnYWJsZShuZXdTbGlkZSkgOiBuZXdTbGlkZTtcbiAgICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnREaXJlY3Rpb24gPSAxO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgc2xpZGVDb3VudCA9IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlO1xuXG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2xpZGVIYW5kbGVyKHNsaWRlQ291bnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBZGp1c3QgdGhlIHRyYWNrIGJhY2sgdG8gaXQncyBvcmlnaW5hbCBwb3NpdGlvbi5cbiAgICAgIHZhciBjdXJyZW50TGVmdCA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tMZWZ0KSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgICBzbGlkZUluZGV4OiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgICAgdHJhY2tSZWY6IHRoaXMudHJhY2tcbiAgICAgIH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHRyYWNrU3R5bGU6ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tBbmltYXRlQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiBjdXJyZW50TGVmdCB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSlcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgb25Jbm5lclNsaWRlckVudGVyOiBmdW5jdGlvbiBvbklubmVyU2xpZGVyRW50ZXIoZSkge1xuICAgIGlmICh0aGlzLnByb3BzLmF1dG9wbGF5ICYmIHRoaXMucHJvcHMucGF1c2VPbkhvdmVyKSB7XG4gICAgICB0aGlzLnBhdXNlKCk7XG4gICAgfVxuICB9LFxuICBvbklubmVyU2xpZGVyT3ZlcjogZnVuY3Rpb24gb25Jbm5lclNsaWRlck92ZXIoZSkge1xuICAgIGlmICh0aGlzLnByb3BzLmF1dG9wbGF5ICYmIHRoaXMucHJvcHMucGF1c2VPbkhvdmVyKSB7XG4gICAgICB0aGlzLnBhdXNlKCk7XG4gICAgfVxuICB9LFxuICBvbklubmVyU2xpZGVyTGVhdmU6IGZ1bmN0aW9uIG9uSW5uZXJTbGlkZXJMZWF2ZShlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b3BsYXkgJiYgdGhpcy5wcm9wcy5wYXVzZU9uSG92ZXIpIHtcbiAgICAgIHRoaXMuYXV0b1BsYXkoKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEV2ZW50SGFuZGxlcnM7XG5cbi8qKiovIH0pLFxuLyogMzE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9pbm5lclNsaWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzE1KTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXG52YXIgX2pzb24ybXEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKTtcblxudmFyIF9qc29uMm1xMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2pzb24ybXEpO1xuXG52YXIgX3JlYWN0UmVzcG9uc2l2ZU1peGluID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOTIpO1xuXG52YXIgX3JlYWN0UmVzcG9uc2l2ZU1peGluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0UmVzcG9uc2l2ZU1peGluKTtcblxudmFyIF9kZWZhdWx0UHJvcHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7XG5cbnZhciBfZGVmYXVsdFByb3BzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmF1bHRQcm9wcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBTbGlkZXIgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ1NsaWRlcicsXG5cbiAgbWl4aW5zOiBbX3JlYWN0UmVzcG9uc2l2ZU1peGluMi5kZWZhdWx0XSxcbiAgaW5uZXJTbGlkZXI6IG51bGwsXG4gIGlubmVyU2xpZGVyUmVmSGFuZGxlcjogZnVuY3Rpb24gaW5uZXJTbGlkZXJSZWZIYW5kbGVyKHJlZikge1xuICAgIHRoaXMuaW5uZXJTbGlkZXIgPSByZWY7XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBicmVha3BvaW50OiBudWxsXG4gICAgfTtcbiAgfSxcbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICh0aGlzLnByb3BzLnJlc3BvbnNpdmUpIHtcbiAgICAgIHZhciBicmVha3BvaW50cyA9IHRoaXMucHJvcHMucmVzcG9uc2l2ZS5tYXAoZnVuY3Rpb24gKGJyZWFrcHQpIHtcbiAgICAgICAgcmV0dXJuIGJyZWFrcHQuYnJlYWtwb2ludDtcbiAgICAgIH0pO1xuICAgICAgYnJlYWtwb2ludHMuc29ydChmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICByZXR1cm4geCAtIHk7XG4gICAgICB9KTtcblxuICAgICAgYnJlYWtwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoYnJlYWtwb2ludCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGJRdWVyeTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgYlF1ZXJ5ID0gKDAsIF9qc29uMm1xMi5kZWZhdWx0KSh7IG1pbldpZHRoOiAwLCBtYXhXaWR0aDogYnJlYWtwb2ludCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiUXVlcnkgPSAoMCwgX2pzb24ybXEyLmRlZmF1bHQpKHsgbWluV2lkdGg6IGJyZWFrcG9pbnRzW2luZGV4IC0gMV0sIG1heFdpZHRoOiBicmVha3BvaW50IH0pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLm1lZGlhKGJRdWVyeSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgYnJlYWtwb2ludDogYnJlYWtwb2ludCB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVnaXN0ZXIgbWVkaWEgcXVlcnkgZm9yIGZ1bGwgc2NyZWVuLiBOZWVkIHRvIHN1cHBvcnQgcmVzaXplIGZyb20gc21hbGwgdG8gbGFyZ2VcbiAgICAgIHZhciBxdWVyeSA9ICgwLCBfanNvbjJtcTIuZGVmYXVsdCkoeyBtaW5XaWR0aDogYnJlYWtwb2ludHMuc2xpY2UoLTEpWzBdIH0pO1xuXG4gICAgICB0aGlzLm1lZGlhKHF1ZXJ5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHsgYnJlYWtwb2ludDogbnVsbCB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBzbGlja1ByZXY6IGZ1bmN0aW9uIHNsaWNrUHJldigpIHtcbiAgICB0aGlzLmlubmVyU2xpZGVyLnNsaWNrUHJldigpO1xuICB9LFxuXG4gIHNsaWNrTmV4dDogZnVuY3Rpb24gc2xpY2tOZXh0KCkge1xuICAgIHRoaXMuaW5uZXJTbGlkZXIuc2xpY2tOZXh0KCk7XG4gIH0sXG5cbiAgc2xpY2tHb1RvOiBmdW5jdGlvbiBzbGlja0dvVG8oc2xpZGUpIHtcbiAgICB0aGlzLmlubmVyU2xpZGVyLnNsaWNrR29UbyhzbGlkZSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgc2V0dGluZ3M7XG4gICAgdmFyIG5ld1Byb3BzO1xuICAgIGlmICh0aGlzLnN0YXRlLmJyZWFrcG9pbnQpIHtcbiAgICAgIG5ld1Byb3BzID0gdGhpcy5wcm9wcy5yZXNwb25zaXZlLmZpbHRlcihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICByZXR1cm4gcmVzcC5icmVha3BvaW50ID09PSBfdGhpczIuc3RhdGUuYnJlYWtwb2ludDtcbiAgICAgIH0pO1xuICAgICAgc2V0dGluZ3MgPSBuZXdQcm9wc1swXS5zZXR0aW5ncyA9PT0gJ3Vuc2xpY2snID8gJ3Vuc2xpY2snIDogKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCB0aGlzLnByb3BzLCBuZXdQcm9wc1swXS5zZXR0aW5ncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldHRpbmdzID0gKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCBfZGVmYXVsdFByb3BzMi5kZWZhdWx0LCB0aGlzLnByb3BzKTtcbiAgICB9XG5cbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgIGNoaWxkcmVuID0gW2NoaWxkcmVuXTtcbiAgICB9XG5cbiAgICAvLyBDaGlsZHJlbiBtYXkgY29udGFpbiBmYWxzZSBvciBudWxsLCBzbyB3ZSBzaG91bGQgZmlsdGVyIHRoZW1cbiAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHJldHVybiAhIWNoaWxkO1xuICAgIH0pO1xuXG4gICAgaWYgKHNldHRpbmdzID09PSAndW5zbGljaycpIHtcbiAgICAgIC8vIGlmICd1bnNsaWNrJyByZXNwb25zaXZlIGJyZWFrcG9pbnQgc2V0dGluZyB1c2VkLCBqdXN0IHJldHVybiB0aGUgPFNsaWRlcj4gdGFnIG5lc3RlZCBIVE1MXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICBudWxsLFxuICAgICAgICBjaGlsZHJlblxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfaW5uZXJTbGlkZXIuSW5uZXJTbGlkZXIsXG4gICAgICAgIF9leHRlbmRzKHsgcmVmOiB0aGlzLmlubmVyU2xpZGVyUmVmSGFuZGxlciB9LCBzZXR0aW5ncyksXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICApO1xuICAgIH1cbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU2xpZGVyO1xuXG4vKioqLyB9KSxcbi8qIDMxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5UcmFjayA9IHVuZGVmaW5lZDtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbnZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXG52YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBnZXRTbGlkZUNsYXNzZXMgPSBmdW5jdGlvbiBnZXRTbGlkZUNsYXNzZXMoc3BlYykge1xuICB2YXIgc2xpY2tBY3RpdmUsIHNsaWNrQ2VudGVyLCBzbGlja0Nsb25lZDtcbiAgdmFyIGNlbnRlck9mZnNldCwgaW5kZXg7XG5cbiAgaWYgKHNwZWMucnRsKSB7XG4gICAgaW5kZXggPSBzcGVjLnNsaWRlQ291bnQgLSAxIC0gc3BlYy5pbmRleDtcbiAgfSBlbHNlIHtcbiAgICBpbmRleCA9IHNwZWMuaW5kZXg7XG4gIH1cblxuICBzbGlja0Nsb25lZCA9IGluZGV4IDwgMCB8fCBpbmRleCA+PSBzcGVjLnNsaWRlQ291bnQ7XG4gIGlmIChzcGVjLmNlbnRlck1vZGUpIHtcbiAgICBjZW50ZXJPZmZzZXQgPSBNYXRoLmZsb29yKHNwZWMuc2xpZGVzVG9TaG93IC8gMik7XG4gICAgc2xpY2tDZW50ZXIgPSAoaW5kZXggLSBzcGVjLmN1cnJlbnRTbGlkZSkgJSBzcGVjLnNsaWRlQ291bnQgPT09IDA7XG4gICAgaWYgKGluZGV4ID4gc3BlYy5jdXJyZW50U2xpZGUgLSBjZW50ZXJPZmZzZXQgLSAxICYmIGluZGV4IDw9IHNwZWMuY3VycmVudFNsaWRlICsgY2VudGVyT2Zmc2V0KSB7XG4gICAgICBzbGlja0FjdGl2ZSA9IHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNsaWNrQWN0aXZlID0gc3BlYy5jdXJyZW50U2xpZGUgPD0gaW5kZXggJiYgaW5kZXggPCBzcGVjLmN1cnJlbnRTbGlkZSArIHNwZWMuc2xpZGVzVG9TaG93O1xuICB9XG4gIHJldHVybiAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKHtcbiAgICAnc2xpY2stc2xpZGUnOiB0cnVlLFxuICAgICdzbGljay1hY3RpdmUnOiBzbGlja0FjdGl2ZSxcbiAgICAnc2xpY2stY2VudGVyJzogc2xpY2tDZW50ZXIsXG4gICAgJ3NsaWNrLWNsb25lZCc6IHNsaWNrQ2xvbmVkXG4gIH0pO1xufTtcblxudmFyIGdldFNsaWRlU3R5bGUgPSBmdW5jdGlvbiBnZXRTbGlkZVN0eWxlKHNwZWMpIHtcbiAgdmFyIHN0eWxlID0ge307XG5cbiAgaWYgKHNwZWMudmFyaWFibGVXaWR0aCA9PT0gdW5kZWZpbmVkIHx8IHNwZWMudmFyaWFibGVXaWR0aCA9PT0gZmFsc2UpIHtcbiAgICBzdHlsZS53aWR0aCA9IHNwZWMuc2xpZGVXaWR0aDtcbiAgfVxuXG4gIGlmIChzcGVjLmZhZGUpIHtcbiAgICBzdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgc3R5bGUubGVmdCA9IC1zcGVjLmluZGV4ICogc3BlYy5zbGlkZVdpZHRoO1xuICAgIHN0eWxlLm9wYWNpdHkgPSBzcGVjLmN1cnJlbnRTbGlkZSA9PT0gc3BlYy5pbmRleCA/IDEgOiAwO1xuICAgIHN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAnICsgc3BlYy5zcGVlZCArICdtcyAnICsgc3BlYy5jc3NFYXNlO1xuICAgIHN0eWxlLldlYmtpdFRyYW5zaXRpb24gPSAnb3BhY2l0eSAnICsgc3BlYy5zcGVlZCArICdtcyAnICsgc3BlYy5jc3NFYXNlO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufTtcblxudmFyIGdldEtleSA9IGZ1bmN0aW9uIGdldEtleShjaGlsZCwgZmFsbGJhY2tLZXkpIHtcbiAgLy8ga2V5IGNvdWxkIGJlIGEgemVyb1xuICByZXR1cm4gY2hpbGQua2V5ID09PSBudWxsIHx8IGNoaWxkLmtleSA9PT0gdW5kZWZpbmVkID8gZmFsbGJhY2tLZXkgOiBjaGlsZC5rZXk7XG59O1xuXG52YXIgcmVuZGVyU2xpZGVzID0gZnVuY3Rpb24gcmVuZGVyU2xpZGVzKHNwZWMpIHtcbiAgdmFyIGtleTtcbiAgdmFyIHNsaWRlcyA9IFtdO1xuICB2YXIgcHJlQ2xvbmVTbGlkZXMgPSBbXTtcbiAgdmFyIHBvc3RDbG9uZVNsaWRlcyA9IFtdO1xuICB2YXIgY291bnQgPSBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uY291bnQoc3BlYy5jaGlsZHJlbik7XG5cbiAgX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmZvckVhY2goc3BlYy5jaGlsZHJlbiwgZnVuY3Rpb24gKGVsZW0sIGluZGV4KSB7XG4gICAgdmFyIGNoaWxkID0gdm9pZCAwO1xuICAgIHZhciBjaGlsZE9uQ2xpY2tPcHRpb25zID0ge1xuICAgICAgbWVzc2FnZTogJ2NoaWxkcmVuJyxcbiAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiBzcGVjLnNsaWRlc1RvU2Nyb2xsLFxuICAgICAgY3VycmVudFNsaWRlOiBzcGVjLmN1cnJlbnRTbGlkZVxuICAgIH07XG5cbiAgICBpZiAoIXNwZWMubGF6eUxvYWQgfCAoc3BlYy5sYXp5TG9hZCAmJiBzcGVjLmxhenlMb2FkZWRMaXN0LmluZGV4T2YoaW5kZXgpID49IDApKSB7XG4gICAgICBjaGlsZCA9IGVsZW07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoaWxkID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIG51bGwpO1xuICAgIH1cbiAgICB2YXIgY2hpbGRTdHlsZSA9IGdldFNsaWRlU3R5bGUoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCBzcGVjLCB7IGluZGV4OiBpbmRleCB9KSk7XG4gICAgdmFyIHNsaWNrQ2xhc3NlcyA9IGdldFNsaWRlQ2xhc3NlcygoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBpbmRleDogaW5kZXggfSwgc3BlYykpO1xuICAgIHZhciBjc3NDbGFzc2VzO1xuXG4gICAgaWYgKGNoaWxkLnByb3BzLmNsYXNzTmFtZSkge1xuICAgICAgY3NzQ2xhc3NlcyA9ICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkoc2xpY2tDbGFzc2VzLCBjaGlsZC5wcm9wcy5jbGFzc05hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjc3NDbGFzc2VzID0gc2xpY2tDbGFzc2VzO1xuICAgIH1cblxuICAgIHZhciBvbkNsaWNrID0gZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICBjaGlsZC5wcm9wcyAmJiBjaGlsZC5wcm9wcy5vbkNsaWNrICYmIGNoaWxkLnByb3BzLm9uQ2xpY2soZSk7XG4gICAgICBpZiAoc3BlYy5mb2N1c09uU2VsZWN0KSB7XG4gICAgICAgIHNwZWMuZm9jdXNPblNlbGVjdChjaGlsZE9uQ2xpY2tPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2xpZGVzLnB1c2goX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAga2V5OiAnb3JpZ2luYWwnICsgZ2V0S2V5KGNoaWxkLCBpbmRleCksXG4gICAgICAnZGF0YS1pbmRleCc6IGluZGV4LFxuICAgICAgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLFxuICAgICAgdGFiSW5kZXg6ICctMScsXG4gICAgICBzdHlsZTogKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgb3V0bGluZTogJ25vbmUnIH0sIGNoaWxkLnByb3BzLnN0eWxlIHx8IHt9LCBjaGlsZFN0eWxlKSxcbiAgICAgIG9uQ2xpY2s6IG9uQ2xpY2tcbiAgICB9KSk7XG5cbiAgICAvLyB2YXJpYWJsZVdpZHRoIGRvZXNuJ3Qgd3JhcCBwcm9wZXJseS5cbiAgICBpZiAoc3BlYy5pbmZpbml0ZSAmJiBzcGVjLmZhZGUgPT09IGZhbHNlKSB7XG4gICAgICB2YXIgaW5maW5pdGVDb3VudCA9IHNwZWMudmFyaWFibGVXaWR0aCA/IHNwZWMuc2xpZGVzVG9TaG93ICsgMSA6IHNwZWMuc2xpZGVzVG9TaG93O1xuXG4gICAgICBpZiAoaW5kZXggPj0gY291bnQgLSBpbmZpbml0ZUNvdW50KSB7XG4gICAgICAgIGtleSA9IC0oY291bnQgLSBpbmRleCk7XG4gICAgICAgIHByZUNsb25lU2xpZGVzLnB1c2goX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICAgIGtleTogJ3ByZWNsb25lZCcgKyBnZXRLZXkoY2hpbGQsIGtleSksXG4gICAgICAgICAgJ2RhdGEtaW5kZXgnOiBrZXksXG4gICAgICAgICAgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLFxuICAgICAgICAgIHN0eWxlOiAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe30sIGNoaWxkLnByb3BzLnN0eWxlIHx8IHt9LCBjaGlsZFN0eWxlKSxcbiAgICAgICAgICBvbkNsaWNrOiBvbkNsaWNrXG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGluZGV4IDwgaW5maW5pdGVDb3VudCkge1xuICAgICAgICBrZXkgPSBjb3VudCArIGluZGV4O1xuICAgICAgICBwb3N0Q2xvbmVTbGlkZXMucHVzaChfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICAgICAga2V5OiAncG9zdGNsb25lZCcgKyBnZXRLZXkoY2hpbGQsIGtleSksXG4gICAgICAgICAgJ2RhdGEtaW5kZXgnOiBrZXksXG4gICAgICAgICAgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLFxuICAgICAgICAgIHN0eWxlOiAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe30sIGNoaWxkLnByb3BzLnN0eWxlIHx8IHt9LCBjaGlsZFN0eWxlKSxcbiAgICAgICAgICBvbkNsaWNrOiBvbkNsaWNrXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGlmIChzcGVjLnJ0bCkge1xuICAgIHJldHVybiBwcmVDbG9uZVNsaWRlcy5jb25jYXQoc2xpZGVzLCBwb3N0Q2xvbmVTbGlkZXMpLnJldmVyc2UoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcHJlQ2xvbmVTbGlkZXMuY29uY2F0KHNsaWRlcywgcG9zdENsb25lU2xpZGVzKTtcbiAgfVxufTtcblxudmFyIFRyYWNrID0gZXhwb3J0cy5UcmFjayA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnVHJhY2snLFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBzbGlkZXMgPSByZW5kZXJTbGlkZXMuY2FsbCh0aGlzLCB0aGlzLnByb3BzKTtcbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgY2xhc3NOYW1lOiAnc2xpY2stdHJhY2snLCBzdHlsZTogdGhpcy5wcm9wcy50cmFja1N0eWxlIH0sXG4gICAgICBzbGlkZXNcbiAgICApO1xuICB9XG59KTtcblxuLyoqKi8gfSksXG4vKiAzMTkgKi8sXG4vKiAzMjAgKi8sXG4vKiAzMjEgKi8sXG4vKiAzMjIgKi8sXG4vKiAzMjMgKi8sXG4vKiAzMjQgKi8sXG4vKiAzMjUgKi8sXG4vKiAzMjYgKi8sXG4vKiAzMjcgKi8sXG4vKiAzMjggKi8sXG4vKiAzMjkgKi8sXG4vKiAzMzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmZ1bmN0aW9uIGNyZWF0ZVRodW5rTWlkZGxld2FyZShleHRyYUFyZ3VtZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2gsXG4gICAgICAgIGdldFN0YXRlID0gX3JlZi5nZXRTdGF0ZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdGlvbihkaXNwYXRjaCwgZ2V0U3RhdGUsIGV4dHJhQXJndW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5leHQoYWN0aW9uKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcbn1cblxudmFyIHRodW5rID0gY3JlYXRlVGh1bmtNaWRkbGV3YXJlKCk7XG50aHVuay53aXRoRXh0cmFBcmd1bWVudCA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gdGh1bms7XG5cbi8qKiovIH0pLFxuLyogMzMxICovLFxuLyogMzMyICovLFxuLyogMzMzICovLFxuLyogMzM0ICovLFxuLyogMzM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgQnVmZmVyKSB7dmFyIHJlcXVpcmU7XG5cbi8qIGVzbGludCBuby11bmRlZmluZWQ6IDAgKi9cblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxudmFyIGFzc2lnbiA9IHZvaWQgMDtcblxuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduID09PSAnZnVuY3Rpb24nKSB7XG4gIGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG59IGVsc2Uge1xuICBhc3NpZ24gPSBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuXG4gICAgdmFyIHByb3BlcnR5T2JqZWN0cyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgIGlmIChwcm9wZXJ0eU9iamVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgcHJvcGVydHlPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgdmFyIG5leHRLZXkgPSB2b2lkIDA7XG5cbiAgICAgICAgICBmb3IgKG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XG4gICAgICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG59XG5cbnZhciBhc3NpZ24kMSA9IGFzc2lnbjtcblxudmFyIGluY2x1ZGVzID0gdm9pZCAwO1xuXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xuICBpbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzKGFycmF5LCBzZWFyY2hFbGVtZW50KSB7XG4gICAgdmFyIE9iamVjdGlmaWVkQXJyYXkgPSBPYmplY3QoYXJyYXkpO1xuICAgIHZhciBsZW5ndGggPSBwYXJzZUludChPYmplY3RpZmllZEFycmF5Lmxlbmd0aCwgMTApIHx8IDA7XG5cbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0SW5kZXggPSBwYXJzZUludChhcmd1bWVudHNbMl0sIDEwKSB8fCAwO1xuICAgIHZhciBpbmRleCA9IHZvaWQgMDtcblxuICAgIGlmIChzdGFydEluZGV4ID49IDApIHtcbiAgICAgIGluZGV4ID0gc3RhcnRJbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXggPSBsZW5ndGggKyBzdGFydEluZGV4O1xuXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IE9iamVjdGlmaWVkQXJyYXlbaW5kZXhdO1xuXG4gICAgICAvKiBlc2xpbnQgbm8tc2VsZi1jb21wYXJlOjAgKi9cbiAgICAgIGlmIChzZWFyY2hFbGVtZW50ID09PSBjdXJyZW50RWxlbWVudCB8fCBzZWFyY2hFbGVtZW50ICE9PSBzZWFyY2hFbGVtZW50ICYmIGN1cnJlbnRFbGVtZW50ICE9PSBjdXJyZW50RWxlbWVudCkge1xuICAgICAgICAvLyBOYU4gIT09IE5hTlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGluZGV4Kys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xufSBlbHNlIHtcbiAgaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyhhcnJheSkge1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmNsdWRlcy5hcHBseShhcnJheSwgYXJncyk7XG4gIH07XG59XG5cbnZhciBpbmNsdWRlcyQxID0gaW5jbHVkZXM7XG5cbmZ1bmN0aW9uIHdyYXAoZnVuYywgc3VwZXJGdW5jKSB7XG4gIGZ1bmN0aW9uIHN1cGVyV3JhcHBlcigpIHtcbiAgICB2YXIgb3JpZ2luYWxTdXBlciA9IHRoaXNbJ3N1cGVyJ107XG5cbiAgICB0aGlzWydzdXBlciddID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHN1cGVyRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICB2YXIgcmV0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpc1snc3VwZXInXSA9IG9yaWdpbmFsU3VwZXI7XG5cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgc3VwZXJXcmFwcGVyLndyYXBwZWRGdW5jdGlvbiA9IGZ1bmM7XG5cbiAgcmV0dXJuIHN1cGVyV3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhuYW1lcywgcHJvdG8sIGRlc3RpbmF0aW9uKSB7XG4gIHZhciBwYXJlbnRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihkZXN0aW5hdGlvbik7XG5cbiAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywgbmFtZSk7XG4gICAgdmFyIHBhcmVudERlc2NyaXB0b3IgPSBwYXJlbnRQcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHBhcmVudFByb3RvLCBuYW1lKTtcblxuICAgIGlmICh0eXBlb2YgcGFyZW50RGVzY3JpcHRvci52YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVzY3JpcHRvci52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIHdyYXBwZWRGdW5jdGlvbiA9IHdyYXAoZGVzY3JpcHRvci52YWx1ZSwgcGFyZW50RGVzY3JpcHRvci52YWx1ZSk7XG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZXN0aW5hdGlvbiwgbmFtZSwgeyB2YWx1ZTogd3JhcHBlZEZ1bmN0aW9uIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVzdGluYXRpb24sIG5hbWUsIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNsYXNzKHByb3BzKSB7XG4gIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IE9iamVjdDtcblxuICB2YXIgQ29uc3RydWN0b3IgPSB3cmFwKHByb3BzLmNvbnN0cnVjdG9yLCBwYXJlbnQpO1xuICB2YXIgaW5zdGFuY2VQcm9wZXJ0eU5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvcHMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICFpbmNsdWRlcyQxKFsnY29uc3RydWN0b3InLCAnc3RhdGljJ10sIGtleSk7XG4gIH0pO1xuXG4gIGFzc2lnbiQxKENvbnN0cnVjdG9yLCBwYXJlbnQpO1xuXG4gIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSk7XG4gIGRlZmluZVByb3BlcnRpZXMoaW5zdGFuY2VQcm9wZXJ0eU5hbWVzLCBwcm9wcywgQ29uc3RydWN0b3IucHJvdG90eXBlKTtcbiAgQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG5cbiAgdmFyIHN0YXRpY1Byb3BzID0gcHJvcHNbJ3N0YXRpYyddO1xuXG4gIGlmIChzdGF0aWNQcm9wcykge1xuICAgIHZhciBzdGF0aWNQcm9wZXJ0eU5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc3RhdGljUHJvcHMpO1xuXG4gICAgZGVmaW5lUHJvcGVydGllcyhzdGF0aWNQcm9wZXJ0eU5hbWVzLCBzdGF0aWNQcm9wcywgQ29uc3RydWN0b3IpO1xuICB9XG5cbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG52YXIgQ29yZU9iamVjdCA9IGNyZWF0ZUNsYXNzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge30sXG5cblxuICAnc3RhdGljJzoge1xuICAgIGV4dGVuZDogZnVuY3Rpb24gZXh0ZW5kKHN1YkNsYXNzUHJvcHMpIHtcbiAgICAgIHJldHVybiBjcmVhdGVDbGFzcyhzdWJDbGFzc1Byb3BzLCB0aGlzKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiB3cmFwQ29uc29sZShsb2dDb21tYW5kKSB7XG4gIHZhciBsb2dNZXRob2QgPSBmdW5jdGlvbiBsb2dNZXRob2QoKSB7XG4gICAgdmFyIGxvZyA9IHZvaWQgMDtcblxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbiAgICBpZiAoY29uc29sZVtsb2dDb21tYW5kXSkge1xuICAgICAgbG9nID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlW2xvZ0NvbW1hbmRdLCBjb25zb2xlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmxvZywgY29uc29sZSk7XG4gICAgfVxuICAgIGxvZy5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcblxuICAgIGFyZ3MudW5zaGlmdCgnW0pTLUJVWS1TREtdOiAnKTtcbiAgICBsb2dNZXRob2QuYXBwbHkodW5kZWZpbmVkLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJncykpO1xuICB9O1xufVxuXG52YXIgTG9nZ2VyID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICAvKipcbiAgICogV3JhcHBlciBhcm91bmQgdGhlIGNvbnNvbGUgbG9nIHNvIGluIHRoZSBmdXR1cmUgd2UgY2FuIGhhdmUgYmV0dGVyIGRldiBvdXRwdXQuXG4gICAqIEFsc28gYWxsb3dzIHVzIHRvIGRpc2FibGUgb3V0cHV0IGluIHByb2R1Y3Rpb24uXG4gICAqIEBwcml2YXRlXG4gICAqIEBjbGFzcyBMb2dnZXJcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7fSxcblxuICBkZWJ1Zzogd3JhcENvbnNvbGUoJ2RlYnVnJyksXG4gIGluZm86IHdyYXBDb25zb2xlKCdpbmZvJyksXG4gIHdhcm46IHdyYXBDb25zb2xlKCd3YXJuJyksXG4gIGVycm9yOiB3cmFwQ29uc29sZSgnZXJyb3InKVxufSk7XG5cbnZhciBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbnZhciBDb25maWcgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcihhdHRycykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLmRlcHJlY2F0ZWRQcm9wZXJ0aWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1OYW1lID0gX3RoaXMuZGVwcmVjYXRlZFByb3BlcnRpZXNba2V5XTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IF90aGlzW3RyYW5zZm9ybU5hbWVdO1xuXG4gICAgICAgIHRyYW5zZm9ybShhdHRyc1trZXldLCBhdHRycyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5yZXF1aXJlZFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoIWF0dHJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXcgQ29uZmlnKCkgcmVxdWlyZXMgdGhlIG9wdGlvbiBcXCcnICsga2V5ICsgJ1xcJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXNba2V5XSA9IGF0dHJzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5vcHRpb25hbFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBfdGhpc1trZXldID0gYXR0cnNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3Qgd2l0aCBrZXlzIGZvciBkZXByZWNhdGVkIHByb3BlcnRpZXMgYW5kIHZhbHVlcyBhcyBmdW5jdGlvbnMgdGhhdFxuICAgKiB3aWxsIHRyYW5zZm9ybSB0aGUgdmFsdWUgaW50byBhIHVzYWJsZSB2YWx1ZS4gQSBkZXByYWNhdGlvbiB0cmFuc2Zvcm0gc2hvdWxkXG4gICAqIGhhdmUgdGhlIHZhbHVlIHNpZ25hdHVyZSBmdW5jdGlvbihkZXByZWNhdGVkX3ZhbHVlLCBjb25maWdfdG9fYmVfdHJhbnNmb3JtZWQpXG4gICAqIEBhdHRyaWJ1dGUgZGVwcmVjYXRlZFByb3BlcnRpZXNcbiAgICogQGRlZmF1bHQgeyBteVNob3BpZnlEb21haW46IHRoaXMudHJhbnNmb3JtTXlTaG9waWZ5RG9tYWluIH1cbiAgICogQHR5cGUgT2JqZWN0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZXByZWNhdGVkUHJvcGVydGllczoge1xuICAgIG15U2hvcGlmeURvbWFpbjogJ3RyYW5zZm9ybU15U2hvcGlmeURvbWFpbidcbiAgfSxcblxuICAvKipcbiAgICogVHJhbnNmb3JtIHRoZSBteVNob3BpZnlEb21haW4gY29uZmlnIHRvIGEgZG9tYWluIGNvbmZpZy5cbiAgICogQG1ldGhvZCB0cmFuc2Zvcm1NeVNob3BpZnlEb21haW5cbiAgICogQHN0YXRpY1xuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3ViZG9tYWluIFRoZSBvcmlnaW5hbCBzdWJkb21haW4gb24gbXlzaG9waWZ5LmNvbVxuICAgKiBAcGFyYW0ge09iamVjdH0gYXR0cnMuIFRoZSBjb25maWcgYXR0cmlidXRlcyB0byBiZSB0cmFuc2Zvcm1lZCB0byBhXG4gICAqIG5vbi1kZXByZWNhdGVkIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSB0cmFuc2Zvcm1lZCBjb25maWcgYXR0cmlidXRlcy5cbiAgICovXG4gIHRyYW5zZm9ybU15U2hvcGlmeURvbWFpbjogZnVuY3Rpb24gdHJhbnNmb3JtTXlTaG9waWZ5RG9tYWluKHN1YmRvbWFpbiwgYXR0cnMpIHtcbiAgICBsb2dnZXIud2FybignQ29uZmlnIC0gJywgJ215U2hvcGlmeURvbWFpbiBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGRvbWFpbiBhbmQgcHJvdmlkZSB0aGUgZnVsbCBzaG9wIGRvbWFpbi4nKTtcbiAgICBhdHRycy5kb21haW4gPSBzdWJkb21haW4gKyAnLm15c2hvcGlmeS5jb20nO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFByb3BlcnRpZXMgdGhhdCBtdXN0IGJlIHNldCBvbiBpbml0aWFsaXphdGlvbnNcbiAgICogQGF0dHJpYnV0ZSByZXF1aXJlZFByb3BlcnRpZXNcbiAgICogQGRlZmF1bHQgWydhcGlLZXknLCAnYXBwSWQnLCAnbXlTaG9waWZ5RG9tYWluJ11cbiAgICogQHR5cGUgQXJyYXlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlcXVpcmVkUHJvcGVydGllczogWydhcGlLZXknLCAnYXBwSWQnLCAnZG9tYWluJ10sXG5cbiAgLyoqXG4gICAqIFByb3BlcnRpZXMgdGhhdCBtYXkgYmUgc2V0IG9uIGluaXRpYWxpemF0aW9uc1xuICAgKiBAYXR0cmlidXRlIHJlcXVpcmVkUHJvcGVydGllc1xuICAgKiBAZGVmYXVsdCBbJ2FqYXhIZWFkZXJzJ11cbiAgICogQHR5cGUgQXJyYXlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9wdGlvbmFsUHJvcGVydGllczogWydhamF4SGVhZGVycyddLFxuXG4gIC8qKlxuICAgKiBUaGUgYXBpS2V5IGZvciBhdXRoZW50aWNhdGluZyBhZ2FpbnN0IHNob3BpZnkuIFRoaXMgaXMgeW91ciBhcGkgY2xpZW50J3NcbiAgICogcHVibGljIGFwaSB0b2tlbi4gTm90IHRoZSBzaGFyZWQgc2VjcmV0LiBTZXQgZHVyaW5nIGluaXRpYWxhdGlvbi5cbiAgICogQGF0dHJpYnV0ZSBhcGlLZXlcbiAgICogQGRlZmF1bHQgJydcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcGlLZXk6ICcnLFxuXG4gIC8qKlxuICAgKiBAYXR0cmlidXRlIGFwcElkXG4gICAqIEBkZWZhdWx0ICcnXG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXBwSWQ6ICcnLFxuXG4gIC8qKlxuICAgKiBUaGUgZG9tYWluIHRoYXQgYWxsIHRoZSBhcGkgcmVxdWVzdHMgd2lsbCBnbyB0b1xuICAgKiBAYXR0cmlidXRlIGRvbWFpblxuICAgKiBAZGVmYXVsdCAnJ1xuICAgKiBAdHlwZSBTdHJpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRvbWFpbjogJycsXG5cbiAgLyoqXG4gICAqIFRoZSBzdWJkb21haW4gb2YgbXlzaG9waWZ5LmlvIHRoYXQgYWxsIHRoZSBhcGkgcmVxdWVzdHMgd2lsbCBnbyB0b1xuICAgKiBAYXR0cmlidXRlIG15U2hvcGlmeURvbWFpblxuICAgKiBAZGVmYXVsdCAnJ1xuICAgKiBAdHlwZSBTdHJpbmdcbiAgICogQHByaXZhdGVcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGBjb25maWcuZG9tYWluYCBpbnN0ZWFkLlxuICAgKi9cbiAgbXlTaG9waWZ5RG9tYWluOiAnJyxcblxuICAvKipcbiAgICogQGF0dHJpYnV0ZSBhamF4SGVhZGVyc1xuICAgKiBAZGVmYXVsdCB7fVxuICAgKiBAdHlwZSBPYmplY3RcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFqYXhIZWFkZXJzOiB7fVxufSk7XG5cbnZhciB2ZXJzaW9uID0gJ3YwLjYuMi1jOGY0MzhmJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG52YXIgQmFzZU1vZGVsID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdmFyIGF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgbWV0YUF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHRoaXMuYXR0cnMgPSBhdHRycztcblxuICAgIGFzc2lnbiQxKHRoaXMsIG1ldGFBdHRycyk7XG4gIH0sXG5cbiAgYXR0cnM6IG51bGwsXG4gIHNlcmlhbGl6ZXI6IG51bGwsXG4gIGFkYXB0ZXI6IG51bGwsXG4gIHNob3BDbGllbnQ6IG51bGxcbn0pO1xuXG4vKipcbiAgKiBDbGFzcyBmb3IgcHJvZHVjdCBvcHRpb25cbiAgKiBAY2xhc3MgUHJvZHVjdE9wdGlvbk1vZGVsXG4gICogQGNvbnN0cnVjdG9yXG4qL1xudmFyIFByb2R1Y3RPcHRpb25Nb2RlbCA9IEJhc2VNb2RlbC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1snc3VwZXInXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMudmFsdWVzWzBdO1xuICB9XG59LCB7XG4gIG5hbWU6IHtcblxuICAgIC8qKlxuICAgICAgKiBuYW1lIG9mIG9wdGlvbi4gRXhhbXBsZSB2YWx1ZXM6IGBcIlNpemVcImAsIGBcIkNvbG9yXCJgLCBldGMuXG4gICAgICAqIEBwcm9wZXJ0eSBuYW1lXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMubmFtZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHZhbHVlczoge1xuXG4gICAgLyoqXG4gICAgICAqIGFuIEFycmF5IHBvc3NpYmxlIHZhbHVlcyBmb3Igb3B0aW9uLiBGb3IgaW5zdGFuY2UgaWYgdGhpcyBvcHRpb24gaXMgYSBcIlNpemVcIiBvcHRpb24gYW4gZXhhbXBsZSB2YWx1ZVxuICAgICAgKiBmb3IgdmFsdWVzIGNvdWxkIGJlOiBgW1wiTGFyZ2VcIiwgXCJNZWRpdW1cIiwgXCJTbWFsbFwiXWBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHZhbHVlc1xuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUgQXJyYXlcbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFsdWVzO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgc2VsZWN0ZWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBnZXQvc2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uIHZhbHVlIHdpdGggb25lIG9mIHRoZSB2YWx1ZXMgZnJvbSB0aGVcbiAgICAgICoge3sjY3Jvc3NMaW5rIFwiUHJvZHVjdE9wdGlvbk1vZGVsL3ZhbHVlc1wifX1Qcm9kdWN0T3B0aW9uTW9kZWwudmFsdWVze3svY3Jvc3NMaW5rfX0gYXJyYXkuIEZvclxuICAgICAgKiBpbnN0YW5jZSBpZiB0aGUgb3B0aW9uIHZhbHVlcyBhcnJheSBoYWQgdGhlIGZvbGxvd2luZyBgW1wiTGFyZ2VcIiwgXCJNZWRpdW1cIiwgXCJTbWFsbFwiXWAgc2V0dGluZyBgc2VsZWN0ZWRgIHRvIGJlXG4gICAgICAqIGBcIkxhcmdlXCJgLCBgXCJNZWRpdW1cImAsIG9yIGBcIlNtYWxsXCJgIHdvdWxkIGJlIHZhbGlkIGFueSBvdGhlciB2YWx1ZSB3b3VsZCB0aHJvdyBhbiBgRXJyb3JgLlxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgc2VsZWN0ZWRcbiAgICAgICogQHR5cGUgU3RyaW5nXG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICBpZiAoaW5jbHVkZXMkMSh0aGlzLnZhbHVlcywgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGlvbiBmb3IgJyArIHRoaXMubmFtZSArICcuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxudmFyIHZhcmlhbnRzID0gW3sgbmFtZTogJ3BpY28nLCBkaW1lbnNpb246ICcxNngxNicgfSwgeyBuYW1lOiAnaWNvbicsIGRpbWVuc2lvbjogJzMyeDMyJyB9LCB7IG5hbWU6ICd0aHVtYicsIGRpbWVuc2lvbjogJzUweDUwJyB9LCB7IG5hbWU6ICdzbWFsbCcsIGRpbWVuc2lvbjogJzEwMHgxMDAnIH0sIHsgbmFtZTogJ2NvbXBhY3QnLCBkaW1lbnNpb246ICcxNjB4MTYwJyB9LCB7IG5hbWU6ICdtZWRpdW0nLCBkaW1lbnNpb246ICcyNDB4MjQwJyB9LCB7IG5hbWU6ICdsYXJnZScsIGRpbWVuc2lvbjogJzQ4MHg0ODAnIH0sIHsgbmFtZTogJ2dyYW5kZScsIGRpbWVuc2lvbjogJzYwMHg2MDAnIH0sIHsgbmFtZTogJzEwMjR4MTAyNCcsIGRpbWVuc2lvbjogJzEwMjR4MTAyNCcgfSwgeyBuYW1lOiAnMjA0OHgyMDQ4JywgZGltZW5zaW9uOiAnMjA0OHgyMDQ4JyB9XTtcblxudmFyIEltYWdlTW9kZWwgPSBDb3JlT2JqZWN0LmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcihhdHRycykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgX3RoaXMyW2tleV0gPSBhdHRyc1trZXldO1xuICAgIH0pO1xuICB9XG59LCB7XG4gIHZhcmlhbnRzOiB7XG5cbiAgICAvKipcbiAgICAgICogSW1hZ2UgdmFyaWFudHMgYXZhaWxhYmxlIGZvciBhbiBpbWFnZS4gQW4gZXhhbXBsZSB2YWx1ZSBvZiBgaW1hZ2VWYXJpYW50YDpcbiAgICAgICogYGBgXG4gICAgICAqIFtcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJwaWNvXCIsXG4gICAgICAqICAgICBcImRpbWVuc2lvbnNcIjogXCIxNngxNlwiLFxuICAgICAgKiAgICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2FsaWVuXzE0NmVmN2MxLTI2ZTktNGU5Ni05NmU2LTlkMzcxMjhkMDAwNV9waWNvLmpwZz92PTE0NjkwNDY0MjNcIlxuICAgICAgKiAgIH0sXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwiY29tcGFjdFwiLFxuICAgICAgKiAgICAgXCJkaW1lbnNpb25zXCI6IFwiMTYweDE2MFwiLFxuICAgICAgKiAgICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2FsaWVuXzE0NmVmN2MxLTI2ZTktNGU5Ni05NmU2LTlkMzcxMjhkMDAwNV9jb21wYWN0LmpwZz92PTE0NjkwNDY0MjNcIlxuICAgICAgKiAgIH1cbiAgICAgICogXVxuICAgICAgKiBgYGBcbiAgICAgICpcbiAgICAgICogQGF0dHJpYnV0ZSB2YXJpYW50c1xuICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBzcmMgPSB0aGlzLnNyYztcbiAgICAgIHZhciBleHRlbnNpb25JbmRleCA9IHNyYy5sYXN0SW5kZXhPZignLicpO1xuICAgICAgdmFyIHBhdGhBbmRCYXNlbmFtZSA9IHNyYy5zbGljZSgwLCBleHRlbnNpb25JbmRleCk7XG4gICAgICB2YXIgZXh0ZW5zaW9uID0gc3JjLnNsaWNlKGV4dGVuc2lvbkluZGV4KTtcblxuICAgICAgdmFyaWFudHMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFudCkge1xuICAgICAgICB2YXJpYW50LnNyYyA9IHBhdGhBbmRCYXNlbmFtZSArICdfJyArIHZhcmlhbnQubmFtZSArIGV4dGVuc2lvbjtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdmFyaWFudHM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbi8qKlxuICAqIE1vZGVsIGZvciBwcm9kdWN0IHZhcmlhbnRcbiAgKiBAY2xhc3MgUHJvZHVjdFZhcmlhbnRNb2RlbFxuICAqIEBjb25zdHJ1Y3RvclxuKi9cbnZhciBQcm9kdWN0VmFyaWFudE1vZGVsID0gQmFzZU1vZGVsLmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzWydzdXBlciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIEdldCBhIGNoZWNrb3V0IHVybCBmb3IgYSBzcGVjaWZpYyBwcm9kdWN0IHZhcmlhbnQuIFlvdSBjYW5cbiAgICAqIG9wdGlvbmFsbHkgcGFzcyBhIHF1YW50aXR5LiBJZiBubyBxdWFudGl0eSBpcyBwYXNzZWQgdGhlbiBxdWFudGl0eVxuICAgICogd2lsbCBkZWZhdWx0IHRvIDEuIFRoZSBleGFtcGxlIGJlbG93IHdpbGwgZ3JhYiBhIGNoZWNrb3V0IHVybCBmb3JcbiAgICAqIDMgY29waWVzIG9mIHRoZSBmaXJzdCB2YXJpYW50OlxuICAgICogYGBgXG4gICAgKiBjb25zdCBjaGVja291dFVSTCA9IHByb2R1Y3QudmFyaWFudHNbIDAgXS5jaGVja291dFVybCgzKTtcbiAgICAqIGBgYFxuICAgICpcbiAgICAqIEBtZXRob2QgY2hlY2tvdXRVcmxcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcXVhbnRpdHkgPSAxXSBxdWFudGl0eSBvZiB2YXJpYW50c1xuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7U3RyaW5nfSBDaGVja291dCBVUkxcbiAgKi9cbiAgY2hlY2tvdXRVcmw6IGZ1bmN0aW9uIGNoZWNrb3V0VXJsKCkge1xuICAgIHZhciBxdWFudGl0eSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTtcblxuICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICB2YXIgYmFzZVVybCA9ICdodHRwczovLycgKyBjb25maWcuZG9tYWluICsgJy9jYXJ0JztcblxuICAgIHZhciB2YXJpYW50UGF0aCA9IHRoaXMuaWQgKyAnOicgKyBwYXJzZUludChxdWFudGl0eSwgMTApO1xuXG4gICAgdmFyIHF1ZXJ5ID0gJ2FjY2Vzc190b2tlbj0nICsgY29uZmlnLmFwaUtleSArICcmX2ZkPTAnO1xuXG4gICAgcmV0dXJuIGJhc2VVcmwgKyAnLycgKyB2YXJpYW50UGF0aCArICc/JyArIHF1ZXJ5O1xuICB9XG59LCB7XG4gIGlkOiB7XG5cbiAgICAvKipcbiAgICAgICogVmFyaWFudCB1bmlxdWUgSURcbiAgICAgICogQHByb3BlcnR5IGlkXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQuaWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcm9kdWN0SWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBJRCBvZiBwcm9kdWN0IHZhcmlhbnQgYmVsb25ncyB0b1xuICAgICAgKiBAcHJvcGVydHkgcHJvZHVjdElkXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByb2R1Y3QuaWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB0aXRsZToge1xuXG4gICAgLyoqXG4gICAgICAqIFRpdGxlIG9mIHZhcmlhbnRcbiAgICAgICogQHByb3BlcnR5IHRpdGxlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQudGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcm9kdWN0VGl0bGU6IHtcblxuICAgIC8qKlxuICAgICAgKiBUaXRsZSBvZiBwcm9kdWN0IHZhcmlhbnQgYmVsb25ncyB0b1xuICAgICAgKiBAcHJvcGVydHkgcHJvZHVjdFRpdGxlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByb2R1Y3QudGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBjb21wYXJlQXRQcmljZToge1xuXG4gICAgLyoqXG4gICAgICAqIENvbXBhcmUgYXQgcHJpY2UgZm9yIHZhcmlhbnQuIFRoZSBgY29tcGFyZUF0UHJpY2VgIHdvdWxkIGJlXG4gICAgICAqIHRoZSBwcmljZSBvZiB0aGUgcHJvZHVjdCBwcmV2aW91c2x5IGJlZm9yZSB0aGUgcHJvZHVjdCB3ZW50IG9uIHNhbGUuIEZvciBtb3JlIGluZm9cbiAgICAgICogZ28gPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5zaG9waWZ5LmNvbS9tYW51YWwvcHJvZHVjdHMvcHJvbW90aW5nLW1hcmtldGluZy9zYWxlc1wiIHRhcmdldD1cIl9ibGFua1wiPmhlcmU8L2E+LlxuICAgICAgKlxuICAgICAgKiBJZiBubyBgY29tcGFyZUF0UHJpY2VgIGlzIHNldCB0aGVuIHRoaXMgdmFsdWUgd2lsbCBiZSBgbnVsbGAuIEFuIGV4YW1wbGUgdmFsdWU6IGBcIjUuMDBcImBcbiAgICAgICogQHByb3BlcnR5IGNvbXBhcmVBdFByaWNlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQuY29tcGFyZV9hdF9wcmljZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHByaWNlOiB7XG5cbiAgICAvKipcbiAgICAgICogUHJpY2Ugb2YgdGhlIHZhcmlhbnQuIFRoZSBwcmljZSB3aWxsIGJlIGluIHRoZSBmb2xsb3dpbmcgZm9ybTogYFwiMTAuMDBcImBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHByaWNlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQucHJpY2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBmb3JtYXR0ZWRQcmljZToge1xuXG4gICAgLyoqXG4gICAgICAqIFByaWNlIG9mIHZhcmlhbnQsIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gc2hvcCBjdXJyZW5jeSBmb3JtYXQgc3RyaW5nLlxuICAgICAgKiBGb3IgaW5zdGFuY2UgYFwiJDEwLjAwXCJgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBmb3JtYXR0ZWRQcmljZVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50LmZvcm1hdHRlZF9wcmljZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGdyYW1zOiB7XG5cbiAgICAvKipcbiAgICAgICogVmFyaWFudCB3ZWlnaHQgaW4gZ3JhbXMuIElmIG5vIHdlaWdodCBpcyBkZWZpbmVkIGdyYW1zIHdpbGwgYmUgYDBgLlxuICAgICAgKiBAcHJvcGVydHkgZ3JhbXNcbiAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5ncmFtcztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIG9wdGlvblZhbHVlczoge1xuXG4gICAgLyoqXG4gICAgICAqIE9wdGlvbiB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdmFyaWFudC4gRXhhbXBsZSBgb3B0aW9uVmFsdWVzYDpcbiAgICAgICogYGBgXG4gICAgICAqIFtcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJTaXplXCIsXG4gICAgICAqICAgICBcIm9wdGlvbl9pZFwiOiA5MTY1MzM2NTE4LFxuICAgICAgKiAgICAgXCJ2YWx1ZVwiOiBcInNtYWxsXCJcbiAgICAgICogICB9LFxuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcIkNvbG9yXCIsXG4gICAgICAqICAgICBcIm9wdGlvbl9pZFwiOiA5NjQwNTMyMzU4LFxuICAgICAgKiAgICAgXCJ2YWx1ZVwiOiBcImJsdWVcIlxuICAgICAgKiAgIH1cbiAgICAgICogXVxuICAgICAgKiBgYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBvcHRpb25WYWx1ZXNcbiAgICAgICogQHR5cGUge0FycmF5fE9iamVjdH1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5vcHRpb25fdmFsdWVzO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgYXZhaWxhYmxlOiB7XG5cbiAgICAvKipcbiAgICAgICogVmFyaWFudCBpbiBzdG9jay4gQWx3YXlzIGB0cnVlYCBpZiBpbnZlbnRvcnkgdHJhY2tpbmcgaXMgZGlzYWJsZWQuXG4gICAgICAqIEBwcm9wZXJ0eSBhdmFpbGFibGVcbiAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQuYXZhaWxhYmxlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaW1hZ2U6IHtcblxuICAgIC8qKlxuICAgICAgKiBJbWFnZSBmb3IgdmFyaWFudC4gQW4gZXhhbXBsZSBpbWFnZSBgT2JqZWN0YDpcbiAgICAgICogYGBgXG4gICAgICAqIHtcbiAgICAgICogICBjcmVhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICBpZDogMTc2OTA1NTMzNTAsXG4gICAgICAqICAgcG9zaXRpb246IDEsXG4gICAgICAqICAgcHJvZHVjdF9pZDogODI5MTAyOTQ0NixcbiAgICAgICogICBzcmM6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9pMTFfYzMzMzQzMjUtMmQ2Ny00NjIzLThjZDQtMGE2YjA4YWExYjgzLmpwZz92PTE0NzI0ODg1MDlcIixcbiAgICAgICogICB1cGRhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICB2YXJpYW50X2lkczogWyAyNzY5MDEwMzIzOCBdXG4gICAgICAqIH1cbiAgICAgICogYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBpbWFnZVxuICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgaWQgPSB0aGlzLmlkO1xuICAgICAgdmFyIGltYWdlcyA9IHRoaXMuYXR0cnMucHJvZHVjdC5pbWFnZXM7XG5cbiAgICAgIHZhciBwcmltYXJ5SW1hZ2UgPSBpbWFnZXNbMF07XG4gICAgICB2YXIgdmFyaWFudEltYWdlID0gaW1hZ2VzLmZpbHRlcihmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlLnZhcmlhbnRfaWRzLmluZGV4T2YoaWQpICE9PSAtMTtcbiAgICAgIH0pWzBdO1xuXG4gICAgICB2YXIgaW1hZ2UgPSB2YXJpYW50SW1hZ2UgfHwgcHJpbWFyeUltYWdlO1xuXG4gICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEltYWdlTW9kZWwoaW1hZ2UpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaW1hZ2VWYXJpYW50czoge1xuXG4gICAgLyoqXG4gICAgICAqIEltYWdlIHZhcmlhbnRzIGF2YWlsYWJsZSBmb3IgYSB2YXJpYW50LiBBbiBleGFtcGxlIHZhbHVlIG9mIGBpbWFnZVZhcmlhbnRgOlxuICAgICAgKiBgYGBcbiAgICAgICogW1xuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcInBpY29cIixcbiAgICAgICogICAgIFwiZGltZW5zaW9uc1wiOiBcIjE2eDE2XCIsXG4gICAgICAqICAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvYWxpZW5fMTQ2ZWY3YzEtMjZlOS00ZTk2LTk2ZTYtOWQzNzEyOGQwMDA1X3BpY28uanBnP3Y9MTQ2OTA0NjQyM1wiXG4gICAgICAqICAgfSxcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJjb21wYWN0XCIsXG4gICAgICAqICAgICBcImRpbWVuc2lvbnNcIjogXCIxNjB4MTYwXCIsXG4gICAgICAqICAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvYWxpZW5fMTQ2ZWY3YzEtMjZlOS00ZTk2LTk2ZTYtOWQzNzEyOGQwMDA1X2NvbXBhY3QuanBnP3Y9MTQ2OTA0NjQyM1wiXG4gICAgICAqICAgfVxuICAgICAgKiBdXG4gICAgICAqIGBgYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgaW1hZ2VWYXJpYW50XG4gICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCF0aGlzLmltYWdlKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuaW1hZ2UudmFyaWFudHM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbnZhciB1bmlxID0gZnVuY3Rpb24gdW5pcShhcnJheSkge1xuICByZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uICh1bmlxdWVBcnJheSwgaXRlbSkge1xuICAgIGlmICh1bmlxdWVBcnJheS5pbmRleE9mKGl0ZW0pIDwgMCkge1xuICAgICAgdW5pcXVlQXJyYXkucHVzaChpdGVtKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5pcXVlQXJyYXk7XG4gIH0sIFtdKTtcbn07XG5cbnZhciBOT19JTUFHRV9VUkkgPSAnaHR0cHM6Ly93aWRnZXRzLnNob3BpZnlhcHBzLmNvbS9hc3NldHMvbm8taW1hZ2Uuc3ZnJztcblxuLyoqXG4gICAqIENsYXNzIGZvciBwcm9kdWN0cyByZXR1cm5lZCBieSBmZXRjaCgncHJvZHVjdCcpXG4gICAqIEBjbGFzcyBQcm9kdWN0TW9kZWxcbiAgICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBQcm9kdWN0TW9kZWwgPSBCYXNlTW9kZWwuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXNbJ3N1cGVyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxufSwge1xuICBpZDoge1xuXG4gICAgLyoqXG4gICAgICAqIFByb2R1Y3QgdW5pcXVlIElEXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBpZFxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcm9kdWN0X2lkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdGl0bGU6IHtcblxuICAgIC8qKlxuICAgICAgKiBUaGUgcHJvZHVjdCB0aXRsZVxuICAgICAgKiBAcHJvcGVydHkgdGl0bGVcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBkZXNjcmlwdGlvbjoge1xuXG4gICAgLyoqXG4gICAgICAqIEEgcHJvZHVjdCBkZXNjcmlwdGlvbi5cbiAgICAgICogQHByb3BlcnR5IGRlc2NyaXB0aW9uXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLmJvZHlfaHRtbDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGltYWdlczoge1xuXG4gICAgLyoqXG4gICAgICAqIEFuIGBBcnJheWAgb2YgYE9iamVjdHNgIHRoYXQgY29udGFpbiBtZXRhIGRhdGEgYWJvdXQgYW4gaW1hZ2UgaW5jbHVkaW5nIGBzcmNgIG9mIHRoZSBpbWFnZXMuXG4gICAgICAqXG4gICAgICAqIEFuIGV4YW1wbGUgaW1hZ2UgYE9iamVjdGA6XG4gICAgICAqIGBgYFxuICAgICAgKiB7XG4gICAgICAqICAgY3JlYXRlZF9hdDogXCIyMDE2LTA4LTI5VDEyOjM1OjA5LTA0OjAwXCIsXG4gICAgICAqICAgaWQ6IDE3NjkwNTUzMzUwLFxuICAgICAgKiAgIHBvc2l0aW9uOiAxLFxuICAgICAgKiAgIHByb2R1Y3RfaWQ6IDgyOTEwMjk0NDYsXG4gICAgICAqICAgc3JjOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvaTExX2MzMzM0MzI1LTJkNjctNDYyMy04Y2Q0LTBhNmIwOGFhMWI4My5qcGc/dj0xNDcyNDg4NTA5XCIsXG4gICAgICAqICAgdXBkYXRlZF9hdDogXCIyMDE2LTA4LTI5VDEyOjM1OjA5LTA0OjAwXCIsXG4gICAgICAqICAgdmFyaWFudF9pZHM6IFsgMjc2OTAxMDMyMzggXVxuICAgICAgKiB9XG4gICAgICAqIGBgYFxuICAgICAgKiBAcHJvcGVydHkgaW1hZ2VzXG4gICAgICAqIEB0eXBlIHtBcnJheX0gYXJyYXkgb2YgaW1hZ2Ugb2JqZWN0cy5cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMuaW1hZ2VzLm1hcChmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbWFnZU1vZGVsKGltYWdlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgbWVtb2l6ZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHRoaXMuX21lbW9pemVkID0gdGhpcy5fbWVtb2l6ZWQgfHwge307XG5cbiAgICAgIHJldHVybiB0aGlzLl9tZW1vaXplZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIG9wdGlvbnM6IHtcblxuICAgIC8qKlxuICAgICAqICBHZXQgYW4gYXJyYXkgb2Yge3sjY3Jvc3NMaW5rIFwiUHJvZHVjdE9wdGlvbk1vZGVsXCJ9fVByb2R1Y3RPcHRpb25Nb2RlbHN7ey9jcm9zc0xpbmt9fS5cbiAgICAgKiAge3sjY3Jvc3NMaW5rIFwiUHJvZHVjdE9wdGlvbk1vZGVsXCJ9fVByb2R1Y3RPcHRpb25Nb2RlbHN7ey9jcm9zc0xpbmt9fSBjYW4gYmUgdXNlZCB0b1xuICAgICAqICBkZWZpbmUgdGhlIGN1cnJlbnRseSBgc2VsZWN0ZWRWYXJpYW50YCBmcm9tIHdoaWNoIHlvdSBjYW4gZ2V0IGEgY2hlY2tvdXQgdXJsXG4gICAgICogICh7eyNjcm9zc0xpbmsgXCJQcm9kdWN0VmFyaWFudE1vZGVsL2NoZWNrb3V0VXJsXCJ9fVByb2R1Y3RWYXJpYW50TW9kZWwuY2hlY2tvdXRVcmx7ey9jcm9zc0xpbmt9fSkgb3IgY2FuXG4gICAgICogIGJlIGFkZGVkIHRvIGEgY2FydCAoe3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL2NyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c1wifX1DYXJ0TW9kZWwuY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRze3svY3Jvc3NMaW5rfX0pLlxuICAgICAqXG4gICAgICogIEJlbG93IGlzIGFuIGV4YW1wbGUgb24gaG93IHRvIGNyZWF0ZSBodG1sIGZvciBvcHRpb24gc2VsZWN0aW9uczpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogIC8vIHRoZSBmb2xsb3dpbmcgd2lsbCBjcmVhdGUgYW4gQXJyYXkgb2YgSFRNTCB0byBjcmVhdGUgbXVsdGlwbGUgc2VsZWN0IGlucHV0c1xuICAgICAqICAvLyBnbG9iYWwgY2FsbGJhY2tzIGFyZSBhbHNvIGNyZWF0ZWQgd2hpY2ggd2lsbCBzZXQgdGhlIG9wdGlvbiBhcyBzZWxlY3RlZFxuICAgICAqICB2YXIgZWxlbWVudHMgPSBwcm9kdWN0Lm9wdGlvbnMubWFwKGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAqICAgIC8vIHdlJ2xsIGNyZWF0ZSBhIGNhbGxiYWNrIGluIGdsb2JhbCBzY29wZVxuICAgICAqICAgIC8vIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIHNlbGVjdCdzIHZhbHVlIGNoYW5nZXNcbiAgICAgKiAgICB2YXIgY2FsbEJhY2tOYW1lID0gb3B0aW9uLm5hbWUgKyAnb25DaGFuZ2UnO1xuICAgICAqICAgIHdpbmRvd1sgY2FsbEJhY2tOYW1lIF0gPSBmdW5jdGlvbihzZWxlY3QpIHtcbiAgICAgKiAgICAgIC8vIHNldCB0aGUgcHJvZHVjdHMgb3B0aW9uIHRvIGJlIHNlbGVjdGVkXG4gICAgICogICAgICBvcHRpb24uc2VsZWN0ZWQgPSBzZWxlY3QudmFsdWU7XG4gICAgICogICAgfTtcbiAgICAgKlxuICAgICAqICAgIC8vIHJldHVybiBhIHN0cmluZyB3aGljaCB3aWxsIGJlIEhUTUwgZm9yIHRoZSBzZWxlY3RcbiAgICAgKiAgICByZXR1cm4gJzxzZWxlY3QgbmFtZT1cIicgKyBvcHRpb24ubmFtZSArICdcIiBvbmNoYW5nZT1cIidjYWxsQmFja05hbWUnKHRoaXMpXCI+JyArIG9wdGlvbi52YWx1ZXMubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICAgICByZXR1cm4gJzxvcHRpb24gdmFsdWU9XCInICsgdmFsdWUgKyAnXCI+JyArIHZhbHVlICsgJzwvb3B0aW9uPic7XG4gICAgICogICAgfSkgKyAnPC9zZWxlY3Q+JztcbiAgICAgKiAgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgb3B0aW9uc1xuICAgICAqIEB0eXBlIHtBcnJheXxQcm9kdWN0T3B0aW9uTW9kZWx9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5tZW1vaXplZC5vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lbW9pemVkLm9wdGlvbnM7XG4gICAgICB9XG5cbiAgICAgIHZhciBiYXNlT3B0aW9ucyA9IHRoaXMuYXR0cnMub3B0aW9ucztcbiAgICAgIHZhciB2YXJpYW50cyQkMSA9IHRoaXMudmFyaWFudHM7XG5cbiAgICAgIHRoaXMubWVtb2l6ZWQub3B0aW9ucyA9IGJhc2VPcHRpb25zLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHZhciBuYW1lID0gb3B0aW9uLm5hbWU7XG5cbiAgICAgICAgdmFyIGR1cGVkVmFsdWVzID0gdmFyaWFudHMkJDEucmVkdWNlKGZ1bmN0aW9uICh2YWx1ZUxpc3QsIHZhcmlhbnQpIHtcbiAgICAgICAgICB2YXIgb3B0aW9uVmFsdWVGb3JPcHRpb24gPSB2YXJpYW50Lm9wdGlvblZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKG9wdGlvblZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uVmFsdWUubmFtZSA9PT0gb3B0aW9uLm5hbWU7XG4gICAgICAgICAgfSlbMF07XG5cbiAgICAgICAgICB2YWx1ZUxpc3QucHVzaChvcHRpb25WYWx1ZUZvck9wdGlvbi52YWx1ZSk7XG5cbiAgICAgICAgICByZXR1cm4gdmFsdWVMaXN0O1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgdmFyIHZhbHVlcyA9IHVuaXEoZHVwZWRWYWx1ZXMpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvZHVjdE9wdGlvbk1vZGVsKHsgbmFtZTogbmFtZSwgdmFsdWVzOiB2YWx1ZXMgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZWQub3B0aW9ucztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHZhcmlhbnRzOiB7XG5cbiAgICAvKipcbiAgICAgICogQW4gYEFycmF5YCBvZiB7eyNjcm9zc0xpbmsgXCJQcm9kdWN0VmFyaWFudE1vZGVsXCJ9fVByb2R1Y3RWYXJpYW50TW9kZWwnc3t7L2Nyb3NzTGlua319XG4gICAgICAqIEBwcm9wZXJ0eSB2YXJpYW50c1xuICAgICAgKiBAdHlwZSB7QXJyYXl8UHJvZHVjdFZhcmlhbnRNb2RlbH0gYXJyYXkgb2YgUHJvZHVjdFZhcmlhbnRNb2RlbCBpbnN0YW5jZXMuXG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50cy5tYXAoZnVuY3Rpb24gKHZhcmlhbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9kdWN0VmFyaWFudE1vZGVsKHsgdmFyaWFudDogdmFyaWFudCwgcHJvZHVjdDogX3RoaXMzIH0sIHsgY29uZmlnOiBfdGhpczMuY29uZmlnIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBzZWxlY3Rpb25zOiB7XG5cbiAgICAvKipcbiAgICAgICogQSByZWFkIG9ubHkgYEFycmF5YCBvZiBTdHJpbmdzIHJlcHJlc2VudGVkIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb24gdmFsdWVzLiBlZy4gYFtcIkxhcmdlXCIsIFwiUmVkXCJdYFxuICAgICAgKiBAcHJvcGVydHkgc2VsZWN0aW9uc1xuICAgICAgKiBAdHlwZSB7QXJyYXkgfCBTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWFwKGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbi5zZWxlY3RlZDtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgc2VsZWN0ZWRWYXJpYW50OiB7XG5cbiAgICAvKipcbiAgICAgICogUmV0cmlldmUgdmFyaWFudCBmb3IgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbnMuIEJ5IGRlZmF1bHQgdGhlIGZpcnN0IHZhbHVlIGluIGVhY2hcbiAgICAgICogb3B0aW9uIGlzIHNlbGVjdGVkIHdoaWNoIG1lYW5zIGBzZWxlY3RlZFZhcmlhbnRgIHdpbGwgbmV2ZXIgYmUgYG51bGxgLlxuICAgICAgKlxuICAgICAgKiBXaXRoIGEgYHNlbGVjdGVkVmFyaWFudGAgeW91IGNhbiBjcmVhdGUgY2hlY2tvdXQgdXJsXG4gICAgICAqICh7eyNjcm9zc0xpbmsgXCJQcm9kdWN0VmFyaWFudE1vZGVsL2NoZWNrb3V0VXJsXCJ9fVByb2R1Y3RWYXJpYW50TW9kZWwuY2hlY2tvdXRVcmx7ey9jcm9zc0xpbmt9fSkgb3IgaXQgY2FuXG4gICAgICAqIGJlIGFkZGVkIHRvIGEgY2FydCAoe3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL2NyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c1wifX1DYXJ0TW9kZWwuY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRze3svY3Jvc3NMaW5rfX0pLlxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgc2VsZWN0ZWRWYXJpYW50XG4gICAgICAqIEB0eXBlIHtQcm9kdWN0VmFyaWFudE1vZGVsfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgdmFyaWFudFRpdGxlID0gdGhpcy5zZWxlY3Rpb25zLmpvaW4oJyAvICcpO1xuXG4gICAgICByZXR1cm4gdGhpcy52YXJpYW50cy5maWx0ZXIoZnVuY3Rpb24gKHZhcmlhbnQpIHtcbiAgICAgICAgcmV0dXJuIHZhcmlhbnQudGl0bGUgPT09IHZhcmlhbnRUaXRsZTtcbiAgICAgIH0pWzBdIHx8IG51bGw7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBzZWxlY3RlZFZhcmlhbnRJbWFnZToge1xuXG4gICAgLyoqXG4gICAgICAqIFJldHJpZXZlIGltYWdlIGZvciBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWFudEltYWdlLiBBbiBleGFtcGxlIGltYWdlIE9iamVjdCB3b3VsZCBsb29rIGxpa2UgdGhpczpcbiAgICAgICogYGBgXG4gICAgICAqIHtcbiAgICAgICogICBjcmVhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICBpZDogMTc2OTA1NTMzNTAsXG4gICAgICAqICAgcG9zaXRpb246IDEsXG4gICAgICAqICAgcHJvZHVjdF9pZDogODI5MTAyOTQ0NixcbiAgICAgICogICBzcmM6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9pMTFfYzMzMzQzMjUtMmQ2Ny00NjIzLThjZDQtMGE2YjA4YWExYjgzLmpwZz92PTE0NzI0ODg1MDlcIixcbiAgICAgICogICB1cGRhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICB2YXJpYW50X2lkczogWyAyNzY5MDEwMzIzOCBdXG4gICAgICAqIH1cbiAgICAgICogYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBzZWxlY3RlZFZhcmlhbnRJbWFnZVxuICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRWYXJpYW50KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhcmlhbnQuaW1hZ2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbnZhciBMaXN0aW5nc1NlcmlhbGl6ZXIgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfSxcbiAgcm9vdEtleUZvclR5cGU6IGZ1bmN0aW9uIHJvb3RLZXlGb3JUeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZS5zbGljZSgwLCAtMSkgKyAnX2xpc3RpbmcnO1xuICB9LFxuXG5cbiAgbW9kZWxzOiB7XG4gICAgY29sbGVjdGlvbnM6IEJhc2VNb2RlbCxcbiAgICBwcm9kdWN0czogUHJvZHVjdE1vZGVsXG4gIH0sXG5cbiAgbW9kZWxGb3JUeXBlOiBmdW5jdGlvbiBtb2RlbEZvclR5cGUodHlwZSkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsc1t0eXBlXTtcbiAgfSxcbiAgZGVzZXJpYWxpemVTaW5nbGU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplU2luZ2xlKHR5cGUpIHtcbiAgICB2YXIgc2luZ2xlUGF5bG9hZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdmFyIG1ldGFBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICB2YXIgbW9kZWxBdHRycyA9IHNpbmdsZVBheWxvYWRbdGhpcy5yb290S2V5Rm9yVHlwZSh0eXBlKV07XG4gICAgdmFyIG1vZGVsID0gdGhpcy5tb2RlbEZyb21BdHRycyh0eXBlLCBtb2RlbEF0dHJzLCBtZXRhQXR0cnMpO1xuXG4gICAgcmV0dXJuIG1vZGVsO1xuICB9LFxuICBkZXNlcmlhbGl6ZU11bHRpcGxlOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZU11bHRpcGxlKHR5cGUpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciBjb2xsZWN0aW9uUGF5bG9hZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdmFyIG1ldGFBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICB2YXIgbW9kZWxzID0gY29sbGVjdGlvblBheWxvYWRbdGhpcy5yb290S2V5Rm9yVHlwZSh0eXBlKSArICdzJ107XG5cbiAgICByZXR1cm4gbW9kZWxzLm1hcChmdW5jdGlvbiAoYXR0cnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IF90aGlzNC5tb2RlbEZyb21BdHRycyh0eXBlLCBhdHRycywgbWV0YUF0dHJzKTtcblxuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0pO1xuICB9LFxuICBtb2RlbEZyb21BdHRyczogZnVuY3Rpb24gbW9kZWxGcm9tQXR0cnModHlwZSwgYXR0cnMsIG1ldGFBdHRycykge1xuICAgIHZhciBNb2RlbCA9IHRoaXMubW9kZWxGb3JUeXBlKHR5cGUpO1xuXG4gICAgbWV0YUF0dHJzLmNvbmZpZyA9IHRoaXMuY29uZmlnO1xuXG4gICAgcmV0dXJuIG5ldyBNb2RlbChhdHRycywgbWV0YUF0dHJzKTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGF1dGhUb1VybCh1cmwsIG9wdHMpIHtcbiAgdmFyIGF1dGhvcml6YXRpb24gPSB2b2lkIDA7XG5cbiAgaWYgKG9wdHMuaGVhZGVycykge1xuICAgIE9iamVjdC5rZXlzKG9wdHMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09ICdhdXRob3JpemF0aW9uJykge1xuICAgICAgICBhdXRob3JpemF0aW9uID0gb3B0cy5oZWFkZXJzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoYXV0aG9yaXphdGlvbikge1xuICAgIHZhciBoYXNoZWRLZXkgPSBhdXRob3JpemF0aW9uLnNwbGl0KCcgJykuc2xpY2UoLTEpWzBdO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBwbGFpbktleSA9IGF0b2IoaGFzaGVkS2V5KTtcblxuICAgICAgdmFyIG5ld1VybCA9IHZvaWQgMDtcblxuICAgICAgaWYgKHVybC5pbmRleE9mKCc/JykgPiAtMSkge1xuICAgICAgICBuZXdVcmwgPSB1cmwgKyAnJl94X2h0dHBfYXV0aG9yaXphdGlvbj0nICsgcGxhaW5LZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdVcmwgPSB1cmwgKyAnP194X2h0dHBfYXV0aG9yaXphdGlvbj0nICsgcGxhaW5LZXk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdVcmw7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gYXRvYiBjaG9rZWQgb24gbm9uLWVuY29kZWQgZGF0YS4gVGhlcmVmb3JlLCBub3QgYSBmb3JtIG9mIGF1dGggd2VcbiAgICAgIC8vIHN1cHBvcnQuXG4gICAgICAvL1xuICAgICAgLy8gTk9PUFxuICAgICAgLy9cbiAgICB9XG4gIH1cblxuICAvKiBlc2xpbnQgbmV3bGluZS1iZWZvcmUtcmV0dXJuOiAwICovXG4gIHJldHVybiB1cmw7XG59XG5cbmZ1bmN0aW9uIGllOUFqYXgobWV0aG9kLCB1cmwsIG9wdHMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgeGRyID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7XG5cbiAgICB4ZHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHhkci5yZXNwb25zZVRleHQpO1xuXG4gICAgICAgIHJlc29sdmUoeyBqc29uOiBqc29uLCBvcmlnaW5hbFJlc3BvbnNlOiB4ZHIsIGlzSlNPTjogdHJ1ZSB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVzb2x2ZSh7IHRleHQ6IHhkci5yZXNwb25zZVRleHQsIG9yaWdpbmFsUmVzcG9uc2U6IHhkciwgaXNUZXh0OiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1RoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBYRFInKSk7XG4gICAgfVxuXG4gICAgeGRyLm9uZXJyb3IgPSBoYW5kbGVFcnJvcjtcbiAgICB4ZHIub250aW1lb3V0ID0gaGFuZGxlRXJyb3I7XG5cbiAgICB4ZHIub3BlbihtZXRob2QsIGF1dGhUb1VybCh1cmwsIG9wdHMpKTtcbiAgICB4ZHIuc2VuZChvcHRzLmRhdGEpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNOb2RlTGlrZUVudmlyb25tZW50KCkge1xuICB2YXIgd2luZG93QWJzZW50ID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCc7XG4gIHZhciByZXF1aXJlUHJlc2VudCA9IFwiZnVuY3Rpb25cIiA9PT0gJ2Z1bmN0aW9uJztcblxuICByZXR1cm4gd2luZG93QWJzZW50ICYmIHJlcXVpcmVQcmVzZW50O1xufVxuXG5mdW5jdGlvbiBjaGVja1N0YXR1cyhyZXNwb25zZSkge1xuICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG5cbiAgZXJyb3Iuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICB0aHJvdyBlcnJvcjtcbn1cblxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSkge1xuICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oZnVuY3Rpb24gKGpzb24pIHtcbiAgICByZXR1cm4geyBqc29uOiBqc29uLCBvcmlnaW5hbFJlc3BvbnNlOiByZXNwb25zZSwgaXNKU09OOiB0cnVlIH07XG4gIH0pWydjYXRjaCddKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzcG9uc2VDbG9uZSA9IHJlc3BvbnNlLmNsb25lKCk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2VDbG9uZS50ZXh0KCkudGhlbihmdW5jdGlvbiAodGV4dCkge1xuICAgICAgcmV0dXJuIHsgdGV4dDogdGV4dCwgb3JpZ2luYWxSZXNwb25zZTogcmVzcG9uc2VDbG9uZSwgaXNUZXh0OiB0cnVlIH07XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhamF4KG1ldGhvZCwgdXJsKSB7XG4gIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAvLyB3ZSBuZWVkIHRvIGNoZWNrIHRoYXQgd2UncmUgbm90IHJ1bm5pbmcgaW4gTm9kZVxuICAvLyBiZWZvcmUgd2Ugc2hvdWxkIGNoZWNrIGlmIHRoaXMgaXMgaWU5XG4gIGlmICghaXNOb2RlTGlrZUVudmlyb25tZW50KCkpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAoISgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpKSB7XG4gICAgICByZXR1cm4gaWU5QWpheC5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgb3B0cy5tZXRob2QgPSBtZXRob2Q7XG4gIG9wdHMubW9kZSA9ICdjb3JzJztcblxuICByZXR1cm4gZmV0Y2godXJsLCBvcHRzKS50aGVuKGNoZWNrU3RhdHVzKS50aGVuKHBhcnNlUmVzcG9uc2UpO1xufVxuXG52YXIgTGlzdGluZ3NBZGFwdGVyID0gQ29yZU9iamVjdC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBhamF4OiBhamF4LFxuXG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfSxcbiAgcGF0aEZvclR5cGU6IGZ1bmN0aW9uIHBhdGhGb3JUeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gJy8nICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnX2xpc3RpbmdzJztcbiAgfSxcbiAgYnVpbGRVcmw6IGZ1bmN0aW9uIGJ1aWxkVXJsKHNpbmdsZU9yTXVsdGlwbGUsIHR5cGUsIGlkT3JRdWVyeSkge1xuICAgIHN3aXRjaCAoc2luZ2xlT3JNdWx0aXBsZSkge1xuICAgICAgY2FzZSAnbXVsdGlwbGUnOlxuICAgICAgICByZXR1cm4gdGhpcy5idWlsZE11bHRpcGxlVXJsKHR5cGUsIGlkT3JRdWVyeSk7XG4gICAgICBjYXNlICdzaW5nbGUnOlxuICAgICAgICByZXR1cm4gdGhpcy5idWlsZFNpbmdsZVVybCh0eXBlLCBpZE9yUXVlcnkpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSxcbiAgYnVpbGRNdWx0aXBsZVVybDogZnVuY3Rpb24gYnVpbGRNdWx0aXBsZVVybCh0eXBlKSB7XG4gICAgdmFyIHF1ZXJ5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHZhciB1cmwgPSAnJyArIHRoaXMuYmFzZVVybCArIHRoaXMucGF0aEZvclR5cGUodHlwZSk7XG4gICAgdmFyIHBhcmFtTmFtZXMgPSBPYmplY3Qua2V5cyhxdWVyeSk7XG5cbiAgICBpZiAocGFyYW1OYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgcXVlcnlTdHJpbmcgPSBwYXJhbU5hbWVzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShxdWVyeVtrZXldKSkge1xuICAgICAgICAgIHZhbHVlID0gcXVlcnlba2V5XS5qb2luKCcsJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSBxdWVyeVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICB9KS5qb2luKCcmJyk7XG5cbiAgICAgIHJldHVybiB1cmwgKyAnPycgKyBxdWVyeVN0cmluZztcbiAgICB9XG5cbiAgICByZXR1cm4gdXJsO1xuICB9LFxuICBidWlsZFNpbmdsZVVybDogZnVuY3Rpb24gYnVpbGRTaW5nbGVVcmwodHlwZSwgaWQpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLmJhc2VVcmwgKyB0aGlzLnBhdGhGb3JUeXBlKHR5cGUpICsgJy8nICsgaWQ7XG4gIH0sXG4gIGZldGNoTXVsdGlwbGU6IGZ1bmN0aW9uIGZldGNoTXVsdGlwbGUoKSAvKiB0eXBlLCBbcXVlcnldICove1xuICAgIHZhciB1cmwgPSB0aGlzLmJ1aWxkVXJsLmFwcGx5KHRoaXMsIFsnbXVsdGlwbGUnXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuXG4gICAgcmV0dXJuIHRoaXMuYWpheCgnR0VUJywgdXJsLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb247XG4gICAgfSk7XG4gIH0sXG4gIGZldGNoU2luZ2xlOiBmdW5jdGlvbiBmZXRjaFNpbmdsZSgpIC8qIHR5cGUsIGlkICove1xuICAgIHZhciB1cmwgPSB0aGlzLmJ1aWxkVXJsLmFwcGx5KHRoaXMsIFsnc2luZ2xlJ10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcblxuICAgIHJldHVybiB0aGlzLmFqYXgoJ0dFVCcsIHVybCwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uO1xuICAgIH0pO1xuICB9XG59LCB7XG4gIGJhc2U2NEFwaUtleToge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGJ0b2EodGhpcy5jb25maWcuYXBpS2V5KTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGJhc2VVcmw6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBfY29uZmlnID0gdGhpcy5jb25maWc7XG4gICAgICB2YXIgZG9tYWluID0gX2NvbmZpZy5kb21haW47XG4gICAgICB2YXIgYXBwSWQgPSBfY29uZmlnLmFwcElkO1xuXG5cbiAgICAgIHJldHVybiAnaHR0cHM6Ly8nICsgZG9tYWluICsgJy9hcGkvYXBwcy8nICsgYXBwSWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBoZWFkZXJzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gYXNzaWduJDEoe30sIHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyB0aGlzLmJhc2U2NEFwaUtleSxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgJ1gtU0RLLVZhcmlhbnQnOiAnamF2YXNjcmlwdCcsXG4gICAgICAgICdYLVNESy1WZXJzaW9uJzogdmVyc2lvblxuXG4gICAgICB9LCB0aGlzLmNvbmZpZy5hamF4SGVhZGVycyk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbnZhciBHVUlEX0tFWSA9ICdzaG9waWZ5LWJ1eS11dWlkJztcblxuLyoqXG4gKiBBIGNhcnQgc3RvcmVzIGFuIEFycmF5IG9mIGBDYXJ0TGluZUl0ZW1Nb2RlbGAncyBpbiBpdCdzIGBsaW5lSXRlbXNgIHByb3BlcnR5LlxuICogQGNsYXNzIENhcnRMaW5lSXRlbU1vZGVsXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIENhcnRMaW5lSXRlbU1vZGVsID0gQmFzZU1vZGVsLmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzWydzdXBlciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbn0sIHtcbiAgaWQ6IHtcblxuICAgIC8qKlxuICAgICAqIEEgbGluZSBpdGVtIElELlxuICAgICAqIEBwcm9wZXJ0eSBpZFxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyc1tHVUlEX0tFWV07XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB2YXJpYW50X2lkOiB7XG5cbiAgICAvKipcbiAgICAgKiBJRCBvZiBsaW5lIGl0ZW0gdmFyaWFudC5cbiAgICAgKiBAcHJvcGVydHkgdmFyaWFudF9pZFxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50X2lkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcHJvZHVjdF9pZDoge1xuXG4gICAgLyoqXG4gICAgICogSUQgb2YgdmFyaWFudCdzIHByb2R1Y3QuXG4gICAgICogQHByb3BlcnR5IHByb2R1Y3RfaWRcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucHJvZHVjdF9pZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGltYWdlOiB7XG5cbiAgICAvKipcbiAgICAgKiBWYXJpYW50J3MgaW1hZ2UuXG4gICAgICogRXhhbXBsZSBgT2JqZWN0YCByZXR1cm5lZDpcbiAgICAgKiBgYGBcbiAgICAgKiB7XG4gICAgICogICAgXCJpZFwiOiAxODcyMzE4MzIzOCxcbiAgICAgKiAgICBcImNyZWF0ZWRfYXRcIjogXCIyMDE2LTA5LTE0VDE3OjEyOjEyLTA0OjAwXCIsXG4gICAgICogICAgXCJwb3NpdGlvblwiOiAxLFxuICAgICAqICAgIFwidXBkYXRlZF9hdFwiOiBcIjIwMTYtMDktMTRUMTc6MTI6MTItMDQ6MDBcIixcbiAgICAgKiAgICBcInByb2R1Y3RfaWRcIjogODU2OTkxMTU1OCxcbiAgICAgKiAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvTW9wX190aHJlZV9kaWZmZXJlbnRfbW9wX2hhbmRsZXMuanBnP3Y9MTQ3Mzg4NzUzMlwiLFxuICAgICAqICAgIFwidmFyaWFudF9pZHNcIjogW11cbiAgICAgKiAgfVxuICAgICAqIGBgYFxuICAgICAqIEBwcm9wZXJ0eSBpbWFnZVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoIXRoaXMuYXR0cnMuaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgSW1hZ2VNb2RlbCh0aGlzLmF0dHJzLmltYWdlKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGltYWdlVmFyaWFudHM6IHtcblxuICAgIC8qKlxuICAgICAgKiBJbWFnZSB2YXJpYW50cyBhdmFpbGFibGUgZm9yIGEgdmFyaWFudC4gQW4gZXhhbXBsZSB2YWx1ZSBvZiBgaW1hZ2VWYXJpYW50YDpcbiAgICAgICogYGBgXG4gICAgICAqIFtcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJwaWNvXCIsXG4gICAgICAqICAgICBcImRpbWVuc2lvbnNcIjogXCIxNngxNlwiLFxuICAgICAgKiAgICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2FsaWVuXzE0NmVmN2MxLTI2ZTktNGU5Ni05NmU2LTlkMzcxMjhkMDAwNV9waWNvLmpwZz92PTE0NjkwNDY0MjNcIlxuICAgICAgKiAgIH0sXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwiY29tcGFjdFwiLFxuICAgICAgKiAgICAgXCJkaW1lbnNpb25zXCI6IFwiMTYweDE2MFwiLFxuICAgICAgKiAgICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2FsaWVuXzE0NmVmN2MxLTI2ZTktNGU5Ni05NmU2LTlkMzcxMjhkMDAwNV9jb21wYWN0LmpwZz92PTE0NjkwNDY0MjNcIlxuICAgICAgKiAgIH1cbiAgICAgICogXVxuICAgICAgKiBgYGBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IGltYWdlVmFyaWFudFxuICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICghdGhpcy5pbWFnZSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmltYWdlLnZhcmlhbnRzO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdGl0bGU6IHtcblxuICAgIC8qKlxuICAgICAqIFByb2R1Y3QgdGl0bGUgb2YgdmFyaWFudCdzIHBhcmVudCBwcm9kdWN0LlxuICAgICAqIEBwcm9wZXJ0eSB0aXRsZVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy50aXRsZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHF1YW50aXR5OiB7XG5cbiAgICAvKipcbiAgICAgKiBDb3VudCBvZiB2YXJpYW50cyB0byBvcmRlci5cbiAgICAgKiBAcHJvcGVydHkgcXVhbnRpdHlcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucXVhbnRpdHk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgdmFyIHBhcnNlZFZhbHVlID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcblxuICAgICAgaWYgKHBhcnNlZFZhbHVlIDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1F1YW50aXRpZXMgbXVzdCBiZSBwb3NpdGl2ZScpO1xuICAgICAgfSBlbHNlIGlmIChwYXJzZWRWYWx1ZSAhPT0gcGFyc2VGbG9hdCh2YWx1ZSkpIHtcbiAgICAgICAgLyogaW5jaWRlbnRhbGx5LCB0aGlzIGNvdmVycyBhbGwgTmFOIHZhbHVlcywgYmVjYXVzZSBOYU4gIT09IE5hbiAqL1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1F1YW50aXRpZXMgbXVzdCBiZSB3aG9sZSBudW1iZXJzJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYXR0cnMucXVhbnRpdHkgPSBwYXJzZWRWYWx1ZTtcblxuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucXVhbnRpdHk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcm9wZXJ0aWVzOiB7XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b21pemF0aW9uIGluZm9ybWF0aW9uIGZvciBhIHByb2R1Y3QuXG4gICAgICogPGEgaHJlZj1cImh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS90aGVtZXMvY3VzdG9taXphdGlvbi9wcm9kdWN0cy9nZXQtY3VzdG9taXphdGlvbi1pbmZvcm1hdGlvbi1mb3ItcHJvZHVjdHNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5cbiAgICAgKiBTZWUgaGVyZSBmb3IgbW9yZSBpbmZvXG4gICAgICogPC9hPi5cbiAgICAgKiBAcHJvcGVydHkgcHJvcGVydGllc1xuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByb3BlcnRpZXMgfHwge307XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgdGhpcy5hdHRycy5wcm9wZXJ0aWVzID0gdmFsdWUgfHwge307XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHZhcmlhbnRfdGl0bGU6IHtcblxuICAgIC8qKlxuICAgICAqIFRpdGxlIG9mIHZhcmlhbnQuXG4gICAgICogQHByb3BlcnR5IHZhcmlhbnRfdGl0bGVcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudF90aXRsZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHByaWNlOiB7XG5cbiAgICAvKipcbiAgICAgKiBQcmljZSBvZiB0aGUgdmFyaWFudC4gRm9yIGV4YW1wbGU6IGBcIjUuMDBcImAuXG4gICAgICogQHByb3BlcnR5IHByaWNlXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByaWNlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgY29tcGFyZV9hdF9wcmljZToge1xuXG4gICAgLyoqXG4gICAgICAqIENvbXBhcmUgYXQgcHJpY2UgZm9yIHZhcmlhbnQuIFRoZSBgY29tcGFyZUF0UHJpY2VgIHdvdWxkIGJlXG4gICAgICAqIHRoZSBwcmljZSBvZiB0aGUgcHJvZHVjdCBwcmV2aW91c2x5IGJlZm9yZSB0aGUgcHJvZHVjdCB3ZW50IG9uIHNhbGUuIEZvciBtb3JlIGluZm9cbiAgICAgICogZ28gPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5zaG9waWZ5LmNvbS9tYW51YWwvcHJvZHVjdHMvcHJvbW90aW5nLW1hcmtldGluZy9zYWxlc1wiIHRhcmdldD1cIl9ibGFua1wiPmhlcmU8L2E+LlxuICAgICAgKlxuICAgICAgKiBJZiBubyBgY29tcGFyZUF0UHJpY2VgIGlzIHNldCB0aGVuIHRoaXMgdmFsdWUgd2lsbCBiZSBgbnVsbGAuIEFuIGV4YW1wbGUgdmFsdWU6IGBcIjUuMDBcImAuXG4gICAgICAqIEBwcm9wZXJ0eSBjb21wYXJlQXRQcmljZVxuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMuY29tcGFyZV9hdF9wcmljZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGxpbmVfcHJpY2U6IHtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBwcmljZSBmb3IgdGhpcyBsaW5lIGl0ZW0uIEZvciBpbnN0YW5jZSBpZiB0aGUgdmFyaWFudCBjb3N0cyBgMS41MGAgYW5kIHlvdSBoYXZlIGEgcXVhbnRpdHlcbiAgICAgKiBvZiAyIHRoZW4gYGxpbmVfcHJpY2VgIHdpbGwgYmUgYDMuMDBgLlxuICAgICAqIEBwcm9wZXJ0eSBsaW5lX3ByaWNlXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiAodGhpcy5xdWFudGl0eSAqIHBhcnNlRmxvYXQodGhpcy5wcmljZSkpLnRvRml4ZWQoMik7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBncmFtczoge1xuXG4gICAgLyoqXG4gICAgICogVmFyaWFudCdzIHdlaWdodCBpbiBncmFtcy4gSWYgbm8gd2VpZ2h0IGlzIHNldCB0aGVuIGAwYCBpcyByZXR1cm5lZC5cbiAgICAgKiBAcHJvcGVydHkgZ3JhbXNcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMuZ3JhbXM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbi8qIGVzbGludCBuby11bmRlZmluZWQ6IDAgY29tcGxleGl0eTogMCAqL1xudmFyIEdVSURfUFJFRklYID0gJ3Nob3BpZnktYnV5LicgKyBEYXRlLm5vdygpO1xuXG52YXIgR1VJRF9ERVNDID0ge1xuICB3cml0YWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlLFxuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogbnVsbFxufTtcblxudmFyIHV1aWRTZWVkID0gMDtcblxuZnVuY3Rpb24gdXVpZCgpIHtcbiAgcmV0dXJuICsrdXVpZFNlZWQ7XG59XG5cbnZhciBudW1iZXJDYWNoZSA9IHt9O1xudmFyIHN0cmluZ0NhY2hlID0ge307XG5cbmZ1bmN0aW9uIHNldEd1aWRGb3Iob2JqKSB7XG4gIGlmIChvYmogJiYgb2JqW0dVSURfS0VZXSkge1xuICAgIHJldHVybiBvYmpbR1VJRF9LRVldO1xuICB9XG5cbiAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICcodW5kZWZpbmVkKSc7XG4gIH1cblxuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgcmV0dXJuICcobnVsbCknO1xuICB9XG5cbiAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvYmopO1xuICB2YXIgaWQgPSB2b2lkIDA7XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIGlkID0gbnVtYmVyQ2FjaGVbb2JqXTtcblxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBpZCA9IG51bWJlckNhY2hlW29ial0gPSAnbnUnICsgb2JqO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICBpZCA9IHN0cmluZ0NhY2hlW29ial07XG5cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgaWQgPSBzdHJpbmdDYWNoZVtvYmpdID0gJ3N0JyArIHV1aWQoKTtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIGlmIChvYmopIHtcbiAgICAgICAgaWQgPSAnKHRydWUpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkID0gJyhmYWxzZSknO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAob2JqID09PSBPYmplY3QpIHtcbiAgICAgICAgaWQgPSAnKE9iamVjdCknO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKG9iaiA9PT0gQXJyYXkpIHtcbiAgICAgICAgaWQgPSAnKEFycmF5KSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZCA9IEdVSURfUFJFRklYICsgJy4nICsgdXVpZCgpO1xuXG4gICAgICBpZiAob2JqW0dVSURfS0VZXSA9PT0gbnVsbCkge1xuICAgICAgICBvYmpbR1VJRF9LRVldID0gaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBHVUlEX0RFU0MudmFsdWUgPSBpZDtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgR1VJRF9LRVksIEdVSURfREVTQyk7XG4gICAgICB9XG4gIH1cblxuICByZXR1cm4gaWQ7XG59XG5cbi8qIGdsb2JhbCBnbG9iYWwgKi9cblxudmFyIGdsb2JhbE5hbWVzcGFjZSA9IHZvaWQgMDtcblxuaWYgKHR5cGVvZiBnbG9iYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gIGdsb2JhbE5hbWVzcGFjZSA9IHdpbmRvdztcbn0gZWxzZSB7XG4gIGdsb2JhbE5hbWVzcGFjZSA9IGdsb2JhbDtcbn1cblxuZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHtcbiAgaWYgKCFnbG9iYWxOYW1lc3BhY2Vba2V5XSkge1xuICAgIGdsb2JhbE5hbWVzcGFjZVtrZXldID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0KGtleSkge1xuICByZXR1cm4gZ2xvYmFsTmFtZXNwYWNlW2tleV07XG59XG5cbnZhciBnbG9iYWxWYXJzID0geyBzZXQ6IHNldCwgZ2V0OiBnZXQgfTtcblxuZnVuY3Rpb24gb2JqZWN0c0VxdWFsKG9uZSwgdHdvKSB7XG4gIGlmIChvbmUgPT09IHR3bykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9uZSkuZXZlcnkoZnVuY3Rpb24gKGtleSkge1xuICAgIGlmIChvbmVba2V5XSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHJldHVybiBvbmVba2V5XS50b1N0cmluZygpID09PSB0d29ba2V5XS50b1N0cmluZygpO1xuICAgIH0gZWxzZSBpZiAoX3R5cGVvZihvbmVba2V5XSkgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gb2JqZWN0c0VxdWFsKG9uZVtrZXldLCB0d29ba2V5XSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9uZVtrZXldID09PSB0d29ba2V5XTtcbiAgfSk7XG59XG5cbi8qKlxuKiBDbGFzcyBmb3IgY2FydCBtb2RlbFxuKiBAY2xhc3MgQ2FydE1vZGVsXG4qL1xudmFyIENhcnRNb2RlbCA9IEJhc2VNb2RlbC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1snc3VwZXInXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBBZGQgaXRlbXMgdG8gdGhlIGNhcnQuIFVwZGF0ZXMgY2FydCdzIGBsaW5lSXRlbXNgIGJhc2VkIG9uIHZhcmlhbnRzIHBhc3NlZCBpbi5cbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIGNhcnQuYWRkVmFyaWFudHMoe3ZhcmlhbnQ6IHZhcmlhbnRPYmplY3QsIHF1YW50aXR5OiAxfSkudGhlbihjYXJ0ID0+IHtcbiAgICAqICAgLy8gdGhlIGNhcnQgaGFzIGNyZWF0ZWQgbGluZSBpdGVtc1xuICAgICogfSk7XG4gICAgKiBgYGBcbiAgICAqIEBkZXByZWNhdGVkIGBjcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHNgIHdpbGwgYmUgdXNlZCBpbiB0aGUgZnV0dXJlIGFzIGl0J3MgbW9yZSBkZXNjcmlwdGl2ZVxuICAgICogQG1ldGhvZCBhZGRWYXJpYW50c1xuICAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW0gLSBPbmUgb3IgbW9yZSB2YXJpYW50c1xuICAgICogQHBhcmFtIHtQcm9kdWN0VmFyaWFudE1vZGVsfSBpdGVtLnZhcmlhbnQgLSB2YXJpYW50IG9iamVjdFxuICAgICogQHBhcmFtIHtOdW1iZXJ9IGl0ZW0ucXVhbnRpdHkgLSBxdWFudGl0eVxuICAgICogQHBhcmFtIHtPYmplY3R9IFttb3JlSXRlbXMuLi5dIC0gZnVydGhlciBvYmplY3RzIGRlZmluaW5nIGB2YXJpYW50YCBhbmQgYHF1YW50aXR5YCBtYXliZSBwYXNzZWQgaW5cbiAgICAqIEBwcml2YXRlXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB0aGUgY2FydCBpbnN0YW5jZS5cbiAgKi9cbiAgYWRkVmFyaWFudHM6IGZ1bmN0aW9uIGFkZFZhcmlhbnRzKCkge1xuICAgIGxvZ2dlci53YXJuKCdDYXJ0TW9kZWwgLSAnLCAnYWRkVmFyaWFudHMgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBjcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHMgaW5zdGVhZCcpO1xuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIEFkZCBpdGVtcyB0byB0aGUgY2FydC4gVXBkYXRlcyBjYXJ0J3MgYGxpbmVJdGVtc2AgYmFzZWQgb24gdmFyaWFudHMgcGFzc2VkIGluLlxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogY2FydC5jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHMoe3ZhcmlhbnQ6IHZhcmlhbnRPYmplY3QsIHF1YW50aXR5OiAxfSkudGhlbihjYXJ0ID0+IHtcbiAgICAqICAgLy8gdGhlIGNhcnQgaGFzIGNyZWF0ZWQgbGluZSBpdGVtc1xuICAgICogfSk7XG4gICAgKiBgYGBcbiAgICAqIEBtZXRob2QgY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzXG4gICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbSAtIE9uZSBvciBtb3JlIHZhcmlhbnRzXG4gICAgKiBAcGFyYW0ge1Byb2R1Y3RWYXJpYW50TW9kZWx9IGl0ZW0udmFyaWFudCAtIHZhcmlhbnQgb2JqZWN0XG4gICAgKiBAcGFyYW0ge051bWJlcn0gaXRlbS5xdWFudGl0eSAtIHF1YW50aXR5XG4gICAgKiBAcGFyYW0ge09iamVjdH0gW21vcmVJdGVtcy4uLl0gLSBmdXJ0aGVyIG9iamVjdHMgZGVmaW5pbmcgYHZhcmlhbnRgIGFuZCBgcXVhbnRpdHlgIG1heWJlIHBhc3NlZCBpblxuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdGhlIGNhcnQgaW5zdGFuY2UuXG4gICovXG4gIGNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50czogZnVuY3Rpb24gY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzKCkge1xuICAgIHZhciBuZXdMaW5lSXRlbXMgPSBbXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgbGluZUl0ZW0gPSB7XG4gICAgICAgIGltYWdlOiBpdGVtLnZhcmlhbnQuaW1hZ2UsXG4gICAgICAgIGltYWdlX3ZhcmlhbnRzOiBpdGVtLnZhcmlhbnQuaW1hZ2VWYXJpYW50cyxcbiAgICAgICAgdmFyaWFudF9pZDogaXRlbS52YXJpYW50LmlkLFxuICAgICAgICBwcm9kdWN0X2lkOiBpdGVtLnZhcmlhbnQucHJvZHVjdElkLFxuICAgICAgICB0aXRsZTogaXRlbS52YXJpYW50LnByb2R1Y3RUaXRsZSxcbiAgICAgICAgcXVhbnRpdHk6IHBhcnNlSW50KGl0ZW0ucXVhbnRpdHksIDEwKSxcbiAgICAgICAgcHJvcGVydGllczogaXRlbS5wcm9wZXJ0aWVzIHx8IHt9LFxuICAgICAgICB2YXJpYW50X3RpdGxlOiBpdGVtLnZhcmlhbnQudGl0bGUsXG4gICAgICAgIHByaWNlOiBpdGVtLnZhcmlhbnQucHJpY2UsXG4gICAgICAgIGNvbXBhcmVfYXRfcHJpY2U6IGl0ZW0udmFyaWFudC5jb21wYXJlQXRQcmljZSxcbiAgICAgICAgZ3JhbXM6IGl0ZW0udmFyaWFudC5ncmFtc1xuICAgICAgfTtcblxuICAgICAgc2V0R3VpZEZvcihsaW5lSXRlbSk7XG5cbiAgICAgIHJldHVybiBsaW5lSXRlbTtcbiAgICB9KTtcbiAgICB2YXIgZXhpc3RpbmdMaW5lSXRlbXMgPSB0aGlzLmF0dHJzLmxpbmVfaXRlbXM7XG5cbiAgICBleGlzdGluZ0xpbmVJdGVtcy5wdXNoLmFwcGx5KGV4aXN0aW5nTGluZUl0ZW1zLCBfdG9Db25zdW1hYmxlQXJyYXkobmV3TGluZUl0ZW1zKSk7XG5cbiAgICB2YXIgZGVkdXBlZExpbmVJdGVtcyA9IGV4aXN0aW5nTGluZUl0ZW1zLnJlZHVjZShmdW5jdGlvbiAoaXRlbUFjYywgaXRlbSkge1xuICAgICAgdmFyIG1hdGNoaW5nSXRlbSA9IGl0ZW1BY2MuZmlsdGVyKGZ1bmN0aW9uIChleGlzdGluZ0l0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nSXRlbS52YXJpYW50X2lkID09PSBpdGVtLnZhcmlhbnRfaWQgJiYgb2JqZWN0c0VxdWFsKGV4aXN0aW5nSXRlbS5wcm9wZXJ0aWVzLCBpdGVtLnByb3BlcnRpZXMpO1xuICAgICAgfSlbMF07XG5cbiAgICAgIGlmIChtYXRjaGluZ0l0ZW0pIHtcbiAgICAgICAgbWF0Y2hpbmdJdGVtLnF1YW50aXR5ID0gbWF0Y2hpbmdJdGVtLnF1YW50aXR5ICsgaXRlbS5xdWFudGl0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1BY2MucHVzaChpdGVtKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGl0ZW1BY2M7XG4gICAgfSwgW10pO1xuXG4gICAgLy8gVXNlcnMgbWF5IHBhc3MgbmVnYXRpdmUgbnVtYmVycyBhbmQgcmVtb3ZlIGl0ZW1zLiBUaGlzIGVuc3VyZXMgdGhlcmUncyBub1xuICAgIC8vIGl0ZW0gd2l0aCBhIHF1YW50aXR5IG9mIHplcm8gb3IgbGVzcy5cbiAgICB0aGlzLmF0dHJzLmxpbmVfaXRlbXMgPSBkZWR1cGVkTGluZUl0ZW1zLnJlZHVjZShmdW5jdGlvbiAoaXRlbUFjYywgaXRlbSkge1xuICAgICAgaWYgKGl0ZW0ucXVhbnRpdHkgPj0gMSkge1xuICAgICAgICBpdGVtQWNjLnB1c2goaXRlbSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpdGVtQWNjO1xuICAgIH0sIFtdKTtcblxuICAgIHJldHVybiB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIFVwZGF0ZSBhIGxpbmUgaXRlbSBxdWFudGl0eSBiYXNlZCBvbiBsaW5lIGl0ZW0gaWRcbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIC8vIFRoaXMgZXhhbXBsZSBjaGFuZ2VzIHRoZSBxdWFudGl0eSBmb3IgdGhlIGZpcnN0IGxpbmUgaXRlbSB0byAyXG4gICAgKiBjb25zdCBmaXJzdExpbmVJdGVtSWQgPSBjYXJ0LmxpbmVJdGVtc1swXS5pZDtcbiAgICAqXG4gICAgKiBjYXJ0LnVwZGF0ZUxpbmVJdGVtKGZpcnN0TGluZUl0ZW1JZCwgMikudGhlbihjYXJ0ID0+IHtcbiAgICAqICAgLy8gdGhlIGNhcnQgaGFzIHVwZGF0ZWQgdGhlIGxpbmUgaXRlbVxuICAgICogfSk7XG4gICAgKiBgYGBcbiAgICAqIEBtZXRob2QgdXBkYXRlTGluZUl0ZW1cbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIGxpbmUgaXRlbSBJRFxuICAgICogQHBhcmFtIHtOdW1iZXJ9IHF1YW50aXR5IC0gbmV3IHF1YW50aXR5IGZvciBsaW5lIGl0ZW1cbiAgICAqIEB0aHJvd3Mge0Vycm9yfSBpZiBsaW5lIGl0ZW0gd2l0aCBJRCBpcyBub3QgaW4gY2FydC5cbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHRoZSBjYXJ0IGluc3RhbmNlXG4gICovXG4gIHVwZGF0ZUxpbmVJdGVtOiBmdW5jdGlvbiB1cGRhdGVMaW5lSXRlbShpZCwgcXVhbnRpdHkpIHtcbiAgICBpZiAocXVhbnRpdHkgPCAxKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdmVMaW5lSXRlbShpZCk7XG4gICAgfVxuXG4gICAgdmFyIGxpbmVJdGVtID0gdGhpcy5saW5lSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5pZCA9PT0gaWQ7XG4gICAgfSlbMF07XG5cbiAgICBpZiAobGluZUl0ZW0pIHtcbiAgICAgIGxpbmVJdGVtLnF1YW50aXR5ID0gcXVhbnRpdHk7XG5cbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2xpbmUgaXRlbSB3aXRoIGlkOiAnICsgaWQgKyAnIG5vdCBmb3VuZCBpbiBjYXJ0IycgKyB0aGlzLmlkKSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIFJlbW92ZSBhIGxpbmUgaXRlbSBmcm9tIGNhcnQgYmFzZWQgb24gbGluZSBpdGVtIGlkXG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiAvLyBUaGlzIGV4YW1wbGUgcmVtb3ZlcyB0aGUgZmlyc3QgbGluZSBpdGVtXG4gICAgKiBjb25zdCBmaXJzdExpbmVJdGVtSWQgPSBjYXJ0LmxpbmVJdGVtc1swXS5pZDtcbiAgICAqXG4gICAgKiBjYXJ0LnJlbW92ZUxpbmVJdGVtKGZpcnN0TGluZUl0ZW1JZCkudGhlbihjYXJ0ID0+IHtcbiAgICAqICAgLy8gdGhlIGNhcnQgaGFzIHJlbW92ZWQgdGhlIGxpbmUgaXRlbVxuICAgICogfSk7XG4gICAgKiBgYGBcbiAgICAqXG4gICAgKiBAbWV0aG9kIHJlbW92ZUxpbmVJdGVtXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBsaW5lIGl0ZW0gSURcbiAgICAqIEB0aHJvd3Mge0Vycm9yfSBpZiBsaW5lIGl0ZW0gd2l0aCBJRCBpcyBub3QgaW4gY2FydC5cbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHRoZSBjYXJ0IGluc3RhbmNlXG4gICovXG4gIHJlbW92ZUxpbmVJdGVtOiBmdW5jdGlvbiByZW1vdmVMaW5lSXRlbShpZCkge1xuICAgIHZhciBvbGRMZW5ndGggPSB0aGlzLmxpbmVJdGVtcy5sZW5ndGg7XG4gICAgdmFyIG5ld0xpbmVJdGVtcyA9IHRoaXMubGluZUl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0uaWQgIT09IGlkO1xuICAgIH0pO1xuICAgIHZhciBuZXdMZW5ndGggPSBuZXdMaW5lSXRlbXMubGVuZ3RoO1xuXG4gICAgaWYgKG5ld0xlbmd0aCA8IG9sZExlbmd0aCkge1xuICAgICAgdGhpcy5hdHRycy5saW5lX2l0ZW1zID0gbmV3TGluZUl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS5hdHRycztcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdsaW5lIGl0ZW0gd2l0aCBpZDogJyArIGlkICsgJyBub3QgZm91bmQgaW4gY2FydCMnICsgdGhpcy5pZCkpO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBSZW1vdmUgYWxsIGxpbmUgaXRlbXMgZnJvbSBjYXJ0XG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiAvLyBUaGlzIGV4YW1wbGUgcmVtb3ZlcyBhbGwgbGluZSBpdGVtcyBmcm9tIHRoZSBjYXJ0XG4gICAgKiBjYXJ0LmNsZWFyTGluZUl0ZW1zKCkudGhlbihjYXJ0ID0+IHtcbiAgICAqICAgLy8gdGhlIGNhcnQgaGFzIHJlbW92ZWQgYWxsIGxpbmUgaXRlbXNcbiAgICAqIH0pO1xuICAgICogQG1ldGhvZCBjbGVhckxpbmVJdGVtc1xuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdGhlIGNhcnQgaW5zdGFuY2VcbiAgKi9cbiAgY2xlYXJMaW5lSXRlbXM6IGZ1bmN0aW9uIGNsZWFyTGluZUl0ZW1zKCkge1xuICAgIHRoaXMuYXR0cnMubGluZV9pdGVtcyA9IFtdO1xuXG4gICAgcmV0dXJuIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogRm9yY2UgdXBkYXRlIG9mIGNhcnQgbW9kZWwgb24gc2VydmVyLiBUaGlzIGZ1bmN0aW9uIHdpbGwgb25seSBiZSB1c2VkIGluIGFkdmFuY2VkIHNpdHVhdGlvbnMgYW5kIGRvZXMgbm90IG5lZWQgdG8gYmUgY2FsbGVkXG4gICAgKiBleHBsaWNpdGx5IHRvIHVwZGF0ZSBsaW5lIGl0ZW1zLiBJdCBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCBhZnRlclxuICAgICoge3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL2NyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c1wifX17ey9jcm9zc0xpbmt9fSxcbiAgICAqIHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbC91cGRhdGVMaW5lSXRlbVwifX17ey9jcm9zc0xpbmt9fSxcbiAgICAqIHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbC9yZW1vdmVMaW5lSXRlbVwifX17ey9jcm9zc0xpbmt9fSxcbiAgICAqIGFuZCB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWwvcmVtb3ZlTGluZUl0ZW1cIn19e3svY3Jvc3NMaW5rfX1cbiAgICAqXG4gICAgKiBAbWV0aG9kIHVwZGF0ZU1vZGVsXG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB0aGUgY2FydCBpbnN0YW5jZVxuICAqL1xuICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICByZXR1cm4gdGhpcy5zaG9wQ2xpZW50LnVwZGF0ZSgnY2FydHMnLCB0aGlzKS50aGVuKGZ1bmN0aW9uICh1cGRhdGVDYXJ0KSB7XG4gICAgICBhc3NpZ24kMShfdGhpczUuYXR0cnMsIHVwZGF0ZUNhcnQuYXR0cnMpO1xuXG4gICAgICByZXR1cm4gX3RoaXM1O1xuICAgIH0pO1xuICB9XG59LCB7XG4gIGlkOiB7XG5cbiAgICAvKipcbiAgICAgICogZ2V0IElEIGZvciBjdXJyZW50IGNhcnRcbiAgICAgICogQHByb3BlcnR5IGlkXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyc1tHVUlEX0tFWV07XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBsaW5lSXRlbXM6IHtcblxuICAgIC8qKlxuICAgICAgKiBHZXQgYW4gYEFycmF5YCBvZiB7eyNjcm9zc0xpbmsgXCJDYXJ0TGluZUl0ZW1Nb2RlbFwifX1DYXJ0TGluZUl0ZW1Nb2RlbCdze3svY3Jvc3NMaW5rfX1cbiAgICAgICogQHByb3BlcnR5IGxpbmVJdGVtc1xuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUge0FycmF5fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gKHRoaXMuYXR0cnMubGluZV9pdGVtcyB8fCBbXSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FydExpbmVJdGVtTW9kZWwoaXRlbSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGxpbmVJdGVtQ291bnQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBHZXRzIHRoZSB0b3RhbCBxdWFudGl0eSBvZiBhbGwgbGluZSBpdGVtcy4gRXhhbXBsZTogeW91J3ZlIGFkZGVkIHR3byB2YXJpYW50cyB3aXRoIHF1YW50aXRpZXMgMyBhbmQgMi4gYGxpbmVJdGVtQ291bnRgIHdpbGwgYmUgNS5cbiAgICAgICogQHByb3BlcnR5IGxpbmVJdGVtQ291bnRcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpbmVJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHRvdGFsLCBpdGVtKSB7XG4gICAgICAgIHJldHVybiB0b3RhbCArIGl0ZW0ucXVhbnRpdHk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHN1YnRvdGFsOiB7XG5cbiAgICAvKipcbiAgICAgICogR2V0IGN1cnJlbnQgc3VidG90YWwgcHJpY2UgZm9yIGFsbCBsaW5lIGl0ZW1zLiBFeGFtcGxlOiB0d28gaXRlbXMgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBjYXJ0IHRoYXQgY29zdCAkMS4yNVxuICAgICAgKiB0aGVuIHRoZSBzdWJ0b3RhbCB3aWxsIGJlIGAyLjUwYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgc3VidG90YWxcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBzdWJ0b3RhbCA9IHRoaXMubGluZUl0ZW1zLnJlZHVjZShmdW5jdGlvbiAocnVubmluZ1RvdGFsLCBsaW5lSXRlbSkge1xuICAgICAgICByZXR1cm4gcnVubmluZ1RvdGFsICsgcGFyc2VGbG9hdChsaW5lSXRlbS5saW5lX3ByaWNlKTtcbiAgICAgIH0sIDApO1xuXG4gICAgICByZXR1cm4gc3VidG90YWwudG9GaXhlZCgyKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGNoZWNrb3V0VXJsOiB7XG5cbiAgICAvKipcbiAgICAgICogR2V0IGNoZWNrb3V0IFVSTCBmb3IgY3VycmVudCBjYXJ0XG4gICAgICAqIEBwcm9wZXJ0eSBjaGVja291dFVybFxuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgICAgdmFyIGJhc2VVcmwgPSAnaHR0cHM6Ly8nICsgY29uZmlnLmRvbWFpbiArICcvY2FydCc7XG4gICAgICB2YXIgZ2EgPSBnbG9iYWxWYXJzLmdldCgnZ2EnKTtcblxuICAgICAgdmFyIHZhcmlhbnRQYXRoID0gdGhpcy5saW5lSXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnZhcmlhbnRfaWQgKyAnOicgKyBpdGVtLnF1YW50aXR5O1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBxdWVyeSA9ICdhY2Nlc3NfdG9rZW49JyArIGNvbmZpZy5hcGlLZXkgKyAnJl9mZD0wJztcblxuICAgICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgbGlua2VyUGFyYW0gPSB2b2lkIDA7XG5cbiAgICAgICAgZ2EoZnVuY3Rpb24gKHRyYWNrZXIpIHtcbiAgICAgICAgICBsaW5rZXJQYXJhbSA9IHRyYWNrZXIuZ2V0KCdsaW5rZXJQYXJhbScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAobGlua2VyUGFyYW0pIHtcbiAgICAgICAgICBxdWVyeSArPSAnJicgKyBsaW5rZXJQYXJhbTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYmFzZVVybCArICcvJyArIHZhcmlhbnRQYXRoICsgJz8nICsgcXVlcnk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbnZhciBDYXJ0U2VyaWFsaXplciA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9LFxuICByb290S2V5Rm9yVHlwZTogZnVuY3Rpb24gcm9vdEtleUZvclR5cGUodHlwZSkge1xuICAgIHJldHVybiB0eXBlLnNsaWNlKDAsIC0xKTtcbiAgfSxcbiAgbW9kZWxGb3JUeXBlOiBmdW5jdGlvbiBtb2RlbEZvclR5cGUoKSAvKiB0eXBlICove1xuICAgIHJldHVybiBDYXJ0TW9kZWw7XG4gIH0sXG4gIGRlc2VyaWFsaXplU2luZ2xlOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNpbmdsZSh0eXBlKSB7XG4gICAgdmFyIHNpbmdsZVBheWxvYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHZhciBtZXRhQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gICAgdmFyIG1vZGVsQXR0cnMgPSBzaW5nbGVQYXlsb2FkW3RoaXMucm9vdEtleUZvclR5cGUodHlwZSldO1xuICAgIHZhciBtb2RlbCA9IHRoaXMubW9kZWxGcm9tQXR0cnModHlwZSwgbW9kZWxBdHRycywgbWV0YUF0dHJzKTtcblxuICAgIHJldHVybiBtb2RlbDtcbiAgfSxcbiAgbW9kZWxGcm9tQXR0cnM6IGZ1bmN0aW9uIG1vZGVsRnJvbUF0dHJzKHR5cGUsIGF0dHJzLCBtZXRhQXR0cnMpIHtcbiAgICB2YXIgTW9kZWwgPSB0aGlzLm1vZGVsRm9yVHlwZSh0eXBlKTtcblxuICAgIG1ldGFBdHRycy5jb25maWcgPSB0aGlzLmNvbmZpZztcblxuICAgIHJldHVybiBuZXcgTW9kZWwoYXR0cnMsIG1ldGFBdHRycyk7XG4gIH0sXG4gIHNlcmlhbGl6ZTogZnVuY3Rpb24gc2VyaWFsaXplKHR5cGUsIG1vZGVsKSB7XG4gICAgdmFyIHJvb3QgPSB0aGlzLnJvb3RLZXlGb3JUeXBlKHR5cGUpO1xuICAgIHZhciBwYXlsb2FkID0ge307XG4gICAgdmFyIGF0dHJzID0gYXNzaWduJDEoe30sIG1vZGVsLmF0dHJzKTtcblxuICAgIHBheWxvYWRbcm9vdF0gPSBhdHRycztcblxuICAgIGRlbGV0ZSBhdHRycy5hdHRyaWJ1dGVzO1xuXG4gICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIHZhbHVlID0gYXR0cnNba2V5XTtcblxuICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlbGV0ZSBhdHRyc1trZXldO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbn0pO1xuXG52YXIgUmVmZXJlbmNlTW9kZWwgPSBCYXNlTW9kZWwuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcblxuICAvKipcbiAgICAqIENsYXNzIGZvciByZWZlcmVuY2UgbW9kZWxcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAY2xhc3MgUmVmZXJlbmNlTW9kZWxcbiAgICAqIEBjb25zdHJ1Y3RvclxuICAqL1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoYXR0cnMpIHtcbiAgICBpZiAoT2JqZWN0LmtleXMoYXR0cnMpLmluZGV4T2YoJ3JlZmVyZW5jZUlkJykgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcga2V5IHJlZmVyZW5jZUlkIG9mIHJlZmVyZW5jZS4gUmVmZXJlbmNlcyB0byBudWxsIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgIH1cblxuICAgIHRoaXNbJ3N1cGVyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxufSwge1xuICBpZDoge1xuXG4gICAgLyoqXG4gICAgICAqIGdldCB0aGUgSUQgZm9yIGN1cnJlbnQgcmVmZXJlbmNlIChub3Qgd2hhdCBpdCByZWZlcnMgdG8sIGJ1dCBpdHMgb3duIHVuaXF1ZSBpZGVudGlmaWVyKVxuICAgICAgKiBAcHJvcGVydHkgaWRcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnNbR1VJRF9LRVldO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcmVmZXJlbmNlSWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnJlZmVyZW5jZUlkO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgIHRoaXMuYXR0cnMucmVmZXJlbmNlSWQgPSB2YWx1ZTtcblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG52YXIgUmVmZXJlbmNlU2VyaWFsaXplciA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9LFxuICBtb2RlbEZvclR5cGU6IGZ1bmN0aW9uIG1vZGVsRm9yVHlwZSgpIC8qIHR5cGUgKi97XG4gICAgcmV0dXJuIFJlZmVyZW5jZU1vZGVsO1xuICB9LFxuICBkZXNlcmlhbGl6ZVNpbmdsZTogZnVuY3Rpb24gZGVzZXJpYWxpemVTaW5nbGUodHlwZSkge1xuICAgIHZhciBzaW5nbGVQYXlsb2FkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB2YXIgbWV0YUF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAgIHZhciBNb2RlbCA9IHRoaXMubW9kZWxGb3JUeXBlKHR5cGUpO1xuXG4gICAgcmV0dXJuIG5ldyBNb2RlbChzaW5nbGVQYXlsb2FkLCBtZXRhQXR0cnMpO1xuICB9LFxuICBzZXJpYWxpemU6IGZ1bmN0aW9uIHNlcmlhbGl6ZSh0eXBlLCBtb2RlbCkge1xuICAgIHZhciBhdHRycyA9IGFzc2lnbiQxKHt9LCBtb2RlbC5hdHRycyk7XG5cbiAgICByZXR1cm4gYXR0cnM7XG4gIH1cbn0pO1xuXG52YXIgU3RvcmUgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxvY2FsU3RvcmFnZUF2YWlsYWJsZSA9IHRoaXMuc3RvcmFnZUF2YWlsYWJsZSgnbG9jYWxTdG9yYWdlJyk7XG4gICAgdGhpcy5jYWNoZSA9IHt9O1xuICB9LFxuICBzZXRJdGVtOiBmdW5jdGlvbiBzZXRJdGVtKGtleSwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5sb2NhbFN0b3JhZ2VBdmFpbGFibGUpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jYWNoZVtrZXldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBnZXRJdGVtOiBmdW5jdGlvbiBnZXRJdGVtKGtleSkge1xuICAgIGlmICh0aGlzLmxvY2FsU3RvcmFnZUF2YWlsYWJsZSkge1xuICAgICAgdmFyIHN0cmluZ1ZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyaW5nVmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVba2V5XSB8fCBudWxsO1xuICAgIH1cbiAgfSxcbiAgc3RvcmFnZUF2YWlsYWJsZTogZnVuY3Rpb24gc3RvcmFnZUF2YWlsYWJsZSh0eXBlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBzdG9yYWdlID0gZ2xvYmFsVmFycy5nZXQodHlwZSk7XG4gICAgICB2YXIgeCA9ICdfX3N0b3JhZ2VfdGVzdF9fJztcblxuICAgICAgc3RvcmFnZS5zZXRJdGVtKHgsIHgpO1xuICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKHgpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59KTtcblxudmFyIExvY2FsU3RvcmFnZUFkYXB0ZXIgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0b3JlID0gbmV3IFN0b3JlKCk7XG4gIH0sXG4gIGlkS2V5Rm9yVHlwZTogZnVuY3Rpb24gaWRLZXlGb3JUeXBlKCkgLyogdHlwZSAqL3tcbiAgICByZXR1cm4gR1VJRF9LRVk7XG4gIH0sXG4gIGZldGNoU2luZ2xlOiBmdW5jdGlvbiBmZXRjaFNpbmdsZSh0eXBlLCBpZCkge1xuICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciB2YWx1ZSA9IF90aGlzNi5zdG9yZS5nZXRJdGVtKF90aGlzNi5zdG9yYWdlS2V5KHR5cGUsIGlkKSk7XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKHR5cGUgKyAnIycgKyBpZCArICcgbm90IGZvdW5kJykpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG4gIH0sXG4gIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHR5cGUsIHBheWxvYWQpIHtcbiAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgdmFyIGlkID0gX3RoaXM3LmlkZW50aWZ5KHBheWxvYWQpO1xuXG4gICAgICBfdGhpczcuc3RvcmUuc2V0SXRlbShfdGhpczcuc3RvcmFnZUtleSh0eXBlLCBpZCksIHBheWxvYWQpO1xuICAgICAgcmVzb2x2ZShwYXlsb2FkKTtcbiAgICB9KTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodHlwZSwgaWQsIHBheWxvYWQpIHtcbiAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgX3RoaXM4LnN0b3JlLnNldEl0ZW0oX3RoaXM4LnN0b3JhZ2VLZXkodHlwZSwgaWQpLCBwYXlsb2FkKTtcbiAgICAgIHJlc29sdmUocGF5bG9hZCk7XG4gICAgfSk7XG4gIH0sXG4gIHN0b3JhZ2VLZXk6IGZ1bmN0aW9uIHN0b3JhZ2VLZXkodHlwZSwgaWQpIHtcbiAgICByZXR1cm4gdHlwZSArICcuJyArIGlkO1xuICB9LFxuICBpZGVudGlmeTogZnVuY3Rpb24gaWRlbnRpZnkocGF5bG9hZCkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocGF5bG9hZCk7XG5cbiAgICBpZiAoa2V5cy5sZW5ndGggPT09IDEgJiYgX3R5cGVvZihwYXlsb2FkW2tleXNbMF1dKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBzZXRHdWlkRm9yKHBheWxvYWRba2V5c1swXV0pO1xuICAgIH1cblxuICAgIHJldHVybiBzZXRHdWlkRm9yKHBheWxvYWQpO1xuICB9XG59KTtcblxuLyoqXG4gKiBAbW9kdWxlIHNob3BpZnktYnV5XG4gKiBAc3VibW9kdWxlIHNob3AtY2xpZW50XG4gKi9cblxuZnVuY3Rpb24gZmV0Y2hGYWN0b3J5KGZldGNoVHlwZSwgdHlwZSkge1xuICB2YXIgZnVuYyA9IHZvaWQgMDtcblxuICBzd2l0Y2ggKGZldGNoVHlwZSkge1xuICAgIGNhc2UgJ2FsbCc6XG4gICAgICBmdW5jID0gZnVuY3Rpb24gZnVuYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hBbGwodHlwZSk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnb25lJzpcbiAgICAgIGZ1bmMgPSBmdW5jdGlvbiBmdW5jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaC5hcHBseSh0aGlzLCBbdHlwZV0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlICdxdWVyeSc6XG4gICAgICBmdW5jID0gZnVuY3Rpb24gZnVuYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hRdWVyeS5hcHBseSh0aGlzLCBbdHlwZV0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiBmdW5jO1xufVxuXG52YXIgU2hvcENsaWVudCA9IENvcmVPYmplY3QuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgLyoqXG4gICAqIEBjbGFzcyBTaG9wQ2xpZW50XG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXG4gICAgdGhpcy5zZXJpYWxpemVycyA9IHtcbiAgICAgIHByb2R1Y3RzOiBMaXN0aW5nc1NlcmlhbGl6ZXIsXG4gICAgICBjb2xsZWN0aW9uczogTGlzdGluZ3NTZXJpYWxpemVyLFxuICAgICAgY2FydHM6IENhcnRTZXJpYWxpemVyLFxuICAgICAgcmVmZXJlbmNlczogUmVmZXJlbmNlU2VyaWFsaXplclxuICAgIH07XG5cbiAgICB0aGlzLmFkYXB0ZXJzID0ge1xuICAgICAgcHJvZHVjdHM6IExpc3RpbmdzQWRhcHRlcixcbiAgICAgIGNvbGxlY3Rpb25zOiBMaXN0aW5nc0FkYXB0ZXIsXG4gICAgICBjYXJ0czogTG9jYWxTdG9yYWdlQWRhcHRlcixcbiAgICAgIHJlZmVyZW5jZXM6IExvY2FsU3RvcmFnZUFkYXB0ZXJcbiAgICB9O1xuICB9LFxuXG5cbiAgY29uZmlnOiBudWxsLFxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgb2YgYSBgdHlwZWAsIHJldHVybmluZyBhIHByb21pc2UuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoQWxsKCdwcm9kdWN0cycpLnRoZW4ocHJvZHVjdHMgPT4ge1xuICAgKiAgIC8vIGRvIHRoaW5ncyB3aXRoIHByb2R1Y3RzXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaEFsbFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgcGx1cmFsaXplZCBuYW1lIG9mIHRoZSB0eXBlLCBpbiBsb3dlciBjYXNlLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEFycmF5fSBhIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYW4gYXJyYXkgb2YgYHR5cGVgXG4gICAqL1xuICBmZXRjaEFsbDogZnVuY3Rpb24gZmV0Y2hBbGwodHlwZSkge1xuICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgdmFyIGFkYXB0ZXIgPSBuZXcgdGhpcy5hZGFwdGVyc1t0eXBlXSh0aGlzLmNvbmZpZyk7XG5cbiAgICByZXR1cm4gYWRhcHRlci5mZXRjaE11bHRpcGxlKHR5cGUpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgIHJldHVybiBfdGhpczkuZGVzZXJpYWxpemUodHlwZSwgcGF5bG9hZCwgYWRhcHRlciwgbnVsbCwgeyBtdWx0aXBsZTogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBGZXRjaCBvbmUgb2YgYSBgdHlwZWAsIHJldHVybmluZyBhIHByb21pc2UuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoKCdwcm9kdWN0cycsIDEyMykudGhlbihwcm9kdWN0ID0+IHtcbiAgICogICAvLyBkbyB0aGluZ3Mgd2l0aCB0aGUgcHJvZHVjdFxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHBsdXJhbGl6ZWQgbmFtZSBvZiB0aGUgdHlwZSwgaW4gbG93ZXIgY2FzZS5cbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBpZCBhIHVuaXF1ZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QmFzZU1vZGVsfSBhIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYSBzaW5nbGUgaW5zdGFuY2Ugb2ZcbiAgICogYHR5cGVgIGV4cHJlc3NlZCBhcyBhIGBCYXNlTW9kZWxgLlxuICAgKi9cbiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKHR5cGUsIGlkKSB7XG4gICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgdmFyIGFkYXB0ZXIgPSBuZXcgdGhpcy5hZGFwdGVyc1t0eXBlXSh0aGlzLmNvbmZpZyk7XG5cbiAgICByZXR1cm4gYWRhcHRlci5mZXRjaFNpbmdsZSh0eXBlLCBpZCkudGhlbihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgcmV0dXJuIF90aGlzMTAuZGVzZXJpYWxpemUodHlwZSwgcGF5bG9hZCwgYWRhcHRlciwgbnVsbCwgeyBzaW5nbGU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogRmV0Y2ggbWFueSBvZiBhIGB0eXBlYCwgdGhhdCBtYXRjaCBgcXVlcnlgXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoUXVlcnkoJ3Byb2R1Y3RzJywgeyBjb2xsZWN0aW9uX2lkOiA0NTYgfSkudGhlbihwcm9kdWN0cyA9PiB7XG4gICAqICAgLy8gZG8gdGhpbmdzIHdpdGggdGhlIHByb2R1Y3RzXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaFF1ZXJ5XG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBwbHVyYWxpemVkIG5hbWUgb2YgdGhlIHR5cGUsIGluIGxvd2VyIGNhc2UuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyeSBhIHF1ZXJ5IHNlbnQgdG8gdGhlIGFwaSBzZXJ2ZXIuXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QXJyYXl9IGEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhbiBhcnJheSBvZiBgdHlwZWAuXG4gICAqL1xuICBmZXRjaFF1ZXJ5OiBmdW5jdGlvbiBmZXRjaFF1ZXJ5KHR5cGUsIHF1ZXJ5KSB7XG4gICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXG4gICAgdmFyIGFkYXB0ZXIgPSBuZXcgdGhpcy5hZGFwdGVyc1t0eXBlXSh0aGlzLmNvbmZpZyk7XG5cbiAgICByZXR1cm4gYWRhcHRlci5mZXRjaE11bHRpcGxlKHR5cGUsIHF1ZXJ5KS50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gX3RoaXMxMS5kZXNlcmlhbGl6ZSh0eXBlLCBwYXlsb2FkLCBhZGFwdGVyLCBudWxsLCB7IG11bHRpcGxlOiB0cnVlIH0pO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBgdHlwZWAsIG9wdGlvbmFsbHkgaW5jbHVkaW5nIGBtb2RlbEF0dHJzYC5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuY3JlYXRlKCdjYXJ0cycsIHsgbGluZV9pdGVtczogWyAuLi4gXSB9KS50aGVuKGNhcnQgPT4ge1xuICAgKiAgIC8vIGRvIHRoaW5ncyB3aXRoIHRoZSBjYXJ0LlxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgY3JlYXRlXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBwbHVyYWxpemVkIG5hbWUgb2YgdGhlIHR5cGUsIGluIGxvd2VyIGNhc2UuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kZWxBdHRycz17fV0gYXR0cmlidXRlcyByZXByZXNlbnRpbmcgdGhlIGludGVybmFsIHN0YXRlXG4gICAqIG9mIHRoZSBtb2RlbCB0byBiZSBwZXJzaXN0ZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSBhIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYSBzaW5nbGUgaW5zdGFuY2Ugb2ZcbiAgICogYHR5cGVgXG4gICAqL1xuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh0eXBlKSB7XG4gICAgdmFyIF90aGlzMTIgPSB0aGlzO1xuXG4gICAgdmFyIG1vZGVsQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgdmFyIGFkYXB0ZXIgPSBuZXcgdGhpcy5hZGFwdGVyc1t0eXBlXSh0aGlzLmNvbmZpZyk7XG4gICAgdmFyIHNlcmlhbGl6ZXIgPSBuZXcgdGhpcy5zZXJpYWxpemVyc1t0eXBlXSh0aGlzLmNvbmZpZyk7XG4gICAgdmFyIE1vZGVsID0gc2VyaWFsaXplci5tb2RlbEZvclR5cGUodHlwZSk7XG4gICAgdmFyIG1vZGVsID0gbmV3IE1vZGVsKG1vZGVsQXR0cnMsIHsgc2hvcENsaWVudDogdGhpcyB9KTtcbiAgICB2YXIgYXR0cnMgPSBzZXJpYWxpemVyLnNlcmlhbGl6ZSh0eXBlLCBtb2RlbCk7XG5cbiAgICByZXR1cm4gYWRhcHRlci5jcmVhdGUodHlwZSwgYXR0cnMpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgIHJldHVybiBfdGhpczEyLmRlc2VyaWFsaXplKHR5cGUsIHBheWxvYWQsIGFkYXB0ZXIsIHNlcmlhbGl6ZXIsIHsgc2luZ2xlOiB0cnVlIH0pO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBgdHlwZWAsIG9wdGlvbmFsbHkgaW5jbHVkaW5nIGBhdHRyc2AuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmNyZWF0ZSgnY2FydHMnLCB7IGxpbmVfaXRlbXM6IFsgLi4uIF0gfSkudGhlbihjYXJ0ID0+IHtcbiAgICogICAvLyBkbyB0aGluZ3Mgd2l0aCB0aGUgY2FydC5cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIHVwZGF0ZVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgcGx1cmFsaXplZCBuYW1lIG9mIHRoZSB0eXBlLCBpbiBsb3dlciBjYXNlLlxuICAgKiBAcGFyYW0ge0Jhc2VNb2RlbH0gdXBkYXRlZE1vZGVsIFRoZSBtb2RlbCB0aGF0IHJlcHJlc2VudHMgbmV3IHN0YXRlIHRvXG4gICAqIHRvIHBlcnNpc3QuXG4gICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSBhIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYSBzaW5nbGUgaW5zdGFuY2Ugb2ZcbiAgICogYHR5cGVgXG4gICAqL1xuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0eXBlLCB1cGRhdGVkTW9kZWwpIHtcbiAgICB2YXIgX3RoaXMxMyA9IHRoaXM7XG5cbiAgICB2YXIgYWRhcHRlciA9IHVwZGF0ZWRNb2RlbC5hZGFwdGVyO1xuICAgIHZhciBzZXJpYWxpemVyID0gdXBkYXRlZE1vZGVsLnNlcmlhbGl6ZXI7XG4gICAgdmFyIHNlcmlhbGl6ZWRNb2RlbCA9IHNlcmlhbGl6ZXIuc2VyaWFsaXplKHR5cGUsIHVwZGF0ZWRNb2RlbCk7XG4gICAgdmFyIGlkID0gdXBkYXRlZE1vZGVsLmF0dHJzW2FkYXB0ZXIuaWRLZXlGb3JUeXBlKHR5cGUpXTtcblxuICAgIHJldHVybiBhZGFwdGVyLnVwZGF0ZSh0eXBlLCBpZCwgc2VyaWFsaXplZE1vZGVsKS50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gX3RoaXMxMy5kZXNlcmlhbGl6ZSh0eXBlLCBwYXlsb2FkLCBhZGFwdGVyLCBzZXJpYWxpemVyLCB7IHNpbmdsZTogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBQcm94eSB0byBzZXJpYWxpemVyJ3MgZGVzZXJpYWxpemUuXG4gICAqXG4gICAqIEBtZXRob2QgZGVzZXJpYWxpemVcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHBsdXJhbGl6ZWQgbmFtZSBvZiB0aGUgdHlwZSwgaW4gbG93ZXIgY2FzZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgVGhlIHJhdyBwYXlsb2FkIHJldHVybmVkIGJ5IHRoZSBhZGFwdGVyLlxuICAgKiBAcGFyYW0ge0Jhc2VBZGFwdGVyfSBhZGFwdGVyIFRoZSBhZGFwdGVyIHRoYXQgeWllbGRlZCB0aGUgcGF5bG9hZC5cbiAgICogQHBhcmFtIHtCYXNlU2VyaWFsaXplcn0gZXhpc3RpbmdTZXJpYWxpemVyIFRoZSBzZXJpYWxpemVyIHRvIGF0dGFjaC4gSWZcbiAgICogbm9uZSBpcyBwYXNzZWQsIHRoZW4gYHRoaXMuZGVzZXJpYWxpemVgIHdpbGwgY3JlYXRlIG9uZSBmb3IgdGhlIHR5cGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIE9wdGlvbnMgdGhhdCBkZXRlcm1pbmUgd2hpY2ggZGVzZXJpYWxpemF0aW9uIG1ldGhvZCB0b1xuICAgKiB1c2UuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0cy5tdWx0aXBsZSB0cnVlIHdoZW4gdGhlIHBheWxvYWQgcmVwcmVzZW50cyBtdWx0aXBsZVxuICAgKiBtb2RlbHNcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRzLnNpbmdsZSB0cnVlIHdoZW4gdGhlIHBheWxvYWQgcmVwcmVzZW50cyBvbmUgbW9kZWwuXG4gICAqIEByZXR1cm4ge0Jhc2VNb2RlbH0gYW4gaW5zdGFuY2Ugb2YgYHR5cGVgIHJlaWZpZWQgaW50byBhIG1vZGVsLlxuICAgKi9cbiAgZGVzZXJpYWxpemU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplKHR5cGUsIHBheWxvYWQsIGFkYXB0ZXIsIGV4aXN0aW5nU2VyaWFsaXplcikge1xuICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7fTtcblxuICAgIHZhciBzZXJpYWxpemVyID0gZXhpc3RpbmdTZXJpYWxpemVyIHx8IG5ldyB0aGlzLnNlcmlhbGl6ZXJzW3R5cGVdKHRoaXMuY29uZmlnKTtcbiAgICB2YXIgbWV0YSA9IHsgc2hvcENsaWVudDogdGhpcywgYWRhcHRlcjogYWRhcHRlciwgc2VyaWFsaXplcjogc2VyaWFsaXplciwgdHlwZTogdHlwZSB9O1xuICAgIHZhciBzZXJpYWxpemVkUGF5bG9hZCA9IHZvaWQgMDtcblxuICAgIGlmIChvcHRzLm11bHRpcGxlKSB7XG4gICAgICBzZXJpYWxpemVkUGF5bG9hZCA9IHNlcmlhbGl6ZXIuZGVzZXJpYWxpemVNdWx0aXBsZSh0eXBlLCBwYXlsb2FkLCBtZXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VyaWFsaXplZFBheWxvYWQgPSBzZXJpYWxpemVyLmRlc2VyaWFsaXplU2luZ2xlKHR5cGUsIHBheWxvYWQsIG1ldGEpO1xuICAgIH1cblxuICAgIHJldHVybiBzZXJpYWxpemVkUGF5bG9hZDtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogQ3JlYXRlcyBhIHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbFwifX1DYXJ0TW9kZWx7ey9jcm9zc0xpbmt9fSBpbnN0YW5jZS5cbiAgICAqXG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiBjbGllbnQuY3JlYXRlQ2FydCgpLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIGNhcnRcbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKlxuICAgICogQG1ldGhvZCBjcmVhdGVDYXJ0XG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSBuZXcgY2FydCBpbnN0YW5jZS5cbiAgKi9cbiAgY3JlYXRlQ2FydDogZnVuY3Rpb24gY3JlYXRlQ2FydCgpIHtcbiAgICB2YXIgdXNlckF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgIHZhciBiYXNlQXR0cnMgPSB7XG4gICAgICBsaW5lX2l0ZW1zOiBbXVxuICAgIH07XG4gICAgdmFyIGF0dHJzID0ge307XG5cbiAgICBhc3NpZ24kMShhdHRycywgYmFzZUF0dHJzKTtcbiAgICBhc3NpZ24kMShhdHRycywgdXNlckF0dHJzKTtcblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZSgnY2FydHMnLCBhdHRycyk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIFVwZGF0ZXMgYW4gZXhpc3Rpbmcge3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsXCJ9fUNhcnRNb2RlbHt7L2Nyb3NzTGlua319IGluc3RhbmNlIGFuZCBwZXJzaXN0cyBpdCB0byBsb2NhbFN0b3JhZ2UuXG4gICAgKlxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogY2xpZW50LmNyZWF0ZUNhcnQoKS50aGVuKGNhcnQgPT4ge1xuICAgICogICBjYXJ0LmxpbmVJdGVtcyA9IFtcbiAgICAqICAgICAvLyAuLi5cbiAgICAqICAgXTtcbiAgICAqICAgY2xpZW50LnVwZGF0ZUNhcnQoY2FydCk7XG4gICAgKiB9KTtcbiAgICAqIGBgYFxuICAgICpcbiAgICAqIEBwYXJhbSB7Q2FydE1vZGVsfSB1cGRhdGVkQ2FydCBhbiB1cGRhdGVkIENhcnRNb2RlbFxuICAgICogQG1ldGhvZCB1cGRhdGVDYXJ0XG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdXBkYXRlZCBjYXJ0IGluc3RhbmNlLlxuICAqL1xuICB1cGRhdGVDYXJ0OiBmdW5jdGlvbiB1cGRhdGVDYXJ0KHVwZGF0ZWRDYXJ0KSB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlKCdjYXJ0cycsIHVwZGF0ZWRDYXJ0KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIHByZXZpb3VzbHkgY3JlYXRlZCBjYXJ0IGJ5IGl0cyBrZXkuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoQ2FydCgnc2hvcGlmeS1idXkuMTQ1OTgwNDY5OTExOC4yJykudGhlbihjYXJ0ID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhjYXJ0KTsgLy8gVGhlIHJldHJpZXZlZCBjYXJ0XG4gICAqIH0pO1xuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoQ2FydFxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZCBUaGUgY2FydCdzIHVuaXF1ZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSBUaGUgY2FydCBtb2RlbC5cbiAgICpcbiAgICovXG4gIGZldGNoQ2FydDogZmV0Y2hGYWN0b3J5KCdvbmUnLCAnY2FydHMnKSxcblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiBhbiBgQXJyYXlgIG9mIHByb2R1Y3RzIGZyb20geW91ciBzdG9yZVxuICAgKiBgYGBcbiAgICogY2xpZW50LmZldGNoQWxsUHJvZHVjdHMoKVxuICAgKiAudGhlbihmdW5jdGlvbihwcm9kdWN0cykge1xuICAgKiAgIC8vIGFsbCBwcm9kdWN0cyBpbiBzdG9yZVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hBbGxQcm9kdWN0c1xuICAgKiBAcHVibGljXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QXJyYXl9IFRoZSBwcm9kdWN0IG1vZGVscy5cbiAgICovXG4gIGZldGNoQWxsUHJvZHVjdHM6IGZldGNoRmFjdG9yeSgnYWxsJywgJ3Byb2R1Y3RzJyksXG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYW4gYEFycmF5YCBvZiBjb2xsZWN0aW9ucyBmcm9tIHlvdXIgc3RvcmVcbiAgICogYGBgXG4gICAqIGNsaWVudC5mZXRjaEFsbENvbGxlY3Rpb25zKClcbiAgICogLnRoZW4oZnVuY3Rpb24oY29sbGVjdGlvbnMpIHtcbiAgICpcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoQWxsQ29sbGVjdGlvbnNcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJuIHtQcm9taXNlfEFycmF5fSBUaGUgY29sbGVjdGlvbiBtb2RlbHMuXG4gICAqL1xuICBmZXRjaEFsbENvbGxlY3Rpb25zOiBmZXRjaEZhY3RvcnkoJ2FsbCcsICdjb2xsZWN0aW9ucycpLFxuXG4gIC8qKlxuICAgKiBGZXRjaCBvbmUgcHJvZHVjdCBieSBpdHMgSUQuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoUHJvZHVjdCgnODU2OTkxMTU1OCcpLnRoZW4ocHJvZHVjdCA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocHJvZHVjdCk7IC8vIFRoZSBwcm9kdWN0IHdpdGggYW4gSUQgb2YgJzg1Njk5MTE1NTgnXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaFByb2R1Y3RcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IGlkIGEgdW5pcXVlIGlkZW50aWZpZXJcbiAgICogQHJldHVybiB7UHJvbWlzZXxCYXNlTW9kZWx9IFRoZSBwcm9kdWN0IG1vZGVsIHdpdGggdGhlIHNwZWNpZmllZCBJRC5cbiAgICovXG4gIGZldGNoUHJvZHVjdDogZmV0Y2hGYWN0b3J5KCdvbmUnLCAncHJvZHVjdHMnKSxcblxuICAvKipcbiAgICogRmV0Y2ggb25lIGNvbGxlY3Rpb24gYnkgaXRzIElELlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaENvbGxlY3Rpb24oJzMzNjkwMzQ5NCcpLnRoZW4oY29sbGVjdGlvbiA9PiB7XG4gICAqICAgY29uc29sZS5sb2coY29sbGVjdGlvbik7IC8vIFRoZSBjb2xsZWN0aW9uIHdpdGggYW4gSUQgb2YgJzMzNjkwMzQ5NCdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoQ29sbGVjdGlvblxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gaWQgYSB1bmlxdWUgaWRlbnRpZmllclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEJhc2VNb2RlbH0gVGhlIGNvbGxlY3Rpb24gbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIElELlxuICAgKi9cbiAgZmV0Y2hDb2xsZWN0aW9uOiBmZXRjaEZhY3RvcnkoJ29uZScsICdjb2xsZWN0aW9ucycpLFxuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGEgbGlzdCBvZiBwcm9kdWN0cyBtYXRjaGluZyBhIHNwZWNpZmllZCBxdWVyeS5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hRdWVyeVByb2R1Y3RzKHsgY29sbGVjdGlvbl9pZDogJzMzNjkwMzQ5NCcsIHRhZzogWydoYXRzJ10gfSkudGhlbihwcm9kdWN0cyA9PiB7XG4gICAqICAgY29uc29sZS5sb2cocHJvZHVjdHMpOyAvLyBBbiBhcnJheSBvZiBwcm9kdWN0cyBpbiBjb2xsZWN0aW9uICczMzY5MDM0OTQnIGhhdmluZyB0aGUgdGFnICdoYXRzJ1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIEBtZXRob2QgZmV0Y2hRdWVyeVByb2R1Y3RzXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IEEgcXVlcnkgc2VudCB0byB0aGUgYXBpIHNlcnZlciBjb250YWluaW5nIG9uZSBvciBtb3JlIG9mOlxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gW3F1ZXJ5LmNvbGxlY3Rpb25faWRdIFRoZSBJRCBvZiBhIGNvbGxlY3Rpb24gdG8gcmV0cmlldmUgcHJvZHVjdHMgZnJvbVxuICAgKiAgIEBwYXJhbSB7QXJyYXl9IFtxdWVyeS50YWddIEEgbGlzdCBvZiB0YWdzIHRvIGZpbHRlciB0aGUgcHJvZHVjdHMgYnkuIEFjY2VwdHMgdXAgdG8gMTAgdGFncy5cbiAgICogICBAcGFyYW0ge0FycmF5fSBbcXVlcnkucHJvZHVjdF9pZHNdIEEgbGlzdCBvZiBwcm9kdWN0IElEcyB0byByZXRyaWV2ZVxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gW3F1ZXJ5LnBhZ2U9MV0gVGhlIHBhZ2Ugb2Zmc2V0IG51bWJlciBvZiB0aGUgY3VycmVudCBsb29rdXAgKGJhc2VkIG9uIHRoZSBgbGltaXRgKVxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gW3F1ZXJ5LmxpbWl0PTUwXSBUaGUgbnVtYmVyIG9mIHByb2R1Y3RzIHRvIHJldHJpZXZlIHBlciBwYWdlXG4gICAqICAgQHBhcmFtIHtTdHJpbmd9IFtxdWVyeS5oYW5kbGVdIFRoZSBoYW5kbGUgb2YgdGhlIHByb2R1Y3QgdG8gbG9vayB1cFxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBbcXVlcnkudXBkYXRlZF9hdF9taW5dIFByb2R1Y3RzIHVwZGF0ZWQgc2luY2UgdGhlIHN1cHBsaWVkIHRpbWVzdGFtcCAoZm9ybWF0OiAyMDA4LTEyLTMxIDAzOjAwKVxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBbcXVlcnkuc29ydF9ieV0gV2lsbCBtb2RpZnkgaG93IHByb2R1Y3RzIGFyZSBvcmRlcmVkLiBQb3NzaWJsZSB2YWx1ZXMgYXJlOlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwidXBkYXRlZF9hdFwiYCwgYFwiYmVzdC1zZWxsaW5nXCJgLCBgXCJ0aXRsZS1hc2NlbmRpbmdcImAsIGBcInRpdGxlLWRlc2NlbmRpbmdcImAsXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCJwcmljZS1kZXNjZW5kaW5nXCJgLCBgXCJwcmljZS1hc2NlbmRpbmdcImAsIGBcImNyZWF0ZWQtZGVzY2VuZGluZ1wiYCwgYFwiY3JlYXRlZC1hc2NlbmRpbmdcImAsXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBgXCJjb2xsZWN0aW9uLWRlZmF1bHRcImAuIFVzaW5nIGBcImNvbGxlY3Rpb24tZGVmYXVsdFwiYCBtZWFucyB0aGF0IHByb2R1Y3RzIHdpbGwgYmUgb3JkZXJlZFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHVzaW5nIHRoZSBjdXN0b20gb3JkZXJpbmcgZGVmaW5lZCBpbiB5b3VyIFNob3BpZnkgQWRtaW4uIERlZmF1bHQgdmFsdWUgYFwiY29sbGVjdGlvbi1kZWZhdWx0XCJgLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEFycmF5fSBUaGUgcHJvZHVjdCBtb2RlbHMuXG4gICAqL1xuICBmZXRjaFF1ZXJ5UHJvZHVjdHM6IGZldGNoRmFjdG9yeSgncXVlcnknLCAncHJvZHVjdHMnKSxcblxuICAvKipcbiAgICogRmV0Y2hlcyBhIGxpc3Qgb2YgY29sbGVjdGlvbnMgbWF0Y2hpbmcgYSBzcGVjaWZpZWQgcXVlcnkuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoUXVlcnlDb2xsZWN0aW9ucyh7cGFnZTogMiwgbGltaXQ6IDIwfSkudGhlbihjb2xsZWN0aW9ucyA9PiB7XG4gICAqICAgY29uc29sZS5sb2coY29sbGVjdGlvbnMpOyAvLyBBbiBhcnJheSBvZiBjb2xsZWN0aW9uIHJlc291cmNlc1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hRdWVyeUNvbGxlY3Rpb25zXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IGEgcXVlcnkgc2VudCB0byB0aGUgYXBpIHNlcnZlci5cbiAgICogICBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IFtxdWVyeS5wYWdlPTFdIHRoZSBwYWdlIG9mZnNldCBudW1iZXIgb2YgdGhlIGN1cnJlbnQgbG9va3VwIChiYXNlZCBvbiB0aGUgYGxpbWl0YClcbiAgICogICBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IFtxdWVyeS5saW1pdD01MF0gdGhlIG51bWJlciBvZiBjb2xsZWN0aW9ucyB0byByZXRyaWV2ZSBwZXIgcGFnZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEFycmF5fSBUaGUgY29sbGVjdGlvbiBtb2RlbHMuXG4gICAqL1xuICBmZXRjaFF1ZXJ5Q29sbGVjdGlvbnM6IGZldGNoRmFjdG9yeSgncXVlcnknLCAnY29sbGVjdGlvbnMnKSxcblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgbG9va3MgdXAgYSByZWZlcmVuY2UgaW4gbG9jYWxTdG9yYWdlIHRvIHRoZSBtb3N0IHJlY2VudCBjYXJ0LlxuICAgKiBJZiBvbmUgaXMgbm90IGZvdW5kLCBjcmVhdGVzIG9uZS4gSWYgdGhlIGNhcnQgdGhlIHJlZmVyZW5jZSBwb2ludHMgdG9cbiAgICogZG9lc24ndCBleGlzdCwgY3JlYXRlIG9uZSBhbmQgc3RvcmUgdGhlIG5ldyByZWZlcmVuY2UuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoUmVjZW50Q2FydCgpLnRoZW4oY2FydCA9PiB7XG4gICAqICAvLyBkbyBzdHVmZiB3aXRoIHRoZSBjYXJ0XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaFJlY2VudENhcnRcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gVGhlIGNhcnQuXG4gICAqL1xuICBmZXRjaFJlY2VudENhcnQ6IGZ1bmN0aW9uIGZldGNoUmVjZW50Q2FydCgpIHtcbiAgICB2YXIgX3RoaXMxNCA9IHRoaXM7XG5cbiAgICByZXR1cm4gdGhpcy5mZXRjaCgncmVmZXJlbmNlcycsIHRoaXMuY29uZmlnLmRvbWFpbiArICcucmVjZW50LWNhcnQnKS50aGVuKGZ1bmN0aW9uIChyZWZlcmVuY2UpIHtcbiAgICAgIHZhciBjYXJ0SWQgPSByZWZlcmVuY2UucmVmZXJlbmNlSWQ7XG5cbiAgICAgIHJldHVybiBfdGhpczE0LmZldGNoQ2FydChjYXJ0SWQpO1xuICAgIH0pWydjYXRjaCddKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpczE0LmNyZWF0ZUNhcnQoKS50aGVuKGZ1bmN0aW9uIChjYXJ0KSB7XG4gICAgICAgIHZhciByZWZBdHRycyA9IHtcbiAgICAgICAgICByZWZlcmVuY2VJZDogY2FydC5pZFxuICAgICAgICB9O1xuXG4gICAgICAgIHJlZkF0dHJzW0dVSURfS0VZXSA9IF90aGlzMTQuY29uZmlnLmRvbWFpbiArICcucmVjZW50LWNhcnQnO1xuXG4gICAgICAgIF90aGlzMTQuY3JlYXRlKCdyZWZlcmVuY2VzJywgcmVmQXR0cnMpO1xuXG4gICAgICAgIHJldHVybiBjYXJ0O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn0sIHtcbiAgc2VyaWFsaXplcnM6IHtcbiAgICAvKipcbiAgICAgKiBAYXR0cmlidXRlXG4gICAgICogQGRlZmF1bHQge1xuICAgICAqICBwcm9kdWN0czogTGlzdGluZ3NBZGFwdGVyLFxuICAgICAqICBjb2xsZWN0aW9uczogTGlzdGluZ3NBZGFwdGVyLFxuICAgICAqICBjYXJ0czogQ2FydEFkYXB0ZXJcbiAgICAgKiB9XG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIC8vIFByZXZlbnQgbGVha3kgc3RhdGVcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBhc3NpZ24kMSh7fSwgdGhpcy5zaGFkb3dlZFNlcmlhbGl6ZXJzKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlcykge1xuICAgICAgdGhpcy5zaGFkb3dlZFNlcmlhbGl6ZXJzID0gYXNzaWduJDEoe30sIHZhbHVlcyk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBhZGFwdGVyczoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGFzc2lnbiQxKHt9LCB0aGlzLnNoYWRvd2VkQWRhcHRlcnMpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWVzKSB7XG4gICAgICB0aGlzLnNoYWRvd2VkQWRhcHRlcnMgPSBhc3NpZ24kMSh7fSwgdmFsdWVzKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxuLyogZ2xvYmFscyByZXF1aXJlICovXG5cbmlmIChpc05vZGVMaWtlRW52aXJvbm1lbnQoKSkge1xuICAvKiB0aGlzIGluZGlyZWN0aW9uIGlzIG5lZWRlZCBiZWNhdXNlIGJhYmVsIHRocm93cyBlcnJvcnMgd2hlblxuICAgKiB0cmFuc3BpbGluZyByZXF1aXJlKCdub2RlLWZldGNoJykgdXNpbmcgYGFtZGAgcGx1Z2luIHdpdGggYmFiZWw2XG4gICAqL1xuICB2YXIgbG9jYWxSZXF1aXJlID0gcmVxdWlyZTtcbiAgdmFyIF9mZXRjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQyKTtcblxuICBnbG9iYWxWYXJzLnNldCgnZmV0Y2gnLCBfZmV0Y2gpO1xuICBnbG9iYWxWYXJzLnNldCgnUmVzcG9uc2UnLCBfZmV0Y2guUmVzcG9uc2UpO1xufVxuXG4vKiBnbG9iYWwgQnVmZmVyICovXG5cbmlmIChpc05vZGVMaWtlRW52aXJvbm1lbnQoKSkge1xuICBnbG9iYWxWYXJzLnNldCgnYnRvYScsIGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihzdHJpbmcpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQG1vZHVsZSBzaG9waWZ5LWJ1eVxuICogQHN1Ym1vZHVsZSBzaG9waWZ5XG4gKi9cblxuLyoqXG4gKiBgU2hvcGlmeUJ1eWAgb25seSBkZWZpbmVzIG9uZSBmdW5jdGlvbiB7eyNjcm9zc0xpbmsgXCJTaG9waWZ5QnV5L2J1aWxkQ2xpZW50XCJ9fXt7L2Nyb3NzTGlua319IHdoaWNoIGNhblxuICogYmUgdXNlZCB0byBidWlsZCBhIHt7I2Nyb3NzTGluayBcIlNob3BDbGllbnRcIn19e3svY3Jvc3NMaW5rfX0gdG8gcXVlcnkgeW91ciBzdG9yZSB1c2luZyB0aGVcbiAqIHByb3ZpZGVkXG4gKiB7eyNjcm9zc0xpbmsgXCJTaG9waWZ5QnV5L2J1aWxkQ2xpZW50L2NvbmZpZ0F0dHJzOmFwaUtleVwifX1gYXBpS2V5YHt7L2Nyb3NzTGlua319LFxuICoge3sjY3Jvc3NMaW5rIFwiU2hvcGlmeUJ1eS9idWlsZENsaWVudC9jb25maWdBdHRyczphcHBJZFwifX1gYXBwSWRge3svY3Jvc3NMaW5rfX0sXG4gKiBhbmQge3sjY3Jvc3NMaW5rIFwiU2hvcGlmeUJ1eS9idWlsZENsaWVudC9jb25maWdBdHRyczpkb21haW5cIn19YGRvbWFpbmB7ey9jcm9zc0xpbmt9fS5cbiAqIEBjbGFzcyBTaG9waWZ5QnV5XG4gKiBAc3RhdGljXG4gKi9cbnZhciBTaG9waWZ5ID0ge1xuICBTaG9wQ2xpZW50OiBTaG9wQ2xpZW50LFxuICBDb25maWc6IENvbmZpZyxcbiAgdmVyc2lvbjogdmVyc2lvbixcbiAgTk9fSU1BR0VfVVJJOiBOT19JTUFHRV9VUkksXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIFNob3BDbGllbnQuIFRoaXMgaXMgdGhlIG1haW4gZW50cnkgcG9pbnQgdG8gdGhlIFNESy5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjb25zdCBjbGllbnQgPSBTaG9waWZ5QnV5LmJ1aWxkQ2xpZW50KHtcbiAgICogICBhcGlLZXk6ICdiZjA4MWU4NjBiYzlkYzFjZTA2NTRmZGZiYzIwODkyZCcsXG4gICAqICAgYXBwSWQ6IDYsXG4gICAqICAgbXlTaG9waWZ5RG9tYWluOiAneW91ci1zaG9wLXN1YmRvbWFpbi5teXNob3BpZnkuY29tJywgLy9EZXByZWNhdGVkLiBVc2UgYGRvbWFpbmAgaW5zdGVhZFxuICAgKiAgIGRvbWFpbjogJ2VtYmVkcy5teXNob3BpZnkuY29tJ1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgYnVpbGRDbGllbnRcbiAgICogQGZvciBTaG9waWZ5QnV5XG4gICAqIEBzdGF0aWNcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnQXR0cnMgQW4gb2JqZWN0IG9mIHJlcXVpcmVkIGNvbmZpZyBkYXRhIHN1Y2ggYXM6IGBhcGlLZXlgLCBgYXBwSWRgLCBgZG9tYWluYFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnQXR0cnMuYXBpS2V5IEFuIEFQSSBLZXkgZm9yIHlvdXIgc3RvcmUuIERvY3VtZW50YXRpb24gaG93IHRvIGdldCBhbiBBUEkgS2V5OlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvc2Rrcy9qcy1idXktc2RrL2dldHRpbmctc3RhcnRlZCNhcGkta2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjb25maWdBdHRycy5hcHBJZCBUeXBpY2FsbHkgd2lsbCBiZSA2IHdoaWNoIGlzIHRoZSBCdXkgQnV0dG9uIEFwcCBJZC4gRm9yIG1vcmUgaW5mbyBvbiBBcHAgSWQgc2VlOlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zZGtzL2pzLWJ1eS1zZGsvZ2V0dGluZy1zdGFydGVkI2FwcC1pZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnQXR0cnMuZG9tYWluIFlvdXIgc2hvcCdzIGZ1bGwgYG15c2hvcGlmeS5jb21gIGRvbWFpbi4gRm9yIGV4YW1wbGU6IGBlbWJlZHMubXlzaG9waWZ5LmNvbWBcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZ0F0dHJzLm15U2hvcGlmeURvbWFpbiBZb3Ugc2hvcCdzIGBteXNob3BpZnkuY29tYCBkb21haW4uIFtkZXByZWNhdGVkIFVzZSBjb25maWdBdHRycy5kb21haW5dXG4gICAqIEByZXR1cm4ge1Nob3BDbGllbnR9IGEgY2xpZW50IGZvciB0aGUgc2hvcCB1c2luZyB5b3VyIGFwaSBjcmVkZW50aWFscyB3aGljaCB5b3UgY2FuIHVzZSB0byBxdWVyeSB5b3VyIHN0b3JlLlxuICAgKi9cbiAgYnVpbGRDbGllbnQ6IGZ1bmN0aW9uIGJ1aWxkQ2xpZW50KCkge1xuICAgIHZhciBjb25maWdBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICB2YXIgY29uZmlnID0gbmV3IHRoaXMuQ29uZmlnKGNvbmZpZ0F0dHJzKTtcblxuICAgIHJldHVybiBuZXcgdGhpcy5TaG9wQ2xpZW50KGNvbmZpZyk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2hvcGlmeTtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNDYpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MCkuQnVmZmVyKSlcblxuLyoqKi8gfSksXG4vKiAzMzYgKi8sXG4vKiAzMzcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudmFyIGNhbWVsMmh5cGhlbiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIHN0clxuICAgICAgICAgIC5yZXBsYWNlKC9bQS1aXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiAnLScgKyBtYXRjaC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbWVsMmh5cGhlbjtcblxuLyoqKi8gfSksXG4vKiAzMzggKi8sXG4vKiAzMzkgKi8sXG4vKiAzNDAgKi8sXG4vKiAzNDEgKi8sXG4vKiAzNDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyogKGlnbm9yZWQpICovXG5cbi8qKiovIH0pLFxuLyogMzQzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9zaG9waWZ5QVBJID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cbnZhciBfc2hvcGlmeUFQSTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaG9waWZ5QVBJKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygxNTApO1xuXG52YXIgX3JvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTUxKTtcblxudmFyIF9yb3V0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcm91dGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNhcnRBY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG52YXIgcHJvZHVjdEFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcbnZhciBjb2xsZWN0aW9uQWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xudmFyIHN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkuY29uZmlndXJlKCk7XG5cblxuLy8gc3Vic2NyaWJlIHRvIHRoZSByZWR1eCBzdG9yZVxuc3RvcmUuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgY29uc29sZS5sb2coJ05ldyBzdGF0ZScsIHN0YXRlKTtcbn0pO1xuXG4vLyBhZGQgcHJvZHVjdHMgYW5kIGNvbGxlY3Rpb25zIHRvIHN0b3JlXG5zdG9yZS5kaXNwYXRjaChwcm9kdWN0QWN0aW9ucy5zdGFydEFkZFByb2R1Y3RzKCkpO1xuc3RvcmUuZGlzcGF0Y2goY29sbGVjdGlvbkFjdGlvbnMuc3RhcnRBZGRDb2xsZWN0aW9ucygpKTtcblxuLy8gY3JlYXRlIHNob3BpZnkgY2FydCBpbnN0YW5jZSBiYXNlZCBvbiBsYXN0IHNlc3Npb24gKGJhc2VkIG9uIGxvY2FsU3RvcmFnZSlcbmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFzdENhcnRJZCcpKSB7XG4gIF9zaG9waWZ5QVBJMi5kZWZhdWx0LnJlc3RvcmVDYXJ0KCkudGhlbihmdW5jdGlvbiAobG9jYWxDYXJ0KSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0lOSVRJQUxfQ0FSVF9TVEFURScsIGxvY2FsQ2FydDogbG9jYWxDYXJ0IH0pO1xuICB9KTtcbn0gZWxzZSB7XG4gIF9zaG9waWZ5QVBJMi5kZWZhdWx0LmNyZWF0ZUNhcnQoKS50aGVuKGZ1bmN0aW9uIChsb2NhbENhcnQpIHtcbiAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6ICdTRVRfSU5JVElBTF9DQVJUX1NUQVRFJywgbG9jYWxDYXJ0OiBsb2NhbENhcnQgfSk7XG4gIH0pO1xufVxuXG4vLyBBcHAgY3NzXG4vLyByZXF1aXJlKCdzdHlsZSFjc3Mhc2FzcyFhcHBsaWNhdGlvblN0eWxlcycpXG5cbl9yZWFjdERvbTIuZGVmYXVsdC5yZW5kZXIoX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gIF9yZWFjdFJlZHV4LlByb3ZpZGVyLFxuICB7IHN0b3JlOiBzdG9yZSB9LFxuICBfcm91dGVyMi5kZWZhdWx0XG4pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJykpO1xuXG4vKioqLyB9KVxuXSxbMzQzXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGJ1bmRsZS5taW4uMjEwNWJhYWMzODY0YWE4YmM2MWYuanMiLCJpbXBvcnQgc2hvcGlmeUFQSSBmcm9tICdzaG9waWZ5QVBJJztcblxuZXhwb3J0IHZhciBzdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0gPSAocHJvZHVjdFZhcmlhbnQsIHF1YW50aXR5KSA9PiB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgbGV0IGNhcnQgPSBnZXRTdGF0ZSgpLmNhcnQ7XG4gICAgbGV0IHZhcmlhbnRJZDtcblxuICAgIC8vIGFzc2lnbiB2YXJpYW50IGlkIGJhc2VkIG9uIGlzIHByb2R1Y3Qgb3IgY2FydCBsaW5lIGl0ZW1cbiAgICBpZihwcm9kdWN0VmFyaWFudC52YXJpYW50X2lkKXtcbiAgICAgIHZhcmlhbnRJZCA9IHByb2R1Y3RWYXJpYW50LnZhcmlhbnRfaWQ7XG4gICAgfWVsc2V7XG4gICAgICB2YXJpYW50SWQgPSBwcm9kdWN0VmFyaWFudC5pZDtcbiAgICB9XG5cbiAgICBsZXQgY2FydExpbmVJdGVtID0gZmluZENhcnRJdGVtQnlWYXJpYW50SWQodmFyaWFudElkKTtcblxuICAgIC8vIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHByb2R1Y3QgdmFyaWFudCBhbHJlYWR5IGV4aXN0cyBpbiBjYXJ0XG4gICAgZnVuY3Rpb24gZmluZENhcnRJdGVtQnlWYXJpYW50SWQodmFyaWFudElkKSB7XG4gICAgICByZXR1cm4gY2FydC5saW5lSXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdpdGVtLnZhcmlhbnRfaWQ6ICcsIGl0ZW0udmFyaWFudF9pZCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd2YXJpYW50SWQ6ICcsIHZhcmlhbnRJZCk7XG4gICAgICAgIHJldHVybiAoaXRlbS52YXJpYW50X2lkID09PSB2YXJpYW50SWQpO1xuICAgICAgfSlbMF07XG4gICAgfVxuXG4gICAgaWYgKGNhcnRMaW5lSXRlbSkge1xuICAgICAgZGlzcGF0Y2godXBkYXRlQ2FydEl0ZW0oY2FydExpbmVJdGVtLCBwYXJzZUludChxdWFudGl0eSkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzcGF0Y2goYWRkVG9DYXJ0KHByb2R1Y3RWYXJpYW50LCBxdWFudGl0eSkpO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSB0aGUgY2FydCBzdWJ0b3RhbFxuICAgIGRpc3BhdGNoKHVwZGF0ZUNhcnRTdWJ0b3RhbCgpKTtcblxuICAgIC8vICB1cGRhdGUgdGhlIGNhcnQgaXRlbXMgY291bnRcbiAgICBkaXNwYXRjaCh1cGRhdGVDYXJ0SXRlbXNDb3VudChxdWFudGl0eSkpO1xuICB9XG59O1xuXG4vLyBhZGQgcHJvZHVjdCB0byBjYXJ0XG5leHBvcnQgdmFyIGFkZFRvQ2FydCA9IChwcm9kdWN0VmFyaWFudCwgcXVhbnRpdHkpID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBzaG9waWZ5QVBJLmNhcnQuY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzKHsgdmFyaWFudDogcHJvZHVjdFZhcmlhbnQsIHF1YW50aXR5OiBxdWFudGl0eSB9KS50aGVuKGZ1bmN0aW9uKHVwZGF0ZWRDYXJ0KSB7XG4gICAgICBsZXQgdXBkYXRlZENhcnRJdGVtcyA9IHVwZGF0ZWRDYXJ0LmxpbmVJdGVtcztcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DQVJUX0lURU1TJywgdXBkYXRlZENhcnRJdGVtcyB9KTtcbiAgICAgIGRpc3BhdGNoKG9wZW5DYXJ0KCkpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcnMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gYWRkVG9DYXJ0JywgZXJyb3JzKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gdXBkYXRlIGNhcnQgc3VidG90YWxcbmV4cG9ydCB2YXIgdXBkYXRlQ2FydFN1YnRvdGFsID0gKCkgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGxldCBuZXdTdWJ0b3RhbCA9IHNob3BpZnlBUEkuY2FydC5zdWJ0b3RhbDtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfQ0FSVF9TVUJUT1RBTCcsIG5ld1N1YnRvdGFsIH0pO1xuICB9XG59O1xuXG4vLyB1cGRhdGUgY2FydCBpdGVtcyBjb3VudFxuZXhwb3J0IHZhciB1cGRhdGVDYXJ0SXRlbXNDb3VudCA9IChxdWFudGl0eSkgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGxldCBjYXJ0ID0gZ2V0U3RhdGUoKS5jYXJ0O1xuICAgIGxldCB1cGRhdGVkQ2FydEl0ZW1zQ291bnQgPSBwYXJzZUludChjYXJ0LmxpbmVJdGVtc0NvdW50KSArIHBhcnNlSW50KHF1YW50aXR5KTtcbiAgICBjb25zb2xlLmxvZygnbmV3IHF1YW50aXR5OiAnLCBxdWFudGl0eSk7XG4gICAgY29uc29sZS5sb2coJ29sZCBxdWFudGl0eTogJywgY2FydC5saW5lSXRlbXNDb3VudCk7XG4gICAgY29uc29sZS5sb2coJ3VwZGF0ZWRDYXJ0SXRlbXNDb3VudDogJywgdXBkYXRlZENhcnRJdGVtc0NvdW50KTtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfQ0FSVF9JVEVNU19DT1VOVCcsIHVwZGF0ZWRDYXJ0SXRlbXNDb3VudCB9KTtcblxuICAgIGlmKHBhcnNlSW50KHVwZGF0ZWRDYXJ0SXRlbXNDb3VudCkgPCAxKSB7XG4gICAgICBkaXNwYXRjaChjbG9zZUNhcnQoKSk7XG4gICAgfWVsc2V7XG4gICAgICBkaXNwYXRjaChvcGVuQ2FydCgpKTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHVwZGF0ZSBhIGNhcnQgaXRlbVxuZXhwb3J0IHZhciB1cGRhdGVDYXJ0SXRlbSA9IChzZWxlY3RlZENhcnRJdGVtLCBxdWFudGl0eSkgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGxldCBjYXJ0ID0gZ2V0U3RhdGUoKS5jYXJ0O1xuICAgIGxldCB1cGRhdGVkUXVhbnRpdHkgPSBzZWxlY3RlZENhcnRJdGVtLnF1YW50aXR5ICsgcXVhbnRpdHk7XG4gICAgbGV0IHVwZGF0ZWRDYXJ0SXRlbXMgPSBbXTtcblxuICAgIC8vIGlmIHRoZSBuZXcgcXVhbnRpdHkgaXMgbW9yZSB0aGFuIDAsIGtlZXAgaXQgaW4gdGhlIG5ldyBhcnJheVxuICAgIGNhcnQubGluZUl0ZW1zLmZvckVhY2goKGNhcnRJdGVtKSA9PiB7XG4gICAgICBpZiAoc2VsZWN0ZWRDYXJ0SXRlbS5pZCA9PT0gY2FydEl0ZW0uaWQpIHtcbiAgICAgICAgaWYgKHVwZGF0ZWRRdWFudGl0eSA+IDApIHtcbiAgICAgICAgICBsZXQgdXBkYXRlZENhcnRJdGVtID0gW107XG5cbiAgICAgICAgICAvLyBjbG9uZSB0aGUgbGluZSBpdGVtXG4gICAgICAgICAgdXBkYXRlZENhcnRJdGVtID0gY2FydEl0ZW07XG5cbiAgICAgICAgICAvLyB1cGRhdGUgdGhlIHF1YW50aXR5IG9mIHRoZSBuZXcgY2xvbmVcbiAgICAgICAgICB1cGRhdGVkQ2FydEl0ZW0ucXVhbnRpdHkgPSB1cGRhdGVkUXVhbnRpdHk7XG5cbiAgICAgICAgICAvLyByZXR1cm4gdGhlIHVwZGF0ZWQgY2FydCBpdGVtXG4gICAgICAgICAgdXBkYXRlZENhcnRJdGVtcy5wdXNoKHVwZGF0ZWRDYXJ0SXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICAvLyByZXR1cm4gdGhlIHVubW9kaWZpZWQgaXRlbVxuICAgICAgICB1cGRhdGVkQ2FydEl0ZW1zLnB1c2goY2FydEl0ZW0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gdXBkYXRlIHRoZSBzaG9waWZ5IGNhcnQgYXBpIHNpbmdsZXRvblxuICAgIHNob3BpZnlBUEkuY2FydC51cGRhdGVMaW5lSXRlbShzZWxlY3RlZENhcnRJdGVtLmlkLCB1cGRhdGVkUXVhbnRpdHkpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gdXBkYXRlIHRoZSBsb2NhbCBjYXJ0IGl0ZW1zIChpbiByZWR1eCBzdG9yZSlcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DQVJUX0lURU1TJywgdXBkYXRlZENhcnRJdGVtcyB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gb3BlbiBjYXJ0XG5leHBvcnQgdmFyIG9wZW5DYXJ0ID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdPUEVOX0NBUlQnXG4gIH1cbn07XG5cbi8vIGNsb3NlIGNhcnRcbmV4cG9ydCB2YXIgY2xvc2VDYXJ0ID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdDTE9TRV9DQVJUJ1xuICB9XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2FjdGlvbnMvY2FydEFjdGlvbnMuanN4IiwibGV0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmxldCBTaG9waWZ5QnV5ID0gcmVxdWlyZSgnc2hvcGlmeS1idXknKTtcbmxldCBzdG9yZSA9IHJlcXVpcmUoJ2NvbmZpZ3VyZVN0b3JlJykuY29uZmlndXJlKCk7XG5cbmNsYXNzIHNob3BpZnlBUEkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNsaWVudCA9IFNob3BpZnlCdXkuYnVpbGRDbGllbnQoe1xuICAgICAgYXBpS2V5OiAnZTBhYjhjZjliNWEzMGNlZTI2MTZiZjE1MWE1NmM3NjMnLFxuICAgICAgZG9tYWluOiAncm1jLXByZXZpZXcubXlzaG9waWZ5LmNvbScsXG4gICAgICBhcHBJZDogJzYnXG4gICAgfSk7XG4gICAgdGhpcy5jYXJ0ID0ge307XG4gIH1cblxuICBjcmVhdGVDYXJ0KCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmNsaWVudC5jcmVhdGVDYXJ0KCkudGhlbigobmV3Q2FydCkgPT4ge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGFzdENhcnRJZCcsIG5ld0NhcnQuaWQpO1xuICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRlZCBuZXcgY2FydCcsIG5ld0NhcnQpO1xuICAgICAgICAvLyBzZXQgc2luZ2xldG9uIGNhcnQgb2JqZWN0IHRvIHJlZmVyZW5jZSBzaG9waWZ5IGNhcnRcbiAgICAgICAgdGhpcy5jYXJ0ID0gbmV3Q2FydDtcblxuICAgICAgICAvLyBzZXQgbG9jYWxDYXJ0IChyZWR1eCBjb25uZWN0ZWQpIHRvIGtlZXAgdHJhY2sgb2Ygc3RhdGUgY2hhbmdlc1xuICAgICAgICBsZXQgbG9jYWxDYXJ0ID0ge1xuICAgICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgICAgbGluZUl0ZW1zQ291bnQ6IDAsXG4gICAgICAgICAgbGluZUl0ZW1zOiBbXSxcbiAgICAgICAgICBzdWJ0b3RhbDogMFxuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUobG9jYWxDYXJ0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzdG9yZUNhcnQoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuY2xpZW50LmZldGNoQ2FydChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFzdENhcnRJZCcpKS50aGVuKChyZW1vdGVDYXJ0KSA9PiB7XG4gICAgICAgIC8vIHNldCBzaW5nbGV0b24gY2FydCBvYmplY3QgdG8gcmVmZXJlbmNlIHNob3BpZnkgY2FydFxuICAgICAgICB0aGlzLmNhcnQgPSByZW1vdGVDYXJ0O1xuXG4gICAgICAgIC8vIHNldCBsb2NhbENhcnQgKHJlZHV4IGNvbm5lY3RlZCkgdG8ga2VlcCB0cmFjayBvZiBzdGF0ZSBjaGFuZ2VzXG4gICAgICAgIGxldCBsb2NhbENhcnQgPSB7XG4gICAgICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgICAgICBsaW5lSXRlbXNDb3VudDogcmVtb3RlQ2FydC5saW5lSXRlbUNvdW50LFxuICAgICAgICAgIGxpbmVJdGVtczogcmVtb3RlQ2FydC5saW5lSXRlbXMsXG4gICAgICAgICAgc3VidG90YWw6IHJlbW90ZUNhcnQuc3VidG90YWxcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKGxvY2FsQ2FydCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCAobmV3IHNob3BpZnlBUEkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2FwaS9zaG9waWZ5QVBJLmpzeCIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2NsYXNzbmFtZXMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsImltcG9ydCBzaG9waWZ5QVBJIGZyb20gJ3Nob3BpZnlBUEknO1xuXG5leHBvcnQgdmFyIHNldEFjdGl2ZUNvbGxlY3Rpb24gPSAoaWQpID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIHJldHVybiBzaG9waWZ5QVBJLmNsaWVudC5mZXRjaENvbGxlY3Rpb24oaWQpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGxldCBjb2xsZWN0aW9uID0gZGF0YSB8fCB7fTtcbiAgICAgIGxldCBwYXJzZWRDb2xsZWN0aW9uID0gey4uLmNvbGxlY3Rpb259O1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0FDVElWRV9DT0xMRUNUSU9OJywgcGFyc2VkQ29sbGVjdGlvbiB9KTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbi8vIEFkZCBjb2xsZWN0aW9ucyB0byBzdG9yZVxuZXhwb3J0IHZhciBzdGFydEFkZENvbGxlY3Rpb25zID0gKCkgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgcmV0dXJuIHNob3BpZnlBUEkuY2xpZW50LmZldGNoQWxsQ29sbGVjdGlvbnMoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICB2YXIgY29sbGVjdGlvbnMgPSBkYXRhIHx8IHt9O1xuICAgICAgdmFyIHBhcnNlZENvbGxlY3Rpb25zID0gW107XG5cbiAgICAgIE9iamVjdC5rZXlzKGNvbGxlY3Rpb25zKS5mb3JFYWNoKChjb2xsZWN0aW9uSWQpID0+IHtcbiAgICAgICAgcGFyc2VkQ29sbGVjdGlvbnMucHVzaCh7XG4gICAgICAgICAga2V5OiBjb2xsZWN0aW9uSWQsXG4gICAgICAgICAgLi4uY29sbGVjdGlvbnNbY29sbGVjdGlvbklkXVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkaXNwYXRjaChhZGRDb2xsZWN0aW9ucyhwYXJzZWRDb2xsZWN0aW9ucykpO1xuICAgIH0pO1xuICB9O1xufTtcblxuZXhwb3J0IHZhciBhZGRDb2xsZWN0aW9ucyA9IChjb2xsZWN0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdBRERfQ09MTEVDVElPTlMnLFxuICAgIGNvbGxlY3Rpb25zXG4gIH07XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2FjdGlvbnMvY29sbGVjdGlvbkFjdGlvbnMuanN4IiwiaW1wb3J0IHNob3BpZnlBUEkgZnJvbSAnc2hvcGlmeUFQSSc7XG5cbi8vIEFkZCBwcm9kdWN0cyB0byBzdG9yZVxuZXhwb3J0IHZhciBzdGFydEFkZFByb2R1Y3RzID0gKCkgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgcmV0dXJuIHNob3BpZnlBUEkuY2xpZW50LmZldGNoQWxsUHJvZHVjdHMoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICBsZXQgcHJvZHVjdHMgPSBkYXRhIHx8IHt9O1xuICAgICAgbGV0IHBhcnNlZFByb2R1Y3RzID0gcHJvZHVjdHMubWFwKChwcm9kdWN0LCBpbmRleCkgPT4ge1xuICAgICAgICBsZXQgdXBkYXRlZFByb2R1Y3QgPSBbXTtcbiAgICAgICAgdXBkYXRlZFByb2R1Y3QgPSBwcm9kdWN0O1xuICAgICAgICB1cGRhdGVkUHJvZHVjdC5rZXkgPSBpbmRleDtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRQcm9kdWN0O1xuICAgICAgfSk7XG5cbiAgICAgIGRpc3BhdGNoKGFkZFByb2R1Y3RzKHBhcnNlZFByb2R1Y3RzKSk7XG4gICAgICBkaXNwYXRjaChwcmVsb2FkUHJvZHVjdEltYWdlcygpKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbmV4cG9ydCB2YXIgYWRkUHJvZHVjdHMgPSAocHJvZHVjdHMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQUREX1BST0RVQ1RTJyxcbiAgICBwcm9kdWN0c1xuICB9O1xufTtcblxuZXhwb3J0IHZhciBwcmVsb2FkUHJvZHVjdEltYWdlcyA9ICgpID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBsZXQgcHJvZHVjdHMgPSBnZXRTdGF0ZSgpLnByb2R1Y3RzLmFsbDtcbiAgICBsZXQgaW1hZ2VzID0gW107XG4gICAgcHJvZHVjdHMubWFwKChwcm9kdWN0LCBpbmRleCkgPT4ge1xuICAgICAgaW1hZ2VzW2luZGV4XSA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1hZ2VzW2luZGV4XS5zcmMgPSBwcm9kdWN0LnNlbGVjdGVkVmFyaWFudC5pbWFnZVZhcmlhbnRzWzRdLnNyYztcbiAgICAgIHJldHVybiBpbWFnZXNbaW5kZXhdO1xuICAgIH0pO1xuICB9O1xufTtcblxuXG4vLyBzZXQgYWN0aXZlIHByb2R1Y3RcbmV4cG9ydCB2YXIgc2V0QWN0aXZlUHJvZHVjdCA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ1NFVF9BQ1RJVkVfUFJPRFVDVCcsXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuLy8gY2xlYXIgYWN0aXZlIHByb2R1Y3QgZnJvbSByZWR1eFxuZXhwb3J0IHZhciBjbGVhckFjdGl2ZVByb2R1Y3QgPSAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0NMRUFSX0FDVElWRV9QUk9EVUNUJ1xuICB9O1xufTtcblxuLy8gdXBkYXRlIGFjdGl2ZSBwcm9kdWN0IG9wdGlvblxuZXhwb3J0IHZhciB1cGRhdGVBY3RpdmVQcm9kdWN0T3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ1VQREFURV9BQ1RJVkVfUFJPRFVDVF9PUFRJT05TJyxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2FjdGlvbnMvcHJvZHVjdEFjdGlvbnMuanN4IiwiaW1wb3J0ICogYXMgcmVkdXggZnJvbSAncmVkdXgnO1xuaW1wb3J0IHRodW5rIGZyb20gJ3JlZHV4LXRodW5rJztcblxuaW1wb3J0IHtwcm9kdWN0c1JlZHVjZXIsIGNvbGxlY3Rpb25zUmVkdWNlciwgY2FydFJlZHVjZXIsIG5hdlJlZHVjZXJ9IGZyb20gJ3JlZHVjZXJzJztcblxuZXhwb3J0IGxldCBjb25maWd1cmUgPSAoaW5pdGlhbFN0YXRlID0ge30pID0+IHtcbiAgdmFyIHJlZHVjZXIgPSByZWR1eC5jb21iaW5lUmVkdWNlcnMoe1xuICAgIHByb2R1Y3RzOiBwcm9kdWN0c1JlZHVjZXIsXG4gICAgY29sbGVjdGlvbnM6IGNvbGxlY3Rpb25zUmVkdWNlcixcbiAgICBjYXJ0OiBjYXJ0UmVkdWNlcixcbiAgICBuYXY6IG5hdlJlZHVjZXJcbiAgfSk7XG5cbiAgdmFyIHN0b3JlID0gcmVkdXguY3JlYXRlU3RvcmUocmVkdWNlciwgaW5pdGlhbFN0YXRlLCByZWR1eC5jb21wb3NlKFxuICAgIHJlZHV4LmFwcGx5TWlkZGxld2FyZSh0aHVuayksXG4gICAgd2luZG93LmRldlRvb2xzRXh0ZW5zaW9uID8gd2luZG93LmRldlRvb2xzRXh0ZW5zaW9uKCkgOiBmID0+IGZcbiAgKSk7XG5cbiAgcmV0dXJuIHN0b3JlO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9zdG9yZS9jb25maWd1cmVTdG9yZS5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMb2FkZXIoKXtcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibG9hZGVyXCI+PGkgY2xhc3NOYW1lPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBmYS0zeCBmYS1md1wiPjwvaT48L2Rpdj5cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9wcmVzZW50YXRpb25hbC9Mb2FkZXIuanMiLCJjbGFzcyBGb3JtYXR7XG4gIGNvbnN0cnVjdG9yKCl7XG4gIH1cblxuICAvLyBmb3JtYXQgYW1vdW50IGFzIGN1cnJlbmN5XG4gIGFzTW9uZXkoYW1vdW50LCBjdXJyZW5jeSwgdGhvdXNhbmRTZXBhcmF0b3IsIGRlY2ltYWxTZXBhcmF0b3IsIGxvY2FsZURlY2ltYWxTZXBhcmF0b3IpIHtcbiAgICBjdXJyZW5jeSA9IGN1cnJlbmN5IHx8ICckJztcbiAgICB0aG91c2FuZFNlcGFyYXRvciA9IHRob3VzYW5kU2VwYXJhdG9yIHx8ICcsJztcbiAgICBkZWNpbWFsU2VwYXJhdG9yID0gZGVjaW1hbFNlcGFyYXRvciB8fCAnLic7XG4gICAgbG9jYWxlRGVjaW1hbFNlcGFyYXRvciA9IGxvY2FsZURlY2ltYWxTZXBhcmF0b3IgfHwgJy4nO1xuICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJyhcXFxcZCkoPz0oXFxcXGR7M30pK1xcXFwuKScsICdnJyk7XG5cbiAgICByZXR1cm4gY3VycmVuY3kgKyBwYXJzZUZsb2F0KGFtb3VudCwgMTApLnRvRml4ZWQoMilcbiAgICAgIC5yZXBsYWNlKGxvY2FsZURlY2ltYWxTZXBhcmF0b3IsIGRlY2ltYWxTZXBhcmF0b3IpXG4gICAgICAucmVwbGFjZShyZWdleCwgJyQxJyArIHRob3VzYW5kU2VwYXJhdG9yKVxuICAgICAgLnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgKG5ldyBGb3JtYXQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3V0aWxzL2Zvcm1hdC5qc3giLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF90cmFja0hlbHBlciA9IHJlcXVpcmUoJy4vdHJhY2tIZWxwZXInKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBoZWxwZXJzID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKHByb3BzKSB7XG4gICAgdmFyIHNsaWNrTGlzdCA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLmxpc3QpO1xuXG4gICAgdmFyIHNsaWRlQ291bnQgPSBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uY291bnQocHJvcHMuY2hpbGRyZW4pO1xuICAgIHZhciBsaXN0V2lkdGggPSB0aGlzLmdldFdpZHRoKHNsaWNrTGlzdCk7XG4gICAgdmFyIHRyYWNrV2lkdGggPSB0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLnRyYWNrKSk7XG4gICAgdmFyIHNsaWRlV2lkdGg7XG5cbiAgICBpZiAoIXByb3BzLnZlcnRpY2FsKSB7XG4gICAgICB2YXIgY2VudGVyUGFkZGluZ0FkaiA9IHByb3BzLmNlbnRlck1vZGUgJiYgcGFyc2VJbnQocHJvcHMuY2VudGVyUGFkZGluZykgKiAyO1xuICAgICAgc2xpZGVXaWR0aCA9ICh0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKSkgLSBjZW50ZXJQYWRkaW5nQWRqKSAvIHByb3BzLnNsaWRlc1RvU2hvdztcbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpKTtcbiAgICB9XG5cbiAgICB2YXIgc2xpZGVIZWlnaHQgPSB0aGlzLmdldEhlaWdodChzbGlja0xpc3QucXVlcnlTZWxlY3RvcignW2RhdGEtaW5kZXg9XCIwXCJdJykpO1xuICAgIHZhciBsaXN0SGVpZ2h0ID0gc2xpZGVIZWlnaHQgKiBwcm9wcy5zbGlkZXNUb1Nob3c7XG5cbiAgICB2YXIgY3VycmVudFNsaWRlID0gcHJvcHMucnRsID8gc2xpZGVDb3VudCAtIDEgLSBwcm9wcy5pbml0aWFsU2xpZGUgOiBwcm9wcy5pbml0aWFsU2xpZGU7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNsaWRlQ291bnQ6IHNsaWRlQ291bnQsXG4gICAgICBzbGlkZVdpZHRoOiBzbGlkZVdpZHRoLFxuICAgICAgbGlzdFdpZHRoOiBsaXN0V2lkdGgsXG4gICAgICB0cmFja1dpZHRoOiB0cmFja1dpZHRoLFxuICAgICAgY3VycmVudFNsaWRlOiBjdXJyZW50U2xpZGUsXG4gICAgICBzbGlkZUhlaWdodDogc2xpZGVIZWlnaHQsXG4gICAgICBsaXN0SGVpZ2h0OiBsaXN0SGVpZ2h0XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICB2YXIgdGFyZ2V0TGVmdCA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tMZWZ0KSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgICBzbGlkZUluZGV4OiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgICAgdHJhY2tSZWY6IHRoaXMudHJhY2tcbiAgICAgIH0sIHByb3BzLCB0aGlzLnN0YXRlKSk7XG4gICAgICAvLyBnZXRDU1MgZnVuY3Rpb24gbmVlZHMgcHJldmlvdXNseSBzZXQgc3RhdGVcbiAgICAgIHZhciB0cmFja1N0eWxlID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0NTUykoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgbGVmdDogdGFyZ2V0TGVmdCB9LCBwcm9wcywgdGhpcy5zdGF0ZSkpO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHsgdHJhY2tTdHlsZTogdHJhY2tTdHlsZSB9KTtcblxuICAgICAgdGhpcy5hdXRvUGxheSgpOyAvLyBvbmNlIHdlJ3JlIHNldCB1cCwgdHJpZ2dlciB0aGUgaW5pdGlhbCBhdXRvcGxheS5cbiAgICB9KTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUocHJvcHMpIHtcbiAgICB2YXIgc2xpY2tMaXN0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMubGlzdCk7XG4gICAgLy8gVGhpcyBtZXRob2QgaGFzIG1vc3RseSBzYW1lIGNvZGUgYXMgaW5pdGlhbGl6ZSBtZXRob2QuXG4gICAgLy8gUmVmYWN0b3IgaXRcbiAgICB2YXIgc2xpZGVDb3VudCA9IF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5jb3VudChwcm9wcy5jaGlsZHJlbik7XG4gICAgdmFyIGxpc3RXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoc2xpY2tMaXN0KTtcbiAgICB2YXIgdHJhY2tXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMudHJhY2spKTtcbiAgICB2YXIgc2xpZGVXaWR0aDtcblxuICAgIGlmICghcHJvcHMudmVydGljYWwpIHtcbiAgICAgIHZhciBjZW50ZXJQYWRkaW5nQWRqID0gcHJvcHMuY2VudGVyTW9kZSAmJiBwYXJzZUludChwcm9wcy5jZW50ZXJQYWRkaW5nKSAqIDI7XG4gICAgICBzbGlkZVdpZHRoID0gKHRoaXMuZ2V0V2lkdGgoX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpKSAtIGNlbnRlclBhZGRpbmdBZGopIC8gcHJvcHMuc2xpZGVzVG9TaG93O1xuICAgIH0gZWxzZSB7XG4gICAgICBzbGlkZVdpZHRoID0gdGhpcy5nZXRXaWR0aChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykpO1xuICAgIH1cblxuICAgIHZhciBzbGlkZUhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KHNsaWNrTGlzdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbmRleD1cIjBcIl0nKSk7XG4gICAgdmFyIGxpc3RIZWlnaHQgPSBzbGlkZUhlaWdodCAqIHByb3BzLnNsaWRlc1RvU2hvdztcblxuICAgIC8vIHBhdXNlIHNsaWRlciBpZiBhdXRvcGxheSBpcyBzZXQgdG8gZmFsc2VcbiAgICBpZiAocHJvcHMuYXV0b3BsYXkpIHtcbiAgICAgIHRoaXMucGF1c2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hdXRvUGxheSgpO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2xpZGVDb3VudDogc2xpZGVDb3VudCxcbiAgICAgIHNsaWRlV2lkdGg6IHNsaWRlV2lkdGgsXG4gICAgICBsaXN0V2lkdGg6IGxpc3RXaWR0aCxcbiAgICAgIHRyYWNrV2lkdGg6IHRyYWNrV2lkdGgsXG4gICAgICBzbGlkZUhlaWdodDogc2xpZGVIZWlnaHQsXG4gICAgICBsaXN0SGVpZ2h0OiBsaXN0SGVpZ2h0XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICB2YXIgdGFyZ2V0TGVmdCA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tMZWZ0KSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgICBzbGlkZUluZGV4OiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgICAgdHJhY2tSZWY6IHRoaXMudHJhY2tcbiAgICAgIH0sIHByb3BzLCB0aGlzLnN0YXRlKSk7XG4gICAgICAvLyBnZXRDU1MgZnVuY3Rpb24gbmVlZHMgcHJldmlvdXNseSBzZXQgc3RhdGVcbiAgICAgIHZhciB0cmFja1N0eWxlID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0NTUykoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgbGVmdDogdGFyZ2V0TGVmdCB9LCBwcm9wcywgdGhpcy5zdGF0ZSkpO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHsgdHJhY2tTdHlsZTogdHJhY2tTdHlsZSB9KTtcbiAgICB9KTtcbiAgfSxcbiAgZ2V0V2lkdGg6IGZ1bmN0aW9uIGdldFdpZHRoKGVsZW0pIHtcbiAgICByZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCB8fCBlbGVtLm9mZnNldFdpZHRoIHx8IDA7XG4gIH0sXG4gIGdldEhlaWdodDogZnVuY3Rpb24gZ2V0SGVpZ2h0KGVsZW0pIHtcbiAgICByZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgfHwgZWxlbS5vZmZzZXRIZWlnaHQgfHwgMDtcbiAgfSxcblxuICBhZGFwdEhlaWdodDogZnVuY3Rpb24gYWRhcHRIZWlnaHQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYWRhcHRpdmVIZWlnaHQpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9ICdbZGF0YS1pbmRleD1cIicgKyB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSArICdcIl0nO1xuICAgICAgaWYgKHRoaXMubGlzdCkge1xuICAgICAgICB2YXIgc2xpY2tMaXN0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMubGlzdCk7XG4gICAgICAgIHNsaWNrTGlzdC5zdHlsZS5oZWlnaHQgPSBzbGlja0xpc3QucXVlcnlTZWxlY3RvcihzZWxlY3Rvcikub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNhbkdvTmV4dDogZnVuY3Rpb24gY2FuR29OZXh0KG9wdHMpIHtcbiAgICB2YXIgY2FuR28gPSB0cnVlO1xuICAgIGlmICghb3B0cy5pbmZpbml0ZSkge1xuICAgICAgaWYgKG9wdHMuY2VudGVyTW9kZSkge1xuICAgICAgICAvLyBjaGVjayBpZiBjdXJyZW50IHNsaWRlIGlzIGxhc3Qgc2xpZGVcbiAgICAgICAgaWYgKG9wdHMuY3VycmVudFNsaWRlID49IG9wdHMuc2xpZGVDb3VudCAtIDEpIHtcbiAgICAgICAgICBjYW5HbyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjaGVjayBpZiBhbGwgc2xpZGVzIGFyZSBzaG93biBpbiBzbGlkZXJcbiAgICAgICAgaWYgKG9wdHMuc2xpZGVDb3VudCA8PSBvcHRzLnNsaWRlc1RvU2hvdyB8fCBvcHRzLmN1cnJlbnRTbGlkZSA+PSBvcHRzLnNsaWRlQ291bnQgLSBvcHRzLnNsaWRlc1RvU2hvdykge1xuICAgICAgICAgIGNhbkdvID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhbkdvO1xuICB9LFxuICBzbGlkZUhhbmRsZXI6IGZ1bmN0aW9uIHNsaWRlSGFuZGxlcihpbmRleCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAvLyBGdW5jdGlvbmFsaXR5IG9mIGFuaW1hdGVTbGlkZSBhbmQgcG9zdFNsaWRlIGlzIG1lcmdlZCBpbnRvIHRoaXMgZnVuY3Rpb25cbiAgICAvLyBjb25zb2xlLmxvZygnc2xpZGVIYW5kbGVyJywgaW5kZXgpO1xuICAgIHZhciB0YXJnZXRTbGlkZSwgY3VycmVudFNsaWRlO1xuICAgIHZhciB0YXJnZXRMZWZ0LCBjdXJyZW50TGVmdDtcbiAgICB2YXIgY2FsbGJhY2s7XG5cbiAgICBpZiAodGhpcy5wcm9wcy53YWl0Rm9yQW5pbWF0ZSAmJiB0aGlzLnN0YXRlLmFuaW1hdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmZhZGUpIHtcbiAgICAgIGN1cnJlbnRTbGlkZSA9IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlO1xuXG4gICAgICAvLyBEb24ndCBjaGFuZ2Ugc2xpZGUgaWYgaXQncyBub3QgaW5maXRlIGFuZCBjdXJyZW50IHNsaWRlIGlzIHRoZSBmaXJzdCBvciBsYXN0IHNsaWRlLlxuICAgICAgaWYgKHRoaXMucHJvcHMuaW5maW5pdGUgPT09IGZhbHNlICYmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vICBTaGlmdGluZyB0YXJnZXRTbGlkZSBiYWNrIGludG8gdGhlIHJhbmdlXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIHRhcmdldFNsaWRlID0gaW5kZXggKyB0aGlzLnN0YXRlLnNsaWRlQ291bnQ7XG4gICAgICB9IGVsc2UgaWYgKGluZGV4ID49IHRoaXMuc3RhdGUuc2xpZGVDb3VudCkge1xuICAgICAgICB0YXJnZXRTbGlkZSA9IGluZGV4IC0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBpbmRleDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMubGF6eUxvYWQgJiYgdGhpcy5zdGF0ZS5sYXp5TG9hZGVkTGlzdC5pbmRleE9mKHRhcmdldFNsaWRlKSA8IDApIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgbGF6eUxvYWRlZExpc3Q6IHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QuY29uY2F0KHRhcmdldFNsaWRlKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGFuaW1hdGluZzogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChfdGhpcy5wcm9wcy5hZnRlckNoYW5nZSkge1xuICAgICAgICAgIF90aGlzLnByb3BzLmFmdGVyQ2hhbmdlKHRhcmdldFNsaWRlKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgX3RoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2s7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgYW5pbWF0aW5nOiB0cnVlLFxuICAgICAgICBjdXJyZW50U2xpZGU6IHRhcmdldFNsaWRlXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2sgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCB0aGlzLnByb3BzLnNwZWVkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5iZWZvcmVDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5iZWZvcmVDaGFuZ2UodGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsIHRhcmdldFNsaWRlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hdXRvUGxheSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRhcmdldFNsaWRlID0gaW5kZXg7XG4gICAgaWYgKHRhcmdldFNsaWRlIDwgMCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaW5maW5pdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuc2xpZGVDb3VudCAlIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwgIT09IDApIHtcbiAgICAgICAgY3VycmVudFNsaWRlID0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50IC0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50ICUgdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudCArIHRhcmdldFNsaWRlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGFyZ2V0U2xpZGUgPj0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50KSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY3VycmVudFNsaWRlID0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50IC0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3c7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuc2xpZGVDb3VudCAlIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwgIT09IDApIHtcbiAgICAgICAgY3VycmVudFNsaWRlID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IHRhcmdldFNsaWRlIC0gdGhpcy5zdGF0ZS5zbGlkZUNvdW50O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50U2xpZGUgPSB0YXJnZXRTbGlkZTtcbiAgICB9XG5cbiAgICB0YXJnZXRMZWZ0ID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0xlZnQpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7XG4gICAgICBzbGlkZUluZGV4OiB0YXJnZXRTbGlkZSxcbiAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpO1xuXG4gICAgY3VycmVudExlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgIHNsaWRlSW5kZXg6IGN1cnJlbnRTbGlkZSxcbiAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuaW5maW5pdGUgPT09IGZhbHNlKSB7XG4gICAgICB0YXJnZXRMZWZ0ID0gY3VycmVudExlZnQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuYmVmb3JlQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLmJlZm9yZUNoYW5nZSh0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSwgY3VycmVudFNsaWRlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5sYXp5TG9hZCkge1xuICAgICAgdmFyIGxvYWRlZCA9IHRydWU7XG4gICAgICB2YXIgc2xpZGVzVG9Mb2FkID0gW107XG4gICAgICBmb3IgKHZhciBpID0gdGFyZ2V0U2xpZGU7IGkgPCB0YXJnZXRTbGlkZSArIHRoaXMucHJvcHMuc2xpZGVzVG9TaG93OyBpKyspIHtcbiAgICAgICAgbG9hZGVkID0gbG9hZGVkICYmIHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QuaW5kZXhPZihpKSA+PSAwO1xuICAgICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICAgIHNsaWRlc1RvTG9hZC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBsYXp5TG9hZGVkTGlzdDogdGhpcy5zdGF0ZS5sYXp5TG9hZGVkTGlzdC5jb25jYXQoc2xpZGVzVG9Mb2FkKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTbGlkZSBUcmFuc2l0aW9uIGhhcHBlbnMgaGVyZS5cbiAgICAvLyBhbmltYXRlZCB0cmFuc2l0aW9uIGhhcHBlbnMgdG8gdGFyZ2V0IFNsaWRlIGFuZFxuICAgIC8vIG5vbiAtIGFuaW1hdGVkIHRyYW5zaXRpb24gaGFwcGVucyB0byBjdXJyZW50IFNsaWRlXG4gICAgLy8gSWYgQ1NTIHRyYW5zaXRpb25zIGFyZSBmYWxzZSwgZGlyZWN0bHkgZ28gdGhlIGN1cnJlbnQgc2xpZGUuXG5cbiAgICBpZiAodGhpcy5wcm9wcy51c2VDU1MgPT09IGZhbHNlKSB7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjdXJyZW50U2xpZGU6IGN1cnJlbnRTbGlkZSxcbiAgICAgICAgdHJhY2tTdHlsZTogKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0NTUykoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgbGVmdDogY3VycmVudExlZnQgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFmdGVyQ2hhbmdlKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5hZnRlckNoYW5nZShjdXJyZW50U2xpZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuXG4gICAgICB2YXIgbmV4dFN0YXRlQ2hhbmdlcyA9IHtcbiAgICAgICAgYW5pbWF0aW5nOiBmYWxzZSxcbiAgICAgICAgY3VycmVudFNsaWRlOiBjdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrU3R5bGU6ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IGN1cnJlbnRMZWZ0IH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKSxcbiAgICAgICAgc3dpcGVMZWZ0OiBudWxsXG4gICAgICB9O1xuXG4gICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZShuZXh0U3RhdGVDaGFuZ2VzKTtcbiAgICAgICAgaWYgKF90aGlzLnByb3BzLmFmdGVyQ2hhbmdlKSB7XG4gICAgICAgICAgX3RoaXMucHJvcHMuYWZ0ZXJDaGFuZ2UoY3VycmVudFNsaWRlKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgX3RoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2s7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgYW5pbWF0aW5nOiB0cnVlLFxuICAgICAgICBjdXJyZW50U2xpZGU6IGN1cnJlbnRTbGlkZSxcbiAgICAgICAgdHJhY2tTdHlsZTogKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0FuaW1hdGVDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IHRhcmdldExlZnQgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2sgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCB0aGlzLnByb3BzLnNwZWVkKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuYXV0b1BsYXkoKTtcbiAgfSxcbiAgc3dpcGVEaXJlY3Rpb246IGZ1bmN0aW9uIHN3aXBlRGlyZWN0aW9uKHRvdWNoT2JqZWN0KSB7XG4gICAgdmFyIHhEaXN0LCB5RGlzdCwgciwgc3dpcGVBbmdsZTtcblxuICAgIHhEaXN0ID0gdG91Y2hPYmplY3Quc3RhcnRYIC0gdG91Y2hPYmplY3QuY3VyWDtcbiAgICB5RGlzdCA9IHRvdWNoT2JqZWN0LnN0YXJ0WSAtIHRvdWNoT2JqZWN0LmN1clk7XG4gICAgciA9IE1hdGguYXRhbjIoeURpc3QsIHhEaXN0KTtcblxuICAgIHN3aXBlQW5nbGUgPSBNYXRoLnJvdW5kKHIgKiAxODAgLyBNYXRoLlBJKTtcbiAgICBpZiAoc3dpcGVBbmdsZSA8IDApIHtcbiAgICAgIHN3aXBlQW5nbGUgPSAzNjAgLSBNYXRoLmFicyhzd2lwZUFuZ2xlKTtcbiAgICB9XG4gICAgaWYgKHN3aXBlQW5nbGUgPD0gNDUgJiYgc3dpcGVBbmdsZSA+PSAwIHx8IHN3aXBlQW5nbGUgPD0gMzYwICYmIHN3aXBlQW5nbGUgPj0gMzE1KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5ydGwgPT09IGZhbHNlID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICB9XG4gICAgaWYgKHN3aXBlQW5nbGUgPj0gMTM1ICYmIHN3aXBlQW5nbGUgPD0gMjI1KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5ydGwgPT09IGZhbHNlID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWxTd2lwaW5nID09PSB0cnVlKSB7XG4gICAgICBpZiAoc3dpcGVBbmdsZSA+PSAzNSAmJiBzd2lwZUFuZ2xlIDw9IDEzNSkge1xuICAgICAgICByZXR1cm4gJ2Rvd24nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICd1cCc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICd2ZXJ0aWNhbCc7XG4gIH0sXG4gIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgdmFyIG5leHRJbmRleDtcblxuICAgIGlmICghdGhpcy5zdGF0ZS5tb3VudGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMucnRsKSB7XG4gICAgICBuZXh0SW5kZXggPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSAtIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmNhbkdvTmV4dChfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpKSB7XG4gICAgICAgIG5leHRJbmRleCA9IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlICsgdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNsaWRlSGFuZGxlcihuZXh0SW5kZXgpO1xuICB9LFxuICBhdXRvUGxheTogZnVuY3Rpb24gYXV0b1BsYXkoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXV0b1BsYXlUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3RhdGUuYXV0b1BsYXlUaW1lcik7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLmF1dG9wbGF5KSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgYXV0b1BsYXlUaW1lcjogc2V0VGltZW91dCh0aGlzLnBsYXksIHRoaXMucHJvcHMuYXV0b3BsYXlTcGVlZClcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgcGF1c2U6IGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmF1dG9QbGF5VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YXRlLmF1dG9QbGF5VGltZXIpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGF1dG9QbGF5VGltZXI6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gaGVscGVycztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL21peGlucy9oZWxwZXJzLmpzXG4vLyBtb2R1bGUgaWQgPSA4MFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xubGV0IHsgY29ubmVjdCB9ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcbmxldCBhY3Rpb25zID0gcmVxdWlyZSgnY29sbGVjdGlvbkFjdGlvbnMnKTtcblxuY2xhc3MgQ29sbGVjdGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpe1xuICAgIGxldCB7ZGlzcGF0Y2h9ID0gdGhpcy5wcm9wcztcbiAgICBkaXNwYXRjaChhY3Rpb25zLnNldEFjdGl2ZUNvbGxlY3Rpb24odGhpcy5wcm9wcy5wYXJhbXMuY29sbGVjdGlvbklkKSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IGNvbGxlY3Rpb247XG4gICAgY29sbGVjdGlvbiA9IHRoaXMucHJvcHMuY29sbGVjdGlvbjtcbiAgICBpZiAoY29sbGVjdGlvbil7XG4gICAgICBsZXQge2Rpc3BhdGNofSA9IHRoaXMucHJvcHM7XG4gICAgICBsZXQge2NvbGxlY3Rpb25faWQsIHRpdGxlfSA9IGNvbGxlY3Rpb247XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sbGVjdGlvbi1pbmRleFwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPnt0aXRsZX08L2gxPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+TG9hZGluZyBjb2xsZWN0aW9uLi4uPC9kaXY+XG4gICAgICApXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gIChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xsZWN0aW9uOiBzdGF0ZS5jb2xsZWN0aW9ucy5hY3RpdmVcbiAgICB9XG4gIH1cbikoQ29sbGVjdGlvbik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9Db2xsZWN0aW9uLmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0xpbmt9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5sZXQge2Nvbm5lY3R9ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcbmxldCBwcm9kdWN0QWN0aW9ucyA9IHJlcXVpcmUoJ3Byb2R1Y3RBY3Rpb25zJyk7XG5sZXQgY2FydEFjdGlvbnMgPSByZXF1aXJlKCdjYXJ0QWN0aW9ucycpO1xuaW1wb3J0IHticm93c2VySGlzdG9yeX0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCBGb3JtYXQgZnJvbSAnZm9ybWF0JztcbmltcG9ydCBNb2RhbCBmcm9tICdyZWFjdC1tb2RhbCc7XG5pbXBvcnQgc2hvcGlmeUFQSSBmcm9tICdzaG9waWZ5QVBJJztcbmltcG9ydCBMb2FkZXIgZnJvbSAnTG9hZGVyJztcblxuY2xhc3MgUHJvZHVjdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBtb2RhbElzT3BlbjogZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzLm9wZW5Nb2RhbCA9IHRoaXMub3Blbk1vZGFsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbG9zZU1vZGFsID0gdGhpcy5jbG9zZU1vZGFsLmJpbmQodGhpcyk7XG5cbiAgICBsZXQgZGlzcGF0Y2g7XG4gICAgbGV0IHByb2R1Y3Q7XG4gIH1cblxuICBjb21wb25lbnRXaWxsTW91bnQoKXtcbiAgICB0aGlzLmRpc3BhdGNoID0gdGhpcy5wcm9wcy5kaXNwYXRjaDtcblxuICAgIHNob3BpZnlBUEkuY2xpZW50LmZldGNoUHJvZHVjdCh0aGlzLnByb3BzLnBhcmFtcy5wcm9kdWN0SWQpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGxldCBwcm9kdWN0ID0gZGF0YSB8fCB7fTtcbiAgICAgIHRoaXMucHJvZHVjdCA9IHByb2R1Y3Q7XG4gICAgICB0aGlzLmRpc3BhdGNoKHByb2R1Y3RBY3Rpb25zLnNldEFjdGl2ZVByb2R1Y3QocHJvZHVjdC5vcHRpb25zKSk7XG4gICAgfSk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xuICAgIHRoaXMuZGlzcGF0Y2gocHJvZHVjdEFjdGlvbnMuY2xlYXJBY3RpdmVQcm9kdWN0KCkpO1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHttb2RhbElzT3BlbjogZmFsc2V9KTtcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHttb2RhbElzT3BlbjogdHJ1ZX0pO1xuICB9XG5cbiAgaGFuZGxlT3B0aW9uQ2hhbmdlKG9wdGlvbk5hbWUsIHZhbHVlKSB7XG4gICAgLy8gdXBkYXRlIHByb2R1Y3Qgb3B0aW9ucyBpbiB0aGUgU2hvcGlmeSBzaW5nbGV0b25cbiAgICB0aGlzLnByb2R1Y3Qub3B0aW9ucy5maWx0ZXIoKG9wdGlvbikgPT4ge1xuICAgICAgcmV0dXJuIG9wdGlvbi5uYW1lID09PSBvcHRpb25OYW1lO1xuICAgIH0pWzBdLnNlbGVjdGVkID0gdmFsdWU7XG5cbiAgICAvLyB1cGRhdGUgcHJvZHVjdCBvcHRpb25zXG4gICAgdGhpcy5kaXNwYXRjaChwcm9kdWN0QWN0aW9ucy51cGRhdGVBY3RpdmVQcm9kdWN0T3B0aW9ucyh0aGlzLnByb2R1Y3Qub3B0aW9ucykpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBhY3RpdmVQcm9kdWN0O1xuICAgIGFjdGl2ZVByb2R1Y3QgPSB0aGlzLnByb2R1Y3Q7XG4gICAgaWYgKGFjdGl2ZVByb2R1Y3QpIHtcbiAgICAgIGxldCB7ZGlzcGF0Y2h9ID0gdGhpcy5wcm9wcztcbiAgICAgIGxldCB7cHJvZHVjdF9pZCwgdGl0bGUsIGltYWdlcywgb3B0aW9uc30gPSBhY3RpdmVQcm9kdWN0LmF0dHJzO1xuICAgICAgbGV0IHtkZXNjcmlwdGlvbiwgc2VsZWN0ZWRWYXJpYW50LCBzZWxlY3RlZFZhcmlhbnRJbWFnZX0gPSBhY3RpdmVQcm9kdWN0O1xuXG4gICAgICBsZXQgcmVuZGVyT3B0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3Qtb3B0aW9uc1wiPlxuICAgICAgICAgICAge2FjdGl2ZVByb2R1Y3Qub3B0aW9ucy5tYXAoKG9wdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbi5uYW1lICE9IFwiU2l6ZVwiICYmIG9wdGlvbi5uYW1lICE9IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8c2VsZWN0IGtleT17aW5kZXh9IG5hbWU9e29wdGlvbi5uYW1lfSB2YWx1ZT17b3B0aW9uLnNlbGVjdGVkfSBvbkNoYW5nZT17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlT3B0aW9uQ2hhbmdlKG9wdGlvbi5uYW1lLCBldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgfX0+XG4gICAgICAgICAgICAgICAgICAgIHtvcHRpb24udmFsdWVzLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpbmRleH0gdmFsdWU9e3ZhbHVlfT57dmFsdWV9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgbGV0IHJlbmRlclNpemVzID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGFjdGl2ZVByb2R1Y3Qub3B0aW9ucy5tYXAoKG9wdGlvbiwgb3B0aW9uc0luZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAob3B0aW9uLm5hbWUgPT0gXCJTaXplXCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8dWwga2V5PXtvcHRpb25zSW5kZXh9IGNsYXNzTmFtZT1cInByb2R1Y3Qtc2l6ZXNcIj5cbiAgICAgICAgICAgICAgICAgIHtvcHRpb24udmFsdWVzLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHJvZHVjdC1zaXplICR7b3B0aW9uLnNlbGVjdGVkID09PSB2YWx1ZSA/ICdzZWxlY3RlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU9wdGlvbkNoYW5nZShvcHRpb24ubmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9saT4pO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ2FjdGl2ZVByb2R1Y3Q6ICcsIGFjdGl2ZVByb2R1Y3QpO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIG1lZGl1bS04IGNvbHVtblwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2Jyb3dzZXJIaXN0b3J5LmdvQmFja30gY2xhc3NOYW1lPVwiYnV0dG9uIGhvbGxvd1wiPiZsc2FxdW87IEJhY2sgdG8gcHJvZHVjdHM8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj48aW1nIHNyYz17c2VsZWN0ZWRWYXJpYW50SW1hZ2Uuc3JjfSBhbHQ9XCJcIiAvPjwvcD5cbiAgICAgICAgICAgICAgey8qIDxwPkN1cnJlbnQgb3B0aW9uczo8L3A+ICovfVxuICAgICAgICAgICAgICB7Lyoge29wdGlvbnMubWFwKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxwPntvcHRpb24ubmFtZX08L3A+XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICB7aW1hZ2VzLm1hcChpbWFnZSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxpbWcga2V5PXtpbWFnZS5pZH0gaGVpZ2h0PVwiNTBcIiB3aWR0aD1cIjUwXCIgc3JjPXtpbWFnZS5zcmN9IGFsdD1cIlwiIC8+XG4gICAgICAgICAgICAgIH0pfSAqL31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBtZWRpdW0tNCBjb2x1bW5cIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInByb2R1Y3QtdGl0bGVcIj57dGl0bGV9PC9oMT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0LWluZm9cIj5cbiAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwicHJvZHVjdC1pbmZvX19oZWFkbGluZVwiPkFydGlzdDwvaDU+XG4gICAgICAgICAgICAgICAgPHA+SldJU0g4ODwvcD5cblxuICAgICAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJwcm9kdWN0LWluZm9fX2hlYWRsaW5lXCI+RGVzY3JpcHRpb248L2g1PlxuICAgICAgICAgICAgICAgIDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGRlc2NyaXB0aW9ufX0+PC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7cmVuZGVyT3B0aW9ucygpfVxuXG4gICAgICAgICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwicHJvZHVjdC1zdHlsZVwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJTZWxlY3Qgc3R5bGVcIiAvPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwicHJvZHVjdC1zdHlsZV9fYnV0dG9uXCI+PGkgY2xhc3NOYW1lPVwiZmEgZmEtY2FyZXQtcmlnaHRcIj48L2k+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuXG4gICAgICAgICAgICAgICAge3JlbmRlclNpemVzKCl9XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3QtcHJpY2VcIj57Rm9ybWF0LmFzTW9uZXkoc2VsZWN0ZWRWYXJpYW50LnByaWNlKX08L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZHVjdC1jaGFyaXR5XCI+XG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkNob29zZSBDaGFyaXR5XCIgLz5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cInByb2R1Y3QtY2hhcml0eV9fYnV0dG9uXCI+PGkgY2xhc3NOYW1lPVwiZmEgZmEtY2FyZXQtcmlnaHRcIj48L2k+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3QtY2hhcml0eV9fbW9yZS1pbmZvXCIgb25DbGljaz17dGhpcy5vcGVuTW9kYWx9PjxpIGNsYXNzTmFtZT1cImZhIGZhLWluZm8tY2lyY2xlXCI+PC9pPiA8YSBocmVmPVwiI1wiPm1vcmUgaW5mbzwvYT48L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgICAgIGlzT3Blbj17dGhpcy5zdGF0ZS5tb2RhbElzT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e3RoaXMuY2xvc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgY29udGVudExhYmVsPVwibW9yZSBpbmZvXCJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VUaW1lb3V0TVM9ezIwMH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiUmVhY3RNb2RhbF9fQ29udGVudFwiXG4gICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgPHA+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gUGVsbGVudGVzcXVlIGVnZXN0YXMsIG5pYmggc2VkIHRyaXN0aXF1ZSBvcm5hcmUsIG51bmMgZHVpIHNvbGxpY2l0dWRpbiBlbGl0LCBpZCBjb25zZWN0ZXR1ciBvZGlvIGxlY3R1cyBldSBudWxsYS4gUHJvaW4gZGFwaWJ1cyBjb252YWxsaXMgdXJuYSBzaXQgYW1ldCBkaWN0dW0uIFV0IHBvcnR0aXRvciBsaWd1bGEgYXQgcHVydXMgYXVjdG9yIG1vbGVzdGllLiBFdGlhbSB2ZWxpdCBuaWJoLCBwb3J0dGl0b3IgYXQgaXBzdW0gbWF0dGlzLCBjb25zZWN0ZXR1ciBlZ2VzdGFzIGFyY3UuIERvbmVjIHBlbGxlbnRlc3F1ZSBhdWd1ZSBzaXQgYW1ldCBlbGVtZW50dW0gZmFjaWxpc2lzLiBBZW5lYW4gc2VtcGVyIG1hbGVzdWFkYSBsaWd1bGEgZmF1Y2lidXMgc29sbGljaXR1ZGluLiBDdXJhYml0dXIgdXQgbG9yZW0gYWMgZXJhdCBwb3J0YSBsYWNpbmlhIHB1bHZpbmFyIGV0IHJpc3VzLjwvcD5cbiAgICAgICAgICAgICAgICAgICAgIDxwPlNlZCBhdCBudWxsYSBkb2xvci4gVXQgcXVpcyBxdWFtIGZpbmlidXMsIGVmZmljaXR1ciBtaSBzZWQsIHNvbGxpY2l0dWRpbiB1cm5hLiBOdW5jIHZlbCB0b3J0b3IgY29tbW9kbywgbW9sbGlzIGVzdCBldSwgYmxhbmRpdCBtYXNzYS4gVml2YW11cyBzZWQgbWkgdml0YWUgc2VtIGNvbW1vZG8gY29uc2VjdGV0dXIgZXUgaW4gc2VtLiBEb25lYyB1dCBmYWNpbGlzaXMgb2Rpby4gTnVsbGFtIGlkIGVsZW1lbnR1bSBlcm9zLCBub24gdGVtcHVzIHRvcnRvci4gTnVsbGFtIGluIG1hdHRpcyBmZWxpcy4gUHJhZXNlbnQgYmliZW5kdW0gYmxhbmRpdCBhbnRlLCBldCBlbGVtZW50dW0gbWV0dXMgY29uc2VjdGV0dXIgdml0YWUuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjbG9zZS1tb2RhbC1pY29uXCIgb25DbGljaz17dGhpcy5jbG9zZU1vZGFsfT48aSBjbGFzc05hbWU9XCJmYSBmYS10aW1lc1wiIC8+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk9PntcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goY2FydEFjdGlvbnMuc3RhcnRBZGRvclVwZGF0ZUNhcnRJdGVtKGFjdGl2ZVByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LCAxKSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnV0dG9uIGxhcmdlIGFkZC10by1jYXJ0XCI+QWRkIFRvIENhcnQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9pbWFnZXMvY3JlZGl0LWNhcmRzLnBuZ1wiIGFsdD1cIkFjY2VwdGVkIGNyZWRpdCBjYXJkc1wiIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH1lbHNle1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPExvYWRlciAvPlxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlUHJvZHVjdDogc3RhdGUucHJvZHVjdHMuYWN0aXZlXG4gICAgfVxuICB9XG4pKFByb2R1Y3QpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbnRhaW5lcnMvUHJvZHVjdC5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuXG5jbGFzcyBQcm9kdWN0SXRlbSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHJlbmRlcigpIHtcbiAgICBsZXQge3RpdGxlLCBpZCwgaW1hZ2V9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3QtaXRlbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3QtaXRlbS1pbm5lclwiPlxuICAgICAgICAgIDxMaW5rIHRvPXtgL3Byb2R1Y3QvJHtpZH1gfT48ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3QtaXRlbS1pbWFnZVwiIHN0eWxlPXt7YmFja2dyb3VuZEltYWdlOiAndXJsKCcgKyBpbWFnZSArICcpJ319PjwvZGl2PjwvTGluaz5cbiAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICA8aDYgY2xhc3NOYW1lPVwicHJvZHVjdC1pdGVtLXRpdGxlXCI+PExpbmsgdG89e2AvcHJvZHVjdC8ke2lkfWB9Pnt0aXRsZX08L0xpbms+PC9oNj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF1dGhvclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdXRob3JfX3Bob3RvXCIgc3R5bGU9e3tiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoJyArIGltYWdlICsgJyknfX0+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF1dGhvcl9faW5mb1wiPlxuICAgICAgICAgICAgICA8TGluayB0byA9e2AvYXV0aG9yL2B9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXV0aG9yX19uYW1lXCI+SmFtZXM4ODwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXV0aG9yX19sb2NhdGlvblwiPkNhbnRvbiBPaGlvPC9kaXY+XG4gICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMucHJvcHMuYWRkVG9DYXJ0fSBjbGFzc05hbWU9XCJidG5cIj5BZGQgVG8gQ2FydDwvYnV0dG9uPiAqL31cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9kdWN0SXRlbTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL1Byb2R1Y3RJdGVtLmpzeCIsInZhciBjYW1lbDJoeXBoZW4gPSByZXF1aXJlKCdzdHJpbmctY29udmVydC9jYW1lbDJoeXBoZW4nKTtcblxudmFyIGlzRGltZW5zaW9uID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIHJlID0gL1toZWlnaHR8d2lkdGhdJC87XG4gIHJldHVybiByZS50ZXN0KGZlYXR1cmUpO1xufTtcblxudmFyIG9iajJtcSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIG1xID0gJyc7XG4gIHZhciBmZWF0dXJlcyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIGZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUsIGluZGV4KSB7XG4gICAgdmFyIHZhbHVlID0gb2JqW2ZlYXR1cmVdO1xuICAgIGZlYXR1cmUgPSBjYW1lbDJoeXBoZW4oZmVhdHVyZSk7XG4gICAgLy8gQWRkIHB4IHRvIGRpbWVuc2lvbiBmZWF0dXJlc1xuICAgIGlmIChpc0RpbWVuc2lvbihmZWF0dXJlKSAmJiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlICsgJ3B4JztcbiAgICB9XG4gICAgaWYgKHZhbHVlID09PSB0cnVlKSB7XG4gICAgICBtcSArPSBmZWF0dXJlO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICBtcSArPSAnbm90ICcgKyBmZWF0dXJlO1xuICAgIH0gZWxzZSB7XG4gICAgICBtcSArPSAnKCcgKyBmZWF0dXJlICsgJzogJyArIHZhbHVlICsgJyknO1xuICAgIH1cbiAgICBpZiAoaW5kZXggPCBmZWF0dXJlcy5sZW5ndGgtMSkge1xuICAgICAgbXEgKz0gJyBhbmQgJ1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBtcTtcbn07XG5cbnZhciBqc29uMm1xID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gIHZhciBtcSA9ICcnO1xuICBpZiAodHlwZW9mIHF1ZXJ5ID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuICAvLyBIYW5kbGluZyBhcnJheSBvZiBtZWRpYSBxdWVyaWVzXG4gIGlmIChxdWVyeSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgcXVlcnkuZm9yRWFjaChmdW5jdGlvbiAocSwgaW5kZXgpIHtcbiAgICAgIG1xICs9IG9iajJtcShxKTtcbiAgICAgIGlmIChpbmRleCA8IHF1ZXJ5Lmxlbmd0aC0xKSB7XG4gICAgICAgIG1xICs9ICcsICdcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbXE7XG4gIH1cbiAgLy8gSGFuZGxpbmcgc2luZ2xlIG1lZGlhIHF1ZXJ5XG4gIHJldHVybiBvYmoybXEocXVlcnkpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBqc29uMm1xO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9qc29uMm1xL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA5M1xuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqXG4gKiBBIGZhc3RlciBhbHRlcm5hdGl2ZSB0byBgRnVuY3Rpb24jYXBwbHlgLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgYGZ1bmNgXG4gKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBhcmd1bWVudHMgb2YgYGFyZ3NgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBmdW5jYC5cbiAqL1xuZnVuY3Rpb24gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncykge1xuICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdKTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICB9XG4gIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB1bmFyeSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KSxcbiAgICBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqIERldGVjdCBpZiBwcm9wZXJ0aWVzIHNoYWRvd2luZyB0aG9zZSBvbiBgT2JqZWN0LnByb3RvdHlwZWAgYXJlIG5vbi1lbnVtZXJhYmxlLiAqL1xudmFyIG5vbkVudW1TaGFkb3dzID0gIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoeyAndmFsdWVPZic6IDEgfSwgJ3ZhbHVlT2YnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIHRoZSBhcnJheS1saWtlIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtib29sZWFufSBpbmhlcml0ZWQgU3BlY2lmeSByZXR1cm5pbmcgaW5oZXJpdGVkIHByb3BlcnR5IG5hbWVzLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYXJyYXlMaWtlS2V5cyh2YWx1ZSwgaW5oZXJpdGVkKSB7XG4gIC8vIFNhZmFyaSA4LjEgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG4gIC8vIFNhZmFyaSA5IG1ha2VzIGBhcmd1bWVudHMubGVuZ3RoYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICB2YXIgcmVzdWx0ID0gKGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSlcbiAgICA/IGJhc2VUaW1lcyh2YWx1ZS5sZW5ndGgsIFN0cmluZylcbiAgICA6IFtdO1xuXG4gIHZhciBsZW5ndGggPSByZXN1bHQubGVuZ3RoLFxuICAgICAgc2tpcEluZGV4ZXMgPSAhIWxlbmd0aDtcblxuICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICBpZiAoKGluaGVyaXRlZCB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrZXkpKSAmJlxuICAgICAgICAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gJ2xlbmd0aCcgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBBc3NpZ25zIGB2YWx1ZWAgdG8gYGtleWAgb2YgYG9iamVjdGAgaWYgdGhlIGV4aXN0aW5nIHZhbHVlIGlzIG5vdCBlcXVpdmFsZW50XG4gKiB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhc3NpZ24uXG4gKi9cbmZ1bmN0aW9uIGFzc2lnblZhbHVlKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgaWYgKCEoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYgZXEob2JqVmFsdWUsIHZhbHVlKSkgfHxcbiAgICAgICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpKSB7XG4gICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3QgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYmFzZUtleXMob2JqZWN0KSB7XG4gIGlmICghaXNQcm90b3R5cGUob2JqZWN0KSkge1xuICAgIHJldHVybiBuYXRpdmVLZXlzKG9iamVjdCk7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYga2V5ICE9ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmVzdGAgd2hpY2ggZG9lc24ndCB2YWxpZGF0ZSBvciBjb2VyY2UgYXJndW1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VSZXN0KGZ1bmMsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQgPyAoZnVuYy5sZW5ndGggLSAxKSA6IHN0YXJ0LCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgIGFycmF5ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBhcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuICAgIH1cbiAgICBpbmRleCA9IC0xO1xuICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICB9XG4gICAgb3RoZXJBcmdzW3N0YXJ0XSA9IGFycmF5O1xuICAgIHJldHVybiBhcHBseShmdW5jLCB0aGlzLCBvdGhlckFyZ3MpO1xuICB9O1xufVxuXG4vKipcbiAqIENvcGllcyBwcm9wZXJ0aWVzIG9mIGBzb3VyY2VgIHRvIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20uXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgaWRlbnRpZmllcnMgdG8gY29weS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0by5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvcGllZCB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBjb3B5T2JqZWN0KHNvdXJjZSwgcHJvcHMsIG9iamVjdCwgY3VzdG9taXplcikge1xuICBvYmplY3QgfHwgKG9iamVjdCA9IHt9KTtcblxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG5cbiAgICB2YXIgbmV3VmFsdWUgPSBjdXN0b21pemVyXG4gICAgICA/IGN1c3RvbWl6ZXIob2JqZWN0W2tleV0sIHNvdXJjZVtrZXldLCBrZXksIG9iamVjdCwgc291cmNlKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBhc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgbmV3VmFsdWUgPT09IHVuZGVmaW5lZCA/IHNvdXJjZVtrZXldIDogbmV3VmFsdWUpO1xuICB9XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGxpa2UgYF8uYXNzaWduYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gYXNzaWduZXIgVGhlIGZ1bmN0aW9uIHRvIGFzc2lnbiB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhc3NpZ25lciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQXNzaWduZXIoYXNzaWduZXIpIHtcbiAgcmV0dXJuIGJhc2VSZXN0KGZ1bmN0aW9uKG9iamVjdCwgc291cmNlcykge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBzb3VyY2VzLmxlbmd0aCxcbiAgICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA+IDEgPyBzb3VyY2VzW2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkLFxuICAgICAgICBndWFyZCA9IGxlbmd0aCA+IDIgPyBzb3VyY2VzWzJdIDogdW5kZWZpbmVkO1xuXG4gICAgY3VzdG9taXplciA9IChhc3NpZ25lci5sZW5ndGggPiAzICYmIHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicpXG4gICAgICA/IChsZW5ndGgtLSwgY3VzdG9taXplcilcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHNvdXJjZXNbMF0sIHNvdXJjZXNbMV0sIGd1YXJkKSkge1xuICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiBjdXN0b21pemVyO1xuICAgICAgbGVuZ3RoID0gMTtcbiAgICB9XG4gICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgYXNzaWduZXIob2JqZWN0LCBzb3VyY2UsIGluZGV4LCBjdXN0b21pemVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG4gIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcbiAgcmV0dXJuICEhbGVuZ3RoICYmXG4gICAgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgJiZcbiAgICAodmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIHZhbHVlIGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfSBpbmRleCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIGluZGV4IG9yIGtleSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgb2JqZWN0IGFyZ3VtZW50LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDtcbiAgaWYgKHR5cGUgPT0gJ251bWJlcidcbiAgICAgICAgPyAoaXNBcnJheUxpa2Uob2JqZWN0KSAmJiBpc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSlcbiAgICAgICAgOiAodHlwZSA9PSAnc3RyaW5nJyAmJiBpbmRleCBpbiBvYmplY3QpXG4gICAgICApIHtcbiAgICByZXR1cm4gZXEob2JqZWN0W2luZGV4XSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG4gIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblxuICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xufVxuXG4vKipcbiAqIFBlcmZvcm1zIGFcbiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07XG4gKlxuICogXy5lcShvYmplY3QsIG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcShvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcSgnYScsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcShOYU4sIE5hTik7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcbiAgLy8gU2FmYXJpIDguMSBtYWtlcyBgYXJndW1lbnRzLmNhbGxlZWAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cbiAgcmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiZcbiAgICAoIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKSB8fCBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvclxuICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgIWlzRnVuY3Rpb24odmFsdWUpO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uaXNBcnJheUxpa2VgIGV4Y2VwdCB0aGF0IGl0IGFsc28gY2hlY2tzIGlmIGB2YWx1ZWBcbiAqIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS1saWtlIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBTYWZhcmkgOC05IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGFuZCBvdGhlciBjb25zdHJ1Y3RvcnMuXG4gIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNMZW5ndGgoMyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aChJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcbiAgICB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3RzIHRvIHRoZVxuICogZGVzdGluYXRpb24gb2JqZWN0LiBTb3VyY2Ugb2JqZWN0cyBhcmUgYXBwbGllZCBmcm9tIGxlZnQgdG8gcmlnaHQuXG4gKiBTdWJzZXF1ZW50IHNvdXJjZXMgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAgYW5kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgT2JqZWN0LmFzc2lnbmBdKGh0dHBzOi8vbWRuLmlvL09iamVjdC9hc3NpZ24pLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xMC4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKiBAc2VlIF8uYXNzaWduSW5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogfVxuICpcbiAqIGZ1bmN0aW9uIEJhcigpIHtcbiAqICAgdGhpcy5jID0gMztcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmIgPSAyO1xuICogQmFyLnByb3RvdHlwZS5kID0gNDtcbiAqXG4gKiBfLmFzc2lnbih7ICdhJzogMCB9LCBuZXcgRm9vLCBuZXcgQmFyKTtcbiAqIC8vID0+IHsgJ2EnOiAxLCAnYyc6IDMgfVxuICovXG52YXIgYXNzaWduID0gY3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UpIHtcbiAgaWYgKG5vbkVudW1TaGFkb3dzIHx8IGlzUHJvdG90eXBlKHNvdXJjZSkgfHwgaXNBcnJheUxpa2Uoc291cmNlKSkge1xuICAgIGNvcHlPYmplY3Qoc291cmNlLCBrZXlzKHNvdXJjZSksIG9iamVjdCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgIGFzc2lnblZhbHVlKG9iamVjdCwga2V5LCBzb3VyY2Vba2V5XSk7XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5rZXlzKVxuICogZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXMobmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogXy5rZXlzKCdoaScpO1xuICogLy8gPT4gWycwJywgJzEnXVxuICovXG5mdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuICByZXR1cm4gaXNBcnJheUxpa2Uob2JqZWN0KSA/IGFycmF5TGlrZUtleXMob2JqZWN0KSA6IGJhc2VLZXlzKG9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXNzaWduO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2xvZGFzaC5hc3NpZ24vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDk1XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsImZ1bmN0aW9uIHdhcm4ocykge1xuICBjb25zb2xlLndhcm4oJ1tyZWFjdC1nYV0nLCBzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3YXJuO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWdhL3NyYy91dGlscy9jb25zb2xlL3dhcm4uanNcbi8vIG1vZHVsZSBpZCA9IDEyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIvLyBHQSBzdHJpbmdzIG5lZWQgdG8gaGF2ZSBsZWFkaW5nL3RyYWlsaW5nIHdoaXRlc3BhY2UgdHJpbW1lZCwgYW5kIG5vdCBhbGxcbi8vIGJyb3dzZXJzIGhhdmUgU3RyaW5nLnByb3RvdG95cGUudHJpbSgpLlxuXG5mdW5jdGlvbiB0cmltKHMpIHtcbiAgcmV0dXJuIHMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyaW07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtZ2Evc3JjL3V0aWxzL3RyaW0uanNcbi8vIG1vZHVsZSBpZCA9IDEyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIvKiFcbiAqIEFkYXB0ZWQgZnJvbSBqUXVlcnkgVUkgY29yZVxuICpcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS9cbiAqL1xuXG5mdW5jdGlvbiBmb2N1c2FibGUoZWxlbWVudCwgaXNUYWJJbmRleE5vdE5hTikge1xuICB2YXIgbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAoL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KG5vZGVOYW1lKSA/XG4gICAgIWVsZW1lbnQuZGlzYWJsZWQgOlxuICAgIFwiYVwiID09PSBub2RlTmFtZSA/XG4gICAgICBlbGVtZW50LmhyZWYgfHwgaXNUYWJJbmRleE5vdE5hTiA6XG4gICAgICBpc1RhYkluZGV4Tm90TmFOKSAmJiB2aXNpYmxlKGVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBoaWRkZW4oZWwpIHtcbiAgcmV0dXJuIChlbC5vZmZzZXRXaWR0aCA8PSAwICYmIGVsLm9mZnNldEhlaWdodCA8PSAwKSB8fFxuICAgIGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJztcbn1cblxuZnVuY3Rpb24gdmlzaWJsZShlbGVtZW50KSB7XG4gIHdoaWxlIChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkpIGJyZWFrO1xuICAgIGlmIChoaWRkZW4oZWxlbWVudCkpIHJldHVybiBmYWxzZTtcbiAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiB0YWJiYWJsZShlbGVtZW50KSB7XG4gIHZhciB0YWJJbmRleCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICBpZiAodGFiSW5kZXggPT09IG51bGwpIHRhYkluZGV4ID0gdW5kZWZpbmVkO1xuICB2YXIgaXNUYWJJbmRleE5hTiA9IGlzTmFOKHRhYkluZGV4KTtcbiAgcmV0dXJuIChpc1RhYkluZGV4TmFOIHx8IHRhYkluZGV4ID49IDApICYmIGZvY3VzYWJsZShlbGVtZW50LCAhaXNUYWJJbmRleE5hTik7XG59XG5cbmZ1bmN0aW9uIGZpbmRUYWJiYWJsZURlc2NlbmRhbnRzKGVsZW1lbnQpIHtcbiAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJyksIDApLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgIHJldHVybiB0YWJiYWJsZShlbCk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZpbmRUYWJiYWJsZURlc2NlbmRhbnRzO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvdGFiYmFibGUuanNcbi8vIG1vZHVsZSBpZCA9IDEyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBjbGFzc05hbWU6ICcnLFxuICAgIGFjY2Vzc2liaWxpdHk6IHRydWUsXG4gICAgYWRhcHRpdmVIZWlnaHQ6IGZhbHNlLFxuICAgIGFycm93czogdHJ1ZSxcbiAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgYXV0b3BsYXlTcGVlZDogMzAwMCxcbiAgICBjZW50ZXJNb2RlOiBmYWxzZSxcbiAgICBjZW50ZXJQYWRkaW5nOiAnNTBweCcsXG4gICAgY3NzRWFzZTogJ2Vhc2UnLFxuICAgIGN1c3RvbVBhZ2luZzogZnVuY3Rpb24gY3VzdG9tUGFnaW5nKGkpIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgaSArIDFcbiAgICAgICAgKTtcbiAgICB9LFxuICAgIGRvdHM6IGZhbHNlLFxuICAgIGRvdHNDbGFzczogJ3NsaWNrLWRvdHMnLFxuICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICBlYXNpbmc6ICdsaW5lYXInLFxuICAgIGVkZ2VGcmljdGlvbjogMC4zNSxcbiAgICBmYWRlOiBmYWxzZSxcbiAgICBmb2N1c09uU2VsZWN0OiBmYWxzZSxcbiAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICBpbml0aWFsU2xpZGU6IDAsXG4gICAgbGF6eUxvYWQ6IGZhbHNlLFxuICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICByZXNwb25zaXZlOiBudWxsLFxuICAgIHJ0bDogZmFsc2UsXG4gICAgc2xpZGU6ICdkaXYnLFxuICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICBzcGVlZDogNTAwLFxuICAgIHN3aXBlOiB0cnVlLFxuICAgIHN3aXBlVG9TbGlkZTogZmFsc2UsXG4gICAgdG91Y2hNb3ZlOiB0cnVlLFxuICAgIHRvdWNoVGhyZXNob2xkOiA1LFxuICAgIHVzZUNTUzogdHJ1ZSxcbiAgICB2YXJpYWJsZVdpZHRoOiBmYWxzZSxcbiAgICB2ZXJ0aWNhbDogZmFsc2UsXG4gICAgd2FpdEZvckFuaW1hdGU6IHRydWUsXG4gICAgYWZ0ZXJDaGFuZ2U6IG51bGwsXG4gICAgYmVmb3JlQ2hhbmdlOiBudWxsLFxuICAgIGVkZ2VFdmVudDogbnVsbCxcbiAgICBpbml0OiBudWxsLFxuICAgIHN3aXBlRXZlbnQ6IG51bGwsXG4gICAgLy8gbmV4dEFycm93LCBwcmV2QXJyb3cgYXJlIHJlYWN0IGNvbXBvbmV0c1xuICAgIG5leHRBcnJvdzogbnVsbCxcbiAgICBwcmV2QXJyb3c6IG51bGxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdFByb3BzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1zbGljay9saWIvZGVmYXVsdC1wcm9wcy5qc1xuLy8gbW9kdWxlIGlkID0gMTM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZ2V0VHJhY2tMZWZ0ID0gZXhwb3J0cy5nZXRUcmFja0FuaW1hdGVDU1MgPSBleHBvcnRzLmdldFRyYWNrQ1NTID0gdW5kZWZpbmVkO1xuXG52YXIgX3JlYWN0RG9tID0gcmVxdWlyZSgncmVhY3QtZG9tJyk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNoZWNrU3BlY0tleXMgPSBmdW5jdGlvbiBjaGVja1NwZWNLZXlzKHNwZWMsIGtleXNBcnJheSkge1xuICByZXR1cm4ga2V5c0FycmF5LnJlZHVjZShmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiBzcGVjLmhhc093blByb3BlcnR5KGtleSk7XG4gIH0sIHRydWUpID8gbnVsbCA6IGNvbnNvbGUuZXJyb3IoJ0tleXMgTWlzc2luZycsIHNwZWMpO1xufTtcblxudmFyIGdldFRyYWNrQ1NTID0gZXhwb3J0cy5nZXRUcmFja0NTUyA9IGZ1bmN0aW9uIGdldFRyYWNrQ1NTKHNwZWMpIHtcbiAgY2hlY2tTcGVjS2V5cyhzcGVjLCBbJ2xlZnQnLCAndmFyaWFibGVXaWR0aCcsICdzbGlkZUNvdW50JywgJ3NsaWRlc1RvU2hvdycsICdzbGlkZVdpZHRoJ10pO1xuXG4gIHZhciB0cmFja1dpZHRoLCB0cmFja0hlaWdodDtcblxuICB2YXIgdHJhY2tDaGlsZHJlbiA9IHNwZWMuc2xpZGVDb3VudCArIDIgKiBzcGVjLnNsaWRlc1RvU2hvdztcblxuICBpZiAoIXNwZWMudmVydGljYWwpIHtcbiAgICBpZiAoc3BlYy52YXJpYWJsZVdpZHRoKSB7XG4gICAgICB0cmFja1dpZHRoID0gKHNwZWMuc2xpZGVDb3VudCArIDIgKiBzcGVjLnNsaWRlc1RvU2hvdykgKiBzcGVjLnNsaWRlV2lkdGg7XG4gICAgfSBlbHNlIGlmIChzcGVjLmNlbnRlck1vZGUpIHtcbiAgICAgIHRyYWNrV2lkdGggPSAoc3BlYy5zbGlkZUNvdW50ICsgMiAqIChzcGVjLnNsaWRlc1RvU2hvdyArIDEpKSAqIHNwZWMuc2xpZGVXaWR0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhY2tXaWR0aCA9IChzcGVjLnNsaWRlQ291bnQgKyAyICogc3BlYy5zbGlkZXNUb1Nob3cpICogc3BlYy5zbGlkZVdpZHRoO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0cmFja0hlaWdodCA9IHRyYWNrQ2hpbGRyZW4gKiBzcGVjLnNsaWRlSGVpZ2h0O1xuICB9XG5cbiAgdmFyIHN0eWxlID0ge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgV2Via2l0VHJhbnNmb3JtOiAhc3BlYy52ZXJ0aWNhbCA/ICd0cmFuc2xhdGUzZCgnICsgc3BlYy5sZWZ0ICsgJ3B4LCAwcHgsIDBweCknIDogJ3RyYW5zbGF0ZTNkKDBweCwgJyArIHNwZWMubGVmdCArICdweCwgMHB4KScsXG4gICAgdHJhbnNmb3JtOiAhc3BlYy52ZXJ0aWNhbCA/ICd0cmFuc2xhdGUzZCgnICsgc3BlYy5sZWZ0ICsgJ3B4LCAwcHgsIDBweCknIDogJ3RyYW5zbGF0ZTNkKDBweCwgJyArIHNwZWMubGVmdCArICdweCwgMHB4KScsXG4gICAgdHJhbnNpdGlvbjogJycsXG4gICAgV2Via2l0VHJhbnNpdGlvbjogJycsXG4gICAgbXNUcmFuc2Zvcm06ICFzcGVjLnZlcnRpY2FsID8gJ3RyYW5zbGF0ZVgoJyArIHNwZWMubGVmdCArICdweCknIDogJ3RyYW5zbGF0ZVkoJyArIHNwZWMubGVmdCArICdweCknXG4gIH07XG5cbiAgaWYgKHRyYWNrV2lkdGgpIHtcbiAgICAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoc3R5bGUsIHsgd2lkdGg6IHRyYWNrV2lkdGggfSk7XG4gIH1cblxuICBpZiAodHJhY2tIZWlnaHQpIHtcbiAgICAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoc3R5bGUsIHsgaGVpZ2h0OiB0cmFja0hlaWdodCB9KTtcbiAgfVxuXG4gIC8vIEZhbGxiYWNrIGZvciBJRThcbiAgaWYgKHdpbmRvdyAmJiAhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgd2luZG93LmF0dGFjaEV2ZW50KSB7XG4gICAgaWYgKCFzcGVjLnZlcnRpY2FsKSB7XG4gICAgICBzdHlsZS5tYXJnaW5MZWZ0ID0gc3BlYy5sZWZ0ICsgJ3B4JztcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUubWFyZ2luVG9wID0gc3BlYy5sZWZ0ICsgJ3B4JztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59O1xuXG52YXIgZ2V0VHJhY2tBbmltYXRlQ1NTID0gZXhwb3J0cy5nZXRUcmFja0FuaW1hdGVDU1MgPSBmdW5jdGlvbiBnZXRUcmFja0FuaW1hdGVDU1Moc3BlYykge1xuICBjaGVja1NwZWNLZXlzKHNwZWMsIFsnbGVmdCcsICd2YXJpYWJsZVdpZHRoJywgJ3NsaWRlQ291bnQnLCAnc2xpZGVzVG9TaG93JywgJ3NsaWRlV2lkdGgnLCAnc3BlZWQnLCAnY3NzRWFzZSddKTtcblxuICB2YXIgc3R5bGUgPSBnZXRUcmFja0NTUyhzcGVjKTtcbiAgLy8gdXNlQ1NTIGlzIHRydWUgYnkgZGVmYXVsdCBzbyBpdCBjYW4gYmUgdW5kZWZpbmVkXG4gIHN0eWxlLldlYmtpdFRyYW5zaXRpb24gPSAnLXdlYmtpdC10cmFuc2Zvcm0gJyArIHNwZWMuc3BlZWQgKyAnbXMgJyArIHNwZWMuY3NzRWFzZTtcbiAgc3R5bGUudHJhbnNpdGlvbiA9ICd0cmFuc2Zvcm0gJyArIHNwZWMuc3BlZWQgKyAnbXMgJyArIHNwZWMuY3NzRWFzZTtcbiAgcmV0dXJuIHN0eWxlO1xufTtcblxudmFyIGdldFRyYWNrTGVmdCA9IGV4cG9ydHMuZ2V0VHJhY2tMZWZ0ID0gZnVuY3Rpb24gZ2V0VHJhY2tMZWZ0KHNwZWMpIHtcblxuICBjaGVja1NwZWNLZXlzKHNwZWMsIFsnc2xpZGVJbmRleCcsICd0cmFja1JlZicsICdpbmZpbml0ZScsICdjZW50ZXJNb2RlJywgJ3NsaWRlQ291bnQnLCAnc2xpZGVzVG9TaG93JywgJ3NsaWRlc1RvU2Nyb2xsJywgJ3NsaWRlV2lkdGgnLCAnbGlzdFdpZHRoJywgJ3ZhcmlhYmxlV2lkdGgnLCAnc2xpZGVIZWlnaHQnXSk7XG5cbiAgdmFyIHNsaWRlT2Zmc2V0ID0gMDtcbiAgdmFyIHRhcmdldExlZnQ7XG4gIHZhciB0YXJnZXRTbGlkZTtcbiAgdmFyIHZlcnRpY2FsT2Zmc2V0ID0gMDtcblxuICBpZiAoc3BlYy5mYWRlKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBpZiAoc3BlYy5pbmZpbml0ZSkge1xuICAgIGlmIChzcGVjLnNsaWRlQ291bnQgPj0gc3BlYy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgIHNsaWRlT2Zmc2V0ID0gc3BlYy5zbGlkZVdpZHRoICogc3BlYy5zbGlkZXNUb1Nob3cgKiAtMTtcbiAgICAgIHZlcnRpY2FsT2Zmc2V0ID0gc3BlYy5zbGlkZUhlaWdodCAqIHNwZWMuc2xpZGVzVG9TaG93ICogLTE7XG4gICAgfVxuICAgIGlmIChzcGVjLnNsaWRlQ291bnQgJSBzcGVjLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XG4gICAgICBpZiAoc3BlYy5zbGlkZUluZGV4ICsgc3BlYy5zbGlkZXNUb1Njcm9sbCA+IHNwZWMuc2xpZGVDb3VudCAmJiBzcGVjLnNsaWRlQ291bnQgPiBzcGVjLnNsaWRlc1RvU2hvdykge1xuICAgICAgICBpZiAoc3BlYy5zbGlkZUluZGV4ID4gc3BlYy5zbGlkZUNvdW50KSB7XG4gICAgICAgICAgc2xpZGVPZmZzZXQgPSAoc3BlYy5zbGlkZXNUb1Nob3cgLSAoc3BlYy5zbGlkZUluZGV4IC0gc3BlYy5zbGlkZUNvdW50KSkgKiBzcGVjLnNsaWRlV2lkdGggKiAtMTtcbiAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9IChzcGVjLnNsaWRlc1RvU2hvdyAtIChzcGVjLnNsaWRlSW5kZXggLSBzcGVjLnNsaWRlQ291bnQpKSAqIHNwZWMuc2xpZGVIZWlnaHQgKiAtMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbGlkZU9mZnNldCA9IHNwZWMuc2xpZGVDb3VudCAlIHNwZWMuc2xpZGVzVG9TY3JvbGwgKiBzcGVjLnNsaWRlV2lkdGggKiAtMTtcbiAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9IHNwZWMuc2xpZGVDb3VudCAlIHNwZWMuc2xpZGVzVG9TY3JvbGwgKiBzcGVjLnNsaWRlSGVpZ2h0ICogLTE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG5cbiAgICBpZiAoc3BlYy5zbGlkZUNvdW50ICUgc3BlYy5zbGlkZXNUb1Njcm9sbCAhPT0gMCkge1xuICAgICAgaWYgKHNwZWMuc2xpZGVJbmRleCArIHNwZWMuc2xpZGVzVG9TY3JvbGwgPiBzcGVjLnNsaWRlQ291bnQgJiYgc3BlYy5zbGlkZUNvdW50ID4gc3BlYy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgdmFyIHNsaWRlc1RvT2Zmc2V0ID0gc3BlYy5zbGlkZXNUb1Nob3cgLSBzcGVjLnNsaWRlQ291bnQgJSBzcGVjLnNsaWRlc1RvU2Nyb2xsO1xuICAgICAgICBzbGlkZU9mZnNldCA9IHNsaWRlc1RvT2Zmc2V0ICogc3BlYy5zbGlkZVdpZHRoO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzcGVjLmNlbnRlck1vZGUpIHtcbiAgICBpZiAoc3BlYy5pbmZpbml0ZSkge1xuICAgICAgc2xpZGVPZmZzZXQgKz0gc3BlYy5zbGlkZVdpZHRoICogTWF0aC5mbG9vcihzcGVjLnNsaWRlc1RvU2hvdyAvIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzbGlkZU9mZnNldCA9IHNwZWMuc2xpZGVXaWR0aCAqIE1hdGguZmxvb3Ioc3BlYy5zbGlkZXNUb1Nob3cgLyAyKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIXNwZWMudmVydGljYWwpIHtcbiAgICB0YXJnZXRMZWZ0ID0gc3BlYy5zbGlkZUluZGV4ICogc3BlYy5zbGlkZVdpZHRoICogLTEgKyBzbGlkZU9mZnNldDtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXRMZWZ0ID0gc3BlYy5zbGlkZUluZGV4ICogc3BlYy5zbGlkZUhlaWdodCAqIC0xICsgdmVydGljYWxPZmZzZXQ7XG4gIH1cblxuICBpZiAoc3BlYy52YXJpYWJsZVdpZHRoID09PSB0cnVlKSB7XG4gICAgdmFyIHRhcmdldFNsaWRlSW5kZXg7XG4gICAgaWYgKHNwZWMuc2xpZGVDb3VudCA8PSBzcGVjLnNsaWRlc1RvU2hvdyB8fCBzcGVjLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgdGFyZ2V0U2xpZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoc3BlYy50cmFja1JlZikuY2hpbGROb2Rlc1tzcGVjLnNsaWRlSW5kZXhdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRTbGlkZUluZGV4ID0gc3BlYy5zbGlkZUluZGV4ICsgc3BlYy5zbGlkZXNUb1Nob3c7XG4gICAgICB0YXJnZXRTbGlkZSA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShzcGVjLnRyYWNrUmVmKS5jaGlsZE5vZGVzW3RhcmdldFNsaWRlSW5kZXhdO1xuICAgIH1cbiAgICB0YXJnZXRMZWZ0ID0gdGFyZ2V0U2xpZGUgPyB0YXJnZXRTbGlkZS5vZmZzZXRMZWZ0ICogLTEgOiAwO1xuICAgIGlmIChzcGVjLmNlbnRlck1vZGUgPT09IHRydWUpIHtcbiAgICAgIGlmIChzcGVjLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgICB0YXJnZXRTbGlkZSA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShzcGVjLnRyYWNrUmVmKS5jaGlsZHJlbltzcGVjLnNsaWRlSW5kZXhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoc3BlYy50cmFja1JlZikuY2hpbGRyZW5bc3BlYy5zbGlkZUluZGV4ICsgc3BlYy5zbGlkZXNUb1Nob3cgKyAxXTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldFNsaWRlKSB7XG4gICAgICAgIHRhcmdldExlZnQgPSB0YXJnZXRTbGlkZS5vZmZzZXRMZWZ0ICogLTEgKyAoc3BlYy5saXN0V2lkdGggLSB0YXJnZXRTbGlkZS5vZmZzZXRXaWR0aCkgLyAyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXRMZWZ0O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL21peGlucy90cmFja0hlbHBlci5qc1xuLy8gbW9kdWxlIGlkID0gMTQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1JvdXRlLCBSb3V0ZXIsIEluZGV4Um91dGUsIGJyb3dzZXJIaXN0b3J5fSBmcm9tICdyZWFjdC1yb3V0ZXInO1xubGV0IHtjb25uZWN0fSA9IHJlcXVpcmUoJ3JlYWN0LXJlZHV4Jyk7XG5sZXQgc3RvcmUgPSByZXF1aXJlKCdjb25maWd1cmVTdG9yZScpLmNvbmZpZ3VyZSgpO1xuXG5pbXBvcnQgRG9jdW1lbnRNZXRhIGZyb20gJ3JlYWN0LWRvY3VtZW50LW1ldGEnO1xuaW1wb3J0IE1haW4gZnJvbSAnTWFpbic7XG5pbXBvcnQgSW5kZXggZnJvbSAnSW5kZXgnO1xuaW1wb3J0IFByb2R1Y3RzIGZyb20gJ1Byb2R1Y3RzJztcbmltcG9ydCBQcm9kdWN0IGZyb20gJ1Byb2R1Y3QnO1xuaW1wb3J0IENvbGxlY3Rpb25zIGZyb20gJ0NvbGxlY3Rpb25zJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJ0NvbGxlY3Rpb24nO1xuaW1wb3J0IFVwbG9hZCBmcm9tICdVcGxvYWQnO1xuaW1wb3J0IE9yZGVyU3RhdHVzIGZyb20gJ09yZGVyU3RhdHVzJztcbmltcG9ydCBNYXAgZnJvbSAnTWFwJztcbmltcG9ydCBMb2dpbiBmcm9tICdMb2dpbic7XG5pbXBvcnQgQWJvdXQgZnJvbSAnQWJvdXQnO1xuaW1wb3J0IENvbnRhY3QgZnJvbSAnQ29udGFjdCc7XG5cbmltcG9ydCBSZWFjdEdBIGZyb20gJ3JlYWN0LWdhJztcbi8vIFJlYWN0R0EuaW5pdGlhbGl6ZSgnVUEtNjI0MTgyNS05Jyk7IC8vIGluaXRpYWxpemUgR29vZ2xlIEFuYWx5dGljc1xuXG5mdW5jdGlvbiBsb2dQYWdlVmlldyhsb2NhdGlvbikge1xuICBSZWFjdEdBLnNldCh7IHBhZ2U6IGxvY2F0aW9uLnBhdGhuYW1lIH0pO1xuICBSZWFjdEdBLnBhZ2V2aWV3KGxvY2F0aW9uLnBhdGhuYW1lKTtcbn1cblxuYnJvd3Nlckhpc3RvcnkubGlzdGVuKChsb2NhdGlvbikgPT4ge1xuICBsb2dQYWdlVmlldyhsb2NhdGlvbik7XG5cbiAgLy8gc2Nyb2xsIHRvIHRvcCB3aGVuIGNoYW5naW5nIHBhZ2VcbiAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IChcbiAgPFJvdXRlciBoaXN0b3J5PXticm93c2VySGlzdG9yeX0+XG4gICAgPFJvdXRlIHBhdGg9XCIvXCIgY29tcG9uZW50PXtNYWlufT5cbiAgICAgIDxJbmRleFJvdXRlIHBhdGg9XCIvXCIgY29tcG9uZW50PXtJbmRleH0gLz5cbiAgICAgIDxSb3V0ZSBwYXRoPVwicHJvZHVjdHNcIiBjb21wb25lbnQ9e1Byb2R1Y3RzfSAvPlxuICAgICAgPFJvdXRlIHBhdGg9XCJwcm9kdWN0Lzpwcm9kdWN0SWRcIiBjb21wb25lbnQ9e1Byb2R1Y3R9IC8+XG4gICAgICA8Um91dGUgcGF0aD0nY29sbGVjdGlvbnMnIGNvbXBvbmVudD17Q29sbGVjdGlvbnN9IC8+XG4gICAgICA8Um91dGUgcGF0aD0nY29sbGVjdGlvbi86Y29sbGVjdGlvbklkJyBjb21wb25lbnQ9e0NvbGxlY3Rpb259IC8+XG4gICAgICA8Um91dGUgcGF0aD1cIm15LWNpdHlcIiBjb21wb25lbnQ9e1Byb2R1Y3RzfSAvPlxuICAgICAgPFJvdXRlIHBhdGg9XCJ1cGxvYWRcIiBjb21wb25lbnQ9e1VwbG9hZH0gLz5cbiAgICAgIDxSb3V0ZSBwYXRoPVwib3JkZXItc3RhdHVzXCIgY29tcG9uZW50PXtPcmRlclN0YXR1c30gLz5cbiAgICAgIDxSb3V0ZSBwYXRoPVwibWFwXCIgY29tcG9uZW50PXtNYXB9IC8+XG4gICAgICA8Um91dGUgcGF0aD1cImxvZ2luXCIgY29tcG9uZW50PXtMb2dpbn0gLz5cbiAgICAgIDxSb3V0ZSBwYXRoPVwiYWJvdXRcIiBjb21wb25lbnQ9e0Fib3V0fSAvPlxuICAgICAgPFJvdXRlIHBhdGg9XCJjb250YWN0XCIgY29tcG9uZW50PXtDb250YWN0fSAvPlxuICAgIDwvUm91dGU+XG4gIDwvUm91dGVyPlxuKTtcblxuXG4vLyBjb25zdCBjb21wb25lbnRSb3V0ZXMgPSB7XG4vLyAgIGNvbXBvbmVudDogJ01haW4nLFxuLy8gICBwYXRoOiAnLycsXG4vLyAgIGluZGV4Um91dGU6IHsgY29tcG9uZW50OiAnSW5kZXgnIH0sXG4vLyAgIGNoaWxkUm91dGVzOiBbXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ2NvbGxlY3Rpb25zJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnQ29sbGVjdGlvbnMnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ2NvbGxlY3Rpb24vOmNvbGxlY3Rpb25JZCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0NvbGxlY3Rpb24nKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ3Byb2R1Y3RzJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnUHJvZHVjdHMnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ3Byb2R1Y3QvcHJvZHVjdElkJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnUHJvZHVjdCcpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAnbXktY2l0eScsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ1Byb2R1Y3RzJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdhYm91dCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0Fib3V0Jylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdjb250YWN0Jyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnQ29udGFjdCcpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAndXBsb2FkJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnVXBsb2FkJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdtYXAnLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdNYXAnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ2xvZ2luJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnTG9naW4nKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ29yZGVyLXN0YXR1cycsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ09yZGVyU3RhdHVzJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9XG4vLyAgIF1cbi8vIH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvcm91dGVyL3JvdXRlci5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZvcm1hdCBmcm9tICdmb3JtYXQnO1xubGV0IHsgY29ubmVjdCB9ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcbmxldCBhY3Rpb25zID0gcmVxdWlyZSgnY2FydEFjdGlvbnMnKTtcblxuY2xhc3MgQ2FydEl0ZW0gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHtkaXNwYXRjaCwgaXRlbSwgaW5jcmVtZW50TGluZUl0ZW0sIHF1YW50aXR5fSA9IHRoaXMucHJvcHM7XG5cbiAgICBsZXQgY2hhbmdlUXVhbnRpdHkgPSAocXVhbnRpdHkpID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdjYXJ0IEl0ZW0gb2JqZWN0OiAnLCBpdGVtKTtcbiAgICAgIGRpc3BhdGNoKGFjdGlvbnMuc3RhcnRBZGRvclVwZGF0ZUNhcnRJdGVtKGl0ZW0sIHBhcnNlSW50KHF1YW50aXR5KSkpO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtaXRlbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtaXRlbV9faW1nXCIgc3R5bGU9e3tiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoJyArIGl0ZW0uaW1hZ2VWYXJpYW50c1syXS5zcmMgKyAnKSd9fT48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1fX2NvbnRlbnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtaXRlbV9fY29udGVudC1yb3dcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FydC1pdGVtX192YXJpYW50LXRpdGxlXCI+e2l0ZW0udmFyaWFudF90aXRsZX08L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNhcnQtaXRlbV9fdGl0bGVcIj57aXRlbS50aXRsZX08L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1fX2NvbnRlbnQtcm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtaXRlbV9fcXVhbnRpdHktY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4tLXNlYW1sZXNzIHF1YW50aXR5LWRlY3JlbWVudFwiXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge2NoYW5nZVF1YW50aXR5KC0xKX19XG4gICAgICAgICAgICAgID48c3Bhbj4tPC9zcGFuPjxzcGFuIGNsYXNzTmFtZT1cImhpZGVcIj5EZWNyZW1lbnQ8L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHZhbHVlPXtxdWFudGl0eX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1fX3F1YW50aXR5XCJcbiAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICBtaW49XCIwXCJcbiAgICAgICAgICAgICAgICByZWFkT25seVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuLS1zZWFtbGVzcyBxdWFudGl0eS1pbmNyZW1lbnRcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtjaGFuZ2VRdWFudGl0eSgxKX19XG4gICAgICAgICAgICAgID48c3Bhbj4rPC9zcGFuPjxzcGFuIGNsYXNzTmFtZT1cImhpZGVcIj5JbmNyZW1lbnQ8L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNhcnQtaXRlbV9fcHJpY2VcIj57Rm9ybWF0LmFzTW9uZXkoaXRlbS5wcmljZSpxdWFudGl0eSl9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gIChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjYXJ0OiBzdGF0ZS5jYXJ0XG4gICAgfVxuICB9XG4pKENhcnRJdGVtKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL0NhcnQtaXRlbS5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuXG5jbGFzcyBDb2xsZWN0aW9uSXRlbSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHJlbmRlcigpIHtcbiAgICBsZXQge3RpdGxlLCBpZH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sbGVjdGlvbi1pdGVtXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sbGVjdGlvbi1pdGVtLWlubmVyXCI+XG4gICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+PExpbmsgdG89e2AvY29sbGVjdGlvbi8ke2lkfWB9Pnt0aXRsZX08L0xpbms+PC9oMj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb2xsZWN0aW9uSXRlbTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL0NvbGxlY3Rpb25JdGVtLmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5sZXQgeyBjb25uZWN0IH0gPSByZXF1aXJlKCdyZWFjdC1yZWR1eCcpO1xubGV0IGFjdGlvbnMgPSByZXF1aXJlKCdjb2xsZWN0aW9uQWN0aW9ucycpO1xuXG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICdDb2xsZWN0aW9uJztcbmltcG9ydCBDb2xsZWN0aW9uSXRlbSBmcm9tICdDb2xsZWN0aW9uSXRlbSc7XG5cbmNsYXNzIENvbGxlY3Rpb25zIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB7Y29sbGVjdGlvbnN9ID0gdGhpcy5wcm9wcztcblxuICAgIGlmIChjb2xsZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgIHtjb2xsZWN0aW9ucy5tYXAoY29sbGVjdGlvbiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gPENvbGxlY3Rpb25JdGVtIGtleT17Y29sbGVjdGlvbi5jb2xsZWN0aW9uX2lkfSBpZD17Y29sbGVjdGlvbi5jb2xsZWN0aW9uX2lkfSB0aXRsZT17Y29sbGVjdGlvbi50aXRsZX0gLz5cbiAgICAgICAgICB9KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PkxvYWRpbmcgY29sbGVjdGlvbnMuLi48L2Rpdj5cbiAgICAgIClcbiAgICB9XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY29sbGVjdGlvbnM6IHN0YXRlLmNvbGxlY3Rpb25zLmFsbFxuICAgIH1cbiAgfVxuKShDb2xsZWN0aW9ucyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9Db2xsZWN0aW9ucy5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtMaW5rLCBJbmRleExpbmt9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5cbmNsYXNzIEZvb3RlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGZvb3RlciBpZD1cInNpdGUtZm9vdGVyXCI+XG4gICAgICAgIDxuYXYgY2xhc3NOYW1lPVwiZm9vdGVyLW5hdlwiPlxuICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgIDxMaW5rIHRvPVwiL2Fib3V0XCIgYWN0aXZlQ2xhc3NOYW1lPVwiYWN0aXZlXCI+QWJvdXQ8L0xpbms+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgICA8bGk+XG4gICAgICAgICAgICA8TGluayB0bz1cIi9wcm9kdWN0c1wiIGFjdGl2ZUNsYXNzTmFtZT1cImFjdGl2ZVwiPlNob3AgQWxsPC9MaW5rPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPGxpPlxuICAgICAgICAgICAgPExpbmsgdG89XCIvY29udGFjdFwiIGFjdGl2ZUNsYXNzTmFtZT1cImFjdGl2ZVwiPkNvbnRhY3Q8L0xpbms+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgICA8bGk+XG4gICAgICAgICAgICA8TGluayB0bz1cIi91cGxvYWRcIiBhY3RpdmVDbGFzc05hbWU9XCJhY3RpdmVcIj5VcGxvYWQgRGVzaWduPC9MaW5rPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvbmF2PlxuICAgICAgICA8cD5Mb3JlbSBpcHN1bSBkb2xhciBzaXQgYW1pdC4gU2VkIGRvbm8gYXZlYy48L3A+XG4gICAgICA8L2Zvb3Rlcj5cbiAgICApXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGb290ZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9Gb290ZXIuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TGluaywgSW5kZXhMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xubGV0IHtjb25uZWN0fSA9IHJlcXVpcmUoJ3JlYWN0LXJlZHV4Jyk7XG5sZXQgY2FydEFjdGlvbnMgPSByZXF1aXJlKCdjYXJ0QWN0aW9ucycpO1xuXG5jbGFzcyBIZWFkZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHtkaXNwYXRjaCwgY2FydEl0ZW1zfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGhlYWRlciBpZD1cInNpdGUtaGVhZGVyXCI+XG4gICAgICAgIDx1bCBjbGFzc05hbWU9XCJtaW5pLW5hdlwiPlxuICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJtaW5pLW5hdi1pdGVtXCI+PExpbmsgdG89XCIvYWJvdXRcIiBhY3RpdmVDbGFzc05hbWU9XCJhY3RpdmVcIj5BYm91dDwvTGluaz48L2xpPlxuICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJtaW5pLW5hdi1pdGVtXCI+PExpbmsgdG89XCIvb3JkZXItc3RhdHVzXCIgYWN0aXZlQ2xhc3NOYW1lPVwiYWN0aXZlXCI+T3JkZXIgU3RhdHVzPC9MaW5rPjwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cIm1pbmktbmF2LWl0ZW1cIj48TGluayB0bz1cIi9tYXBcIiBhY3RpdmVDbGFzc05hbWU9XCJhY3RpdmVcIj5NYXA8L0xpbms+PC9saT5cbiAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwibWluaS1uYXYtaXRlbVwiPjxMaW5rIHRvPVwiL2xvZ2luXCIgYWN0aXZlQ2xhc3NOYW1lPVwiYWN0aXZlXCI+TG9naW48L0xpbms+PC9saT5cbiAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwibWluaS1uYXYtaXRlbSBtaW5pLW5hdi1pdGVtLWNhcnRcIiBvbkNsaWNrPXsoKT0+e1xuICAgICAgICAgICAgZGlzcGF0Y2goY2FydEFjdGlvbnMub3BlbkNhcnQoKSk7XG4gICAgICAgICAgfX0+PGkgY2xhc3NOYW1lPVwiZmEgZmEtc2hvcHBpbmctY2FydFwiPjwvaT4ge2NhcnRJdGVtcyA+IDAgPyAnWycgKyBjYXJ0SXRlbXMgKyAnXScgOiAnJ308L2xpPlxuICAgICAgICA8L3VsPlxuXG4gICAgICAgIDxkaXYgaWQ9XCJzaXRlLWxvZ29cIj5cbiAgICAgICAgICA8SW5kZXhMaW5rIHRvPVwiL1wiIGFjdGl2ZUNsYXNzTmFtZT1cImFjdGl2ZVwiIGFjdGl2ZVN0eWxlPXt7Zm9udFdlaWdodDogJ2JvbGQnfX0+PGltZyBzcmM9XCIvaW1hZ2VzL2xvZ28ucG5nXCIgLz48L0luZGV4TGluaz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPG5hdiBpZD1cInNpdGUtbmF2XCI+XG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cInNpdGUtbmF2LWl0ZW1cIj48TGluayB0bz1cIi9wcm9kdWN0c1wiIGFjdGl2ZUNsYXNzTmFtZT1cImFjdGl2ZVwiPlNob3A8L0xpbms+PC9saT5cbiAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwic2l0ZS1uYXYtaXRlbVwiPjxMaW5rIHRvPVwiL215LWNpdHlcIiBhY3RpdmVDbGFzc05hbWU9XCJhY3RpdmVcIj5NeSBDaXR5PC9MaW5rPjwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cInNpdGUtbmF2LWl0ZW1cIj48TGluayB0bz1cIi9jYXRlZ29yaWVzXCIgYWN0aXZlQ2xhc3NOYW1lPVwiYWN0aXZlXCI+Q2F0ZWdvcmllczwvTGluaz48L2xpPlxuICAgICAgICAgIDxkaXYgaWQ9XCJzaXRlLW5hdi11cGxvYWRcIj5cbiAgICAgICAgICAgIDxMaW5rIHRvPXtgL3VwbG9hZGB9PjxpbWcgc3JjPVwiL2ltYWdlcy91cGxvYWQucG5nXCIgLz48L0xpbms+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbmF2PlxuICAgICAgPC9oZWFkZXI+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gIChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjYXJ0SXRlbXM6IHN0YXRlLmNhcnQubGluZUl0ZW1zQ291bnRcbiAgICB9XG4gIH1cbikoSGVhZGVyKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL0hlYWRlci5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFNsaWRlciBmcm9tICdyZWFjdC1zbGljayc7XG5pbXBvcnQge0xpbmt9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5sZXQge2Nvbm5lY3R9ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcbmxldCBhY3Rpb25zID0gcmVxdWlyZSgnY2FydEFjdGlvbnMnKTtcblxuaW1wb3J0IExvYWRlciBmcm9tICdMb2FkZXInO1xuaW1wb3J0IFByb2R1Y3RJdGVtIGZyb20gJ1Byb2R1Y3RJdGVtJztcblxuY2xhc3MgSW5kZXggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgaGFuZGxlQWRkVG9DYXJ0KHByb2R1Y3QpIHtcbiAgICBsZXQge2Rpc3BhdGNofSA9IHRoaXMucHJvcHM7XG4gICAgZGlzcGF0Y2goYWN0aW9ucy5zdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0ocHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQsIDEpKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQge3Byb2R1Y3RzfSA9IHRoaXMucHJvcHM7XG4gICAgcHJvZHVjdHMgPSBwcm9kdWN0cy5zbGljZSgwLCAxMik7XG5cbiAgICAvLyBzbGlkZXIgc2V0dGluZ3NcbiAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICBjbGFzc05hbWU6ICdjZW50ZXIgcHJvZHVjdHMtY2Fyb3VzZWwnLFxuICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICBjZW50ZXJQYWRkaW5nOiAnNjBweCcsXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgIHNsaWRlc1RvU2hvdzogNCxcbiAgICAgIHNwZWVkOiA1MDAsXG4gICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgbGF6eUxvYWQ6IHRydWUsXG4gICAgICByZXNwb25zaXZlOiBbe1xuICAgICAgICBicmVha3BvaW50OiAxMDI0LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMyxcbiAgICAgICAgICBpbmZpbml0ZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIGJyZWFrcG9pbnQ6IDYwMCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDIsXG4gICAgICAgICAgaW5pdGlhbFNsaWRlOiAyXG4gICAgICAgIH1cbiAgICAgIH0sIHtcbiAgICAgICAgYnJlYWtwb2ludDogNDgwLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMVxuICAgICAgICB9XG4gICAgICB9XVxuICAgIH07XG5cbiAgICBpZiAocHJvZHVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8U2xpZGVyIHsuLi5zZXR0aW5nc30+XG4gICAgICAgICAgICB7cHJvZHVjdHMubWFwKChwcm9kdWN0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwicHJvZHVjdHMtY2Fyb3VzZWwtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2AvcHJvZHVjdC8ke3Byb2R1Y3QuYXR0cnMucHJvZHVjdF9pZH1gfT48ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3QtaXRlbS1pbWFnZVwiIHN0eWxlPXt7YmFja2dyb3VuZEltYWdlOiAndXJsKCcgKyBwcm9kdWN0LnNlbGVjdGVkVmFyaWFudC5pbWFnZVZhcmlhbnRzWzVdLnNyYyArICcpJ319PjwvZGl2PjwvTGluaz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9TbGlkZXI+XG5cbiAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzZWN0aW9uLWNhbGxvdXRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJzZWN0aW9uLWhlYWRsaW5lXCI+U2hvdyB5b3VyIHByaWRlLiBEaXNwbGF5IHlvdXIgdGFsZW50cy4gPHNwYW4gY2xhc3NOYW1lPVwiZm9udC13aGl0ZVwiPlJlcCB5b3VyIGNpdHkuPC9zcGFuPjwvaDQ+XG4gICAgICAgICAgICAgIDxwPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIE51bGxhbSBzZW1wZXIgbnVsbGEgdmVsIGVsaXQgZ3JhdmlkYSwgdmVsIHBsYWNlcmF0IHR1cnBpcyBjb252YWxsaXMuIFByYWVzZW50IGV1IGxvcmVtIHN1c2NpcGl0LCBncmF2aWRhIGxlbyBzZWQsIGx1Y3R1cyBlcmF0LiBOdWxsYW0gY29uc2VjdGV0dXIsIHRvcnRvciBhIGZhY2lsaXNpcyBsb2JvcnRpcywgdmVsaXQgbWFzc2EgbWF0dGlzIHJpc3VzLCBlZ2V0IGltcGVyZGlldCB2ZWxpdCBhcmN1IG5vbiBtYXVyaXMuIE1hdXJpcyBiaWJlbmR1bSBiaWJlbmR1bSBsaWd1bGEsIG5lYyBtYXhpbXVzIHNhcGllbiBwb3J0YSBub24uPC9wPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlY3Rpb24tY2FsbG91dF9fY3RhLWl0ZW1zXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgdG89e2AvcHJvZHVjdHNgfT48aW1nIHNyYz1cIi9pbWFnZXMvYnV0dG9uLXNob3AucG5nXCIgYWx0PVwiU2hvcCBub3dcIiAvPjwvTGluaz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlYXJjaC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXNlYXJjaFwiIC8+XG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdHllcD1cInRleHRcIiBwbGFjZWhvbGRlcj1cIktleXdvcmQgU2VhcmNoXCIgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8TGluayB0bz17YC91cGxvYWRgfT48aW1nIHNyYz1cIi9pbWFnZXMvYnV0dG9uLXVwbG9hZC5wbmdcIiBhbHQ9XCJTaG9wIG5vd1wiIC8+PC9MaW5rPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvc2VjdGlvbj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwicHJvZHVjdHMtZ3JpZC10aXRsZVwiPldoYXQncyBob3QgLyBXaGF0J3MgbmV3PC9oMz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZHVjdHMtZ3JpZFwiPlxuICAgICAgICAgICAgICB7cHJvZHVjdHMubWFwKHByb2R1Y3QgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiA8UHJvZHVjdEl0ZW0ga2V5PXtwcm9kdWN0LmtleX0gYWRkVG9DYXJ0PXsoKSA9PiB0aGlzLmhhbmRsZUFkZFRvQ2FydChwcm9kdWN0KX0gaWQ9e3Byb2R1Y3QuYXR0cnMucHJvZHVjdF9pZH0gdGl0bGU9e3Byb2R1Y3QuYXR0cnMudGl0bGV9IGltYWdlPXtwcm9kdWN0LnNlbGVjdGVkVmFyaWFudC5pbWFnZVZhcmlhbnRzWzVdLnNyY30gLz5cbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8TG9hZGVyIC8+XG4gICAgICApXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gIChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9kdWN0czogc3RhdGUucHJvZHVjdHMuYWxsXG4gICAgfVxuICB9XG4pKEluZGV4KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL0luZGV4LmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSGVhZGVyIGZyb20gJ0hlYWRlcic7XG5pbXBvcnQgRm9vdGVyIGZyb20gJ0Zvb3Rlcic7XG5pbXBvcnQgRG9jdW1lbnRNZXRhIGZyb20gJ3JlYWN0LWRvY3VtZW50LW1ldGEnO1xuaW1wb3J0IENhcnQgZnJvbSAnY2FydCc7XG5cbmNsYXNzIE1haW4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gIGNvbnN0cnVjdG9yKHByb3BzKXtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdGl0bGU6ICcnLFxuICAgICAgY29udGVudDogJydcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG1ldGEgPSB7XG4gICAgICB0aXRsZTogJ1JlcCBZb3VyIENpdHknLFxuICAgICAgZGVzY3JpcHRpb246ICdSZXAgWW91ciBDaXR5IGRlc2NyaXB0aW9uJyxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgY2hhcnNldDogJ3V0Zi04J1xuICAgICAgfSxcbiAgICAgIGF1dG86IHtcbiAgICAgICAgb2dyYXBoOiB0cnVlXG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCBwYWdlTmFtZSA9IHRoaXMucHJvcHMubG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyKDEpLnNwbGl0KCcvJyk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBpZD1cIm1haW5cIiBjbGFzc05hbWU9e2BwYWdlLSR7cGFnZU5hbWVbMF0gPyBwYWdlTmFtZVswXSArICcgc3VicGFnZScgOiAnaG9tZSd9YH0+XG4gICAgICAgIDxEb2N1bWVudE1ldGEgey4uLm1ldGF9IC8+XG4gICAgICAgIDxIZWFkZXIgLz5cbiAgICAgICAgPGRpdiBpZD1cIm1haW4tY29udGFpbmVyXCI+XG4gICAgICAgICAgPENhcnQgLz5cbiAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxGb290ZXIgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNYWluO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbnRhaW5lcnMvTWFpbi5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xubGV0IHtjb25uZWN0fSA9IHJlcXVpcmUoJ3JlYWN0LXJlZHV4Jyk7XG5sZXQgYWN0aW9ucyA9IHJlcXVpcmUoJ2NhcnRBY3Rpb25zJyk7XG5pbXBvcnQgTG9hZGVyIGZyb20gJ0xvYWRlcic7XG5pbXBvcnQgUHJvZHVjdEl0ZW0gZnJvbSAnUHJvZHVjdEl0ZW0nO1xuXG5jbGFzcyBQcm9kdWN0cyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBoYW5kbGVBZGRUb0NhcnQocHJvZHVjdCkge1xuICAgIGxldCB7ZGlzcGF0Y2h9ID0gdGhpcy5wcm9wcztcbiAgICBkaXNwYXRjaChhY3Rpb25zLnN0YXJ0QWRkb3JVcGRhdGVDYXJ0SXRlbShwcm9kdWN0LnNlbGVjdGVkVmFyaWFudCwgMSkpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB7cHJvZHVjdHN9ID0gdGhpcy5wcm9wcztcblxuICAgIGlmIChwcm9kdWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIG1lZGl1bS0zIGNvbHVtbnNcIj5cbiAgICAgICAgICAgICAgPG5hdiBjbGFzc05hbWU9XCJwcm9kdWN0cy1uYXZcIj5cbiAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwicHJvZHVjdHMtbmF2X19oZWFkbGluZVwiPkNhdGVnb3JpZXM8L2g0PlxuICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgIDxsaT5DaXR5IC8gc3RhdGU8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlNwb3J0czwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+SG9iYmllczwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+TXVzaWM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPkFuaW1hbHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlNob3cgYWxsPC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuXG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInByb2R1Y3RzLW5hdl9faGVhZGxpbmVcIj5TdHlsZTwvaDQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0cy1uYXZfX3NlYXJjaFwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJTZWxlY3Qgc3R5bGVcIiAvPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwicHJvZHVjdHMtbmF2X19zZWFyY2gtYnV0dG9uXCI+PGkgY2xhc3NOYW1lPVwiZmEgZmEtc2VhcmNoXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInByb2R1Y3RzLW5hdl9faGVhZGxpbmVcIj5TZWFyY2g8L2g0PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZHVjdHMtbmF2X19zZWFyY2hcIj5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiRW50ZXIga2V5d29yZHNcIiAvPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwicHJvZHVjdHMtbmF2X19zZWFyY2gtYnV0dG9uXCI+PGkgY2xhc3NOYW1lPVwiZmEgZmEtc2VhcmNoXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDwvbmF2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsLTEyIG1lZGl1bS05IGNvbHVtblwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3RzLWdyaWRcIj5cbiAgICAgICAgICAgICAgICB7cHJvZHVjdHMubWFwKHByb2R1Y3QgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIDxQcm9kdWN0SXRlbSBrZXk9e3Byb2R1Y3Qua2V5fSBhZGRUb0NhcnQ9eygpID0+IHRoaXMuaGFuZGxlQWRkVG9DYXJ0KHByb2R1Y3QpfSBpZD17cHJvZHVjdC5hdHRycy5wcm9kdWN0X2lkfSB0aXRsZT17cHJvZHVjdC5hdHRycy50aXRsZX0gaW1hZ2U9e3Byb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LmltYWdlVmFyaWFudHNbNF0uc3JjfSAvPlxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxMb2FkZXIgLz5cbiAgICAgIClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgKHN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2R1Y3RzOiBzdGF0ZS5wcm9kdWN0cy5hbGxcbiAgICB9XG4gIH1cbikoUHJvZHVjdHMpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbnRhaW5lcnMvUHJvZHVjdHMuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TGlua30gZnJvbSAncmVhY3Qtcm91dGVyJztcbmxldCB7Y29ubmVjdH0gPSByZXF1aXJlKCdyZWFjdC1yZWR1eCcpO1xubGV0IHByb2R1Y3RBY3Rpb25zID0gcmVxdWlyZSgncHJvZHVjdEFjdGlvbnMnKTtcbmxldCBjYXJ0QWN0aW9ucyA9IHJlcXVpcmUoJ2NhcnRBY3Rpb25zJyk7XG5pbXBvcnQge2Jyb3dzZXJIaXN0b3J5fSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuXG5jbGFzcyBVcGxvYWQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHtkaXNwYXRjaH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyIHRleHQtY2VudGVyXCI+XG4gICAgICAgIDxpbWcgc3JjPVwiL2ltYWdlcy91cGxvYWQtcGxhY2Vob2xkZXIucG5nXCIgLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlUHJvZHVjdDogc3RhdGUucHJvZHVjdHMuYWN0aXZlXG4gICAgfVxuICB9XG4pKFVwbG9hZCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9VcGxvYWQuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmxldCB7IGNvbm5lY3QgfSA9IHJlcXVpcmUoJ3JlYWN0LXJlZHV4Jyk7XG5sZXQgYWN0aW9ucyA9IHJlcXVpcmUoJ2NhcnRBY3Rpb25zJyk7XG5cbmltcG9ydCBzaG9waWZ5QVBJIGZyb20gJ3Nob3BpZnlBUEknO1xuaW1wb3J0IENhcnRJdGVtIGZyb20gJ0NhcnQtaXRlbSc7XG5cbmltcG9ydCBGb3JtYXQgZnJvbSAnZm9ybWF0JztcblxuY2xhc3MgQ2FydCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcblxuICAgIGxldCBkaXNwYXRjaDtcbiAgICBsZXQgaGFuZGxlQ2hlY2tvdXQgPSB0aGlzLmhhbmRsZUNoZWNrb3V0KCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5kaXNwYXRjaCA9IHRoaXMucHJvcHMuZGlzcGF0Y2g7XG4gIH1cblxuICBoYW5kbGVDbG9zZUNhcnQoKSB7XG4gICAgdGhpcy5kaXNwYXRjaChhY3Rpb25zLmNsb3NlQ2FydCgpKTtcbiAgfVxuXG4gIGhhbmRsZUNoZWNrb3V0KCkge1xuICAgIHdpbmRvdy5vcGVuKHNob3BpZnlBUEkuY2FydC5jaGVja291dFVybCwgJ19zZWxmJyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHtpc09wZW4sIGxpbmVJdGVtcywgbGluZUl0ZW1Db3VudCwgc3VidG90YWx9ID0gdGhpcy5wcm9wcy5jYXJ0O1xuICAgIGxldCByZW5kZXJMaW5lSXRlbXMgPSAoKSA9PiB7XG4gICAgICBpZiAobGluZUl0ZW1zLmxlbmd0aCA+IDApe1xuICAgICAgICByZXR1cm4gbGluZUl0ZW1zLm1hcChsaW5lSXRlbSA9PiB7XG4gICAgICAgICAgcmV0dXJuIDxDYXJ0SXRlbVxuICAgICAgICAgICAga2V5PXtsaW5lSXRlbS5pZH1cbiAgICAgICAgICAgIGl0ZW09e2xpbmVJdGVtfVxuICAgICAgICAgICAgcXVhbnRpdHk9e2xpbmVJdGVtLnF1YW50aXR5fVxuICAgICAgICAgIC8+XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wiY2FydCBcIiArIChpc09wZW4gPyAnanMtYWN0aXZlJyA6ICcnICl9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtc2VjdGlvbiBjYXJ0LXNlY3Rpb24tLXRvcFwiPlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJjYXJ0LXRpdGxlXCI+WW91ciBjYXJ0OiB7aXNPcGVufTwvaDI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4tLWNsb3NlXCI+XG4gICAgICAgICAgICA8ZGl2IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xvc2VDYXJ0LmJpbmQodGhpcyl9PsOXPC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoaWRlXCI+Q2xvc2U8L3NwYW4+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FydC1mb3JtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW0tY29udGFpbmVyIGNhcnQtc2VjdGlvblwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAge3JlbmRlckxpbmVJdGVtcygpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtYm90dG9tXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtaW5mbyBjbGVhcmZpeCBjYXJ0LXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0eXBlLS1jYXBzIGNhcnQtaW5mb19fdG90YWwgY2FydC1pbmZvX19zbWFsbFwiPlRvdGFsPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FydC1pbmZvX19wcmljaW5nXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiY2FydC1pbmZvX19zbWFsbCBjYXJ0LWluZm9fX3RvdGFsXCI+VVNEPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInByaWNpbmcgcHJpY2luZy0tbm8tcGFkZGluZ1wiPntGb3JtYXQuYXNNb25leShzdWJ0b3RhbCl9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWFjdGlvbnMtY29udGFpbmVyIGNhcnQtc2VjdGlvbiB0eXBlLS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWRpc2NvdW50LW5vdGljZSBjYXJ0LWluZm9fX3NtYWxsXCI+U2hpcHBpbmcgYW5kIGRpc2NvdW50IGNvZGVzIGFyZSBhZGRlZCBhdCBjaGVja291dC48L2Rpdj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi0tY2FydC1jaGVja291dFwiXG4gICAgICAgICAgICAgICAgaWQ9XCJjaGVja291dFwiXG4gICAgICAgICAgICAgICAgbmFtZT1cImNoZWNrb3V0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT1cIkNoZWNrb3V0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNoZWNrb3V0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gIChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjYXJ0OiBzdGF0ZS5jYXJ0XG4gICAgfVxuICB9XG4pKENhcnQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbnRhaW5lcnMvY2FydC5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IERvY3VtZW50TWV0YSBmcm9tICdyZWFjdC1kb2N1bWVudC1tZXRhJztcblxuY2xhc3MgQWJvdXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwic2VjdGlvblwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxoMT5BYm91dCB1czwvaDE+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9zZWN0aW9uPlxuICAgIClcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFib3V0O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3ByZXNlbnRhdGlvbmFsL0Fib3V0LmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgRG9jdW1lbnRNZXRhIGZyb20gJ3JlYWN0LWRvY3VtZW50LW1ldGEnO1xuXG5jbGFzcyBDb250YWN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInNlY3Rpb25cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICA8aDE+Q29udGFjdDwvaDE+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9zZWN0aW9uPlxuICAgIClcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRhY3Q7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvcHJlc2VudGF0aW9uYWwvQ29udGFjdC5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IERvY3VtZW50TWV0YSBmcm9tICdyZWFjdC1kb2N1bWVudC1tZXRhJztcblxuY2xhc3MgTG9naW4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwic2VjdGlvblwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxoMT5Mb2dpbjwvaDE+XG4gICAgICAgICAgPGZvcm0+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkVtYWlsXCIgLz5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicGFzc3dvcmRcIiBwbGFjZWhvbGRlcj1cIlBhc3N3b3JkXCIgLz5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwiYnV0dG9uXCIgdmFsdWU9XCJMb2dpblwiIC8+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICApXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBMb2dpbjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9wcmVzZW50YXRpb25hbC9Mb2dpbi5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IERvY3VtZW50TWV0YSBmcm9tICdyZWFjdC1kb2N1bWVudC1tZXRhJztcblxuY2xhc3MgTWFwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInNlY3Rpb25cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICA8aDE+TWFwIHBhZ2U8L2gxPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICApXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNYXA7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvcHJlc2VudGF0aW9uYWwvTWFwLmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgRG9jdW1lbnRNZXRhIGZyb20gJ3JlYWN0LWRvY3VtZW50LW1ldGEnO1xuXG5jbGFzcyBPcmRlclN0YXR1cyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzZWN0aW9uXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgPGgxPk9yZGVyIFN0YXR1cyBwYWdlPC9oMT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG4gICAgKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gT3JkZXJTdGF0dXM7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvcHJlc2VudGF0aW9uYWwvT3JkZXJTdGF0dXMuanN4IiwiZXhwb3J0IHZhciBwcm9kdWN0c1JlZHVjZXIgPSAoc3RhdGUgPSB7YWxsOiBbXSwgYWN0aXZlOiBudWxsfSwgYWN0aW9uKSA9PiB7XG4gIHN3aXRjaChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ0FERF9QUk9EVUNUUyc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYWxsOiBhY3Rpb24ucHJvZHVjdHNcbiAgICAgIH07XG4gICAgY2FzZSAnU0VUX0FDVElWRV9QUk9EVUNUJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBhY3RpdmU6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5hY3RpdmUsXG4gICAgICAgICAgZmV0Y2hlZDogdHJ1ZSxcbiAgICAgICAgICBvcHRpb25zOiBhY3Rpb24ub3B0aW9uc1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIGNhc2UgJ0NMRUFSX0FDVElWRV9QUk9EVUNUJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBhY3RpdmU6IG51bGxcbiAgICAgIH07XG4gICAgY2FzZSAnVVBEQVRFX0FDVElWRV9QUk9EVUNUX09QVElPTlMnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGFjdGl2ZToge1xuICAgICAgICAgIC4uLnN0YXRlLmFjdGl2ZSxcbiAgICAgICAgICBvcHRpb25zOiBhY3Rpb24ub3B0aW9uc1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbmV4cG9ydCB2YXIgY29sbGVjdGlvbnNSZWR1Y2VyID0gKHN0YXRlID0ge2FsbDogW10sIGFjdGl2ZTogbnVsbH0sIGFjdGlvbikgPT4ge1xuICBzd2l0Y2goYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdBRERfQ09MTEVDVElPTlMnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGFsbDogYWN0aW9uLmNvbGxlY3Rpb25zXG4gICAgICB9O1xuICAgIGNhc2UgJ1NFVF9BQ1RJVkVfQ09MTEVDVElPTic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYWN0aXZlOiBhY3Rpb24ucGFyc2VkQ29sbGVjdGlvblxuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59O1xuXG5leHBvcnQgdmFyIGNhcnRSZWR1Y2VyID0gKHN0YXRlID0ge2lzT3BlbjogZmFsc2UsIGxpbmVJdGVtczogW119LCBhY3Rpb24pID0+IHtcbiAgc3dpdGNoKGFjdGlvbi50eXBlKSB7XG4gICAgLy8gY2FzZSAnUkVTVE9SRV9QUkVWSU9VU19DQVJUJzpcbiAgICAvLyAgIHJldHVybiBhY3Rpb24ucmVtb3RlQ2FydDtcbiAgICBjYXNlICdTRVRfSU5JVElBTF9DQVJUX1NUQVRFJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmFjdGlvbi5sb2NhbENhcnRcbiAgICAgIH07XG4gICAgY2FzZSAnVVBEQVRFX0NBUlRfSVRFTVMnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGxpbmVJdGVtczogYWN0aW9uLnVwZGF0ZWRDYXJ0SXRlbXNcbiAgICAgIH07XG4gICAgY2FzZSAnVVBEQVRFX0NBUlRfSVRFTVNfQ09VTlQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGxpbmVJdGVtc0NvdW50OiBhY3Rpb24udXBkYXRlZENhcnRJdGVtc0NvdW50XG4gICAgICB9O1xuICAgIGNhc2UgJ1VQREFURV9DQVJUX1NVQlRPVEFMJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBzdWJ0b3RhbDogYWN0aW9uLm5ld1N1YnRvdGFsXG4gICAgICB9O1xuICAgIGNhc2UgJ09QRU5fQ0FSVCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgaXNPcGVuOiB0cnVlXG4gICAgICB9O1xuICAgIGNhc2UgJ0NMT1NFX0NBUlQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxuZXhwb3J0IHZhciBuYXZSZWR1Y2VyID0gKHN0YXRlID0ge3Nob3dDbG9zZTogZmFsc2UsIHNob3dOYXY6IGZhbHNlfSwgYWN0aW9uKSA9PiB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdUT0dHTEVfTkFWX0lDT04nOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHNob3dDbG9zZTogIXN0YXRlLnNob3dDbG9zZSxcbiAgICAgICAgc2hvd05hdjogc3RhdGUuc2hvd05hdlxuICAgICAgfTtcbiAgICBjYXNlICdUT0dHTEVfTkFWJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBzaG93Q2xvc2U6ICFzdGF0ZS5zaG93Q2xvc2UsXG4gICAgICAgIHNob3dOYXY6ICFzdGF0ZS5zaG93TmF2XG4gICAgICB9O1xuICAgIGNhc2UgJ0NMT1NFX05BVic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgc2hvd05hdjogZmFsc2VcbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9yZWR1Y2Vycy9yZWR1Y2Vycy5qc3giLCIndXNlIHN0cmljdCdcblxuZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5XG5leHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5XG5cbnZhciBsb29rdXAgPSBbXVxudmFyIHJldkxvb2t1cCA9IFtdXG52YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5XG5cbnZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nXG5mb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICBsb29rdXBbaV0gPSBjb2RlW2ldXG4gIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaVxufVxuXG5yZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjJcbnJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2M1xuXG5mdW5jdGlvbiBwbGFjZUhvbGRlcnNDb3VudCAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG4gIGlmIChsZW4gJSA0ID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG4gIH1cblxuICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuICAvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG4gIC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcbiAgLy8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuICByZXR1cm4gYjY0W2xlbiAtIDJdID09PSAnPScgPyAyIDogYjY0W2xlbiAtIDFdID09PSAnPScgPyAxIDogMFxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChiNjQpIHtcbiAgLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG4gIHJldHVybiBiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnNDb3VudChiNjQpXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcbiAgcGxhY2VIb2xkZXJzID0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxuXG4gIGFyciA9IG5ldyBBcnIobGVuICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpXG5cbiAgLy8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuICBsID0gcGxhY2VIb2xkZXJzID4gMCA/IGxlbiAtIDQgOiBsZW5cblxuICB2YXIgTCA9IDBcblxuICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDE2KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArIGxvb2t1cFtudW0gJiAweDNGXVxufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHRtcFxuICB2YXIgb3V0cHV0ID0gW11cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pXG4gICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpXG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW4gPSB1aW50OC5sZW5ndGhcbiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG4gIHZhciBvdXRwdXQgPSAnJ1xuICB2YXIgcGFydHMgPSBbXVxuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMl1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXVxuICAgIG91dHB1dCArPSAnPT0nXG4gIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikge1xuICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArICh1aW50OFtsZW4gLSAxXSlcbiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9ICc9J1xuICB9XG5cbiAgcGFydHMucHVzaChvdXRwdXQpXG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYmFzZTY0LWpzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbi8qXG4gKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpXG4gIH1cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgaWYgKHRoYXQgPT09IG51bGwpIHtcbiAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgICB9XG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcbiAgfVxuICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbi8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLlxuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcbiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblxuICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXJcblxuICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnb2Zmc2V0XFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IGFycmF5XG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcbiAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblxuICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoYXRcbiAgICB9XG5cbiAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG4gICAgcmV0dXJuIHRoYXRcbiAgfVxuXG4gIGlmIChvYmopIHtcbiAgICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCAwKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKVxuICAgIH1cblxuICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aCgpYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXVxuICAgICAgeSA9IGJbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICAgIH1cbiAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICBwb3MgKz0gYnVmLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxuLy8gQnVmZmVyIGluc3RhbmNlcy5cbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIHZhciB5ID0gZW5kIC0gc3RhcnRcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG5cbiAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG4gIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgaWYgKGRpcikgcmV0dXJuIC0xXG4gICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG4gICAgZWxzZSByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB2YWxcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiZcbiAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDFcbiAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGRpcikge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcbiAgICApXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG4gICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG4gICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG4gIHZhciBpXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXG4gICAgICB0YXJnZXRTdGFydFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gVXNhZ2U6XG4vLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG4gIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IHN0YXJ0XG4gICAgICBzdGFydCA9IDBcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBlbmRcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY29kZSA8IDI1Nikge1xuICAgICAgICB2YWwgPSBjb2RlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMjU1XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBpc25hbiAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2J1ZmZlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2J1ZmZlci9+L2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgY2FuVXNlRE9NID0gISEoXG4gIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gIHdpbmRvdy5kb2N1bWVudCAmJlxuICB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudFxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjYW5Vc2VET007XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nhbi11c2UtZG9tL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcHRzKSB7XG4gIHJldHVybiBuZXcgRWxlbWVudENsYXNzKG9wdHMpXG59XG5cbmZ1bmN0aW9uIGluZGV4T2YoYXJyLCBwcm9wKSB7XG4gIGlmIChhcnIuaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKHByb3ApXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspXG4gICAgaWYgKGFycltpXSA9PT0gcHJvcCkgcmV0dXJuIGlcbiAgcmV0dXJuIC0xXG59XG5cbmZ1bmN0aW9uIEVsZW1lbnRDbGFzcyhvcHRzKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBFbGVtZW50Q2xhc3MpKSByZXR1cm4gbmV3IEVsZW1lbnRDbGFzcyhvcHRzKVxuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKCFvcHRzKSBvcHRzID0ge31cblxuICAvLyBzaW1pbGFyIGRvaW5nIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgYnV0IHdvcmtzIGluIElFOFxuICBpZiAob3B0cy5ub2RlVHlwZSkgb3B0cyA9IHtlbDogb3B0c31cblxuICB0aGlzLm9wdHMgPSBvcHRzXG4gIHRoaXMuZWwgPSBvcHRzLmVsIHx8IGRvY3VtZW50LmJvZHlcbiAgaWYgKHR5cGVvZiB0aGlzLmVsICE9PSAnb2JqZWN0JykgdGhpcy5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5lbClcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKGVsLmNsYXNzTmFtZSA9PT0gXCJcIikgcmV0dXJuIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZVxuICB2YXIgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZS5zcGxpdCgnICcpXG4gIGlmIChpbmRleE9mKGNsYXNzZXMsIGNsYXNzTmFtZSkgPiAtMSkgcmV0dXJuIGNsYXNzZXNcbiAgY2xhc3Nlcy5wdXNoKGNsYXNzTmFtZSlcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJylcbiAgcmV0dXJuIGNsYXNzZXNcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKGVsLmNsYXNzTmFtZSA9PT0gXCJcIikgcmV0dXJuXG4gIHZhciBjbGFzc2VzID0gZWwuY2xhc3NOYW1lLnNwbGl0KCcgJylcbiAgdmFyIGlkeCA9IGluZGV4T2YoY2xhc3NlcywgY2xhc3NOYW1lKVxuICBpZiAoaWR4ID4gLTEpIGNsYXNzZXMuc3BsaWNlKGlkeCwgMSlcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJylcbiAgcmV0dXJuIGNsYXNzZXNcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoJyAnKVxuICByZXR1cm4gaW5kZXhPZihjbGFzc2VzLCBjbGFzc05hbWUpID4gLTFcbn1cblxuRWxlbWVudENsYXNzLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gdGhpcy5lbFxuICBpZiAoIWVsKSByZXR1cm5cbiAgaWYgKHRoaXMuaGFzKGNsYXNzTmFtZSkpIHRoaXMucmVtb3ZlKGNsYXNzTmFtZSlcbiAgZWxzZSB0aGlzLmFkZChjbGFzc05hbWUpXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZWxlbWVudC1jbGFzcy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTczXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIi8qIVxuICogZW5xdWlyZS5qcyB2Mi4xLjEgLSBBd2Vzb21lIE1lZGlhIFF1ZXJpZXMgaW4gSmF2YVNjcmlwdFxuICogQ29weXJpZ2h0IChjKSAyMDE0IE5pY2sgV2lsbGlhbXMgLSBodHRwOi8vd2lja3kubmlsbGlhLm1zL2VucXVpcmUuanNcbiAqIExpY2Vuc2U6IE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXG4gKi9cblxuOyhmdW5jdGlvbiAobmFtZSwgY29udGV4dCwgZmFjdG9yeSkge1xuXHR2YXIgbWF0Y2hNZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhO1xuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShtYXRjaE1lZGlhKTtcblx0fVxuXHRlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gKGNvbnRleHRbbmFtZV0gPSBmYWN0b3J5KG1hdGNoTWVkaWEpKTtcblx0XHR9KTtcblx0fVxuXHRlbHNlIHtcblx0XHRjb250ZXh0W25hbWVdID0gZmFjdG9yeShtYXRjaE1lZGlhKTtcblx0fVxufSgnZW5xdWlyZScsIHRoaXMsIGZ1bmN0aW9uIChtYXRjaE1lZGlhKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG4gICAgLypqc2hpbnQgdW51c2VkOmZhbHNlICovXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBpdGVyYXRpbmcgb3ZlciBhIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIGZuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFjaChjb2xsZWN0aW9uLCBmbikge1xuICAgICAgICB2YXIgaSAgICAgID0gMCxcbiAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgICAgY29udDtcblxuICAgICAgICBmb3IoaTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb250ID0gZm4oY29sbGVjdGlvbltpXSwgaSk7XG4gICAgICAgICAgICBpZihjb250ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrOyAvL2FsbG93IGVhcmx5IGV4aXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0YXJnZXQgb2JqZWN0IGlzIGFuIGFycmF5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IHRoZSBvYmplY3QgdW5kZXIgdGVzdFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgYXJyYXksIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXJyYXkodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHRhcmdldCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHRhcmdldCBvYmplY3QgaXMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCB0aGUgb2JqZWN0IHVuZGVyIHRlc3RcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGZ1bmN0aW9uLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxlZ2F0ZSB0byBoYW5kbGUgYSBtZWRpYSBxdWVyeSBiZWluZyBtYXRjaGVkIGFuZCB1bm1hdGNoZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMubWF0Y2ggY2FsbGJhY2sgZm9yIHdoZW4gdGhlIG1lZGlhIHF1ZXJ5IGlzIG1hdGNoZWRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy51bm1hdGNoXSBjYWxsYmFjayBmb3Igd2hlbiB0aGUgbWVkaWEgcXVlcnkgaXMgdW5tYXRjaGVkXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW29wdGlvbnMuc2V0dXBdIG9uZS10aW1lIGNhbGxiYWNrIHRyaWdnZXJlZCB0aGUgZmlyc3QgdGltZSBhIHF1ZXJ5IGlzIG1hdGNoZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmVyU2V0dXA9ZmFsc2VdIHNob3VsZCB0aGUgc2V0dXAgY2FsbGJhY2sgYmUgcnVuIGltbWVkaWF0ZWx5LCByYXRoZXIgdGhhbiBmaXJzdCB0aW1lIHF1ZXJ5IGlzIG1hdGNoZWQ/XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gUXVlcnlIYW5kbGVyKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgIW9wdGlvbnMuZGVmZXJTZXR1cCAmJiB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIFF1ZXJ5SGFuZGxlci5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHNldHVwIG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKHRoaXMub3B0aW9ucy5zZXR1cCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zZXR1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHNldHVwIGFuZCB0cmlnZ2VyaW5nIG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb24gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICF0aGlzLmluaXRpYWxpc2VkICYmIHRoaXMuc2V0dXAoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tYXRjaCAmJiB0aGlzLm9wdGlvbnMubWF0Y2goKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29vcmRpbmF0ZXMgdGhlIHVubWF0Y2ggZXZlbnQgZm9yIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb2ZmIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudW5tYXRjaCAmJiB0aGlzLm9wdGlvbnMudW5tYXRjaCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIGhhbmRsZXIgaXMgdG8gYmUgZGVzdHJveWVkLlxuICAgICAgICAgKiBkZWxlZ2F0ZXMgdG8gdGhlIGRlc3Ryb3kgb3IgdW5tYXRjaCBjYWxsYmFja3MsIGRlcGVuZGluZyBvbiBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRlc3Ryb3kgPyB0aGlzLm9wdGlvbnMuZGVzdHJveSgpIDogdGhpcy5vZmYoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyBlcXVhbGl0eSBieSByZWZlcmVuY2UuXG4gICAgICAgICAqIGlmIG9iamVjdCBpcyBzdXBwbGllZCBjb21wYXJlIG9wdGlvbnMsIGlmIGZ1bmN0aW9uLCBjb21wYXJlIG1hdGNoIGNhbGxiYWNrXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBmdW5jdGlvbn0gW3RhcmdldF0gdGhlIHRhcmdldCBmb3IgY29tcGFyaXNvblxuICAgICAgICAgKi9cbiAgICAgICAgZXF1YWxzIDogZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zID09PSB0YXJnZXQgfHwgdGhpcy5vcHRpb25zLm1hdGNoID09PSB0YXJnZXQ7XG4gICAgICAgIH1cblxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyBhIHNpbmdsZSBtZWRpYSBxdWVyeSwgbWFuYWdlcyBpdCdzIHN0YXRlIGFuZCByZWdpc3RlcmVkIGhhbmRsZXJzIGZvciB0aGlzIHF1ZXJ5XG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgdGhlIG1lZGlhIHF1ZXJ5IHN0cmluZ1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzVW5jb25kaXRpb25hbD1mYWxzZV0gd2hldGhlciB0aGUgbWVkaWEgcXVlcnkgc2hvdWxkIHJ1biByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGNvbmRpdGlvbnMgYXJlIG1ldC4gUHJpbWFyaWx5IGZvciBoZWxwaW5nIG9sZGVyIGJyb3dzZXJzIGRlYWwgd2l0aCBtb2JpbGUtZmlyc3QgZGVzaWduXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWVkaWFRdWVyeShxdWVyeSwgaXNVbmNvbmRpdGlvbmFsKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgdGhpcy5pc1VuY29uZGl0aW9uYWwgPSBpc1VuY29uZGl0aW9uYWw7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tcWwgPSBtYXRjaE1lZGlhKHF1ZXJ5KTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbihtcWwpIHtcbiAgICAgICAgICAgIHNlbGYubXFsID0gbXFsO1xuICAgICAgICAgICAgc2VsZi5hc3Nlc3MoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tcWwuYWRkTGlzdGVuZXIodGhpcy5saXN0ZW5lcik7XG4gICAgfVxuICAgIE1lZGlhUXVlcnkucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhZGQgYSBoYW5kbGVyIGZvciB0aGlzIHF1ZXJ5LCB0cmlnZ2VyaW5nIGlmIGFscmVhZHkgYWN0aXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGVyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIubWF0Y2ggY2FsbGJhY2sgZm9yIHdoZW4gcXVlcnkgaXMgYWN0aXZhdGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtoYW5kbGVyLnVubWF0Y2hdIGNhbGxiYWNrIGZvciB3aGVuIHF1ZXJ5IGlzIGRlYWN0aXZhdGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtoYW5kbGVyLnNldHVwXSBjYWxsYmFjayBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbiB3aGVuIGEgcXVlcnkgaGFuZGxlciBpcyByZWdpc3RlcmVkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2hhbmRsZXIuZGVmZXJTZXR1cD1mYWxzZV0gc2hvdWxkIHRoZSBzZXR1cCBjYWxsYmFjayBiZSBkZWZlcnJlZCB1bnRpbCB0aGUgZmlyc3QgdGltZSB0aGUgaGFuZGxlciBpcyBtYXRjaGVkP1xuICAgICAgICAgKi9cbiAgICAgICAgYWRkSGFuZGxlciA6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBxaCA9IG5ldyBRdWVyeUhhbmRsZXIoaGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2gocWgpO1xuXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXMoKSAmJiBxaC5vbigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZW1vdmVzIHRoZSBnaXZlbiBoYW5kbGVyIGZyb20gdGhlIGNvbGxlY3Rpb24sIGFuZCBjYWxscyBpdCdzIGRlc3Ryb3kgbWV0aG9kc1xuICAgICAgICAgKiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3QgfHwgZnVuY3Rpb259IGhhbmRsZXIgdGhlIGhhbmRsZXIgdG8gcmVtb3ZlXG4gICAgICAgICAqL1xuICAgICAgICByZW1vdmVIYW5kbGVyIDogZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgICAgIGVhY2goaGFuZGxlcnMsIGZ1bmN0aW9uKGgsIGkpIHtcbiAgICAgICAgICAgICAgICBpZihoLmVxdWFscyhoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBoLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFoYW5kbGVycy5zcGxpY2UoaSwxKTsgLy9yZW1vdmUgZnJvbSBhcnJheSBhbmQgZXhpdCBlYWNoIGVhcmx5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZSB3aGV0aGVyIHRoZSBtZWRpYSBxdWVyeSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIG1hdGNoXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIG1lZGlhIHF1ZXJ5IGNhbiBiZSBjb25zaWRlcmVkIGEgbWF0Y2gsIGZhbHNlIG90aGVyd2lzZVxuICAgICAgICAgKi9cbiAgICAgICAgbWF0Y2hlcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubXFsLm1hdGNoZXMgfHwgdGhpcy5pc1VuY29uZGl0aW9uYWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFycyBhbGwgaGFuZGxlcnMgYW5kIHVuYmluZHMgZXZlbnRzXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhciA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubXFsLnJlbW92ZUxpc3RlbmVyKHRoaXMubGlzdGVuZXIpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5sZW5ndGggPSAwOyAvL2NsZWFyIGFycmF5XG4gICAgICAgIH0sXG5cbiAgICAgICAgLypcbiAgICAgICAgICogQXNzZXNzZXMgdGhlIHF1ZXJ5LCB0dXJuaW5nIG9uIGFsbCBoYW5kbGVycyBpZiBpdCBtYXRjaGVzLCB0dXJuaW5nIHRoZW0gb2ZmIGlmIGl0IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICovXG4gICAgICAgIGFzc2VzcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXMubWF0Y2hlcygpID8gJ29uJyA6ICdvZmYnO1xuXG4gICAgICAgICAgICBlYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyW2FjdGlvbl0oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgZm9yIHJlZ2lzdHJhdGlvbiBvZiBxdWVyeSBoYW5kbGVycy5cbiAgICAgKiBNYW5hZ2VzIHRoZSBxdWVyeSBoYW5kbGVyJ3Mgc3RhdGUgYW5kIGlzIHJlc3BvbnNpYmxlIGZvciB3aXJpbmcgdXAgYnJvd3NlciBldmVudHNcbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lZGlhUXVlcnlEaXNwYXRjaCAoKSB7XG4gICAgICAgIGlmKCFtYXRjaE1lZGlhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21hdGNoTWVkaWEgbm90IHByZXNlbnQsIGxlZ2FjeSBicm93c2VycyByZXF1aXJlIGEgcG9seWZpbGwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucXVlcmllcyA9IHt9O1xuICAgICAgICB0aGlzLmJyb3dzZXJJc0luY2FwYWJsZSA9ICFtYXRjaE1lZGlhKCdvbmx5IGFsbCcpLm1hdGNoZXM7XG4gICAgfVxuXG4gICAgTWVkaWFRdWVyeURpc3BhdGNoLnByb3RvdHlwZSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgaGFuZGxlciBmb3IgdGhlIGdpdmVuIG1lZGlhIHF1ZXJ5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxIHRoZSBtZWRpYSBxdWVyeVxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBBcnJheSB8fCBGdW5jdGlvbn0gb3B0aW9ucyBlaXRoZXIgYSBzaW5nbGUgcXVlcnkgaGFuZGxlciBvYmplY3QsIGEgZnVuY3Rpb24sIG9yIGFuIGFycmF5IG9mIHF1ZXJ5IGhhbmRsZXJzXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMubWF0Y2ggZmlyZWQgd2hlbiBxdWVyeSBtYXRjaGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtvcHRpb25zLnVubWF0Y2hdIGZpcmVkIHdoZW4gYSBxdWVyeSBpcyBubyBsb25nZXIgbWF0Y2hlZFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy5zZXR1cF0gZmlyZWQgd2hlbiBoYW5kbGVyIGZpcnN0IHRyaWdnZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmVyU2V0dXA9ZmFsc2VdIHdoZXRoZXIgc2V0dXAgc2hvdWxkIGJlIHJ1biBpbW1lZGlhdGVseSBvciBkZWZlcnJlZCB1bnRpbCBxdWVyeSBpcyBmaXJzdCBtYXRjaGVkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3VsZERlZ3JhZGU9ZmFsc2VdIHdoZXRoZXIgdGhpcyBwYXJ0aWN1bGFyIG1lZGlhIHF1ZXJ5IHNob3VsZCBhbHdheXMgcnVuIG9uIGluY2FwYWJsZSBicm93c2Vyc1xuICAgICAgICAgKi9cbiAgICAgICAgcmVnaXN0ZXIgOiBmdW5jdGlvbihxLCBvcHRpb25zLCBzaG91bGREZWdyYWRlKSB7XG4gICAgICAgICAgICB2YXIgcXVlcmllcyAgICAgICAgID0gdGhpcy5xdWVyaWVzLFxuICAgICAgICAgICAgICAgIGlzVW5jb25kaXRpb25hbCA9IHNob3VsZERlZ3JhZGUgJiYgdGhpcy5icm93c2VySXNJbmNhcGFibGU7XG5cbiAgICAgICAgICAgIGlmKCFxdWVyaWVzW3FdKSB7XG4gICAgICAgICAgICAgICAgcXVlcmllc1txXSA9IG5ldyBNZWRpYVF1ZXJ5KHEsIGlzVW5jb25kaXRpb25hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vbm9ybWFsaXNlIHRvIG9iamVjdCBpbiBhbiBhcnJheVxuICAgICAgICAgICAgaWYoaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7IG1hdGNoIDogb3B0aW9ucyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIWlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gW29wdGlvbnNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWFjaChvcHRpb25zLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgcXVlcmllc1txXS5hZGRIYW5kbGVyKGhhbmRsZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB1bnJlZ2lzdGVycyBhIHF1ZXJ5IGFuZCBhbGwgaXQncyBoYW5kbGVycywgb3IgYSBzcGVjaWZpYyBoYW5kbGVyIGZvciBhIHF1ZXJ5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxIHRoZSBtZWRpYSBxdWVyeSB0byB0YXJnZXRcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3QgfHwgZnVuY3Rpb259IFtoYW5kbGVyXSBzcGVjaWZpYyBoYW5kbGVyIHRvIHVucmVnaXN0ZXJcbiAgICAgICAgICovXG4gICAgICAgIHVucmVnaXN0ZXIgOiBmdW5jdGlvbihxLCBoYW5kbGVyKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJpZXNbcV07XG5cbiAgICAgICAgICAgIGlmKHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgaWYoaGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeS5yZW1vdmVIYW5kbGVyKGhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVlcmllc1txXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcblxuXHRyZXR1cm4gbmV3IE1lZGlhUXVlcnlEaXNwYXRjaCgpO1xuXG59KSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2VucXVpcmUuanMvZGlzdC9lbnF1aXJlLmpzXG4vLyBtb2R1bGUgaWQgPSAxNzRcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNSBKZWQgV2F0c29uLlxuICBCYXNlZCBvbiBjb2RlIHRoYXQgaXMgQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgY2FuVXNlRE9NID0gISEoXG5cdFx0dHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0XHR3aW5kb3cuZG9jdW1lbnQgJiZcblx0XHR3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudFxuXHQpO1xuXG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHtcblxuXHRcdGNhblVzZURPTTogY2FuVXNlRE9NLFxuXG5cdFx0Y2FuVXNlV29ya2VyczogdHlwZW9mIFdvcmtlciAhPT0gJ3VuZGVmaW5lZCcsXG5cblx0XHRjYW5Vc2VFdmVudExpc3RlbmVyczpcblx0XHRcdGNhblVzZURPTSAmJiAhISh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCB3aW5kb3cuYXR0YWNoRXZlbnQpLFxuXG5cdFx0Y2FuVXNlVmlld3BvcnQ6IGNhblVzZURPTSAmJiAhIXdpbmRvdy5zY3JlZW5cblxuXHR9O1xuXG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBFeGVjdXRpb25FbnZpcm9ubWVudDtcblx0XHR9KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gRXhlY3V0aW9uRW52aXJvbm1lbnQ7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LkV4ZWN1dGlvbkVudmlyb25tZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQ7XG5cdH1cblxufSgpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9leGVudi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2llZWU3NTQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIE5FV1RBQiA9ICdfYmxhbmsnO1xuXG52YXIgT3V0Ym91bmRMaW5rID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ091dGJvdW5kTGluaycsXG4gIHByb3BUeXBlczoge1xuICAgIGV2ZW50TGFiZWw6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICB9LFxuICBzdGF0aWNzOiB7XG4gICAgdHJhY2tMaW5rOiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2dhIHRyYWNraW5nIG5vdCBlbmFibGVkJyk7XG4gICAgfVxuICB9LFxuICBoYW5kbGVDbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZXZlbnRNZXRhID0geyBsYWJlbDogcHJvcHMuZXZlbnRMYWJlbCB9O1xuICAgIE91dGJvdW5kTGluay50cmFja0xpbmsoZXZlbnRNZXRhLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocHJvcHMudGFyZ2V0ID09PSBORVdUQUIpIHtcbiAgICAgICAgd2luZG93Lm9wZW4ocHJvcHMudG8sIE5FV1RBQik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHByb3BzLnRvO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHByb3BzLm9uQ2xpY2spIHtcbiAgICAgIHByb3BzLm9uQ2xpY2soZSk7XG4gICAgfVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgdGhpcy5wcm9wcywge1xuICAgICAgaHJlZjogdGhpcy5wcm9wcy50byxcbiAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2tcbiAgICB9KTtcbiAgICBkZWxldGUgcHJvcHMuZXZlbnRMYWJlbDtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnYScsIHByb3BzKTtcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gT3V0Ym91bmRMaW5rO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWdhL3NyYy9jb21wb25lbnRzL091dGJvdW5kTGluay5qc1xuLy8gbW9kdWxlIGlkID0gMjcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIi8qKlxuICogUmVhY3QgR29vZ2xlIEFuYWx5dGljcyBNb2R1bGVcbiAqXG4gKiBAcGFja2FnZSByZWFjdC1nYVxuICogQGF1dGhvciAgQWRhbSBMb2Z0aW5nIDxhZGFtQG1vemlsbGFmb3VuZGF0aW9uLm9yZz5cbiAqICAgICAgICAgIEF0dWwgVmFybWEgPGF0dWxAbW96aWxsYWZvdW5kYXRpb24ub3JnPlxuICovXG5cbi8qKlxuICogVXRpbGl0aWVzXG4gKi9cbnZhciBmb3JtYXQgPSByZXF1aXJlKCcuL3V0aWxzL2Zvcm1hdCcpO1xudmFyIHJlbW92ZUxlYWRpbmdTbGFzaCA9IHJlcXVpcmUoJy4vdXRpbHMvcmVtb3ZlTGVhZGluZ1NsYXNoJyk7XG52YXIgdHJpbSA9IHJlcXVpcmUoJy4vdXRpbHMvdHJpbScpO1xuXG52YXIgd2FybiA9IHJlcXVpcmUoJy4vdXRpbHMvY29uc29sZS93YXJuJyk7XG52YXIgbG9nID0gcmVxdWlyZSgnLi91dGlscy9jb25zb2xlL2xvZycpO1xuXG52YXIgX2RlYnVnID0gZmFsc2U7XG52YXIgX3RpdGxlQ2FzZSA9IHRydWU7XG5cbnZhciBfZm9ybWF0ID0gZnVuY3Rpb24gKHMpIHtcbiAgcmV0dXJuIGZvcm1hdChzLCBfdGl0bGVDYXNlKTtcbn07XG5cbnZhciBSZWFjdEdBID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoZ2FUcmFja2luZ0lELCBvcHRpb25zKSB7XG4gICAgaWYgKCFnYVRyYWNraW5nSUQpIHtcbiAgICAgIHdhcm4oJ2dhVHJhY2tpbmdJRCBpcyByZXF1aXJlZCBpbiBpbml0aWFsaXplKCknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMuZGVidWcgJiYgb3B0aW9ucy5kZWJ1ZyA9PT0gdHJ1ZSkge1xuICAgICAgICBfZGVidWcgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy50aXRsZUNhc2UgPT09IGZhbHNlKSB7XG4gICAgICAgIF90aXRsZUNhc2UgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvXG4gICAgLy8ganNjczpkaXNhYmxlXG4gICAgKGZ1bmN0aW9uIChpLCBzLCBvLCBnLCByLCBhLCBtKSB7XG4gICAgICBpWydHb29nbGVBbmFseXRpY3NPYmplY3QnXSA9IHI7XG4gICAgICBpW3JdID0gaVtyXSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIChpW3JdLnEgPSBpW3JdLnEgfHwgW10pLnB1c2goYXJndW1lbnRzKTtcbiAgICAgIH0sIGlbcl0ubCA9IDEgKiBuZXcgRGF0ZSgpO1xuICAgICAgYSA9IHMuY3JlYXRlRWxlbWVudChvKSxcbiAgICAgICAgICBtID0gcy5nZXRFbGVtZW50c0J5VGFnTmFtZShvKVswXTtcbiAgICAgIGEuYXN5bmMgPSAxO1xuICAgICAgYS5zcmMgPSBnO1xuICAgICAgbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLCBtKTtcbiAgICB9KSh3aW5kb3csIGRvY3VtZW50LCAnc2NyaXB0JywgJ2h0dHBzOi8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qcycsICdnYScpO1xuICAgIC8vIGpzY3M6ZW5hYmxlXG5cbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdhT3B0aW9ucykge1xuICAgICAgZ2EoJ2NyZWF0ZScsIGdhVHJhY2tpbmdJRCwgb3B0aW9ucy5nYU9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnYSgnY3JlYXRlJywgZ2FUcmFja2luZ0lELCAnYXV0bycpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogZ2E6XG4gICAqIFJldHVybnMgdGhlIG9yaWdpbmFsIEdBIG9iamVjdC5cbiAgICovXG4gIGdhOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBnYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdhcmd1bWVudHNcXCcpOycpO1xuICAgICAgICBsb2coJ3dpdGggYXJndW1lbnRzOiAnICsgSlNPTi5zdHJpbmdpZnkoW10uc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIGdhO1xuICB9LFxuXG4gIC8qKlxuICAgKiBzZXQ6XG4gICAqIEdBIHRyYWNrZXIgc2V0IG1ldGhvZFxuICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGRzT2JqZWN0IC0gYSBmaWVsZC92YWx1ZSBwYWlyIG9yIGEgZ3JvdXAgb2YgZmllbGQvdmFsdWUgcGFpcnMgb24gdGhlIHRyYWNrZXJcbiAgICovXG4gIHNldDogZnVuY3Rpb24gKGZpZWxkc09iamVjdCkge1xuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmICghZmllbGRzT2JqZWN0KSB7XG4gICAgICAgIHdhcm4oJ2BmaWVsZHNPYmplY3RgIGlzIHJlcXVpcmVkIGluIC5zZXQoKScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZmllbGRzT2JqZWN0ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB3YXJuKCdFeHBlY3RlZCBgZmllbGRzT2JqZWN0YCBhcmcgdG8gYmUgYW4gT2JqZWN0Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGZpZWxkc09iamVjdCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHdhcm4oJ2VtcHR5IGBmaWVsZHNPYmplY3RgIGdpdmVuIHRvIC5zZXQoKScpO1xuICAgICAgfVxuXG4gICAgICBnYSgnc2V0JywgZmllbGRzT2JqZWN0KTtcblxuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdzZXRcXCcsIGZpZWxkc09iamVjdCk7Jyk7XG4gICAgICAgIGxvZygnd2l0aCBmaWVsZHNPYmplY3Q6ICcgKyBKU09OLnN0cmluZ2lmeShmaWVsZHNPYmplY3QpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIHNlbmQ6XG4gICAqIENsb25lIG9mIHRoZSBsb3cgbGV2ZWwgYGdhLnNlbmRgIG1ldGhvZFxuICAgKiBXQVJOSU5HOiBObyB2YWxpZGF0aW9ucyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhpc1xuICAgKiBAcGFyYW0gIHtPYmplY3R9IGZpZWxkT2JqZWN0IC0gZmllbGQgb2JqZWN0IGZvciB0cmFja2luZyBkaWZmZXJlbnQgYW5hbHl0aWNzXG4gICAqL1xuICBzZW5kOiBmdW5jdGlvbiAoZmllbGRPYmplY3QpIHtcbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBnYSgnc2VuZCcsIGZpZWxkT2JqZWN0KTtcblxuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdzZW5kXFwnLCBmaWVsZE9iamVjdCk7Jyk7XG4gICAgICAgIGxvZygnd2l0aCBmaWVsZE9iamVjdDogJyArIEpTT04uc3RyaW5naWZ5KGZpZWxkT2JqZWN0KSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBwYWdldmlldzpcbiAgICogQmFzaWMgR0EgcGFnZXZpZXcgdHJhY2tpbmdcbiAgICogQHBhcmFtICB7U3RyaW5nfSBwYXRoIC0gdGhlIGN1cnJlbnQgcGFnZSBwYWdlIGUuZy4gJy9hYm91dCdcbiAgICovXG4gIHBhZ2V2aWV3OiBmdW5jdGlvbiAocGF0aCkge1xuICAgIGlmICghcGF0aCkge1xuICAgICAgd2FybigncGF0aCBpcyByZXF1aXJlZCBpbiAucGFnZXZpZXcoKScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHBhdGggPSB0cmltKHBhdGgpO1xuICAgIGlmIChwYXRoID09PSAnJykge1xuICAgICAgd2FybigncGF0aCBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nIGluIC5wYWdldmlldygpJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZ2EoJ3NlbmQnLCAncGFnZXZpZXcnLCBwYXRoKTtcblxuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdzZW5kXFwnLCBcXCdwYWdldmlld1xcJywgcGF0aCk7Jyk7XG4gICAgICAgIGxvZygnd2l0aCBwYXRoOiAnICsgcGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBtb2RhbHZpZXc6XG4gICAqIGEgcHJveHkgdG8gYmFzaWMgR0EgcGFnZXZpZXcgdHJhY2tpbmcgdG8gY29uc2lzdGVudGx5IHRyYWNrXG4gICAqIG1vZGFsIHZpZXdzIHRoYXQgYXJlIGFuIGVxdWl2YWxlbnQgVVggdG8gYSB0cmFkaXRpb25hbCBwYWdldmlld1xuICAgKiBAcGFyYW0gIHtTdHJpbmd9IG1vZGFsTmFtZSBlLmcuICdhZGQtb3ItZWRpdC1jbHViJ1xuICAgKi9cbiAgbW9kYWx2aWV3OiBmdW5jdGlvbiAobW9kYWxOYW1lKSB7XG4gICAgaWYgKCFtb2RhbE5hbWUpIHtcbiAgICAgIHdhcm4oJ21vZGFsTmFtZSBpcyByZXF1aXJlZCBpbiAubW9kYWx2aWV3KG1vZGFsTmFtZSknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBtb2RhbE5hbWUgPSB0cmltKG1vZGFsTmFtZSk7XG4gICAgbW9kYWxOYW1lID0gcmVtb3ZlTGVhZGluZ1NsYXNoKG1vZGFsTmFtZSk7XG5cbiAgICBpZiAobW9kYWxOYW1lID09PSAnJykge1xuICAgICAgd2FybignbW9kYWxOYW1lIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmcgb3IgYSBzaW5nbGUgLyBpbiAubW9kYWx2aWV3KCknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBtb2RhbE5hbWUgPSB0cmltKG1vZGFsTmFtZSk7XG4gICAgICB2YXIgcGF0aCA9ICcvbW9kYWwvJyArIG1vZGFsTmFtZTtcbiAgICAgIGdhKCdzZW5kJywgJ3BhZ2V2aWV3JywgcGF0aCk7XG5cbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnc2VuZFxcJywgXFwncGFnZXZpZXdcXCcsIHBhdGgpOycpO1xuICAgICAgICBsb2coJ3dpdGggcGF0aDogJyArIHBhdGgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogdGltaW5nOlxuICAgKiBHQSB0aW1pbmdcbiAgICogQHBhcmFtIGFyZ3MuY2F0ZWdvcnkge1N0cmluZ30gcmVxdWlyZWRcbiAgICogQHBhcmFtIGFyZ3MudmFyaWFibGUge1N0cmluZ30gcmVxdWlyZWRcbiAgICogQHBhcmFtIGFyZ3MudmFsdWUgIHtJbnR9ICByZXF1aXJlZFxuICAgKiBAcGFyYW0gYXJncy5sYWJlbCAge1N0cmluZ30gcmVxdWlyZWRcbiAgICovXG4gIHRpbWluZzogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuY2F0ZWdvcnkgfHwgIWFyZ3MudmFyaWFibGVcbiAgICAgICAgICB8fCAhYXJncy52YWx1ZSB8fCB0eXBlb2YgYXJncy52YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2FybignYXJncy5jYXRlZ29yeSwgYXJncy52YXJpYWJsZSAnICtcbiAgICAgICAgICAgICAgJ0FORCBhcmdzLnZhbHVlIGFyZSByZXF1aXJlZCBpbiB0aW1pbmcoKSAnICtcbiAgICAgICAgICAgICAgJ0FORCBhcmdzLnZhbHVlIGhhcyB0byBiZSBhIG51bWJlcicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vUmVxdWlyZWQgRmllbGRzXG4gICAgICB2YXIgZmllbGRPYmplY3QgPSB7XG4gICAgICAgIGhpdFR5cGU6ICd0aW1pbmcnLFxuICAgICAgICB0aW1pbmdDYXRlZ29yeTogX2Zvcm1hdChhcmdzLmNhdGVnb3J5KSxcbiAgICAgICAgdGltaW5nVmFyOiBfZm9ybWF0KGFyZ3MudmFyaWFibGUpLFxuICAgICAgICB0aW1pbmdWYWx1ZTogYXJncy52YWx1ZVxuICAgICAgfTtcblxuICAgICAgaWYgKGFyZ3MubGFiZWwpIHtcbiAgICAgICAgZmllbGRPYmplY3QudGltaW5nTGFiZWwgPSBfZm9ybWF0KGFyZ3MubGFiZWwpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNlbmQoZmllbGRPYmplY3QpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogZXZlbnQ6XG4gICAqIEdBIGV2ZW50IHRyYWNraW5nXG4gICAqIEBwYXJhbSBhcmdzLmNhdGVnb3J5IHtTdHJpbmd9IHJlcXVpcmVkXG4gICAqIEBwYXJhbSBhcmdzLmFjdGlvbiB7U3RyaW5nfSByZXF1aXJlZFxuICAgKiBAcGFyYW0gYXJncy5sYWJlbCB7U3RyaW5nfSBvcHRpb25hbFxuICAgKiBAcGFyYW0gYXJncy52YWx1ZSB7SW50fSBvcHRpb25hbFxuICAgKiBAcGFyYW0gYXJncy5ub25JbnRlcmFjdGlvbiB7Ym9vbGVhbn0gb3B0aW9uYWxcbiAgICovXG4gIGV2ZW50OiBmdW5jdGlvbiAoYXJncykge1xuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcblxuICAgICAgLy8gU2ltcGxlIFZhbGlkYXRpb25cbiAgICAgIGlmICghYXJncyB8fCAhYXJncy5jYXRlZ29yeSB8fCAhYXJncy5hY3Rpb24pIHtcbiAgICAgICAgd2FybignYXJncy5jYXRlZ29yeSBBTkQgYXJncy5hY3Rpb24gYXJlIHJlcXVpcmVkIGluIGV2ZW50KCknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXF1aXJlZCBGaWVsZHNcbiAgICAgIHZhciBmaWVsZE9iamVjdCA9IHtcbiAgICAgICAgaGl0VHlwZTogJ2V2ZW50JyxcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogX2Zvcm1hdChhcmdzLmNhdGVnb3J5KSxcbiAgICAgICAgZXZlbnRBY3Rpb246IF9mb3JtYXQoYXJncy5hY3Rpb24pXG4gICAgICB9O1xuXG4gICAgICAvLyBPcHRpb25hbCBGaWVsZHNcbiAgICAgIGlmIChhcmdzLmxhYmVsKSB7XG4gICAgICAgIGZpZWxkT2JqZWN0LmV2ZW50TGFiZWwgPSBfZm9ybWF0KGFyZ3MubGFiZWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXJncy52YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3MudmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgd2FybignRXhwZWN0ZWQgYGFyZ3MudmFsdWVgIGFyZyB0byBiZSBhIE51bWJlci4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWVsZE9iamVjdC5ldmVudFZhbHVlID0gYXJncy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYXJncy5ub25JbnRlcmFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3Mubm9uSW50ZXJhY3Rpb24gIT09ICdib29sZWFuJykge1xuICAgICAgICAgIHdhcm4oJ2BhcmdzLm5vbkludGVyYWN0aW9uYCBtdXN0IGJlIGEgYm9vbGVhbi4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWVsZE9iamVjdC5ub25JbnRlcmFjdGlvbiA9IGFyZ3Mubm9uSW50ZXJhY3Rpb247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFyZ3MudHJhbnNwb3J0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJncy50cmFuc3BvcnQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgd2FybignYGFyZ3MudHJhbnNwb3J0YCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChbJ2JlYWNvbicsICd4aHInLCAnaW1hZ2UnXS5pbmRleE9mKGFyZ3MudHJhbnNwb3J0KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHdhcm4oJ2BhcmdzLnRyYW5zcG9ydGAgbXVzdCBiZSBlaXRoZXIgb25lIG9mIHRoZXNlIHZhbHVlczogYGJlYWNvbmAsIGB4aHJgIG9yIGBpbWFnZWAnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmaWVsZE9iamVjdC50cmFuc3BvcnQgPSBhcmdzLnRyYW5zcG9ydDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTZW5kIHRvIEdBXG4gICAgICB0aGlzLnNlbmQoZmllbGRPYmplY3QpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogZXhjZXB0aW9uOlxuICAgKiBHQSBleGNlcHRpb24gdHJhY2tpbmdcbiAgICogQHBhcmFtIGFyZ3MuZGVzY3JpcHRpb24ge1N0cmluZ30gb3B0aW9uYWxcbiAgICogQHBhcmFtIGFyZ3MuZmF0YWwge2Jvb2xlYW59IG9wdGlvbmFsXG4gICAqL1xuICBleGNlcHRpb246IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAvLyBSZXF1aXJlZCBGaWVsZHNcbiAgICAgIHZhciBmaWVsZE9iamVjdCA9IHtcbiAgICAgICAgaGl0VHlwZTogJ2V4Y2VwdGlvbidcbiAgICAgIH07XG5cbiAgICAgIC8vIE9wdGlvbmFsIEZpZWxkc1xuICAgICAgaWYgKGFyZ3MuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgZmllbGRPYmplY3QuZXhEZXNjcmlwdGlvbiA9IF9mb3JtYXQoYXJncy5kZXNjcmlwdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgYXJncy5mYXRhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzLmZhdGFsICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICB3YXJuKCdgYXJncy5mYXRhbGAgbXVzdCBiZSBhIGJvb2xlYW4uJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmllbGRPYmplY3QuZXhGYXRhbCA9IGFyZ3MuZmF0YWw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCB0byBHQVxuICAgICAgdGhpcy5zZW5kKGZpZWxkT2JqZWN0KTtcbiAgICB9XG4gIH0sXG5cbiAgcGx1Z2luOiB7XG4gICAgLyoqXG4gICAgICogcmVxdWlyZTpcbiAgICAgKiBHQSByZXF1aXJlcyBhIHBsdWdpblxuICAgICAqIEBwYXJhbSBuYW1lIHtTdHJpbmd9IGUuZy4gJ2Vjb21tZXJjZScgb3IgJ215cGx1Z2luJ1xuICAgICAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IG9wdGlvbmFsIGUuZyB7cGF0aDogJy9sb2cnLCBkZWJ1ZzogdHJ1ZX1cbiAgICAgKi9cbiAgICByZXF1aXJlOiBmdW5jdGlvbiAobmFtZSwgb3B0aW9ucykge1xuICAgICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAgIC8vIFJlcXVpcmVkIEZpZWxkc1xuICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICB3YXJuKCdgbmFtZWAgaXMgcmVxdWlyZWQgaW4gLnJlcXVpcmUoKScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG5hbWUgPSB0cmltKG5hbWUpO1xuICAgICAgICBpZiAobmFtZSA9PT0gJycpIHtcbiAgICAgICAgICB3YXJuKCdgbmFtZWAgY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZyBpbiAucmVxdWlyZSgpJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3B0aW9uYWwgRmllbGRzXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgd2FybignRXhwZWN0ZWQgYG9wdGlvbnNgIGFyZyB0byBiZSBhbiBPYmplY3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMob3B0aW9ucykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB3YXJuKCdFbXB0eSBgb3B0aW9uc2AgZ2l2ZW4gdG8gLnJlcXVpcmUoKScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGdhKCdyZXF1aXJlJywgbmFtZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdyZXF1aXJlXFwnLCBcXCcnICsgbmFtZSArICdcXCcsICcgKyBKU09OLnN0cmluZ2lmeShvcHRpb25zKSArICcpOycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnYSgncmVxdWlyZScsIG5hbWUpO1xuXG4gICAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwncmVxdWlyZVxcJywgXFwnJyArIG5hbWUgKyAnXFwnKTsnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZXhlY3V0ZTpcbiAgICAgKiBHQSBleGVjdXRlIGFjdGlvbiBmb3IgcGx1Z2luXG4gICAgICogVGFrZXMgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50c1xuICAgICAqIEBwYXJhbSBwbHVnaW5OYW1lIHtTdHJpbmd9IGUuZy4gJ2Vjb21tZXJjZScgb3IgJ215cGx1Z2luJ1xuICAgICAqIEBwYXJhbSBhY3Rpb24ge1N0cmluZ30gZS5nLiAnYWRkSXRlbScgb3IgJ215Q3VzdG9tQWN0aW9uJ1xuICAgICAqIEBwYXJhbSBhY3Rpb25UeXBlIHtTdHJpbmd9IG9wdGlvbmFsIGUuZy4gJ2RldGFpbCdcbiAgICAgKiBAcGFyYW0gcGF5bG9hZCB7T2JqZWN0fSBvcHRpb25hbCBlLmcgeyBpZDogJzF4NWUnLCBuYW1lIDogJ015IHByb2R1Y3QgdG8gdHJhY2snIH1cbiAgICAgKi9cbiAgICBleGVjdXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICAgIHZhciBwbHVnaW5OYW1lID0gYXJnc1swXTtcbiAgICAgIHZhciBhY3Rpb24gPSBhcmdzWzFdO1xuICAgICAgdmFyIHBheWxvYWQ7XG4gICAgICB2YXIgYWN0aW9uVHlwZTtcblxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIHBheWxvYWQgPSBhcmdzWzJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aW9uVHlwZSA9IGFyZ3NbMl07XG4gICAgICAgIHBheWxvYWQgPSBhcmdzWzNdO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGx1Z2luTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB3YXJuKCdFeHBlY3RlZCBgcGx1Z2luTmFtZWAgYXJnIHRvIGJlIGEgU3RyaW5nLicpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhY3Rpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgd2FybignRXhwZWN0ZWQgYGFjdGlvbmAgYXJnIHRvIGJlIGEgU3RyaW5nLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBjb21tYW5kID0gcGx1Z2luTmFtZSArICc6JyArIGFjdGlvbjtcbiAgICAgICAgICBwYXlsb2FkID0gcGF5bG9hZCB8fCBudWxsO1xuICAgICAgICAgIGlmIChhY3Rpb25UeXBlICYmIHBheWxvYWQpIHtcbiAgICAgICAgICAgIGdhKGNvbW1hbmQsIGFjdGlvblR5cGUsIHBheWxvYWQpO1xuICAgICAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCcnICsgY29tbWFuZCArICdcXCcpOycpO1xuICAgICAgICAgICAgICBsb2coJ2FjdGlvblR5cGU6IFwiJyArIGFjdGlvblR5cGUgKyAnXCIgd2l0aCBwYXlsb2FkOiAnICsgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAocGF5bG9hZCkge1xuICAgICAgICAgICAgZ2EoY29tbWFuZCwgcGF5bG9hZCk7XG4gICAgICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJycgKyBjb21tYW5kICsgJ1xcJyk7Jyk7XG4gICAgICAgICAgICAgIGxvZygnd2l0aCBwYXlsb2FkOiAnICsgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnYShjb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnJyArIGNvbW1hbmQgKyAnXFwnKTsnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogb3V0Ym91bmRMaW5rOlxuICAgKiBHQSBvdXRib3VuZExpbmsgdHJhY2tpbmdcbiAgICogQHBhcmFtIGFyZ3MubGFiZWwge1N0cmluZ30gZS5nLiB1cmwsIG9yICdDcmVhdGUgYW4gQWNjb3VudCdcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gaGl0Q2FsbGJhY2sgLSBDYWxsZWQgYWZ0ZXIgcHJvY2Vzc2luZyBhIGhpdC5cbiAgICovXG4gIG91dGJvdW5kTGluazogZnVuY3Rpb24gKGFyZ3MsIGhpdENhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBoaXRDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgd2FybignaGl0Q2FsbGJhY2sgZnVuY3Rpb24gaXMgcmVxdWlyZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgIC8vIFNpbXBsZSBWYWxpZGF0aW9uXG4gICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubGFiZWwpIHtcbiAgICAgICAgd2FybignYXJncy5sYWJlbCBpcyByZXF1aXJlZCBpbiBvdXRib3VuZExpbmsoKScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFJlcXVpcmVkIEZpZWxkc1xuICAgICAgdmFyIGZpZWxkT2JqZWN0ID0ge1xuICAgICAgICBoaXRUeXBlOiAnZXZlbnQnLFxuICAgICAgICBldmVudENhdGVnb3J5OiAnT3V0Ym91bmQnLFxuICAgICAgICBldmVudEFjdGlvbjogJ0NsaWNrJyxcbiAgICAgICAgZXZlbnRMYWJlbDogX2Zvcm1hdChhcmdzLmxhYmVsKVxuICAgICAgfTtcblxuICAgICAgdmFyIHNhZmV0eUNhbGxiYWNrQ2FsbGVkID0gZmFsc2U7XG4gICAgICB2YXIgc2FmZXR5Q2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyBhIGRlbGF5ZWQgcmVzcG9uc2UgZnJvbSBHQVxuICAgICAgICAvLyBjYXVzaW5nIGhpdENhbGxiYWNrIGZyb20gYmVpbmcgZmlyZWQgdHdpY2VcbiAgICAgICAgc2FmZXR5Q2FsbGJhY2tDYWxsZWQgPSB0cnVlO1xuXG4gICAgICAgIGhpdENhbGxiYWNrKCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBVc2luZyBhIHRpbWVvdXQgdG8gZW5zdXJlIHRoZSBleGVjdXRpb24gb2YgY3JpdGljYWwgYXBwbGljYXRpb24gY29kZVxuICAgICAgLy8gaW4gdGhlIGNhc2Ugd2hlbiB0aGUgR0Egc2VydmVyIG1pZ2h0IGJlIGRvd25cbiAgICAgIC8vIG9yIGFuIGFkIGJsb2NrZXIgcHJldmVudHMgc2VuZGluZyB0aGUgZGF0YVxuXG4gICAgICAvLyByZWdpc3RlciBzYWZldHkgbmV0IHRpbWVvdXQ6XG4gICAgICB2YXIgdCA9IHNldFRpbWVvdXQoc2FmZXR5Q2FsbGJhY2ssIDI1MCk7XG5cbiAgICAgIHZhciBjbGVhcmFibGVDYWxsYmFja0ZvckdBID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgIGlmICghc2FmZXR5Q2FsbGJhY2tDYWxsZWQpIHtcbiAgICAgICAgICBoaXRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBmaWVsZE9iamVjdC5oaXRDYWxsYmFjayA9IGNsZWFyYWJsZUNhbGxiYWNrRm9yR0E7XG5cbiAgICAgIC8vIFNlbmQgdG8gR0FcbiAgICAgIHRoaXMuc2VuZChmaWVsZE9iamVjdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGlmIGdhIGlzIG5vdCBkZWZpbmVkLCByZXR1cm4gdGhlIGNhbGxiYWNrIHNvIHRoZSBhcHBsaWNhdGlvblxuICAgICAgLy8gY29udGludWVzIHRvIHdvcmsgYXMgZXhwZWN0ZWRcbiAgICAgIHNldFRpbWVvdXQoaGl0Q2FsbGJhY2ssIDApO1xuICAgIH1cbiAgfVxufTtcblxudmFyIE91dGJvdW5kTGluayA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9PdXRib3VuZExpbmsnKTtcbk91dGJvdW5kTGluay5vcmlnVHJhY2tMaW5rID0gT3V0Ym91bmRMaW5rLnRyYWNrTGluaztcbk91dGJvdW5kTGluay50cmFja0xpbmsgPSBSZWFjdEdBLm91dGJvdW5kTGluay5iaW5kKFJlYWN0R0EpO1xuUmVhY3RHQS5PdXRib3VuZExpbmsgPSBPdXRib3VuZExpbms7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RHQTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1nYS9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJmdW5jdGlvbiBsb2cocykge1xuICBjb25zb2xlLmluZm8oJ1tyZWFjdC1nYV0nLCBzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsb2c7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtZ2Evc3JjL3V0aWxzL2NvbnNvbGUvbG9nLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwidmFyIG1pZ2h0QmVFbWFpbCA9IHJlcXVpcmUoJy4vbWlnaHRCZUVtYWlsJyk7XG52YXIgdG9UaXRsZUNhc2UgPSByZXF1aXJlKCcuL3RvVGl0bGVDYXNlJyk7XG52YXIgd2FybiA9IHJlcXVpcmUoJy4vY29uc29sZS93YXJuJyk7XG5cbnZhciBfcmVkYWN0ZWQgPSAnUkVEQUNURUQgKFBvdGVudGlhbCBFbWFpbCBBZGRyZXNzKSc7XG5cbmZ1bmN0aW9uIGZvcm1hdChzLCB0aXRsZUNhc2UpIHtcbiAgaWYgKG1pZ2h0QmVFbWFpbChzKSkge1xuICAgIHdhcm4oJ1RoaXMgYXJnIGxvb2tzIGxpa2UgYW4gZW1haWwgYWRkcmVzcywgcmVkYWN0aW5nLicpO1xuICAgIHJldHVybiBfcmVkYWN0ZWQ7XG4gIH1cblxuICBpZiAodGl0bGVDYXNlKSB7XG4gICAgcmV0dXJuIHRvVGl0bGVDYXNlKHMpO1xuICB9XG5cbiAgcmV0dXJuIHM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZm9ybWF0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWdhL3NyYy91dGlscy9mb3JtYXQuanNcbi8vIG1vZHVsZSBpZCA9IDI3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIvLyBTZWUgaWYgcyBjb3VsZCBiZSBhbiBlbWFpbCBhZGRyZXNzLiBXZSBkb24ndCB3YW50IHRvIHNlbmQgcGVyc29uYWwgZGF0YSBsaWtlIGVtYWlsLlxuLy8gaHR0cHM6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vYW5hbHl0aWNzL2Fuc3dlci8yNzk1OTgzP2hsPWVuXG5mdW5jdGlvbiBtaWdodEJlRW1haWwocykge1xuICAvLyBUaGVyZSdzIG5vIHBvaW50IHRyeWluZyB0byB2YWxpZGF0ZSByZmM4MjIgZnVsbHksIGp1c3QgbG9vayBmb3IgLi4uQC4uLlxuICByZXR1cm4gKC9bXkBdK0BbXkBdKy8pLnRlc3Qocyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWlnaHRCZUVtYWlsO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWdhL3NyYy91dGlscy9taWdodEJlRW1haWwuanNcbi8vIG1vZHVsZSBpZCA9IDI3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJmdW5jdGlvbiByZW1vdmVMZWFkaW5nU2xhc2gocykge1xuICBpZiAocy5zdWJzdHJpbmcoMCwgMSkgPT09ICcvJykge1xuICAgIHMgPSBzLnN1YnN0cmluZygxKTtcbiAgfVxuXG4gIHJldHVybiBzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlbW92ZUxlYWRpbmdTbGFzaDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvcmVtb3ZlTGVhZGluZ1NsYXNoLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiLyoqXG4gKiBUbyBUaXRsZSBDYXNlIDIuMSAtIGh0dHA6Ly9pbmRpdmlkZWQuY29tL2NvZGUvdG8tdGl0bGUtY2FzZS9cbiAqIENvcHlyaWdodCAyMDA4LTIwMTMgRGF2aWQgR291Y2guIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb3VjaC90by10aXRsZS1jYXNlXG4gKi9cblxudmFyIHRyaW0gPSByZXF1aXJlKCcuL3RyaW0nKTtcblxuZnVuY3Rpb24gdG9UaXRsZUNhc2Uocykge1xuICB2YXIgc21hbGxXb3JkcyA9IC9eKGF8YW58YW5kfGFzfGF0fGJ1dHxieXxlbnxmb3J8aWZ8aW58bm9yfG9mfG9ufG9yfHBlcnx0aGV8dG98dnM/XFwuP3x2aWEpJC9pO1xuICBzID0gdHJpbShzKTtcblxuICByZXR1cm4gcy5yZXBsYWNlKC9bQS1aYS16MC05XFx1MDBDMC1cXHUwMEZGXStbXlxccy1dKi9nLCBmdW5jdGlvbiAobWF0Y2gsIGluZGV4LCB0aXRsZSkge1xuICAgIGlmIChpbmRleCA+IDAgJiZcbiAgICAgICAgaW5kZXggKyBtYXRjaC5sZW5ndGggIT09IHRpdGxlLmxlbmd0aCAmJlxuICAgICAgICBtYXRjaC5zZWFyY2goc21hbGxXb3JkcykgPiAtMSAmJlxuICAgICAgICB0aXRsZS5jaGFyQXQoaW5kZXggLSAyKSAhPT0gJzonICYmXG4gICAgICAgICh0aXRsZS5jaGFyQXQoaW5kZXggKyBtYXRjaC5sZW5ndGgpICE9PSAnLScgfHwgdGl0bGUuY2hhckF0KGluZGV4IC0gMSkgPT09ICctJykgJiZcbiAgICAgICAgdGl0bGUuY2hhckF0KGluZGV4IC0gMSkuc2VhcmNoKC9bXlxccy1dLykgPCAwKSB7XG4gICAgICByZXR1cm4gbWF0Y2gudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICBpZiAobWF0Y2guc3Vic3RyKDEpLnNlYXJjaCgvW0EtWl18XFwuLi8pID4gLTEpIHtcbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWF0Y2guY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBtYXRjaC5zdWJzdHIoMSk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvVGl0bGVDYXNlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWdhL3NyYy91dGlscy90b1RpdGxlQ2FzZS5qc1xuLy8gbW9kdWxlIGlkID0gMjc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsInZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgUmVhY3RET00gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2V4ZW52Jyk7XG52YXIgTW9kYWxQb3J0YWwgPSBSZWFjdC5jcmVhdGVGYWN0b3J5KHJlcXVpcmUoJy4vTW9kYWxQb3J0YWwnKSk7XG52YXIgYXJpYUFwcEhpZGVyID0gcmVxdWlyZSgnLi4vaGVscGVycy9hcmlhQXBwSGlkZXInKTtcbnZhciBlbGVtZW50Q2xhc3MgPSByZXF1aXJlKCdlbGVtZW50LWNsYXNzJyk7XG52YXIgcmVuZGVyU3VidHJlZUludG9Db250YWluZXIgPSByZXF1aXJlKFwicmVhY3QtZG9tXCIpLnVuc3RhYmxlX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyO1xudmFyIEFzc2lnbiA9IHJlcXVpcmUoJ2xvZGFzaC5hc3NpZ24nKTtcblxudmFyIFNhZmVIVE1MRWxlbWVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IHdpbmRvdy5IVE1MRWxlbWVudCA6IHt9O1xudmFyIEFwcEVsZW1lbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBkb2N1bWVudC5ib2R5IDoge2FwcGVuZENoaWxkOiBmdW5jdGlvbigpIHt9fTtcblxuZnVuY3Rpb24gZ2V0UGFyZW50RWxlbWVudChwYXJlbnRTZWxlY3Rvcikge1xuICByZXR1cm4gcGFyZW50U2VsZWN0b3IoKTtcbn1cblxudmFyIE1vZGFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gIGRpc3BsYXlOYW1lOiAnTW9kYWwnLFxuICBzdGF0aWNzOiB7XG4gICAgc2V0QXBwRWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBBcHBFbGVtZW50ID0gYXJpYUFwcEhpZGVyLnNldEVsZW1lbnQoZWxlbWVudCk7XG4gICAgfSxcbiAgICBpbmplY3RDU1M6IGZ1bmN0aW9uKCkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WXG4gICAgICAgICYmIGNvbnNvbGUud2FybignUmVhY3QtTW9kYWw6IGluamVjdENTUyBoYXMgYmVlbiBkZXByZWNhdGVkICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FuZCBubyBsb25nZXIgaGFzIGFueSBlZmZlY3QuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGxhdGVyIHZlcnNpb24nKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJvcFR5cGVzOiB7XG4gICAgaXNPcGVuOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIHN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgY29udGVudDogUmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgIG92ZXJsYXk6IFJlYWN0LlByb3BUeXBlcy5vYmplY3RcbiAgICB9KSxcbiAgICBwb3J0YWxDbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgYXBwRWxlbWVudDogUmVhY3QuUHJvcFR5cGVzLmluc3RhbmNlT2YoU2FmZUhUTUxFbGVtZW50KSxcbiAgICBvbkFmdGVyT3BlbjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25SZXF1ZXN0Q2xvc2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgIGNsb3NlVGltZW91dE1TOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxuICAgIGFyaWFIaWRlQXBwOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBwYXJlbnRTZWxlY3RvcjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgcm9sZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjb250ZW50TGFiZWw6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICB9LFxuXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgcG9ydGFsQ2xhc3NOYW1lOiAnUmVhY3RNb2RhbFBvcnRhbCcsXG4gICAgICBhcmlhSGlkZUFwcDogdHJ1ZSxcbiAgICAgIGNsb3NlVGltZW91dE1TOiAwLFxuICAgICAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljazogdHJ1ZSxcbiAgICAgIHBhcmVudFNlbGVjdG9yOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5ib2R5OyB9XG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5ub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5ub2RlLmNsYXNzTmFtZSA9IHRoaXMucHJvcHMucG9ydGFsQ2xhc3NOYW1lO1xuXG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQodGhpcy5wcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgdGhpcy5yZW5kZXJQb3J0YWwodGhpcy5wcm9wcyk7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV3UHJvcHMpIHtcbiAgICB2YXIgY3VycmVudFBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQodGhpcy5wcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG4gICAgdmFyIG5ld1BhcmVudCA9IGdldFBhcmVudEVsZW1lbnQobmV3UHJvcHMucGFyZW50U2VsZWN0b3IpO1xuXG4gICAgaWYobmV3UGFyZW50ICE9PSBjdXJyZW50UGFyZW50KSB7XG4gICAgICBjdXJyZW50UGFyZW50LnJlbW92ZUNoaWxkKHRoaXMubm9kZSk7XG4gICAgICBuZXdQYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlclBvcnRhbChuZXdQcm9wcyk7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmFyaWFIaWRlQXBwKSB7XG4gICAgICBhcmlhQXBwSGlkZXIuc2hvdyh0aGlzLnByb3BzLmFwcEVsZW1lbnQpO1xuICAgIH1cblxuICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUodGhpcy5ub2RlKTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50RWxlbWVudCh0aGlzLnByb3BzLnBhcmVudFNlbGVjdG9yKTtcbiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKTtcbiAgICBlbGVtZW50Q2xhc3MoZG9jdW1lbnQuYm9keSkucmVtb3ZlKCdSZWFjdE1vZGFsX19Cb2R5LS1vcGVuJyk7XG4gIH0sXG5cbiAgcmVuZGVyUG9ydGFsOiBmdW5jdGlvbihwcm9wcykge1xuICAgIGlmIChwcm9wcy5pc09wZW4pIHtcbiAgICAgIGVsZW1lbnRDbGFzcyhkb2N1bWVudC5ib2R5KS5hZGQoJ1JlYWN0TW9kYWxfX0JvZHktLW9wZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudENsYXNzKGRvY3VtZW50LmJvZHkpLnJlbW92ZSgnUmVhY3RNb2RhbF9fQm9keS0tb3BlbicpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5hcmlhSGlkZUFwcCkge1xuICAgICAgYXJpYUFwcEhpZGVyLnRvZ2dsZShwcm9wcy5pc09wZW4sIHByb3BzLmFwcEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHRoaXMucG9ydGFsID0gcmVuZGVyU3VidHJlZUludG9Db250YWluZXIodGhpcywgTW9kYWxQb3J0YWwoQXNzaWduKHt9LCBwcm9wcywge2RlZmF1bHRTdHlsZXM6IE1vZGFsLmRlZmF1bHRTdHlsZXN9KSksIHRoaXMubm9kZSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFJlYWN0LkRPTS5ub3NjcmlwdCgpO1xuICB9XG59KTtcblxuTW9kYWwuZGVmYXVsdFN0eWxlcyA9IHtcbiAgb3ZlcmxheToge1xuICAgIHBvc2l0aW9uICAgICAgICA6ICdmaXhlZCcsXG4gICAgdG9wICAgICAgICAgICAgIDogMCxcbiAgICBsZWZ0ICAgICAgICAgICAgOiAwLFxuICAgIHJpZ2h0ICAgICAgICAgICA6IDAsXG4gICAgYm90dG9tICAgICAgICAgIDogMCxcbiAgICBiYWNrZ3JvdW5kQ29sb3IgOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjc1KSdcbiAgfSxcbiAgY29udGVudDoge1xuICAgIHBvc2l0aW9uICAgICAgICAgICAgICAgIDogJ2Fic29sdXRlJyxcbiAgICB0b3AgICAgICAgICAgICAgICAgICAgICA6ICc0MHB4JyxcbiAgICBsZWZ0ICAgICAgICAgICAgICAgICAgICA6ICc0MHB4JyxcbiAgICByaWdodCAgICAgICAgICAgICAgICAgICA6ICc0MHB4JyxcbiAgICBib3R0b20gICAgICAgICAgICAgICAgICA6ICc0MHB4JyxcbiAgICBib3JkZXIgICAgICAgICAgICAgICAgICA6ICcxcHggc29saWQgI2NjYycsXG4gICAgYmFja2dyb3VuZCAgICAgICAgICAgICAgOiAnI2ZmZicsXG4gICAgb3ZlcmZsb3cgICAgICAgICAgICAgICAgOiAnYXV0bycsXG4gICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmcgOiAndG91Y2gnLFxuICAgIGJvcmRlclJhZGl1cyAgICAgICAgICAgIDogJzRweCcsXG4gICAgb3V0bGluZSAgICAgICAgICAgICAgICAgOiAnbm9uZScsXG4gICAgcGFkZGluZyAgICAgICAgICAgICAgICAgOiAnMjBweCdcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE1vZGFsXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtbW9kYWwvbGliL2NvbXBvbmVudHMvTW9kYWwuanNcbi8vIG1vZHVsZSBpZCA9IDI3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGRpdiA9IFJlYWN0LkRPTS5kaXY7XG52YXIgZm9jdXNNYW5hZ2VyID0gcmVxdWlyZSgnLi4vaGVscGVycy9mb2N1c01hbmFnZXInKTtcbnZhciBzY29wZVRhYiA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvc2NvcGVUYWInKTtcbnZhciBBc3NpZ24gPSByZXF1aXJlKCdsb2Rhc2guYXNzaWduJyk7XG5cbi8vIHNvIHRoYXQgb3VyIENTUyBpcyBzdGF0aWNhbGx5IGFuYWx5emFibGVcbnZhciBDTEFTU19OQU1FUyA9IHtcbiAgb3ZlcmxheToge1xuICAgIGJhc2U6ICdSZWFjdE1vZGFsX19PdmVybGF5JyxcbiAgICBhZnRlck9wZW46ICdSZWFjdE1vZGFsX19PdmVybGF5LS1hZnRlci1vcGVuJyxcbiAgICBiZWZvcmVDbG9zZTogJ1JlYWN0TW9kYWxfX092ZXJsYXktLWJlZm9yZS1jbG9zZSdcbiAgfSxcbiAgY29udGVudDoge1xuICAgIGJhc2U6ICdSZWFjdE1vZGFsX19Db250ZW50JyxcbiAgICBhZnRlck9wZW46ICdSZWFjdE1vZGFsX19Db250ZW50LS1hZnRlci1vcGVuJyxcbiAgICBiZWZvcmVDbG9zZTogJ1JlYWN0TW9kYWxfX0NvbnRlbnQtLWJlZm9yZS1jbG9zZSdcbiAgfVxufTtcblxudmFyIE1vZGFsUG9ydGFsID0gbW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgZGlzcGxheU5hbWU6ICdNb2RhbFBvcnRhbCcsXG4gIHNob3VsZENsb3NlOiBudWxsLFxuXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG92ZXJsYXk6IHt9LFxuICAgICAgICBjb250ZW50OiB7fVxuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWZ0ZXJPcGVuOiBmYWxzZSxcbiAgICAgIGJlZm9yZUNsb3NlOiBmYWxzZVxuICAgIH07XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vIEZvY3VzIG5lZWRzIHRvIGJlIHNldCB3aGVuIG1vdW50aW5nIGFuZCBhbHJlYWR5IG9wZW5cbiAgICBpZiAodGhpcy5wcm9wcy5pc09wZW4pIHtcbiAgICAgIHRoaXMuc2V0Rm9jdXNBZnRlclJlbmRlcih0cnVlKTtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xvc2VUaW1lcik7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV3UHJvcHMpIHtcbiAgICAvLyBGb2N1cyBvbmx5IG5lZWRzIHRvIGJlIHNldCBvbmNlIHdoZW4gdGhlIG1vZGFsIGlzIGJlaW5nIG9wZW5lZFxuICAgIGlmICghdGhpcy5wcm9wcy5pc09wZW4gJiYgbmV3UHJvcHMuaXNPcGVuKSB7XG4gICAgICB0aGlzLnNldEZvY3VzQWZ0ZXJSZW5kZXIodHJ1ZSk7XG4gICAgICB0aGlzLm9wZW4oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuaXNPcGVuICYmICFuZXdQcm9wcy5pc09wZW4pIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZm9jdXNBZnRlclJlbmRlcikge1xuICAgICAgdGhpcy5mb2N1c0NvbnRlbnQoKTtcbiAgICAgIHRoaXMuc2V0Rm9jdXNBZnRlclJlbmRlcihmYWxzZSk7XG4gICAgfVxuICB9LFxuXG4gIHNldEZvY3VzQWZ0ZXJSZW5kZXI6IGZ1bmN0aW9uIChmb2N1cykge1xuICAgIHRoaXMuZm9jdXNBZnRlclJlbmRlciA9IGZvY3VzO1xuICB9LFxuXG4gIG9wZW46IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmFmdGVyT3BlbiAmJiB0aGlzLnN0YXRlLmJlZm9yZUNsb3NlKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5jbG9zZVRpbWVyKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBiZWZvcmVDbG9zZTogZmFsc2UgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvY3VzTWFuYWdlci5zZXR1cFNjb3BlZEZvY3VzKHRoaXMubm9kZSk7XG4gICAgICBmb2N1c01hbmFnZXIubWFya0ZvckZvY3VzTGF0ZXIoKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2lzT3BlbjogdHJ1ZX0sIGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHthZnRlck9wZW46IHRydWV9KTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc09wZW4gJiYgdGhpcy5wcm9wcy5vbkFmdGVyT3Blbikge1xuICAgICAgICAgIHRoaXMucHJvcHMub25BZnRlck9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH0sXG5cbiAgY2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmNsb3NlVGltZW91dE1TID4gMClcbiAgICAgIHRoaXMuY2xvc2VXaXRoVGltZW91dCgpO1xuICAgIGVsc2VcbiAgICAgIHRoaXMuY2xvc2VXaXRob3V0VGltZW91dCgpO1xuICB9LFxuXG4gIGZvY3VzQ29udGVudDogZnVuY3Rpb24oKSB7XG4gICAgLy8gRG9uJ3Qgc3RlYWwgZm9jdXMgZnJvbSBpbm5lciBlbGVtZW50c1xuICAgIGlmICghdGhpcy5jb250ZW50SGFzRm9jdXMoKSkge1xuICAgICAgdGhpcy5yZWZzLmNvbnRlbnQuZm9jdXMoKTtcbiAgICB9XG4gIH0sXG5cbiAgY2xvc2VXaXRoVGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YmVmb3JlQ2xvc2U6IHRydWV9LCBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2xvc2VUaW1lciA9IHNldFRpbWVvdXQodGhpcy5jbG9zZVdpdGhvdXRUaW1lb3V0LCB0aGlzLnByb3BzLmNsb3NlVGltZW91dE1TKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuXG4gIGNsb3NlV2l0aG91dFRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYmVmb3JlQ2xvc2U6IGZhbHNlLFxuICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgIGFmdGVyT3BlbjogZmFsc2UsXG4gICAgfSwgdGhpcy5hZnRlckNsb3NlKTtcbiAgfSxcblxuICBhZnRlckNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICBmb2N1c01hbmFnZXIucmV0dXJuRm9jdXMoKTtcbiAgICBmb2N1c01hbmFnZXIudGVhcmRvd25TY29wZWRGb2N1cygpO1xuICB9LFxuXG4gIGhhbmRsZUtleURvd246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gOSAvKnRhYiovKSBzY29wZVRhYih0aGlzLnJlZnMuY29udGVudCwgZXZlbnQpO1xuICAgIGlmIChldmVudC5rZXlDb2RlID09IDI3IC8qZXNjKi8pIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnJlcXVlc3RDbG9zZShldmVudCk7XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZU92ZXJsYXlNb3VzZURvd246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuc2hvdWxkQ2xvc2UgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuc2hvdWxkQ2xvc2UgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICBoYW5kbGVPdmVybGF5TW91c2VVcDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5zaG91bGRDbG9zZSAmJiB0aGlzLnByb3BzLnNob3VsZENsb3NlT25PdmVybGF5Q2xpY2spIHtcbiAgICAgIGlmICh0aGlzLm93bmVySGFuZGxlc0Nsb3NlKCkpXG4gICAgICAgIHRoaXMucmVxdWVzdENsb3NlKGV2ZW50KTtcbiAgICAgIGVsc2VcbiAgICAgICAgdGhpcy5mb2N1c0NvbnRlbnQoKTtcbiAgICB9XG4gICAgdGhpcy5zaG91bGRDbG9zZSA9IG51bGw7XG4gIH0sXG5cbiAgaGFuZGxlQ29udGVudE1vdXNlRG93bjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLnNob3VsZENsb3NlID0gZmFsc2U7XG4gIH0sXG5cbiAgaGFuZGxlQ29udGVudE1vdXNlVXA6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy5zaG91bGRDbG9zZSA9IGZhbHNlO1xuICB9LFxuXG4gIHJlcXVlc3RDbG9zZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vd25lckhhbmRsZXNDbG9zZSgpKVxuICAgICAgdGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZShldmVudCk7XG4gIH0sXG5cbiAgb3duZXJIYW5kbGVzQ2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlO1xuICB9LFxuXG4gIHNob3VsZEJlQ2xvc2VkOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMuaXNPcGVuICYmICF0aGlzLnN0YXRlLmJlZm9yZUNsb3NlO1xuICB9LFxuXG4gIGNvbnRlbnRIYXNGb2N1czogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMucmVmcy5jb250ZW50IHx8IHRoaXMucmVmcy5jb250ZW50LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICB9LFxuXG4gIGJ1aWxkQ2xhc3NOYW1lOiBmdW5jdGlvbih3aGljaCwgYWRkaXRpb25hbCkge1xuICAgIHZhciBjbGFzc05hbWUgPSBDTEFTU19OQU1FU1t3aGljaF0uYmFzZTtcbiAgICBpZiAodGhpcy5zdGF0ZS5hZnRlck9wZW4pXG4gICAgICBjbGFzc05hbWUgKz0gJyAnK0NMQVNTX05BTUVTW3doaWNoXS5hZnRlck9wZW47XG4gICAgaWYgKHRoaXMuc3RhdGUuYmVmb3JlQ2xvc2UpXG4gICAgICBjbGFzc05hbWUgKz0gJyAnK0NMQVNTX05BTUVTW3doaWNoXS5iZWZvcmVDbG9zZTtcbiAgICByZXR1cm4gYWRkaXRpb25hbCA/IGNsYXNzTmFtZSArICcgJyArIGFkZGl0aW9uYWwgOiBjbGFzc05hbWU7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udGVudFN0eWxlcyA9ICh0aGlzLnByb3BzLmNsYXNzTmFtZSkgPyB7fSA6IHRoaXMucHJvcHMuZGVmYXVsdFN0eWxlcy5jb250ZW50O1xuICAgIHZhciBvdmVybGF5U3R5bGVzID0gKHRoaXMucHJvcHMub3ZlcmxheUNsYXNzTmFtZSkgPyB7fSA6IHRoaXMucHJvcHMuZGVmYXVsdFN0eWxlcy5vdmVybGF5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2hvdWxkQmVDbG9zZWQoKSA/IGRpdigpIDogKFxuICAgICAgZGl2KHtcbiAgICAgICAgcmVmOiBcIm92ZXJsYXlcIixcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmJ1aWxkQ2xhc3NOYW1lKCdvdmVybGF5JywgdGhpcy5wcm9wcy5vdmVybGF5Q2xhc3NOYW1lKSxcbiAgICAgICAgc3R5bGU6IEFzc2lnbih7fSwgb3ZlcmxheVN0eWxlcywgdGhpcy5wcm9wcy5zdHlsZS5vdmVybGF5IHx8IHt9KSxcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlT3ZlcmxheU1vdXNlRG93bixcbiAgICAgICAgb25Nb3VzZVVwOiB0aGlzLmhhbmRsZU92ZXJsYXlNb3VzZVVwXG4gICAgICB9LFxuICAgICAgICBkaXYoe1xuICAgICAgICAgIHJlZjogXCJjb250ZW50XCIsXG4gICAgICAgICAgc3R5bGU6IEFzc2lnbih7fSwgY29udGVudFN0eWxlcywgdGhpcy5wcm9wcy5zdHlsZS5jb250ZW50IHx8IHt9KSxcbiAgICAgICAgICBjbGFzc05hbWU6IHRoaXMuYnVpbGRDbGFzc05hbWUoJ2NvbnRlbnQnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSksXG4gICAgICAgICAgdGFiSW5kZXg6IFwiLTFcIixcbiAgICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93bixcbiAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVDb250ZW50TW91c2VEb3duLFxuICAgICAgICAgIG9uTW91c2VVcDogdGhpcy5oYW5kbGVDb250ZW50TW91c2VVcCxcbiAgICAgICAgICByb2xlOiB0aGlzLnByb3BzLnJvbGUsXG4gICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHRoaXMucHJvcHMuY29udGVudExhYmVsXG4gICAgICAgIH0sXG4gICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtbW9kYWwvbGliL2NvbXBvbmVudHMvTW9kYWxQb3J0YWwuanNcbi8vIG1vZHVsZSBpZCA9IDI3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgX2VsZW1lbnQgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQuYm9keSA6IG51bGw7XG5cbmZ1bmN0aW9uIHNldEVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50KTtcbiAgICBlbGVtZW50ID0gJ2xlbmd0aCcgaW4gZWwgPyBlbFswXSA6IGVsO1xuICB9XG4gIF9lbGVtZW50ID0gZWxlbWVudCB8fCBfZWxlbWVudDtcbiAgcmV0dXJuIF9lbGVtZW50O1xufVxuXG5mdW5jdGlvbiBoaWRlKGFwcEVsZW1lbnQpIHtcbiAgdmFsaWRhdGVFbGVtZW50KGFwcEVsZW1lbnQpO1xuICAoYXBwRWxlbWVudCB8fCBfZWxlbWVudCkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG59XG5cbmZ1bmN0aW9uIHNob3coYXBwRWxlbWVudCkge1xuICB2YWxpZGF0ZUVsZW1lbnQoYXBwRWxlbWVudCk7XG4gIChhcHBFbGVtZW50IHx8IF9lbGVtZW50KS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZShzaG91bGRIaWRlLCBhcHBFbGVtZW50KSB7XG4gIGlmIChzaG91bGRIaWRlKVxuICAgIGhpZGUoYXBwRWxlbWVudCk7XG4gIGVsc2VcbiAgICBzaG93KGFwcEVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUVsZW1lbnQoYXBwRWxlbWVudCkge1xuICBpZiAoIWFwcEVsZW1lbnQgJiYgIV9lbGVtZW50KVxuICAgIHRocm93IG5ldyBFcnJvcigncmVhY3QtbW9kYWw6IFlvdSBtdXN0IHNldCBhbiBlbGVtZW50IHdpdGggYE1vZGFsLnNldEFwcEVsZW1lbnQoZWwpYCB0byBtYWtlIHRoaXMgYWNjZXNzaWJsZScpO1xufVxuXG5mdW5jdGlvbiByZXNldEZvclRlc3RpbmcoKSB7XG4gIF9lbGVtZW50ID0gZG9jdW1lbnQuYm9keTtcbn1cblxuZXhwb3J0cy50b2dnbGUgPSB0b2dnbGU7XG5leHBvcnRzLnNldEVsZW1lbnQgPSBzZXRFbGVtZW50O1xuZXhwb3J0cy5zaG93ID0gc2hvdztcbmV4cG9ydHMuaGlkZSA9IGhpZGU7XG5leHBvcnRzLnJlc2V0Rm9yVGVzdGluZyA9IHJlc2V0Rm9yVGVzdGluZztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1tb2RhbC9saWIvaGVscGVycy9hcmlhQXBwSGlkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI4MFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgZmluZFRhYmJhYmxlID0gcmVxdWlyZSgnLi4vaGVscGVycy90YWJiYWJsZScpO1xudmFyIG1vZGFsRWxlbWVudCA9IG51bGw7XG52YXIgZm9jdXNMYXRlckVsZW1lbnQgPSBudWxsO1xudmFyIG5lZWRUb0ZvY3VzID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGhhbmRsZUJsdXIoZXZlbnQpIHtcbiAgbmVlZFRvRm9jdXMgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVGb2N1cyhldmVudCkge1xuICBpZiAobmVlZFRvRm9jdXMpIHtcbiAgICBuZWVkVG9Gb2N1cyA9IGZhbHNlO1xuICAgIGlmICghbW9kYWxFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG5lZWQgdG8gc2VlIGhvdyBqUXVlcnkgc2hpbXMgZG9jdW1lbnQub24oJ2ZvY3VzaW4nKSBzbyB3ZSBkb24ndCBuZWVkIHRoZVxuICAgIC8vIHNldFRpbWVvdXQsIGZpcmVmb3ggZG9lc24ndCBzdXBwb3J0IGZvY3VzaW4sIGlmIGl0IGRpZCwgd2UgY291bGQgZm9jdXNcbiAgICAvLyB0aGUgZWxlbWVudCBvdXRzaWRlIG9mIGEgc2V0VGltZW91dC4gU2lkZS1lZmZlY3Qgb2YgdGhpcyBpbXBsZW1lbnRhdGlvbiBcbiAgICAvLyBpcyB0aGF0IHRoZSBkb2N1bWVudC5ib2R5IGdldHMgZm9jdXMsIGFuZCB0aGVuIHdlIGZvY3VzIG91ciBlbGVtZW50IHJpZ2h0IFxuICAgIC8vIGFmdGVyLCBzZWVtcyBmaW5lLlxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAobW9kYWxFbGVtZW50LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKVxuICAgICAgICByZXR1cm47XG4gICAgICB2YXIgZWwgPSAoZmluZFRhYmJhYmxlKG1vZGFsRWxlbWVudClbMF0gfHwgbW9kYWxFbGVtZW50KTtcbiAgICAgIGVsLmZvY3VzKCk7XG4gICAgfSwgMCk7XG4gIH1cbn1cblxuZXhwb3J0cy5tYXJrRm9yRm9jdXNMYXRlciA9IGZ1bmN0aW9uKCkge1xuICBmb2N1c0xhdGVyRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG59O1xuXG5leHBvcnRzLnJldHVybkZvY3VzID0gZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgZm9jdXNMYXRlckVsZW1lbnQuZm9jdXMoKTtcbiAgfVxuICBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybignWW91IHRyaWVkIHRvIHJldHVybiBmb2N1cyB0byAnK2ZvY3VzTGF0ZXJFbGVtZW50KycgYnV0IGl0IGlzIG5vdCBpbiB0aGUgRE9NIGFueW1vcmUnKTtcbiAgfVxuICBmb2N1c0xhdGVyRWxlbWVudCA9IG51bGw7XG59O1xuXG5leHBvcnRzLnNldHVwU2NvcGVkRm9jdXMgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gIG1vZGFsRWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBoYW5kbGVCbHVyLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBoYW5kbGVGb2N1cywgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbkJsdXInLCBoYW5kbGVCbHVyKTtcbiAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgnb25Gb2N1cycsIGhhbmRsZUZvY3VzKTtcbiAgfVxufTtcblxuZXhwb3J0cy50ZWFyZG93blNjb3BlZEZvY3VzID0gZnVuY3Rpb24oKSB7XG4gIG1vZGFsRWxlbWVudCA9IG51bGw7XG5cbiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBoYW5kbGVCbHVyKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIGhhbmRsZUZvY3VzKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuZGV0YWNoRXZlbnQoJ29uQmx1cicsIGhhbmRsZUJsdXIpO1xuICAgIGRvY3VtZW50LmRldGFjaEV2ZW50KCdvbkZvY3VzJywgaGFuZGxlRm9jdXMpO1xuICB9XG59O1xuXG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1tb2RhbC9saWIvaGVscGVycy9mb2N1c01hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgZmluZFRhYmJhYmxlID0gcmVxdWlyZSgnLi4vaGVscGVycy90YWJiYWJsZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5vZGUsIGV2ZW50KSB7XG4gIHZhciB0YWJiYWJsZSA9IGZpbmRUYWJiYWJsZShub2RlKTtcbiAgaWYgKCF0YWJiYWJsZS5sZW5ndGgpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm47XG4gIH1cbiAgdmFyIGZpbmFsVGFiYmFibGUgPSB0YWJiYWJsZVtldmVudC5zaGlmdEtleSA/IDAgOiB0YWJiYWJsZS5sZW5ndGggLSAxXTtcbiAgdmFyIGxlYXZpbmdGaW5hbFRhYmJhYmxlID0gKFxuICAgIGZpbmFsVGFiYmFibGUgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHxcbiAgICAvLyBoYW5kbGUgaW1tZWRpYXRlIHNoaWZ0K3RhYiBhZnRlciBvcGVuaW5nIHdpdGggbW91c2VcbiAgICBub2RlID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICk7XG4gIGlmICghbGVhdmluZ0ZpbmFsVGFiYmFibGUpIHJldHVybjtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgdmFyIHRhcmdldCA9IHRhYmJhYmxlW2V2ZW50LnNoaWZ0S2V5ID8gdGFiYmFibGUubGVuZ3RoIC0gMSA6IDBdO1xuICB0YXJnZXQuZm9jdXMoKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvc2NvcGVUYWIuanNcbi8vIG1vZHVsZSBpZCA9IDI4MlxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9Nb2RhbCcpO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtbW9kYWwvbGliL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyODNcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwidmFyIGNhblVzZURPTSA9IHJlcXVpcmUoJ2Nhbi11c2UtZG9tJyk7XG52YXIgZW5xdWlyZSA9IGNhblVzZURPTSAmJiByZXF1aXJlKCdlbnF1aXJlLmpzJyk7XG52YXIganNvbjJtcSA9IHJlcXVpcmUoJ2pzb24ybXEnKTtcblxudmFyIFJlc3BvbnNpdmVNaXhpbiA9IHtcbiAgbWVkaWE6IGZ1bmN0aW9uIChxdWVyeSwgaGFuZGxlcikge1xuICAgIHF1ZXJ5ID0ganNvbjJtcShxdWVyeSk7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBoYW5kbGVyID0ge1xuICAgICAgICBtYXRjaDogaGFuZGxlclxuICAgICAgfTtcbiAgICB9XG4gICAgY2FuVXNlRE9NICYmIGVucXVpcmUucmVnaXN0ZXIocXVlcnksIGhhbmRsZXIpO1xuXG4gICAgLy8gUXVldWUgdGhlIGhhbmRsZXJzIHRvIHVucmVnaXN0ZXIgdGhlbSBhdCB1bm1vdW50ICBcbiAgICBpZiAoISB0aGlzLl9yZXNwb25zaXZlTWVkaWFIYW5kbGVycykge1xuICAgICAgdGhpcy5fcmVzcG9uc2l2ZU1lZGlhSGFuZGxlcnMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5fcmVzcG9uc2l2ZU1lZGlhSGFuZGxlcnMucHVzaCh7cXVlcnk6IHF1ZXJ5LCBoYW5kbGVyOiBoYW5kbGVyfSk7XG4gIH0sXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3Jlc3BvbnNpdmVNZWRpYUhhbmRsZXJzKSB7XG4gICAgICB0aGlzLl9yZXNwb25zaXZlTWVkaWFIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICBjYW5Vc2VET00gJiYgZW5xdWlyZS51bnJlZ2lzdGVyKG9iai5xdWVyeSwgb2JqLmhhbmRsZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlc3BvbnNpdmVNaXhpbjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yZXNwb25zaXZlLW1peGluL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyOTJcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5OZXh0QXJyb3cgPSBleHBvcnRzLlByZXZBcnJvdyA9IHVuZGVmaW5lZDtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2NsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxudmFyIF9oZWxwZXJzID0gcmVxdWlyZSgnLi9taXhpbnMvaGVscGVycycpO1xuXG52YXIgX2hlbHBlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVscGVycyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBQcmV2QXJyb3cgPSBleHBvcnRzLlByZXZBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnUHJldkFycm93JyxcblxuXG4gIGNsaWNrSGFuZGxlcjogZnVuY3Rpb24gY2xpY2tIYW5kbGVyKG9wdGlvbnMsIGUpIHtcbiAgICBpZiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLmNsaWNrSGFuZGxlcihvcHRpb25zLCBlKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIHByZXZDbGFzc2VzID0geyAnc2xpY2stYXJyb3cnOiB0cnVlLCAnc2xpY2stcHJldic6IHRydWUgfTtcbiAgICB2YXIgcHJldkhhbmRsZXIgPSB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMsIHsgbWVzc2FnZTogJ3ByZXZpb3VzJyB9KTtcblxuICAgIGlmICghdGhpcy5wcm9wcy5pbmZpbml0ZSAmJiAodGhpcy5wcm9wcy5jdXJyZW50U2xpZGUgPT09IDAgfHwgdGhpcy5wcm9wcy5zbGlkZUNvdW50IDw9IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93KSkge1xuICAgICAgcHJldkNsYXNzZXNbJ3NsaWNrLWRpc2FibGVkJ10gPSB0cnVlO1xuICAgICAgcHJldkhhbmRsZXIgPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBwcmV2QXJyb3dQcm9wcyA9IHtcbiAgICAgIGtleTogJzAnLFxuICAgICAgJ2RhdGEtcm9sZSc6ICdub25lJyxcbiAgICAgIGNsYXNzTmFtZTogKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KShwcmV2Q2xhc3NlcyksXG4gICAgICBjdXJyZW50U2xpZGU6IHRoaXMucHJvcHMuY3VycmVudFNsaWRlLFxuICAgICAgc2xpZGVDb3VudDogdGhpcy5wcm9wcy5zbGlkZUNvdW50LFxuICAgICAgc3R5bGU6IHsgZGlzcGxheTogJ2Jsb2NrJyB9LFxuICAgICAgb25DbGljazogcHJldkhhbmRsZXJcbiAgICB9O1xuICAgIHZhciBwcmV2QXJyb3c7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5wcmV2QXJyb3cpIHtcbiAgICAgIHByZXZBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5wcmV2QXJyb3csIHByZXZBcnJvd1Byb3BzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJldkFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdidXR0b24nLFxuICAgICAgICBfZXh0ZW5kcyh7IGtleTogJzAnLCB0eXBlOiAnYnV0dG9uJyB9LCBwcmV2QXJyb3dQcm9wcyksXG4gICAgICAgICcgUHJldmlvdXMnXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBwcmV2QXJyb3c7XG4gIH1cbn0pO1xuXG52YXIgTmV4dEFycm93ID0gZXhwb3J0cy5OZXh0QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ05leHRBcnJvdycsXG5cbiAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIob3B0aW9ucywgZSkge1xuICAgIGlmIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMuY2xpY2tIYW5kbGVyKG9wdGlvbnMsIGUpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgbmV4dENsYXNzZXMgPSB7ICdzbGljay1hcnJvdyc6IHRydWUsICdzbGljay1uZXh0JzogdHJ1ZSB9O1xuICAgIHZhciBuZXh0SGFuZGxlciA9IHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcywgeyBtZXNzYWdlOiAnbmV4dCcgfSk7XG5cbiAgICBpZiAoIV9oZWxwZXJzMi5kZWZhdWx0LmNhbkdvTmV4dCh0aGlzLnByb3BzKSkge1xuICAgICAgbmV4dENsYXNzZXNbJ3NsaWNrLWRpc2FibGVkJ10gPSB0cnVlO1xuICAgICAgbmV4dEhhbmRsZXIgPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBuZXh0QXJyb3dQcm9wcyA9IHtcbiAgICAgIGtleTogJzEnLFxuICAgICAgJ2RhdGEtcm9sZSc6ICdub25lJyxcbiAgICAgIGNsYXNzTmFtZTogKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KShuZXh0Q2xhc3NlcyksXG4gICAgICBjdXJyZW50U2xpZGU6IHRoaXMucHJvcHMuY3VycmVudFNsaWRlLFxuICAgICAgc2xpZGVDb3VudDogdGhpcy5wcm9wcy5zbGlkZUNvdW50LFxuICAgICAgc3R5bGU6IHsgZGlzcGxheTogJ2Jsb2NrJyB9LFxuICAgICAgb25DbGljazogbmV4dEhhbmRsZXJcbiAgICB9O1xuXG4gICAgdmFyIG5leHRBcnJvdztcblxuICAgIGlmICh0aGlzLnByb3BzLm5leHRBcnJvdykge1xuICAgICAgbmV4dEFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudCh0aGlzLnByb3BzLm5leHRBcnJvdywgbmV4dEFycm93UHJvcHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgIF9leHRlbmRzKHsga2V5OiAnMScsIHR5cGU6ICdidXR0b24nIH0sIG5leHRBcnJvd1Byb3BzKSxcbiAgICAgICAgJyBOZXh0J1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dEFycm93O1xuICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL2Fycm93cy5qc1xuLy8gbW9kdWxlIGlkID0gMzExXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuRG90cyA9IHVuZGVmaW5lZDtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2NsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGdldERvdENvdW50ID0gZnVuY3Rpb24gZ2V0RG90Q291bnQoc3BlYykge1xuICB2YXIgZG90cztcbiAgZG90cyA9IE1hdGguY2VpbChzcGVjLnNsaWRlQ291bnQgLyBzcGVjLnNsaWRlc1RvU2Nyb2xsKTtcbiAgcmV0dXJuIGRvdHM7XG59O1xuXG52YXIgRG90cyA9IGV4cG9ydHMuRG90cyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnRG90cycsXG5cblxuICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihvcHRpb25zLCBlKSB7XG4gICAgLy8gSW4gQXV0b3BsYXkgdGhlIGZvY3VzIHN0YXlzIG9uIGNsaWNrZWQgYnV0dG9uIGV2ZW4gYWZ0ZXIgdHJhbnNpdGlvblxuICAgIC8vIHRvIG5leHQgc2xpZGUuIFRoYXQgb25seSBnb2VzIGF3YXkgYnkgY2xpY2sgc29tZXdoZXJlIG91dHNpZGVcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5wcm9wcy5jbGlja0hhbmRsZXIob3B0aW9ucyk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgZG90Q291bnQgPSBnZXREb3RDb3VudCh7XG4gICAgICBzbGlkZUNvdW50OiB0aGlzLnByb3BzLnNsaWRlQ291bnQsXG4gICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbFxuICAgIH0pO1xuXG4gICAgLy8gQXBwbHkgam9pbiAmIHNwbGl0IHRvIEFycmF5IHRvIHByZS1maWxsIGl0IGZvciBJRThcbiAgICAvL1xuICAgIC8vIENyZWRpdDogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTM3MzU0MjUvMTg0OTQ1OFxuICAgIHZhciBkb3RzID0gQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkoZG90Q291bnQgKyAxKS5qb2luKCcwJykuc3BsaXQoJycpKS5tYXAoZnVuY3Rpb24gKHgsIGkpIHtcblxuICAgICAgdmFyIGxlZnRCb3VuZCA9IGkgKiBfdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgIHZhciByaWdodEJvdW5kID0gaSAqIF90aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsICsgKF90aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsIC0gMSk7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KSh7XG4gICAgICAgICdzbGljay1hY3RpdmUnOiBfdGhpcy5wcm9wcy5jdXJyZW50U2xpZGUgPj0gbGVmdEJvdW5kICYmIF90aGlzLnByb3BzLmN1cnJlbnRTbGlkZSA8PSByaWdodEJvdW5kXG4gICAgICB9KTtcblxuICAgICAgdmFyIGRvdE9wdGlvbnMgPSB7XG4gICAgICAgIG1lc3NhZ2U6ICdkb3RzJyxcbiAgICAgICAgaW5kZXg6IGksXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiBfdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCxcbiAgICAgICAgY3VycmVudFNsaWRlOiBfdGhpcy5wcm9wcy5jdXJyZW50U2xpZGVcbiAgICAgIH07XG5cbiAgICAgIHZhciBvbkNsaWNrID0gX3RoaXMuY2xpY2tIYW5kbGVyLmJpbmQoX3RoaXMsIGRvdE9wdGlvbnMpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdsaScsXG4gICAgICAgIHsga2V5OiBpLCBjbGFzc05hbWU6IGNsYXNzTmFtZSB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KF90aGlzLnByb3BzLmN1c3RvbVBhZ2luZyhpKSwgeyBvbkNsaWNrOiBvbkNsaWNrIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ3VsJyxcbiAgICAgIHsgY2xhc3NOYW1lOiB0aGlzLnByb3BzLmRvdHNDbGFzcywgc3R5bGU6IHsgZGlzcGxheTogJ2Jsb2NrJyB9IH0sXG4gICAgICBkb3RzXG4gICAgKTtcbiAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXNsaWNrL2xpYi9kb3RzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vc2xpZGVyJyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXNsaWNrL2xpYi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaW5pdGlhbFN0YXRlID0ge1xuICAgIGFuaW1hdGluZzogZmFsc2UsXG4gICAgZHJhZ2dpbmc6IGZhbHNlLFxuICAgIGF1dG9QbGF5VGltZXI6IG51bGwsXG4gICAgY3VycmVudERpcmVjdGlvbjogMCxcbiAgICBjdXJyZW50TGVmdDogbnVsbCxcbiAgICBjdXJyZW50U2xpZGU6IDAsXG4gICAgZGlyZWN0aW9uOiAxLFxuICAgIGxpc3RXaWR0aDogbnVsbCxcbiAgICBsaXN0SGVpZ2h0OiBudWxsLFxuICAgIC8vIGxvYWRJbmRleDogMCxcbiAgICBzbGlkZUNvdW50OiBudWxsLFxuICAgIHNsaWRlV2lkdGg6IG51bGwsXG4gICAgc2xpZGVIZWlnaHQ6IG51bGwsXG4gICAgLy8gc2xpZGluZzogZmFsc2UsXG4gICAgLy8gc2xpZGVPZmZzZXQ6IDAsXG4gICAgc3dpcGVMZWZ0OiBudWxsLFxuICAgIHRvdWNoT2JqZWN0OiB7XG4gICAgICAgIHN0YXJ0WDogMCxcbiAgICAgICAgc3RhcnRZOiAwLFxuICAgICAgICBjdXJYOiAwLFxuICAgICAgICBjdXJZOiAwXG4gICAgfSxcblxuICAgIGxhenlMb2FkZWRMaXN0OiBbXSxcblxuICAgIC8vIGFkZGVkIGZvciByZWFjdFxuICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICBlZGdlRHJhZ2dlZDogZmFsc2UsXG4gICAgc3dpcGVkOiBmYWxzZSwgLy8gdXNlZCBieSBzd2lwZUV2ZW50LiBkaWZmZXJlbnRpdGVzIGJldHdlZW4gdG91Y2ggYW5kIHN3aXBlLlxuICAgIHRyYWNrU3R5bGU6IHt9LFxuICAgIHRyYWNrV2lkdGg6IDBcblxuICAgIC8vIFJlbW92ZWRcbiAgICAvLyB0cmFuc2Zvcm1zRW5hYmxlZDogZmFsc2UsXG4gICAgLy8gJG5leHRBcnJvdzogbnVsbCxcbiAgICAvLyAkcHJldkFycm93OiBudWxsLFxuICAgIC8vICRkb3RzOiBudWxsLFxuICAgIC8vICRsaXN0OiBudWxsLFxuICAgIC8vICRzbGlkZVRyYWNrOiBudWxsLFxuICAgIC8vICRzbGlkZXM6IG51bGwsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGluaXRpYWxTdGF0ZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL2luaXRpYWwtc3RhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDMxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLklubmVyU2xpZGVyID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfZXZlbnRIYW5kbGVycyA9IHJlcXVpcmUoJy4vbWl4aW5zL2V2ZW50LWhhbmRsZXJzJyk7XG5cbnZhciBfZXZlbnRIYW5kbGVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudEhhbmRsZXJzKTtcblxudmFyIF9oZWxwZXJzID0gcmVxdWlyZSgnLi9taXhpbnMvaGVscGVycycpO1xuXG52YXIgX2hlbHBlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVscGVycyk7XG5cbnZhciBfaW5pdGlhbFN0YXRlID0gcmVxdWlyZSgnLi9pbml0aWFsLXN0YXRlJyk7XG5cbnZhciBfaW5pdGlhbFN0YXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaXRpYWxTdGF0ZSk7XG5cbnZhciBfZGVmYXVsdFByb3BzID0gcmVxdWlyZSgnLi9kZWZhdWx0LXByb3BzJyk7XG5cbnZhciBfZGVmYXVsdFByb3BzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmF1bHRQcm9wcyk7XG5cbnZhciBfY2xhc3NuYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcblxudmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxudmFyIF90cmFjayA9IHJlcXVpcmUoJy4vdHJhY2snKTtcblxudmFyIF9kb3RzID0gcmVxdWlyZSgnLi9kb3RzJyk7XG5cbnZhciBfYXJyb3dzID0gcmVxdWlyZSgnLi9hcnJvd3MnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIElubmVyU2xpZGVyID0gZXhwb3J0cy5Jbm5lclNsaWRlciA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnSW5uZXJTbGlkZXInLFxuXG4gIG1peGluczogW19oZWxwZXJzMi5kZWZhdWx0LCBfZXZlbnRIYW5kbGVyczIuZGVmYXVsdF0sXG4gIGxpc3Q6IG51bGwsXG4gIHRyYWNrOiBudWxsLFxuICBsaXN0UmVmSGFuZGxlcjogZnVuY3Rpb24gbGlzdFJlZkhhbmRsZXIocmVmKSB7XG4gICAgdGhpcy5saXN0ID0gcmVmO1xuICB9LFxuICB0cmFja1JlZkhhbmRsZXI6IGZ1bmN0aW9uIHRyYWNrUmVmSGFuZGxlcihyZWYpIHtcbiAgICB0aGlzLnRyYWNrID0gcmVmO1xuICB9LFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIF9pbml0aWFsU3RhdGUyLmRlZmF1bHQsIHtcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5wcm9wcy5pbml0aWFsU2xpZGVcbiAgICB9KTtcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvcHMyLmRlZmF1bHQ7XG4gIH0sXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLmluaXQpIHtcbiAgICAgIHRoaXMucHJvcHMuaW5pdCgpO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1vdW50ZWQ6IHRydWVcbiAgICB9KTtcbiAgICB2YXIgbGF6eUxvYWRlZExpc3QgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5jb3VudCh0aGlzLnByb3BzLmNoaWxkcmVuKTsgaSsrKSB7XG4gICAgICBpZiAoaSA+PSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSAmJiBpIDwgdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgKyB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdykge1xuICAgICAgICBsYXp5TG9hZGVkTGlzdC5wdXNoKGkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmxhenlMb2FkICYmIHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgbGF6eUxvYWRlZExpc3Q6IGxhenlMb2FkZWRMaXN0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyBIYWNrIGZvciBhdXRvcGxheSAtLSBJbnNwZWN0IExhdGVyXG4gICAgdGhpcy5pbml0aWFsaXplKHRoaXMucHJvcHMpO1xuICAgIHRoaXMuYWRhcHRIZWlnaHQoKTtcblxuICAgIC8vIFRvIHN1cHBvcnQgc2VydmVyLXNpZGUgcmVuZGVyaW5nXG4gICAgaWYgKCF3aW5kb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29ucmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZWQpO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIGlmICh0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5hbmltYXRpb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25XaW5kb3dSZXNpemVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmRldGFjaEV2ZW50KCdvbnJlc2l6ZScsIHRoaXMub25XaW5kb3dSZXNpemVkKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuYXV0b1BsYXlUaW1lcikge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0YXRlLmF1dG9QbGF5VGltZXIpO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5zbGlja0dvVG8gIT0gbmV4dFByb3BzLnNsaWNrR29Ubykge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdyZWFjdC1zbGljayBkZXByZWNhdGlvbiB3YXJuaW5nOiBzbGlja0dvVG8gcHJvcCBpcyBkZXByZWNhdGVkIGFuZCBpdCB3aWxsIGJlIHJlbW92ZWQgaW4gbmV4dCByZWxlYXNlLiBVc2Ugc2xpY2tHb1RvIG1ldGhvZCBpbnN0ZWFkJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgbWVzc2FnZTogJ2luZGV4JyxcbiAgICAgICAgaW5kZXg6IG5leHRQcm9wcy5zbGlja0dvVG8sXG4gICAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgPj0gbmV4dFByb3BzLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgdGhpcy51cGRhdGUobmV4dFByb3BzKTtcbiAgICAgIHRoaXMuY2hhbmdlU2xpZGUoe1xuICAgICAgICBtZXNzYWdlOiAnaW5kZXgnLFxuICAgICAgICBpbmRleDogbmV4dFByb3BzLmNoaWxkcmVuLmxlbmd0aCAtIG5leHRQcm9wcy5zbGlkZXNUb1Nob3csXG4gICAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVwZGF0ZShuZXh0UHJvcHMpO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5hZGFwdEhlaWdodCgpO1xuICB9LFxuICBvbldpbmRvd1Jlc2l6ZWQ6IGZ1bmN0aW9uIG9uV2luZG93UmVzaXplZCgpIHtcbiAgICB0aGlzLnVwZGF0ZSh0aGlzLnByb3BzKTtcbiAgICAvLyBhbmltYXRpbmcgc3RhdGUgc2hvdWxkIGJlIGNsZWFyZWQgd2hpbGUgcmVzaXppbmcsIG90aGVyd2lzZSBhdXRvcGxheSBzdG9wcyB3b3JraW5nXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBhbmltYXRpbmc6IGZhbHNlXG4gICAgfSk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2spO1xuICAgIGRlbGV0ZSB0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrO1xuICB9LFxuICBzbGlja1ByZXY6IGZ1bmN0aW9uIHNsaWNrUHJldigpIHtcbiAgICB0aGlzLmNoYW5nZVNsaWRlKHsgbWVzc2FnZTogJ3ByZXZpb3VzJyB9KTtcbiAgfSxcbiAgc2xpY2tOZXh0OiBmdW5jdGlvbiBzbGlja05leHQoKSB7XG4gICAgdGhpcy5jaGFuZ2VTbGlkZSh7IG1lc3NhZ2U6ICduZXh0JyB9KTtcbiAgfSxcbiAgc2xpY2tHb1RvOiBmdW5jdGlvbiBzbGlja0dvVG8oc2xpZGUpIHtcbiAgICB0eXBlb2Ygc2xpZGUgPT09ICdudW1iZXInICYmIHRoaXMuY2hhbmdlU2xpZGUoe1xuICAgICAgbWVzc2FnZTogJ2luZGV4JyxcbiAgICAgIGluZGV4OiBzbGlkZSxcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGVcbiAgICB9KTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9ICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkoJ3NsaWNrLWluaXRpYWxpemVkJywgJ3NsaWNrLXNsaWRlcicsIHRoaXMucHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAnc2xpY2stdmVydGljYWwnOiB0aGlzLnByb3BzLnZlcnRpY2FsXG4gICAgfSk7XG5cbiAgICB2YXIgdHJhY2tQcm9wcyA9IHtcbiAgICAgIGZhZGU6IHRoaXMucHJvcHMuZmFkZSxcbiAgICAgIGNzc0Vhc2U6IHRoaXMucHJvcHMuY3NzRWFzZSxcbiAgICAgIHNwZWVkOiB0aGlzLnByb3BzLnNwZWVkLFxuICAgICAgaW5maW5pdGU6IHRoaXMucHJvcHMuaW5maW5pdGUsXG4gICAgICBjZW50ZXJNb2RlOiB0aGlzLnByb3BzLmNlbnRlck1vZGUsXG4gICAgICBmb2N1c09uU2VsZWN0OiB0aGlzLnByb3BzLmZvY3VzT25TZWxlY3QgPyB0aGlzLnNlbGVjdEhhbmRsZXIgOiBudWxsLFxuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgIGxhenlMb2FkOiB0aGlzLnByb3BzLmxhenlMb2FkLFxuICAgICAgbGF6eUxvYWRlZExpc3Q6IHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QsXG4gICAgICBydGw6IHRoaXMucHJvcHMucnRsLFxuICAgICAgc2xpZGVXaWR0aDogdGhpcy5zdGF0ZS5zbGlkZVdpZHRoLFxuICAgICAgc2xpZGVzVG9TaG93OiB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyxcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsLFxuICAgICAgc2xpZGVDb3VudDogdGhpcy5zdGF0ZS5zbGlkZUNvdW50LFxuICAgICAgdHJhY2tTdHlsZTogdGhpcy5zdGF0ZS50cmFja1N0eWxlLFxuICAgICAgdmFyaWFibGVXaWR0aDogdGhpcy5wcm9wcy52YXJpYWJsZVdpZHRoXG4gICAgfTtcblxuICAgIHZhciBkb3RzO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuZG90cyA9PT0gdHJ1ZSAmJiB0aGlzLnN0YXRlLnNsaWRlQ291bnQgPj0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgIHZhciBkb3RQcm9wcyA9IHtcbiAgICAgICAgZG90c0NsYXNzOiB0aGlzLnByb3BzLmRvdHNDbGFzcyxcbiAgICAgICAgc2xpZGVDb3VudDogdGhpcy5zdGF0ZS5zbGlkZUNvdW50LFxuICAgICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93LFxuICAgICAgICBjdXJyZW50U2xpZGU6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLFxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCxcbiAgICAgICAgY2xpY2tIYW5kbGVyOiB0aGlzLmNoYW5nZVNsaWRlLFxuICAgICAgICBjaGlsZHJlbjogdGhpcy5wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgY3VzdG9tUGFnaW5nOiB0aGlzLnByb3BzLmN1c3RvbVBhZ2luZ1xuICAgICAgfTtcblxuICAgICAgZG90cyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9kb3RzLkRvdHMsIGRvdFByb3BzKTtcbiAgICB9XG5cbiAgICB2YXIgcHJldkFycm93LCBuZXh0QXJyb3c7XG5cbiAgICB2YXIgYXJyb3dQcm9wcyA9IHtcbiAgICAgIGluZmluaXRlOiB0aGlzLnByb3BzLmluZmluaXRlLFxuICAgICAgY2VudGVyTW9kZTogdGhpcy5wcm9wcy5jZW50ZXJNb2RlLFxuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgIHNsaWRlQ291bnQ6IHRoaXMuc3RhdGUuc2xpZGVDb3VudCxcbiAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3csXG4gICAgICBwcmV2QXJyb3c6IHRoaXMucHJvcHMucHJldkFycm93LFxuICAgICAgbmV4dEFycm93OiB0aGlzLnByb3BzLm5leHRBcnJvdyxcbiAgICAgIGNsaWNrSGFuZGxlcjogdGhpcy5jaGFuZ2VTbGlkZVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5wcm9wcy5hcnJvd3MpIHtcbiAgICAgIHByZXZBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hcnJvd3MuUHJldkFycm93LCBhcnJvd1Byb3BzKTtcbiAgICAgIG5leHRBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hcnJvd3MuTmV4dEFycm93LCBhcnJvd1Byb3BzKTtcbiAgICB9XG5cbiAgICB2YXIgdmVydGljYWxIZWlnaHRTdHlsZSA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbCkge1xuICAgICAgdmVydGljYWxIZWlnaHRTdHlsZSA9IHtcbiAgICAgICAgaGVpZ2h0OiB0aGlzLnN0YXRlLmxpc3RIZWlnaHRcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGNlbnRlclBhZGRpbmdTdHlsZSA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmNlbnRlck1vZGUgPT09IHRydWUpIHtcbiAgICAgICAgY2VudGVyUGFkZGluZ1N0eWxlID0ge1xuICAgICAgICAgIHBhZGRpbmc6ICcwcHggJyArIHRoaXMucHJvcHMuY2VudGVyUGFkZGluZ1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG4gICAgICAgIGNlbnRlclBhZGRpbmdTdHlsZSA9IHtcbiAgICAgICAgICBwYWRkaW5nOiB0aGlzLnByb3BzLmNlbnRlclBhZGRpbmcgKyAnIDBweCdcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbGlzdFN0eWxlID0gKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCB2ZXJ0aWNhbEhlaWdodFN0eWxlLCBjZW50ZXJQYWRkaW5nU3R5bGUpO1xuXG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBvbk1vdXNlRW50ZXI6IHRoaXMub25Jbm5lclNsaWRlckVudGVyLFxuICAgICAgICBvbk1vdXNlTGVhdmU6IHRoaXMub25Jbm5lclNsaWRlckxlYXZlLFxuICAgICAgICBvbk1vdXNlT3ZlcjogdGhpcy5vbklubmVyU2xpZGVyT3ZlclxuICAgICAgfSxcbiAgICAgIHByZXZBcnJvdyxcbiAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAge1xuICAgICAgICAgIHJlZjogdGhpcy5saXN0UmVmSGFuZGxlcixcbiAgICAgICAgICBjbGFzc05hbWU6ICdzbGljay1saXN0JyxcbiAgICAgICAgICBzdHlsZTogbGlzdFN0eWxlLFxuICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLnN3aXBlU3RhcnQsXG4gICAgICAgICAgb25Nb3VzZU1vdmU6IHRoaXMuc3RhdGUuZHJhZ2dpbmcgPyB0aGlzLnN3aXBlTW92ZSA6IG51bGwsXG4gICAgICAgICAgb25Nb3VzZVVwOiB0aGlzLnN3aXBlRW5kLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZTogdGhpcy5zdGF0ZS5kcmFnZ2luZyA/IHRoaXMuc3dpcGVFbmQgOiBudWxsLFxuICAgICAgICAgIG9uVG91Y2hTdGFydDogdGhpcy5zd2lwZVN0YXJ0LFxuICAgICAgICAgIG9uVG91Y2hNb3ZlOiB0aGlzLnN0YXRlLmRyYWdnaW5nID8gdGhpcy5zd2lwZU1vdmUgOiBudWxsLFxuICAgICAgICAgIG9uVG91Y2hFbmQ6IHRoaXMuc3dpcGVFbmQsXG4gICAgICAgICAgb25Ub3VjaENhbmNlbDogdGhpcy5zdGF0ZS5kcmFnZ2luZyA/IHRoaXMuc3dpcGVFbmQgOiBudWxsLFxuICAgICAgICAgIG9uS2V5RG93bjogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5ID8gdGhpcy5rZXlIYW5kbGVyIDogbnVsbCB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfdHJhY2suVHJhY2ssXG4gICAgICAgICAgX2V4dGVuZHMoeyByZWY6IHRoaXMudHJhY2tSZWZIYW5kbGVyIH0sIHRyYWNrUHJvcHMpLFxuICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgKVxuICAgICAgKSxcbiAgICAgIG5leHRBcnJvdyxcbiAgICAgIGRvdHNcbiAgICApO1xuICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL2lubmVyLXNsaWRlci5qc1xuLy8gbW9kdWxlIGlkID0gMzE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF90cmFja0hlbHBlciA9IHJlcXVpcmUoJy4vdHJhY2tIZWxwZXInKTtcblxudmFyIF9oZWxwZXJzID0gcmVxdWlyZSgnLi9oZWxwZXJzJyk7XG5cbnZhciBfaGVscGVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWxwZXJzKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbnZhciBfcmVhY3REb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBFdmVudEhhbmRsZXJzID0ge1xuICAvLyBFdmVudCBoYW5kbGVyIGZvciBwcmV2aW91cyBhbmQgbmV4dFxuICBjaGFuZ2VTbGlkZTogZnVuY3Rpb24gY2hhbmdlU2xpZGUob3B0aW9ucykge1xuICAgIHZhciBpbmRleE9mZnNldCwgcHJldmlvdXNJbnQsIHNsaWRlT2Zmc2V0LCB1bmV2ZW5PZmZzZXQsIHRhcmdldFNsaWRlO1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIHZhciBzbGlkZXNUb1Njcm9sbCA9IF9wcm9wcy5zbGlkZXNUb1Njcm9sbDtcbiAgICB2YXIgc2xpZGVzVG9TaG93ID0gX3Byb3BzLnNsaWRlc1RvU2hvdztcbiAgICB2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICB2YXIgc2xpZGVDb3VudCA9IF9zdGF0ZS5zbGlkZUNvdW50O1xuICAgIHZhciBjdXJyZW50U2xpZGUgPSBfc3RhdGUuY3VycmVudFNsaWRlO1xuXG4gICAgdW5ldmVuT2Zmc2V0ID0gc2xpZGVDb3VudCAlIHNsaWRlc1RvU2Nyb2xsICE9PSAwO1xuICAgIGluZGV4T2Zmc2V0ID0gdW5ldmVuT2Zmc2V0ID8gMCA6IChzbGlkZUNvdW50IC0gY3VycmVudFNsaWRlKSAlIHNsaWRlc1RvU2Nyb2xsO1xuXG4gICAgaWYgKG9wdGlvbnMubWVzc2FnZSA9PT0gJ3ByZXZpb3VzJykge1xuICAgICAgc2xpZGVPZmZzZXQgPSBpbmRleE9mZnNldCA9PT0gMCA/IHNsaWRlc1RvU2Nyb2xsIDogc2xpZGVzVG9TaG93IC0gaW5kZXhPZmZzZXQ7XG4gICAgICB0YXJnZXRTbGlkZSA9IGN1cnJlbnRTbGlkZSAtIHNsaWRlT2Zmc2V0O1xuICAgICAgaWYgKHRoaXMucHJvcHMubGF6eUxvYWQpIHtcbiAgICAgICAgcHJldmlvdXNJbnQgPSBjdXJyZW50U2xpZGUgLSBzbGlkZU9mZnNldDtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBwcmV2aW91c0ludCA9PT0gLTEgPyBzbGlkZUNvdW50IC0gMSA6IHByZXZpb3VzSW50O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5tZXNzYWdlID09PSAnbmV4dCcpIHtcbiAgICAgIHNsaWRlT2Zmc2V0ID0gaW5kZXhPZmZzZXQgPT09IDAgPyBzbGlkZXNUb1Njcm9sbCA6IGluZGV4T2Zmc2V0O1xuICAgICAgdGFyZ2V0U2xpZGUgPSBjdXJyZW50U2xpZGUgKyBzbGlkZU9mZnNldDtcbiAgICAgIGlmICh0aGlzLnByb3BzLmxhenlMb2FkKSB7XG4gICAgICAgIHRhcmdldFNsaWRlID0gKGN1cnJlbnRTbGlkZSArIHNsaWRlc1RvU2Nyb2xsKSAlIHNsaWRlQ291bnQgKyBpbmRleE9mZnNldDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMubWVzc2FnZSA9PT0gJ2RvdHMnIHx8IG9wdGlvbnMubWVzc2FnZSA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgLy8gQ2xpY2sgb24gZG90c1xuICAgICAgdGFyZ2V0U2xpZGUgPSBvcHRpb25zLmluZGV4ICogb3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgIGlmICh0YXJnZXRTbGlkZSA9PT0gb3B0aW9ucy5jdXJyZW50U2xpZGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5tZXNzYWdlID09PSAnaW5kZXgnKSB7XG4gICAgICB0YXJnZXRTbGlkZSA9IHBhcnNlSW50KG9wdGlvbnMuaW5kZXgpO1xuICAgICAgaWYgKHRhcmdldFNsaWRlID09PSBvcHRpb25zLmN1cnJlbnRTbGlkZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zbGlkZUhhbmRsZXIodGFyZ2V0U2xpZGUpO1xuICB9LFxuXG4gIC8vIEFjY2Vzc2libGl0eSBoYW5kbGVyIGZvciBwcmV2aW91cyBhbmQgbmV4dFxuICBrZXlIYW5kbGVyOiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHtcbiAgICAvL0RvbnQgc2xpZGUgaWYgdGhlIGN1cnNvciBpcyBpbnNpZGUgdGhlIGZvcm0gZmllbGRzIGFuZCBhcnJvdyBrZXlzIGFyZSBwcmVzc2VkXG4gICAgaWYgKCFlLnRhcmdldC50YWdOYW1lLm1hdGNoKCdURVhUQVJFQXxJTlBVVHxTRUxFQ1QnKSkge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzcgJiYgdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5ID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlU2xpZGUoe1xuICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMucnRsID09PSB0cnVlID8gJ25leHQnIDogJ3ByZXZpb3VzJ1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSAmJiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VTbGlkZSh7XG4gICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy5ydGwgPT09IHRydWUgPyAncHJldmlvdXMnIDogJ25leHQnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgLy8gRm9jdXMgb24gc2VsZWN0aW5nIGEgc2xpZGUgKGNsaWNrIGhhbmRsZXIgb24gdHJhY2spXG4gIHNlbGVjdEhhbmRsZXI6IGZ1bmN0aW9uIHNlbGVjdEhhbmRsZXIob3B0aW9ucykge1xuICAgIHRoaXMuY2hhbmdlU2xpZGUob3B0aW9ucyk7XG4gIH0sXG4gIHN3aXBlU3RhcnQ6IGZ1bmN0aW9uIHN3aXBlU3RhcnQoZSkge1xuICAgIHZhciB0b3VjaGVzLCBwb3NYLCBwb3NZO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuc3dpcGUgPT09IGZhbHNlIHx8ICdvbnRvdWNoZW5kJyBpbiBkb2N1bWVudCAmJiB0aGlzLnByb3BzLnN3aXBlID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5kcmFnZ2FibGUgPT09IGZhbHNlICYmIGUudHlwZS5pbmRleE9mKCdtb3VzZScpICE9PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwb3NYID0gZS50b3VjaGVzICE9PSB1bmRlZmluZWQgPyBlLnRvdWNoZXNbMF0ucGFnZVggOiBlLmNsaWVudFg7XG4gICAgcG9zWSA9IGUudG91Y2hlcyAhPT0gdW5kZWZpbmVkID8gZS50b3VjaGVzWzBdLnBhZ2VZIDogZS5jbGllbnRZO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJhZ2dpbmc6IHRydWUsXG4gICAgICB0b3VjaE9iamVjdDoge1xuICAgICAgICBzdGFydFg6IHBvc1gsXG4gICAgICAgIHN0YXJ0WTogcG9zWSxcbiAgICAgICAgY3VyWDogcG9zWCxcbiAgICAgICAgY3VyWTogcG9zWVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzd2lwZU1vdmU6IGZ1bmN0aW9uIHN3aXBlTW92ZShlKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmRyYWdnaW5nKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlLmFuaW1hdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbCAmJiB0aGlzLnByb3BzLnN3aXBlVG9TbGlkZSAmJiB0aGlzLnByb3BzLnZlcnRpY2FsU3dpcGluZykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICB2YXIgc3dpcGVMZWZ0O1xuICAgIHZhciBjdXJMZWZ0LCBwb3NpdGlvbk9mZnNldDtcbiAgICB2YXIgdG91Y2hPYmplY3QgPSB0aGlzLnN0YXRlLnRvdWNoT2JqZWN0O1xuXG4gICAgY3VyTGVmdCA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tMZWZ0KSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgc2xpZGVJbmRleDogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICB0cmFja1JlZjogdGhpcy50cmFja1xuICAgIH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKTtcbiAgICB0b3VjaE9iamVjdC5jdXJYID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdLnBhZ2VYIDogZS5jbGllbnRYO1xuICAgIHRvdWNoT2JqZWN0LmN1clkgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVkgOiBlLmNsaWVudFk7XG4gICAgdG91Y2hPYmplY3Quc3dpcGVMZW5ndGggPSBNYXRoLnJvdW5kKE1hdGguc3FydChNYXRoLnBvdyh0b3VjaE9iamVjdC5jdXJYIC0gdG91Y2hPYmplY3Quc3RhcnRYLCAyKSkpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWxTd2lwaW5nKSB7XG4gICAgICB0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KE1hdGgucG93KHRvdWNoT2JqZWN0LmN1clkgLSB0b3VjaE9iamVjdC5zdGFydFksIDIpKSk7XG4gICAgfVxuXG4gICAgcG9zaXRpb25PZmZzZXQgPSAodGhpcy5wcm9wcy5ydGwgPT09IGZhbHNlID8gMSA6IC0xKSAqICh0b3VjaE9iamVjdC5jdXJYID4gdG91Y2hPYmplY3Quc3RhcnRYID8gMSA6IC0xKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsU3dpcGluZykge1xuICAgICAgcG9zaXRpb25PZmZzZXQgPSB0b3VjaE9iamVjdC5jdXJZID4gdG91Y2hPYmplY3Quc3RhcnRZID8gMSA6IC0xO1xuICAgIH1cblxuICAgIHZhciBjdXJyZW50U2xpZGUgPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZTtcbiAgICB2YXIgZG90Q291bnQgPSBNYXRoLmNlaWwodGhpcy5zdGF0ZS5zbGlkZUNvdW50IC8gdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCk7XG4gICAgdmFyIHN3aXBlRGlyZWN0aW9uID0gdGhpcy5zd2lwZURpcmVjdGlvbih0aGlzLnN0YXRlLnRvdWNoT2JqZWN0KTtcbiAgICB2YXIgdG91Y2hTd2lwZUxlbmd0aCA9IHRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuaW5maW5pdGUgPT09IGZhbHNlKSB7XG4gICAgICBpZiAoY3VycmVudFNsaWRlID09PSAwICYmIHN3aXBlRGlyZWN0aW9uID09PSAncmlnaHQnIHx8IGN1cnJlbnRTbGlkZSArIDEgPj0gZG90Q291bnQgJiYgc3dpcGVEaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICB0b3VjaFN3aXBlTGVuZ3RoID0gdG91Y2hPYmplY3Quc3dpcGVMZW5ndGggKiB0aGlzLnByb3BzLmVkZ2VGcmljdGlvbjtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lZGdlRHJhZ2dlZCA9PT0gZmFsc2UgJiYgdGhpcy5wcm9wcy5lZGdlRXZlbnQpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmVkZ2VFdmVudChzd2lwZURpcmVjdGlvbik7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkZ2VEcmFnZ2VkOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuc3dpcGVkID09PSBmYWxzZSAmJiB0aGlzLnByb3BzLnN3aXBlRXZlbnQpIHtcbiAgICAgIHRoaXMucHJvcHMuc3dpcGVFdmVudChzd2lwZURpcmVjdGlvbik7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgc3dpcGVkOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wcm9wcy52ZXJ0aWNhbCkge1xuICAgICAgc3dpcGVMZWZ0ID0gY3VyTGVmdCArIHRvdWNoU3dpcGVMZW5ndGggKiBwb3NpdGlvbk9mZnNldDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpcGVMZWZ0ID0gY3VyTGVmdCArIHRvdWNoU3dpcGVMZW5ndGggKiAodGhpcy5zdGF0ZS5saXN0SGVpZ2h0IC8gdGhpcy5zdGF0ZS5saXN0V2lkdGgpICogcG9zaXRpb25PZmZzZXQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWxTd2lwaW5nKSB7XG4gICAgICBzd2lwZUxlZnQgPSBjdXJMZWZ0ICsgdG91Y2hTd2lwZUxlbmd0aCAqIHBvc2l0aW9uT2Zmc2V0O1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdG91Y2hPYmplY3Q6IHRvdWNoT2JqZWN0LFxuICAgICAgc3dpcGVMZWZ0OiBzd2lwZUxlZnQsXG4gICAgICB0cmFja1N0eWxlOiAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiBzd2lwZUxlZnQgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpXG4gICAgfSk7XG5cbiAgICBpZiAoTWF0aC5hYnModG91Y2hPYmplY3QuY3VyWCAtIHRvdWNoT2JqZWN0LnN0YXJ0WCkgPCBNYXRoLmFicyh0b3VjaE9iamVjdC5jdXJZIC0gdG91Y2hPYmplY3Quc3RhcnRZKSAqIDAuOCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodG91Y2hPYmplY3Quc3dpcGVMZW5ndGggPiA0KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LFxuICBnZXROYXZpZ2FibGVJbmRleGVzOiBmdW5jdGlvbiBnZXROYXZpZ2FibGVJbmRleGVzKCkge1xuICAgIHZhciBtYXggPSB2b2lkIDA7XG4gICAgdmFyIGJyZWFrUG9pbnQgPSAwO1xuICAgIHZhciBjb3VudGVyID0gMDtcbiAgICB2YXIgaW5kZXhlcyA9IFtdO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLmluZmluaXRlKSB7XG4gICAgICBtYXggPSB0aGlzLnN0YXRlLnNsaWRlQ291bnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrUG9pbnQgPSB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyAqIC0xO1xuICAgICAgY291bnRlciA9IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93ICogLTE7XG4gICAgICBtYXggPSB0aGlzLnN0YXRlLnNsaWRlQ291bnQgKiAyO1xuICAgIH1cblxuICAgIHdoaWxlIChicmVha1BvaW50IDwgbWF4KSB7XG4gICAgICBpbmRleGVzLnB1c2goYnJlYWtQb2ludCk7XG4gICAgICBicmVha1BvaW50ID0gY291bnRlciArIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGw7XG5cbiAgICAgIGNvdW50ZXIgKz0gdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCA8PSB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyA/IHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwgOiB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdztcbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXhlcztcbiAgfSxcbiAgY2hlY2tOYXZpZ2FibGU6IGZ1bmN0aW9uIGNoZWNrTmF2aWdhYmxlKGluZGV4KSB7XG4gICAgdmFyIG5hdmlnYWJsZXMgPSB0aGlzLmdldE5hdmlnYWJsZUluZGV4ZXMoKTtcbiAgICB2YXIgcHJldk5hdmlnYWJsZSA9IDA7XG5cbiAgICBpZiAoaW5kZXggPiBuYXZpZ2FibGVzW25hdmlnYWJsZXMubGVuZ3RoIC0gMV0pIHtcbiAgICAgIGluZGV4ID0gbmF2aWdhYmxlc1tuYXZpZ2FibGVzLmxlbmd0aCAtIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBuIGluIG5hdmlnYWJsZXMpIHtcbiAgICAgICAgaWYgKGluZGV4IDwgbmF2aWdhYmxlc1tuXSkge1xuICAgICAgICAgIGluZGV4ID0gcHJldk5hdmlnYWJsZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHByZXZOYXZpZ2FibGUgPSBuYXZpZ2FibGVzW25dO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbmRleDtcbiAgfSxcbiAgZ2V0U2xpZGVDb3VudDogZnVuY3Rpb24gZ2V0U2xpZGVDb3VudCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGNlbnRlck9mZnNldCA9IHRoaXMucHJvcHMuY2VudGVyTW9kZSA/IHRoaXMuc3RhdGUuc2xpZGVXaWR0aCAqIE1hdGguZmxvb3IodGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cgLyAyKSA6IDA7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5zd2lwZVRvU2xpZGUpIHtcbiAgICAgIHZhciBzd2lwZWRTbGlkZSA9IHZvaWQgMDtcblxuICAgICAgdmFyIHNsaWNrTGlzdCA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLmxpc3QpO1xuXG4gICAgICB2YXIgc2xpZGVzID0gc2xpY2tMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGljay1zbGlkZScpO1xuXG4gICAgICBBcnJheS5mcm9tKHNsaWRlcykuZXZlcnkoZnVuY3Rpb24gKHNsaWRlKSB7XG4gICAgICAgIGlmICghX3RoaXMucHJvcHMudmVydGljYWwpIHtcbiAgICAgICAgICBpZiAoc2xpZGUub2Zmc2V0TGVmdCAtIGNlbnRlck9mZnNldCArIF90aGlzLmdldFdpZHRoKHNsaWRlKSAvIDIgPiBfdGhpcy5zdGF0ZS5zd2lwZUxlZnQgKiAtMSkge1xuICAgICAgICAgICAgc3dpcGVkU2xpZGUgPSBzbGlkZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHNsaWRlLm9mZnNldFRvcCArIF90aGlzLmdldEhlaWdodChzbGlkZSkgLyAyID4gX3RoaXMuc3RhdGUuc3dpcGVMZWZ0ICogLTEpIHtcbiAgICAgICAgICAgIHN3aXBlZFNsaWRlID0gc2xpZGU7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcblxuICAgICAgdmFyIHNsaWRlc1RyYXZlcnNlZCA9IE1hdGguYWJzKHN3aXBlZFNsaWRlLmRhdGFzZXQuaW5kZXggLSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSkgfHwgMTtcblxuICAgICAgcmV0dXJuIHNsaWRlc1RyYXZlcnNlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGw7XG4gICAgfVxuICB9LFxuXG4gIHN3aXBlRW5kOiBmdW5jdGlvbiBzd2lwZUVuZChlKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmRyYWdnaW5nKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5zd2lwZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0b3VjaE9iamVjdCA9IHRoaXMuc3RhdGUudG91Y2hPYmplY3Q7XG4gICAgdmFyIG1pblN3aXBlID0gdGhpcy5zdGF0ZS5saXN0V2lkdGggLyB0aGlzLnByb3BzLnRvdWNoVGhyZXNob2xkO1xuICAgIHZhciBzd2lwZURpcmVjdGlvbiA9IHRoaXMuc3dpcGVEaXJlY3Rpb24odG91Y2hPYmplY3QpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWxTd2lwaW5nKSB7XG4gICAgICBtaW5Td2lwZSA9IHRoaXMuc3RhdGUubGlzdEhlaWdodCAvIHRoaXMucHJvcHMudG91Y2hUaHJlc2hvbGQ7XG4gICAgfVxuXG4gICAgLy8gcmVzZXQgdGhlIHN0YXRlIG9mIHRvdWNoIHJlbGF0ZWQgc3RhdGUgdmFyaWFibGVzLlxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJhZ2dpbmc6IGZhbHNlLFxuICAgICAgZWRnZURyYWdnZWQ6IGZhbHNlLFxuICAgICAgc3dpcGVkOiBmYWxzZSxcbiAgICAgIHN3aXBlTGVmdDogbnVsbCxcbiAgICAgIHRvdWNoT2JqZWN0OiB7fVxuICAgIH0pO1xuICAgIC8vIEZpeCBmb3IgIzEzXG4gICAgaWYgKCF0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodG91Y2hPYmplY3Quc3dpcGVMZW5ndGggPiBtaW5Td2lwZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB2YXIgc2xpZGVDb3VudCA9IHZvaWQgMCxcbiAgICAgICAgICBuZXdTbGlkZSA9IHZvaWQgMDtcblxuICAgICAgc3dpdGNoIChzd2lwZURpcmVjdGlvbikge1xuXG4gICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICBjYXNlICdkb3duJzpcbiAgICAgICAgICBuZXdTbGlkZSA9IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlICsgdGhpcy5nZXRTbGlkZUNvdW50KCk7XG4gICAgICAgICAgc2xpZGVDb3VudCA9IHRoaXMucHJvcHMuc3dpcGVUb1NsaWRlID8gdGhpcy5jaGVja05hdmlnYWJsZShuZXdTbGlkZSkgOiBuZXdTbGlkZTtcbiAgICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnREaXJlY3Rpb24gPSAwO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgY2FzZSAndXAnOlxuICAgICAgICAgIG5ld1NsaWRlID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgLSB0aGlzLmdldFNsaWRlQ291bnQoKTtcbiAgICAgICAgICBzbGlkZUNvdW50ID0gdGhpcy5wcm9wcy5zd2lwZVRvU2xpZGUgPyB0aGlzLmNoZWNrTmF2aWdhYmxlKG5ld1NsaWRlKSA6IG5ld1NsaWRlO1xuICAgICAgICAgIHRoaXMuc3RhdGUuY3VycmVudERpcmVjdGlvbiA9IDE7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBzbGlkZUNvdW50ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGU7XG5cbiAgICAgIH1cblxuICAgICAgdGhpcy5zbGlkZUhhbmRsZXIoc2xpZGVDb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFkanVzdCB0aGUgdHJhY2sgYmFjayB0byBpdCdzIG9yaWdpbmFsIHBvc2l0aW9uLlxuICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0xlZnQpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7XG4gICAgICAgIHNsaWRlSW5kZXg6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLFxuICAgICAgICB0cmFja1JlZjogdGhpcy50cmFja1xuICAgICAgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdHJhY2tTdHlsZTogKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0FuaW1hdGVDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IGN1cnJlbnRMZWZ0IH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBvbklubmVyU2xpZGVyRW50ZXI6IGZ1bmN0aW9uIG9uSW5uZXJTbGlkZXJFbnRlcihlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b3BsYXkgJiYgdGhpcy5wcm9wcy5wYXVzZU9uSG92ZXIpIHtcbiAgICAgIHRoaXMucGF1c2UoKTtcbiAgICB9XG4gIH0sXG4gIG9uSW5uZXJTbGlkZXJPdmVyOiBmdW5jdGlvbiBvbklubmVyU2xpZGVyT3ZlcihlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b3BsYXkgJiYgdGhpcy5wcm9wcy5wYXVzZU9uSG92ZXIpIHtcbiAgICAgIHRoaXMucGF1c2UoKTtcbiAgICB9XG4gIH0sXG4gIG9uSW5uZXJTbGlkZXJMZWF2ZTogZnVuY3Rpb24gb25Jbm5lclNsaWRlckxlYXZlKGUpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvcGxheSAmJiB0aGlzLnByb3BzLnBhdXNlT25Ib3Zlcikge1xuICAgICAgdGhpcy5hdXRvUGxheSgpO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRXZlbnRIYW5kbGVycztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL21peGlucy9ldmVudC1oYW5kbGVycy5qc1xuLy8gbW9kdWxlIGlkID0gMzE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2lubmVyU2xpZGVyID0gcmVxdWlyZSgnLi9pbm5lci1zbGlkZXInKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbnZhciBfanNvbjJtcSA9IHJlcXVpcmUoJ2pzb24ybXEnKTtcblxudmFyIF9qc29uMm1xMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2pzb24ybXEpO1xuXG52YXIgX3JlYWN0UmVzcG9uc2l2ZU1peGluID0gcmVxdWlyZSgncmVhY3QtcmVzcG9uc2l2ZS1taXhpbicpO1xuXG52YXIgX3JlYWN0UmVzcG9uc2l2ZU1peGluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0UmVzcG9uc2l2ZU1peGluKTtcblxudmFyIF9kZWZhdWx0UHJvcHMgPSByZXF1aXJlKCcuL2RlZmF1bHQtcHJvcHMnKTtcblxudmFyIF9kZWZhdWx0UHJvcHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmYXVsdFByb3BzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFNsaWRlciA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnU2xpZGVyJyxcblxuICBtaXhpbnM6IFtfcmVhY3RSZXNwb25zaXZlTWl4aW4yLmRlZmF1bHRdLFxuICBpbm5lclNsaWRlcjogbnVsbCxcbiAgaW5uZXJTbGlkZXJSZWZIYW5kbGVyOiBmdW5jdGlvbiBpbm5lclNsaWRlclJlZkhhbmRsZXIocmVmKSB7XG4gICAgdGhpcy5pbm5lclNsaWRlciA9IHJlZjtcbiAgfSxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJyZWFrcG9pbnQ6IG51bGxcbiAgICB9O1xuICB9LFxuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMucHJvcHMucmVzcG9uc2l2ZSkge1xuICAgICAgdmFyIGJyZWFrcG9pbnRzID0gdGhpcy5wcm9wcy5yZXNwb25zaXZlLm1hcChmdW5jdGlvbiAoYnJlYWtwdCkge1xuICAgICAgICByZXR1cm4gYnJlYWtwdC5icmVha3BvaW50O1xuICAgICAgfSk7XG4gICAgICBicmVha3BvaW50cy5zb3J0KGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiB4IC0geTtcbiAgICAgIH0pO1xuXG4gICAgICBicmVha3BvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChicmVha3BvaW50LCBpbmRleCkge1xuICAgICAgICB2YXIgYlF1ZXJ5O1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICBiUXVlcnkgPSAoMCwgX2pzb24ybXEyLmRlZmF1bHQpKHsgbWluV2lkdGg6IDAsIG1heFdpZHRoOiBicmVha3BvaW50IH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJRdWVyeSA9ICgwLCBfanNvbjJtcTIuZGVmYXVsdCkoeyBtaW5XaWR0aDogYnJlYWtwb2ludHNbaW5kZXggLSAxXSwgbWF4V2lkdGg6IGJyZWFrcG9pbnQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMubWVkaWEoYlF1ZXJ5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBicmVha3BvaW50OiBicmVha3BvaW50IH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZWdpc3RlciBtZWRpYSBxdWVyeSBmb3IgZnVsbCBzY3JlZW4uIE5lZWQgdG8gc3VwcG9ydCByZXNpemUgZnJvbSBzbWFsbCB0byBsYXJnZVxuICAgICAgdmFyIHF1ZXJ5ID0gKDAsIF9qc29uMm1xMi5kZWZhdWx0KSh7IG1pbldpZHRoOiBicmVha3BvaW50cy5zbGljZSgtMSlbMF0gfSk7XG5cbiAgICAgIHRoaXMubWVkaWEocXVlcnksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBicmVha3BvaW50OiBudWxsIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHNsaWNrUHJldjogZnVuY3Rpb24gc2xpY2tQcmV2KCkge1xuICAgIHRoaXMuaW5uZXJTbGlkZXIuc2xpY2tQcmV2KCk7XG4gIH0sXG5cbiAgc2xpY2tOZXh0OiBmdW5jdGlvbiBzbGlja05leHQoKSB7XG4gICAgdGhpcy5pbm5lclNsaWRlci5zbGlja05leHQoKTtcbiAgfSxcblxuICBzbGlja0dvVG86IGZ1bmN0aW9uIHNsaWNrR29UbyhzbGlkZSkge1xuICAgIHRoaXMuaW5uZXJTbGlkZXIuc2xpY2tHb1RvKHNsaWRlKTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBzZXR0aW5ncztcbiAgICB2YXIgbmV3UHJvcHM7XG4gICAgaWYgKHRoaXMuc3RhdGUuYnJlYWtwb2ludCkge1xuICAgICAgbmV3UHJvcHMgPSB0aGlzLnByb3BzLnJlc3BvbnNpdmUuZmlsdGVyKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgIHJldHVybiByZXNwLmJyZWFrcG9pbnQgPT09IF90aGlzMi5zdGF0ZS5icmVha3BvaW50O1xuICAgICAgfSk7XG4gICAgICBzZXR0aW5ncyA9IG5ld1Byb3BzWzBdLnNldHRpbmdzID09PSAndW5zbGljaycgPyAndW5zbGljaycgOiAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe30sIHRoaXMucHJvcHMsIG5ld1Byb3BzWzBdLnNldHRpbmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0dGluZ3MgPSAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe30sIF9kZWZhdWx0UHJvcHMyLmRlZmF1bHQsIHRoaXMucHJvcHMpO1xuICAgIH1cblxuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucHJvcHMuY2hpbGRyZW47XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dO1xuICAgIH1cblxuICAgIC8vIENoaWxkcmVuIG1heSBjb250YWluIGZhbHNlIG9yIG51bGwsIHNvIHdlIHNob3VsZCBmaWx0ZXIgdGhlbVxuICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgcmV0dXJuICEhY2hpbGQ7XG4gICAgfSk7XG5cbiAgICBpZiAoc2V0dGluZ3MgPT09ICd1bnNsaWNrJykge1xuICAgICAgLy8gaWYgJ3Vuc2xpY2snIHJlc3BvbnNpdmUgYnJlYWtwb2ludCBzZXR0aW5nIHVzZWQsIGp1c3QgcmV0dXJuIHRoZSA8U2xpZGVyPiB0YWcgbmVzdGVkIEhUTUxcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIG51bGwsXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9pbm5lclNsaWRlci5Jbm5lclNsaWRlcixcbiAgICAgICAgX2V4dGVuZHMoeyByZWY6IHRoaXMuaW5uZXJTbGlkZXJSZWZIYW5kbGVyIH0sIHNldHRpbmdzKSxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgICk7XG4gICAgfVxuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTbGlkZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXNsaWNrL2xpYi9zbGlkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLlRyYWNrID0gdW5kZWZpbmVkO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfb2JqZWN0QXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG52YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXG52YXIgX2NsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGdldFNsaWRlQ2xhc3NlcyA9IGZ1bmN0aW9uIGdldFNsaWRlQ2xhc3NlcyhzcGVjKSB7XG4gIHZhciBzbGlja0FjdGl2ZSwgc2xpY2tDZW50ZXIsIHNsaWNrQ2xvbmVkO1xuICB2YXIgY2VudGVyT2Zmc2V0LCBpbmRleDtcblxuICBpZiAoc3BlYy5ydGwpIHtcbiAgICBpbmRleCA9IHNwZWMuc2xpZGVDb3VudCAtIDEgLSBzcGVjLmluZGV4O1xuICB9IGVsc2Uge1xuICAgIGluZGV4ID0gc3BlYy5pbmRleDtcbiAgfVxuXG4gIHNsaWNrQ2xvbmVkID0gaW5kZXggPCAwIHx8IGluZGV4ID49IHNwZWMuc2xpZGVDb3VudDtcbiAgaWYgKHNwZWMuY2VudGVyTW9kZSkge1xuICAgIGNlbnRlck9mZnNldCA9IE1hdGguZmxvb3Ioc3BlYy5zbGlkZXNUb1Nob3cgLyAyKTtcbiAgICBzbGlja0NlbnRlciA9IChpbmRleCAtIHNwZWMuY3VycmVudFNsaWRlKSAlIHNwZWMuc2xpZGVDb3VudCA9PT0gMDtcbiAgICBpZiAoaW5kZXggPiBzcGVjLmN1cnJlbnRTbGlkZSAtIGNlbnRlck9mZnNldCAtIDEgJiYgaW5kZXggPD0gc3BlYy5jdXJyZW50U2xpZGUgKyBjZW50ZXJPZmZzZXQpIHtcbiAgICAgIHNsaWNrQWN0aXZlID0gdHJ1ZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc2xpY2tBY3RpdmUgPSBzcGVjLmN1cnJlbnRTbGlkZSA8PSBpbmRleCAmJiBpbmRleCA8IHNwZWMuY3VycmVudFNsaWRlICsgc3BlYy5zbGlkZXNUb1Nob3c7XG4gIH1cbiAgcmV0dXJuICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkoe1xuICAgICdzbGljay1zbGlkZSc6IHRydWUsXG4gICAgJ3NsaWNrLWFjdGl2ZSc6IHNsaWNrQWN0aXZlLFxuICAgICdzbGljay1jZW50ZXInOiBzbGlja0NlbnRlcixcbiAgICAnc2xpY2stY2xvbmVkJzogc2xpY2tDbG9uZWRcbiAgfSk7XG59O1xuXG52YXIgZ2V0U2xpZGVTdHlsZSA9IGZ1bmN0aW9uIGdldFNsaWRlU3R5bGUoc3BlYykge1xuICB2YXIgc3R5bGUgPSB7fTtcblxuICBpZiAoc3BlYy52YXJpYWJsZVdpZHRoID09PSB1bmRlZmluZWQgfHwgc3BlYy52YXJpYWJsZVdpZHRoID09PSBmYWxzZSkge1xuICAgIHN0eWxlLndpZHRoID0gc3BlYy5zbGlkZVdpZHRoO1xuICB9XG5cbiAgaWYgKHNwZWMuZmFkZSkge1xuICAgIHN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICBzdHlsZS5sZWZ0ID0gLXNwZWMuaW5kZXggKiBzcGVjLnNsaWRlV2lkdGg7XG4gICAgc3R5bGUub3BhY2l0eSA9IHNwZWMuY3VycmVudFNsaWRlID09PSBzcGVjLmluZGV4ID8gMSA6IDA7XG4gICAgc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5ICcgKyBzcGVjLnNwZWVkICsgJ21zICcgKyBzcGVjLmNzc0Vhc2U7XG4gICAgc3R5bGUuV2Via2l0VHJhbnNpdGlvbiA9ICdvcGFjaXR5ICcgKyBzcGVjLnNwZWVkICsgJ21zICcgKyBzcGVjLmNzc0Vhc2U7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59O1xuXG52YXIgZ2V0S2V5ID0gZnVuY3Rpb24gZ2V0S2V5KGNoaWxkLCBmYWxsYmFja0tleSkge1xuICAvLyBrZXkgY291bGQgYmUgYSB6ZXJvXG4gIHJldHVybiBjaGlsZC5rZXkgPT09IG51bGwgfHwgY2hpbGQua2V5ID09PSB1bmRlZmluZWQgPyBmYWxsYmFja0tleSA6IGNoaWxkLmtleTtcbn07XG5cbnZhciByZW5kZXJTbGlkZXMgPSBmdW5jdGlvbiByZW5kZXJTbGlkZXMoc3BlYykge1xuICB2YXIga2V5O1xuICB2YXIgc2xpZGVzID0gW107XG4gIHZhciBwcmVDbG9uZVNsaWRlcyA9IFtdO1xuICB2YXIgcG9zdENsb25lU2xpZGVzID0gW107XG4gIHZhciBjb3VudCA9IF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5jb3VudChzcGVjLmNoaWxkcmVuKTtcblxuICBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uZm9yRWFjaChzcGVjLmNoaWxkcmVuLCBmdW5jdGlvbiAoZWxlbSwgaW5kZXgpIHtcbiAgICB2YXIgY2hpbGQgPSB2b2lkIDA7XG4gICAgdmFyIGNoaWxkT25DbGlja09wdGlvbnMgPSB7XG4gICAgICBtZXNzYWdlOiAnY2hpbGRyZW4nLFxuICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgc2xpZGVzVG9TY3JvbGw6IHNwZWMuc2xpZGVzVG9TY3JvbGwsXG4gICAgICBjdXJyZW50U2xpZGU6IHNwZWMuY3VycmVudFNsaWRlXG4gICAgfTtcblxuICAgIGlmICghc3BlYy5sYXp5TG9hZCB8IChzcGVjLmxhenlMb2FkICYmIHNwZWMubGF6eUxvYWRlZExpc3QuaW5kZXhPZihpbmRleCkgPj0gMCkpIHtcbiAgICAgIGNoaWxkID0gZWxlbTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgbnVsbCk7XG4gICAgfVxuICAgIHZhciBjaGlsZFN0eWxlID0gZ2V0U2xpZGVTdHlsZSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe30sIHNwZWMsIHsgaW5kZXg6IGluZGV4IH0pKTtcbiAgICB2YXIgc2xpY2tDbGFzc2VzID0gZ2V0U2xpZGVDbGFzc2VzKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGluZGV4OiBpbmRleCB9LCBzcGVjKSk7XG4gICAgdmFyIGNzc0NsYXNzZXM7XG5cbiAgICBpZiAoY2hpbGQucHJvcHMuY2xhc3NOYW1lKSB7XG4gICAgICBjc3NDbGFzc2VzID0gKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KShzbGlja0NsYXNzZXMsIGNoaWxkLnByb3BzLmNsYXNzTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNzc0NsYXNzZXMgPSBzbGlja0NsYXNzZXM7XG4gICAgfVxuXG4gICAgdmFyIG9uQ2xpY2sgPSBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgIGNoaWxkLnByb3BzICYmIGNoaWxkLnByb3BzLm9uQ2xpY2sgJiYgY2hpbGQucHJvcHMub25DbGljayhlKTtcbiAgICAgIGlmIChzcGVjLmZvY3VzT25TZWxlY3QpIHtcbiAgICAgICAgc3BlYy5mb2N1c09uU2VsZWN0KGNoaWxkT25DbGlja09wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBzbGlkZXMucHVzaChfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICBrZXk6ICdvcmlnaW5hbCcgKyBnZXRLZXkoY2hpbGQsIGluZGV4KSxcbiAgICAgICdkYXRhLWluZGV4JzogaW5kZXgsXG4gICAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMsXG4gICAgICB0YWJJbmRleDogJy0xJyxcbiAgICAgIHN0eWxlOiAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBvdXRsaW5lOiAnbm9uZScgfSwgY2hpbGQucHJvcHMuc3R5bGUgfHwge30sIGNoaWxkU3R5bGUpLFxuICAgICAgb25DbGljazogb25DbGlja1xuICAgIH0pKTtcblxuICAgIC8vIHZhcmlhYmxlV2lkdGggZG9lc24ndCB3cmFwIHByb3Blcmx5LlxuICAgIGlmIChzcGVjLmluZmluaXRlICYmIHNwZWMuZmFkZSA9PT0gZmFsc2UpIHtcbiAgICAgIHZhciBpbmZpbml0ZUNvdW50ID0gc3BlYy52YXJpYWJsZVdpZHRoID8gc3BlYy5zbGlkZXNUb1Nob3cgKyAxIDogc3BlYy5zbGlkZXNUb1Nob3c7XG5cbiAgICAgIGlmIChpbmRleCA+PSBjb3VudCAtIGluZmluaXRlQ291bnQpIHtcbiAgICAgICAga2V5ID0gLShjb3VudCAtIGluZGV4KTtcbiAgICAgICAgcHJlQ2xvbmVTbGlkZXMucHVzaChfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICAgICAga2V5OiAncHJlY2xvbmVkJyArIGdldEtleShjaGlsZCwga2V5KSxcbiAgICAgICAgICAnZGF0YS1pbmRleCc6IGtleSxcbiAgICAgICAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMsXG4gICAgICAgICAgc3R5bGU6ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgY2hpbGQucHJvcHMuc3R5bGUgfHwge30sIGNoaWxkU3R5bGUpLFxuICAgICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2tcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5kZXggPCBpbmZpbml0ZUNvdW50KSB7XG4gICAgICAgIGtleSA9IGNvdW50ICsgaW5kZXg7XG4gICAgICAgIHBvc3RDbG9uZVNsaWRlcy5wdXNoKF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgICAgICBrZXk6ICdwb3N0Y2xvbmVkJyArIGdldEtleShjaGlsZCwga2V5KSxcbiAgICAgICAgICAnZGF0YS1pbmRleCc6IGtleSxcbiAgICAgICAgICBjbGFzc05hbWU6IGNzc0NsYXNzZXMsXG4gICAgICAgICAgc3R5bGU6ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgY2hpbGQucHJvcHMuc3R5bGUgfHwge30sIGNoaWxkU3R5bGUpLFxuICAgICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2tcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKHNwZWMucnRsKSB7XG4gICAgcmV0dXJuIHByZUNsb25lU2xpZGVzLmNvbmNhdChzbGlkZXMsIHBvc3RDbG9uZVNsaWRlcykucmV2ZXJzZSgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwcmVDbG9uZVNsaWRlcy5jb25jYXQoc2xpZGVzLCBwb3N0Q2xvbmVTbGlkZXMpO1xuICB9XG59O1xuXG52YXIgVHJhY2sgPSBleHBvcnRzLlRyYWNrID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdUcmFjaycsXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIHNsaWRlcyA9IHJlbmRlclNsaWRlcy5jYWxsKHRoaXMsIHRoaXMucHJvcHMpO1xuICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICdkaXYnLFxuICAgICAgeyBjbGFzc05hbWU6ICdzbGljay10cmFjaycsIHN0eWxlOiB0aGlzLnByb3BzLnRyYWNrU3R5bGUgfSxcbiAgICAgIHNsaWRlc1xuICAgICk7XG4gIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1zbGljay9saWIvdHJhY2suanNcbi8vIG1vZHVsZSBpZCA9IDMxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5mdW5jdGlvbiBjcmVhdGVUaHVua01pZGRsZXdhcmUoZXh0cmFBcmd1bWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLFxuICAgICAgICBnZXRTdGF0ZSA9IF9yZWYuZ2V0U3RhdGU7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24oZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYUFyZ3VtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbnZhciB0aHVuayA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZSgpO1xudGh1bmsud2l0aEV4dHJhQXJndW1lbnQgPSBjcmVhdGVUaHVua01pZGRsZXdhcmU7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHRodW5rO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWR1eC10aHVuay9saWIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDMzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIndXNlIHN0cmljdCc7XG5cbi8qIGVzbGludCBuby11bmRlZmluZWQ6IDAgKi9cblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxudmFyIGFzc2lnbiA9IHZvaWQgMDtcblxuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduID09PSAnZnVuY3Rpb24nKSB7XG4gIGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG59IGVsc2Uge1xuICBhc3NpZ24gPSBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuXG4gICAgdmFyIHByb3BlcnR5T2JqZWN0cyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgIGlmIChwcm9wZXJ0eU9iamVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgcHJvcGVydHlPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgdmFyIG5leHRLZXkgPSB2b2lkIDA7XG5cbiAgICAgICAgICBmb3IgKG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XG4gICAgICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG59XG5cbnZhciBhc3NpZ24kMSA9IGFzc2lnbjtcblxudmFyIGluY2x1ZGVzID0gdm9pZCAwO1xuXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xuICBpbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzKGFycmF5LCBzZWFyY2hFbGVtZW50KSB7XG4gICAgdmFyIE9iamVjdGlmaWVkQXJyYXkgPSBPYmplY3QoYXJyYXkpO1xuICAgIHZhciBsZW5ndGggPSBwYXJzZUludChPYmplY3RpZmllZEFycmF5Lmxlbmd0aCwgMTApIHx8IDA7XG5cbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0SW5kZXggPSBwYXJzZUludChhcmd1bWVudHNbMl0sIDEwKSB8fCAwO1xuICAgIHZhciBpbmRleCA9IHZvaWQgMDtcblxuICAgIGlmIChzdGFydEluZGV4ID49IDApIHtcbiAgICAgIGluZGV4ID0gc3RhcnRJbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXggPSBsZW5ndGggKyBzdGFydEluZGV4O1xuXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IE9iamVjdGlmaWVkQXJyYXlbaW5kZXhdO1xuXG4gICAgICAvKiBlc2xpbnQgbm8tc2VsZi1jb21wYXJlOjAgKi9cbiAgICAgIGlmIChzZWFyY2hFbGVtZW50ID09PSBjdXJyZW50RWxlbWVudCB8fCBzZWFyY2hFbGVtZW50ICE9PSBzZWFyY2hFbGVtZW50ICYmIGN1cnJlbnRFbGVtZW50ICE9PSBjdXJyZW50RWxlbWVudCkge1xuICAgICAgICAvLyBOYU4gIT09IE5hTlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGluZGV4Kys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xufSBlbHNlIHtcbiAgaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyhhcnJheSkge1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmNsdWRlcy5hcHBseShhcnJheSwgYXJncyk7XG4gIH07XG59XG5cbnZhciBpbmNsdWRlcyQxID0gaW5jbHVkZXM7XG5cbmZ1bmN0aW9uIHdyYXAoZnVuYywgc3VwZXJGdW5jKSB7XG4gIGZ1bmN0aW9uIHN1cGVyV3JhcHBlcigpIHtcbiAgICB2YXIgb3JpZ2luYWxTdXBlciA9IHRoaXNbJ3N1cGVyJ107XG5cbiAgICB0aGlzWydzdXBlciddID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHN1cGVyRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICB2YXIgcmV0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpc1snc3VwZXInXSA9IG9yaWdpbmFsU3VwZXI7XG5cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgc3VwZXJXcmFwcGVyLndyYXBwZWRGdW5jdGlvbiA9IGZ1bmM7XG5cbiAgcmV0dXJuIHN1cGVyV3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhuYW1lcywgcHJvdG8sIGRlc3RpbmF0aW9uKSB7XG4gIHZhciBwYXJlbnRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihkZXN0aW5hdGlvbik7XG5cbiAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywgbmFtZSk7XG4gICAgdmFyIHBhcmVudERlc2NyaXB0b3IgPSBwYXJlbnRQcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHBhcmVudFByb3RvLCBuYW1lKTtcblxuICAgIGlmICh0eXBlb2YgcGFyZW50RGVzY3JpcHRvci52YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVzY3JpcHRvci52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIHdyYXBwZWRGdW5jdGlvbiA9IHdyYXAoZGVzY3JpcHRvci52YWx1ZSwgcGFyZW50RGVzY3JpcHRvci52YWx1ZSk7XG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZXN0aW5hdGlvbiwgbmFtZSwgeyB2YWx1ZTogd3JhcHBlZEZ1bmN0aW9uIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVzdGluYXRpb24sIG5hbWUsIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNsYXNzKHByb3BzKSB7XG4gIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IE9iamVjdDtcblxuICB2YXIgQ29uc3RydWN0b3IgPSB3cmFwKHByb3BzLmNvbnN0cnVjdG9yLCBwYXJlbnQpO1xuICB2YXIgaW5zdGFuY2VQcm9wZXJ0eU5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvcHMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICFpbmNsdWRlcyQxKFsnY29uc3RydWN0b3InLCAnc3RhdGljJ10sIGtleSk7XG4gIH0pO1xuXG4gIGFzc2lnbiQxKENvbnN0cnVjdG9yLCBwYXJlbnQpO1xuXG4gIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSk7XG4gIGRlZmluZVByb3BlcnRpZXMoaW5zdGFuY2VQcm9wZXJ0eU5hbWVzLCBwcm9wcywgQ29uc3RydWN0b3IucHJvdG90eXBlKTtcbiAgQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG5cbiAgdmFyIHN0YXRpY1Byb3BzID0gcHJvcHNbJ3N0YXRpYyddO1xuXG4gIGlmIChzdGF0aWNQcm9wcykge1xuICAgIHZhciBzdGF0aWNQcm9wZXJ0eU5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc3RhdGljUHJvcHMpO1xuXG4gICAgZGVmaW5lUHJvcGVydGllcyhzdGF0aWNQcm9wZXJ0eU5hbWVzLCBzdGF0aWNQcm9wcywgQ29uc3RydWN0b3IpO1xuICB9XG5cbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG52YXIgQ29yZU9iamVjdCA9IGNyZWF0ZUNsYXNzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge30sXG5cblxuICAnc3RhdGljJzoge1xuICAgIGV4dGVuZDogZnVuY3Rpb24gZXh0ZW5kKHN1YkNsYXNzUHJvcHMpIHtcbiAgICAgIHJldHVybiBjcmVhdGVDbGFzcyhzdWJDbGFzc1Byb3BzLCB0aGlzKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiB3cmFwQ29uc29sZShsb2dDb21tYW5kKSB7XG4gIHZhciBsb2dNZXRob2QgPSBmdW5jdGlvbiBsb2dNZXRob2QoKSB7XG4gICAgdmFyIGxvZyA9IHZvaWQgMDtcblxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbiAgICBpZiAoY29uc29sZVtsb2dDb21tYW5kXSkge1xuICAgICAgbG9nID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlW2xvZ0NvbW1hbmRdLCBjb25zb2xlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmxvZywgY29uc29sZSk7XG4gICAgfVxuICAgIGxvZy5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcblxuICAgIGFyZ3MudW5zaGlmdCgnW0pTLUJVWS1TREtdOiAnKTtcbiAgICBsb2dNZXRob2QuYXBwbHkodW5kZWZpbmVkLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJncykpO1xuICB9O1xufVxuXG52YXIgTG9nZ2VyID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICAvKipcbiAgICogV3JhcHBlciBhcm91bmQgdGhlIGNvbnNvbGUgbG9nIHNvIGluIHRoZSBmdXR1cmUgd2UgY2FuIGhhdmUgYmV0dGVyIGRldiBvdXRwdXQuXG4gICAqIEFsc28gYWxsb3dzIHVzIHRvIGRpc2FibGUgb3V0cHV0IGluIHByb2R1Y3Rpb24uXG4gICAqIEBwcml2YXRlXG4gICAqIEBjbGFzcyBMb2dnZXJcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7fSxcblxuICBkZWJ1Zzogd3JhcENvbnNvbGUoJ2RlYnVnJyksXG4gIGluZm86IHdyYXBDb25zb2xlKCdpbmZvJyksXG4gIHdhcm46IHdyYXBDb25zb2xlKCd3YXJuJyksXG4gIGVycm9yOiB3cmFwQ29uc29sZSgnZXJyb3InKVxufSk7XG5cbnZhciBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbnZhciBDb25maWcgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcihhdHRycykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLmRlcHJlY2F0ZWRQcm9wZXJ0aWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1OYW1lID0gX3RoaXMuZGVwcmVjYXRlZFByb3BlcnRpZXNba2V5XTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IF90aGlzW3RyYW5zZm9ybU5hbWVdO1xuXG4gICAgICAgIHRyYW5zZm9ybShhdHRyc1trZXldLCBhdHRycyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5yZXF1aXJlZFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoIWF0dHJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXcgQ29uZmlnKCkgcmVxdWlyZXMgdGhlIG9wdGlvbiBcXCcnICsga2V5ICsgJ1xcJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXNba2V5XSA9IGF0dHJzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5vcHRpb25hbFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBfdGhpc1trZXldID0gYXR0cnNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3Qgd2l0aCBrZXlzIGZvciBkZXByZWNhdGVkIHByb3BlcnRpZXMgYW5kIHZhbHVlcyBhcyBmdW5jdGlvbnMgdGhhdFxuICAgKiB3aWxsIHRyYW5zZm9ybSB0aGUgdmFsdWUgaW50byBhIHVzYWJsZSB2YWx1ZS4gQSBkZXByYWNhdGlvbiB0cmFuc2Zvcm0gc2hvdWxkXG4gICAqIGhhdmUgdGhlIHZhbHVlIHNpZ25hdHVyZSBmdW5jdGlvbihkZXByZWNhdGVkX3ZhbHVlLCBjb25maWdfdG9fYmVfdHJhbnNmb3JtZWQpXG4gICAqIEBhdHRyaWJ1dGUgZGVwcmVjYXRlZFByb3BlcnRpZXNcbiAgICogQGRlZmF1bHQgeyBteVNob3BpZnlEb21haW46IHRoaXMudHJhbnNmb3JtTXlTaG9waWZ5RG9tYWluIH1cbiAgICogQHR5cGUgT2JqZWN0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZXByZWNhdGVkUHJvcGVydGllczoge1xuICAgIG15U2hvcGlmeURvbWFpbjogJ3RyYW5zZm9ybU15U2hvcGlmeURvbWFpbidcbiAgfSxcblxuICAvKipcbiAgICogVHJhbnNmb3JtIHRoZSBteVNob3BpZnlEb21haW4gY29uZmlnIHRvIGEgZG9tYWluIGNvbmZpZy5cbiAgICogQG1ldGhvZCB0cmFuc2Zvcm1NeVNob3BpZnlEb21haW5cbiAgICogQHN0YXRpY1xuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3ViZG9tYWluIFRoZSBvcmlnaW5hbCBzdWJkb21haW4gb24gbXlzaG9waWZ5LmNvbVxuICAgKiBAcGFyYW0ge09iamVjdH0gYXR0cnMuIFRoZSBjb25maWcgYXR0cmlidXRlcyB0byBiZSB0cmFuc2Zvcm1lZCB0byBhXG4gICAqIG5vbi1kZXByZWNhdGVkIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSB0cmFuc2Zvcm1lZCBjb25maWcgYXR0cmlidXRlcy5cbiAgICovXG4gIHRyYW5zZm9ybU15U2hvcGlmeURvbWFpbjogZnVuY3Rpb24gdHJhbnNmb3JtTXlTaG9waWZ5RG9tYWluKHN1YmRvbWFpbiwgYXR0cnMpIHtcbiAgICBsb2dnZXIud2FybignQ29uZmlnIC0gJywgJ215U2hvcGlmeURvbWFpbiBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGRvbWFpbiBhbmQgcHJvdmlkZSB0aGUgZnVsbCBzaG9wIGRvbWFpbi4nKTtcbiAgICBhdHRycy5kb21haW4gPSBzdWJkb21haW4gKyAnLm15c2hvcGlmeS5jb20nO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFByb3BlcnRpZXMgdGhhdCBtdXN0IGJlIHNldCBvbiBpbml0aWFsaXphdGlvbnNcbiAgICogQGF0dHJpYnV0ZSByZXF1aXJlZFByb3BlcnRpZXNcbiAgICogQGRlZmF1bHQgWydhcGlLZXknLCAnYXBwSWQnLCAnbXlTaG9waWZ5RG9tYWluJ11cbiAgICogQHR5cGUgQXJyYXlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlcXVpcmVkUHJvcGVydGllczogWydhcGlLZXknLCAnYXBwSWQnLCAnZG9tYWluJ10sXG5cbiAgLyoqXG4gICAqIFByb3BlcnRpZXMgdGhhdCBtYXkgYmUgc2V0IG9uIGluaXRpYWxpemF0aW9uc1xuICAgKiBAYXR0cmlidXRlIHJlcXVpcmVkUHJvcGVydGllc1xuICAgKiBAZGVmYXVsdCBbJ2FqYXhIZWFkZXJzJ11cbiAgICogQHR5cGUgQXJyYXlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9wdGlvbmFsUHJvcGVydGllczogWydhamF4SGVhZGVycyddLFxuXG4gIC8qKlxuICAgKiBUaGUgYXBpS2V5IGZvciBhdXRoZW50aWNhdGluZyBhZ2FpbnN0IHNob3BpZnkuIFRoaXMgaXMgeW91ciBhcGkgY2xpZW50J3NcbiAgICogcHVibGljIGFwaSB0b2tlbi4gTm90IHRoZSBzaGFyZWQgc2VjcmV0LiBTZXQgZHVyaW5nIGluaXRpYWxhdGlvbi5cbiAgICogQGF0dHJpYnV0ZSBhcGlLZXlcbiAgICogQGRlZmF1bHQgJydcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcGlLZXk6ICcnLFxuXG4gIC8qKlxuICAgKiBAYXR0cmlidXRlIGFwcElkXG4gICAqIEBkZWZhdWx0ICcnXG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXBwSWQ6ICcnLFxuXG4gIC8qKlxuICAgKiBUaGUgZG9tYWluIHRoYXQgYWxsIHRoZSBhcGkgcmVxdWVzdHMgd2lsbCBnbyB0b1xuICAgKiBAYXR0cmlidXRlIGRvbWFpblxuICAgKiBAZGVmYXVsdCAnJ1xuICAgKiBAdHlwZSBTdHJpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRvbWFpbjogJycsXG5cbiAgLyoqXG4gICAqIFRoZSBzdWJkb21haW4gb2YgbXlzaG9waWZ5LmlvIHRoYXQgYWxsIHRoZSBhcGkgcmVxdWVzdHMgd2lsbCBnbyB0b1xuICAgKiBAYXR0cmlidXRlIG15U2hvcGlmeURvbWFpblxuICAgKiBAZGVmYXVsdCAnJ1xuICAgKiBAdHlwZSBTdHJpbmdcbiAgICogQHByaXZhdGVcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGBjb25maWcuZG9tYWluYCBpbnN0ZWFkLlxuICAgKi9cbiAgbXlTaG9waWZ5RG9tYWluOiAnJyxcblxuICAvKipcbiAgICogQGF0dHJpYnV0ZSBhamF4SGVhZGVyc1xuICAgKiBAZGVmYXVsdCB7fVxuICAgKiBAdHlwZSBPYmplY3RcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFqYXhIZWFkZXJzOiB7fVxufSk7XG5cbnZhciB2ZXJzaW9uID0gJ3YwLjYuMi1jOGY0MzhmJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG52YXIgQmFzZU1vZGVsID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdmFyIGF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgbWV0YUF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHRoaXMuYXR0cnMgPSBhdHRycztcblxuICAgIGFzc2lnbiQxKHRoaXMsIG1ldGFBdHRycyk7XG4gIH0sXG5cbiAgYXR0cnM6IG51bGwsXG4gIHNlcmlhbGl6ZXI6IG51bGwsXG4gIGFkYXB0ZXI6IG51bGwsXG4gIHNob3BDbGllbnQ6IG51bGxcbn0pO1xuXG4vKipcbiAgKiBDbGFzcyBmb3IgcHJvZHVjdCBvcHRpb25cbiAgKiBAY2xhc3MgUHJvZHVjdE9wdGlvbk1vZGVsXG4gICogQGNvbnN0cnVjdG9yXG4qL1xudmFyIFByb2R1Y3RPcHRpb25Nb2RlbCA9IEJhc2VNb2RlbC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1snc3VwZXInXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMudmFsdWVzWzBdO1xuICB9XG59LCB7XG4gIG5hbWU6IHtcblxuICAgIC8qKlxuICAgICAgKiBuYW1lIG9mIG9wdGlvbi4gRXhhbXBsZSB2YWx1ZXM6IGBcIlNpemVcImAsIGBcIkNvbG9yXCJgLCBldGMuXG4gICAgICAqIEBwcm9wZXJ0eSBuYW1lXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMubmFtZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHZhbHVlczoge1xuXG4gICAgLyoqXG4gICAgICAqIGFuIEFycmF5IHBvc3NpYmxlIHZhbHVlcyBmb3Igb3B0aW9uLiBGb3IgaW5zdGFuY2UgaWYgdGhpcyBvcHRpb24gaXMgYSBcIlNpemVcIiBvcHRpb24gYW4gZXhhbXBsZSB2YWx1ZVxuICAgICAgKiBmb3IgdmFsdWVzIGNvdWxkIGJlOiBgW1wiTGFyZ2VcIiwgXCJNZWRpdW1cIiwgXCJTbWFsbFwiXWBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHZhbHVlc1xuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUgQXJyYXlcbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFsdWVzO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgc2VsZWN0ZWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBnZXQvc2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uIHZhbHVlIHdpdGggb25lIG9mIHRoZSB2YWx1ZXMgZnJvbSB0aGVcbiAgICAgICoge3sjY3Jvc3NMaW5rIFwiUHJvZHVjdE9wdGlvbk1vZGVsL3ZhbHVlc1wifX1Qcm9kdWN0T3B0aW9uTW9kZWwudmFsdWVze3svY3Jvc3NMaW5rfX0gYXJyYXkuIEZvclxuICAgICAgKiBpbnN0YW5jZSBpZiB0aGUgb3B0aW9uIHZhbHVlcyBhcnJheSBoYWQgdGhlIGZvbGxvd2luZyBgW1wiTGFyZ2VcIiwgXCJNZWRpdW1cIiwgXCJTbWFsbFwiXWAgc2V0dGluZyBgc2VsZWN0ZWRgIHRvIGJlXG4gICAgICAqIGBcIkxhcmdlXCJgLCBgXCJNZWRpdW1cImAsIG9yIGBcIlNtYWxsXCJgIHdvdWxkIGJlIHZhbGlkIGFueSBvdGhlciB2YWx1ZSB3b3VsZCB0aHJvdyBhbiBgRXJyb3JgLlxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgc2VsZWN0ZWRcbiAgICAgICogQHR5cGUgU3RyaW5nXG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICBpZiAoaW5jbHVkZXMkMSh0aGlzLnZhbHVlcywgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGlvbiBmb3IgJyArIHRoaXMubmFtZSArICcuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxudmFyIHZhcmlhbnRzID0gW3sgbmFtZTogJ3BpY28nLCBkaW1lbnNpb246ICcxNngxNicgfSwgeyBuYW1lOiAnaWNvbicsIGRpbWVuc2lvbjogJzMyeDMyJyB9LCB7IG5hbWU6ICd0aHVtYicsIGRpbWVuc2lvbjogJzUweDUwJyB9LCB7IG5hbWU6ICdzbWFsbCcsIGRpbWVuc2lvbjogJzEwMHgxMDAnIH0sIHsgbmFtZTogJ2NvbXBhY3QnLCBkaW1lbnNpb246ICcxNjB4MTYwJyB9LCB7IG5hbWU6ICdtZWRpdW0nLCBkaW1lbnNpb246ICcyNDB4MjQwJyB9LCB7IG5hbWU6ICdsYXJnZScsIGRpbWVuc2lvbjogJzQ4MHg0ODAnIH0sIHsgbmFtZTogJ2dyYW5kZScsIGRpbWVuc2lvbjogJzYwMHg2MDAnIH0sIHsgbmFtZTogJzEwMjR4MTAyNCcsIGRpbWVuc2lvbjogJzEwMjR4MTAyNCcgfSwgeyBuYW1lOiAnMjA0OHgyMDQ4JywgZGltZW5zaW9uOiAnMjA0OHgyMDQ4JyB9XTtcblxudmFyIEltYWdlTW9kZWwgPSBDb3JlT2JqZWN0LmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcihhdHRycykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgX3RoaXMyW2tleV0gPSBhdHRyc1trZXldO1xuICAgIH0pO1xuICB9XG59LCB7XG4gIHZhcmlhbnRzOiB7XG5cbiAgICAvKipcbiAgICAgICogSW1hZ2UgdmFyaWFudHMgYXZhaWxhYmxlIGZvciBhbiBpbWFnZS4gQW4gZXhhbXBsZSB2YWx1ZSBvZiBgaW1hZ2VWYXJpYW50YDpcbiAgICAgICogYGBgXG4gICAgICAqIFtcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJwaWNvXCIsXG4gICAgICAqICAgICBcImRpbWVuc2lvbnNcIjogXCIxNngxNlwiLFxuICAgICAgKiAgICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2FsaWVuXzE0NmVmN2MxLTI2ZTktNGU5Ni05NmU2LTlkMzcxMjhkMDAwNV9waWNvLmpwZz92PTE0NjkwNDY0MjNcIlxuICAgICAgKiAgIH0sXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwiY29tcGFjdFwiLFxuICAgICAgKiAgICAgXCJkaW1lbnNpb25zXCI6IFwiMTYweDE2MFwiLFxuICAgICAgKiAgICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2FsaWVuXzE0NmVmN2MxLTI2ZTktNGU5Ni05NmU2LTlkMzcxMjhkMDAwNV9jb21wYWN0LmpwZz92PTE0NjkwNDY0MjNcIlxuICAgICAgKiAgIH1cbiAgICAgICogXVxuICAgICAgKiBgYGBcbiAgICAgICpcbiAgICAgICogQGF0dHJpYnV0ZSB2YXJpYW50c1xuICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBzcmMgPSB0aGlzLnNyYztcbiAgICAgIHZhciBleHRlbnNpb25JbmRleCA9IHNyYy5sYXN0SW5kZXhPZignLicpO1xuICAgICAgdmFyIHBhdGhBbmRCYXNlbmFtZSA9IHNyYy5zbGljZSgwLCBleHRlbnNpb25JbmRleCk7XG4gICAgICB2YXIgZXh0ZW5zaW9uID0gc3JjLnNsaWNlKGV4dGVuc2lvbkluZGV4KTtcblxuICAgICAgdmFyaWFudHMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFudCkge1xuICAgICAgICB2YXJpYW50LnNyYyA9IHBhdGhBbmRCYXNlbmFtZSArICdfJyArIHZhcmlhbnQubmFtZSArIGV4dGVuc2lvbjtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdmFyaWFudHM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbi8qKlxuICAqIE1vZGVsIGZvciBwcm9kdWN0IHZhcmlhbnRcbiAgKiBAY2xhc3MgUHJvZHVjdFZhcmlhbnRNb2RlbFxuICAqIEBjb25zdHJ1Y3RvclxuKi9cbnZhciBQcm9kdWN0VmFyaWFudE1vZGVsID0gQmFzZU1vZGVsLmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzWydzdXBlciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIEdldCBhIGNoZWNrb3V0IHVybCBmb3IgYSBzcGVjaWZpYyBwcm9kdWN0IHZhcmlhbnQuIFlvdSBjYW5cbiAgICAqIG9wdGlvbmFsbHkgcGFzcyBhIHF1YW50aXR5LiBJZiBubyBxdWFudGl0eSBpcyBwYXNzZWQgdGhlbiBxdWFudGl0eVxuICAgICogd2lsbCBkZWZhdWx0IHRvIDEuIFRoZSBleGFtcGxlIGJlbG93IHdpbGwgZ3JhYiBhIGNoZWNrb3V0IHVybCBmb3JcbiAgICAqIDMgY29waWVzIG9mIHRoZSBmaXJzdCB2YXJpYW50OlxuICAgICogYGBgXG4gICAgKiBjb25zdCBjaGVja291dFVSTCA9IHByb2R1Y3QudmFyaWFudHNbIDAgXS5jaGVja291dFVybCgzKTtcbiAgICAqIGBgYFxuICAgICpcbiAgICAqIEBtZXRob2QgY2hlY2tvdXRVcmxcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcXVhbnRpdHkgPSAxXSBxdWFudGl0eSBvZiB2YXJpYW50c1xuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7U3RyaW5nfSBDaGVja291dCBVUkxcbiAgKi9cbiAgY2hlY2tvdXRVcmw6IGZ1bmN0aW9uIGNoZWNrb3V0VXJsKCkge1xuICAgIHZhciBxdWFudGl0eSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTtcblxuICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICB2YXIgYmFzZVVybCA9ICdodHRwczovLycgKyBjb25maWcuZG9tYWluICsgJy9jYXJ0JztcblxuICAgIHZhciB2YXJpYW50UGF0aCA9IHRoaXMuaWQgKyAnOicgKyBwYXJzZUludChxdWFudGl0eSwgMTApO1xuXG4gICAgdmFyIHF1ZXJ5ID0gJ2FjY2Vzc190b2tlbj0nICsgY29uZmlnLmFwaUtleSArICcmX2ZkPTAnO1xuXG4gICAgcmV0dXJuIGJhc2VVcmwgKyAnLycgKyB2YXJpYW50UGF0aCArICc/JyArIHF1ZXJ5O1xuICB9XG59LCB7XG4gIGlkOiB7XG5cbiAgICAvKipcbiAgICAgICogVmFyaWFudCB1bmlxdWUgSURcbiAgICAgICogQHByb3BlcnR5IGlkXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQuaWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcm9kdWN0SWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBJRCBvZiBwcm9kdWN0IHZhcmlhbnQgYmVsb25ncyB0b1xuICAgICAgKiBAcHJvcGVydHkgcHJvZHVjdElkXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByb2R1Y3QuaWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB0aXRsZToge1xuXG4gICAgLyoqXG4gICAgICAqIFRpdGxlIG9mIHZhcmlhbnRcbiAgICAgICogQHByb3BlcnR5IHRpdGxlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQudGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcm9kdWN0VGl0bGU6IHtcblxuICAgIC8qKlxuICAgICAgKiBUaXRsZSBvZiBwcm9kdWN0IHZhcmlhbnQgYmVsb25ncyB0b1xuICAgICAgKiBAcHJvcGVydHkgcHJvZHVjdFRpdGxlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByb2R1Y3QudGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBjb21wYXJlQXRQcmljZToge1xuXG4gICAgLyoqXG4gICAgICAqIENvbXBhcmUgYXQgcHJpY2UgZm9yIHZhcmlhbnQuIFRoZSBgY29tcGFyZUF0UHJpY2VgIHdvdWxkIGJlXG4gICAgICAqIHRoZSBwcmljZSBvZiB0aGUgcHJvZHVjdCBwcmV2aW91c2x5IGJlZm9yZSB0aGUgcHJvZHVjdCB3ZW50IG9uIHNhbGUuIEZvciBtb3JlIGluZm9cbiAgICAgICogZ28gPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5zaG9waWZ5LmNvbS9tYW51YWwvcHJvZHVjdHMvcHJvbW90aW5nLW1hcmtldGluZy9zYWxlc1wiIHRhcmdldD1cIl9ibGFua1wiPmhlcmU8L2E+LlxuICAgICAgKlxuICAgICAgKiBJZiBubyBgY29tcGFyZUF0UHJpY2VgIGlzIHNldCB0aGVuIHRoaXMgdmFsdWUgd2lsbCBiZSBgbnVsbGAuIEFuIGV4YW1wbGUgdmFsdWU6IGBcIjUuMDBcImBcbiAgICAgICogQHByb3BlcnR5IGNvbXBhcmVBdFByaWNlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQuY29tcGFyZV9hdF9wcmljZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHByaWNlOiB7XG5cbiAgICAvKipcbiAgICAgICogUHJpY2Ugb2YgdGhlIHZhcmlhbnQuIFRoZSBwcmljZSB3aWxsIGJlIGluIHRoZSBmb2xsb3dpbmcgZm9ybTogYFwiMTAuMDBcImBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHByaWNlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQucHJpY2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBmb3JtYXR0ZWRQcmljZToge1xuXG4gICAgLyoqXG4gICAgICAqIFByaWNlIG9mIHZhcmlhbnQsIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gc2hvcCBjdXJyZW5jeSBmb3JtYXQgc3RyaW5nLlxuICAgICAgKiBGb3IgaW5zdGFuY2UgYFwiJDEwLjAwXCJgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBmb3JtYXR0ZWRQcmljZVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50LmZvcm1hdHRlZF9wcmljZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGdyYW1zOiB7XG5cbiAgICAvKipcbiAgICAgICogVmFyaWFudCB3ZWlnaHQgaW4gZ3JhbXMuIElmIG5vIHdlaWdodCBpcyBkZWZpbmVkIGdyYW1zIHdpbGwgYmUgYDBgLlxuICAgICAgKiBAcHJvcGVydHkgZ3JhbXNcbiAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5ncmFtcztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIG9wdGlvblZhbHVlczoge1xuXG4gICAgLyoqXG4gICAgICAqIE9wdGlvbiB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdmFyaWFudC4gRXhhbXBsZSBgb3B0aW9uVmFsdWVzYDpcbiAgICAgICogYGBgXG4gICAgICAqIFtcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJTaXplXCIsXG4gICAgICAqICAgICBcIm9wdGlvbl9pZFwiOiA5MTY1MzM2NTE4LFxuICAgICAgKiAgICAgXCJ2YWx1ZVwiOiBcInNtYWxsXCJcbiAgICAgICogICB9LFxuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcIkNvbG9yXCIsXG4gICAgICAqICAgICBcIm9wdGlvbl9pZFwiOiA5NjQwNTMyMzU4LFxuICAgICAgKiAgICAgXCJ2YWx1ZVwiOiBcImJsdWVcIlxuICAgICAgKiAgIH1cbiAgICAgICogXVxuICAgICAgKiBgYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBvcHRpb25WYWx1ZXNcbiAgICAgICogQHR5cGUge0FycmF5fE9iamVjdH1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5vcHRpb25fdmFsdWVzO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgYXZhaWxhYmxlOiB7XG5cbiAgICAvKipcbiAgICAgICogVmFyaWFudCBpbiBzdG9jay4gQWx3YXlzIGB0cnVlYCBpZiBpbnZlbnRvcnkgdHJhY2tpbmcgaXMgZGlzYWJsZWQuXG4gICAgICAqIEBwcm9wZXJ0eSBhdmFpbGFibGVcbiAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQuYXZhaWxhYmxlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaW1hZ2U6IHtcblxuICAgIC8qKlxuICAgICAgKiBJbWFnZSBmb3IgdmFyaWFudC4gQW4gZXhhbXBsZSBpbWFnZSBgT2JqZWN0YDpcbiAgICAgICogYGBgXG4gICAgICAqIHtcbiAgICAgICogICBjcmVhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICBpZDogMTc2OTA1NTMzNTAsXG4gICAgICAqICAgcG9zaXRpb246IDEsXG4gICAgICAqICAgcHJvZHVjdF9pZDogODI5MTAyOTQ0NixcbiAgICAgICogICBzcmM6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9pMTFfYzMzMzQzMjUtMmQ2Ny00NjIzLThjZDQtMGE2YjA4YWExYjgzLmpwZz92PTE0NzI0ODg1MDlcIixcbiAgICAgICogICB1cGRhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICB2YXJpYW50X2lkczogWyAyNzY5MDEwMzIzOCBdXG4gICAgICAqIH1cbiAgICAgICogYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBpbWFnZVxuICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgaWQgPSB0aGlzLmlkO1xuICAgICAgdmFyIGltYWdlcyA9IHRoaXMuYXR0cnMucHJvZHVjdC5pbWFnZXM7XG5cbiAgICAgIHZhciBwcmltYXJ5SW1hZ2UgPSBpbWFnZXNbMF07XG4gICAgICB2YXIgdmFyaWFudEltYWdlID0gaW1hZ2VzLmZpbHRlcihmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlLnZhcmlhbnRfaWRzLmluZGV4T2YoaWQpICE9PSAtMTtcbiAgICAgIH0pWzBdO1xuXG4gICAgICB2YXIgaW1hZ2UgPSB2YXJpYW50SW1hZ2UgfHwgcHJpbWFyeUltYWdlO1xuXG4gICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEltYWdlTW9kZWwoaW1hZ2UpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaW1hZ2VWYXJpYW50czoge1xuXG4gICAgLyoqXG4gICAgICAqIEltYWdlIHZhcmlhbnRzIGF2YWlsYWJsZSBmb3IgYSB2YXJpYW50LiBBbiBleGFtcGxlIHZhbHVlIG9mIGBpbWFnZVZhcmlhbnRgOlxuICAgICAgKiBgYGBcbiAgICAgICogW1xuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcInBpY29cIixcbiAgICAgICogICAgIFwiZGltZW5zaW9uc1wiOiBcIjE2eDE2XCIsXG4gICAgICAqICAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvYWxpZW5fMTQ2ZWY3YzEtMjZlOS00ZTk2LTk2ZTYtOWQzNzEyOGQwMDA1X3BpY28uanBnP3Y9MTQ2OTA0NjQyM1wiXG4gICAgICAqICAgfSxcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJjb21wYWN0XCIsXG4gICAgICAqICAgICBcImRpbWVuc2lvbnNcIjogXCIxNjB4MTYwXCIsXG4gICAgICAqICAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvYWxpZW5fMTQ2ZWY3YzEtMjZlOS00ZTk2LTk2ZTYtOWQzNzEyOGQwMDA1X2NvbXBhY3QuanBnP3Y9MTQ2OTA0NjQyM1wiXG4gICAgICAqICAgfVxuICAgICAgKiBdXG4gICAgICAqIGBgYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgaW1hZ2VWYXJpYW50XG4gICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCF0aGlzLmltYWdlKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuaW1hZ2UudmFyaWFudHM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbnZhciB1bmlxID0gZnVuY3Rpb24gdW5pcShhcnJheSkge1xuICByZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uICh1bmlxdWVBcnJheSwgaXRlbSkge1xuICAgIGlmICh1bmlxdWVBcnJheS5pbmRleE9mKGl0ZW0pIDwgMCkge1xuICAgICAgdW5pcXVlQXJyYXkucHVzaChpdGVtKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5pcXVlQXJyYXk7XG4gIH0sIFtdKTtcbn07XG5cbnZhciBOT19JTUFHRV9VUkkgPSAnaHR0cHM6Ly93aWRnZXRzLnNob3BpZnlhcHBzLmNvbS9hc3NldHMvbm8taW1hZ2Uuc3ZnJztcblxuLyoqXG4gICAqIENsYXNzIGZvciBwcm9kdWN0cyByZXR1cm5lZCBieSBmZXRjaCgncHJvZHVjdCcpXG4gICAqIEBjbGFzcyBQcm9kdWN0TW9kZWxcbiAgICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBQcm9kdWN0TW9kZWwgPSBCYXNlTW9kZWwuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXNbJ3N1cGVyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxufSwge1xuICBpZDoge1xuXG4gICAgLyoqXG4gICAgICAqIFByb2R1Y3QgdW5pcXVlIElEXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBpZFxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcm9kdWN0X2lkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdGl0bGU6IHtcblxuICAgIC8qKlxuICAgICAgKiBUaGUgcHJvZHVjdCB0aXRsZVxuICAgICAgKiBAcHJvcGVydHkgdGl0bGVcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBkZXNjcmlwdGlvbjoge1xuXG4gICAgLyoqXG4gICAgICAqIEEgcHJvZHVjdCBkZXNjcmlwdGlvbi5cbiAgICAgICogQHByb3BlcnR5IGRlc2NyaXB0aW9uXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLmJvZHlfaHRtbDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGltYWdlczoge1xuXG4gICAgLyoqXG4gICAgICAqIEFuIGBBcnJheWAgb2YgYE9iamVjdHNgIHRoYXQgY29udGFpbiBtZXRhIGRhdGEgYWJvdXQgYW4gaW1hZ2UgaW5jbHVkaW5nIGBzcmNgIG9mIHRoZSBpbWFnZXMuXG4gICAgICAqXG4gICAgICAqIEFuIGV4YW1wbGUgaW1hZ2UgYE9iamVjdGA6XG4gICAgICAqIGBgYFxuICAgICAgKiB7XG4gICAgICAqICAgY3JlYXRlZF9hdDogXCIyMDE2LTA4LTI5VDEyOjM1OjA5LTA0OjAwXCIsXG4gICAgICAqICAgaWQ6IDE3NjkwNTUzMzUwLFxuICAgICAgKiAgIHBvc2l0aW9uOiAxLFxuICAgICAgKiAgIHByb2R1Y3RfaWQ6IDgyOTEwMjk0NDYsXG4gICAgICAqICAgc3JjOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvaTExX2MzMzM0MzI1LTJkNjctNDYyMy04Y2Q0LTBhNmIwOGFhMWI4My5qcGc/dj0xNDcyNDg4NTA5XCIsXG4gICAgICAqICAgdXBkYXRlZF9hdDogXCIyMDE2LTA4LTI5VDEyOjM1OjA5LTA0OjAwXCIsXG4gICAgICAqICAgdmFyaWFudF9pZHM6IFsgMjc2OTAxMDMyMzggXVxuICAgICAgKiB9XG4gICAgICAqIGBgYFxuICAgICAgKiBAcHJvcGVydHkgaW1hZ2VzXG4gICAgICAqIEB0eXBlIHtBcnJheX0gYXJyYXkgb2YgaW1hZ2Ugb2JqZWN0cy5cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMuaW1hZ2VzLm1hcChmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbWFnZU1vZGVsKGltYWdlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgbWVtb2l6ZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHRoaXMuX21lbW9pemVkID0gdGhpcy5fbWVtb2l6ZWQgfHwge307XG5cbiAgICAgIHJldHVybiB0aGlzLl9tZW1vaXplZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIG9wdGlvbnM6IHtcblxuICAgIC8qKlxuICAgICAqICBHZXQgYW4gYXJyYXkgb2Yge3sjY3Jvc3NMaW5rIFwiUHJvZHVjdE9wdGlvbk1vZGVsXCJ9fVByb2R1Y3RPcHRpb25Nb2RlbHN7ey9jcm9zc0xpbmt9fS5cbiAgICAgKiAge3sjY3Jvc3NMaW5rIFwiUHJvZHVjdE9wdGlvbk1vZGVsXCJ9fVByb2R1Y3RPcHRpb25Nb2RlbHN7ey9jcm9zc0xpbmt9fSBjYW4gYmUgdXNlZCB0b1xuICAgICAqICBkZWZpbmUgdGhlIGN1cnJlbnRseSBgc2VsZWN0ZWRWYXJpYW50YCBmcm9tIHdoaWNoIHlvdSBjYW4gZ2V0IGEgY2hlY2tvdXQgdXJsXG4gICAgICogICh7eyNjcm9zc0xpbmsgXCJQcm9kdWN0VmFyaWFudE1vZGVsL2NoZWNrb3V0VXJsXCJ9fVByb2R1Y3RWYXJpYW50TW9kZWwuY2hlY2tvdXRVcmx7ey9jcm9zc0xpbmt9fSkgb3IgY2FuXG4gICAgICogIGJlIGFkZGVkIHRvIGEgY2FydCAoe3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL2NyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c1wifX1DYXJ0TW9kZWwuY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRze3svY3Jvc3NMaW5rfX0pLlxuICAgICAqXG4gICAgICogIEJlbG93IGlzIGFuIGV4YW1wbGUgb24gaG93IHRvIGNyZWF0ZSBodG1sIGZvciBvcHRpb24gc2VsZWN0aW9uczpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogIC8vIHRoZSBmb2xsb3dpbmcgd2lsbCBjcmVhdGUgYW4gQXJyYXkgb2YgSFRNTCB0byBjcmVhdGUgbXVsdGlwbGUgc2VsZWN0IGlucHV0c1xuICAgICAqICAvLyBnbG9iYWwgY2FsbGJhY2tzIGFyZSBhbHNvIGNyZWF0ZWQgd2hpY2ggd2lsbCBzZXQgdGhlIG9wdGlvbiBhcyBzZWxlY3RlZFxuICAgICAqICB2YXIgZWxlbWVudHMgPSBwcm9kdWN0Lm9wdGlvbnMubWFwKGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAqICAgIC8vIHdlJ2xsIGNyZWF0ZSBhIGNhbGxiYWNrIGluIGdsb2JhbCBzY29wZVxuICAgICAqICAgIC8vIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIHNlbGVjdCdzIHZhbHVlIGNoYW5nZXNcbiAgICAgKiAgICB2YXIgY2FsbEJhY2tOYW1lID0gb3B0aW9uLm5hbWUgKyAnb25DaGFuZ2UnO1xuICAgICAqICAgIHdpbmRvd1sgY2FsbEJhY2tOYW1lIF0gPSBmdW5jdGlvbihzZWxlY3QpIHtcbiAgICAgKiAgICAgIC8vIHNldCB0aGUgcHJvZHVjdHMgb3B0aW9uIHRvIGJlIHNlbGVjdGVkXG4gICAgICogICAgICBvcHRpb24uc2VsZWN0ZWQgPSBzZWxlY3QudmFsdWU7XG4gICAgICogICAgfTtcbiAgICAgKlxuICAgICAqICAgIC8vIHJldHVybiBhIHN0cmluZyB3aGljaCB3aWxsIGJlIEhUTUwgZm9yIHRoZSBzZWxlY3RcbiAgICAgKiAgICByZXR1cm4gJzxzZWxlY3QgbmFtZT1cIicgKyBvcHRpb24ubmFtZSArICdcIiBvbmNoYW5nZT1cIidjYWxsQmFja05hbWUnKHRoaXMpXCI+JyArIG9wdGlvbi52YWx1ZXMubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICAgICByZXR1cm4gJzxvcHRpb24gdmFsdWU9XCInICsgdmFsdWUgKyAnXCI+JyArIHZhbHVlICsgJzwvb3B0aW9uPic7XG4gICAgICogICAgfSkgKyAnPC9zZWxlY3Q+JztcbiAgICAgKiAgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgb3B0aW9uc1xuICAgICAqIEB0eXBlIHtBcnJheXxQcm9kdWN0T3B0aW9uTW9kZWx9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5tZW1vaXplZC5vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lbW9pemVkLm9wdGlvbnM7XG4gICAgICB9XG5cbiAgICAgIHZhciBiYXNlT3B0aW9ucyA9IHRoaXMuYXR0cnMub3B0aW9ucztcbiAgICAgIHZhciB2YXJpYW50cyQkMSA9IHRoaXMudmFyaWFudHM7XG5cbiAgICAgIHRoaXMubWVtb2l6ZWQub3B0aW9ucyA9IGJhc2VPcHRpb25zLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHZhciBuYW1lID0gb3B0aW9uLm5hbWU7XG5cbiAgICAgICAgdmFyIGR1cGVkVmFsdWVzID0gdmFyaWFudHMkJDEucmVkdWNlKGZ1bmN0aW9uICh2YWx1ZUxpc3QsIHZhcmlhbnQpIHtcbiAgICAgICAgICB2YXIgb3B0aW9uVmFsdWVGb3JPcHRpb24gPSB2YXJpYW50Lm9wdGlvblZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKG9wdGlvblZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uVmFsdWUubmFtZSA9PT0gb3B0aW9uLm5hbWU7XG4gICAgICAgICAgfSlbMF07XG5cbiAgICAgICAgICB2YWx1ZUxpc3QucHVzaChvcHRpb25WYWx1ZUZvck9wdGlvbi52YWx1ZSk7XG5cbiAgICAgICAgICByZXR1cm4gdmFsdWVMaXN0O1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgdmFyIHZhbHVlcyA9IHVuaXEoZHVwZWRWYWx1ZXMpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvZHVjdE9wdGlvbk1vZGVsKHsgbmFtZTogbmFtZSwgdmFsdWVzOiB2YWx1ZXMgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZWQub3B0aW9ucztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHZhcmlhbnRzOiB7XG5cbiAgICAvKipcbiAgICAgICogQW4gYEFycmF5YCBvZiB7eyNjcm9zc0xpbmsgXCJQcm9kdWN0VmFyaWFudE1vZGVsXCJ9fVByb2R1Y3RWYXJpYW50TW9kZWwnc3t7L2Nyb3NzTGlua319XG4gICAgICAqIEBwcm9wZXJ0eSB2YXJpYW50c1xuICAgICAgKiBAdHlwZSB7QXJyYXl8UHJvZHVjdFZhcmlhbnRNb2RlbH0gYXJyYXkgb2YgUHJvZHVjdFZhcmlhbnRNb2RlbCBpbnN0YW5jZXMuXG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50cy5tYXAoZnVuY3Rpb24gKHZhcmlhbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9kdWN0VmFyaWFudE1vZGVsKHsgdmFyaWFudDogdmFyaWFudCwgcHJvZHVjdDogX3RoaXMzIH0sIHsgY29uZmlnOiBfdGhpczMuY29uZmlnIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBzZWxlY3Rpb25zOiB7XG5cbiAgICAvKipcbiAgICAgICogQSByZWFkIG9ubHkgYEFycmF5YCBvZiBTdHJpbmdzIHJlcHJlc2VudGVkIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb24gdmFsdWVzLiBlZy4gYFtcIkxhcmdlXCIsIFwiUmVkXCJdYFxuICAgICAgKiBAcHJvcGVydHkgc2VsZWN0aW9uc1xuICAgICAgKiBAdHlwZSB7QXJyYXkgfCBTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWFwKGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbi5zZWxlY3RlZDtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgc2VsZWN0ZWRWYXJpYW50OiB7XG5cbiAgICAvKipcbiAgICAgICogUmV0cmlldmUgdmFyaWFudCBmb3IgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbnMuIEJ5IGRlZmF1bHQgdGhlIGZpcnN0IHZhbHVlIGluIGVhY2hcbiAgICAgICogb3B0aW9uIGlzIHNlbGVjdGVkIHdoaWNoIG1lYW5zIGBzZWxlY3RlZFZhcmlhbnRgIHdpbGwgbmV2ZXIgYmUgYG51bGxgLlxuICAgICAgKlxuICAgICAgKiBXaXRoIGEgYHNlbGVjdGVkVmFyaWFudGAgeW91IGNhbiBjcmVhdGUgY2hlY2tvdXQgdXJsXG4gICAgICAqICh7eyNjcm9zc0xpbmsgXCJQcm9kdWN0VmFyaWFudE1vZGVsL2NoZWNrb3V0VXJsXCJ9fVByb2R1Y3RWYXJpYW50TW9kZWwuY2hlY2tvdXRVcmx7ey9jcm9zc0xpbmt9fSkgb3IgaXQgY2FuXG4gICAgICAqIGJlIGFkZGVkIHRvIGEgY2FydCAoe3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL2NyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c1wifX1DYXJ0TW9kZWwuY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRze3svY3Jvc3NMaW5rfX0pLlxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgc2VsZWN0ZWRWYXJpYW50XG4gICAgICAqIEB0eXBlIHtQcm9kdWN0VmFyaWFudE1vZGVsfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgdmFyaWFudFRpdGxlID0gdGhpcy5zZWxlY3Rpb25zLmpvaW4oJyAvICcpO1xuXG4gICAgICByZXR1cm4gdGhpcy52YXJpYW50cy5maWx0ZXIoZnVuY3Rpb24gKHZhcmlhbnQpIHtcbiAgICAgICAgcmV0dXJuIHZhcmlhbnQudGl0bGUgPT09IHZhcmlhbnRUaXRsZTtcbiAgICAgIH0pWzBdIHx8IG51bGw7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBzZWxlY3RlZFZhcmlhbnRJbWFnZToge1xuXG4gICAgLyoqXG4gICAgICAqIFJldHJpZXZlIGltYWdlIGZvciBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWFudEltYWdlLiBBbiBleGFtcGxlIGltYWdlIE9iamVjdCB3b3VsZCBsb29rIGxpa2UgdGhpczpcbiAgICAgICogYGBgXG4gICAgICAqIHtcbiAgICAgICogICBjcmVhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICBpZDogMTc2OTA1NTMzNTAsXG4gICAgICAqICAgcG9zaXRpb246IDEsXG4gICAgICAqICAgcHJvZHVjdF9pZDogODI5MTAyOTQ0NixcbiAgICAgICogICBzcmM6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9pMTFfYzMzMzQzMjUtMmQ2Ny00NjIzLThjZDQtMGE2YjA4YWExYjgzLmpwZz92PTE0NzI0ODg1MDlcIixcbiAgICAgICogICB1cGRhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICB2YXJpYW50X2lkczogWyAyNzY5MDEwMzIzOCBdXG4gICAgICAqIH1cbiAgICAgICogYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBzZWxlY3RlZFZhcmlhbnRJbWFnZVxuICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRWYXJpYW50KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhcmlhbnQuaW1hZ2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbnZhciBMaXN0aW5nc1NlcmlhbGl6ZXIgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfSxcbiAgcm9vdEtleUZvclR5cGU6IGZ1bmN0aW9uIHJvb3RLZXlGb3JUeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZS5zbGljZSgwLCAtMSkgKyAnX2xpc3RpbmcnO1xuICB9LFxuXG5cbiAgbW9kZWxzOiB7XG4gICAgY29sbGVjdGlvbnM6IEJhc2VNb2RlbCxcbiAgICBwcm9kdWN0czogUHJvZHVjdE1vZGVsXG4gIH0sXG5cbiAgbW9kZWxGb3JUeXBlOiBmdW5jdGlvbiBtb2RlbEZvclR5cGUodHlwZSkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsc1t0eXBlXTtcbiAgfSxcbiAgZGVzZXJpYWxpemVTaW5nbGU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplU2luZ2xlKHR5cGUpIHtcbiAgICB2YXIgc2luZ2xlUGF5bG9hZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdmFyIG1ldGFBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICB2YXIgbW9kZWxBdHRycyA9IHNpbmdsZVBheWxvYWRbdGhpcy5yb290S2V5Rm9yVHlwZSh0eXBlKV07XG4gICAgdmFyIG1vZGVsID0gdGhpcy5tb2RlbEZyb21BdHRycyh0eXBlLCBtb2RlbEF0dHJzLCBtZXRhQXR0cnMpO1xuXG4gICAgcmV0dXJuIG1vZGVsO1xuICB9LFxuICBkZXNlcmlhbGl6ZU11bHRpcGxlOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZU11bHRpcGxlKHR5cGUpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciBjb2xsZWN0aW9uUGF5bG9hZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdmFyIG1ldGFBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICB2YXIgbW9kZWxzID0gY29sbGVjdGlvblBheWxvYWRbdGhpcy5yb290S2V5Rm9yVHlwZSh0eXBlKSArICdzJ107XG5cbiAgICByZXR1cm4gbW9kZWxzLm1hcChmdW5jdGlvbiAoYXR0cnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IF90aGlzNC5tb2RlbEZyb21BdHRycyh0eXBlLCBhdHRycywgbWV0YUF0dHJzKTtcblxuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0pO1xuICB9LFxuICBtb2RlbEZyb21BdHRyczogZnVuY3Rpb24gbW9kZWxGcm9tQXR0cnModHlwZSwgYXR0cnMsIG1ldGFBdHRycykge1xuICAgIHZhciBNb2RlbCA9IHRoaXMubW9kZWxGb3JUeXBlKHR5cGUpO1xuXG4gICAgbWV0YUF0dHJzLmNvbmZpZyA9IHRoaXMuY29uZmlnO1xuXG4gICAgcmV0dXJuIG5ldyBNb2RlbChhdHRycywgbWV0YUF0dHJzKTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGF1dGhUb1VybCh1cmwsIG9wdHMpIHtcbiAgdmFyIGF1dGhvcml6YXRpb24gPSB2b2lkIDA7XG5cbiAgaWYgKG9wdHMuaGVhZGVycykge1xuICAgIE9iamVjdC5rZXlzKG9wdHMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09ICdhdXRob3JpemF0aW9uJykge1xuICAgICAgICBhdXRob3JpemF0aW9uID0gb3B0cy5oZWFkZXJzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoYXV0aG9yaXphdGlvbikge1xuICAgIHZhciBoYXNoZWRLZXkgPSBhdXRob3JpemF0aW9uLnNwbGl0KCcgJykuc2xpY2UoLTEpWzBdO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBwbGFpbktleSA9IGF0b2IoaGFzaGVkS2V5KTtcblxuICAgICAgdmFyIG5ld1VybCA9IHZvaWQgMDtcblxuICAgICAgaWYgKHVybC5pbmRleE9mKCc/JykgPiAtMSkge1xuICAgICAgICBuZXdVcmwgPSB1cmwgKyAnJl94X2h0dHBfYXV0aG9yaXphdGlvbj0nICsgcGxhaW5LZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdVcmwgPSB1cmwgKyAnP194X2h0dHBfYXV0aG9yaXphdGlvbj0nICsgcGxhaW5LZXk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdVcmw7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gYXRvYiBjaG9rZWQgb24gbm9uLWVuY29kZWQgZGF0YS4gVGhlcmVmb3JlLCBub3QgYSBmb3JtIG9mIGF1dGggd2VcbiAgICAgIC8vIHN1cHBvcnQuXG4gICAgICAvL1xuICAgICAgLy8gTk9PUFxuICAgICAgLy9cbiAgICB9XG4gIH1cblxuICAvKiBlc2xpbnQgbmV3bGluZS1iZWZvcmUtcmV0dXJuOiAwICovXG4gIHJldHVybiB1cmw7XG59XG5cbmZ1bmN0aW9uIGllOUFqYXgobWV0aG9kLCB1cmwsIG9wdHMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgeGRyID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7XG5cbiAgICB4ZHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHhkci5yZXNwb25zZVRleHQpO1xuXG4gICAgICAgIHJlc29sdmUoeyBqc29uOiBqc29uLCBvcmlnaW5hbFJlc3BvbnNlOiB4ZHIsIGlzSlNPTjogdHJ1ZSB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVzb2x2ZSh7IHRleHQ6IHhkci5yZXNwb25zZVRleHQsIG9yaWdpbmFsUmVzcG9uc2U6IHhkciwgaXNUZXh0OiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1RoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBYRFInKSk7XG4gICAgfVxuXG4gICAgeGRyLm9uZXJyb3IgPSBoYW5kbGVFcnJvcjtcbiAgICB4ZHIub250aW1lb3V0ID0gaGFuZGxlRXJyb3I7XG5cbiAgICB4ZHIub3BlbihtZXRob2QsIGF1dGhUb1VybCh1cmwsIG9wdHMpKTtcbiAgICB4ZHIuc2VuZChvcHRzLmRhdGEpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNOb2RlTGlrZUVudmlyb25tZW50KCkge1xuICB2YXIgd2luZG93QWJzZW50ID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCc7XG4gIHZhciByZXF1aXJlUHJlc2VudCA9IHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nO1xuXG4gIHJldHVybiB3aW5kb3dBYnNlbnQgJiYgcmVxdWlyZVByZXNlbnQ7XG59XG5cbmZ1bmN0aW9uIGNoZWNrU3RhdHVzKHJlc3BvbnNlKSB7XG4gIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDMwMCkge1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcblxuICBlcnJvci5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIHRocm93IGVycm9yO1xufVxuXG5mdW5jdGlvbiBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbiAoanNvbikge1xuICAgIHJldHVybiB7IGpzb246IGpzb24sIG9yaWdpbmFsUmVzcG9uc2U6IHJlc3BvbnNlLCBpc0pTT046IHRydWUgfTtcbiAgfSlbJ2NhdGNoJ10oZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXNwb25zZUNsb25lID0gcmVzcG9uc2UuY2xvbmUoKTtcblxuICAgIHJldHVybiByZXNwb25zZUNsb25lLnRleHQoKS50aGVuKGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiB0ZXh0LCBvcmlnaW5hbFJlc3BvbnNlOiByZXNwb25zZUNsb25lLCBpc1RleHQ6IHRydWUgfTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFqYXgobWV0aG9kLCB1cmwpIHtcbiAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gIC8vIHdlIG5lZWQgdG8gY2hlY2sgdGhhdCB3ZSdyZSBub3QgcnVubmluZyBpbiBOb2RlXG4gIC8vIGJlZm9yZSB3ZSBzaG91bGQgY2hlY2sgaWYgdGhpcyBpcyBpZTlcbiAgaWYgKCFpc05vZGVMaWtlRW52aXJvbm1lbnQoKSkge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikpIHtcbiAgICAgIHJldHVybiBpZTlBamF4LmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBvcHRzLm1ldGhvZCA9IG1ldGhvZDtcbiAgb3B0cy5tb2RlID0gJ2NvcnMnO1xuXG4gIHJldHVybiBmZXRjaCh1cmwsIG9wdHMpLnRoZW4oY2hlY2tTdGF0dXMpLnRoZW4ocGFyc2VSZXNwb25zZSk7XG59XG5cbnZhciBMaXN0aW5nc0FkYXB0ZXIgPSBDb3JlT2JqZWN0LmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGFqYXg6IGFqYXgsXG5cbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9LFxuICBwYXRoRm9yVHlwZTogZnVuY3Rpb24gcGF0aEZvclR5cGUodHlwZSkge1xuICAgIHJldHVybiAnLycgKyB0eXBlLnNsaWNlKDAsIC0xKSArICdfbGlzdGluZ3MnO1xuICB9LFxuICBidWlsZFVybDogZnVuY3Rpb24gYnVpbGRVcmwoc2luZ2xlT3JNdWx0aXBsZSwgdHlwZSwgaWRPclF1ZXJ5KSB7XG4gICAgc3dpdGNoIChzaW5nbGVPck11bHRpcGxlKSB7XG4gICAgICBjYXNlICdtdWx0aXBsZSc6XG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkTXVsdGlwbGVVcmwodHlwZSwgaWRPclF1ZXJ5KTtcbiAgICAgIGNhc2UgJ3NpbmdsZSc6XG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkU2luZ2xlVXJsKHR5cGUsIGlkT3JRdWVyeSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuICBidWlsZE11bHRpcGxlVXJsOiBmdW5jdGlvbiBidWlsZE11bHRpcGxlVXJsKHR5cGUpIHtcbiAgICB2YXIgcXVlcnkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgdmFyIHVybCA9ICcnICsgdGhpcy5iYXNlVXJsICsgdGhpcy5wYXRoRm9yVHlwZSh0eXBlKTtcbiAgICB2YXIgcGFyYW1OYW1lcyA9IE9iamVjdC5rZXlzKHF1ZXJ5KTtcblxuICAgIGlmIChwYXJhbU5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHZhciBxdWVyeVN0cmluZyA9IHBhcmFtTmFtZXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwO1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHF1ZXJ5W2tleV0pKSB7XG4gICAgICAgICAgdmFsdWUgPSBxdWVyeVtrZXldLmpvaW4oJywnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZSA9IHF1ZXJ5W2tleV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ga2V5ICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgICAgIH0pLmpvaW4oJyYnKTtcblxuICAgICAgcmV0dXJuIHVybCArICc/JyArIHF1ZXJ5U3RyaW5nO1xuICAgIH1cblxuICAgIHJldHVybiB1cmw7XG4gIH0sXG4gIGJ1aWxkU2luZ2xlVXJsOiBmdW5jdGlvbiBidWlsZFNpbmdsZVVybCh0eXBlLCBpZCkge1xuICAgIHJldHVybiAnJyArIHRoaXMuYmFzZVVybCArIHRoaXMucGF0aEZvclR5cGUodHlwZSkgKyAnLycgKyBpZDtcbiAgfSxcbiAgZmV0Y2hNdWx0aXBsZTogZnVuY3Rpb24gZmV0Y2hNdWx0aXBsZSgpIC8qIHR5cGUsIFtxdWVyeV0gKi97XG4gICAgdmFyIHVybCA9IHRoaXMuYnVpbGRVcmwuYXBwbHkodGhpcywgWydtdWx0aXBsZSddLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG5cbiAgICByZXR1cm4gdGhpcy5hamF4KCdHRVQnLCB1cmwsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbjtcbiAgICB9KTtcbiAgfSxcbiAgZmV0Y2hTaW5nbGU6IGZ1bmN0aW9uIGZldGNoU2luZ2xlKCkgLyogdHlwZSwgaWQgKi97XG4gICAgdmFyIHVybCA9IHRoaXMuYnVpbGRVcmwuYXBwbHkodGhpcywgWydzaW5nbGUnXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuXG4gICAgcmV0dXJuIHRoaXMuYWpheCgnR0VUJywgdXJsLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb247XG4gICAgfSk7XG4gIH1cbn0sIHtcbiAgYmFzZTY0QXBpS2V5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gYnRvYSh0aGlzLmNvbmZpZy5hcGlLZXkpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgYmFzZVVybDoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIF9jb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgIHZhciBkb21haW4gPSBfY29uZmlnLmRvbWFpbjtcbiAgICAgIHZhciBhcHBJZCA9IF9jb25maWcuYXBwSWQ7XG5cblxuICAgICAgcmV0dXJuICdodHRwczovLycgKyBkb21haW4gKyAnL2FwaS9hcHBzLycgKyBhcHBJZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGhlYWRlcnM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBhc3NpZ24kMSh7fSwge1xuICAgICAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIHRoaXMuYmFzZTY0QXBpS2V5LFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnWC1TREstVmFyaWFudCc6ICdqYXZhc2NyaXB0JyxcbiAgICAgICAgJ1gtU0RLLVZlcnNpb24nOiB2ZXJzaW9uXG5cbiAgICAgIH0sIHRoaXMuY29uZmlnLmFqYXhIZWFkZXJzKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxudmFyIEdVSURfS0VZID0gJ3Nob3BpZnktYnV5LXV1aWQnO1xuXG4vKipcbiAqIEEgY2FydCBzdG9yZXMgYW4gQXJyYXkgb2YgYENhcnRMaW5lSXRlbU1vZGVsYCdzIGluIGl0J3MgYGxpbmVJdGVtc2AgcHJvcGVydHkuXG4gKiBAY2xhc3MgQ2FydExpbmVJdGVtTW9kZWxcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgQ2FydExpbmVJdGVtTW9kZWwgPSBCYXNlTW9kZWwuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXNbJ3N1cGVyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxufSwge1xuICBpZDoge1xuXG4gICAgLyoqXG4gICAgICogQSBsaW5lIGl0ZW0gSUQuXG4gICAgICogQHByb3BlcnR5IGlkXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzW0dVSURfS0VZXTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHZhcmlhbnRfaWQ6IHtcblxuICAgIC8qKlxuICAgICAqIElEIG9mIGxpbmUgaXRlbSB2YXJpYW50LlxuICAgICAqIEBwcm9wZXJ0eSB2YXJpYW50X2lkXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnRfaWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcm9kdWN0X2lkOiB7XG5cbiAgICAvKipcbiAgICAgKiBJRCBvZiB2YXJpYW50J3MgcHJvZHVjdC5cbiAgICAgKiBAcHJvcGVydHkgcHJvZHVjdF9pZFxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcm9kdWN0X2lkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaW1hZ2U6IHtcblxuICAgIC8qKlxuICAgICAqIFZhcmlhbnQncyBpbWFnZS5cbiAgICAgKiBFeGFtcGxlIGBPYmplY3RgIHJldHVybmVkOlxuICAgICAqIGBgYFxuICAgICAqIHtcbiAgICAgKiAgICBcImlkXCI6IDE4NzIzMTgzMjM4LFxuICAgICAqICAgIFwiY3JlYXRlZF9hdFwiOiBcIjIwMTYtMDktMTRUMTc6MTI6MTItMDQ6MDBcIixcbiAgICAgKiAgICBcInBvc2l0aW9uXCI6IDEsXG4gICAgICogICAgXCJ1cGRhdGVkX2F0XCI6IFwiMjAxNi0wOS0xNFQxNzoxMjoxMi0wNDowMFwiLFxuICAgICAqICAgIFwicHJvZHVjdF9pZFwiOiA4NTY5OTExNTU4LFxuICAgICAqICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9Nb3BfX3RocmVlX2RpZmZlcmVudF9tb3BfaGFuZGxlcy5qcGc/dj0xNDczODg3NTMyXCIsXG4gICAgICogICAgXCJ2YXJpYW50X2lkc1wiOiBbXVxuICAgICAqICB9XG4gICAgICogYGBgXG4gICAgICogQHByb3BlcnR5IGltYWdlXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICghdGhpcy5hdHRycy5pbWFnZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBJbWFnZU1vZGVsKHRoaXMuYXR0cnMuaW1hZ2UpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaW1hZ2VWYXJpYW50czoge1xuXG4gICAgLyoqXG4gICAgICAqIEltYWdlIHZhcmlhbnRzIGF2YWlsYWJsZSBmb3IgYSB2YXJpYW50LiBBbiBleGFtcGxlIHZhbHVlIG9mIGBpbWFnZVZhcmlhbnRgOlxuICAgICAgKiBgYGBcbiAgICAgICogW1xuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcInBpY29cIixcbiAgICAgICogICAgIFwiZGltZW5zaW9uc1wiOiBcIjE2eDE2XCIsXG4gICAgICAqICAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvYWxpZW5fMTQ2ZWY3YzEtMjZlOS00ZTk2LTk2ZTYtOWQzNzEyOGQwMDA1X3BpY28uanBnP3Y9MTQ2OTA0NjQyM1wiXG4gICAgICAqICAgfSxcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJjb21wYWN0XCIsXG4gICAgICAqICAgICBcImRpbWVuc2lvbnNcIjogXCIxNjB4MTYwXCIsXG4gICAgICAqICAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvYWxpZW5fMTQ2ZWY3YzEtMjZlOS00ZTk2LTk2ZTYtOWQzNzEyOGQwMDA1X2NvbXBhY3QuanBnP3Y9MTQ2OTA0NjQyM1wiXG4gICAgICAqICAgfVxuICAgICAgKiBdXG4gICAgICAqIGBgYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgaW1hZ2VWYXJpYW50XG4gICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCF0aGlzLmltYWdlKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuaW1hZ2UudmFyaWFudHM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB0aXRsZToge1xuXG4gICAgLyoqXG4gICAgICogUHJvZHVjdCB0aXRsZSBvZiB2YXJpYW50J3MgcGFyZW50IHByb2R1Y3QuXG4gICAgICogQHByb3BlcnR5IHRpdGxlXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnRpdGxlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcXVhbnRpdHk6IHtcblxuICAgIC8qKlxuICAgICAqIENvdW50IG9mIHZhcmlhbnRzIHRvIG9yZGVyLlxuICAgICAqIEBwcm9wZXJ0eSBxdWFudGl0eVxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5xdWFudGl0eTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICB2YXIgcGFyc2VkVmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuXG4gICAgICBpZiAocGFyc2VkVmFsdWUgPCAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUXVhbnRpdGllcyBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgICB9IGVsc2UgaWYgKHBhcnNlZFZhbHVlICE9PSBwYXJzZUZsb2F0KHZhbHVlKSkge1xuICAgICAgICAvKiBpbmNpZGVudGFsbHksIHRoaXMgY292ZXJzIGFsbCBOYU4gdmFsdWVzLCBiZWNhdXNlIE5hTiAhPT0gTmFuICovXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUXVhbnRpdGllcyBtdXN0IGJlIHdob2xlIG51bWJlcnMnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hdHRycy5xdWFudGl0eSA9IHBhcnNlZFZhbHVlO1xuXG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5xdWFudGl0eTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHByb3BlcnRpZXM6IHtcblxuICAgIC8qKlxuICAgICAqIEN1c3RvbWl6YXRpb24gaW5mb3JtYXRpb24gZm9yIGEgcHJvZHVjdC5cbiAgICAgKiA8YSBocmVmPVwiaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL3RoZW1lcy9jdXN0b21pemF0aW9uL3Byb2R1Y3RzL2dldC1jdXN0b21pemF0aW9uLWluZm9ybWF0aW9uLWZvci1wcm9kdWN0c1wiIHRhcmdldD1cIl9ibGFua1wiPlxuICAgICAqIFNlZSBoZXJlIGZvciBtb3JlIGluZm9cbiAgICAgKiA8L2E+LlxuICAgICAqIEBwcm9wZXJ0eSBwcm9wZXJ0aWVzXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucHJvcGVydGllcyB8fCB7fTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICB0aGlzLmF0dHJzLnByb3BlcnRpZXMgPSB2YWx1ZSB8fCB7fTtcblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdmFyaWFudF90aXRsZToge1xuXG4gICAgLyoqXG4gICAgICogVGl0bGUgb2YgdmFyaWFudC5cbiAgICAgKiBAcHJvcGVydHkgdmFyaWFudF90aXRsZVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50X3RpdGxlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcHJpY2U6IHtcblxuICAgIC8qKlxuICAgICAqIFByaWNlIG9mIHRoZSB2YXJpYW50LiBGb3IgZXhhbXBsZTogYFwiNS4wMFwiYC5cbiAgICAgKiBAcHJvcGVydHkgcHJpY2VcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucHJpY2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBjb21wYXJlX2F0X3ByaWNlOiB7XG5cbiAgICAvKipcbiAgICAgICogQ29tcGFyZSBhdCBwcmljZSBmb3IgdmFyaWFudC4gVGhlIGBjb21wYXJlQXRQcmljZWAgd291bGQgYmVcbiAgICAgICogdGhlIHByaWNlIG9mIHRoZSBwcm9kdWN0IHByZXZpb3VzbHkgYmVmb3JlIHRoZSBwcm9kdWN0IHdlbnQgb24gc2FsZS4gRm9yIG1vcmUgaW5mb1xuICAgICAgKiBnbyA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLnNob3BpZnkuY29tL21hbnVhbC9wcm9kdWN0cy9wcm9tb3RpbmctbWFya2V0aW5nL3NhbGVzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+aGVyZTwvYT4uXG4gICAgICAqXG4gICAgICAqIElmIG5vIGBjb21wYXJlQXRQcmljZWAgaXMgc2V0IHRoZW4gdGhpcyB2YWx1ZSB3aWxsIGJlIGBudWxsYC4gQW4gZXhhbXBsZSB2YWx1ZTogYFwiNS4wMFwiYC5cbiAgICAgICogQHByb3BlcnR5IGNvbXBhcmVBdFByaWNlXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5jb21wYXJlX2F0X3ByaWNlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgbGluZV9wcmljZToge1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIHByaWNlIGZvciB0aGlzIGxpbmUgaXRlbS4gRm9yIGluc3RhbmNlIGlmIHRoZSB2YXJpYW50IGNvc3RzIGAxLjUwYCBhbmQgeW91IGhhdmUgYSBxdWFudGl0eVxuICAgICAqIG9mIDIgdGhlbiBgbGluZV9wcmljZWAgd2lsbCBiZSBgMy4wMGAuXG4gICAgICogQHByb3BlcnR5IGxpbmVfcHJpY2VcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuICh0aGlzLnF1YW50aXR5ICogcGFyc2VGbG9hdCh0aGlzLnByaWNlKSkudG9GaXhlZCgyKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGdyYW1zOiB7XG5cbiAgICAvKipcbiAgICAgKiBWYXJpYW50J3Mgd2VpZ2h0IGluIGdyYW1zLiBJZiBubyB3ZWlnaHQgaXMgc2V0IHRoZW4gYDBgIGlzIHJldHVybmVkLlxuICAgICAqIEBwcm9wZXJ0eSBncmFtc1xuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5ncmFtcztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxuLyogZXNsaW50IG5vLXVuZGVmaW5lZDogMCBjb21wbGV4aXR5OiAwICovXG52YXIgR1VJRF9QUkVGSVggPSAnc2hvcGlmeS1idXkuJyArIERhdGUubm93KCk7XG5cbnZhciBHVUlEX0RFU0MgPSB7XG4gIHdyaXRhYmxlOiB0cnVlLFxuICBjb25maWd1cmFibGU6IHRydWUsXG4gIGVudW1lcmFibGU6IHRydWUsXG4gIHZhbHVlOiBudWxsXG59O1xuXG52YXIgdXVpZFNlZWQgPSAwO1xuXG5mdW5jdGlvbiB1dWlkKCkge1xuICByZXR1cm4gKyt1dWlkU2VlZDtcbn1cblxudmFyIG51bWJlckNhY2hlID0ge307XG52YXIgc3RyaW5nQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gc2V0R3VpZEZvcihvYmopIHtcbiAgaWYgKG9iaiAmJiBvYmpbR1VJRF9LRVldKSB7XG4gICAgcmV0dXJuIG9ialtHVUlEX0tFWV07XG4gIH1cblxuICBpZiAob2JqID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJyh1bmRlZmluZWQpJztcbiAgfVxuXG4gIGlmIChvYmogPT09IG51bGwpIHtcbiAgICByZXR1cm4gJyhudWxsKSc7XG4gIH1cblxuICB2YXIgdHlwZSA9IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9iaik7XG4gIHZhciBpZCA9IHZvaWQgMDtcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgaWQgPSBudW1iZXJDYWNoZVtvYmpdO1xuXG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIGlkID0gbnVtYmVyQ2FjaGVbb2JqXSA9ICdudScgKyBvYmo7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIGlkID0gc3RyaW5nQ2FjaGVbb2JqXTtcblxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBpZCA9IHN0cmluZ0NhY2hlW29ial0gPSAnc3QnICsgdXVpZCgpO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgaWYgKG9iaikge1xuICAgICAgICBpZCA9ICcodHJ1ZSknO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWQgPSAnKGZhbHNlKSc7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChvYmogPT09IE9iamVjdCkge1xuICAgICAgICBpZCA9ICcoT2JqZWN0KSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAob2JqID09PSBBcnJheSkge1xuICAgICAgICBpZCA9ICcoQXJyYXkpJztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlkID0gR1VJRF9QUkVGSVggKyAnLicgKyB1dWlkKCk7XG5cbiAgICAgIGlmIChvYmpbR1VJRF9LRVldID09PSBudWxsKSB7XG4gICAgICAgIG9ialtHVUlEX0tFWV0gPSBpZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEdVSURfREVTQy52YWx1ZSA9IGlkO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBHVUlEX0tFWSwgR1VJRF9ERVNDKTtcbiAgICAgIH1cbiAgfVxuXG4gIHJldHVybiBpZDtcbn1cblxuLyogZ2xvYmFsIGdsb2JhbCAqL1xuXG52YXIgZ2xvYmFsTmFtZXNwYWNlID0gdm9pZCAwO1xuXG5pZiAodHlwZW9mIGdsb2JhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgZ2xvYmFsTmFtZXNwYWNlID0gd2luZG93O1xufSBlbHNlIHtcbiAgZ2xvYmFsTmFtZXNwYWNlID0gZ2xvYmFsO1xufVxuXG5mdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkge1xuICBpZiAoIWdsb2JhbE5hbWVzcGFjZVtrZXldKSB7XG4gICAgZ2xvYmFsTmFtZXNwYWNlW2tleV0gPSB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXQoa2V5KSB7XG4gIHJldHVybiBnbG9iYWxOYW1lc3BhY2Vba2V5XTtcbn1cblxudmFyIGdsb2JhbFZhcnMgPSB7IHNldDogc2V0LCBnZXQ6IGdldCB9O1xuXG5mdW5jdGlvbiBvYmplY3RzRXF1YWwob25lLCB0d28pIHtcbiAgaWYgKG9uZSA9PT0gdHdvKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmtleXMob25lKS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKG9uZVtrZXldIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuIG9uZVtrZXldLnRvU3RyaW5nKCkgPT09IHR3b1trZXldLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmIChfdHlwZW9mKG9uZVtrZXldKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBvYmplY3RzRXF1YWwob25lW2tleV0sIHR3b1trZXldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb25lW2tleV0gPT09IHR3b1trZXldO1xuICB9KTtcbn1cblxuLyoqXG4qIENsYXNzIGZvciBjYXJ0IG1vZGVsXG4qIEBjbGFzcyBDYXJ0TW9kZWxcbiovXG52YXIgQ2FydE1vZGVsID0gQmFzZU1vZGVsLmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzWydzdXBlciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIEFkZCBpdGVtcyB0byB0aGUgY2FydC4gVXBkYXRlcyBjYXJ0J3MgYGxpbmVJdGVtc2AgYmFzZWQgb24gdmFyaWFudHMgcGFzc2VkIGluLlxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogY2FydC5hZGRWYXJpYW50cyh7dmFyaWFudDogdmFyaWFudE9iamVjdCwgcXVhbnRpdHk6IDF9KS50aGVuKGNhcnQgPT4ge1xuICAgICogICAvLyB0aGUgY2FydCBoYXMgY3JlYXRlZCBsaW5lIGl0ZW1zXG4gICAgKiB9KTtcbiAgICAqIGBgYFxuICAgICogQGRlcHJlY2F0ZWQgYGNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c2Agd2lsbCBiZSB1c2VkIGluIHRoZSBmdXR1cmUgYXMgaXQncyBtb3JlIGRlc2NyaXB0aXZlXG4gICAgKiBAbWV0aG9kIGFkZFZhcmlhbnRzXG4gICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbSAtIE9uZSBvciBtb3JlIHZhcmlhbnRzXG4gICAgKiBAcGFyYW0ge1Byb2R1Y3RWYXJpYW50TW9kZWx9IGl0ZW0udmFyaWFudCAtIHZhcmlhbnQgb2JqZWN0XG4gICAgKiBAcGFyYW0ge051bWJlcn0gaXRlbS5xdWFudGl0eSAtIHF1YW50aXR5XG4gICAgKiBAcGFyYW0ge09iamVjdH0gW21vcmVJdGVtcy4uLl0gLSBmdXJ0aGVyIG9iamVjdHMgZGVmaW5pbmcgYHZhcmlhbnRgIGFuZCBgcXVhbnRpdHlgIG1heWJlIHBhc3NlZCBpblxuICAgICogQHByaXZhdGVcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHRoZSBjYXJ0IGluc3RhbmNlLlxuICAqL1xuICBhZGRWYXJpYW50czogZnVuY3Rpb24gYWRkVmFyaWFudHMoKSB7XG4gICAgbG9nZ2VyLndhcm4oJ0NhcnRNb2RlbCAtICcsICdhZGRWYXJpYW50cyBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cyBpbnN0ZWFkJyk7XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogQWRkIGl0ZW1zIHRvIHRoZSBjYXJ0LiBVcGRhdGVzIGNhcnQncyBgbGluZUl0ZW1zYCBiYXNlZCBvbiB2YXJpYW50cyBwYXNzZWQgaW4uXG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiBjYXJ0LmNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cyh7dmFyaWFudDogdmFyaWFudE9iamVjdCwgcXVhbnRpdHk6IDF9KS50aGVuKGNhcnQgPT4ge1xuICAgICogICAvLyB0aGUgY2FydCBoYXMgY3JlYXRlZCBsaW5lIGl0ZW1zXG4gICAgKiB9KTtcbiAgICAqIGBgYFxuICAgICogQG1ldGhvZCBjcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHNcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtIC0gT25lIG9yIG1vcmUgdmFyaWFudHNcbiAgICAqIEBwYXJhbSB7UHJvZHVjdFZhcmlhbnRNb2RlbH0gaXRlbS52YXJpYW50IC0gdmFyaWFudCBvYmplY3RcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBpdGVtLnF1YW50aXR5IC0gcXVhbnRpdHlcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBbbW9yZUl0ZW1zLi4uXSAtIGZ1cnRoZXIgb2JqZWN0cyBkZWZpbmluZyBgdmFyaWFudGAgYW5kIGBxdWFudGl0eWAgbWF5YmUgcGFzc2VkIGluXG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB0aGUgY2FydCBpbnN0YW5jZS5cbiAgKi9cbiAgY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzOiBmdW5jdGlvbiBjcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHMoKSB7XG4gICAgdmFyIG5ld0xpbmVJdGVtcyA9IFtdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBsaW5lSXRlbSA9IHtcbiAgICAgICAgaW1hZ2U6IGl0ZW0udmFyaWFudC5pbWFnZSxcbiAgICAgICAgaW1hZ2VfdmFyaWFudHM6IGl0ZW0udmFyaWFudC5pbWFnZVZhcmlhbnRzLFxuICAgICAgICB2YXJpYW50X2lkOiBpdGVtLnZhcmlhbnQuaWQsXG4gICAgICAgIHByb2R1Y3RfaWQ6IGl0ZW0udmFyaWFudC5wcm9kdWN0SWQsXG4gICAgICAgIHRpdGxlOiBpdGVtLnZhcmlhbnQucHJvZHVjdFRpdGxlLFxuICAgICAgICBxdWFudGl0eTogcGFyc2VJbnQoaXRlbS5xdWFudGl0eSwgMTApLFxuICAgICAgICBwcm9wZXJ0aWVzOiBpdGVtLnByb3BlcnRpZXMgfHwge30sXG4gICAgICAgIHZhcmlhbnRfdGl0bGU6IGl0ZW0udmFyaWFudC50aXRsZSxcbiAgICAgICAgcHJpY2U6IGl0ZW0udmFyaWFudC5wcmljZSxcbiAgICAgICAgY29tcGFyZV9hdF9wcmljZTogaXRlbS52YXJpYW50LmNvbXBhcmVBdFByaWNlLFxuICAgICAgICBncmFtczogaXRlbS52YXJpYW50LmdyYW1zXG4gICAgICB9O1xuXG4gICAgICBzZXRHdWlkRm9yKGxpbmVJdGVtKTtcblxuICAgICAgcmV0dXJuIGxpbmVJdGVtO1xuICAgIH0pO1xuICAgIHZhciBleGlzdGluZ0xpbmVJdGVtcyA9IHRoaXMuYXR0cnMubGluZV9pdGVtcztcblxuICAgIGV4aXN0aW5nTGluZUl0ZW1zLnB1c2guYXBwbHkoZXhpc3RpbmdMaW5lSXRlbXMsIF90b0NvbnN1bWFibGVBcnJheShuZXdMaW5lSXRlbXMpKTtcblxuICAgIHZhciBkZWR1cGVkTGluZUl0ZW1zID0gZXhpc3RpbmdMaW5lSXRlbXMucmVkdWNlKGZ1bmN0aW9uIChpdGVtQWNjLCBpdGVtKSB7XG4gICAgICB2YXIgbWF0Y2hpbmdJdGVtID0gaXRlbUFjYy5maWx0ZXIoZnVuY3Rpb24gKGV4aXN0aW5nSXRlbSkge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdJdGVtLnZhcmlhbnRfaWQgPT09IGl0ZW0udmFyaWFudF9pZCAmJiBvYmplY3RzRXF1YWwoZXhpc3RpbmdJdGVtLnByb3BlcnRpZXMsIGl0ZW0ucHJvcGVydGllcyk7XG4gICAgICB9KVswXTtcblxuICAgICAgaWYgKG1hdGNoaW5nSXRlbSkge1xuICAgICAgICBtYXRjaGluZ0l0ZW0ucXVhbnRpdHkgPSBtYXRjaGluZ0l0ZW0ucXVhbnRpdHkgKyBpdGVtLnF1YW50aXR5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbUFjYy5wdXNoKGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbUFjYztcbiAgICB9LCBbXSk7XG5cbiAgICAvLyBVc2VycyBtYXkgcGFzcyBuZWdhdGl2ZSBudW1iZXJzIGFuZCByZW1vdmUgaXRlbXMuIFRoaXMgZW5zdXJlcyB0aGVyZSdzIG5vXG4gICAgLy8gaXRlbSB3aXRoIGEgcXVhbnRpdHkgb2YgemVybyBvciBsZXNzLlxuICAgIHRoaXMuYXR0cnMubGluZV9pdGVtcyA9IGRlZHVwZWRMaW5lSXRlbXMucmVkdWNlKGZ1bmN0aW9uIChpdGVtQWNjLCBpdGVtKSB7XG4gICAgICBpZiAoaXRlbS5xdWFudGl0eSA+PSAxKSB7XG4gICAgICAgIGl0ZW1BY2MucHVzaChpdGVtKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGl0ZW1BY2M7XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogVXBkYXRlIGEgbGluZSBpdGVtIHF1YW50aXR5IGJhc2VkIG9uIGxpbmUgaXRlbSBpZFxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogLy8gVGhpcyBleGFtcGxlIGNoYW5nZXMgdGhlIHF1YW50aXR5IGZvciB0aGUgZmlyc3QgbGluZSBpdGVtIHRvIDJcbiAgICAqIGNvbnN0IGZpcnN0TGluZUl0ZW1JZCA9IGNhcnQubGluZUl0ZW1zWzBdLmlkO1xuICAgICpcbiAgICAqIGNhcnQudXBkYXRlTGluZUl0ZW0oZmlyc3RMaW5lSXRlbUlkLCAyKS50aGVuKGNhcnQgPT4ge1xuICAgICogICAvLyB0aGUgY2FydCBoYXMgdXBkYXRlZCB0aGUgbGluZSBpdGVtXG4gICAgKiB9KTtcbiAgICAqIGBgYFxuICAgICogQG1ldGhvZCB1cGRhdGVMaW5lSXRlbVxuICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gbGluZSBpdGVtIElEXG4gICAgKiBAcGFyYW0ge051bWJlcn0gcXVhbnRpdHkgLSBuZXcgcXVhbnRpdHkgZm9yIGxpbmUgaXRlbVxuICAgICogQHRocm93cyB7RXJyb3J9IGlmIGxpbmUgaXRlbSB3aXRoIElEIGlzIG5vdCBpbiBjYXJ0LlxuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdGhlIGNhcnQgaW5zdGFuY2VcbiAgKi9cbiAgdXBkYXRlTGluZUl0ZW06IGZ1bmN0aW9uIHVwZGF0ZUxpbmVJdGVtKGlkLCBxdWFudGl0eSkge1xuICAgIGlmIChxdWFudGl0eSA8IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbW92ZUxpbmVJdGVtKGlkKTtcbiAgICB9XG5cbiAgICB2YXIgbGluZUl0ZW0gPSB0aGlzLmxpbmVJdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLmlkID09PSBpZDtcbiAgICB9KVswXTtcblxuICAgIGlmIChsaW5lSXRlbSkge1xuICAgICAgbGluZUl0ZW0ucXVhbnRpdHkgPSBxdWFudGl0eTtcblxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignbGluZSBpdGVtIHdpdGggaWQ6ICcgKyBpZCArICcgbm90IGZvdW5kIGluIGNhcnQjJyArIHRoaXMuaWQpKTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogUmVtb3ZlIGEgbGluZSBpdGVtIGZyb20gY2FydCBiYXNlZCBvbiBsaW5lIGl0ZW0gaWRcbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIC8vIFRoaXMgZXhhbXBsZSByZW1vdmVzIHRoZSBmaXJzdCBsaW5lIGl0ZW1cbiAgICAqIGNvbnN0IGZpcnN0TGluZUl0ZW1JZCA9IGNhcnQubGluZUl0ZW1zWzBdLmlkO1xuICAgICpcbiAgICAqIGNhcnQucmVtb3ZlTGluZUl0ZW0oZmlyc3RMaW5lSXRlbUlkKS50aGVuKGNhcnQgPT4ge1xuICAgICogICAvLyB0aGUgY2FydCBoYXMgcmVtb3ZlZCB0aGUgbGluZSBpdGVtXG4gICAgKiB9KTtcbiAgICAqIGBgYFxuICAgICpcbiAgICAqIEBtZXRob2QgcmVtb3ZlTGluZUl0ZW1cbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIGxpbmUgaXRlbSBJRFxuICAgICogQHRocm93cyB7RXJyb3J9IGlmIGxpbmUgaXRlbSB3aXRoIElEIGlzIG5vdCBpbiBjYXJ0LlxuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdGhlIGNhcnQgaW5zdGFuY2VcbiAgKi9cbiAgcmVtb3ZlTGluZUl0ZW06IGZ1bmN0aW9uIHJlbW92ZUxpbmVJdGVtKGlkKSB7XG4gICAgdmFyIG9sZExlbmd0aCA9IHRoaXMubGluZUl0ZW1zLmxlbmd0aDtcbiAgICB2YXIgbmV3TGluZUl0ZW1zID0gdGhpcy5saW5lSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5pZCAhPT0gaWQ7XG4gICAgfSk7XG4gICAgdmFyIG5ld0xlbmd0aCA9IG5ld0xpbmVJdGVtcy5sZW5ndGg7XG5cbiAgICBpZiAobmV3TGVuZ3RoIDwgb2xkTGVuZ3RoKSB7XG4gICAgICB0aGlzLmF0dHJzLmxpbmVfaXRlbXMgPSBuZXdMaW5lSXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmF0dHJzO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2xpbmUgaXRlbSB3aXRoIGlkOiAnICsgaWQgKyAnIG5vdCBmb3VuZCBpbiBjYXJ0IycgKyB0aGlzLmlkKSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIFJlbW92ZSBhbGwgbGluZSBpdGVtcyBmcm9tIGNhcnRcbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIC8vIFRoaXMgZXhhbXBsZSByZW1vdmVzIGFsbCBsaW5lIGl0ZW1zIGZyb20gdGhlIGNhcnRcbiAgICAqIGNhcnQuY2xlYXJMaW5lSXRlbXMoKS50aGVuKGNhcnQgPT4ge1xuICAgICogICAvLyB0aGUgY2FydCBoYXMgcmVtb3ZlZCBhbGwgbGluZSBpdGVtc1xuICAgICogfSk7XG4gICAgKiBAbWV0aG9kIGNsZWFyTGluZUl0ZW1zXG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB0aGUgY2FydCBpbnN0YW5jZVxuICAqL1xuICBjbGVhckxpbmVJdGVtczogZnVuY3Rpb24gY2xlYXJMaW5lSXRlbXMoKSB7XG4gICAgdGhpcy5hdHRycy5saW5lX2l0ZW1zID0gW107XG5cbiAgICByZXR1cm4gdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBGb3JjZSB1cGRhdGUgb2YgY2FydCBtb2RlbCBvbiBzZXJ2ZXIuIFRoaXMgZnVuY3Rpb24gd2lsbCBvbmx5IGJlIHVzZWQgaW4gYWR2YW5jZWQgc2l0dWF0aW9ucyBhbmQgZG9lcyBub3QgbmVlZCB0byBiZSBjYWxsZWRcbiAgICAqIGV4cGxpY2l0bHkgdG8gdXBkYXRlIGxpbmUgaXRlbXMuIEl0IGlzIGF1dG9tYXRpY2FsbHkgY2FsbGVkIGFmdGVyXG4gICAgKiB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWwvY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzXCJ9fXt7L2Nyb3NzTGlua319LFxuICAgICoge3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL3VwZGF0ZUxpbmVJdGVtXCJ9fXt7L2Nyb3NzTGlua319LFxuICAgICoge3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL3JlbW92ZUxpbmVJdGVtXCJ9fXt7L2Nyb3NzTGlua319LFxuICAgICogYW5kIHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbC9yZW1vdmVMaW5lSXRlbVwifX17ey9jcm9zc0xpbmt9fVxuICAgICpcbiAgICAqIEBtZXRob2QgdXBkYXRlTW9kZWxcbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHRoZSBjYXJ0IGluc3RhbmNlXG4gICovXG4gIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbCgpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIHJldHVybiB0aGlzLnNob3BDbGllbnQudXBkYXRlKCdjYXJ0cycsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKHVwZGF0ZUNhcnQpIHtcbiAgICAgIGFzc2lnbiQxKF90aGlzNS5hdHRycywgdXBkYXRlQ2FydC5hdHRycyk7XG5cbiAgICAgIHJldHVybiBfdGhpczU7XG4gICAgfSk7XG4gIH1cbn0sIHtcbiAgaWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBnZXQgSUQgZm9yIGN1cnJlbnQgY2FydFxuICAgICAgKiBAcHJvcGVydHkgaWRcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzW0dVSURfS0VZXTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGxpbmVJdGVtczoge1xuXG4gICAgLyoqXG4gICAgICAqIEdldCBhbiBgQXJyYXlgIG9mIHt7I2Nyb3NzTGluayBcIkNhcnRMaW5lSXRlbU1vZGVsXCJ9fUNhcnRMaW5lSXRlbU1vZGVsJ3N7ey9jcm9zc0xpbmt9fVxuICAgICAgKiBAcHJvcGVydHkgbGluZUl0ZW1zXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiAodGhpcy5hdHRycy5saW5lX2l0ZW1zIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXJ0TGluZUl0ZW1Nb2RlbChpdGVtKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgbGluZUl0ZW1Db3VudDoge1xuXG4gICAgLyoqXG4gICAgICAqIEdldHMgdGhlIHRvdGFsIHF1YW50aXR5IG9mIGFsbCBsaW5lIGl0ZW1zLiBFeGFtcGxlOiB5b3UndmUgYWRkZWQgdHdvIHZhcmlhbnRzIHdpdGggcXVhbnRpdGllcyAzIGFuZCAyLiBgbGluZUl0ZW1Db3VudGAgd2lsbCBiZSA1LlxuICAgICAgKiBAcHJvcGVydHkgbGluZUl0ZW1Db3VudFxuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMubGluZUl0ZW1zLnJlZHVjZShmdW5jdGlvbiAodG90YWwsIGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHRvdGFsICsgaXRlbS5xdWFudGl0eTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgc3VidG90YWw6IHtcblxuICAgIC8qKlxuICAgICAgKiBHZXQgY3VycmVudCBzdWJ0b3RhbCBwcmljZSBmb3IgYWxsIGxpbmUgaXRlbXMuIEV4YW1wbGU6IHR3byBpdGVtcyBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGNhcnQgdGhhdCBjb3N0ICQxLjI1XG4gICAgICAqIHRoZW4gdGhlIHN1YnRvdGFsIHdpbGwgYmUgYDIuNTBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBzdWJ0b3RhbFxuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIHN1YnRvdGFsID0gdGhpcy5saW5lSXRlbXMucmVkdWNlKGZ1bmN0aW9uIChydW5uaW5nVG90YWwsIGxpbmVJdGVtKSB7XG4gICAgICAgIHJldHVybiBydW5uaW5nVG90YWwgKyBwYXJzZUZsb2F0KGxpbmVJdGVtLmxpbmVfcHJpY2UpO1xuICAgICAgfSwgMCk7XG5cbiAgICAgIHJldHVybiBzdWJ0b3RhbC50b0ZpeGVkKDIpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgY2hlY2tvdXRVcmw6IHtcblxuICAgIC8qKlxuICAgICAgKiBHZXQgY2hlY2tvdXQgVVJMIGZvciBjdXJyZW50IGNhcnRcbiAgICAgICogQHByb3BlcnR5IGNoZWNrb3V0VXJsXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5jb25maWc7XG4gICAgICB2YXIgYmFzZVVybCA9ICdodHRwczovLycgKyBjb25maWcuZG9tYWluICsgJy9jYXJ0JztcbiAgICAgIHZhciBnYSA9IGdsb2JhbFZhcnMuZ2V0KCdnYScpO1xuXG4gICAgICB2YXIgdmFyaWFudFBhdGggPSB0aGlzLmxpbmVJdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0udmFyaWFudF9pZCArICc6JyArIGl0ZW0ucXVhbnRpdHk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIHF1ZXJ5ID0gJ2FjY2Vzc190b2tlbj0nICsgY29uZmlnLmFwaUtleSArICcmX2ZkPTAnO1xuXG4gICAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBsaW5rZXJQYXJhbSA9IHZvaWQgMDtcblxuICAgICAgICBnYShmdW5jdGlvbiAodHJhY2tlcikge1xuICAgICAgICAgIGxpbmtlclBhcmFtID0gdHJhY2tlci5nZXQoJ2xpbmtlclBhcmFtJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChsaW5rZXJQYXJhbSkge1xuICAgICAgICAgIHF1ZXJ5ICs9ICcmJyArIGxpbmtlclBhcmFtO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBiYXNlVXJsICsgJy8nICsgdmFyaWFudFBhdGggKyAnPycgKyBxdWVyeTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxudmFyIENhcnRTZXJpYWxpemVyID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH0sXG4gIHJvb3RLZXlGb3JUeXBlOiBmdW5jdGlvbiByb290S2V5Rm9yVHlwZSh0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUuc2xpY2UoMCwgLTEpO1xuICB9LFxuICBtb2RlbEZvclR5cGU6IGZ1bmN0aW9uIG1vZGVsRm9yVHlwZSgpIC8qIHR5cGUgKi97XG4gICAgcmV0dXJuIENhcnRNb2RlbDtcbiAgfSxcbiAgZGVzZXJpYWxpemVTaW5nbGU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplU2luZ2xlKHR5cGUpIHtcbiAgICB2YXIgc2luZ2xlUGF5bG9hZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdmFyIG1ldGFBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICB2YXIgbW9kZWxBdHRycyA9IHNpbmdsZVBheWxvYWRbdGhpcy5yb290S2V5Rm9yVHlwZSh0eXBlKV07XG4gICAgdmFyIG1vZGVsID0gdGhpcy5tb2RlbEZyb21BdHRycyh0eXBlLCBtb2RlbEF0dHJzLCBtZXRhQXR0cnMpO1xuXG4gICAgcmV0dXJuIG1vZGVsO1xuICB9LFxuICBtb2RlbEZyb21BdHRyczogZnVuY3Rpb24gbW9kZWxGcm9tQXR0cnModHlwZSwgYXR0cnMsIG1ldGFBdHRycykge1xuICAgIHZhciBNb2RlbCA9IHRoaXMubW9kZWxGb3JUeXBlKHR5cGUpO1xuXG4gICAgbWV0YUF0dHJzLmNvbmZpZyA9IHRoaXMuY29uZmlnO1xuXG4gICAgcmV0dXJuIG5ldyBNb2RlbChhdHRycywgbWV0YUF0dHJzKTtcbiAgfSxcbiAgc2VyaWFsaXplOiBmdW5jdGlvbiBzZXJpYWxpemUodHlwZSwgbW9kZWwpIHtcbiAgICB2YXIgcm9vdCA9IHRoaXMucm9vdEtleUZvclR5cGUodHlwZSk7XG4gICAgdmFyIHBheWxvYWQgPSB7fTtcbiAgICB2YXIgYXR0cnMgPSBhc3NpZ24kMSh7fSwgbW9kZWwuYXR0cnMpO1xuXG4gICAgcGF5bG9hZFtyb290XSA9IGF0dHJzO1xuXG4gICAgZGVsZXRlIGF0dHJzLmF0dHJpYnV0ZXM7XG5cbiAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgdmFsdWUgPSBhdHRyc1trZXldO1xuXG4gICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVsZXRlIGF0dHJzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcGF5bG9hZDtcbiAgfVxufSk7XG5cbnZhciBSZWZlcmVuY2VNb2RlbCA9IEJhc2VNb2RlbC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXG4gIC8qKlxuICAgICogQ2xhc3MgZm9yIHJlZmVyZW5jZSBtb2RlbFxuICAgICogQHByaXZhdGVcbiAgICAqIEBjbGFzcyBSZWZlcmVuY2VNb2RlbFxuICAgICogQGNvbnN0cnVjdG9yXG4gICovXG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcihhdHRycykge1xuICAgIGlmIChPYmplY3Qua2V5cyhhdHRycykuaW5kZXhPZigncmVmZXJlbmNlSWQnKSA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBrZXkgcmVmZXJlbmNlSWQgb2YgcmVmZXJlbmNlLiBSZWZlcmVuY2VzIHRvIG51bGwgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgfVxuXG4gICAgdGhpc1snc3VwZXInXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG59LCB7XG4gIGlkOiB7XG5cbiAgICAvKipcbiAgICAgICogZ2V0IHRoZSBJRCBmb3IgY3VycmVudCByZWZlcmVuY2UgKG5vdCB3aGF0IGl0IHJlZmVycyB0bywgYnV0IGl0cyBvd24gdW5pcXVlIGlkZW50aWZpZXIpXG4gICAgICAqIEBwcm9wZXJ0eSBpZFxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyc1tHVUlEX0tFWV07XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICByZWZlcmVuY2VJZDoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucmVmZXJlbmNlSWQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgdGhpcy5hdHRycy5yZWZlcmVuY2VJZCA9IHZhbHVlO1xuXG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbnZhciBSZWZlcmVuY2VTZXJpYWxpemVyID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH0sXG4gIG1vZGVsRm9yVHlwZTogZnVuY3Rpb24gbW9kZWxGb3JUeXBlKCkgLyogdHlwZSAqL3tcbiAgICByZXR1cm4gUmVmZXJlbmNlTW9kZWw7XG4gIH0sXG4gIGRlc2VyaWFsaXplU2luZ2xlOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNpbmdsZSh0eXBlKSB7XG4gICAgdmFyIHNpbmdsZVBheWxvYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHZhciBtZXRhQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gICAgdmFyIE1vZGVsID0gdGhpcy5tb2RlbEZvclR5cGUodHlwZSk7XG5cbiAgICByZXR1cm4gbmV3IE1vZGVsKHNpbmdsZVBheWxvYWQsIG1ldGFBdHRycyk7XG4gIH0sXG4gIHNlcmlhbGl6ZTogZnVuY3Rpb24gc2VyaWFsaXplKHR5cGUsIG1vZGVsKSB7XG4gICAgdmFyIGF0dHJzID0gYXNzaWduJDEoe30sIG1vZGVsLmF0dHJzKTtcblxuICAgIHJldHVybiBhdHRycztcbiAgfVxufSk7XG5cbnZhciBTdG9yZSA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubG9jYWxTdG9yYWdlQXZhaWxhYmxlID0gdGhpcy5zdG9yYWdlQXZhaWxhYmxlKCdsb2NhbFN0b3JhZ2UnKTtcbiAgICB0aGlzLmNhY2hlID0ge307XG4gIH0sXG4gIHNldEl0ZW06IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgIGlmICh0aGlzLmxvY2FsU3RvcmFnZUF2YWlsYWJsZSkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNhY2hlW2tleV0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIGdldEl0ZW06IGZ1bmN0aW9uIGdldEl0ZW0oa2V5KSB7XG4gICAgaWYgKHRoaXMubG9jYWxTdG9yYWdlQXZhaWxhYmxlKSB7XG4gICAgICB2YXIgc3RyaW5nVmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzdHJpbmdWYWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZVtrZXldIHx8IG51bGw7XG4gICAgfVxuICB9LFxuICBzdG9yYWdlQXZhaWxhYmxlOiBmdW5jdGlvbiBzdG9yYWdlQXZhaWxhYmxlKHR5cGUpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHN0b3JhZ2UgPSBnbG9iYWxWYXJzLmdldCh0eXBlKTtcbiAgICAgIHZhciB4ID0gJ19fc3RvcmFnZV90ZXN0X18nO1xuXG4gICAgICBzdG9yYWdlLnNldEl0ZW0oeCwgeCk7XG4gICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn0pO1xuXG52YXIgTG9jYWxTdG9yYWdlQWRhcHRlciA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3RvcmUgPSBuZXcgU3RvcmUoKTtcbiAgfSxcbiAgaWRLZXlGb3JUeXBlOiBmdW5jdGlvbiBpZEtleUZvclR5cGUoKSAvKiB0eXBlICove1xuICAgIHJldHVybiBHVUlEX0tFWTtcbiAgfSxcbiAgZmV0Y2hTaW5nbGU6IGZ1bmN0aW9uIGZldGNoU2luZ2xlKHR5cGUsIGlkKSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHZhbHVlID0gX3RoaXM2LnN0b3JlLmdldEl0ZW0oX3RoaXM2LnN0b3JhZ2VLZXkodHlwZSwgaWQpKTtcblxuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IodHlwZSArICcjJyArIGlkICsgJyBub3QgZm91bmQnKSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICB9KTtcbiAgfSxcbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodHlwZSwgcGF5bG9hZCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICB2YXIgaWQgPSBfdGhpczcuaWRlbnRpZnkocGF5bG9hZCk7XG5cbiAgICAgIF90aGlzNy5zdG9yZS5zZXRJdGVtKF90aGlzNy5zdG9yYWdlS2V5KHR5cGUsIGlkKSwgcGF5bG9hZCk7XG4gICAgICByZXNvbHZlKHBheWxvYWQpO1xuICAgIH0pO1xuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0eXBlLCBpZCwgcGF5bG9hZCkge1xuICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICBfdGhpczguc3RvcmUuc2V0SXRlbShfdGhpczguc3RvcmFnZUtleSh0eXBlLCBpZCksIHBheWxvYWQpO1xuICAgICAgcmVzb2x2ZShwYXlsb2FkKTtcbiAgICB9KTtcbiAgfSxcbiAgc3RvcmFnZUtleTogZnVuY3Rpb24gc3RvcmFnZUtleSh0eXBlLCBpZCkge1xuICAgIHJldHVybiB0eXBlICsgJy4nICsgaWQ7XG4gIH0sXG4gIGlkZW50aWZ5OiBmdW5jdGlvbiBpZGVudGlmeShwYXlsb2FkKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwYXlsb2FkKTtcblxuICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMSAmJiBfdHlwZW9mKHBheWxvYWRba2V5c1swXV0pID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHNldEd1aWRGb3IocGF5bG9hZFtrZXlzWzBdXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNldEd1aWRGb3IocGF5bG9hZCk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBtb2R1bGUgc2hvcGlmeS1idXlcbiAqIEBzdWJtb2R1bGUgc2hvcC1jbGllbnRcbiAqL1xuXG5mdW5jdGlvbiBmZXRjaEZhY3RvcnkoZmV0Y2hUeXBlLCB0eXBlKSB7XG4gIHZhciBmdW5jID0gdm9pZCAwO1xuXG4gIHN3aXRjaCAoZmV0Y2hUeXBlKSB7XG4gICAgY2FzZSAnYWxsJzpcbiAgICAgIGZ1bmMgPSBmdW5jdGlvbiBmdW5jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEFsbCh0eXBlKTtcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvbmUnOlxuICAgICAgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoLmFwcGx5KHRoaXMsIFt0eXBlXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3F1ZXJ5JzpcbiAgICAgIGZ1bmMgPSBmdW5jdGlvbiBmdW5jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFF1ZXJ5LmFwcGx5KHRoaXMsIFt0eXBlXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmM7XG59XG5cbnZhciBTaG9wQ2xpZW50ID0gQ29yZU9iamVjdC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICAvKipcbiAgICogQGNsYXNzIFNob3BDbGllbnRcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG5cbiAgICB0aGlzLnNlcmlhbGl6ZXJzID0ge1xuICAgICAgcHJvZHVjdHM6IExpc3RpbmdzU2VyaWFsaXplcixcbiAgICAgIGNvbGxlY3Rpb25zOiBMaXN0aW5nc1NlcmlhbGl6ZXIsXG4gICAgICBjYXJ0czogQ2FydFNlcmlhbGl6ZXIsXG4gICAgICByZWZlcmVuY2VzOiBSZWZlcmVuY2VTZXJpYWxpemVyXG4gICAgfTtcblxuICAgIHRoaXMuYWRhcHRlcnMgPSB7XG4gICAgICBwcm9kdWN0czogTGlzdGluZ3NBZGFwdGVyLFxuICAgICAgY29sbGVjdGlvbnM6IExpc3RpbmdzQWRhcHRlcixcbiAgICAgIGNhcnRzOiBMb2NhbFN0b3JhZ2VBZGFwdGVyLFxuICAgICAgcmVmZXJlbmNlczogTG9jYWxTdG9yYWdlQWRhcHRlclxuICAgIH07XG4gIH0sXG5cblxuICBjb25maWc6IG51bGwsXG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCBvZiBhIGB0eXBlYCwgcmV0dXJuaW5nIGEgcHJvbWlzZS5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hBbGwoJ3Byb2R1Y3RzJykudGhlbihwcm9kdWN0cyA9PiB7XG4gICAqICAgLy8gZG8gdGhpbmdzIHdpdGggcHJvZHVjdHNcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoQWxsXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBwbHVyYWxpemVkIG5hbWUgb2YgdGhlIHR5cGUsIGluIGxvd2VyIGNhc2UuXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QXJyYXl9IGEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhbiBhcnJheSBvZiBgdHlwZWBcbiAgICovXG4gIGZldGNoQWxsOiBmdW5jdGlvbiBmZXRjaEFsbCh0eXBlKSB7XG4gICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICB2YXIgYWRhcHRlciA9IG5ldyB0aGlzLmFkYXB0ZXJzW3R5cGVdKHRoaXMuY29uZmlnKTtcblxuICAgIHJldHVybiBhZGFwdGVyLmZldGNoTXVsdGlwbGUodHlwZSkudGhlbihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgcmV0dXJuIF90aGlzOS5kZXNlcmlhbGl6ZSh0eXBlLCBwYXlsb2FkLCBhZGFwdGVyLCBudWxsLCB7IG11bHRpcGxlOiB0cnVlIH0pO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEZldGNoIG9uZSBvZiBhIGB0eXBlYCwgcmV0dXJuaW5nIGEgcHJvbWlzZS5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2goJ3Byb2R1Y3RzJywgMTIzKS50aGVuKHByb2R1Y3QgPT4ge1xuICAgKiAgIC8vIGRvIHRoaW5ncyB3aXRoIHRoZSBwcm9kdWN0XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgcGx1cmFsaXplZCBuYW1lIG9mIHRoZSB0eXBlLCBpbiBsb3dlciBjYXNlLlxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IGlkIGEgdW5pcXVlIGlkZW50aWZpZXJcbiAgICogQHJldHVybiB7UHJvbWlzZXxCYXNlTW9kZWx9IGEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhIHNpbmdsZSBpbnN0YW5jZSBvZlxuICAgKiBgdHlwZWAgZXhwcmVzc2VkIGFzIGEgYEJhc2VNb2RlbGAuXG4gICAqL1xuICBmZXRjaDogZnVuY3Rpb24gZmV0Y2godHlwZSwgaWQpIHtcbiAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICB2YXIgYWRhcHRlciA9IG5ldyB0aGlzLmFkYXB0ZXJzW3R5cGVdKHRoaXMuY29uZmlnKTtcblxuICAgIHJldHVybiBhZGFwdGVyLmZldGNoU2luZ2xlKHR5cGUsIGlkKS50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gX3RoaXMxMC5kZXNlcmlhbGl6ZSh0eXBlLCBwYXlsb2FkLCBhZGFwdGVyLCBudWxsLCB7IHNpbmdsZTogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBGZXRjaCBtYW55IG9mIGEgYHR5cGVgLCB0aGF0IG1hdGNoIGBxdWVyeWBcbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hRdWVyeSgncHJvZHVjdHMnLCB7IGNvbGxlY3Rpb25faWQ6IDQ1NiB9KS50aGVuKHByb2R1Y3RzID0+IHtcbiAgICogICAvLyBkbyB0aGluZ3Mgd2l0aCB0aGUgcHJvZHVjdHNcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoUXVlcnlcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHBsdXJhbGl6ZWQgbmFtZSBvZiB0aGUgdHlwZSwgaW4gbG93ZXIgY2FzZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IGEgcXVlcnkgc2VudCB0byB0aGUgYXBpIHNlcnZlci5cbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGFuIGFycmF5IG9mIGB0eXBlYC5cbiAgICovXG4gIGZldGNoUXVlcnk6IGZ1bmN0aW9uIGZldGNoUXVlcnkodHlwZSwgcXVlcnkpIHtcbiAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICB2YXIgYWRhcHRlciA9IG5ldyB0aGlzLmFkYXB0ZXJzW3R5cGVdKHRoaXMuY29uZmlnKTtcblxuICAgIHJldHVybiBhZGFwdGVyLmZldGNoTXVsdGlwbGUodHlwZSwgcXVlcnkpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgIHJldHVybiBfdGhpczExLmRlc2VyaWFsaXplKHR5cGUsIHBheWxvYWQsIGFkYXB0ZXIsIG51bGwsIHsgbXVsdGlwbGU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIGB0eXBlYCwgb3B0aW9uYWxseSBpbmNsdWRpbmcgYG1vZGVsQXR0cnNgLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5jcmVhdGUoJ2NhcnRzJywgeyBsaW5lX2l0ZW1zOiBbIC4uLiBdIH0pLnRoZW4oY2FydCA9PiB7XG4gICAqICAgLy8gZG8gdGhpbmdzIHdpdGggdGhlIGNhcnQuXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBjcmVhdGVcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHBsdXJhbGl6ZWQgbmFtZSBvZiB0aGUgdHlwZSwgaW4gbG93ZXIgY2FzZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFttb2RlbEF0dHJzPXt9XSBhdHRyaWJ1dGVzIHJlcHJlc2VudGluZyB0aGUgaW50ZXJuYWwgc3RhdGVcbiAgICogb2YgdGhlIG1vZGVsIHRvIGJlIHBlcnNpc3RlZC5cbiAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IGEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhIHNpbmdsZSBpbnN0YW5jZSBvZlxuICAgKiBgdHlwZWBcbiAgICovXG4gIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHR5cGUpIHtcbiAgICB2YXIgX3RoaXMxMiA9IHRoaXM7XG5cbiAgICB2YXIgbW9kZWxBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICB2YXIgYWRhcHRlciA9IG5ldyB0aGlzLmFkYXB0ZXJzW3R5cGVdKHRoaXMuY29uZmlnKTtcbiAgICB2YXIgc2VyaWFsaXplciA9IG5ldyB0aGlzLnNlcmlhbGl6ZXJzW3R5cGVdKHRoaXMuY29uZmlnKTtcbiAgICB2YXIgTW9kZWwgPSBzZXJpYWxpemVyLm1vZGVsRm9yVHlwZSh0eXBlKTtcbiAgICB2YXIgbW9kZWwgPSBuZXcgTW9kZWwobW9kZWxBdHRycywgeyBzaG9wQ2xpZW50OiB0aGlzIH0pO1xuICAgIHZhciBhdHRycyA9IHNlcmlhbGl6ZXIuc2VyaWFsaXplKHR5cGUsIG1vZGVsKTtcblxuICAgIHJldHVybiBhZGFwdGVyLmNyZWF0ZSh0eXBlLCBhdHRycykudGhlbihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgcmV0dXJuIF90aGlzMTIuZGVzZXJpYWxpemUodHlwZSwgcGF5bG9hZCwgYWRhcHRlciwgc2VyaWFsaXplciwgeyBzaW5nbGU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIGB0eXBlYCwgb3B0aW9uYWxseSBpbmNsdWRpbmcgYGF0dHJzYC5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuY3JlYXRlKCdjYXJ0cycsIHsgbGluZV9pdGVtczogWyAuLi4gXSB9KS50aGVuKGNhcnQgPT4ge1xuICAgKiAgIC8vIGRvIHRoaW5ncyB3aXRoIHRoZSBjYXJ0LlxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgdXBkYXRlXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBwbHVyYWxpemVkIG5hbWUgb2YgdGhlIHR5cGUsIGluIGxvd2VyIGNhc2UuXG4gICAqIEBwYXJhbSB7QmFzZU1vZGVsfSB1cGRhdGVkTW9kZWwgVGhlIG1vZGVsIHRoYXQgcmVwcmVzZW50cyBuZXcgc3RhdGUgdG9cbiAgICogdG8gcGVyc2lzdC5cbiAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IGEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhIHNpbmdsZSBpbnN0YW5jZSBvZlxuICAgKiBgdHlwZWBcbiAgICovXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHR5cGUsIHVwZGF0ZWRNb2RlbCkge1xuICAgIHZhciBfdGhpczEzID0gdGhpcztcblxuICAgIHZhciBhZGFwdGVyID0gdXBkYXRlZE1vZGVsLmFkYXB0ZXI7XG4gICAgdmFyIHNlcmlhbGl6ZXIgPSB1cGRhdGVkTW9kZWwuc2VyaWFsaXplcjtcbiAgICB2YXIgc2VyaWFsaXplZE1vZGVsID0gc2VyaWFsaXplci5zZXJpYWxpemUodHlwZSwgdXBkYXRlZE1vZGVsKTtcbiAgICB2YXIgaWQgPSB1cGRhdGVkTW9kZWwuYXR0cnNbYWRhcHRlci5pZEtleUZvclR5cGUodHlwZSldO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIudXBkYXRlKHR5cGUsIGlkLCBzZXJpYWxpemVkTW9kZWwpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgIHJldHVybiBfdGhpczEzLmRlc2VyaWFsaXplKHR5cGUsIHBheWxvYWQsIGFkYXB0ZXIsIHNlcmlhbGl6ZXIsIHsgc2luZ2xlOiB0cnVlIH0pO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFByb3h5IHRvIHNlcmlhbGl6ZXIncyBkZXNlcmlhbGl6ZS5cbiAgICpcbiAgICogQG1ldGhvZCBkZXNlcmlhbGl6ZVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgcGx1cmFsaXplZCBuYW1lIG9mIHRoZSB0eXBlLCBpbiBsb3dlciBjYXNlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCBUaGUgcmF3IHBheWxvYWQgcmV0dXJuZWQgYnkgdGhlIGFkYXB0ZXIuXG4gICAqIEBwYXJhbSB7QmFzZUFkYXB0ZXJ9IGFkYXB0ZXIgVGhlIGFkYXB0ZXIgdGhhdCB5aWVsZGVkIHRoZSBwYXlsb2FkLlxuICAgKiBAcGFyYW0ge0Jhc2VTZXJpYWxpemVyfSBleGlzdGluZ1NlcmlhbGl6ZXIgVGhlIHNlcmlhbGl6ZXIgdG8gYXR0YWNoLiBJZlxuICAgKiBub25lIGlzIHBhc3NlZCwgdGhlbiBgdGhpcy5kZXNlcmlhbGl6ZWAgd2lsbCBjcmVhdGUgb25lIGZvciB0aGUgdHlwZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9ucyB0aGF0IGRldGVybWluZSB3aGljaCBkZXNlcmlhbGl6YXRpb24gbWV0aG9kIHRvXG4gICAqIHVzZS5cbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRzLm11bHRpcGxlIHRydWUgd2hlbiB0aGUgcGF5bG9hZCByZXByZXNlbnRzIG11bHRpcGxlXG4gICAqIG1vZGVsc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdHMuc2luZ2xlIHRydWUgd2hlbiB0aGUgcGF5bG9hZCByZXByZXNlbnRzIG9uZSBtb2RlbC5cbiAgICogQHJldHVybiB7QmFzZU1vZGVsfSBhbiBpbnN0YW5jZSBvZiBgdHlwZWAgcmVpZmllZCBpbnRvIGEgbW9kZWwuXG4gICAqL1xuICBkZXNlcmlhbGl6ZTogZnVuY3Rpb24gZGVzZXJpYWxpemUodHlwZSwgcGF5bG9hZCwgYWRhcHRlciwgZXhpc3RpbmdTZXJpYWxpemVyKSB7XG4gICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHt9O1xuXG4gICAgdmFyIHNlcmlhbGl6ZXIgPSBleGlzdGluZ1NlcmlhbGl6ZXIgfHwgbmV3IHRoaXMuc2VyaWFsaXplcnNbdHlwZV0odGhpcy5jb25maWcpO1xuICAgIHZhciBtZXRhID0geyBzaG9wQ2xpZW50OiB0aGlzLCBhZGFwdGVyOiBhZGFwdGVyLCBzZXJpYWxpemVyOiBzZXJpYWxpemVyLCB0eXBlOiB0eXBlIH07XG4gICAgdmFyIHNlcmlhbGl6ZWRQYXlsb2FkID0gdm9pZCAwO1xuXG4gICAgaWYgKG9wdHMubXVsdGlwbGUpIHtcbiAgICAgIHNlcmlhbGl6ZWRQYXlsb2FkID0gc2VyaWFsaXplci5kZXNlcmlhbGl6ZU11bHRpcGxlKHR5cGUsIHBheWxvYWQsIG1ldGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJpYWxpemVkUGF5bG9hZCA9IHNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTaW5nbGUodHlwZSwgcGF5bG9hZCwgbWV0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlcmlhbGl6ZWRQYXlsb2FkO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBDcmVhdGVzIGEge3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsXCJ9fUNhcnRNb2RlbHt7L2Nyb3NzTGlua319IGluc3RhbmNlLlxuICAgICpcbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIGNsaWVudC5jcmVhdGVDYXJ0KCkudGhlbihjYXJ0ID0+IHtcbiAgICAqICAgLy8gZG8gc29tZXRoaW5nIHdpdGggY2FydFxuICAgICogfSk7XG4gICAgKiBgYGBcbiAgICAqXG4gICAgKiBAbWV0aG9kIGNyZWF0ZUNhcnRcbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIG5ldyBjYXJ0IGluc3RhbmNlLlxuICAqL1xuICBjcmVhdGVDYXJ0OiBmdW5jdGlvbiBjcmVhdGVDYXJ0KCkge1xuICAgIHZhciB1c2VyQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgdmFyIGJhc2VBdHRycyA9IHtcbiAgICAgIGxpbmVfaXRlbXM6IFtdXG4gICAgfTtcbiAgICB2YXIgYXR0cnMgPSB7fTtcblxuICAgIGFzc2lnbiQxKGF0dHJzLCBiYXNlQXR0cnMpO1xuICAgIGFzc2lnbiQxKGF0dHJzLCB1c2VyQXR0cnMpO1xuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKCdjYXJ0cycsIGF0dHJzKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogVXBkYXRlcyBhbiBleGlzdGluZyB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWxcIn19Q2FydE1vZGVse3svY3Jvc3NMaW5rfX0gaW5zdGFuY2UgYW5kIHBlcnNpc3RzIGl0IHRvIGxvY2FsU3RvcmFnZS5cbiAgICAqXG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiBjbGllbnQuY3JlYXRlQ2FydCgpLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIGNhcnQubGluZUl0ZW1zID0gW1xuICAgICogICAgIC8vIC4uLlxuICAgICogICBdO1xuICAgICogICBjbGllbnQudXBkYXRlQ2FydChjYXJ0KTtcbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKlxuICAgICogQHBhcmFtIHtDYXJ0TW9kZWx9IHVwZGF0ZWRDYXJ0IGFuIHVwZGF0ZWQgQ2FydE1vZGVsXG4gICAgKiBAbWV0aG9kIHVwZGF0ZUNhcnRcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB1cGRhdGVkIGNhcnQgaW5zdGFuY2UuXG4gICovXG4gIHVwZGF0ZUNhcnQ6IGZ1bmN0aW9uIHVwZGF0ZUNhcnQodXBkYXRlZENhcnQpIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGUoJ2NhcnRzJywgdXBkYXRlZENhcnQpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGEgcHJldmlvdXNseSBjcmVhdGVkIGNhcnQgYnkgaXRzIGtleS5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hDYXJ0KCdzaG9waWZ5LWJ1eS4xNDU5ODA0Njk5MTE4LjInKS50aGVuKGNhcnQgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKGNhcnQpOyAvLyBUaGUgcmV0cmlldmVkIGNhcnRcbiAgICogfSk7XG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hDYXJ0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkIFRoZSBjYXJ0J3MgdW5pcXVlIGlkZW50aWZpZXJcbiAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IFRoZSBjYXJ0IG1vZGVsLlxuICAgKlxuICAgKi9cbiAgZmV0Y2hDYXJ0OiBmZXRjaEZhY3RvcnkoJ29uZScsICdjYXJ0cycpLFxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGFuIGBBcnJheWAgb2YgcHJvZHVjdHMgZnJvbSB5b3VyIHN0b3JlXG4gICAqIGBgYFxuICAgKiBjbGllbnQuZmV0Y2hBbGxQcm9kdWN0cygpXG4gICAqIC50aGVuKGZ1bmN0aW9uKHByb2R1Y3RzKSB7XG4gICAqICAgLy8gYWxsIHByb2R1Y3RzIGluIHN0b3JlXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaEFsbFByb2R1Y3RzXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gVGhlIHByb2R1Y3QgbW9kZWxzLlxuICAgKi9cbiAgZmV0Y2hBbGxQcm9kdWN0czogZmV0Y2hGYWN0b3J5KCdhbGwnLCAncHJvZHVjdHMnKSxcblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiBhbiBgQXJyYXlgIG9mIGNvbGxlY3Rpb25zIGZyb20geW91ciBzdG9yZVxuICAgKiBgYGBcbiAgICogY2xpZW50LmZldGNoQWxsQ29sbGVjdGlvbnMoKVxuICAgKiAudGhlbihmdW5jdGlvbihjb2xsZWN0aW9ucykge1xuICAgKlxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hBbGxDb2xsZWN0aW9uc1xuICAgKiBAcHVibGljXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QXJyYXl9IFRoZSBjb2xsZWN0aW9uIG1vZGVscy5cbiAgICovXG4gIGZldGNoQWxsQ29sbGVjdGlvbnM6IGZldGNoRmFjdG9yeSgnYWxsJywgJ2NvbGxlY3Rpb25zJyksXG5cbiAgLyoqXG4gICAqIEZldGNoIG9uZSBwcm9kdWN0IGJ5IGl0cyBJRC5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hQcm9kdWN0KCc4NTY5OTExNTU4JykudGhlbihwcm9kdWN0ID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhwcm9kdWN0KTsgLy8gVGhlIHByb2R1Y3Qgd2l0aCBhbiBJRCBvZiAnODU2OTkxMTU1OCdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoUHJvZHVjdFxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gaWQgYSB1bmlxdWUgaWRlbnRpZmllclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEJhc2VNb2RlbH0gVGhlIHByb2R1Y3QgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIElELlxuICAgKi9cbiAgZmV0Y2hQcm9kdWN0OiBmZXRjaEZhY3RvcnkoJ29uZScsICdwcm9kdWN0cycpLFxuXG4gIC8qKlxuICAgKiBGZXRjaCBvbmUgY29sbGVjdGlvbiBieSBpdHMgSUQuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoQ29sbGVjdGlvbignMzM2OTAzNDk0JykudGhlbihjb2xsZWN0aW9uID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhjb2xsZWN0aW9uKTsgLy8gVGhlIGNvbGxlY3Rpb24gd2l0aCBhbiBJRCBvZiAnMzM2OTAzNDk0J1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hDb2xsZWN0aW9uXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBpZCBhIHVuaXF1ZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QmFzZU1vZGVsfSBUaGUgY29sbGVjdGlvbiBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgSUQuXG4gICAqL1xuICBmZXRjaENvbGxlY3Rpb246IGZldGNoRmFjdG9yeSgnb25lJywgJ2NvbGxlY3Rpb25zJyksXG5cbiAgLyoqXG4gICAqIEZldGNoZXMgYSBsaXN0IG9mIHByb2R1Y3RzIG1hdGNoaW5nIGEgc3BlY2lmaWVkIHF1ZXJ5LlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFF1ZXJ5UHJvZHVjdHMoeyBjb2xsZWN0aW9uX2lkOiAnMzM2OTAzNDk0JywgdGFnOiBbJ2hhdHMnXSB9KS50aGVuKHByb2R1Y3RzID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhwcm9kdWN0cyk7IC8vIEFuIGFycmF5IG9mIHByb2R1Y3RzIGluIGNvbGxlY3Rpb24gJzMzNjkwMzQ5NCcgaGF2aW5nIHRoZSB0YWcgJ2hhdHMnXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICogQG1ldGhvZCBmZXRjaFF1ZXJ5UHJvZHVjdHNcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnkgQSBxdWVyeSBzZW50IHRvIHRoZSBhcGkgc2VydmVyIGNvbnRhaW5pbmcgb25lIG9yIG1vcmUgb2Y6XG4gICAqICAgQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbcXVlcnkuY29sbGVjdGlvbl9pZF0gVGhlIElEIG9mIGEgY29sbGVjdGlvbiB0byByZXRyaWV2ZSBwcm9kdWN0cyBmcm9tXG4gICAqICAgQHBhcmFtIHtBcnJheX0gW3F1ZXJ5LnRhZ10gQSBsaXN0IG9mIHRhZ3MgdG8gZmlsdGVyIHRoZSBwcm9kdWN0cyBieS4gQWNjZXB0cyB1cCB0byAxMCB0YWdzLlxuICAgKiAgIEBwYXJhbSB7QXJyYXl9IFtxdWVyeS5wcm9kdWN0X2lkc10gQSBsaXN0IG9mIHByb2R1Y3QgSURzIHRvIHJldHJpZXZlXG4gICAqICAgQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbcXVlcnkucGFnZT0xXSBUaGUgcGFnZSBvZmZzZXQgbnVtYmVyIG9mIHRoZSBjdXJyZW50IGxvb2t1cCAoYmFzZWQgb24gdGhlIGBsaW1pdGApXG4gICAqICAgQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbcXVlcnkubGltaXQ9NTBdIFRoZSBudW1iZXIgb2YgcHJvZHVjdHMgdG8gcmV0cmlldmUgcGVyIHBhZ2VcbiAgICogICBAcGFyYW0ge1N0cmluZ30gW3F1ZXJ5LmhhbmRsZV0gVGhlIGhhbmRsZSBvZiB0aGUgcHJvZHVjdCB0byBsb29rIHVwXG4gICAqICAgQHBhcmFtIHtTdHJpbmd9IFtxdWVyeS51cGRhdGVkX2F0X21pbl0gUHJvZHVjdHMgdXBkYXRlZCBzaW5jZSB0aGUgc3VwcGxpZWQgdGltZXN0YW1wIChmb3JtYXQ6IDIwMDgtMTItMzEgMDM6MDApXG4gICAqICAgQHBhcmFtIHtTdHJpbmd9IFtxdWVyeS5zb3J0X2J5XSBXaWxsIG1vZGlmeSBob3cgcHJvZHVjdHMgYXJlIG9yZGVyZWQuIFBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCJ1cGRhdGVkX2F0XCJgLCBgXCJiZXN0LXNlbGxpbmdcImAsIGBcInRpdGxlLWFzY2VuZGluZ1wiYCwgYFwidGl0bGUtZGVzY2VuZGluZ1wiYCxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcInByaWNlLWRlc2NlbmRpbmdcImAsIGBcInByaWNlLWFzY2VuZGluZ1wiYCwgYFwiY3JlYXRlZC1kZXNjZW5kaW5nXCJgLCBgXCJjcmVhdGVkLWFzY2VuZGluZ1wiYCxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGBcImNvbGxlY3Rpb24tZGVmYXVsdFwiYC4gVXNpbmcgYFwiY29sbGVjdGlvbi1kZWZhdWx0XCJgIG1lYW5zIHRoYXQgcHJvZHVjdHMgd2lsbCBiZSBvcmRlcmVkXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgdXNpbmcgdGhlIGN1c3RvbSBvcmRlcmluZyBkZWZpbmVkIGluIHlvdXIgU2hvcGlmeSBBZG1pbi4gRGVmYXVsdCB2YWx1ZSBgXCJjb2xsZWN0aW9uLWRlZmF1bHRcImAuXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QXJyYXl9IFRoZSBwcm9kdWN0IG1vZGVscy5cbiAgICovXG4gIGZldGNoUXVlcnlQcm9kdWN0czogZmV0Y2hGYWN0b3J5KCdxdWVyeScsICdwcm9kdWN0cycpLFxuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGEgbGlzdCBvZiBjb2xsZWN0aW9ucyBtYXRjaGluZyBhIHNwZWNpZmllZCBxdWVyeS5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hRdWVyeUNvbGxlY3Rpb25zKHtwYWdlOiAyLCBsaW1pdDogMjB9KS50aGVuKGNvbGxlY3Rpb25zID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhjb2xsZWN0aW9ucyk7IC8vIEFuIGFycmF5IG9mIGNvbGxlY3Rpb24gcmVzb3VyY2VzXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaFF1ZXJ5Q29sbGVjdGlvbnNcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnkgYSBxdWVyeSBzZW50IHRvIHRoZSBhcGkgc2VydmVyLlxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gW3F1ZXJ5LnBhZ2U9MV0gdGhlIHBhZ2Ugb2Zmc2V0IG51bWJlciBvZiB0aGUgY3VycmVudCBsb29rdXAgKGJhc2VkIG9uIHRoZSBgbGltaXRgKVxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gW3F1ZXJ5LmxpbWl0PTUwXSB0aGUgbnVtYmVyIG9mIGNvbGxlY3Rpb25zIHRvIHJldHJpZXZlIHBlciBwYWdlXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QXJyYXl9IFRoZSBjb2xsZWN0aW9uIG1vZGVscy5cbiAgICovXG4gIGZldGNoUXVlcnlDb2xsZWN0aW9uczogZmV0Y2hGYWN0b3J5KCdxdWVyeScsICdjb2xsZWN0aW9ucycpLFxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBsb29rcyB1cCBhIHJlZmVyZW5jZSBpbiBsb2NhbFN0b3JhZ2UgdG8gdGhlIG1vc3QgcmVjZW50IGNhcnQuXG4gICAqIElmIG9uZSBpcyBub3QgZm91bmQsIGNyZWF0ZXMgb25lLiBJZiB0aGUgY2FydCB0aGUgcmVmZXJlbmNlIHBvaW50cyB0b1xuICAgKiBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgb25lIGFuZCBzdG9yZSB0aGUgbmV3IHJlZmVyZW5jZS5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hSZWNlbnRDYXJ0KCkudGhlbihjYXJ0ID0+IHtcbiAgICogIC8vIGRvIHN0dWZmIHdpdGggdGhlIGNhcnRcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoUmVjZW50Q2FydFxuICAgKiBAcHVibGljXG4gICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSBUaGUgY2FydC5cbiAgICovXG4gIGZldGNoUmVjZW50Q2FydDogZnVuY3Rpb24gZmV0Y2hSZWNlbnRDYXJ0KCkge1xuICAgIHZhciBfdGhpczE0ID0gdGhpcztcblxuICAgIHJldHVybiB0aGlzLmZldGNoKCdyZWZlcmVuY2VzJywgdGhpcy5jb25maWcuZG9tYWluICsgJy5yZWNlbnQtY2FydCcpLnRoZW4oZnVuY3Rpb24gKHJlZmVyZW5jZSkge1xuICAgICAgdmFyIGNhcnRJZCA9IHJlZmVyZW5jZS5yZWZlcmVuY2VJZDtcblxuICAgICAgcmV0dXJuIF90aGlzMTQuZmV0Y2hDYXJ0KGNhcnRJZCk7XG4gICAgfSlbJ2NhdGNoJ10oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzMTQuY3JlYXRlQ2FydCgpLnRoZW4oZnVuY3Rpb24gKGNhcnQpIHtcbiAgICAgICAgdmFyIHJlZkF0dHJzID0ge1xuICAgICAgICAgIHJlZmVyZW5jZUlkOiBjYXJ0LmlkXG4gICAgICAgIH07XG5cbiAgICAgICAgcmVmQXR0cnNbR1VJRF9LRVldID0gX3RoaXMxNC5jb25maWcuZG9tYWluICsgJy5yZWNlbnQtY2FydCc7XG5cbiAgICAgICAgX3RoaXMxNC5jcmVhdGUoJ3JlZmVyZW5jZXMnLCByZWZBdHRycyk7XG5cbiAgICAgICAgcmV0dXJuIGNhcnQ7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufSwge1xuICBzZXJpYWxpemVyczoge1xuICAgIC8qKlxuICAgICAqIEBhdHRyaWJ1dGVcbiAgICAgKiBAZGVmYXVsdCB7XG4gICAgICogIHByb2R1Y3RzOiBMaXN0aW5nc0FkYXB0ZXIsXG4gICAgICogIGNvbGxlY3Rpb25zOiBMaXN0aW5nc0FkYXB0ZXIsXG4gICAgICogIGNhcnRzOiBDYXJ0QWRhcHRlclxuICAgICAqIH1cbiAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgLy8gUHJldmVudCBsZWFreSBzdGF0ZVxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGFzc2lnbiQxKHt9LCB0aGlzLnNoYWRvd2VkU2VyaWFsaXplcnMpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWVzKSB7XG4gICAgICB0aGlzLnNoYWRvd2VkU2VyaWFsaXplcnMgPSBhc3NpZ24kMSh7fSwgdmFsdWVzKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGFkYXB0ZXJzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gYXNzaWduJDEoe30sIHRoaXMuc2hhZG93ZWRBZGFwdGVycyk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZXMpIHtcbiAgICAgIHRoaXMuc2hhZG93ZWRBZGFwdGVycyA9IGFzc2lnbiQxKHt9LCB2YWx1ZXMpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG4vKiBnbG9iYWxzIHJlcXVpcmUgKi9cblxuaWYgKGlzTm9kZUxpa2VFbnZpcm9ubWVudCgpKSB7XG4gIC8qIHRoaXMgaW5kaXJlY3Rpb24gaXMgbmVlZGVkIGJlY2F1c2UgYmFiZWwgdGhyb3dzIGVycm9ycyB3aGVuXG4gICAqIHRyYW5zcGlsaW5nIHJlcXVpcmUoJ25vZGUtZmV0Y2gnKSB1c2luZyBgYW1kYCBwbHVnaW4gd2l0aCBiYWJlbDZcbiAgICovXG4gIHZhciBsb2NhbFJlcXVpcmUgPSByZXF1aXJlO1xuICB2YXIgX2ZldGNoID0gbG9jYWxSZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cbiAgZ2xvYmFsVmFycy5zZXQoJ2ZldGNoJywgX2ZldGNoKTtcbiAgZ2xvYmFsVmFycy5zZXQoJ1Jlc3BvbnNlJywgX2ZldGNoLlJlc3BvbnNlKTtcbn1cblxuLyogZ2xvYmFsIEJ1ZmZlciAqL1xuXG5pZiAoaXNOb2RlTGlrZUVudmlyb25tZW50KCkpIHtcbiAgZ2xvYmFsVmFycy5zZXQoJ2J0b2EnLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoc3RyaW5nKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBtb2R1bGUgc2hvcGlmeS1idXlcbiAqIEBzdWJtb2R1bGUgc2hvcGlmeVxuICovXG5cbi8qKlxuICogYFNob3BpZnlCdXlgIG9ubHkgZGVmaW5lcyBvbmUgZnVuY3Rpb24ge3sjY3Jvc3NMaW5rIFwiU2hvcGlmeUJ1eS9idWlsZENsaWVudFwifX17ey9jcm9zc0xpbmt9fSB3aGljaCBjYW5cbiAqIGJlIHVzZWQgdG8gYnVpbGQgYSB7eyNjcm9zc0xpbmsgXCJTaG9wQ2xpZW50XCJ9fXt7L2Nyb3NzTGlua319IHRvIHF1ZXJ5IHlvdXIgc3RvcmUgdXNpbmcgdGhlXG4gKiBwcm92aWRlZFxuICoge3sjY3Jvc3NMaW5rIFwiU2hvcGlmeUJ1eS9idWlsZENsaWVudC9jb25maWdBdHRyczphcGlLZXlcIn19YGFwaUtleWB7ey9jcm9zc0xpbmt9fSxcbiAqIHt7I2Nyb3NzTGluayBcIlNob3BpZnlCdXkvYnVpbGRDbGllbnQvY29uZmlnQXR0cnM6YXBwSWRcIn19YGFwcElkYHt7L2Nyb3NzTGlua319LFxuICogYW5kIHt7I2Nyb3NzTGluayBcIlNob3BpZnlCdXkvYnVpbGRDbGllbnQvY29uZmlnQXR0cnM6ZG9tYWluXCJ9fWBkb21haW5ge3svY3Jvc3NMaW5rfX0uXG4gKiBAY2xhc3MgU2hvcGlmeUJ1eVxuICogQHN0YXRpY1xuICovXG52YXIgU2hvcGlmeSA9IHtcbiAgU2hvcENsaWVudDogU2hvcENsaWVudCxcbiAgQ29uZmlnOiBDb25maWcsXG4gIHZlcnNpb246IHZlcnNpb24sXG4gIE5PX0lNQUdFX1VSSTogTk9fSU1BR0VfVVJJLFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBTaG9wQ2xpZW50LiBUaGlzIGlzIHRoZSBtYWluIGVudHJ5IHBvaW50IHRvIHRoZSBTREsuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY29uc3QgY2xpZW50ID0gU2hvcGlmeUJ1eS5idWlsZENsaWVudCh7XG4gICAqICAgYXBpS2V5OiAnYmYwODFlODYwYmM5ZGMxY2UwNjU0ZmRmYmMyMDg5MmQnLFxuICAgKiAgIGFwcElkOiA2LFxuICAgKiAgIG15U2hvcGlmeURvbWFpbjogJ3lvdXItc2hvcC1zdWJkb21haW4ubXlzaG9waWZ5LmNvbScsIC8vRGVwcmVjYXRlZC4gVXNlIGBkb21haW5gIGluc3RlYWRcbiAgICogICBkb21haW46ICdlbWJlZHMubXlzaG9waWZ5LmNvbSdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGJ1aWxkQ2xpZW50XG4gICAqIEBmb3IgU2hvcGlmeUJ1eVxuICAgKiBAc3RhdGljXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ0F0dHJzIEFuIG9iamVjdCBvZiByZXF1aXJlZCBjb25maWcgZGF0YSBzdWNoIGFzOiBgYXBpS2V5YCwgYGFwcElkYCwgYGRvbWFpbmBcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZ0F0dHJzLmFwaUtleSBBbiBBUEkgS2V5IGZvciB5b3VyIHN0b3JlLiBEb2N1bWVudGF0aW9uIGhvdyB0byBnZXQgYW4gQVBJIEtleTpcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwczovL2hlbHAuc2hvcGlmeS5jb20vYXBpL3Nka3MvanMtYnV5LXNkay9nZXR0aW5nLXN0YXJ0ZWQjYXBpLWtleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnQXR0cnMuYXBwSWQgVHlwaWNhbGx5IHdpbGwgYmUgNiB3aGljaCBpcyB0aGUgQnV5IEJ1dHRvbiBBcHAgSWQuIEZvciBtb3JlIGluZm8gb24gQXBwIElkIHNlZTpcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvc2Rrcy9qcy1idXktc2RrL2dldHRpbmctc3RhcnRlZCNhcHAtaWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZ0F0dHJzLmRvbWFpbiBZb3VyIHNob3AncyBmdWxsIGBteXNob3BpZnkuY29tYCBkb21haW4uIEZvciBleGFtcGxlOiBgZW1iZWRzLm15c2hvcGlmeS5jb21gXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjb25maWdBdHRycy5teVNob3BpZnlEb21haW4gWW91IHNob3AncyBgbXlzaG9waWZ5LmNvbWAgZG9tYWluLiBbZGVwcmVjYXRlZCBVc2UgY29uZmlnQXR0cnMuZG9tYWluXVxuICAgKiBAcmV0dXJuIHtTaG9wQ2xpZW50fSBhIGNsaWVudCBmb3IgdGhlIHNob3AgdXNpbmcgeW91ciBhcGkgY3JlZGVudGlhbHMgd2hpY2ggeW91IGNhbiB1c2UgdG8gcXVlcnkgeW91ciBzdG9yZS5cbiAgICovXG4gIGJ1aWxkQ2xpZW50OiBmdW5jdGlvbiBidWlsZENsaWVudCgpIHtcbiAgICB2YXIgY29uZmlnQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgdmFyIGNvbmZpZyA9IG5ldyB0aGlzLkNvbmZpZyhjb25maWdBdHRycyk7XG5cbiAgICByZXR1cm4gbmV3IHRoaXMuU2hvcENsaWVudChjb25maWcpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNob3BpZnk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc2hvcGlmeS1idXkvbGliL3Nob3BpZnkuanNcbi8vIG1vZHVsZSBpZCA9IDMzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgY2FtZWwyaHlwaGVuID0gZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyXG4gICAgICAgICAgLnJlcGxhY2UoL1tBLVpdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuICctJyArIG1hdGNoLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY2FtZWwyaHlwaGVuO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zdHJpbmctY29udmVydC9jYW1lbDJoeXBoZW4uanNcbi8vIG1vZHVsZSBpZCA9IDMzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQge1Byb3ZpZGVyfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgc2hvcGlmeUFQSSBmcm9tICdzaG9waWZ5QVBJJztcbmltcG9ydCAnYXBwbGljYXRpb25TdHlsZXMnO1xuXG5sZXQgY2FydEFjdGlvbnMgPSByZXF1aXJlKCdjYXJ0QWN0aW9ucycpO1xubGV0IHByb2R1Y3RBY3Rpb25zID0gcmVxdWlyZSgncHJvZHVjdEFjdGlvbnMnKTtcbmxldCBjb2xsZWN0aW9uQWN0aW9ucyA9IHJlcXVpcmUoJ2NvbGxlY3Rpb25BY3Rpb25zJyk7XG5sZXQgc3RvcmUgPSByZXF1aXJlKCdjb25maWd1cmVTdG9yZScpLmNvbmZpZ3VyZSgpO1xuaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlci9yb3V0ZXIuanN4JztcblxuXG4vLyBzdWJzY3JpYmUgdG8gdGhlIHJlZHV4IHN0b3JlXG5zdG9yZS5zdWJzY3JpYmUoKCkgPT4ge1xuICBsZXQgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICBjb25zb2xlLmxvZygnTmV3IHN0YXRlJywgc3RhdGUpO1xufSk7XG5cbi8vIGFkZCBwcm9kdWN0cyBhbmQgY29sbGVjdGlvbnMgdG8gc3RvcmVcbnN0b3JlLmRpc3BhdGNoKHByb2R1Y3RBY3Rpb25zLnN0YXJ0QWRkUHJvZHVjdHMoKSk7XG5zdG9yZS5kaXNwYXRjaChjb2xsZWN0aW9uQWN0aW9ucy5zdGFydEFkZENvbGxlY3Rpb25zKCkpO1xuXG4vLyBjcmVhdGUgc2hvcGlmeSBjYXJ0IGluc3RhbmNlIGJhc2VkIG9uIGxhc3Qgc2Vzc2lvbiAoYmFzZWQgb24gbG9jYWxTdG9yYWdlKVxuaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhc3RDYXJ0SWQnKSkge1xuICBzaG9waWZ5QVBJLnJlc3RvcmVDYXJ0KCkudGhlbigobG9jYWxDYXJ0KSA9PiB7XG4gICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0lOSVRJQUxfQ0FSVF9TVEFURScsIGxvY2FsQ2FydCB9KTtcbiAgfSk7XG59ZWxzZXtcbiAgc2hvcGlmeUFQSS5jcmVhdGVDYXJ0KCkudGhlbigobG9jYWxDYXJ0KSA9PiB7XG4gICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0lOSVRJQUxfQ0FSVF9TVEFURScsIGxvY2FsQ2FydCB9KTtcbiAgfSk7XG59XG5cbi8vIEFwcCBjc3Ncbi8vIHJlcXVpcmUoJ3N0eWxlIWNzcyFzYXNzIWFwcGxpY2F0aW9uU3R5bGVzJylcblxuUmVhY3RET00ucmVuZGVyKFxuICA8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cbiAgICB7cm91dGVyfVxuICA8L1Byb3ZpZGVyPixcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpXG4pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2FwcC5qc3giXSwic291cmNlUm9vdCI6IiJ9