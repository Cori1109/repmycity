webpackJsonp([1,2],[,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.closeCart=t.openCart=t.updateCartItem=t.updateCartItemsCount=t.updateCartSubtotal=t.addToCart=t.startAddorUpdateCartItem=void 0;var i=n(24),o=r(i),a=(t.startAddorUpdateCartItem=function(e,t){return function(n,r){function i(e){return o.lineItems.filter(function(t){return t.variant_id===e})[0]}var o=r().cart,c=void 0;c=e.variant_id?e.variant_id:e.id;var f=i(c);n(f?u(f,parseInt(t)):a(e,t)),n(s()),n(l(t))}},t.addToCart=function(e,t){return function(n,r){o.default.cart.createLineItemsFromVariants({variant:e,quantity:t}).then(function(e){var t=e.lineItems;n({type:"UPDATE_CART_ITEMS",updatedCartItems:t}),n(c())}).catch(function(e){console.log("Failed to addToCart",e)})}}),s=t.updateCartSubtotal=function(){return function(e,t){var n=o.default.cart.subtotal;e({type:"UPDATE_CART_SUBTOTAL",newSubtotal:n})}},l=t.updateCartItemsCount=function(e){return function(t,n){var r=n().cart,i=parseInt(r.lineItemsCount)+parseInt(e);console.log("new quantity: ",e),console.log("old quantity: ",r.lineItemsCount),console.log("updatedCartItemsCount: ",i),t({type:"UPDATE_CART_ITEMS_COUNT",updatedCartItemsCount:i}),t(parseInt(i)<1?f():c())}},u=t.updateCartItem=function(e,t){return function(n,r){var i=r().cart,a=e.quantity+t,s=[];i.lineItems.forEach(function(t){if(e.id===t.id){if(a>0){var n=[];n=t,n.quantity=a,s.push(n)}}else s.push(t)}),o.default.cart.updateLineItem(e.id,a).then(function(){n({type:"UPDATE_CART_ITEMS",updatedCartItems:s})})}},c=t.openCart=function(){return{type:"OPEN_CART"}},f=t.closeCart=function(){return{type:"CLOSE_CART"}}},,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(n(0),n(335)),a=(n(49).configure(),function(){function e(){r(this,e),this.client=o.buildClient({apiKey:"e0ab8cf9b5a30cee2616bf151a56c763",domain:"rmc-preview.myshopify.com",appId:"6"}),this.cart={}}return i(e,[{key:"createCart",value:function(){var e=this;return new Promise(function(t,n){e.client.createCart().then(function(n){localStorage.setItem("lastCartId",n.id),console.log("created new cart",n),e.cart=n;var r={isOpen:!1,lineItemsCount:0,lineItems:[],subtotal:0};t(r)})})}},{key:"restoreCart",value:function(){var e=this;return new Promise(function(t,n){e.client.fetchCart(localStorage.getItem("lastCartId")).then(function(n){e.cart=n;var r={isOpen:!1,lineItemsCount:n.lineItemCount,lineItems:n.lineItems,subtotal:n.subtotal};t(r)})})}}]),e}());t.default=new a},,,,,,,,,,,,,,function(e,t,n){var r,i;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===i)for(var a in r)o.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(r=[],i=function(){return n}.apply(t,r),!(void 0!==i&&(e.exports=i)))}()},,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addCollections=t.startAddCollections=t.setActiveCollection=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(24),a=r(o),s=(t.setActiveCollection=function(e){return function(t){return a.default.client.fetchCollection(e).then(function(e){var n=e||{},r=i({},n);t({type:"SET_ACTIVE_COLLECTION",parsedCollection:r})})}},t.startAddCollections=function(){return function(e){return a.default.client.fetchAllCollections().then(function(t){var n=t||{},r=[];Object.keys(n).forEach(function(e){r.push(i({key:e},n[e]))}),e(s(r))})}},t.addCollections=function(e){return{type:"ADD_COLLECTIONS",collections:e}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateActiveProductOptions=t.clearActiveProduct=t.setActiveProduct=t.preloadProductImages=t.addProducts=t.startAddProducts=void 0;var i=n(24),o=r(i),a=(t.startAddProducts=function(){return function(e){return o.default.client.fetchAllProducts().then(function(t){var n=t||{},r=n.map(function(e,t){var n=[];return n=e,n.key=t,n});e(a(r)),e(s())})}},t.addProducts=function(e){return{type:"ADD_PRODUCTS",products:e}}),s=t.preloadProductImages=function(){return function(e,t){var n=t().products.all,r=[];n.map(function(e,t){return r[t]=new Image,r[t].src=e.selectedVariant.imageVariants[4].src,r[t]})}};t.setActiveProduct=function(e){return{type:"SET_ACTIVE_PRODUCT",options:e}},t.clearActiveProduct=function(){return{type:"CLEAR_ACTIVE_PRODUCT"}},t.updateActiveProductOptions=function(e){return{type:"UPDATE_ACTIVE_PRODUCT_OPTIONS",options:e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=void 0;var o=n(148),a=i(o),s=n(330),l=r(s),u=n(168);t.configure=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.combineReducers({products:u.productsReducer,collections:u.collectionsReducer,cart:u.cartReducer,nav:u.navReducer}),n=a.createStore(t,e,a.compose(a.applyMiddleware(l.default),window.devToolsExtension?window.devToolsExtension():function(e){return e}));return n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return a.default.createElement("div",{className:"loader"},a.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-3x fa-fw"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(0),a=r(o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"asMoney",value:function(e,t,n,r,i){t=t||"$",n=n||",",r=r||".",i=i||".";var o=new RegExp("(\\d)(?=(\\d{3})+\\.)","g");return t+parseFloat(e,10).toFixed(2).replace(i,r).replace(o,"$1"+n).toString()}}]),e}();t.default=new o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),s=n(17),l=r(s),u=n(140),c=n(3),f=r(c),d={initialize:function(e){var t,n=l.default.findDOMNode(this.list),r=a.default.Children.count(e.children),i=this.getWidth(n),o=this.getWidth(l.default.findDOMNode(this.track));if(e.vertical)t=this.getWidth(l.default.findDOMNode(this));else{var s=e.centerMode&&2*parseInt(e.centerPadding);t=(this.getWidth(l.default.findDOMNode(this))-s)/e.slidesToShow}var c=this.getHeight(n.querySelector('[data-index="0"]')),d=c*e.slidesToShow,p=e.rtl?r-1-e.initialSlide:e.initialSlide;this.setState({slideCount:r,slideWidth:t,listWidth:i,trackWidth:o,currentSlide:p,slideHeight:c,listHeight:d},function(){var t=(0,u.getTrackLeft)((0,f.default)({slideIndex:this.state.currentSlide,trackRef:this.track},e,this.state)),n=(0,u.getTrackCSS)((0,f.default)({left:t},e,this.state));this.setState({trackStyle:n}),this.autoPlay()})},update:function(e){var t,n=l.default.findDOMNode(this.list),r=a.default.Children.count(e.children),i=this.getWidth(n),o=this.getWidth(l.default.findDOMNode(this.track));if(e.vertical)t=this.getWidth(l.default.findDOMNode(this));else{var s=e.centerMode&&2*parseInt(e.centerPadding);t=(this.getWidth(l.default.findDOMNode(this))-s)/e.slidesToShow}var c=this.getHeight(n.querySelector('[data-index="0"]')),d=c*e.slidesToShow;e.autoplay?this.pause():this.autoPlay(),this.setState({slideCount:r,slideWidth:t,listWidth:i,trackWidth:o,slideHeight:c,listHeight:d},function(){var t=(0,u.getTrackLeft)((0,f.default)({slideIndex:this.state.currentSlide,trackRef:this.track},e,this.state)),n=(0,u.getTrackCSS)((0,f.default)({left:t},e,this.state));this.setState({trackStyle:n})})},getWidth:function(e){return e.getBoundingClientRect().width||e.offsetWidth||0},getHeight:function(e){return e.getBoundingClientRect().height||e.offsetHeight||0},adaptHeight:function(){if(this.props.adaptiveHeight){var e='[data-index="'+this.state.currentSlide+'"]';if(this.list){var t=l.default.findDOMNode(this.list);t.style.height=t.querySelector(e).offsetHeight+"px"}}},canGoNext:function(e){var t=!0;return e.infinite||(e.centerMode?e.currentSlide>=e.slideCount-1&&(t=!1):(e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1)),t},slideHandler:function(e){var t,n,r,i,o,a=this;if(!this.props.waitForAnimate||!this.state.animating){if(this.props.fade){if(n=this.state.currentSlide,this.props.infinite===!1&&(e<0||e>=this.state.slideCount))return;return t=e<0?e+this.state.slideCount:e>=this.state.slideCount?e-this.state.slideCount:e,this.props.lazyLoad&&this.state.lazyLoadedList.indexOf(t)<0&&this.setState({lazyLoadedList:this.state.lazyLoadedList.concat(t)}),o=function(){a.setState({animating:!1}),a.props.afterChange&&a.props.afterChange(t),delete a.animationEndCallback},this.setState({animating:!0,currentSlide:t},function(){this.animationEndCallback=setTimeout(o,this.props.speed)}),this.props.beforeChange&&this.props.beforeChange(this.state.currentSlide,t),void this.autoPlay()}if(t=e,n=t<0?this.props.infinite===!1?0:this.state.slideCount%this.props.slidesToScroll!==0?this.state.slideCount-this.state.slideCount%this.props.slidesToScroll:this.state.slideCount+t:t>=this.state.slideCount?this.props.infinite===!1?this.state.slideCount-this.props.slidesToShow:this.state.slideCount%this.props.slidesToScroll!==0?0:t-this.state.slideCount:t,r=(0,u.getTrackLeft)((0,f.default)({slideIndex:t,trackRef:this.track},this.props,this.state)),i=(0,u.getTrackLeft)((0,f.default)({slideIndex:n,trackRef:this.track},this.props,this.state)),this.props.infinite===!1&&(r=i),this.props.beforeChange&&this.props.beforeChange(this.state.currentSlide,n),this.props.lazyLoad){for(var s=!0,l=[],c=t;c<t+this.props.slidesToShow;c++)s=s&&this.state.lazyLoadedList.indexOf(c)>=0,s||l.push(c);s||this.setState({lazyLoadedList:this.state.lazyLoadedList.concat(l)})}if(this.props.useCSS===!1)this.setState({currentSlide:n,trackStyle:(0,u.getTrackCSS)((0,f.default)({left:i},this.props,this.state))},function(){this.props.afterChange&&this.props.afterChange(n)});else{var d={animating:!1,currentSlide:n,trackStyle:(0,u.getTrackCSS)((0,f.default)({left:i},this.props,this.state)),swipeLeft:null};o=function(){a.setState(d),a.props.afterChange&&a.props.afterChange(n),delete a.animationEndCallback},this.setState({animating:!0,currentSlide:n,trackStyle:(0,u.getTrackAnimateCSS)((0,f.default)({left:r},this.props,this.state))},function(){this.animationEndCallback=setTimeout(o,this.props.speed)})}this.autoPlay()}},swipeDirection:function(e){var t,n,r,i;return t=e.startX-e.curX,n=e.startY-e.curY,r=Math.atan2(n,t),i=Math.round(180*r/Math.PI),i<0&&(i=360-Math.abs(i)),i<=45&&i>=0||i<=360&&i>=315?this.props.rtl===!1?"left":"right":i>=135&&i<=225?this.props.rtl===!1?"right":"left":this.props.verticalSwiping===!0?i>=35&&i<=135?"down":"up":"vertical"},play:function(){var e;if(!this.state.mounted)return!1;if(this.props.rtl)e=this.state.currentSlide-this.props.slidesToScroll;else{if(!this.canGoNext(i({},this.props,this.state)))return!1;e=this.state.currentSlide+this.props.slidesToScroll}this.slideHandler(e)},autoPlay:function(){this.state.autoPlayTimer&&clearTimeout(this.state.autoPlayTimer),this.props.autoplay&&this.setState({autoPlayTimer:setTimeout(this.play,this.props.autoplaySpeed)})},pause:function(){this.state.autoPlayTimer&&(clearTimeout(this.state.autoPlayTimer),this.setState({autoPlayTimer:null}))}};t.default=d},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(8),f=c.connect,d=n(47),p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this.props.dispatch;e(d.setActiveCollection(this.props.params.collectionId))}},{key:"render",value:function(){var e=void 0;if(e=this.props.collection){var t=(this.props.dispatch,e),n=(t.collection_id,t.title);return u.default.createElement("div",{className:"collection-index"},u.default.createElement("h1",{className:"text-center"},n))}return u.default.createElement("div",null,"Loading collection...")}}]),t}(u.default.Component);t.default=f(function(e){return{collection:e.collections.active}})(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=n(51),d=r(f),p=n(283),h=r(p),m=n(24),v=r(m),y=n(50),g=r(y),b=n(8),w=b.connect,E=n(48),_=n(15),S=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={modalIsOpen:!1},e.openModal=e.openModal.bind(e),e.closeModal=e.closeModal.bind(e);return e}return a(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.dispatch=this.props.dispatch,v.default.client.fetchProduct(this.props.params.productId).then(function(t){var n=t||{};e.product=n,e.dispatch(E.setActiveProduct(n.options))})}},{key:"componentWillUnmount",value:function(){this.dispatch(E.clearActiveProduct())}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"handleOptionChange",value:function(e,t){this.product.options.filter(function(t){return t.name===e})[0].selected=t,this.dispatch(E.updateActiveProductOptions(this.product.options))}},{key:"render",value:function(){var e=this,t=void 0;if(t=this.product){var n=this.props.dispatch,r=t.attrs,i=(r.product_id,r.title),o=(r.images,r.options,t),a=o.description,s=o.selectedVariant,l=o.selectedVariantImage,f=function(){return u.default.createElement("div",{className:"product-options"},t.options.map(function(t,n){if("Size"!=t.name&&"Title"!=t.name)return u.default.createElement("select",{key:n,name:t.name,value:t.selected,onChange:function(n){e.handleOptionChange(t.name,n.target.value)}},t.values.map(function(e,t){return u.default.createElement("option",{key:t,value:e},e)}))}))},p=function(){return t.options.map(function(t,n){if("Size"==t.name)return u.default.createElement("ul",{key:n,className:"product-sizes"},t.values.map(function(n,r){return u.default.createElement("li",{key:r,className:"product-size "+(t.selected===n?"selected":""),onClick:function(){e.handleOptionChange(t.name,n)}},n)}))})};return console.log("activeProduct: ",t),u.default.createElement("div",{className:"container"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"small-12 medium-8 column"},u.default.createElement("button",{onClick:c.browserHistory.goBack,className:"button hollow"},"â€¹ Back to products"),u.default.createElement("p",{className:"text-center"},u.default.createElement("img",{src:l.src,alt:""}))),u.default.createElement("div",{className:"small-12 medium-4 column"},u.default.createElement("h1",{className:"product-title"},i),u.default.createElement("div",{className:"product-info"},u.default.createElement("h5",{className:"product-info__headline"},"Artist"),u.default.createElement("p",null,"JWISH88"),u.default.createElement("h5",{className:"product-info__headline"},"Description"),u.default.createElement("div",{dangerouslySetInnerHTML:{__html:a}}),f(),p(),u.default.createElement("div",{className:"product-price"},d.default.asMoney(s.price)),u.default.createElement("div",{className:"product-charity"},u.default.createElement("input",{type:"text",placeholder:"Choose Charity"}),u.default.createElement("button",{type:"submit",className:"product-charity__button"},u.default.createElement("i",{className:"fa fa-caret-right"})),u.default.createElement("div",{className:"product-charity__more-info",onClick:this.openModal},u.default.createElement("i",{className:"fa fa-info-circle"})," ",u.default.createElement("a",{href:"#"},"more info")),u.default.createElement(h.default,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal,contentLabel:"more info",closeTimeoutMS:200,className:"ReactModal__Content"},u.default.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque egestas, nibh sed tristique ornare, nunc dui sollicitudin elit, id consectetur odio lectus eu nulla. Proin dapibus convallis urna sit amet dictum. Ut porttitor ligula at purus auctor molestie. Etiam velit nibh, porttitor at ipsum mattis, consectetur egestas arcu. Donec pellentesque augue sit amet elementum facilisis. Aenean semper malesuada ligula faucibus sollicitudin. Curabitur ut lorem ac erat porta lacinia pulvinar et risus."),u.default.createElement("p",null,"Sed at nulla dolor. Ut quis quam finibus, efficitur mi sed, sollicitudin urna. Nunc vel tortor commodo, mollis est eu, blandit massa. Vivamus sed mi vitae sem commodo consectetur eu in sem. Donec ut facilisis odio. Nullam id elementum eros, non tempus tortor. Nullam in mattis felis. Praesent bibendum blandit ante, et elementum metus consectetur vitae."),u.default.createElement("button",{className:"close-modal-icon",onClick:this.closeModal},u.default.createElement("i",{className:"fa fa-times"})))),u.default.createElement("button",{onClick:function(){n(_.startAddorUpdateCartItem(t.selectedVariant,1))},className:"button large add-to-cart"},"Add To Cart"),u.default.createElement("img",{src:"/images/credit-cards.png",alt:"Accepted credit cards"})))))}return u.default.createElement(g.default,null)}}]),t}(u.default.Component);t.default=w(function(e){return{activeProduct:e.products.active}})(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.id,r=e.image;return u.default.createElement("div",{className:"product-item"},u.default.createElement("div",{className:"product-item-inner"},u.default.createElement(c.Link,{to:"/product/"+n},u.default.createElement("div",{className:"product-item-image",style:{backgroundImage:"url("+r+")"}})),u.default.createElement("hr",null),u.default.createElement("h6",{className:"product-item-title"},u.default.createElement(c.Link,{to:"/product/"+n},t)),u.default.createElement("div",{className:"author"},u.default.createElement("div",{className:"author__photo",style:{backgroundImage:"url("+r+")"}}),u.default.createElement("div",{className:"author__info"},u.default.createElement(c.Link,{to:"/author/"},u.default.createElement("div",{className:"author__name"},"James88"),u.default.createElement("div",{className:"author__location"},"Canton Ohio"))))))}}]),t}(u.default.Component);e.exports=f},,,,,,,,function(e,t,n){var r=n(337),i=function(e){var t=/[height|width]$/;return t.test(e)},o=function(e){var t="",n=Object.keys(e);return n.forEach(function(o,a){var s=e[o];o=r(o),i(o)&&"number"==typeof s&&(s+="px"),t+=s===!0?o:s===!1?"not "+o:"("+o+": "+s+")",a<n.length-1&&(t+=" and ")}),t},a=function(e){var t="";return"string"==typeof e?e:e instanceof Array?(e.forEach(function(n,r){t+=o(n),r<e.length-1&&(t+=", ")}),t):o(e)};e.exports=a},,function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function i(e,t){return function(n){return e(t(n))}}function o(e,t){var n=R(e)||m(e)?r(e.length,String):[],i=n.length,o=!!i;for(var a in e)!t&&!A.call(e,a)||o&&("length"==a||f(a,i))||n.push(a);return n}function a(e,t,n){var r=e[t];A.call(e,t)&&h(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function s(e){if(!p(e))return M(e);var t=[];for(var n in Object(e))A.call(e,n)&&"constructor"!=n&&t.push(n);return t}function l(e,t){return t=j(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=j(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=a,n(e,this,s)}}function u(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;a(n,s,void 0===l?e[s]:l)}return n}function c(e){return l(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&d(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function f(e,t){return t=null==t?S:t,!!t&&("number"==typeof e||k.test(e))&&e>-1&&e%1==0&&e<t}function d(e,t,n){if(!w(n))return!1;var r=typeof t;return!!("number"==r?v(n)&&f(t,n.length):"string"==r&&t in n)&&h(n[t],e)}function p(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||P;return e===n}function h(e,t){return e===t||e!==e&&t!==t}function m(e){return y(e)&&A.call(e,"callee")&&(!x.call(e,"callee")||N.call(e)==C)}function v(e){return null!=e&&b(e.length)&&!g(e)}function y(e){return E(e)&&v(e)}function g(e){var t=w(e)?N.call(e):"";return t==O||t==T}function b(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=S}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function E(e){return!!e&&"object"==typeof e}function _(e){return v(e)?o(e):s(e)}var S=9007199254740991,C="[object Arguments]",O="[object Function]",T="[object GeneratorFunction]",k=/^(?:0|[1-9]\d*)$/,P=Object.prototype,A=P.hasOwnProperty,N=P.toString,x=P.propertyIsEnumerable,M=i(Object.keys,Object),j=Math.max,I=!x.call({valueOf:1},"valueOf"),R=Array.isArray,L=c(function(e,t){if(I||p(t)||v(t))return void u(t,_(t),e);for(var n in t)A.call(t,n)&&a(e,n,t[n])});e.exports=L},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function n(e){console.warn("[react-ga]",e)}e.exports=n},function(e,t){function n(e){return e.replace(/^\s+|\s+$/g,"")}e.exports=n},function(e,t){/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function n(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&i(e)}function r(e){return e.offsetWidth<=0&&e.offsetHeight<=0||"none"===e.style.display}function i(e){for(;e&&e!==document.body;){if(r(e))return!1;e=e.parentNode}return!0}function o(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var r=isNaN(t);return(r||t>=0)&&n(e,!r)}function a(e){return[].slice.call(e.querySelectorAll("*"),0).filter(function(e){return o(e)})}e.exports=a},,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a={className:"",accessibility:!0,adaptiveHeight:!1,arrows:!0,autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e){return o.default.createElement("button",null,e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:!1,pauseOnHover:!0,responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,afterChange:null,beforeChange:null,edgeEvent:null,init:null,swipeEvent:null,nextArrow:null,prevArrow:null};e.exports=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.getTrackLeft=t.getTrackAnimateCSS=t.getTrackCSS=void 0;var i=n(17),o=r(i),a=n(3),s=r(a),l=function(e,t){return t.reduce(function(t,n){return t&&e.hasOwnProperty(n)},!0)?null:console.error("Keys Missing",e)},u=t.getTrackCSS=function(e){l(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var t,n,r=e.slideCount+2*e.slidesToShow;e.vertical?n=r*e.slideHeight:t=e.variableWidth?(e.slideCount+2*e.slidesToShow)*e.slideWidth:e.centerMode?(e.slideCount+2*(e.slidesToShow+1))*e.slideWidth:(e.slideCount+2*e.slidesToShow)*e.slideWidth;var i={opacity:1,WebkitTransform:e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",transform:e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",transition:"",WebkitTransition:"",msTransform:e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)"};return t&&(0,s.default)(i,{width:t}),n&&(0,s.default)(i,{height:n}),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?i.marginTop=e.left+"px":i.marginLeft=e.left+"px"),i};t.getTrackAnimateCSS=function(e){l(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=u(e);return t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase,t},t.getTrackLeft=function(e){l(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t,n,r=0,i=0;if(e.fade)return 0;if(e.infinite)e.slideCount>=e.slidesToShow&&(r=e.slideWidth*e.slidesToShow*-1,i=e.slideHeight*e.slidesToShow*-1),e.slideCount%e.slidesToScroll!==0&&e.slideIndex+e.slidesToScroll>e.slideCount&&e.slideCount>e.slidesToShow&&(e.slideIndex>e.slideCount?(r=(e.slidesToShow-(e.slideIndex-e.slideCount))*e.slideWidth*-1,i=(e.slidesToShow-(e.slideIndex-e.slideCount))*e.slideHeight*-1):(r=e.slideCount%e.slidesToScroll*e.slideWidth*-1,i=e.slideCount%e.slidesToScroll*e.slideHeight*-1));else if(e.slideCount%e.slidesToScroll!==0&&e.slideIndex+e.slidesToScroll>e.slideCount&&e.slideCount>e.slidesToShow){var a=e.slidesToShow-e.slideCount%e.slidesToScroll;r=a*e.slideWidth}if(e.centerMode&&(e.infinite?r+=e.slideWidth*Math.floor(e.slidesToShow/2):r=e.slideWidth*Math.floor(e.slidesToShow/2)),t=e.vertical?e.slideIndex*e.slideHeight*-1+i:e.slideIndex*e.slideWidth*-1+r,e.variableWidth===!0){var s;e.slideCount<=e.slidesToShow||e.infinite===!1?n=o.default.findDOMNode(e.trackRef).childNodes[e.slideIndex]:(s=e.slideIndex+e.slidesToShow,n=o.default.findDOMNode(e.trackRef).childNodes[s]),t=n?n.offsetLeft*-1:0,e.centerMode===!0&&(n=e.infinite===!1?o.default.findDOMNode(e.trackRef).children[e.slideIndex]:o.default.findDOMNode(e.trackRef).children[e.slideIndex+e.slidesToShow+1],n&&(t=n.offsetLeft*-1+(e.listWidth-n.offsetWidth)/2))}return t}},,,,,,,,,,function(e,t){throw new Error("Module parse failed: /Users/julianjorgensen/sites/rmc/app/styles/app.scss Unexpected character '@' (1:0)\nYou may need an appropriate loader to handle this file type.\n| @import \"base/variables\";\n| \n| // foundation")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){I.default.set({page:e.pathname}),I.default.pageview(e.pathname)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=r(o),s=n(12),l=n(16),u=(r(l),n(159)),c=r(u),f=n(158),d=r(f),p=n(160),h=r(p),m=n(84),v=r(m),y=n(155),g=r(y),b=n(83),w=r(b),E=n(161),_=r(E),S=n(167),C=r(S),O=n(166),T=r(O),k=n(165),P=r(k),A=n(163),N=r(A),x=n(164),M=r(x),j=n(272),I=r(j),R=n(8);R.connect,n(49).configure();s.browserHistory.listen(function(e){i(e),window.scrollTo(0,0)}),t.default=a.default.createElement(s.Router,{history:s.browserHistory},a.default.createElement(s.Route,{path:"/",component:c.default},a.default.createElement(s.IndexRoute,{path:"/",component:d.default}),a.default.createElement(s.Route,{path:"products",component:h.default}),a.default.createElement(s.Route,{path:"product/:productId",component:v.default}),a.default.createElement(s.Route,{path:"collections",component:g.default}),a.default.createElement(s.Route,{path:"collection/:collectionId",component:w.default}),a.default.createElement(s.Route,{path:"my-city",component:h.default}),a.default.createElement(s.Route,{path:"upload",component:_.default}),a.default.createElement(s.Route,{path:"order-status",component:C.default}),a.default.createElement(s.Route,{path:"map",component:T.default}),a.default.createElement(s.Route,{path:"login",component:P.default}),a.default.createElement(s.Route,{path:"about",component:N.default}),a.default.createElement(s.Route,{path:"contact",component:M.default})))},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(51),f=r(c),d=n(8),p=d.connect,h=n(15),m=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.item,r=(e.incrementLineItem,e.quantity),i=function(e){t(h.startAddorUpdateCartItem(n,parseInt(e)))};return u.default.createElement("div",{className:"cart-item"},u.default.createElement("div",{className:"cart-item__img",style:{backgroundImage:"url("+n.imageVariants[2].src+")"}}),u.default.createElement("div",{className:"cart-item__content"},u.default.createElement("div",{className:"cart-item__content-row"},u.default.createElement("div",{className:"cart-item__variant-title"},n.variant_title),u.default.createElement("span",{className:"cart-item__title"},n.title)),u.default.createElement("div",{className:"cart-item__content-row"},u.default.createElement("div",{className:"cart-item__quantity-container"},u.default.createElement("button",{className:"btn--seamless quantity-decrement",type:"button",onClick:function(){i(-1)}},u.default.createElement("span",null,"-"),u.default.createElement("span",{className:"hide"},"Decrement")),u.default.createElement("input",{value:r,className:"cart-item__quantity",type:"number",min:"0",readOnly:!0}),u.default.createElement("button",{className:"btn--seamless quantity-increment",type:"button",onClick:function(){i(1)}},u.default.createElement("span",null,"+"),u.default.createElement("span",{className:"hide"},"Increment"))),u.default.createElement("span",{className:"cart-item__price"},f.default.asMoney(n.price*r)))))}}]),t}(u.default.Component);t.default=p(function(e){return{cart:e.cart}})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.id;return u.default.createElement("div",{className:"collection-item"},u.default.createElement("div",{className:"collection-item-inner"},u.default.createElement("h2",{className:"text-center"},u.default.createElement(c.Link,{to:"/collection/"+n},t))))}}]),t}(u.default.Component);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(83),f=(r(c),n(154)),d=r(f),p=n(8),h=p.connect,m=(n(47),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.collections;return e.length>0?u.default.createElement("div",{className:"row"},e.map(function(e){return u.default.createElement(d.default,{key:e.collection_id,id:e.collection_id,title:e.title})})):u.default.createElement("div",null,"Loading collections...")}}]),t}(u.default.Component));t.default=h(function(e){return{collections:e.collections.all}})(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("footer",{id:"site-footer"},u.default.createElement("nav",{className:"footer-nav"},u.default.createElement("li",null,u.default.createElement(c.Link,{to:"/about",activeClassName:"active"},"About")),u.default.createElement("li",null,u.default.createElement(c.Link,{to:"/products",activeClassName:"active"},"Shop All")),u.default.createElement("li",null,u.default.createElement(c.Link,{to:"/contact",activeClassName:"active"},"Contact")),u.default.createElement("li",null,u.default.createElement(c.Link,{to:"/upload",activeClassName:"active"},"Upload Design"))),u.default.createElement("p",null,"Lorem ipsum dolar sit amit. Sed dono avec."))}}]),t}(u.default.Component);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(12),f=n(8),d=f.connect,p=n(15),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.cartItems;return u.default.createElement("header",{id:"site-header"},u.default.createElement("ul",{className:"mini-nav"},u.default.createElement("li",{className:"mini-nav-item"},u.default.createElement(c.Link,{to:"/about",activeClassName:"active"},"About")),u.default.createElement("li",{className:"mini-nav-item"},u.default.createElement(c.Link,{to:"/order-status",activeClassName:"active"},"Order Status")),u.default.createElement("li",{className:"mini-nav-item"},u.default.createElement(c.Link,{to:"/map",activeClassName:"active"},"Map")),u.default.createElement("li",{className:"mini-nav-item"},u.default.createElement(c.Link,{to:"/login",activeClassName:"active"},"Login")),u.default.createElement("li",{className:"mini-nav-item mini-nav-item-cart",onClick:function(){t(p.openCart())}},u.default.createElement("i",{className:"fa fa-shopping-cart"})," ",n>0?"["+n+"]":"")),u.default.createElement("div",{id:"site-logo"},u.default.createElement(c.IndexLink,{to:"/",activeClassName:"active",activeStyle:{fontWeight:"bold"}},u.default.createElement("img",{src:"/images/logo.png"}))),u.default.createElement("nav",{id:"site-nav"},u.default.createElement("li",{className:"site-nav-item"},u.default.createElement(c.Link,{to:"/products",activeClassName:"active"},"Shop")),u.default.createElement("li",{className:"site-nav-item"},u.default.createElement(c.Link,{to:"/my-city",activeClassName:"active"},"My City")),u.default.createElement("li",{className:"site-nav-item"},u.default.createElement(c.Link,{to:"/categories",activeClassName:"active"},"Categories")),u.default.createElement("div",{id:"site-nav-upload"},u.default.createElement(c.Link,{to:"/upload"},u.default.createElement("img",{src:"/images/upload.png"})))))}}]),t}(u.default.Component);t.default=d(function(e){return{cartItems:e.cart.lineItemsCount}})(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(313),f=r(c),d=n(12),p=n(50),h=r(p),m=n(85),v=r(m),y=n(8),g=y.connect,b=n(15),w=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"handleAddToCart",value:function(e){var t=this.props.dispatch;t(b.startAddorUpdateCartItem(e.selectedVariant,1))}},{key:"render",value:function(){var e=this,t=this.props.products;t=t.slice(0,12);var n={className:"center products-carousel",infinite:!0,centerPadding:"60px",autoplay:!0,slidesToShow:4,speed:500,arrows:!1,lazyLoad:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]};return t.length>0?u.default.createElement("div",null,u.default.createElement(f.default,n,t.map(function(e,t){return u.default.createElement("div",{key:t,className:"products-carousel-item"},u.default.createElement(d.Link,{to:"/product/"+e.attrs.product_id},u.default.createElement("div",{className:"product-item-image",style:{backgroundImage:"url("+e.selectedVariant.imageVariants[5].src+")"}})))})),u.default.createElement("section",{className:"section-callout"},u.default.createElement("div",{className:"container"},u.default.createElement("h4",{className:"section-headline"},"Show your pride. Display your talents. ",u.default.createElement("span",{className:"font-white"},"Rep your city.")),u.default.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam semper nulla vel elit gravida, vel placerat turpis convallis. Praesent eu lorem suscipit, gravida leo sed, luctus erat. Nullam consectetur, tortor a facilisis lobortis, velit massa mattis risus, eget imperdiet velit arcu non mauris. Mauris bibendum bibendum ligula, nec maximus sapien porta non."),u.default.createElement("div",{className:"section-callout__cta-items"},u.default.createElement(d.Link,{to:"/products"},u.default.createElement("img",{src:"/images/button-shop.png",alt:"Shop now"})),u.default.createElement("div",{className:"search-box"},u.default.createElement("i",{className:"fa fa-search"}),u.default.createElement("input",{tyep:"text",placeholder:"Keyword Search"})),u.default.createElement(d.Link,{to:"/upload"},u.default.createElement("img",{src:"/images/button-upload.png",alt:"Shop now"}))))),u.default.createElement("div",{className:"container"},u.default.createElement("h3",{className:"products-grid-title"},"What's hot / What's new"),u.default.createElement("div",{className:"products-grid"},t.map(function(t){return u.default.createElement(v.default,{key:t.key,addToCart:function(){return e.handleAddToCart(t)},id:t.attrs.product_id,title:t.attrs.title,image:t.selectedVariant.imageVariants[5].src})})))):u.default.createElement(h.default,null)}}]),t}(u.default.Component);t.default=g(function(e){return{products:e.products.all}})(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(157),f=r(c),d=n(156),p=r(d),h=n(16),m=r(h),v=n(162),y=r(v),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={title:"",content:""},n}return a(t,e),s(t,[{key:"render",value:function(){var e={title:"Rep Your City",description:"Rep Your City description",meta:{charset:"utf-8"},auto:{ograph:!0}},t=this.props.location.pathname.substr(1).split("/");return u.default.createElement("div",{id:"main",className:"page-"+(t[0]?t[0]+" subpage":"home")},u.default.createElement(m.default,e),u.default.createElement(f.default,null),u.default.createElement("div",{id:"main-container"},u.default.createElement(y.default,null),this.props.children),u.default.createElement(p.default,null))}}]),t}(u.default.Component);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(50),f=r(c),d=n(85),p=r(d),h=n(8),m=h.connect,v=n(15),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"handleAddToCart",value:function(e){var t=this.props.dispatch;t(v.startAddorUpdateCartItem(e.selectedVariant,1))}},{key:"render",value:function(){var e=this,t=this.props.products;return t.length>0?u.default.createElement("div",{className:"container"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"small-12 medium-3 columns"},u.default.createElement("nav",{className:"products-nav"},u.default.createElement("h4",{className:"products-nav__headline"},"Categories"),u.default.createElement("ul",null,u.default.createElement("li",null,"City / state"),u.default.createElement("li",null,"Sports"),u.default.createElement("li",null,"Hobbies"),u.default.createElement("li",null,"Music"),u.default.createElement("li",null,"Animals"),u.default.createElement("li",null,"Show all")),u.default.createElement("h4",{className:"products-nav__headline"},"Style"),u.default.createElement("div",{className:"products-nav__search"},u.default.createElement("input",{type:"text",placeholder:"Select style"}),u.default.createElement("button",{type:"submit",className:"products-nav__search-button"},u.default.createElement("i",{className:"fa fa-search"}))),u.default.createElement("h4",{className:"products-nav__headline"},"Search"),u.default.createElement("div",{className:"products-nav__search"},u.default.createElement("input",{type:"text",placeholder:"Enter keywords"}),u.default.createElement("button",{type:"submit",className:"products-nav__search-button"},u.default.createElement("i",{className:"fa fa-search"}))))),u.default.createElement("div",{className:"small-12 medium-9 column"},u.default.createElement("div",{className:"products-grid"},t.map(function(t){return u.default.createElement(p.default,{key:t.key,addToCart:function(){return e.handleAddToCart(t)},id:t.attrs.product_id,title:t.attrs.title,image:t.selectedVariant.imageVariants[4].src})}))))):u.default.createElement(f.default,null)}}]),t}(u.default.Component);t.default=m(function(e){return{products:e.products.all}})(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=(n(12),n(8)),f=c.connect,d=(n(48),n(15),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){this.props.dispatch;return u.default.createElement("div",{className:"container text-center"},u.default.createElement("img",{src:"/images/upload-placeholder.png"}))}}]),t}(u.default.Component));t.default=f(function(e){return{activeProduct:e.products.active}})(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(24),f=r(c),d=n(153),p=r(d),h=n(51),m=r(h),v=n(8),y=v.connect,g=n(15),b=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.handleCheckout();return e}return a(t,e),s(t,[{key:"componentWillMount",value:function(){this.dispatch=this.props.dispatch}},{key:"handleCloseCart",value:function(){this.dispatch(g.closeCart())}},{key:"handleCheckout",value:function(){window.open(f.default.cart.checkoutUrl,"_self")}},{key:"render",value:function(){var e=this.props.cart,t=e.isOpen,n=e.lineItems,r=(e.lineItemCount,e.subtotal),i=function(){if(n.length>0)return n.map(function(e){return u.default.createElement(p.default,{key:e.id,item:e,quantity:e.quantity})})};return u.default.createElement("div",{className:"cart "+(t?"js-active":"")},u.default.createElement("div",{className:"cart-section cart-section--top"},u.default.createElement("h2",{className:"cart-title"},"Your cart: ",t),u.default.createElement("button",{className:"btn--close"},u.default.createElement("div",{onClick:this.handleCloseCart.bind(this)},"Ã—"),u.default.createElement("span",{className:"hide"},"Close"))),u.default.createElement("div",{className:"cart-form"},u.default.createElement("div",{className:"cart-item-container cart-section"},u.default.createElement("div",null,i())),u.default.createElement("div",{className:"cart-bottom"},u.default.createElement("div",{className:"cart-info clearfix cart-section"},u.default.createElement("div",{className:"type--caps cart-info__total cart-info__small"},"Total"),u.default.createElement("div",{className:"cart-info__pricing"},u.default.createElement("span",{className:"cart-info__small cart-info__total"},"USD"),u.default.createElement("span",{className:"pricing pricing--no-padding"},m.default.asMoney(r)))),u.default.createElement("div",{className:"cart-actions-container cart-section type--center"},u.default.createElement("div",{className:"cart-discount-notice cart-info__small"},"Shipping and discount codes are added at checkout."),u.default.createElement("input",{type:"submit",className:"btn btn--cart-checkout",id:"checkout",name:"checkout",value:"Checkout",onClick:this.handleCheckout})))))}}]),t}(u.default.Component);t.default=y(function(e){return{cart:e.cart}})(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"About us")))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),
r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"Contact")))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"Login"),u.default.createElement("form",null,u.default.createElement("input",{type:"text",placeholder:"Email"}),u.default.createElement("input",{type:"password",placeholder:"Password"}),u.default.createElement("input",{type:"submit",className:"button",value:"Login"}))))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"Map page")))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(16),f=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("section",{className:"section"},u.default.createElement("div",{className:"container"},u.default.createElement("h1",null,"Order Status page")))}}]),t}(u.default.Component));e.exports=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.productsReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:[],active:null},t=arguments[1];switch(t.type){case"ADD_PRODUCTS":return r({},e,{all:t.products});case"SET_ACTIVE_PRODUCT":return r({},e,{active:r({},e.active,{fetched:!0,options:t.options})});case"CLEAR_ACTIVE_PRODUCT":return r({},e,{active:null});case"UPDATE_ACTIVE_PRODUCT_OPTIONS":return r({},e,{active:r({},e.active,{options:t.options})});default:return e}},t.collectionsReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:[],active:null},t=arguments[1];switch(t.type){case"ADD_COLLECTIONS":return r({},e,{all:t.collections});case"SET_ACTIVE_COLLECTION":return r({},e,{active:t.parsedCollection});default:return e}},t.cartReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,lineItems:[]},t=arguments[1];switch(t.type){case"SET_INITIAL_CART_STATE":return r({},t.localCart);case"UPDATE_CART_ITEMS":return r({},e,{lineItems:t.updatedCartItems});case"UPDATE_CART_ITEMS_COUNT":return r({},e,{lineItemsCount:t.updatedCartItemsCount});case"UPDATE_CART_SUBTOTAL":return r({},e,{subtotal:t.newSubtotal});case"OPEN_CART":return r({},e,{isOpen:!0});case"CLOSE_CART":return r({},e,{isOpen:!1});default:return e}},t.navReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showClose:!1,showNav:!1},t=arguments[1];switch(t.type){case"TOGGLE_NAV_ICON":return r({},e,{showClose:!e.showClose,showNav:e.showNav});case"TOGGLE_NAV":return r({},e,{showClose:!e.showClose,showNav:!e.showNav});case"CLOSE_NAV":return r({},e,{showClose:!1,showNav:!1});default:return e}}},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,a,s,l=e.length;a=r(e),s=new f(3*l/4-a),i=a>0?l-4:l;var u=0;for(t=0,n=0;t<i;t+=4,n+=3)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[u++]=o>>16&255,s[u++]=o>>8&255,s[u++]=255&o;return 2===a?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[u++]=255&o):1===a&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[u++]=o>>8&255,s[u++]=255&o),s}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i="",o=[],a=16383,l=0,c=n-r;l<c;l+=a)o.push(s(e,l,l+a>c?c:l+a));return 1===r?(t=e[n-1],i+=u[t>>2],i+=u[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=u[t>>10],i+=u[t>>4&63],i+=u[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=l;for(var u=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=d.length;p<h;++p)u[p]=d[p],c[d.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t,n){"use strict";(function(e){function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?f(e,t,n):h(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return l(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function c(e,t){if(l(t),e=o(e,t<0?0:0|m(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function d(e,t){var n=t.length<0?0:0|m(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=d(e,t),e}function h(e,t){if(a.isBuffer(t)){var n=0|m(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?o(e,0):d(e,t);if("Buffer"===t.type&&Z(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),a.alloc(+e)}function y(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function w(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var u;if(i){var c=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===l)return c*a}else c!==-1&&(u-=u-c),c=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var f=!0,d=0;d<l;d++)if(o(e,u+d)!==o(t,d)){f=!1;break}if(f)return u}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function S(e,t,n,r){return G(Y(t,e.length-n),e,n,r)}function C(e,t,n,r){return G(V(t),e,n,r)}function O(e,t,n,r){return C(e,t,n,r)}function T(e,t,n,r){return G(X(t),e,n,r)}function k(e,t,n,r){return G(K(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var l,u,c,f;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(f=(31&o)<<6|63&l,f>127&&(a=f));break;case 3:l=e[i+1],u=e[i+2],128===(192&l)&&128===(192&u)&&(f=(15&o)<<12|(63&l)<<6|63&u,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(f=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return N(r)}function N(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function W(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,i){return i||W(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||W(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,n,r,52,8),n+8}function q(e){if(e=H(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function K(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function X(e){return Q.toByteArray(q(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function J(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Q=n(169),$=n(194),Z=n(171);t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return u(null,e,t,n)},a.allocUnsafe=function(e){return c(null,e)},a.allocUnsafeSlow=function(e){return c(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):g.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,l=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),f=0;f<l;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},a.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),$.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),$.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),$.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),$.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:Y(new a(e,r).toString()),l=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(46))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){var n=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=n},function(e,t){function n(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function r(e){if(!(this instanceof r))return new r(e);e||(e={}),e.nodeType&&(e={el:e}),this.opts=e,this.el=e.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}e.exports=function(e){return new r(e)},r.prototype.add=function(e){var t=this.el;if(t){if(""===t.className)return t.className=e;var r=t.className.split(" ");return n(r,e)>-1?r:(r.push(e),t.className=r.join(" "),r)}},r.prototype.remove=function(e){var t=this.el;if(t&&""!==t.className){var r=t.className.split(" "),i=n(r,e);return i>-1&&r.splice(i,1),t.className=r.join(" "),r}},r.prototype.has=function(e){var t=this.el;if(t){var r=t.className.split(" ");return n(r,e)>-1}},r.prototype.toggle=function(e){var t=this.el;t&&(this.has(e)?this.remove(e):this.add(e))}},function(e,t){throw new Error("Module build failed: Error: ENOENT: no such file or directory, open '/Users/julianjorgensen/sites/rmc/node_modules/enquire.js/dist/enquire.js'")},function(e,t,n){var r;/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};r=function(){return o}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}()},,,,,,,,,,,,,,,,,,,function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+f>=1?d/l:d*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*m}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(0),i=n(3),o="_blank",a=r.createClass({displayName:"OutboundLink",propTypes:{eventLabel:r.PropTypes.string.isRequired},statics:{trackLink:function(){console.warn("ga tracking not enabled")}},handleClick:function(e){e.preventDefault();var t=this.props,n={label:t.eventLabel};a.trackLink(n,function(){t.target===o?window.open(t.to,o):window.location.href=t.to}),t.onClick&&t.onClick(e)},render:function(){var e=i({},this.props,{href:this.props.to,onClick:this.handleClick});return delete e.eventLabel,r.createElement("a",e)}});e.exports=a},function(e,t,n){var r=n(274),i=n(276),o=n(124),a=n(123),s=n(273),l=!1,u=!0,c=function(e){return r(e,u)},f={initialize:function(e,t){return e?(t&&(t.debug&&t.debug===!0&&(l=!0),t.titleCase===!1&&(u=!1)),function(e,t,n,r,i,o,a){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),a=t.getElementsByTagName(n)[0],o.async=1,o.src=r,a.parentNode.insertBefore(o,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),void(t&&t.gaOptions?ga("create",e,t.gaOptions):ga("create",e,"auto"))):void a("gaTrackingID is required in initialize()")},ga:function(){return arguments.length>0?(ga.apply(this,arguments),void(l&&(s("called ga('arguments');"),s("with arguments: "+JSON.stringify([].slice.apply(arguments)))))):ga},set:function(e){if("function"==typeof ga){if(!e)return void a("`fieldsObject` is required in .set()");if("object"!=typeof e)return void a("Expected `fieldsObject` arg to be an Object");0===Object.keys(e).length&&a("empty `fieldsObject` given to .set()"),ga("set",e),l&&(s("called ga('set', fieldsObject);"),s("with fieldsObject: "+JSON.stringify(e)))}},send:function(e){"function"==typeof ga&&(ga("send",e),l&&(s("called ga('send', fieldObject);"),s("with fieldObject: "+JSON.stringify(e))))},pageview:function(e){return e?(e=o(e),""===e?void a("path cannot be an empty string in .pageview()"):void("function"==typeof ga&&(ga("send","pageview",e),l&&(s("called ga('send', 'pageview', path);"),s("with path: "+e))))):void a("path is required in .pageview()")},modalview:function(e){if(!e)return void a("modalName is required in .modalview(modalName)");if(e=o(e),e=i(e),""===e)return void a("modalName cannot be an empty string or a single / in .modalview()");if("function"==typeof ga){e=o(e);var t="/modal/"+e;ga("send","pageview",t),l&&(s("called ga('send', 'pageview', path);"),s("with path: "+t))}},timing:function(e){if("function"==typeof ga){if(!(e&&e.category&&e.variable&&e.value&&"number"==typeof e.value))return void a("args.category, args.variable AND args.value are required in timing() AND args.value has to be a number");var t={hitType:"timing",timingCategory:c(e.category),timingVar:c(e.variable),timingValue:e.value};e.label&&(t.timingLabel=c(e.label)),this.send(t)}},event:function(e){if("function"==typeof ga){if(!e||!e.category||!e.action)return void a("args.category AND args.action are required in event()");var t={hitType:"event",eventCategory:c(e.category),eventAction:c(e.action)};e.label&&(t.eventLabel=c(e.label)),e.value&&("number"!=typeof e.value?a("Expected `args.value` arg to be a Number."):t.eventValue=e.value),e.nonInteraction&&("boolean"!=typeof e.nonInteraction?a("`args.nonInteraction` must be a boolean."):t.nonInteraction=e.nonInteraction),e.transport&&("string"!=typeof e.transport?a("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(e.transport)===-1&&a("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),t.transport=e.transport)),this.send(t)}},exception:function(e){if("function"==typeof ga){var t={hitType:"exception"};e.description&&(t.exDescription=c(e.description)),"undefined"!=typeof e.fatal&&("boolean"!=typeof e.fatal?a("`args.fatal` must be a boolean."):t.exFatal=e.fatal),this.send(t)}},plugin:{require:function(e,t){if("function"==typeof ga)return e?(e=o(e),""===e?void a("`name` cannot be an empty string in .require()"):t?"object"!=typeof t?void a("Expected `options` arg to be an Object"):(0===Object.keys(t).length&&a("Empty `options` given to .require()"),ga("require",e,t),void(l&&s("called ga('require', '"+e+"', "+JSON.stringify(t)+");"))):(ga("require",e),void(l&&s("called ga('require', '"+e+"');")))):void a("`name` is required in .require()")},execute:function(){var e,t,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1];if(3===n.length?e=n[2]:(t=n[2],e=n[3]),"function"==typeof ga)if("string"!=typeof r)a("Expected `pluginName` arg to be a String.");else if("string"!=typeof i)a("Expected `action` arg to be a String.");else{var o=r+":"+i;e=e||null,t&&e?(ga(o,t,e),l&&(s("called ga('"+o+"');"),s('actionType: "'+t+'" with payload: '+JSON.stringify(e)))):e?(ga(o,e),l&&(s("called ga('"+o+"');"),s("with payload: "+JSON.stringify(e)))):(ga(o),l&&s("called ga('"+o+"');"))}}},outboundLink:function(e,t){if("function"!=typeof t)return void a("hitCallback function is required");if("function"==typeof ga){if(!e||!e.label)return void a("args.label is required in outboundLink()");var n={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:c(e.label)},r=!1,i=function(){r=!0,t()},o=setTimeout(i,250),s=function(){clearTimeout(o),r||t()};n.hitCallback=s,this.send(n)}else setTimeout(t,0)}},d=n(271);d.origTrackLink=d.trackLink,d.trackLink=f.outboundLink.bind(f),f.OutboundLink=d,e.exports=f},function(e,t){function n(e){console.info("[react-ga]",e)}e.exports=n},function(e,t,n){function r(e,t){return i(e)?(a("This arg looks like an email address, redacting."),s):t?o(e):e}var i=n(275),o=n(277),a=n(123),s="REDACTED (Potential Email Address)";e.exports=r},function(e,t){function n(e){return/[^@]+@[^@]+/.test(e)}e.exports=n},function(e,t){function n(e){return"/"===e.substring(0,1)&&(e=e.substring(1)),e}e.exports=n},function(e,t,n){function r(e){var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return e=i(e),e.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,n,r){return n>0&&n+e.length!==r.length&&e.search(t)>-1&&":"!==r.charAt(n-2)&&("-"!==r.charAt(n+e.length)||"-"===r.charAt(n-1))&&r.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})}var i=n(124);e.exports=r},function(e,t,n){function r(e){return e()}var i=n(0),o=n(17),a=n(175),s=i.createFactory(n(279)),l=n(280),u=n(173),c=n(17).unstable_renderSubtreeIntoContainer,f=n(95),d=a.canUseDOM?window.HTMLElement:{},p=a.canUseDOM?document.body:{appendChild:function(){}},h=i.createClass({displayName:"Modal",statics:{setAppElement:function(e){p=l.setElement(e)},injectCSS:function(){}},propTypes:{isOpen:i.PropTypes.bool.isRequired,style:i.PropTypes.shape({content:i.PropTypes.object,overlay:i.PropTypes.object}),portalClassName:i.PropTypes.string,appElement:i.PropTypes.instanceOf(d),onAfterOpen:i.PropTypes.func,onRequestClose:i.PropTypes.func,closeTimeoutMS:i.PropTypes.number,ariaHideApp:i.PropTypes.bool,shouldCloseOnOverlayClick:i.PropTypes.bool,parentSelector:i.PropTypes.func,role:i.PropTypes.string,contentLabel:i.PropTypes.string.isRequired},getDefaultProps:function(){return{isOpen:!1,portalClassName:"ReactModalPortal",ariaHideApp:!0,closeTimeoutMS:0,shouldCloseOnOverlayClick:!0,parentSelector:function(){return document.body}}},componentDidMount:function(){this.node=document.createElement("div"),this.node.className=this.props.portalClassName;var e=r(this.props.parentSelector);e.appendChild(this.node),this.renderPortal(this.props)},componentWillReceiveProps:function(e){var t=r(this.props.parentSelector),n=r(e.parentSelector);n!==t&&(t.removeChild(this.node),n.appendChild(this.node)),this.renderPortal(e)},componentWillUnmount:function(){this.props.ariaHideApp&&l.show(this.props.appElement),o.unmountComponentAtNode(this.node);var e=r(this.props.parentSelector);e.removeChild(this.node),u(document.body).remove("ReactModal__Body--open")},renderPortal:function(e){e.isOpen?u(document.body).add("ReactModal__Body--open"):u(document.body).remove("ReactModal__Body--open"),e.ariaHideApp&&l.toggle(e.isOpen,e.appElement),this.portal=c(this,s(f({},e,{defaultStyles:h.defaultStyles})),this.node)},render:function(){return i.DOM.noscript()}});h.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},e.exports=h},function(e,t,n){var r=n(0),i=r.DOM.div,o=n(281),a=n(282),s=n(95),l={overlay:{base:"ReactModal__Overlay",afterOpen:"ReactModal__Overlay--after-open",beforeClose:"ReactModal__Overlay--before-close"},content:{base:"ReactModal__Content",afterOpen:"ReactModal__Content--after-open",beforeClose:"ReactModal__Content--before-close"}};e.exports=r.createClass({displayName:"ModalPortal",shouldClose:null,getDefaultProps:function(){return{style:{overlay:{},content:{}}}},getInitialState:function(){return{afterOpen:!1,beforeClose:!1}},componentDidMount:function(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())},componentWillUnmount:function(){clearTimeout(this.closeTimer)},componentWillReceiveProps:function(e){!this.props.isOpen&&e.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!e.isOpen&&this.close()},componentDidUpdate:function(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))},setFocusAfterRender:function(e){this.focusAfterRender=e},open:function(){this.state.afterOpen&&this.state.beforeClose?(clearTimeout(this.closeTimer),this.setState({beforeClose:!1})):(o.setupScopedFocus(this.node),o.markForFocusLater(),this.setState({isOpen:!0},function(){this.setState({afterOpen:!0}),this.props.isOpen&&this.props.onAfterOpen&&this.props.onAfterOpen()}.bind(this)))},close:function(){this.props.closeTimeoutMS>0?this.closeWithTimeout():this.closeWithoutTimeout()},focusContent:function(){this.contentHasFocus()||this.refs.content.focus()},closeWithTimeout:function(){this.setState({beforeClose:!0},function(){this.closeTimer=setTimeout(this.closeWithoutTimeout,this.props.closeTimeoutMS)}.bind(this))},closeWithoutTimeout:function(){this.setState({beforeClose:!1,isOpen:!1,afterOpen:!1},this.afterClose)},afterClose:function(){o.returnFocus(),o.teardownScopedFocus()},handleKeyDown:function(e){9==e.keyCode&&a(this.refs.content,e),27==e.keyCode&&(e.preventDefault(),this.requestClose(e))},handleOverlayMouseDown:function(e){null===this.shouldClose&&(this.shouldClose=!0)},handleOverlayMouseUp:function(e){this.shouldClose&&this.props.shouldCloseOnOverlayClick&&(this.ownerHandlesClose()?this.requestClose(e):this.focusContent()),this.shouldClose=null},handleContentMouseDown:function(e){this.shouldClose=!1},handleContentMouseUp:function(e){this.shouldClose=!1},requestClose:function(e){this.ownerHandlesClose()&&this.props.onRequestClose(e)},ownerHandlesClose:function(){return this.props.onRequestClose},shouldBeClosed:function(){return!this.props.isOpen&&!this.state.beforeClose},contentHasFocus:function(){return document.activeElement===this.refs.content||this.refs.content.contains(document.activeElement)},buildClassName:function(e,t){var n=l[e].base;return this.state.afterOpen&&(n+=" "+l[e].afterOpen),this.state.beforeClose&&(n+=" "+l[e].beforeClose),t?n+" "+t:n},render:function(){var e=this.props.className?{}:this.props.defaultStyles.content,t=this.props.overlayClassName?{}:this.props.defaultStyles.overlay;return this.shouldBeClosed()?i():i({ref:"overlay",className:this.buildClassName("overlay",this.props.overlayClassName),style:s({},t,this.props.style.overlay||{}),onMouseDown:this.handleOverlayMouseDown,onMouseUp:this.handleOverlayMouseUp},i({ref:"content",style:s({},e,this.props.style.content||{}),className:this.buildClassName("content",this.props.className),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentMouseDown,onMouseUp:this.handleContentMouseUp,role:this.props.role,"aria-label":this.props.contentLabel},this.props.children))}})},function(e,t){function n(e){if("string"==typeof e){var t=document.querySelectorAll(e);e="length"in t?t[0]:t}return l=e||l}function r(e){a(e),(e||l).setAttribute("aria-hidden","true")}function i(e){a(e),(e||l).removeAttribute("aria-hidden")}function o(e,t){e?r(t):i(t)}function a(e){if(!e&&!l)throw new Error("react-modal: You must set an element with `Modal.setAppElement(el)` to make this accessible")}function s(){l=document.body}var l="undefined"!=typeof document?document.body:null;t.toggle=o,t.setElement=n,t.show=i,t.hide=r,t.resetForTesting=s},function(e,t,n){function r(e){l=!0}function i(e){if(l){if(l=!1,!a)return;setTimeout(function(){if(!a.contains(document.activeElement)){var e=o(a)[0]||a;e.focus()}},0)}}var o=n(125),a=null,s=null,l=!1;t.markForFocusLater=function(){s=document.activeElement},t.returnFocus=function(){try{s.focus()}catch(e){console.warn("You tried to return focus to "+s+" but it is not in the DOM anymore")}s=null},t.setupScopedFocus=function(e){a=e,window.addEventListener?(window.addEventListener("blur",r,!1),document.addEventListener("focus",i,!0)):(window.attachEvent("onBlur",r),document.attachEvent("onFocus",i))},t.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",r),document.removeEventListener("focus",i)):(window.detachEvent("onBlur",r),document.detachEvent("onFocus",i))}},function(e,t,n){var r=n(125);e.exports=function(e,t){var n=r(e);if(!n.length)return void t.preventDefault();var i=n[t.shiftKey?0:n.length-1],o=i===document.activeElement||e===document.activeElement;if(o){t.preventDefault();var a=n[t.shiftKey?n.length-1:0];a.focus()}}},function(e,t,n){e.exports=n(278)},,,,,,,,,function(e,t,n){var r=n(172),i=r&&n(174),o=n(93),a={media:function(e,t){e=o(e),"function"==typeof t&&(t={match:t}),r&&i.register(e,t),this._responsiveMediaHandlers||(this._responsiveMediaHandlers=[]),this._responsiveMediaHandlers.push({query:e,handler:t})},componentWillUnmount:function(){this._responsiveMediaHandlers&&this._responsiveMediaHandlers.forEach(function(e){r&&i.unregister(e.query,e.handler)})}};e.exports=a},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.NextArrow=t.PrevArrow=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),s=n(38),l=r(s),u=n(80),c=r(u);t.PrevArrow=a.default.createClass({displayName:"PrevArrow",clickHandler:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)},render:function(){var e={"slick-arrow":!0,"slick-prev":!0},t=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(e["slick-disabled"]=!0,t=null);var n,r={key:"0","data-role":"none",className:(0,l.default)(e),currentSlide:this.props.currentSlide,slideCount:this.props.slideCount,style:{display:"block"},onClick:t};return n=this.props.prevArrow?a.default.cloneElement(this.props.prevArrow,r):a.default.createElement("button",i({key:"0",type:"button"},r)," Previous")}}),t.NextArrow=a.default.createClass({displayName:"NextArrow",clickHandler:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)},render:function(){var e={"slick-arrow":!0,"slick-next":!0},t=this.clickHandler.bind(this,{message:"next"});c.default.canGoNext(this.props)||(e["slick-disabled"]=!0,t=null);var n,r={key:"1","data-role":"none",className:(0,l.default)(e),currentSlide:this.props.currentSlide,slideCount:this.props.slideCount,style:{display:"block"},onClick:t};return n=this.props.nextArrow?a.default.cloneElement(this.props.nextArrow,r):a.default.createElement("button",i({key:"1",type:"button"},r)," Next")}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Dots=void 0;var i=n(0),o=r(i),a=n(38),s=r(a),l=function(e){var t;return t=Math.ceil(e.slideCount/e.slidesToScroll)};t.Dots=o.default.createClass({displayName:"Dots",clickHandler:function(e,t){t.preventDefault(),this.props.clickHandler(e)},render:function(){var e=this,t=l({slideCount:this.props.slideCount,slidesToScroll:this.props.slidesToScroll}),n=Array.apply(null,Array(t+1).join("0").split("")).map(function(t,n){var r=n*e.props.slidesToScroll,i=n*e.props.slidesToScroll+(e.props.slidesToScroll-1),a=(0,s.default)({"slick-active":e.props.currentSlide>=r&&e.props.currentSlide<=i}),l={message:"dots",index:n,slidesToScroll:e.props.slidesToScroll,currentSlide:e.props.currentSlide},u=e.clickHandler.bind(e,l);return o.default.createElement("li",{key:n,className:a},o.default.cloneElement(e.props.customPaging(n),{onClick:u}))});return o.default.createElement("ul",{className:this.props.dotsClass,style:{display:"block"}},n)}})},function(e,t,n){"use strict";e.exports=n(317)},function(e,t,n){"use strict";var r={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,listWidth:null,listHeight:null,slideCount:null,slideWidth:null,slideHeight:null,swipeLeft:null,touchObject:{startX:0,startY:0,curX:0,curY:0},lazyLoadedList:[],initialized:!1,edgeDragged:!1,swiped:!1,trackStyle:{},trackWidth:0};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.InnerSlider=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),s=n(316),l=r(s),u=n(80),c=r(u),f=n(314),d=r(f),p=n(139),h=r(p),m=n(38),v=r(m),y=n(3),g=r(y),b=n(318),w=n(312),E=n(311);t.InnerSlider=a.default.createClass({displayName:"InnerSlider",mixins:[c.default,l.default],list:null,track:null,listRefHandler:function(e){this.list=e},trackRefHandler:function(e){this.track=e},getInitialState:function(){return i({},d.default,{currentSlide:this.props.initialSlide})},getDefaultProps:function(){return h.default},componentWillMount:function(){this.props.init&&this.props.init(),this.setState({mounted:!0});for(var e=[],t=0;t<a.default.Children.count(this.props.children);t++)t>=this.state.currentSlide&&t<this.state.currentSlide+this.props.slidesToShow&&e.push(t);this.props.lazyLoad&&0===this.state.lazyLoadedList.length&&this.setState({lazyLoadedList:e})},componentDidMount:function(){this.initialize(this.props),this.adaptHeight(),window&&(window.addEventListener?window.addEventListener("resize",this.onWindowResized):window.attachEvent("onresize",this.onWindowResized))},componentWillUnmount:function(){this.animationEndCallback&&clearTimeout(this.animationEndCallback),window.addEventListener?window.removeEventListener("resize",this.onWindowResized):window.detachEvent("onresize",this.onWindowResized),this.state.autoPlayTimer&&clearInterval(this.state.autoPlayTimer)},componentWillReceiveProps:function(e){this.props.slickGoTo!=e.slickGoTo?this.changeSlide({message:"index",index:e.slickGoTo,currentSlide:this.state.currentSlide}):this.state.currentSlide>=e.children.length?(this.update(e),this.changeSlide({message:"index",index:e.children.length-e.slidesToShow,currentSlide:this.state.currentSlide})):this.update(e)},componentDidUpdate:function(){this.adaptHeight()},onWindowResized:function(){this.update(this.props),this.setState({animating:!1}),clearTimeout(this.animationEndCallback),delete this.animationEndCallback},slickPrev:function(){this.changeSlide({message:"previous"})},slickNext:function(){this.changeSlide({message:"next"})},slickGoTo:function(e){"number"==typeof e&&this.changeSlide({message:"index",index:e,currentSlide:this.state.currentSlide})},render:function(){var e,t=(0,v.default)("slick-initialized","slick-slider",this.props.className,{"slick-vertical":this.props.vertical}),n={fade:this.props.fade,cssEase:this.props.cssEase,speed:this.props.speed,infinite:this.props.infinite,centerMode:this.props.centerMode,focusOnSelect:this.props.focusOnSelect?this.selectHandler:null,currentSlide:this.state.currentSlide,lazyLoad:this.props.lazyLoad,lazyLoadedList:this.state.lazyLoadedList,rtl:this.props.rtl,slideWidth:this.state.slideWidth,slidesToShow:this.props.slidesToShow,slidesToScroll:this.props.slidesToScroll,slideCount:this.state.slideCount,trackStyle:this.state.trackStyle,variableWidth:this.props.variableWidth};if(this.props.dots===!0&&this.state.slideCount>=this.props.slidesToShow){var r={dotsClass:this.props.dotsClass,slideCount:this.state.slideCount,slidesToShow:this.props.slidesToShow,currentSlide:this.state.currentSlide,slidesToScroll:this.props.slidesToScroll,clickHandler:this.changeSlide,children:this.props.children,customPaging:this.props.customPaging};e=a.default.createElement(w.Dots,r)}var o,s,l={infinite:this.props.infinite,centerMode:this.props.centerMode,currentSlide:this.state.currentSlide,slideCount:this.state.slideCount,slidesToShow:this.props.slidesToShow,prevArrow:this.props.prevArrow,nextArrow:this.props.nextArrow,clickHandler:this.changeSlide};this.props.arrows&&(o=a.default.createElement(E.PrevArrow,l),s=a.default.createElement(E.NextArrow,l));var u=null;this.props.vertical&&(u={height:this.state.listHeight});var c=null;this.props.vertical===!1?this.props.centerMode===!0&&(c={padding:"0px "+this.props.centerPadding}):this.props.centerMode===!0&&(c={padding:this.props.centerPadding+" 0px"});var f=(0,g.default)({},u,c);return a.default.createElement("div",{className:t,onMouseEnter:this.onInnerSliderEnter,onMouseLeave:this.onInnerSliderLeave,onMouseOver:this.onInnerSliderOver},o,a.default.createElement("div",{ref:this.listRefHandler,className:"slick-list",style:f,onMouseDown:this.swipeStart,onMouseMove:this.state.dragging?this.swipeMove:null,onMouseUp:this.swipeEnd,onMouseLeave:this.state.dragging?this.swipeEnd:null,onTouchStart:this.swipeStart,onTouchMove:this.state.dragging?this.swipeMove:null,onTouchEnd:this.swipeEnd,onTouchCancel:this.state.dragging?this.swipeEnd:null,onKeyDown:this.props.accessibility?this.keyHandler:null},a.default.createElement(b.Track,i({ref:this.trackRefHandler},n),this.props.children)),s,e)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(140),o=n(80),a=(r(o),n(3)),s=r(a),l=n(17),u=r(l),c={changeSlide:function(e){var t,n,r,i,o,a=this.props,s=a.slidesToScroll,l=a.slidesToShow,u=this.state,c=u.slideCount,f=u.currentSlide;if(i=c%s!==0,t=i?0:(c-f)%s,"previous"===e.message)r=0===t?s:l-t,o=f-r,this.props.lazyLoad&&(n=f-r,o=n===-1?c-1:n);else if("next"===e.message)r=0===t?s:t,o=f+r,this.props.lazyLoad&&(o=(f+s)%c+t);else if("dots"===e.message||"children"===e.message){if(o=e.index*e.slidesToScroll,o===e.currentSlide)return}else if("index"===e.message&&(o=parseInt(e.index),o===e.currentSlide))return;this.slideHandler(o)},keyHandler:function(e){e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&this.props.accessibility===!0?this.changeSlide({message:this.props.rtl===!0?"next":"previous"}):39===e.keyCode&&this.props.accessibility===!0&&this.changeSlide({message:this.props.rtl===!0?"previous":"next"}))},selectHandler:function(e){this.changeSlide(e)},swipeStart:function(e){var t,n;this.props.swipe===!1||"ontouchend"in document&&this.props.swipe===!1||this.props.draggable===!1&&e.type.indexOf("mouse")!==-1||(t=void 0!==e.touches?e.touches[0].pageX:e.clientX,n=void 0!==e.touches?e.touches[0].pageY:e.clientY,this.setState({dragging:!0,touchObject:{startX:t,startY:n,curX:t,curY:n}}))},swipeMove:function(e){if(!this.state.dragging)return void e.preventDefault();if(!this.state.animating){this.props.vertical&&this.props.swipeToSlide&&this.props.verticalSwiping&&e.preventDefault();var t,n,r,o=this.state.touchObject;n=(0,i.getTrackLeft)((0,s.default)({slideIndex:this.state.currentSlide,trackRef:this.track},this.props,this.state)),o.curX=e.touches?e.touches[0].pageX:e.clientX,o.curY=e.touches?e.touches[0].pageY:e.clientY,o.swipeLength=Math.round(Math.sqrt(Math.pow(o.curX-o.startX,2))),this.props.verticalSwiping&&(o.swipeLength=Math.round(Math.sqrt(Math.pow(o.curY-o.startY,2)))),r=(this.props.rtl===!1?1:-1)*(o.curX>o.startX?1:-1),this.props.verticalSwiping&&(r=o.curY>o.startY?1:-1);var a=this.state.currentSlide,l=Math.ceil(this.state.slideCount/this.props.slidesToScroll),u=this.swipeDirection(this.state.touchObject),c=o.swipeLength;this.props.infinite===!1&&(0===a&&"right"===u||a+1>=l&&"left"===u)&&(c=o.swipeLength*this.props.edgeFriction,this.state.edgeDragged===!1&&this.props.edgeEvent&&(this.props.edgeEvent(u),this.setState({edgeDragged:!0}))),this.state.swiped===!1&&this.props.swipeEvent&&(this.props.swipeEvent(u),this.setState({swiped:!0})),t=this.props.vertical?n+c*(this.state.listHeight/this.state.listWidth)*r:n+c*r,this.props.verticalSwiping&&(t=n+c*r),this.setState({touchObject:o,swipeLeft:t,trackStyle:(0,i.getTrackCSS)((0,s.default)({left:t},this.props,this.state))}),Math.abs(o.curX-o.startX)<.8*Math.abs(o.curY-o.startY)||o.swipeLength>4&&e.preventDefault()}},getNavigableIndexes:function(){var e=void 0,t=0,n=0,r=[];for(this.props.infinite?(t=this.props.slidesToShow*-1,n=this.props.slidesToShow*-1,e=2*this.state.slideCount):e=this.state.slideCount;t<e;)r.push(t),t=n+this.props.slidesToScroll,n+=this.props.slidesToScroll<=this.props.slidesToShow?this.props.slidesToScroll:this.props.slidesToShow;return r},checkNavigable:function(e){var t=this.getNavigableIndexes(),n=0;if(e>t[t.length-1])e=t[t.length-1];else for(var r in t){if(e<t[r]){e=n;break}n=t[r]}return e},getSlideCount:function(){var e=this,t=this.props.centerMode?this.state.slideWidth*Math.floor(this.props.slidesToShow/2):0;if(this.props.swipeToSlide){var n=void 0,r=u.default.findDOMNode(this.list),i=r.querySelectorAll(".slick-slide");Array.from(i).every(function(r){if(e.props.vertical){if(r.offsetTop+e.getHeight(r)/2>e.state.swipeLeft*-1)return n=r,!1}else if(r.offsetLeft-t+e.getWidth(r)/2>e.state.swipeLeft*-1)return n=r,!1;return!0});var o=Math.abs(n.dataset.index-this.state.currentSlide)||1;return o}return this.props.slidesToScroll},swipeEnd:function(e){if(!this.state.dragging)return void(this.props.swipe&&e.preventDefault());var t=this.state.touchObject,n=this.state.listWidth/this.props.touchThreshold,r=this.swipeDirection(t);if(this.props.verticalSwiping&&(n=this.state.listHeight/this.props.touchThreshold),this.setState({dragging:!1,edgeDragged:!1,swiped:!1,swipeLeft:null,touchObject:{}}),t.swipeLength)if(t.swipeLength>n){e.preventDefault();var o=void 0,a=void 0;switch(r){case"left":case"down":a=this.state.currentSlide+this.getSlideCount(),o=this.props.swipeToSlide?this.checkNavigable(a):a,this.state.currentDirection=0;break;case"right":case"up":a=this.state.currentSlide-this.getSlideCount(),o=this.props.swipeToSlide?this.checkNavigable(a):a,this.state.currentDirection=1;break;default:o=this.state.currentSlide}this.slideHandler(o)}else{var l=(0,i.getTrackLeft)((0,s.default)({slideIndex:this.state.currentSlide,trackRef:this.track},this.props,this.state));this.setState({trackStyle:(0,i.getTrackAnimateCSS)((0,s.default)({left:l},this.props,this.state))})}},onInnerSliderEnter:function(e){this.props.autoplay&&this.props.pauseOnHover&&this.pause()},onInnerSliderOver:function(e){this.props.autoplay&&this.props.pauseOnHover&&this.pause()},onInnerSliderLeave:function(e){this.props.autoplay&&this.props.pauseOnHover&&this.autoPlay()}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),s=n(315),l=n(3),u=r(l),c=n(93),f=r(c),d=n(292),p=r(d),h=n(139),m=r(h),v=a.default.createClass({displayName:"Slider",mixins:[p.default],innerSlider:null,innerSliderRefHandler:function(e){this.innerSlider=e},getInitialState:function(){return{breakpoint:null}},componentWillMount:function(){var e=this;if(this.props.responsive){var t=this.props.responsive.map(function(e){return e.breakpoint});t.sort(function(e,t){return e-t}),t.forEach(function(n,r){var i;i=0===r?(0,f.default)({minWidth:0,maxWidth:n}):(0,f.default)({minWidth:t[r-1],maxWidth:n}),e.media(i,function(){e.setState({breakpoint:n})})});var n=(0,f.default)({minWidth:t.slice(-1)[0]});this.media(n,function(){e.setState({breakpoint:null})})}},slickPrev:function(){this.innerSlider.slickPrev()},slickNext:function(){this.innerSlider.slickNext()},slickGoTo:function(e){this.innerSlider.slickGoTo(e)},render:function(){var e,t,n=this;this.state.breakpoint?(t=this.props.responsive.filter(function(e){return e.breakpoint===n.state.breakpoint}),e="unslick"===t[0].settings?"unslick":(0,u.default)({},this.props,t[0].settings)):e=(0,u.default)({},m.default,this.props);var r=this.props.children;return Array.isArray(r)||(r=[r]),r=r.filter(function(e){return!!e}),"unslick"===e?a.default.createElement("div",null,r):a.default.createElement(s.InnerSlider,i({ref:this.innerSliderRefHandler},e),r)}});e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Track=void 0;var i=n(0),o=r(i),a=n(3),s=r(a),l=n(38),u=r(l),c=function(e){var t,n,r,i,o;return o=e.rtl?e.slideCount-1-e.index:e.index,r=o<0||o>=e.slideCount,e.centerMode?(i=Math.floor(e.slidesToShow/2),n=(o-e.currentSlide)%e.slideCount===0,o>e.currentSlide-i-1&&o<=e.currentSlide+i&&(t=!0)):t=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow,(0,u.default)({"slick-slide":!0,"slick-active":t,"slick-center":n,"slick-cloned":r})},f=function(e){var t={};return void 0!==e.variableWidth&&e.variableWidth!==!1||(t.width=e.slideWidth),e.fade&&(t.position="relative",t.left=-e.index*e.slideWidth,t.opacity=e.currentSlide===e.index?1:0,t.transition="opacity "+e.speed+"ms "+e.cssEase,t.WebkitTransition="opacity "+e.speed+"ms "+e.cssEase),t},d=function(e,t){return null===e.key||void 0===e.key?t:e.key},p=function(e){var t,n=[],r=[],i=[],a=o.default.Children.count(e.children);return o.default.Children.forEach(e.children,function(l,p){var h=void 0,m={message:"children",index:p,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};h=!e.lazyLoad|(e.lazyLoad&&e.lazyLoadedList.indexOf(p)>=0)?l:o.default.createElement("div",null);var v,y=f((0,s.default)({},e,{index:p})),g=c((0,s.default)({index:p},e));v=h.props.className?(0,u.default)(g,h.props.className):g;var b=function(t){h.props&&h.props.onClick&&h.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(m)};if(n.push(o.default.cloneElement(h,{key:"original"+d(h,p),"data-index":p,className:v,tabIndex:"-1",style:(0,s.default)({
outline:"none"},h.props.style||{},y),onClick:b})),e.infinite&&e.fade===!1){var w=e.variableWidth?e.slidesToShow+1:e.slidesToShow;p>=a-w&&(t=-(a-p),r.push(o.default.cloneElement(h,{key:"precloned"+d(h,t),"data-index":t,className:v,style:(0,s.default)({},h.props.style||{},y),onClick:b}))),p<w&&(t=a+p,i.push(o.default.cloneElement(h,{key:"postcloned"+d(h,t),"data-index":t,className:v,style:(0,s.default)({},h.props.style||{},y),onClick:b})))}}),e.rtl?r.concat(n,i).reverse():r.concat(n,i)};t.Track=o.default.createClass({displayName:"Track",render:function(){var e=p.call(this,this.props);return o.default.createElement("div",{className:"slick-track",style:this.props.trackStyle},e)}})},,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}t.__esModule=!0;var i=r();i.withExtraArgument=r,t.default=i},,,,,function(e,t,n){"use strict";(function(t,r){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){function n(){var n=this.super;this.super=function(){return t.apply(this,arguments)};var r=e.apply(this,arguments);return this.super=n,r}return n.wrappedFunction=e,n}function a(e,t,n){var r=Object.getPrototypeOf(n);e.forEach(function(e){var i=Object.getOwnPropertyDescriptor(t,e),a=r.hasOwnProperty(e)&&Object.getOwnPropertyDescriptor(r,e);if("function"==typeof a.value&&"function"==typeof i.value){var s=o(i.value,a.value);Object.defineProperty(n,e,{value:s})}else Object.defineProperty(n,e,i)})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=o(e.constructor,t),r=Object.getOwnPropertyNames(e).filter(function(e){return!O(["constructor","static"],e)});S(n,t),n.prototype=Object.create(t.prototype),a(r,e,n.prototype),n.prototype.constructor=n;var i=e.static;if(i){var s=Object.getOwnPropertyNames(i);a(s,i,n)}return n}function l(e){var t=function(){var t=void 0;t=console[e]?Function.prototype.bind.call(console[e],console):Function.prototype.bind.call(console.log,console),t.apply(void 0,arguments)};return function(){var e=[].concat(Array.prototype.slice.call(arguments));e.unshift("[JS-BUY-SDK]: "),t.apply(void 0,i(e))}}function u(e,t){var n=void 0;if(t.headers&&Object.keys(t.headers).forEach(function(e){"authorization"===e.toLowerCase()&&(n=t.headers[e])}),n){var r=n.split(" ").slice(-1)[0];try{var i=atob(r),o=void 0;return o=e.indexOf("?")>-1?e+"&_x_http_authorization="+i:e+"?_x_http_authorization="+i}catch(e){}}return e}function c(e,t,n){return new Promise(function(r,i){function o(){i(new Error("There was an error with the XDR"))}var a=new XDomainRequest;a.onload=function(){try{var e=JSON.parse(a.responseText);r({json:e,originalResponse:a,isJSON:!0})}catch(e){r({text:a.responseText,originalResponse:a,isText:!0})}},a.onerror=o,a.ontimeout=o,a.open(e,u(t,n)),a.send(n.data)})}function f(){var e="undefined"==typeof window,t=!0;return e&&t}function d(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.status=e.status,t.response=e,t}function p(e){return e.json().then(function(t){return{json:t,originalResponse:e,isJSON:!0}}).catch(function(){var t=e.clone();return t.text().then(function(e){return{text:e,originalResponse:t,isText:!0}})})}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!f()){var r=new XMLHttpRequest;if(!("withCredentials"in r))return c.apply(void 0,arguments)}return n.method=e,n.mode="cors",fetch(t,n).then(d).then(p)}function m(){return++Y}function v(e){if(e&&e[B])return e[B];if(void 0===e)return"(undefined)";if(null===e)return"(null)";var t="undefined"==typeof e?"undefined":E(e),n=void 0;switch(t){case"number":n=V[e],n||(n=V[e]="nu"+e);break;case"string":n=K[e],n||(n=K[e]="st"+m());break;case"boolean":n=e?"(true)":"(false)";break;default:if(e===Object){n="(Object)";break}if(e===Array){n="(Array)";break}n=H+"."+m(),null===e[B]?e[B]=n:(F.value=n,Object.defineProperty(e,B,F))}return n}function y(e,t){X[e]||(X[e]=t)}function g(e){return X[e]}function b(e,t){return e===t||Object.keys(e).every(function(n){return e[n]instanceof Date?e[n].toString()===t[n].toString():"object"===E(e[n])?b(e[n],t[n]):e[n]===t[n]})}function w(e,t){var n=void 0;switch(e){case"all":n=function(){return this.fetchAll(t)};break;case"one":n=function(){return this.fetch.apply(this,[t].concat(Array.prototype.slice.call(arguments)))};break;case"query":n=function(){return this.fetchQuery.apply(this,[t].concat(Array.prototype.slice.call(arguments)))}}return n}var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=void 0;_="function"==typeof Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var t=Object(e),n=[].slice.call(arguments,1);return n.length>0&&n.forEach(function(e){if(void 0!==e&&null!==e){var n=void 0;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}),t};var S=_,C=void 0;C=Array.prototype.includes?function(e){var t=[].slice.call(arguments,1);return Array.prototype.includes.apply(e,t)}:function(e,t){var n=Object(e),r=parseInt(n.length,10)||0;if(0===r)return!1;var i=parseInt(arguments[2],10)||0,o=void 0;for(i>=0?o=i:(o=r+i,o<0&&(o=0));o<r;){var a=n[o];if(t===a||t!==t&&a!==a)return!0;o++}return!1};var O=C,T=s({constructor:function(){},static:{extend:function(e){return s(e,this)}}}),k=T.extend({constructor:function(){},debug:l("debug"),info:l("info"),warn:l("warn"),error:l("error")}),P=new k,A=T.extend({constructor:function(e){var t=this;Object.keys(this.deprecatedProperties).forEach(function(n){if(e.hasOwnProperty(n)){var r=t.deprecatedProperties[n],i=t[r];i(e[n],e)}}),this.requiredProperties.forEach(function(n){if(!e.hasOwnProperty(n))throw new Error("new Config() requires the option '"+n+"'");t[n]=e[n]}),this.optionalProperties.forEach(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})},deprecatedProperties:{myShopifyDomain:"transformMyShopifyDomain"},transformMyShopifyDomain:function(e,t){P.warn("Config - ","myShopifyDomain is deprecated, please use domain and provide the full shop domain."),t.domain=e+".myshopify.com"},requiredProperties:["apiKey","appId","domain"],optionalProperties:["ajaxHeaders"],apiKey:"",appId:"",domain:"",myShopifyDomain:"",ajaxHeaders:{}}),N="v0.6.2-c8f438f",x=T.extend({constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.attrs=e,S(this,t)},attrs:null,serializer:null,adapter:null,shopClient:null}),M=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments),this.selected=this.values[0]}},{name:{get:function(){return this.attrs.name},configurable:!0,enumerable:!0},values:{get:function(){return this.attrs.values},configurable:!0,enumerable:!0},selected:{get:function(){return this._selected},set:function(e){if(!O(this.values,e))throw new Error("Invalid option selection for "+this.name+".");return this._selected=e,e},configurable:!0,enumerable:!0}})),j=[{name:"pico",dimension:"16x16"},{name:"icon",dimension:"32x32"},{name:"thumb",dimension:"50x50"},{name:"small",dimension:"100x100"},{name:"compact",dimension:"160x160"},{name:"medium",dimension:"240x240"},{name:"large",dimension:"480x480"},{name:"grande",dimension:"600x600"},{name:"1024x1024",dimension:"1024x1024"},{name:"2048x2048",dimension:"2048x2048"}],I=T.extend(Object.defineProperties({constructor:function(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]})}},{variants:{get:function(){var e=this.src,t=e.lastIndexOf("."),n=e.slice(0,t),r=e.slice(t);return j.forEach(function(e){e.src=n+"_"+e.name+r}),j},configurable:!0,enumerable:!0}})),R=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments)},checkoutUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.config,n="https://"+t.domain+"/cart",r=this.id+":"+parseInt(e,10),i="access_token="+t.apiKey+"&_fd=0";return n+"/"+r+"?"+i}},{id:{get:function(){return this.attrs.variant.id},configurable:!0,enumerable:!0},productId:{get:function(){return this.attrs.product.id},configurable:!0,enumerable:!0},title:{get:function(){return this.attrs.variant.title},configurable:!0,enumerable:!0},productTitle:{get:function(){return this.attrs.product.title},configurable:!0,enumerable:!0},compareAtPrice:{get:function(){return this.attrs.variant.compare_at_price},configurable:!0,enumerable:!0},price:{get:function(){return this.attrs.variant.price},configurable:!0,enumerable:!0},formattedPrice:{get:function(){return this.attrs.variant.formatted_price},configurable:!0,enumerable:!0},grams:{get:function(){return this.attrs.variant.grams},configurable:!0,enumerable:!0},optionValues:{get:function(){return this.attrs.variant.option_values},configurable:!0,enumerable:!0},available:{get:function(){return this.attrs.variant.available},configurable:!0,enumerable:!0},image:{get:function(){var e=this.id,t=this.attrs.product.images,n=t[0],r=t.filter(function(t){return t.variant_ids.indexOf(e)!==-1})[0],i=r||n;return i?new I(i):null},configurable:!0,enumerable:!0},imageVariants:{get:function(){return this.image?this.image.variants:[]},configurable:!0,enumerable:!0}})),L=function(e){return e.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])},D="https://widgets.shopifyapps.com/assets/no-image.svg",U=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments)}},{id:{get:function(){return this.attrs.product_id},configurable:!0,enumerable:!0},title:{get:function(){return this.attrs.title},configurable:!0,enumerable:!0},description:{get:function(){return this.attrs.body_html},configurable:!0,enumerable:!0},images:{get:function(){return this.attrs.images.map(function(e){return new I(e)})},configurable:!0,enumerable:!0},memoized:{get:function(){return this._memoized=this._memoized||{},this._memoized},configurable:!0,enumerable:!0},options:{get:function(){if(this.memoized.options)return this.memoized.options;var e=this.attrs.options,t=this.variants;return this.memoized.options=e.map(function(e){var n=e.name,r=t.reduce(function(t,n){var r=n.optionValues.filter(function(t){return t.name===e.name})[0];return t.push(r.value),t},[]),i=L(r);return new M({name:n,values:i})}),this.memoized.options},configurable:!0,enumerable:!0},variants:{get:function(){var e=this;return this.attrs.variants.map(function(t){return new R({variant:t,product:e},{config:e.config})})},configurable:!0,enumerable:!0},selections:{get:function(){return this.options.map(function(e){return e.selected})},configurable:!0,enumerable:!0},selectedVariant:{get:function(){var e=this.selections.join(" / ");return this.variants.filter(function(t){return t.title===e})[0]||null},configurable:!0,enumerable:!0},selectedVariantImage:{get:function(){return this.selectedVariant?this.selectedVariant.image:null},configurable:!0,enumerable:!0}})),W=T.extend({constructor:function(e){this.config=e},rootKeyForType:function(e){return e.slice(0,-1)+"_listing"},models:{collections:x,products:U},modelForType:function(e){return this.models[e]},deserializeSingle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t[this.rootKeyForType(e)],i=this.modelFromAttrs(e,r,n);return i},deserializeMultiple:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n[this.rootKeyForType(e)+"s"];return i.map(function(n){var i=t.modelFromAttrs(e,n,r);return i})},modelFromAttrs:function(e,t,n){var r=this.modelForType(e);return n.config=this.config,new r(t,n)}}),z=T.extend(Object.defineProperties({ajax:h,constructor:function(e){this.config=e},pathForType:function(e){return"/"+e.slice(0,-1)+"_listings"},buildUrl:function(e,t,n){switch(e){case"multiple":return this.buildMultipleUrl(t,n);case"single":return this.buildSingleUrl(t,n);default:return""}},buildMultipleUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=""+this.baseUrl+this.pathForType(e),r=Object.keys(t);if(r.length>0){var i=r.map(function(e){var n=void 0;return n=Array.isArray(t[e])?t[e].join(","):t[e],e+"="+encodeURIComponent(n)}).join("&");return n+"?"+i}return n},buildSingleUrl:function(e,t){return""+this.baseUrl+this.pathForType(e)+"/"+t},fetchMultiple:function(){var e=this.buildUrl.apply(this,["multiple"].concat(Array.prototype.slice.call(arguments)));return this.ajax("GET",e,{headers:this.headers}).then(function(e){return e.json})},fetchSingle:function(){var e=this.buildUrl.apply(this,["single"].concat(Array.prototype.slice.call(arguments)));return this.ajax("GET",e,{headers:this.headers}).then(function(e){return e.json})}},{base64ApiKey:{get:function(){return btoa(this.config.apiKey)},configurable:!0,enumerable:!0},baseUrl:{get:function(){var e=this.config,t=e.domain,n=e.appId;return"https://"+t+"/api/apps/"+n},configurable:!0,enumerable:!0},headers:{get:function(){return S({},{Authorization:"Basic "+this.base64ApiKey,"Content-Type":"application/json","X-SDK-Variant":"javascript","X-SDK-Version":N},this.config.ajaxHeaders)},configurable:!0,enumerable:!0}})),B="shopify-buy-uuid",q=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments)}},{id:{get:function(){return this.attrs[B]},configurable:!0,enumerable:!0},variant_id:{get:function(){return this.attrs.variant_id},configurable:!0,enumerable:!0},product_id:{get:function(){return this.attrs.product_id},configurable:!0,enumerable:!0},image:{get:function(){return this.attrs.image?new I(this.attrs.image):null},configurable:!0,enumerable:!0},imageVariants:{get:function(){return this.image?this.image.variants:[]},configurable:!0,enumerable:!0},title:{get:function(){return this.attrs.title},configurable:!0,enumerable:!0},quantity:{get:function(){return this.attrs.quantity},set:function(e){var t=parseInt(e,10);if(t<0)throw new Error("Quantities must be positive");if(t!==parseFloat(e))throw new Error("Quantities must be whole numbers");return this.attrs.quantity=t,this.attrs.quantity},configurable:!0,enumerable:!0},properties:{get:function(){return this.attrs.properties||{}},set:function(e){return this.attrs.properties=e||{},e},configurable:!0,enumerable:!0},variant_title:{get:function(){return this.attrs.variant_title},configurable:!0,enumerable:!0},price:{get:function(){return this.attrs.price},configurable:!0,enumerable:!0},compare_at_price:{get:function(){return this.attrs.compare_at_price},configurable:!0,enumerable:!0},line_price:{get:function(){return(this.quantity*parseFloat(this.price)).toFixed(2)},configurable:!0,enumerable:!0},grams:{get:function(){return this.attrs.grams},configurable:!0,enumerable:!0}})),H="shopify-buy."+Date.now(),F={writable:!0,configurable:!0,enumerable:!0,value:null},Y=0,V={},K={},X=void 0;X="undefined"==typeof t?window:t;var G={set:y,get:g},J=x.extend(Object.defineProperties({constructor:function(){this.super.apply(this,arguments)},addVariants:function(){return P.warn("CartModel - ","addVariants is deprecated, please use createLineItemsFromVariants instead"),this.createLineItemsFromVariants.apply(this,arguments)},createLineItemsFromVariants:function(){var e=[].concat(Array.prototype.slice.call(arguments)).map(function(e){var t={image:e.variant.image,image_variants:e.variant.imageVariants,variant_id:e.variant.id,product_id:e.variant.productId,title:e.variant.productTitle,quantity:parseInt(e.quantity,10),properties:e.properties||{},variant_title:e.variant.title,price:e.variant.price,compare_at_price:e.variant.compareAtPrice,grams:e.variant.grams};return v(t),t}),t=this.attrs.line_items;t.push.apply(t,i(e));var n=t.reduce(function(e,t){var n=e.filter(function(e){return e.variant_id===t.variant_id&&b(e.properties,t.properties)})[0];return n?n.quantity=n.quantity+t.quantity:e.push(t),e},[]);return this.attrs.line_items=n.reduce(function(e,t){return t.quantity>=1&&e.push(t),e},[]),this.updateModel()},updateLineItem:function(e,t){if(t<1)return this.removeLineItem(e);var n=this.lineItems.filter(function(t){return t.id===e})[0];return n?(n.quantity=t,this.updateModel()):new Promise(function(t,n){n(new Error("line item with id: "+e+" not found in cart#"+this.id))})},removeLineItem:function(e){var t=this.lineItems.length,n=this.lineItems.filter(function(t){return t.id!==e}),r=n.length;return r<t?(this.attrs.line_items=n.map(function(e){return e.attrs}),this.updateModel()):new Promise(function(t,n){n(new Error("line item with id: "+e+" not found in cart#"+this.id))})},clearLineItems:function(){return this.attrs.line_items=[],this.updateModel()},updateModel:function(){var e=this;return this.shopClient.update("carts",this).then(function(t){return S(e.attrs,t.attrs),e})}},{id:{get:function(){return this.attrs[B]},configurable:!0,enumerable:!0},lineItems:{get:function(){return(this.attrs.line_items||[]).map(function(e){return new q(e)})},configurable:!0,enumerable:!0},lineItemCount:{get:function(){return this.lineItems.reduce(function(e,t){return e+t.quantity},0)},configurable:!0,enumerable:!0},subtotal:{get:function(){var e=this.lineItems.reduce(function(e,t){return e+parseFloat(t.line_price)},0);return e.toFixed(2)},configurable:!0,enumerable:!0},checkoutUrl:{get:function(){var e=this.config,t="https://"+e.domain+"/cart",n=G.get("ga"),r=this.lineItems.map(function(e){return e.variant_id+":"+e.quantity}),i="access_token="+e.apiKey+"&_fd=0";if("function"==typeof n){var o=void 0;n(function(e){o=e.get("linkerParam")}),o&&(i+="&"+o)}return t+"/"+r+"?"+i},configurable:!0,enumerable:!0}})),Q=T.extend({constructor:function(e){this.config=e},rootKeyForType:function(e){return e.slice(0,-1)},modelForType:function(){return J},deserializeSingle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t[this.rootKeyForType(e)],i=this.modelFromAttrs(e,r,n);return i},modelFromAttrs:function(e,t,n){var r=this.modelForType(e);return n.config=this.config,new r(t,n)},serialize:function(e,t){var n=this.rootKeyForType(e),r={},i=S({},t.attrs);return r[n]=i,delete i.attributes,Object.keys(i).forEach(function(e){var t=i[e];(null===t||"string"==typeof t&&0===t.length)&&delete i[e]}),r}}),$=x.extend(Object.defineProperties({constructor:function(e){if(Object.keys(e).indexOf("referenceId")<0)throw new Error("Missing key referenceId of reference. References to null are not allowed");this.super.apply(this,arguments)}},{id:{get:function(){return this.attrs[B]},configurable:!0,enumerable:!0},referenceId:{get:function(){return this.attrs.referenceId},set:function(e){return this.attrs.referenceId=e,e},configurable:!0,enumerable:!0}})),Z=T.extend({constructor:function(e){this.config=e},modelForType:function(){return $},deserializeSingle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.modelForType(e);return new r(t,n)},serialize:function(e,t){var n=S({},t.attrs);return n}}),ee=T.extend({constructor:function(){this.localStorageAvailable=this.storageAvailable("localStorage"),this.cache={}},setItem:function(e,t){return this.localStorageAvailable?localStorage.setItem(e,JSON.stringify(t)):this.cache[e]=t,t},getItem:function(e){if(!this.localStorageAvailable)return this.cache[e]||null;var t=localStorage.getItem(e);try{return JSON.parse(t)}catch(e){return null}},storageAvailable:function(e){try{var t=G.get(e),n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}}}),te=T.extend({constructor:function(){this.store=new ee},idKeyForType:function(){return B},fetchSingle:function(e,t){var n=this;return new Promise(function(r,i){var o=n.store.getItem(n.storageKey(e,t));return null===o?void i(new Error(e+"#"+t+" not found")):void r(o)})},create:function(e,t){var n=this;return new Promise(function(r){var i=n.identify(t);n.store.setItem(n.storageKey(e,i),t),r(t)})},update:function(e,t,n){var r=this;return new Promise(function(i){r.store.setItem(r.storageKey(e,t),n),i(n)})},storageKey:function(e,t){return e+"."+t},identify:function(e){var t=Object.keys(e);return v(1===t.length&&"object"===E(e[t[0]])?e[t[0]]:e)}}),ne=T.extend(Object.defineProperties({constructor:function(e){this.config=e,this.serializers={products:W,collections:W,carts:Q,references:Z},this.adapters={products:z,collections:z,carts:te,references:te}},config:null,fetchAll:function(e){var t=this,n=new this.adapters[e](this.config);return n.fetchMultiple(e).then(function(r){return t.deserialize(e,r,n,null,{multiple:!0})})},fetch:function(e,t){var n=this,r=new this.adapters[e](this.config);return r.fetchSingle(e,t).then(function(t){return n.deserialize(e,t,r,null,{single:!0})})},fetchQuery:function(e,t){var n=this,r=new this.adapters[e](this.config);return r.fetchMultiple(e,t).then(function(t){return n.deserialize(e,t,r,null,{multiple:!0})})},create:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new this.adapters[e](this.config),i=new this.serializers[e](this.config),o=i.modelForType(e),a=new o(n,{shopClient:this}),s=i.serialize(e,a);return r.create(e,s).then(function(n){return t.deserialize(e,n,r,i,{single:!0})})},update:function(e,t){var n=this,r=t.adapter,i=t.serializer,o=i.serialize(e,t),a=t.attrs[r.idKeyForType(e)];return r.update(e,a,o).then(function(t){return n.deserialize(e,t,r,i,{single:!0})})},deserialize:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r||new this.serializers[e](this.config),a={shopClient:this,adapter:n,serializer:o,type:e},s=void 0;return s=i.multiple?o.deserializeMultiple(e,t,a):o.deserializeSingle(e,t,a)},createCart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={line_items:[]},n={};return S(n,t),S(n,e),this.create("carts",n)},updateCart:function(e){return this.update("carts",e)},fetchCart:w("one","carts"),fetchAllProducts:w("all","products"),fetchAllCollections:w("all","collections"),fetchProduct:w("one","products"),fetchCollection:w("one","collections"),fetchQueryProducts:w("query","products"),fetchQueryCollections:w("query","collections"),fetchRecentCart:function(){var e=this;return this.fetch("references",this.config.domain+".recent-cart").then(function(t){var n=t.referenceId;return e.fetchCart(n)}).catch(function(){return e.createCart().then(function(t){var n={referenceId:t.id};return n[B]=e.config.domain+".recent-cart",e.create("references",n),t})})}},{serializers:{get:function(){return S({},this.shadowedSerializers)},set:function(e){this.shadowedSerializers=S({},e)},configurable:!0,enumerable:!0},adapters:{get:function(){return S({},this.shadowedAdapters)},set:function(e){this.shadowedAdapters=S({},e)},configurable:!0,enumerable:!0}}));if(f()){var re=n(342);G.set("fetch",re),G.set("Response",re.Response)}f()&&G.set("btoa",function(e){return new r(e).toString("base64")});var ie={ShopClient:ne,Config:A,version:N,NO_IMAGE_URI:D,buildClient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new this.Config(e);return new this.ShopClient(t)}};e.exports=ie}).call(t,n(46),n(170).Buffer)},,function(e,t){var n=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()};e.exports=n},,,,,function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(17),s=r(a),l=n(8),u=n(24),c=r(u);n(150);var f=n(151),d=r(f),p=(n(15),n(48)),h=n(47),m=n(49).configure();m.subscribe(function(){var e=m.getState();console.log("New state",e)}),m.dispatch(p.startAddProducts()),m.dispatch(h.startAddCollections()),localStorage.getItem("lastCartId")?c.default.restoreCart().then(function(e){m.dispatch({type:"SET_INITIAL_CART_STATE",localCart:e})}):c.default.createCart().then(function(e){m.dispatch({type:"SET_INITIAL_CART_STATE",localCart:e})}),s.default.render(o.default.createElement(l.Provider,{store:m},d.default),document.getElementById("app"))}],[343]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLm1pbi4wNGQyYjkwMzk2ZGY0ZjcyNmVhNy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvYWN0aW9ucy9jYXJ0QWN0aW9ucy5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2FwaS9zaG9waWZ5QVBJLmpzeCIsIndlYnBhY2s6Ly8vLi9+L2NsYXNzbmFtZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2FjdGlvbnMvY29sbGVjdGlvbkFjdGlvbnMuanN4Iiwid2VicGFjazovLy8uL2FwcC9hY3Rpb25zL3Byb2R1Y3RBY3Rpb25zLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvc3RvcmUvY29uZmlndXJlU3RvcmUuanN4Iiwid2VicGFjazovLy8uL2FwcC9wcmVzZW50YXRpb25hbC9Mb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3V0aWxzL2Zvcm1hdC5qc3giLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zbGljay9saWIvbWl4aW5zL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvQ29sbGVjdGlvbi5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvUHJvZHVjdC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvUHJvZHVjdEl0ZW0uanN4Iiwid2VicGFjazovLy8uL34vanNvbjJtcS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5hc3NpZ24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvY29uc29sZS93YXJuLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtZ2Evc3JjL3V0aWxzL3RyaW0uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb2RhbC9saWIvaGVscGVycy90YWJiYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXNsaWNrL2xpYi9kZWZhdWx0LXByb3BzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2xpY2svbGliL21peGlucy90cmFja0hlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvcm91dGVyL3JvdXRlci5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvQ2FydC1pdGVtLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvY29udGFpbmVycy9Db2xsZWN0aW9uSXRlbS5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvQ29sbGVjdGlvbnMuanN4Iiwid2VicGFjazovLy8uL2FwcC9jb250YWluZXJzL0Zvb3Rlci5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvSGVhZGVyLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvY29udGFpbmVycy9JbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvTWFpbi5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvUHJvZHVjdHMuanN4Iiwid2VicGFjazovLy8uL2FwcC9jb250YWluZXJzL1VwbG9hZC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbnRhaW5lcnMvY2FydC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL3ByZXNlbnRhdGlvbmFsL0Fib3V0LmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvcHJlc2VudGF0aW9uYWwvQ29udGFjdC5qc3giLCJ3ZWJwYWNrOi8vLy4vYXBwL3ByZXNlbnRhdGlvbmFsL0xvZ2luLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvcHJlc2VudGF0aW9uYWwvTWFwLmpzeCIsIndlYnBhY2s6Ly8vLi9hcHAvcHJlc2VudGF0aW9uYWwvT3JkZXJTdGF0dXMuanN4Iiwid2VicGFjazovLy8uL2FwcC9yZWR1Y2Vycy9yZWR1Y2Vycy5qc3giLCJ3ZWJwYWNrOi8vLy4vfi9iYXNlNjQtanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9idWZmZXIvfi9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vY2FuLXVzZS1kb20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9lbGVtZW50LWNsYXNzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vZXhlbnYvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9pZWVlNzU0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtZ2Evc3JjL2NvbXBvbmVudHMvT3V0Ym91bmRMaW5rLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtZ2Evc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtZ2Evc3JjL3V0aWxzL2NvbnNvbGUvbG9nLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtZ2Evc3JjL3V0aWxzL2Zvcm1hdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LWdhL3NyYy91dGlscy9taWdodEJlRW1haWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvcmVtb3ZlTGVhZGluZ1NsYXNoLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtZ2Evc3JjL3V0aWxzL3RvVGl0bGVDYXNlLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtbW9kYWwvbGliL2NvbXBvbmVudHMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1tb2RhbC9saWIvY29tcG9uZW50cy9Nb2RhbFBvcnRhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL2FyaWFBcHBIaWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL2ZvY3VzTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL3Njb3BlVGFiLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtbW9kYWwvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtcmVzcG9uc2l2ZS1taXhpbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXNsaWNrL2xpYi9hcnJvd3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zbGljay9saWIvZG90cy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXNsaWNrL2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXNsaWNrL2xpYi9pbml0aWFsLXN0YXRlLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2xpY2svbGliL2lubmVyLXNsaWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXNsaWNrL2xpYi9taXhpbnMvZXZlbnQtaGFuZGxlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1zbGljay9saWIvc2xpZGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtc2xpY2svbGliL3RyYWNrLmpzIiwid2VicGFjazovLy8uL34vcmVkdXgtdGh1bmsvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vc2hvcGlmeS1idXkvbGliL3Nob3BpZnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zdHJpbmctY29udmVydC9jYW1lbDJoeXBoZW4uanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2FwcC5qc3giXSwibmFtZXMiOlsid2VicGFja0pzb25wIiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiY2xvc2VDYXJ0Iiwib3BlbkNhcnQiLCJ1cGRhdGVDYXJ0SXRlbSIsInVwZGF0ZUNhcnRJdGVtc0NvdW50IiwidXBkYXRlQ2FydFN1YnRvdGFsIiwiYWRkVG9DYXJ0Iiwic3RhcnRBZGRvclVwZGF0ZUNhcnRJdGVtIiwidW5kZWZpbmVkIiwiX3Nob3BpZnlBUEkiLCJfc2hvcGlmeUFQSTIiLCJwcm9kdWN0VmFyaWFudCIsInF1YW50aXR5IiwiZGlzcGF0Y2giLCJnZXRTdGF0ZSIsImZpbmRDYXJ0SXRlbUJ5VmFyaWFudElkIiwidmFyaWFudElkIiwiY2FydCIsImxpbmVJdGVtcyIsImZpbHRlciIsIml0ZW0iLCJ2YXJpYW50X2lkIiwiaWQiLCJjYXJ0TGluZUl0ZW0iLCJwYXJzZUludCIsImNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cyIsInZhcmlhbnQiLCJ0aGVuIiwidXBkYXRlZENhcnQiLCJ1cGRhdGVkQ2FydEl0ZW1zIiwidHlwZSIsImNhdGNoIiwiZXJyb3JzIiwiY29uc29sZSIsImxvZyIsIm5ld1N1YnRvdGFsIiwic3VidG90YWwiLCJ1cGRhdGVkQ2FydEl0ZW1zQ291bnQiLCJsaW5lSXRlbXNDb3VudCIsInNlbGVjdGVkQ2FydEl0ZW0iLCJ1cGRhdGVkUXVhbnRpdHkiLCJmb3JFYWNoIiwiY2FydEl0ZW0iLCJ1cGRhdGVkQ2FydEl0ZW0iLCJwdXNoIiwidXBkYXRlTGluZUl0ZW0iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJTaG9waWZ5QnV5Iiwic2hvcGlmeUFQSSIsImNvbmZpZ3VyZSIsInRoaXMiLCJjbGllbnQiLCJidWlsZENsaWVudCIsImFwaUtleSIsImRvbWFpbiIsImFwcElkIiwiX3RoaXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNyZWF0ZUNhcnQiLCJuZXdDYXJ0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImxvY2FsQ2FydCIsImlzT3BlbiIsIl90aGlzMiIsImZldGNoQ2FydCIsImdldEl0ZW0iLCJyZW1vdGVDYXJ0IiwibGluZUl0ZW1Db3VudCIsIl9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsImNsYXNzTmFtZXMiLCJjbGFzc2VzIiwiYXJndW1lbnRzIiwiYXJnIiwiYXJnVHlwZSIsIkFycmF5IiwiaXNBcnJheSIsImFwcGx5IiwiaGFzT3duIiwiY2FsbCIsImpvaW4iLCJoYXNPd25Qcm9wZXJ0eSIsImFkZENvbGxlY3Rpb25zIiwic3RhcnRBZGRDb2xsZWN0aW9ucyIsInNldEFjdGl2ZUNvbGxlY3Rpb24iLCJfZXh0ZW5kcyIsImFzc2lnbiIsInNvdXJjZSIsImZldGNoQ29sbGVjdGlvbiIsImRhdGEiLCJjb2xsZWN0aW9uIiwicGFyc2VkQ29sbGVjdGlvbiIsImZldGNoQWxsQ29sbGVjdGlvbnMiLCJjb2xsZWN0aW9ucyIsInBhcnNlZENvbGxlY3Rpb25zIiwia2V5cyIsImNvbGxlY3Rpb25JZCIsInVwZGF0ZUFjdGl2ZVByb2R1Y3RPcHRpb25zIiwiY2xlYXJBY3RpdmVQcm9kdWN0Iiwic2V0QWN0aXZlUHJvZHVjdCIsInByZWxvYWRQcm9kdWN0SW1hZ2VzIiwiYWRkUHJvZHVjdHMiLCJzdGFydEFkZFByb2R1Y3RzIiwiZmV0Y2hBbGxQcm9kdWN0cyIsInByb2R1Y3RzIiwicGFyc2VkUHJvZHVjdHMiLCJtYXAiLCJwcm9kdWN0IiwiaW5kZXgiLCJ1cGRhdGVkUHJvZHVjdCIsImFsbCIsImltYWdlcyIsIkltYWdlIiwic3JjIiwic2VsZWN0ZWRWYXJpYW50IiwiaW1hZ2VWYXJpYW50cyIsIm9wdGlvbnMiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIm5ld09iaiIsIl9yZWR1eCIsInJlZHV4IiwiX3JlZHV4VGh1bmsiLCJfcmVkdXhUaHVuazIiLCJfcmVkdWNlcnMiLCJpbml0aWFsU3RhdGUiLCJyZWR1Y2VyIiwiY29tYmluZVJlZHVjZXJzIiwibmF2Iiwic3RvcmUiLCJjcmVhdGVTdG9yZSIsImNvbXBvc2UiLCJhcHBseU1pZGRsZXdhcmUiLCJ3aW5kb3ciLCJkZXZUb29sc0V4dGVuc2lvbiIsImYiLCJMb2FkZXIiLCJfcmVhY3QyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIl9yZWFjdCIsIkZvcm1hdCIsImFtb3VudCIsImN1cnJlbmN5IiwidGhvdXNhbmRTZXBhcmF0b3IiLCJkZWNpbWFsU2VwYXJhdG9yIiwibG9jYWxlRGVjaW1hbFNlcGFyYXRvciIsInJlZ2V4IiwiUmVnRXhwIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJyZXBsYWNlIiwidG9TdHJpbmciLCJfcmVhY3REb20iLCJfcmVhY3REb20yIiwiX3RyYWNrSGVscGVyIiwiX29iamVjdEFzc2lnbiIsIl9vYmplY3RBc3NpZ24yIiwiaGVscGVycyIsImluaXRpYWxpemUiLCJzbGlkZVdpZHRoIiwic2xpY2tMaXN0IiwiZmluZERPTU5vZGUiLCJsaXN0Iiwic2xpZGVDb3VudCIsIkNoaWxkcmVuIiwiY291bnQiLCJjaGlsZHJlbiIsImxpc3RXaWR0aCIsImdldFdpZHRoIiwidHJhY2tXaWR0aCIsInRyYWNrIiwidmVydGljYWwiLCJjZW50ZXJQYWRkaW5nQWRqIiwiY2VudGVyTW9kZSIsImNlbnRlclBhZGRpbmciLCJzbGlkZXNUb1Nob3ciLCJzbGlkZUhlaWdodCIsImdldEhlaWdodCIsInF1ZXJ5U2VsZWN0b3IiLCJsaXN0SGVpZ2h0IiwiY3VycmVudFNsaWRlIiwicnRsIiwiaW5pdGlhbFNsaWRlIiwic2V0U3RhdGUiLCJ0YXJnZXRMZWZ0IiwiZ2V0VHJhY2tMZWZ0Iiwic2xpZGVJbmRleCIsInN0YXRlIiwidHJhY2tSZWYiLCJ0cmFja1N0eWxlIiwiZ2V0VHJhY2tDU1MiLCJsZWZ0IiwiYXV0b1BsYXkiLCJ1cGRhdGUiLCJhdXRvcGxheSIsInBhdXNlIiwiZWxlbSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJoZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJhZGFwdEhlaWdodCIsImFkYXB0aXZlSGVpZ2h0Iiwic2VsZWN0b3IiLCJzdHlsZSIsImNhbkdvTmV4dCIsIm9wdHMiLCJjYW5HbyIsImluZmluaXRlIiwic2xpZGVIYW5kbGVyIiwidGFyZ2V0U2xpZGUiLCJjdXJyZW50TGVmdCIsImNhbGxiYWNrIiwid2FpdEZvckFuaW1hdGUiLCJhbmltYXRpbmciLCJmYWRlIiwibGF6eUxvYWQiLCJsYXp5TG9hZGVkTGlzdCIsImluZGV4T2YiLCJjb25jYXQiLCJhZnRlckNoYW5nZSIsImFuaW1hdGlvbkVuZENhbGxiYWNrIiwic2V0VGltZW91dCIsInNwZWVkIiwiYmVmb3JlQ2hhbmdlIiwic2xpZGVzVG9TY3JvbGwiLCJsb2FkZWQiLCJzbGlkZXNUb0xvYWQiLCJ1c2VDU1MiLCJuZXh0U3RhdGVDaGFuZ2VzIiwic3dpcGVMZWZ0IiwiZ2V0VHJhY2tBbmltYXRlQ1NTIiwic3dpcGVEaXJlY3Rpb24iLCJ0b3VjaE9iamVjdCIsInhEaXN0IiwieURpc3QiLCJyIiwic3dpcGVBbmdsZSIsInN0YXJ0WCIsImN1clgiLCJzdGFydFkiLCJjdXJZIiwiTWF0aCIsImF0YW4yIiwicm91bmQiLCJQSSIsImFicyIsInZlcnRpY2FsU3dpcGluZyIsInBsYXkiLCJuZXh0SW5kZXgiLCJtb3VudGVkIiwiYXV0b1BsYXlUaW1lciIsImNsZWFyVGltZW91dCIsImF1dG9wbGF5U3BlZWQiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfcmVxdWlyZSIsImNvbm5lY3QiLCJhY3Rpb25zIiwiQ29sbGVjdGlvbiIsIl9SZWFjdCRDb21wb25lbnQiLCJnZXRQcm90b3R5cGVPZiIsInBhcmFtcyIsIl9jb2xsZWN0aW9uIiwidGl0bGUiLCJjb2xsZWN0aW9uX2lkIiwiQ29tcG9uZW50IiwiYWN0aXZlIiwiX3JlYWN0Um91dGVyIiwiX2Zvcm1hdCIsIl9mb3JtYXQyIiwiX3JlYWN0TW9kYWwiLCJfcmVhY3RNb2RhbDIiLCJfTG9hZGVyIiwiX0xvYWRlcjIiLCJwcm9kdWN0QWN0aW9ucyIsImNhcnRBY3Rpb25zIiwiUHJvZHVjdCIsIm1vZGFsSXNPcGVuIiwib3Blbk1vZGFsIiwiYmluZCIsImNsb3NlTW9kYWwiLCJmZXRjaFByb2R1Y3QiLCJwcm9kdWN0SWQiLCJvcHRpb25OYW1lIiwib3B0aW9uIiwibmFtZSIsInNlbGVjdGVkIiwiX3RoaXMzIiwiYWN0aXZlUHJvZHVjdCIsIl9hY3RpdmVQcm9kdWN0JGF0dHJzIiwiYXR0cnMiLCJwcm9kdWN0X2lkIiwiX2FjdGl2ZVByb2R1Y3QiLCJkZXNjcmlwdGlvbiIsInNlbGVjdGVkVmFyaWFudEltYWdlIiwicmVuZGVyT3B0aW9ucyIsIm9uQ2hhbmdlIiwiZXZlbnQiLCJoYW5kbGVPcHRpb25DaGFuZ2UiLCJ2YWx1ZXMiLCJyZW5kZXJTaXplcyIsIm9wdGlvbnNJbmRleCIsIm9uQ2xpY2siLCJicm93c2VySGlzdG9yeSIsImdvQmFjayIsImFsdCIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiX19odG1sIiwiYXNNb25leSIsInByaWNlIiwicGxhY2Vob2xkZXIiLCJocmVmIiwib25SZXF1ZXN0Q2xvc2UiLCJjb250ZW50TGFiZWwiLCJjbG9zZVRpbWVvdXRNUyIsIlByb2R1Y3RJdGVtIiwiX3Byb3BzIiwiaW1hZ2UiLCJMaW5rIiwidG8iLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjYW1lbDJoeXBoZW4iLCJpc0RpbWVuc2lvbiIsImZlYXR1cmUiLCJyZSIsInRlc3QiLCJvYmoybXEiLCJtcSIsImZlYXR1cmVzIiwianNvbjJtcSIsInF1ZXJ5IiwicSIsImZ1bmMiLCJ0aGlzQXJnIiwiYXJncyIsImJhc2VUaW1lcyIsIm4iLCJpdGVyYXRlZSIsInJlc3VsdCIsIm92ZXJBcmciLCJ0cmFuc2Zvcm0iLCJhcnJheUxpa2VLZXlzIiwiaW5oZXJpdGVkIiwiaXNBcmd1bWVudHMiLCJTdHJpbmciLCJza2lwSW5kZXhlcyIsImlzSW5kZXgiLCJhc3NpZ25WYWx1ZSIsIm9iamVjdCIsIm9ialZhbHVlIiwiZXEiLCJiYXNlS2V5cyIsImlzUHJvdG90eXBlIiwibmF0aXZlS2V5cyIsImJhc2VSZXN0Iiwic3RhcnQiLCJuYXRpdmVNYXgiLCJhcnJheSIsIm90aGVyQXJncyIsImNvcHlPYmplY3QiLCJjdXN0b21pemVyIiwibmV3VmFsdWUiLCJjcmVhdGVBc3NpZ25lciIsImFzc2lnbmVyIiwic291cmNlcyIsImd1YXJkIiwiaXNJdGVyYXRlZUNhbGwiLCJNQVhfU0FGRV9JTlRFR0VSIiwicmVJc1VpbnQiLCJpc09iamVjdCIsImlzQXJyYXlMaWtlIiwiQ3RvciIsInByb3RvIiwib2JqZWN0UHJvdG8iLCJvdGhlciIsImlzQXJyYXlMaWtlT2JqZWN0IiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJvYmplY3RUb1N0cmluZyIsImFyZ3NUYWciLCJpc0xlbmd0aCIsImlzRnVuY3Rpb24iLCJpc09iamVjdExpa2UiLCJ0YWciLCJmdW5jVGFnIiwiZ2VuVGFnIiwibWF4Iiwibm9uRW51bVNoYWRvd3MiLCJ2YWx1ZU9mIiwid2FybiIsInMiLCJ0cmltIiwiZm9jdXNhYmxlIiwiZWxlbWVudCIsImlzVGFiSW5kZXhOb3ROYU4iLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwiZGlzYWJsZWQiLCJ2aXNpYmxlIiwiaGlkZGVuIiwiZWwiLCJkaXNwbGF5IiwiZG9jdW1lbnQiLCJib2R5IiwicGFyZW50Tm9kZSIsInRhYmJhYmxlIiwidGFiSW5kZXgiLCJnZXRBdHRyaWJ1dGUiLCJpc1RhYkluZGV4TmFOIiwiaXNOYU4iLCJmaW5kVGFiYmFibGVEZXNjZW5kYW50cyIsInNsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsImRlZmF1bHRQcm9wcyIsImFjY2Vzc2liaWxpdHkiLCJhcnJvd3MiLCJjc3NFYXNlIiwiY3VzdG9tUGFnaW5nIiwiZG90cyIsImRvdHNDbGFzcyIsImRyYWdnYWJsZSIsImVhc2luZyIsImVkZ2VGcmljdGlvbiIsImZvY3VzT25TZWxlY3QiLCJwYXVzZU9uSG92ZXIiLCJyZXNwb25zaXZlIiwic2xpZGUiLCJzd2lwZSIsInN3aXBlVG9TbGlkZSIsInRvdWNoTW92ZSIsInRvdWNoVGhyZXNob2xkIiwidmFyaWFibGVXaWR0aCIsImVkZ2VFdmVudCIsImluaXQiLCJzd2lwZUV2ZW50IiwibmV4dEFycm93IiwicHJldkFycm93IiwiY2hlY2tTcGVjS2V5cyIsInNwZWMiLCJrZXlzQXJyYXkiLCJyZWR1Y2UiLCJlcnJvciIsInRyYWNrSGVpZ2h0IiwidHJhY2tDaGlsZHJlbiIsIm9wYWNpdHkiLCJXZWJraXRUcmFuc2Zvcm0iLCJ0cmFuc2l0aW9uIiwiV2Via2l0VHJhbnNpdGlvbiIsIm1zVHJhbnNmb3JtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwibWFyZ2luVG9wIiwibWFyZ2luTGVmdCIsInNsaWRlT2Zmc2V0IiwidmVydGljYWxPZmZzZXQiLCJzbGlkZXNUb09mZnNldCIsImZsb29yIiwidGFyZ2V0U2xpZGVJbmRleCIsImNoaWxkTm9kZXMiLCJvZmZzZXRMZWZ0IiwiRXJyb3IiLCJsb2dQYWdlVmlldyIsImxvY2F0aW9uIiwiX3JlYWN0R2EyIiwic2V0IiwicGFnZSIsInBhdGhuYW1lIiwicGFnZXZpZXciLCJfcmVhY3REb2N1bWVudE1ldGEiLCJfTWFpbiIsIl9NYWluMiIsIl9JbmRleCIsIl9JbmRleDIiLCJfUHJvZHVjdHMiLCJfUHJvZHVjdHMyIiwiX1Byb2R1Y3QiLCJfUHJvZHVjdDIiLCJfQ29sbGVjdGlvbnMiLCJfQ29sbGVjdGlvbnMyIiwiX0NvbGxlY3Rpb24iLCJfQ29sbGVjdGlvbjIiLCJfVXBsb2FkIiwiX1VwbG9hZDIiLCJfT3JkZXJTdGF0dXMiLCJfT3JkZXJTdGF0dXMyIiwiX01hcCIsIl9NYXAyIiwiX0xvZ2luIiwiX0xvZ2luMiIsIl9BYm91dCIsIl9BYm91dDIiLCJfQ29udGFjdCIsIl9Db250YWN0MiIsIl9yZWFjdEdhIiwibGlzdGVuIiwic2Nyb2xsVG8iLCJSb3V0ZXIiLCJoaXN0b3J5IiwiUm91dGUiLCJwYXRoIiwiY29tcG9uZW50IiwiSW5kZXhSb3V0ZSIsIkNhcnRJdGVtIiwiaW5jcmVtZW50TGluZUl0ZW0iLCJjaGFuZ2VRdWFudGl0eSIsInZhcmlhbnRfdGl0bGUiLCJtaW4iLCJyZWFkT25seSIsIkNvbGxlY3Rpb25JdGVtIiwiX0NvbGxlY3Rpb25JdGVtIiwiX0NvbGxlY3Rpb25JdGVtMiIsIkNvbGxlY3Rpb25zIiwiRm9vdGVyIiwiYWN0aXZlQ2xhc3NOYW1lIiwiSGVhZGVyIiwiY2FydEl0ZW1zIiwiSW5kZXhMaW5rIiwiYWN0aXZlU3R5bGUiLCJmb250V2VpZ2h0IiwiX3JlYWN0U2xpY2siLCJfcmVhY3RTbGljazIiLCJfUHJvZHVjdEl0ZW0iLCJfUHJvZHVjdEl0ZW0yIiwiSW5kZXgiLCJzZXR0aW5ncyIsImJyZWFrcG9pbnQiLCJ0eWVwIiwiaGFuZGxlQWRkVG9DYXJ0IiwiX0hlYWRlciIsIl9IZWFkZXIyIiwiX0Zvb3RlciIsIl9Gb290ZXIyIiwiX3JlYWN0RG9jdW1lbnRNZXRhMiIsIl9jYXJ0IiwiX2NhcnQyIiwiTWFpbiIsImNvbnRlbnQiLCJtZXRhIiwiY2hhcnNldCIsImF1dG8iLCJvZ3JhcGgiLCJwYWdlTmFtZSIsInN1YnN0ciIsInNwbGl0IiwiUHJvZHVjdHMiLCJVcGxvYWQiLCJfQ2FydEl0ZW0iLCJfQ2FydEl0ZW0yIiwiQ2FydCIsImhhbmRsZUNoZWNrb3V0Iiwib3BlbiIsImNoZWNrb3V0VXJsIiwiX3Byb3BzJGNhcnQiLCJyZW5kZXJMaW5lSXRlbXMiLCJsaW5lSXRlbSIsImhhbmRsZUNsb3NlQ2FydCIsIkFib3V0IiwiQ29udGFjdCIsIkxvZ2luIiwiTWFwIiwiT3JkZXJTdGF0dXMiLCJwcm9kdWN0c1JlZHVjZXIiLCJhY3Rpb24iLCJmZXRjaGVkIiwiY29sbGVjdGlvbnNSZWR1Y2VyIiwiY2FydFJlZHVjZXIiLCJuYXZSZWR1Y2VyIiwic2hvd0Nsb3NlIiwic2hvd05hdiIsInBsYWNlSG9sZGVyc0NvdW50IiwiYjY0IiwibGVuIiwiYnl0ZUxlbmd0aCIsInRvQnl0ZUFycmF5IiwiaiIsImwiLCJ0bXAiLCJwbGFjZUhvbGRlcnMiLCJhcnIiLCJBcnIiLCJMIiwicmV2TG9va3VwIiwiY2hhckNvZGVBdCIsInRyaXBsZXRUb0Jhc2U2NCIsIm51bSIsImxvb2t1cCIsImVuY29kZUNodW5rIiwidWludDgiLCJlbmQiLCJvdXRwdXQiLCJmcm9tQnl0ZUFycmF5IiwiZXh0cmFCeXRlcyIsInBhcnRzIiwibWF4Q2h1bmtMZW5ndGgiLCJsZW4yIiwiVWludDhBcnJheSIsImNvZGUiLCJnbG9iYWwiLCJ0eXBlZEFycmF5U3VwcG9ydCIsImZvbyIsInN1YmFycmF5IiwiZSIsImtNYXhMZW5ndGgiLCJCdWZmZXIiLCJUWVBFRF9BUlJBWV9TVVBQT1JUIiwiY3JlYXRlQnVmZmVyIiwidGhhdCIsIlJhbmdlRXJyb3IiLCJlbmNvZGluZ09yT2Zmc2V0IiwiYWxsb2NVbnNhZmUiLCJmcm9tIiwiQXJyYXlCdWZmZXIiLCJmcm9tQXJyYXlCdWZmZXIiLCJmcm9tU3RyaW5nIiwiZnJvbU9iamVjdCIsImFzc2VydFNpemUiLCJzaXplIiwiYWxsb2MiLCJmaWxsIiwiZW5jb2RpbmciLCJjaGVja2VkIiwic3RyaW5nIiwiaXNFbmNvZGluZyIsImFjdHVhbCIsIndyaXRlIiwiZnJvbUFycmF5TGlrZSIsImJ5dGVPZmZzZXQiLCJpc0J1ZmZlciIsImNvcHkiLCJidWZmZXIiLCJpc25hbiIsIlNsb3dCdWZmZXIiLCJpc1ZpZXciLCJsb3dlcmVkQ2FzZSIsInV0ZjhUb0J5dGVzIiwiYmFzZTY0VG9CeXRlcyIsInNsb3dUb1N0cmluZyIsImhleFNsaWNlIiwidXRmOFNsaWNlIiwiYXNjaWlTbGljZSIsImxhdGluMVNsaWNlIiwiYmFzZTY0U2xpY2UiLCJ1dGYxNmxlU2xpY2UiLCJzd2FwIiwiYiIsIm0iLCJiaWRpcmVjdGlvbmFsSW5kZXhPZiIsInZhbCIsImRpciIsImFycmF5SW5kZXhPZiIsImxhc3RJbmRleE9mIiwicmVhZCIsImJ1ZiIsImluZGV4U2l6ZSIsInJlYWRVSW50MTZCRSIsImFyckxlbmd0aCIsInZhbExlbmd0aCIsImZvdW5kSW5kZXgiLCJmb3VuZCIsImhleFdyaXRlIiwib2Zmc2V0IiwiTnVtYmVyIiwicmVtYWluaW5nIiwic3RyTGVuIiwicGFyc2VkIiwidXRmOFdyaXRlIiwiYmxpdEJ1ZmZlciIsImFzY2lpV3JpdGUiLCJhc2NpaVRvQnl0ZXMiLCJsYXRpbjFXcml0ZSIsImJhc2U2NFdyaXRlIiwidWNzMldyaXRlIiwidXRmMTZsZVRvQnl0ZXMiLCJiYXNlNjQiLCJyZXMiLCJmaXJzdEJ5dGUiLCJjb2RlUG9pbnQiLCJieXRlc1BlclNlcXVlbmNlIiwic2Vjb25kQnl0ZSIsInRoaXJkQnl0ZSIsImZvdXJ0aEJ5dGUiLCJ0ZW1wQ29kZVBvaW50IiwiZGVjb2RlQ29kZVBvaW50c0FycmF5IiwiY29kZVBvaW50cyIsIk1BWF9BUkdVTUVOVFNfTEVOR1RIIiwiZnJvbUNoYXJDb2RlIiwicmV0Iiwib3V0IiwidG9IZXgiLCJieXRlcyIsImNoZWNrT2Zmc2V0IiwiZXh0IiwiY2hlY2tJbnQiLCJvYmplY3RXcml0ZVVJbnQxNiIsImxpdHRsZUVuZGlhbiIsIm9iamVjdFdyaXRlVUludDMyIiwiY2hlY2tJRUVFNzU0Iiwid3JpdGVGbG9hdCIsIm5vQXNzZXJ0IiwiaWVlZTc1NCIsIndyaXRlRG91YmxlIiwiYmFzZTY0Y2xlYW4iLCJzdHIiLCJzdHJpbmd0cmltIiwiSU5WQUxJRF9CQVNFNjRfUkUiLCJ1bml0cyIsIkluZmluaXR5IiwibGVhZFN1cnJvZ2F0ZSIsImJ5dGVBcnJheSIsImMiLCJoaSIsImxvIiwiZHN0IiwiSU5TUEVDVF9NQVhfQllURVMiLCJwb29sU2l6ZSIsIl9hdWdtZW50IiwiU3ltYm9sIiwic3BlY2llcyIsImFsbG9jVW5zYWZlU2xvdyIsIl9pc0J1ZmZlciIsImNvbXBhcmUiLCJhIiwieCIsInkiLCJwb3MiLCJzd2FwMTYiLCJzd2FwMzIiLCJzd2FwNjQiLCJlcXVhbHMiLCJpbnNwZWN0IiwibWF0Y2giLCJ0aGlzU3RhcnQiLCJ0aGlzRW5kIiwidGhpc0NvcHkiLCJ0YXJnZXRDb3B5IiwiaW5jbHVkZXMiLCJpc0Zpbml0ZSIsInRvSlNPTiIsIl9hcnIiLCJuZXdCdWYiLCJzbGljZUxlbiIsInJlYWRVSW50TEUiLCJtdWwiLCJyZWFkVUludEJFIiwicmVhZFVJbnQ4IiwicmVhZFVJbnQxNkxFIiwicmVhZFVJbnQzMkxFIiwicmVhZFVJbnQzMkJFIiwicmVhZEludExFIiwicG93IiwicmVhZEludEJFIiwicmVhZEludDgiLCJyZWFkSW50MTZMRSIsInJlYWRJbnQxNkJFIiwicmVhZEludDMyTEUiLCJyZWFkSW50MzJCRSIsInJlYWRGbG9hdExFIiwicmVhZEZsb2F0QkUiLCJyZWFkRG91YmxlTEUiLCJyZWFkRG91YmxlQkUiLCJ3cml0ZVVJbnRMRSIsIm1heEJ5dGVzIiwid3JpdGVVSW50QkUiLCJ3cml0ZVVJbnQ4Iiwid3JpdGVVSW50MTZMRSIsIndyaXRlVUludDE2QkUiLCJ3cml0ZVVJbnQzMkxFIiwid3JpdGVVSW50MzJCRSIsIndyaXRlSW50TEUiLCJsaW1pdCIsInN1YiIsIndyaXRlSW50QkUiLCJ3cml0ZUludDgiLCJ3cml0ZUludDE2TEUiLCJ3cml0ZUludDE2QkUiLCJ3cml0ZUludDMyTEUiLCJ3cml0ZUludDMyQkUiLCJ3cml0ZUZsb2F0TEUiLCJ3cml0ZUZsb2F0QkUiLCJ3cml0ZURvdWJsZUxFIiwid3JpdGVEb3VibGVCRSIsInRhcmdldFN0YXJ0IiwiY2FuVXNlRE9NIiwicHJvcCIsIkVsZW1lbnRDbGFzcyIsIm5vZGVUeXBlIiwiYWRkIiwicmVtb3ZlIiwiaWR4Iiwic3BsaWNlIiwiaGFzIiwidG9nZ2xlIiwiRXhlY3V0aW9uRW52aXJvbm1lbnQiLCJjYW5Vc2VXb3JrZXJzIiwiV29ya2VyIiwiY2FuVXNlRXZlbnRMaXN0ZW5lcnMiLCJjYW5Vc2VWaWV3cG9ydCIsInNjcmVlbiIsImlzTEUiLCJtTGVuIiwibkJ5dGVzIiwiZUxlbiIsImVNYXgiLCJlQmlhcyIsIm5CaXRzIiwiZCIsIk5hTiIsInJ0IiwiTE4yIiwiUmVhY3QiLCJORVdUQUIiLCJPdXRib3VuZExpbmsiLCJjcmVhdGVDbGFzcyIsImRpc3BsYXlOYW1lIiwicHJvcFR5cGVzIiwiZXZlbnRMYWJlbCIsIlByb3BUeXBlcyIsImlzUmVxdWlyZWQiLCJzdGF0aWNzIiwidHJhY2tMaW5rIiwiaGFuZGxlQ2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsImV2ZW50TWV0YSIsImxhYmVsIiwicmVuZGVyIiwiZm9ybWF0IiwicmVtb3ZlTGVhZGluZ1NsYXNoIiwiX2RlYnVnIiwiX3RpdGxlQ2FzZSIsIlJlYWN0R0EiLCJnYVRyYWNraW5nSUQiLCJkZWJ1ZyIsInRpdGxlQ2FzZSIsIm8iLCJnIiwiRGF0ZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXN5bmMiLCJpbnNlcnRCZWZvcmUiLCJnYU9wdGlvbnMiLCJnYSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaWVsZHNPYmplY3QiLCJzZW5kIiwiZmllbGRPYmplY3QiLCJtb2RhbHZpZXciLCJtb2RhbE5hbWUiLCJ0aW1pbmciLCJjYXRlZ29yeSIsInZhcmlhYmxlIiwiaGl0VHlwZSIsInRpbWluZ0NhdGVnb3J5IiwidGltaW5nVmFyIiwidGltaW5nVmFsdWUiLCJ0aW1pbmdMYWJlbCIsImV2ZW50Q2F0ZWdvcnkiLCJldmVudEFjdGlvbiIsImV2ZW50VmFsdWUiLCJub25JbnRlcmFjdGlvbiIsInRyYW5zcG9ydCIsImV4Y2VwdGlvbiIsImV4RGVzY3JpcHRpb24iLCJmYXRhbCIsImV4RmF0YWwiLCJwbHVnaW4iLCJyZXF1aXJlIiwiZXhlY3V0ZSIsInBheWxvYWQiLCJhY3Rpb25UeXBlIiwicGx1Z2luTmFtZSIsImNvbW1hbmQiLCJvdXRib3VuZExpbmsiLCJoaXRDYWxsYmFjayIsInNhZmV0eUNhbGxiYWNrQ2FsbGVkIiwic2FmZXR5Q2FsbGJhY2siLCJ0IiwiY2xlYXJhYmxlQ2FsbGJhY2tGb3JHQSIsIm9yaWdUcmFja0xpbmsiLCJpbmZvIiwibWlnaHRCZUVtYWlsIiwiX3JlZGFjdGVkIiwidG9UaXRsZUNhc2UiLCJzdWJzdHJpbmciLCJzbWFsbFdvcmRzIiwic2VhcmNoIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJnZXRQYXJlbnRFbGVtZW50IiwicGFyZW50U2VsZWN0b3IiLCJSZWFjdERPTSIsIk1vZGFsUG9ydGFsIiwiY3JlYXRlRmFjdG9yeSIsImFyaWFBcHBIaWRlciIsImVsZW1lbnRDbGFzcyIsInJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyIiwidW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIiLCJBc3NpZ24iLCJTYWZlSFRNTEVsZW1lbnQiLCJIVE1MRWxlbWVudCIsIkFwcEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsIk1vZGFsIiwic2V0QXBwRWxlbWVudCIsInNldEVsZW1lbnQiLCJpbmplY3RDU1MiLCJib29sIiwic2hhcGUiLCJvdmVybGF5IiwicG9ydGFsQ2xhc3NOYW1lIiwiYXBwRWxlbWVudCIsImluc3RhbmNlT2YiLCJvbkFmdGVyT3BlbiIsIm51bWJlciIsImFyaWFIaWRlQXBwIiwic2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljayIsInJvbGUiLCJnZXREZWZhdWx0UHJvcHMiLCJjb21wb25lbnREaWRNb3VudCIsIm5vZGUiLCJwYXJlbnQiLCJyZW5kZXJQb3J0YWwiLCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwibmV3UHJvcHMiLCJjdXJyZW50UGFyZW50IiwibmV3UGFyZW50IiwicmVtb3ZlQ2hpbGQiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInNob3ciLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlIiwicG9ydGFsIiwiZGVmYXVsdFN0eWxlcyIsIkRPTSIsIm5vc2NyaXB0IiwicG9zaXRpb24iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImJhY2tncm91bmRDb2xvciIsImJvcmRlciIsImJhY2tncm91bmQiLCJvdmVyZmxvdyIsIldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nIiwiYm9yZGVyUmFkaXVzIiwib3V0bGluZSIsInBhZGRpbmciLCJkaXYiLCJmb2N1c01hbmFnZXIiLCJzY29wZVRhYiIsIkNMQVNTX05BTUVTIiwiYmFzZSIsImFmdGVyT3BlbiIsImJlZm9yZUNsb3NlIiwic2hvdWxkQ2xvc2UiLCJnZXRJbml0aWFsU3RhdGUiLCJzZXRGb2N1c0FmdGVyUmVuZGVyIiwiY2xvc2VUaW1lciIsImNsb3NlIiwiY29tcG9uZW50RGlkVXBkYXRlIiwiZm9jdXNBZnRlclJlbmRlciIsImZvY3VzQ29udGVudCIsImZvY3VzIiwic2V0dXBTY29wZWRGb2N1cyIsIm1hcmtGb3JGb2N1c0xhdGVyIiwiY2xvc2VXaXRoVGltZW91dCIsImNsb3NlV2l0aG91dFRpbWVvdXQiLCJjb250ZW50SGFzRm9jdXMiLCJyZWZzIiwiYWZ0ZXJDbG9zZSIsInJldHVybkZvY3VzIiwidGVhcmRvd25TY29wZWRGb2N1cyIsImhhbmRsZUtleURvd24iLCJrZXlDb2RlIiwicmVxdWVzdENsb3NlIiwiaGFuZGxlT3ZlcmxheU1vdXNlRG93biIsImhhbmRsZU92ZXJsYXlNb3VzZVVwIiwib3duZXJIYW5kbGVzQ2xvc2UiLCJoYW5kbGVDb250ZW50TW91c2VEb3duIiwiaGFuZGxlQ29udGVudE1vdXNlVXAiLCJzaG91bGRCZUNsb3NlZCIsImFjdGl2ZUVsZW1lbnQiLCJjb250YWlucyIsImJ1aWxkQ2xhc3NOYW1lIiwid2hpY2giLCJhZGRpdGlvbmFsIiwiY29udGVudFN0eWxlcyIsIm92ZXJsYXlTdHlsZXMiLCJyZWYiLCJvdmVybGF5Q2xhc3NOYW1lIiwib25Nb3VzZURvd24iLCJvbk1vdXNlVXAiLCJvbktleURvd24iLCJhcmlhLWxhYmVsIiwiX2VsZW1lbnQiLCJoaWRlIiwidmFsaWRhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic2hvdWxkSGlkZSIsInJlc2V0Rm9yVGVzdGluZyIsImhhbmRsZUJsdXIiLCJuZWVkVG9Gb2N1cyIsImhhbmRsZUZvY3VzIiwibW9kYWxFbGVtZW50IiwiZmluZFRhYmJhYmxlIiwiZm9jdXNMYXRlckVsZW1lbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJmaW5hbFRhYmJhYmxlIiwic2hpZnRLZXkiLCJsZWF2aW5nRmluYWxUYWJiYWJsZSIsImVucXVpcmUiLCJSZXNwb25zaXZlTWl4aW4iLCJtZWRpYSIsImhhbmRsZXIiLCJyZWdpc3RlciIsIl9yZXNwb25zaXZlTWVkaWFIYW5kbGVycyIsInVucmVnaXN0ZXIiLCJOZXh0QXJyb3ciLCJQcmV2QXJyb3ciLCJfY2xhc3NuYW1lcyIsIl9jbGFzc25hbWVzMiIsIl9oZWxwZXJzIiwiX2hlbHBlcnMyIiwiY2xpY2tIYW5kbGVyIiwicHJldkNsYXNzZXMiLCJzbGljay1hcnJvdyIsInNsaWNrLXByZXYiLCJwcmV2SGFuZGxlciIsIm1lc3NhZ2UiLCJwcmV2QXJyb3dQcm9wcyIsImRhdGEtcm9sZSIsImNsb25lRWxlbWVudCIsIm5leHRDbGFzc2VzIiwic2xpY2stbmV4dCIsIm5leHRIYW5kbGVyIiwibmV4dEFycm93UHJvcHMiLCJEb3RzIiwiZ2V0RG90Q291bnQiLCJjZWlsIiwiZG90Q291bnQiLCJsZWZ0Qm91bmQiLCJyaWdodEJvdW5kIiwic2xpY2stYWN0aXZlIiwiZG90T3B0aW9ucyIsImRyYWdnaW5nIiwiY3VycmVudERpcmVjdGlvbiIsImRpcmVjdGlvbiIsImluaXRpYWxpemVkIiwiZWRnZURyYWdnZWQiLCJzd2lwZWQiLCJJbm5lclNsaWRlciIsIl9ldmVudEhhbmRsZXJzIiwiX2V2ZW50SGFuZGxlcnMyIiwiX2luaXRpYWxTdGF0ZSIsIl9pbml0aWFsU3RhdGUyIiwiX2RlZmF1bHRQcm9wcyIsIl9kZWZhdWx0UHJvcHMyIiwiX3RyYWNrIiwiX2RvdHMiLCJfYXJyb3dzIiwibWl4aW5zIiwibGlzdFJlZkhhbmRsZXIiLCJ0cmFja1JlZkhhbmRsZXIiLCJjb21wb25lbnRXaWxsTW91bnQiLCJvbldpbmRvd1Jlc2l6ZWQiLCJjbGVhckludGVydmFsIiwibmV4dFByb3BzIiwic2xpY2tHb1RvIiwiY2hhbmdlU2xpZGUiLCJzbGlja1ByZXYiLCJzbGlja05leHQiLCJzbGljay12ZXJ0aWNhbCIsInRyYWNrUHJvcHMiLCJzZWxlY3RIYW5kbGVyIiwiZG90UHJvcHMiLCJhcnJvd1Byb3BzIiwidmVydGljYWxIZWlnaHRTdHlsZSIsImNlbnRlclBhZGRpbmdTdHlsZSIsImxpc3RTdHlsZSIsIm9uTW91c2VFbnRlciIsIm9uSW5uZXJTbGlkZXJFbnRlciIsIm9uTW91c2VMZWF2ZSIsIm9uSW5uZXJTbGlkZXJMZWF2ZSIsIm9uTW91c2VPdmVyIiwib25Jbm5lclNsaWRlck92ZXIiLCJzd2lwZVN0YXJ0Iiwib25Nb3VzZU1vdmUiLCJzd2lwZU1vdmUiLCJzd2lwZUVuZCIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsIm9uVG91Y2hDYW5jZWwiLCJrZXlIYW5kbGVyIiwiVHJhY2siLCJFdmVudEhhbmRsZXJzIiwiaW5kZXhPZmZzZXQiLCJwcmV2aW91c0ludCIsInVuZXZlbk9mZnNldCIsIl9zdGF0ZSIsInRhZ05hbWUiLCJwb3NYIiwicG9zWSIsInRvdWNoZXMiLCJwYWdlWCIsImNsaWVudFgiLCJwYWdlWSIsImNsaWVudFkiLCJjdXJMZWZ0IiwicG9zaXRpb25PZmZzZXQiLCJzd2lwZUxlbmd0aCIsInNxcnQiLCJ0b3VjaFN3aXBlTGVuZ3RoIiwiZ2V0TmF2aWdhYmxlSW5kZXhlcyIsImJyZWFrUG9pbnQiLCJjb3VudGVyIiwiaW5kZXhlcyIsImNoZWNrTmF2aWdhYmxlIiwibmF2aWdhYmxlcyIsInByZXZOYXZpZ2FibGUiLCJnZXRTbGlkZUNvdW50IiwiY2VudGVyT2Zmc2V0Iiwic3dpcGVkU2xpZGUiLCJzbGlkZXMiLCJldmVyeSIsIm9mZnNldFRvcCIsInNsaWRlc1RyYXZlcnNlZCIsImRhdGFzZXQiLCJtaW5Td2lwZSIsIm5ld1NsaWRlIiwiX2lubmVyU2xpZGVyIiwiX2pzb24ybXEiLCJfanNvbjJtcTIiLCJfcmVhY3RSZXNwb25zaXZlTWl4aW4iLCJfcmVhY3RSZXNwb25zaXZlTWl4aW4yIiwiU2xpZGVyIiwiaW5uZXJTbGlkZXIiLCJpbm5lclNsaWRlclJlZkhhbmRsZXIiLCJicmVha3BvaW50cyIsImJyZWFrcHQiLCJzb3J0IiwiYlF1ZXJ5IiwibWluV2lkdGgiLCJtYXhXaWR0aCIsInJlc3AiLCJjaGlsZCIsImdldFNsaWRlQ2xhc3NlcyIsInNsaWNrQWN0aXZlIiwic2xpY2tDZW50ZXIiLCJzbGlja0Nsb25lZCIsInNsaWNrLXNsaWRlIiwic2xpY2stY2VudGVyIiwic2xpY2stY2xvbmVkIiwiZ2V0U2xpZGVTdHlsZSIsImdldEtleSIsImZhbGxiYWNrS2V5IiwicmVuZGVyU2xpZGVzIiwicHJlQ2xvbmVTbGlkZXMiLCJwb3N0Q2xvbmVTbGlkZXMiLCJjaGlsZE9uQ2xpY2tPcHRpb25zIiwiY3NzQ2xhc3NlcyIsImNoaWxkU3R5bGUiLCJzbGlja0NsYXNzZXMiLCJkYXRhLWluZGV4IiwiaW5maW5pdGVDb3VudCIsInJldmVyc2UiLCJjcmVhdGVUaHVua01pZGRsZXdhcmUiLCJleHRyYUFyZ3VtZW50IiwiX3JlZiIsIm5leHQiLCJ0aHVuayIsIndpdGhFeHRyYUFyZ3VtZW50IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyMiIsIndyYXAiLCJzdXBlckZ1bmMiLCJzdXBlcldyYXBwZXIiLCJvcmlnaW5hbFN1cGVyIiwid3JhcHBlZEZ1bmN0aW9uIiwibmFtZXMiLCJkZXN0aW5hdGlvbiIsInBhcmVudFByb3RvIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwicGFyZW50RGVzY3JpcHRvciIsImluc3RhbmNlUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5TmFtZXMiLCJpbmNsdWRlcyQxIiwiYXNzaWduJDEiLCJzdGF0aWNQcm9wZXJ0eU5hbWVzIiwid3JhcENvbnNvbGUiLCJsb2dDb21tYW5kIiwibG9nTWV0aG9kIiwiRnVuY3Rpb24iLCJ1bnNoaWZ0IiwiYXV0aFRvVXJsIiwidXJsIiwiYXV0aG9yaXphdGlvbiIsImhlYWRlcnMiLCJoYXNoZWRLZXkiLCJwbGFpbktleSIsImF0b2IiLCJuZXdVcmwiLCJpZTlBamF4IiwibWV0aG9kIiwiaGFuZGxlRXJyb3IiLCJ4ZHIiLCJYRG9tYWluUmVxdWVzdCIsIm9ubG9hZCIsImpzb24iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsIm9yaWdpbmFsUmVzcG9uc2UiLCJpc0pTT04iLCJ0ZXh0IiwiaXNUZXh0Iiwib25lcnJvciIsIm9udGltZW91dCIsImlzTm9kZUxpa2VFbnZpcm9ubWVudCIsIndpbmRvd0Fic2VudCIsInJlcXVpcmVQcmVzZW50IiwiY2hlY2tTdGF0dXMiLCJyZXNwb25zZSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJwYXJzZVJlc3BvbnNlIiwicmVzcG9uc2VDbG9uZSIsImNsb25lIiwiYWpheCIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwibW9kZSIsImZldGNoIiwidXVpZCIsInV1aWRTZWVkIiwic2V0R3VpZEZvciIsIkdVSURfS0VZIiwiX3R5cGVvZiIsIm51bWJlckNhY2hlIiwic3RyaW5nQ2FjaGUiLCJHVUlEX1BSRUZJWCIsIkdVSURfREVTQyIsImdsb2JhbE5hbWVzcGFjZSIsImdldCIsIm9iamVjdHNFcXVhbCIsIm9uZSIsInR3byIsImZldGNoRmFjdG9yeSIsImZldGNoVHlwZSIsImZldGNoQWxsIiwiZmV0Y2hRdWVyeSIsIml0ZXJhdG9yIiwicHJvcGVydHlPYmplY3RzIiwibmV4dEtleSIsInNlYXJjaEVsZW1lbnQiLCJPYmplY3RpZmllZEFycmF5Iiwic3RhcnRJbmRleCIsImN1cnJlbnRFbGVtZW50IiwiQ29yZU9iamVjdCIsInN0YXRpYyIsImV4dGVuZCIsInN1YkNsYXNzUHJvcHMiLCJMb2dnZXIiLCJsb2dnZXIiLCJDb25maWciLCJkZXByZWNhdGVkUHJvcGVydGllcyIsInRyYW5zZm9ybU5hbWUiLCJyZXF1aXJlZFByb3BlcnRpZXMiLCJvcHRpb25hbFByb3BlcnRpZXMiLCJteVNob3BpZnlEb21haW4iLCJ0cmFuc2Zvcm1NeVNob3BpZnlEb21haW4iLCJzdWJkb21haW4iLCJhamF4SGVhZGVycyIsInZlcnNpb24iLCJCYXNlTW9kZWwiLCJtZXRhQXR0cnMiLCJzZXJpYWxpemVyIiwiYWRhcHRlciIsInNob3BDbGllbnQiLCJQcm9kdWN0T3B0aW9uTW9kZWwiLCJfc2VsZWN0ZWQiLCJ2YXJpYW50cyIsImRpbWVuc2lvbiIsIkltYWdlTW9kZWwiLCJleHRlbnNpb25JbmRleCIsInBhdGhBbmRCYXNlbmFtZSIsImV4dGVuc2lvbiIsIlByb2R1Y3RWYXJpYW50TW9kZWwiLCJjb25maWciLCJiYXNlVXJsIiwidmFyaWFudFBhdGgiLCJwcm9kdWN0VGl0bGUiLCJjb21wYXJlQXRQcmljZSIsImNvbXBhcmVfYXRfcHJpY2UiLCJmb3JtYXR0ZWRQcmljZSIsImZvcm1hdHRlZF9wcmljZSIsImdyYW1zIiwib3B0aW9uVmFsdWVzIiwib3B0aW9uX3ZhbHVlcyIsImF2YWlsYWJsZSIsInByaW1hcnlJbWFnZSIsInZhcmlhbnRJbWFnZSIsInZhcmlhbnRfaWRzIiwidW5pcSIsInVuaXF1ZUFycmF5IiwiTk9fSU1BR0VfVVJJIiwiUHJvZHVjdE1vZGVsIiwiYm9keV9odG1sIiwibWVtb2l6ZWQiLCJfbWVtb2l6ZWQiLCJiYXNlT3B0aW9ucyIsInZhcmlhbnRzJCQxIiwiZHVwZWRWYWx1ZXMiLCJ2YWx1ZUxpc3QiLCJvcHRpb25WYWx1ZUZvck9wdGlvbiIsIm9wdGlvblZhbHVlIiwic2VsZWN0aW9ucyIsInZhcmlhbnRUaXRsZSIsIkxpc3RpbmdzU2VyaWFsaXplciIsInJvb3RLZXlGb3JUeXBlIiwibW9kZWxzIiwibW9kZWxGb3JUeXBlIiwiZGVzZXJpYWxpemVTaW5nbGUiLCJzaW5nbGVQYXlsb2FkIiwibW9kZWxBdHRycyIsIm1vZGVsIiwibW9kZWxGcm9tQXR0cnMiLCJkZXNlcmlhbGl6ZU11bHRpcGxlIiwiX3RoaXM0IiwiY29sbGVjdGlvblBheWxvYWQiLCJNb2RlbCIsIkxpc3RpbmdzQWRhcHRlciIsInBhdGhGb3JUeXBlIiwiYnVpbGRVcmwiLCJzaW5nbGVPck11bHRpcGxlIiwiaWRPclF1ZXJ5IiwiYnVpbGRNdWx0aXBsZVVybCIsImJ1aWxkU2luZ2xlVXJsIiwicGFyYW1OYW1lcyIsInF1ZXJ5U3RyaW5nIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZmV0Y2hNdWx0aXBsZSIsImZldGNoU2luZ2xlIiwiYmFzZTY0QXBpS2V5IiwiYnRvYSIsIl9jb25maWciLCJBdXRob3JpemF0aW9uIiwiQ29udGVudC1UeXBlIiwiWC1TREstVmFyaWFudCIsIlgtU0RLLVZlcnNpb24iLCJDYXJ0TGluZUl0ZW1Nb2RlbCIsInBhcnNlZFZhbHVlIiwicHJvcGVydGllcyIsImxpbmVfcHJpY2UiLCJub3ciLCJnbG9iYWxWYXJzIiwiQ2FydE1vZGVsIiwiYWRkVmFyaWFudHMiLCJuZXdMaW5lSXRlbXMiLCJpbWFnZV92YXJpYW50cyIsImV4aXN0aW5nTGluZUl0ZW1zIiwibGluZV9pdGVtcyIsImRlZHVwZWRMaW5lSXRlbXMiLCJpdGVtQWNjIiwibWF0Y2hpbmdJdGVtIiwiZXhpc3RpbmdJdGVtIiwidXBkYXRlTW9kZWwiLCJyZW1vdmVMaW5lSXRlbSIsIm9sZExlbmd0aCIsIm5ld0xlbmd0aCIsImNsZWFyTGluZUl0ZW1zIiwiX3RoaXM1IiwidXBkYXRlQ2FydCIsInRvdGFsIiwicnVubmluZ1RvdGFsIiwibGlua2VyUGFyYW0iLCJ0cmFja2VyIiwiQ2FydFNlcmlhbGl6ZXIiLCJzZXJpYWxpemUiLCJyb290IiwiYXR0cmlidXRlcyIsIlJlZmVyZW5jZU1vZGVsIiwicmVmZXJlbmNlSWQiLCJSZWZlcmVuY2VTZXJpYWxpemVyIiwiU3RvcmUiLCJsb2NhbFN0b3JhZ2VBdmFpbGFibGUiLCJzdG9yYWdlQXZhaWxhYmxlIiwiY2FjaGUiLCJzdHJpbmdWYWx1ZSIsInN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiTG9jYWxTdG9yYWdlQWRhcHRlciIsImlkS2V5Rm9yVHlwZSIsIl90aGlzNiIsInN0b3JhZ2VLZXkiLCJfdGhpczciLCJpZGVudGlmeSIsIl90aGlzOCIsIlNob3BDbGllbnQiLCJzZXJpYWxpemVycyIsImNhcnRzIiwicmVmZXJlbmNlcyIsImFkYXB0ZXJzIiwiX3RoaXM5IiwiZGVzZXJpYWxpemUiLCJtdWx0aXBsZSIsIl90aGlzMTAiLCJzaW5nbGUiLCJfdGhpczExIiwiX3RoaXMxMiIsInVwZGF0ZWRNb2RlbCIsIl90aGlzMTMiLCJzZXJpYWxpemVkTW9kZWwiLCJleGlzdGluZ1NlcmlhbGl6ZXIiLCJzZXJpYWxpemVkUGF5bG9hZCIsInVzZXJBdHRycyIsImJhc2VBdHRycyIsImZldGNoUXVlcnlQcm9kdWN0cyIsImZldGNoUXVlcnlDb2xsZWN0aW9ucyIsImZldGNoUmVjZW50Q2FydCIsIl90aGlzMTQiLCJyZWZlcmVuY2UiLCJjYXJ0SWQiLCJyZWZBdHRycyIsInNoYWRvd2VkU2VyaWFsaXplcnMiLCJzaGFkb3dlZEFkYXB0ZXJzIiwiX2ZldGNoIiwiUmVzcG9uc2UiLCJTaG9waWZ5IiwiY29uZmlnQXR0cnMiLCJfcmVhY3RSZWR1eCIsIl9yb3V0ZXIiLCJfcm91dGVyMiIsImNvbGxlY3Rpb25BY3Rpb25zIiwic3Vic2NyaWJlIiwicmVzdG9yZUNhcnQiLCJQcm92aWRlciIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxFQUFFLElBQ1QsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQyxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBRUYsU0FBVUMsRUFBUUMsRUFBU0MsR0FFakMsWUFZQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQVR2RkcsT0FBT0MsZUFBZVAsRUFBUyxjQUM3QlEsT0FBTyxJQUVUUixFQUFRUyxVQUFZVCxFQUFRVSxTQUFXVixFQUFRVyxlQUFpQlgsRUFBUVkscUJBQXVCWixFQUFRYSxtQkFBcUJiLEVBQVFjLFVBQVlkLEVBQVFlLHlCQUEyQkMsTUN6Qm5MLElBQUFDLEdBQUFoQixFQUFBLElENkJJaUIsRUFBZWhCLEVBQXVCZSxHQ1cvQkgsR0F0Q0FDLDJCQUEyQixTQUFDSSxFQUFnQkMsR0FDckQsTUFBTyxVQUFDQyxFQUFVQyxHQWNoQixRQUFTQyxHQUF3QkMsR0FDL0IsTUFBT0MsR0FBS0MsVUFBVUMsT0FBTyxTQUFDQyxHQUc1QixNQUFRQSxHQUFLQyxhQUFlTCxJQUMzQixHQWxCTCxHQUFJQyxHQUFPSCxJQUFXRyxLQUNsQkQsUUFJRkEsR0FEQ0wsRUFBZVUsV0FDSlYsRUFBZVUsV0FFZlYsRUFBZVcsRUFHN0IsSUFBSUMsR0FBZVIsRUFBd0JDLEVBWXpDSCxHQURFVSxFQUNPcEIsRUFBZW9CLEVBQWNDLFNBQVNaLElBRXRDTixFQUFVSyxFQUFnQkMsSUFJckNDLEVBQVNSLEtBR1RRLEVBQVNULEVBQXFCUSxNQUt2Qk4sWUFBWSxTQUFDSyxFQUFnQkMsR0FDdEMsTUFBTyxVQUFDQyxFQUFVQyxHQUNoQkosRUFBQWIsUUFBV29CLEtBQUtRLDZCQUE4QkMsUUFBU2YsRUFBZ0JDLFNBQVVBLElBQVllLEtBQUssU0FBU0MsR0FDekcsR0FBSUMsR0FBbUJELEVBQVlWLFNBQ25DTCxJQUFXaUIsS0FBTSxvQkFBcUJELHFCQUN0Q2hCLEVBQVNYLE9BQ1I2QixNQUFNLFNBQVVDLEdBQ2pCQyxRQUFRQyxJQUFJLHNCQUF1QkYsUUFNOUIzQix1QkFBcUIsV0FDOUIsTUFBTyxVQUFDUSxFQUFVQyxHQUNoQixHQUFJcUIsR0FBY3pCLEVBQUFiLFFBQVdvQixLQUFLbUIsUUFDbEN2QixJQUFXaUIsS0FBTSx1QkFBd0JLLGtCQUtsQy9CLHlCQUF1QixTQUFDUSxHQUNqQyxNQUFPLFVBQUNDLEVBQVVDLEdBQ2hCLEdBQUlHLEdBQU9ILElBQVdHLEtBQ2xCb0IsRUFBd0JiLFNBQVNQLEVBQUtxQixnQkFBa0JkLFNBQVNaLEVBQ3JFcUIsU0FBUUMsSUFBSSxpQkFBa0J0QixHQUM5QnFCLFFBQVFDLElBQUksaUJBQWtCakIsRUFBS3FCLGdCQUNuQ0wsUUFBUUMsSUFBSSwwQkFBMkJHLEdBQ3ZDeEIsR0FBV2lCLEtBQU0sMEJBQTJCTywwQkFHMUN4QixFQURDVyxTQUFTYSxHQUF5QixFQUMxQnBDLElBRUFDLE9BTUpDLG1CQUFpQixTQUFDb0MsRUFBa0IzQixHQUM3QyxNQUFPLFVBQUNDLEVBQVVDLEdBQ2hCLEdBQUlHLEdBQU9ILElBQVdHLEtBQ2xCdUIsRUFBa0JELEVBQWlCM0IsU0FBV0EsRUFDOUNpQixJQUdKWixHQUFLQyxVQUFVdUIsUUFBUSxTQUFDQyxHQUN0QixHQUFJSCxFQUFpQmpCLEtBQU9vQixFQUFTcEIsSUFDbkMsR0FBSWtCLEVBQWtCLEVBQUcsQ0FDdkIsR0FBSUcsS0FHSkEsR0FBa0JELEVBR2xCQyxFQUFnQi9CLFNBQVc0QixFQUczQlgsRUFBaUJlLEtBQUtELFFBSXhCZCxHQUFpQmUsS0FBS0YsS0FLMUJoQyxFQUFBYixRQUFXb0IsS0FBSzRCLGVBQWVOLEVBQWlCakIsR0FBSWtCLEdBQWlCYixLQUFLLFdBRXhFZCxHQUFXaUIsS0FBTSxvQkFBcUJELHlCQU1qQzNCLGFBQVcsV0FDcEIsT0FDRTRCLEtBQU0sY0FLQzdCLGNBQVksV0FDckIsT0FDRTZCLEtBQU0sZ0JEb0NGLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FFRixTQUFVdkMsRUFBUUMsRUFBU0MsR0FFakMsWUFTQSxTQUFTcUQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FOaEhuRCxPQUFPQyxlQUFlUCxFQUFTLGNBQzdCUSxPQUFPLEdBR1QsSUFBSWtELEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTUVqTDVoQmdCLEdBRFF2RSxFQUFRLEdBQ0hBLEVBQVEsTUFHbkJ3RSxHQUZNeEUsRUFBUSxJQUFrQnlFLFlGd0xyQixXRXJMZixRQUFBRCxLQUFjbkIsRUFBQXFCLEtBQUFGLEdBQ1pFLEtBQUtDLE9BQVNKLEVBQVdLLGFBQ3ZCQyxPQUFRLG1DQUNSQyxPQUFRLDRCQUNSQyxNQUFPLE1BRVRMLEtBQUtsRCxRRnlPUCxNQTlDQWlDLEdBQWFlLElBQ1hMLElBQUssYUFDTDVELE1BQU8sV0UxTEksR0FBQXlFLEdBQUFOLElBQ1gsT0FBTyxJQUFJTyxTQUFRLFNBQUNDLEVBQVNDLEdBQzNCSCxFQUFLTCxPQUFPUyxhQUFhbEQsS0FBSyxTQUFDbUQsR0FDN0JDLGFBQWFDLFFBQVEsYUFBY0YsRUFBUXhELElBQzNDVyxRQUFRQyxJQUFJLG1CQUFvQjRDLEdBRWhDTCxFQUFLeEQsS0FBTzZELENBR1osSUFBSUcsSUFDRkMsUUFBUSxFQUNSNUMsZUFBZ0IsRUFDaEJwQixhQUNBa0IsU0FBVSxFQUVadUMsR0FBUU0sVUZpTVpyQixJQUFLLGNBQ0w1RCxNQUFPLFdFN0xLLEdBQUFtRixHQUFBaEIsSUFDWixPQUFPLElBQUlPLFNBQVEsU0FBQ0MsRUFBU0MsR0FDM0JPLEVBQUtmLE9BQU9nQixVQUFVTCxhQUFhTSxRQUFRLGVBQWUxRCxLQUFLLFNBQUMyRCxHQUU5REgsRUFBS2xFLEtBQU9xRSxDQUdaLElBQUlMLElBQ0ZDLFFBQVEsRUFDUjVDLGVBQWdCZ0QsRUFBV0MsY0FDM0JyRSxVQUFXb0UsRUFBV3BFLFVBQ3RCa0IsU0FBVWtELEVBQVdsRCxTQUV2QnVDLEdBQVFNLFdGcU1QaEIsS0FHVHpFLEdBQVFLLFFFbE1RLEdBQUlvRSxJRnFNWixDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUVGLFNBQVUxRSxFQUFRQyxFQUFTQyxHR3hRakMsR0FBQStGLEdBQUFDOzs7OztDQU9BLFdBQ0EsWUFJQSxTQUFBQyxLQUdBLE9BRkFDLE1BRUFyQyxFQUFBLEVBQWlCQSxFQUFBc0MsVUFBQXJDLE9BQXNCRCxJQUFBLENBQ3ZDLEdBQUF1QyxHQUFBRCxVQUFBdEMsRUFDQSxJQUFBdUMsRUFBQSxDQUVBLEdBQUFDLFNBQUFELEVBRUEsZUFBQUMsR0FBQSxXQUFBQSxFQUNBSCxFQUFBL0MsS0FBQWlELE9BQ0ksSUFBQUUsTUFBQUMsUUFBQUgsR0FDSkYsRUFBQS9DLEtBQUE4QyxFQUFBTyxNQUFBLEtBQUFKLFFBQ0ksZUFBQUMsRUFDSixPQUFBbEMsS0FBQWlDLEdBQ0FLLEVBQUFDLEtBQUFOLEVBQUFqQyxJQUFBaUMsRUFBQWpDLElBQ0ErQixFQUFBL0MsS0FBQWdCLElBTUEsTUFBQStCLEdBQUFTLEtBQUEsS0F4QkEsR0FBQUYsTUFBZ0JHLGNBMkJoQixvQkFBQTlHLE1BQUFDLFFBQ0FELEVBQUFDLFFBQUFrRyxHQUdBRixLQUFBQyxFQUFBLFdBQ0EsTUFBQUMsSUFDR08sTUFBQXpHLEVBQUFnRyxLQUFBaEYsU0FBQWlGLElBQUFsRyxFQUFBQyxRQUFBaUcsU0htUkssQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUVGLFNBQVVsRyxFQUFRQyxFQUFTQyxHQUVqQyxZQWNBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBWHZGRyxPQUFPQyxlQUFlUCxFQUFTLGNBQzdCUSxPQUFPLElBRVRSLEVBQVE4RyxlQUFpQjlHLEVBQVErRyxvQkFBc0IvRyxFQUFRZ0gsb0JBQXNCaEcsTUFFckYsSUFBSWlHLEdBQVczRyxPQUFPNEcsUUFBVSxTQUFVdEQsR0FBVSxJQUFLLEdBQUlFLEdBQUksRUFBR0EsRUFBSXNDLFVBQVVyQyxPQUFRRCxJQUFLLENBQUUsR0FBSXFELEdBQVNmLFVBQVV0QyxFQUFJLEtBQUssR0FBSU0sS0FBTytDLEdBQWM3RyxPQUFPaUUsVUFBVXNDLGVBQWVGLEtBQUtRLEVBQVEvQyxLQUFRUixFQUFPUSxHQUFPK0MsRUFBTy9DLElBQVksTUFBT1IsSUlqVnZQM0MsRUFBQWhCLEVBQUEsSUpxVklpQixFQUFlaEIsRUFBdUJlLEdJdFQvQjZGLEdBN0JBRSxzQkFBc0IsU0FBQ2xGLEdBQ2hDLE1BQU8sVUFBQ1QsR0FDTixNQUFPSCxHQUFBYixRQUFXdUUsT0FBT3dDLGdCQUFnQnRGLEdBQUlLLEtBQUssU0FBQ2tGLEdBQ2pELEdBQUlDLEdBQWFELE1BQ2JFLE9BQXVCRCxFQUMzQmpHLElBQVdpQixLQUFNLHdCQUF5QmlGLHlCQU1yQ1Isc0JBQXNCLFdBQy9CLE1BQU8sVUFBQzFGLEdBQ04sTUFBT0gsR0FBQWIsUUFBV3VFLE9BQU80QyxzQkFBc0JyRixLQUFLLFNBQUNrRixHQUNuRCxHQUFJSSxHQUFjSixNQUNkSyxJQUVKcEgsUUFBT3FILEtBQUtGLEdBQWF4RSxRQUFRLFNBQUMyRSxHQUNoQ0YsRUFBa0J0RSxLQUFsQjZELEdBQ0U3QyxJQUFLd0QsR0FDRkgsRUFBWUcsT0FJbkJ2RyxFQUFTeUYsRUFBZVksUUFLbkJaLGlCQUFpQixTQUFDVyxHQUMzQixPQUNFbkYsS0FBTSxrQkFDTm1GLGtCSjRWRSxTQUFVMUgsRUFBUUMsRUFBU0MsR0FFakMsWUFZQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQVR2RkcsT0FBT0MsZUFBZVAsRUFBUyxjQUM3QlEsT0FBTyxJQUVUUixFQUFRNkgsMkJBQTZCN0gsRUFBUThILG1CQUFxQjlILEVBQVErSCxpQkFBbUIvSCxFQUFRZ0kscUJBQXVCaEksRUFBUWlJLFlBQWNqSSxFQUFRa0ksaUJBQW1CbEgsTUt0WTdLLElBQUFDLEdBQUFoQixFQUFBLElMMFlJaUIsRUFBZWhCLEVBQXVCZSxHS3RYL0JnSCxHQWpCQUMsbUJBQW1CLFdBQzVCLE1BQU8sVUFBQzdHLEdBQ04sTUFBT0gsR0FBQWIsUUFBV3VFLE9BQU91RCxtQkFBbUJoRyxLQUFLLFNBQUNrRixHQUNoRCxHQUFJZSxHQUFXZixNQUNYZ0IsRUFBaUJELEVBQVNFLElBQUksU0FBQ0MsRUFBU0MsR0FDMUMsR0FBSUMsS0FHSixPQUZBQSxHQUFpQkYsRUFDakJFLEVBQWVyRSxJQUFNb0UsRUFDZEMsR0FHVHBILEdBQVM0RyxFQUFZSSxJQUNyQmhILEVBQVMyRyxTQUtKQyxjQUFjLFNBQUNHLEdBQ3hCLE9BQ0U5RixLQUFNLGVBQ044RixjQUlPSix5QkFBdUIsV0FDaEMsTUFBTyxVQUFDM0csRUFBVUMsR0FDaEIsR0FBSThHLEdBQVc5RyxJQUFXOEcsU0FBU00sSUFDL0JDLElBQ0pQLEdBQVNFLElBQUksU0FBQ0MsRUFBU0MsR0FHckIsTUFGQUcsR0FBT0gsR0FBUyxHQUFJSSxPQUNwQkQsRUFBT0gsR0FBT0ssSUFBTU4sRUFBUU8sZ0JBQWdCQyxjQUFjLEdBQUdGLElBQ3RERixFQUFPSCxNQU9UVCxvQkFBbUIsU0FBQ2lCLEdBQzdCLE9BQ0UxRyxLQUFNLHFCQUNOMEcsWUFLT2xCLHFCQUFxQixXQUM5QixPQUNFeEYsS0FBTSx5QkFLQ3VGLDZCQUE2QixTQUFDbUIsR0FDdkMsT0FDRTFHLEtBQU0sZ0NBQ04wRyxhTGlaRSxTQUFVakosRUFBUUMsRUFBU0MsR0FFakMsWUFrQkEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FFdkYsUUFBUzhJLEdBQXdCOUksR0FBTyxHQUFJQSxHQUFPQSxFQUFJQyxXQUFjLE1BQU9ELEVBQWMsSUFBSStJLEtBQWEsSUFBVyxNQUFQL0ksRUFBZSxJQUFLLEdBQUlpRSxLQUFPakUsR0FBV0csT0FBT2lFLFVBQVVzQyxlQUFlRixLQUFLeEcsRUFBS2lFLEtBQU04RSxFQUFPOUUsR0FBT2pFLEVBQUlpRSxHQUFnQyxPQUF0QjhFLEdBQU83SSxRQUFVRixFQUFZK0ksRUFqQmxRNUksT0FBT0MsZUFBZVAsRUFBUyxjQUM3QlEsT0FBTyxJQUVUUixFQUFRMEUsVUFBWTFELE1NcGRwQixJQUFBbUksR0FBQWxKLEVBQUEsS0FBWW1KLEVOd2RBSCxFQUF3QkUsR012ZHBDRSxFQUFBcEosRUFBQSxLTjJkSXFKLEVBQWVwSixFQUF1Qm1KLEdNemQxQ0UsRUFBQXRKLEVBQUEsSUFFV3lFLGFBQVksV0FBdUIsR0FBdEI4RSxHQUFzQnBELFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLE1BQ3hDcUQsRUFBVUwsRUFBTU0saUJBQ2xCdEIsMkJBQ0FYLGlDQUNBaEcsbUJBQ0FrSSxtQkFHRUMsRUFBUVIsRUFBTVMsWUFBWUosRUFBU0QsRUFBY0osRUFBTVUsUUFDekRWLEVBQU1XLGdCQUFOVCxFQUFBakosU0FDQTJKLE9BQU9DLGtCQUFvQkQsT0FBT0Msb0JBQXNCLFNBQUFDLEdBQUEsTUFBS0EsS0FHL0QsT0FBT04sS05xZUgsU0FBVTdKLEVBQVFDLEVBQVNDLEdBRWpDLFlBWUEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR09uZ0J4RSxRQUFTZ0ssS0FDdEIsTUFBT0MsR0FBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsVUFBU0YsRUFBQS9KLFFBQUFnSyxjQUFBLEtBQUdDLFVBQVUsOENQeWY5Q2hLLE9BQU9DLGVBQWVQLEVBQVMsY0FDN0JRLE9BQU8sSUFFVFIsRUFBUUssUU83ZmdCOEosQ0FGeEIsSUFBQUksR0FBQXRLLEVBQUEsR1BtZ0JJbUssRUFBVWxLLEVBQXVCcUssSUFjL0IsU0FBVXhLLEVBQVFDLEVBQVNDLEdBRWpDLFlBU0EsU0FBU3FELEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBTmhIbkQsT0FBT0MsZUFBZVAsRUFBUyxjQUM3QlEsT0FBTyxHQUdULElBQUlrRCxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU03RCxPQUFPQyxlQUFlcUQsRUFBUUksRUFBV0ksSUFBS0osSUFBaUIsTUFBTyxVQUFVUixFQUFhYSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVYsRUFBaUJILEVBQVllLFVBQVdGLEdBQWlCQyxHQUFhWCxFQUFpQkgsRUFBYWMsR0FBcUJkLE1RMWhCMWhCZ0gsRVI4aEJPLFdRN2hCWCxRQUFBQSxLQUFhbEgsRUFBQXFCLEtBQUE2RixHUmtqQmIsTUFiQTlHLEdBQWE4RyxJQUNYcEcsSUFBSyxVQUNMNUQsTUFBTyxTUW5pQkRpSyxFQUFRQyxFQUFVQyxFQUFtQkMsRUFBa0JDLEdBQzdESCxFQUFXQSxHQUFZLElBQ3ZCQyxFQUFvQkEsR0FBcUIsSUFDekNDLEVBQW1CQSxHQUFvQixJQUN2Q0MsRUFBeUJBLEdBQTBCLEdBQ25ELElBQUlDLEdBQVEsR0FBSUMsUUFBTyx3QkFBeUIsSUFFaEQsT0FBT0wsR0FBV00sV0FBV1AsRUFBUSxJQUFJUSxRQUFRLEdBQzlDQyxRQUFRTCxFQUF3QkQsR0FDaENNLFFBQVFKLEVBQU8sS0FBT0gsR0FDdEJRLGVSb2lCRVgsSUFHVHhLLEdBQVFLLFFRbmlCUSxHQUFJbUssSVJzaUJaLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBRUYsU0FBVXpLLEVBQVFDLEVBQVNDLEdBRWpDLFlTcGtCQSxTQUFBQyxHQUFBQyxHQUFzQyxNQUFBQSxNQUFBQyxXQUFBRCxHQUF1Q0UsUUFBQUYsR0FsQjdFSCxFQUFBSSxZQUFBLENBRUEsSUFBQTZHLEdBQUEzRyxPQUFBNEcsUUFBQSxTQUFBdEQsR0FBbUQsT0FBQUUsR0FBQSxFQUFnQkEsRUFBQXNDLFVBQUFyQyxPQUFzQkQsSUFBQSxDQUFPLEdBQUFxRCxHQUFBZixVQUFBdEMsRUFBMkIsUUFBQU0sS0FBQStDLEdBQTBCN0csT0FBQWlFLFVBQUFzQyxlQUFBRixLQUFBUSxFQUFBL0MsS0FBeURSLEVBQUFRLEdBQUErQyxFQUFBL0MsSUFBaUMsTUFBQVIsSUFFL08yRyxFQUFBdEssRUFBQSxHQUVBbUssRUFBQWxLLEVBQUFxSyxHQUVBYSxFQUFBbkwsRUFBQSxJQUVBb0wsRUFBQW5MLEVBQUFrTCxHQUVBRSxFQUFBckwsRUFBQSxLQUVBc0wsRUFBQXRMLEVBQUEsR0FFQXVMLEVBQUF0TCxFQUFBcUwsR0FJQUUsR0FDQUMsV0FBQSxTQUFBN0gsR0FDQSxHQUtBOEgsR0FMQUMsRUFBQVAsRUFBQWhMLFFBQUF3TCxZQUFBbEgsS0FBQW1ILE1BRUFDLEVBQUEzQixFQUFBL0osUUFBQTJMLFNBQUFDLE1BQUFwSSxFQUFBcUksVUFDQUMsRUFBQXhILEtBQUF5SCxTQUFBUixHQUNBUyxFQUFBMUgsS0FBQXlILFNBQUFmLEVBQUFoTCxRQUFBd0wsWUFBQWxILEtBQUEySCxPQUdBLElBQUF6SSxFQUFBMEksU0FJQVosRUFBQWhILEtBQUF5SCxTQUFBZixFQUFBaEwsUUFBQXdMLFlBQUFsSCxXQUpBLENBQ0EsR0FBQTZILEdBQUEzSSxFQUFBNEksWUFBQSxFQUFBekssU0FBQTZCLEVBQUE2SSxjQUNBZixJQUFBaEgsS0FBQXlILFNBQUFmLEVBQUFoTCxRQUFBd0wsWUFBQWxILE9BQUE2SCxHQUFBM0ksRUFBQThJLGFBS0EsR0FBQUMsR0FBQWpJLEtBQUFrSSxVQUFBakIsRUFBQWtCLGNBQUEscUJBQ0FDLEVBQUFILEVBQUEvSSxFQUFBOEksYUFFQUssRUFBQW5KLEVBQUFvSixJQUFBbEIsRUFBQSxFQUFBbEksRUFBQXFKLGFBQUFySixFQUFBcUosWUFFQXZJLE1BQUF3SSxVQUNBcEIsYUFDQUosYUFDQVEsWUFDQUUsYUFDQVcsZUFDQUosY0FDQUcsY0FDSyxXQUVMLEdBQUFLLElBQUEsRUFBQTlCLEVBQUErQixlQUFBLEVBQUE3QixFQUFBbkwsVUFDQWlOLFdBQUEzSSxLQUFBNEksTUFBQVAsYUFDQVEsU0FBQTdJLEtBQUEySCxPQUNPekksRUFBQWMsS0FBQTRJLFFBRVBFLEdBQUEsRUFBQW5DLEVBQUFvQyxjQUFBLEVBQUFsQyxFQUFBbkwsVUFBa0ZzTixLQUFBUCxHQUFtQnZKLEVBQUFjLEtBQUE0SSxPQUVyRzVJLE1BQUF3SSxVQUFxQk0sZUFFckI5SSxLQUFBaUosY0FHQUMsT0FBQSxTQUFBaEssR0FDQSxHQU1BOEgsR0FOQUMsRUFBQVAsRUFBQWhMLFFBQUF3TCxZQUFBbEgsS0FBQW1ILE1BR0FDLEVBQUEzQixFQUFBL0osUUFBQTJMLFNBQUFDLE1BQUFwSSxFQUFBcUksVUFDQUMsRUFBQXhILEtBQUF5SCxTQUFBUixHQUNBUyxFQUFBMUgsS0FBQXlILFNBQUFmLEVBQUFoTCxRQUFBd0wsWUFBQWxILEtBQUEySCxPQUdBLElBQUF6SSxFQUFBMEksU0FJQVosRUFBQWhILEtBQUF5SCxTQUFBZixFQUFBaEwsUUFBQXdMLFlBQUFsSCxXQUpBLENBQ0EsR0FBQTZILEdBQUEzSSxFQUFBNEksWUFBQSxFQUFBekssU0FBQTZCLEVBQUE2SSxjQUNBZixJQUFBaEgsS0FBQXlILFNBQUFmLEVBQUFoTCxRQUFBd0wsWUFBQWxILE9BQUE2SCxHQUFBM0ksRUFBQThJLGFBS0EsR0FBQUMsR0FBQWpJLEtBQUFrSSxVQUFBakIsRUFBQWtCLGNBQUEscUJBQ0FDLEVBQUFILEVBQUEvSSxFQUFBOEksWUFHQTlJLEdBQUFpSyxTQUNBbkosS0FBQW9KLFFBRUFwSixLQUFBaUosV0FHQWpKLEtBQUF3SSxVQUNBcEIsYUFDQUosYUFDQVEsWUFDQUUsYUFDQU8sY0FDQUcsY0FDSyxXQUVMLEdBQUFLLElBQUEsRUFBQTlCLEVBQUErQixlQUFBLEVBQUE3QixFQUFBbkwsVUFDQWlOLFdBQUEzSSxLQUFBNEksTUFBQVAsYUFDQVEsU0FBQTdJLEtBQUEySCxPQUNPekksRUFBQWMsS0FBQTRJLFFBRVBFLEdBQUEsRUFBQW5DLEVBQUFvQyxjQUFBLEVBQUFsQyxFQUFBbkwsVUFBa0ZzTixLQUFBUCxHQUFtQnZKLEVBQUFjLEtBQUE0SSxPQUVyRzVJLE1BQUF3SSxVQUFxQk0sa0JBR3JCckIsU0FBQSxTQUFBNEIsR0FDQSxNQUFBQSxHQUFBQyx3QkFBQUMsT0FBQUYsRUFBQUcsYUFBQSxHQUVBdEIsVUFBQSxTQUFBbUIsR0FDQSxNQUFBQSxHQUFBQyx3QkFBQUcsUUFBQUosRUFBQUssY0FBQSxHQUdBQyxZQUFBLFdBQ0EsR0FBQTNKLEtBQUFkLE1BQUEwSyxlQUFBLENBQ0EsR0FBQUMsR0FBQSxnQkFBQTdKLEtBQUE0SSxNQUFBUCxhQUFBLElBQ0EsSUFBQXJJLEtBQUFtSCxLQUFBLENBQ0EsR0FBQUYsR0FBQVAsRUFBQWhMLFFBQUF3TCxZQUFBbEgsS0FBQW1ILEtBQ0FGLEdBQUE2QyxNQUFBTCxPQUFBeEMsRUFBQWtCLGNBQUEwQixHQUFBSCxhQUFBLFFBSUFLLFVBQUEsU0FBQUMsR0FDQSxHQUFBQyxJQUFBLENBY0EsT0FiQUQsR0FBQUUsV0FDQUYsRUFBQWxDLFdBRUFrQyxFQUFBM0IsY0FBQTJCLEVBQUE1QyxXQUFBLElBQ0E2QyxHQUFBLElBSUFELEVBQUE1QyxZQUFBNEMsRUFBQWhDLGNBQUFnQyxFQUFBM0IsY0FBQTJCLEVBQUE1QyxXQUFBNEMsRUFBQWhDLGdCQUNBaUMsR0FBQSxJQUlBQSxHQUVBRSxhQUFBLFNBQUF0RyxHQUNBLEdBSUF1RyxHQUFBL0IsRUFDQUksRUFBQTRCLEVBQ0FDLEVBTkFoSyxFQUFBTixJQVFBLEtBQUFBLEtBQUFkLE1BQUFxTCxpQkFBQXZLLEtBQUE0SSxNQUFBNEIsVUFBQSxDQUlBLEdBQUF4SyxLQUFBZCxNQUFBdUwsS0FBQSxDQUlBLEdBSEFwQyxFQUFBckksS0FBQTRJLE1BQUFQLGFBR0FySSxLQUFBZCxNQUFBZ0wsWUFBQSxJQUFBckcsRUFBQSxHQUFBQSxHQUFBN0QsS0FBQTRJLE1BQUF4QixZQUNBLE1Bd0NBLE9BbkNBZ0QsR0FEQXZHLEVBQUEsRUFDQUEsRUFBQTdELEtBQUE0SSxNQUFBeEIsV0FDT3ZELEdBQUE3RCxLQUFBNEksTUFBQXhCLFdBQ1B2RCxFQUFBN0QsS0FBQTRJLE1BQUF4QixXQUVBdkQsRUFHQTdELEtBQUFkLE1BQUF3TCxVQUFBMUssS0FBQTRJLE1BQUErQixlQUFBQyxRQUFBUixHQUFBLEdBQ0FwSyxLQUFBd0ksVUFDQW1DLGVBQUEzSyxLQUFBNEksTUFBQStCLGVBQUFFLE9BQUFULEtBSUFFLEVBQUEsV0FDQWhLLEVBQUFrSSxVQUNBZ0MsV0FBQSxJQUVBbEssRUFBQXBCLE1BQUE0TCxhQUNBeEssRUFBQXBCLE1BQUE0TCxZQUFBVixTQUVBOUosR0FBQXlLLHNCQUdBL0ssS0FBQXdJLFVBQ0FnQyxXQUFBLEVBQ0FuQyxhQUFBK0IsR0FDTyxXQUNQcEssS0FBQStLLHFCQUFBQyxXQUFBVixFQUFBdEssS0FBQWQsTUFBQStMLFNBR0FqTCxLQUFBZCxNQUFBZ00sY0FDQWxMLEtBQUFkLE1BQUFnTSxhQUFBbEwsS0FBQTRJLE1BQUFQLGFBQUErQixPQUdBcEssTUFBQWlKLFdBMkNBLEdBdkNBbUIsRUFBQXZHLEVBR0F3RSxFQUZBK0IsRUFBQSxFQUNBcEssS0FBQWQsTUFBQWdMLFlBQUEsRUFDQSxFQUNPbEssS0FBQTRJLE1BQUF4QixXQUFBcEgsS0FBQWQsTUFBQWlNLGlCQUFBLEVBQ1BuTCxLQUFBNEksTUFBQXhCLFdBQUFwSCxLQUFBNEksTUFBQXhCLFdBQUFwSCxLQUFBZCxNQUFBaU0sZUFFQW5MLEtBQUE0SSxNQUFBeEIsV0FBQWdELEVBRUtBLEdBQUFwSyxLQUFBNEksTUFBQXhCLFdBQ0xwSCxLQUFBZCxNQUFBZ0wsWUFBQSxFQUNBbEssS0FBQTRJLE1BQUF4QixXQUFBcEgsS0FBQWQsTUFBQThJLGFBQ09oSSxLQUFBNEksTUFBQXhCLFdBQUFwSCxLQUFBZCxNQUFBaU0saUJBQUEsRUFDUCxFQUVBZixFQUFBcEssS0FBQTRJLE1BQUF4QixXQUdBZ0QsRUFHQTNCLEdBQUEsRUFBQTlCLEVBQUErQixlQUFBLEVBQUE3QixFQUFBbkwsVUFDQWlOLFdBQUF5QixFQUNBdkIsU0FBQTdJLEtBQUEySCxPQUNLM0gsS0FBQWQsTUFBQWMsS0FBQTRJLFFBRUx5QixHQUFBLEVBQUExRCxFQUFBK0IsZUFBQSxFQUFBN0IsRUFBQW5MLFVBQ0FpTixXQUFBTixFQUNBUSxTQUFBN0ksS0FBQTJILE9BQ0szSCxLQUFBZCxNQUFBYyxLQUFBNEksUUFFTDVJLEtBQUFkLE1BQUFnTCxZQUFBLElBQ0F6QixFQUFBNEIsR0FHQXJLLEtBQUFkLE1BQUFnTSxjQUNBbEwsS0FBQWQsTUFBQWdNLGFBQUFsTCxLQUFBNEksTUFBQVAsZ0JBR0FySSxLQUFBZCxNQUFBd0wsU0FBQSxDQUdBLE9BRkFVLElBQUEsRUFDQUMsS0FDQWxNLEVBQUFpTCxFQUErQmpMLEVBQUFpTCxFQUFBcEssS0FBQWQsTUFBQThJLGFBQTJDN0ksSUFDMUVpTSxLQUFBcEwsS0FBQTRJLE1BQUErQixlQUFBQyxRQUFBekwsSUFBQSxFQUNBaU0sR0FDQUMsRUFBQTVNLEtBQUFVLEVBR0FpTSxJQUNBcEwsS0FBQXdJLFVBQ0FtQyxlQUFBM0ssS0FBQTRJLE1BQUErQixlQUFBRSxPQUFBUSxLQVVBLEdBQUFyTCxLQUFBZCxNQUFBb00sVUFBQSxFQUVBdEwsS0FBQXdJLFVBQ0FILGVBQ0FTLFlBQUEsRUFBQW5DLEVBQUFvQyxjQUFBLEVBQUFsQyxFQUFBbkwsVUFBK0VzTixLQUFBcUIsR0FBb0JySyxLQUFBZCxNQUFBYyxLQUFBNEksU0FDNUYsV0FDUDVJLEtBQUFkLE1BQUE0TCxhQUNBOUssS0FBQWQsTUFBQTRMLFlBQUF6QyxTQUdLLENBRUwsR0FBQWtELElBQ0FmLFdBQUEsRUFDQW5DLGVBQ0FTLFlBQUEsRUFBQW5DLEVBQUFvQyxjQUFBLEVBQUFsQyxFQUFBbkwsVUFBK0VzTixLQUFBcUIsR0FBb0JySyxLQUFBZCxNQUFBYyxLQUFBNEksUUFDbkc0QyxVQUFBLEtBR0FsQixHQUFBLFdBQ0FoSyxFQUFBa0ksU0FBQStDLEdBQ0FqTCxFQUFBcEIsTUFBQTRMLGFBQ0F4SyxFQUFBcEIsTUFBQTRMLFlBQUF6QyxTQUVBL0gsR0FBQXlLLHNCQUdBL0ssS0FBQXdJLFVBQ0FnQyxXQUFBLEVBQ0FuQyxlQUNBUyxZQUFBLEVBQUFuQyxFQUFBOEUscUJBQUEsRUFBQTVFLEVBQUFuTCxVQUFzRnNOLEtBQUFQLEdBQW1CekksS0FBQWQsTUFBQWMsS0FBQTRJLFNBQ2xHLFdBQ1A1SSxLQUFBK0sscUJBQUFDLFdBQUFWLEVBQUF0SyxLQUFBZCxNQUFBK0wsU0FJQWpMLEtBQUFpSixhQUVBeUMsZUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLENBVUEsT0FSQUgsR0FBQUQsRUFBQUssT0FBQUwsRUFBQU0sS0FDQUosRUFBQUYsRUFBQU8sT0FBQVAsRUFBQVEsS0FDQUwsRUFBQU0sS0FBQUMsTUFBQVIsRUFBQUQsR0FFQUcsRUFBQUssS0FBQUUsTUFBQSxJQUFBUixFQUFBTSxLQUFBRyxJQUNBUixFQUFBLElBQ0FBLEVBQUEsSUFBQUssS0FBQUksSUFBQVQsSUFFQUEsR0FBQSxJQUFBQSxHQUFBLEdBQUFBLEdBQUEsS0FBQUEsR0FBQSxJQUNBL0wsS0FBQWQsTUFBQW9KLE9BQUEsaUJBRUF5RCxHQUFBLEtBQUFBLEdBQUEsSUFDQS9MLEtBQUFkLE1BQUFvSixPQUFBLGlCQUVBdEksS0FBQWQsTUFBQXVOLG1CQUFBLEVBQ0FWLEdBQUEsSUFBQUEsR0FBQSxJQUNBLE9BRUEsS0FJQSxZQUVBVyxLQUFBLFdBQ0EsR0FBQUMsRUFFQSxLQUFBM00sS0FBQTRJLE1BQUFnRSxRQUNBLFFBR0EsSUFBQTVNLEtBQUFkLE1BQUFvSixJQUNBcUUsRUFBQTNNLEtBQUE0SSxNQUFBUCxhQUFBckksS0FBQWQsTUFBQWlNLG1CQUNLLENBQ0wsSUFBQW5MLEtBQUErSixVQUFBekgsS0FBb0N0QyxLQUFBZCxNQUFBYyxLQUFBNEksUUFHcEMsUUFGQStELEdBQUEzTSxLQUFBNEksTUFBQVAsYUFBQXJJLEtBQUFkLE1BQUFpTSxlQU1BbkwsS0FBQW1LLGFBQUF3QyxJQUVBMUQsU0FBQSxXQUNBakosS0FBQTRJLE1BQUFpRSxlQUNBQyxhQUFBOU0sS0FBQTRJLE1BQUFpRSxlQUVBN00sS0FBQWQsTUFBQWlLLFVBQ0FuSixLQUFBd0ksVUFDQXFFLGNBQUE3QixXQUFBaEwsS0FBQTBNLEtBQUExTSxLQUFBZCxNQUFBNk4sa0JBSUEzRCxNQUFBLFdBQ0FwSixLQUFBNEksTUFBQWlFLGdCQUNBQyxhQUFBOU0sS0FBQTRJLE1BQUFpRSxlQUNBN00sS0FBQXdJLFVBQ0FxRSxjQUFBLFNBTUF4UixHQUFBSyxRQUFBb0wsR1Q0bEJRLENBQ0EsQ0FFRixTQUFVMUwsRUFBUUMsRUFBU0MsR0FFakMsWUFhQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQUV2RixRQUFTbUQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2tPLEdBQTJCQyxFQUFNakwsR0FBUSxJQUFLaUwsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPbEwsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QmlMLEVBQVBqTCxFQUVsTyxRQUFTbUwsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJdk8sV0FBVSxpRUFBb0V1TyxHQUFlRCxHQUFTeE4sVUFBWWpFLE9BQU8yUixPQUFPRCxHQUFjQSxFQUFXek4sV0FBYTJOLGFBQWUxUixNQUFPdVIsRUFBVTlOLFlBQVksRUFBT0UsVUFBVSxFQUFNRCxjQUFjLEtBQWU4TixJQUFZMVIsT0FBTzZSLGVBQWlCN1IsT0FBTzZSLGVBQWVKLEVBQVVDLEdBQWNELEVBQVNLLFVBQVlKLEdBaEJqZTFSLE9BQU9DLGVBQWVQLEVBQVMsY0FDN0JRLE9BQU8sR0FHVCxJQUFJa0QsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNN0QsT0FBT0MsZUFBZXFELEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVIsRUFBYWEsRUFBWUMsR0FBaUosTUFBOUhELElBQVlWLEVBQWlCSCxFQUFZZSxVQUFXRixHQUFpQkMsR0FBYVgsRUFBaUJILEVBQWFjLEdBQXFCZCxNVXg5QmhpQitHLEVBQUF0SyxFQUFBLEdWNDlCSW1LLEVBQVVsSyxFQUF1QnFLLEdBVWpDOEgsRVVyK0JjcFMsRUFBUSxHQUFwQnFTLEVWcytCUUQsRVV0K0JSQyxRQUNGQyxFQUFVdFMsRUFBUSxJQUVoQnVTLEVWdStCVyxTQUFVQyxHVXQrQnpCLFFBQUFELEtBQWEsTUFBQWxQLEdBQUFxQixLQUFBNk4sR0FBQWIsRUFBQWhOLE1BQUE2TixFQUFBSixXQUFBOVIsT0FBQW9TLGVBQUFGLElBQUE3TCxLQUFBaEMsT1ZxaENiLE1BOUNBbU4sR0FBVVUsRUFBWUMsR0FRdEIvTyxFQUFhOE8sSUFDWHBPLElBQUsscUJBQ0w1RCxNQUFPLFdVNytCVyxHQUNiYSxHQUFZc0QsS0FBS2QsTUFBakJ4QyxRQUNMQSxHQUFTa1IsRUFBUXZMLG9CQUFvQnJDLEtBQUtkLE1BQU04TyxPQUFPL0ssa0JWaS9CdkR4RCxJQUFLLFNBQ0w1RCxNQUFPLFdVOStCUCxHQUFJOEcsU0FFSixJQURBQSxFQUFhM0MsS0FBS2QsTUFBTXlELFdBQ1QsSUFBQXNMLElBQ0lqTyxLQUFLZCxNQUFqQnhDLFNBQ3dCaUcsR0FBVHVMLEdBRlBELEVBRVJFLGNBRlFGLEVBRU9DLE1BRXBCLE9BQ0V6SSxHQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxvQkFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsZUFBZXVJLElBSWpDLE1BQ0V6SSxHQUFBL0osUUFBQWdLLGNBQUEsd0NWOC9CQ21JLEdVdGhDZ0JwSSxFQUFBL0osUUFBTTBTLFVWeWhDL0IvUyxHQUFRSyxRVTMvQk9pUyxFQUNiLFNBQUMvRSxHQUNDLE9BQ0VqRyxXQUFZaUcsRUFBTTlGLFlBQVl1TCxVQUdsQ1IsSVY2L0JJLFNBQVV6UyxFQUFRQyxFQUFTQyxHQUVqQyxZQStCQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQUV2RixRQUFTbUQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2tPLEdBQTJCQyxFQUFNakwsR0FBUSxJQUFLaUwsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPbEwsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QmlMLEVBQVBqTCxFQUVsTyxRQUFTbUwsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJdk8sV0FBVSxpRUFBb0V1TyxHQUFlRCxHQUFTeE4sVUFBWWpFLE9BQU8yUixPQUFPRCxHQUFjQSxFQUFXek4sV0FBYTJOLGFBQWUxUixNQUFPdVIsRUFBVTlOLFlBQVksRUFBT0UsVUFBVSxFQUFNRCxjQUFjLEtBQWU4TixJQUFZMVIsT0FBTzZSLGVBQWlCN1IsT0FBTzZSLGVBQWVKLEVBQVVDLEdBQWNELEVBQVNLLFVBQVlKLEdBbENqZTFSLE9BQU9DLGVBQWVQLEVBQVMsY0FDN0JRLE9BQU8sR0FHVCxJQUFJa0QsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNN0QsT0FBT0MsZUFBZXFELEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVIsRUFBYWEsRUFBWUMsR0FBaUosTUFBOUhELElBQVlWLEVBQWlCSCxFQUFZZSxVQUFXRixHQUFpQkMsR0FBYVgsRUFBaUJILEVBQWFjLEdBQXFCZCxNVzlpQ2hpQitHLEVBQUF0SyxFQUFBLEdYa2pDSW1LLEVBQVVsSyxFQUF1QnFLLEdXampDckMwSSxFQUFBaFQsRUFBQSxJQUtBaVQsRUFBQWpULEVBQUEsSVhrakNJa1QsRUFBV2pULEVBQXVCZ1QsR1dqakN0Q0UsRUFBQW5ULEVBQUEsS1hxakNJb1QsRUFBZW5ULEVBQXVCa1QsR1dwakMxQ25TLEVBQUFoQixFQUFBLElYd2pDSWlCLEVBQWVoQixFQUF1QmUsR1d2akMxQ3FTLEVBQUFyVCxFQUFBLElYMmpDSXNULEVBQVdyVCxFQUF1Qm9ULEdBVWxDakIsRVc1a0NZcFMsRUFBUSxHQUFuQnFTLEVYNmtDU0QsRVc3a0NUQyxRQUNEa0IsRUFBaUJ2VCxFQUFRLElBQ3pCd1QsRUFBY3hULEVBQVEsSUFPcEJ5VCxFWHlrQ1EsU0FBVWpCLEdXeGtDdEIsUUFBQWlCLEtBQWFwUSxFQUFBcUIsS0FBQStPLEVBQUEsSUFBQXpPLEdBQUEwTSxFQUFBaE4sTUFBQStPLEVBQUF0QixXQUFBOVIsT0FBQW9TLGVBQUFnQixJQUFBL00sS0FBQWhDLE1BR1hNLEdBQUtzSSxPQUNIb0csYUFBYSxHQUdmMU8sRUFBSzJPLFVBQVkzTyxFQUFLMk8sVUFBVUMsS0FBZjVPLEdBQ2pCQSxFQUFLNk8sV0FBYTdPLEVBQUs2TyxXQUFXRCxLQUFoQjVPLEVBUlAsT0FBQUEsR1hpMENiLE1BeFBBNk0sR0FBVTRCLEVBQVNqQixHQW1CbkIvTyxFQUFhZ1EsSUFDWHRQLElBQUsscUJBQ0w1RCxNQUFPLFdXaGxDVyxHQUFBbUYsR0FBQWhCLElBQ2xCQSxNQUFLdEQsU0FBV3NELEtBQUtkLE1BQU14QyxTQUUzQkgsRUFBQWIsUUFBV3VFLE9BQU9tUCxhQUFhcFAsS0FBS2QsTUFBTThPLE9BQU9xQixXQUFXN1IsS0FBSyxTQUFDa0YsR0FDaEUsR0FBSWtCLEdBQVVsQixLQUNkMUIsR0FBSzRDLFFBQVVBLEVBQ2Y1QyxFQUFLdEUsU0FBU21TLEVBQWV6TCxpQkFBaUJRLEVBQVFTLGVYc2xDeEQ1RSxJQUFLLHVCQUNMNUQsTUFBTyxXV2xsQ1BtRSxLQUFLdEQsU0FBU21TLEVBQWUxTCx5QlhzbEM3QjFELElBQUssYUFDTDVELE1BQU8sV1dubENQbUUsS0FBS3dJLFVBQVV3RyxhQUFhLE9YdWxDNUJ2UCxJQUFLLFlBQ0w1RCxNQUFPLFdXcGxDUG1FLEtBQUt3SSxVQUFVd0csYUFBYSxPWHdsQzVCdlAsSUFBSyxxQkFDTDVELE1BQU8sU1d0bENVeVQsRUFBWXpULEdBRTdCbUUsS0FBSzRELFFBQVFTLFFBQVFySCxPQUFPLFNBQUN1UyxHQUMzQixNQUFPQSxHQUFPQyxPQUFTRixJQUN0QixHQUFHRyxTQUFXNVQsRUFHakJtRSxLQUFLdEQsU0FBU21TLEVBQWUzTCwyQkFBMkJsRCxLQUFLNEQsUUFBUVMsYVh5bENyRTVFLElBQUssU0FDTDVELE1BQU8sV1d2bENBLEdBQUE2VCxHQUFBMVAsS0FDSDJQLFFBRUosSUFEQUEsRUFBZ0IzUCxLQUFLNEQsUUFDRixJQUNabEgsR0FBWXNELEtBQUtkLE1BQWpCeEMsU0FEWWtULEVBRTBCRCxFQUFjRSxNQUF4QzNCLEdBRkEwQixFQUVaRSxXQUZZRixFQUVBMUIsT0FGQTZCLEdBQUFILEVBRU81TCxPQUZQNEwsRUFFZXZMLFFBQzJCc0wsR0FBdERLLEVBSFlELEVBR1pDLFlBQWE3TCxFQUhENEwsRUFHQzVMLGdCQUFpQjhMLEVBSGxCRixFQUdrQkUscUJBRS9CQyxFQUFnQixXQUNsQixNQUNFekssR0FBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsbUJBQ1pnSyxFQUFjdEwsUUFBUVYsSUFBSSxTQUFDNEwsRUFBUTFMLEdBQ2xDLEdBQW1CLFFBQWYwTCxFQUFPQyxNQUFpQyxTQUFmRCxFQUFPQyxLQUNsQyxNQUNFL0osR0FBQS9KLFFBQUFnSyxjQUFBLFVBQVFqRyxJQUFLb0UsRUFBTzJMLEtBQU1ELEVBQU9DLEtBQU0zVCxNQUFPMFQsRUFBT0UsU0FBVVUsU0FBVSxTQUFDQyxHQUN4RVYsRUFBS1csbUJBQW1CZCxFQUFPQyxLQUFNWSxFQUFNblIsT0FBT3BELFNBRWpEMFQsRUFBT2UsT0FBTzNNLElBQUksU0FBQzlILEVBQU9nSSxHQUN6QixNQUNFNEIsR0FBQS9KLFFBQUFnSyxjQUFBLFVBQVFqRyxJQUFLb0UsRUFBT2hJLE1BQU9BLEdBQVFBLFVBV2pEMFUsRUFBYyxXQUNoQixNQUNFWixHQUFjdEwsUUFBUVYsSUFBSSxTQUFDNEwsRUFBUWlCLEdBQ2pDLEdBQW1CLFFBQWZqQixFQUFPQyxLQUNULE1BQ0UvSixHQUFBL0osUUFBQWdLLGNBQUEsTUFBSWpHLElBQUsrUSxFQUFjN0ssVUFBVSxpQkFDOUI0SixFQUFPZSxPQUFPM00sSUFBSSxTQUFDOUgsRUFBT2dJLEdBQ3pCLE1BQ0U0QixHQUFBL0osUUFBQWdLLGNBQUEsTUFDRWpHLElBQUtvRSxFQUNMOEIsVUFBQSxpQkFBMkI0SixFQUFPRSxXQUFhNVQsRUFBUSxXQUFhLElBQ3BFNFUsUUFBUyxXQUNQZixFQUFLVyxtQkFBbUJkLEVBQU9DLEtBQU0zVCxLQUd0Q0EsUUFZbkIsT0FGQWlDLFNBQVFDLElBQUksa0JBQW1CNFIsR0FHN0JsSyxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxhQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxPQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSw0QkFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLFVBQVErSyxRQUFTbkMsRUFBQW9DLGVBQWVDLE9BQVFoTCxVQUFVLGlCQUFsRCxzQkFDQUYsRUFBQS9KLFFBQUFnSyxjQUFBLEtBQUdDLFVBQVUsZUFBY0YsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUt4QixJQUFLK0wsRUFBcUIvTCxJQUFLME0sSUFBSSxPQVNyRW5MLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLDRCQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsTUFBSUMsVUFBVSxpQkFBaUJ1SSxHQUMvQnpJLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGdCQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsTUFBSUMsVUFBVSwwQkFBZCxVQUNBRixFQUFBL0osUUFBQWdLLGNBQUEsb0JBRUFELEVBQUEvSixRQUFBZ0ssY0FBQSxNQUFJQyxVQUFVLDBCQUFkLGVBQ0FGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLbUwseUJBQTBCQyxPQUFRZCxLQUV0Q0UsSUFPQUssSUFFRDlLLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGlCQUFpQjZJLEVBQUE5UyxRQUFPcVYsUUFBUTVNLEVBQWdCNk0sUUFFL0R2TCxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxtQkFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLFNBQU8vSCxLQUFLLE9BQU9zVCxZQUFZLG1CQUMvQnhMLEVBQUEvSixRQUFBZ0ssY0FBQSxVQUFRL0gsS0FBSyxTQUFTZ0ksVUFBVSwyQkFBMEJGLEVBQUEvSixRQUFBZ0ssY0FBQSxLQUFHQyxVQUFVLHVCQUN2RUYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsNkJBQTZCOEssUUFBU3pRLEtBQUtpUCxXQUFXeEosRUFBQS9KLFFBQUFnSyxjQUFBLEtBQUdDLFVBQVUsc0JBQWxGLElBQTJHRixFQUFBL0osUUFBQWdLLGNBQUEsS0FBR3dMLEtBQUssS0FBUixjQUUzR3pMLEVBQUEvSixRQUFBZ0ssY0FBQWdKLEVBQUFoVCxTQUNFcUYsT0FBUWYsS0FBSzRJLE1BQU1vRyxZQUNuQm1DLGVBQWdCblIsS0FBS21QLFdBQ3JCaUMsYUFBYSxZQUNiQyxlQUFnQixJQUNoQjFMLFVBQVUsdUJBRVRGLEVBQUEvSixRQUFBZ0ssY0FBQSxtZ0JBQ0FELEVBQUEvSixRQUFBZ0ssY0FBQSw4V0FDQUQsRUFBQS9KLFFBQUFnSyxjQUFBLFVBQVFDLFVBQVUsbUJBQW1COEssUUFBU3pRLEtBQUttUCxZQUFZMUosRUFBQS9KLFFBQUFnSyxjQUFBLEtBQUdDLFVBQVUsbUJBSWpGRixFQUFBL0osUUFBQWdLLGNBQUEsVUFDRStLLFFBQVMsV0FDUC9ULEVBQVNvUyxFQUFZMVMseUJBQXlCdVQsRUFBY3hMLGdCQUFpQixLQUUvRXdCLFVBQVUsNEJBSlosZUFLQUYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUt4QixJQUFJLDJCQUEyQjBNLElBQUksOEJBT2xELE1BQ0VuTCxHQUFBL0osUUFBQWdLLGNBQUFrSixFQUFBbFQsUUFBQSxVWHlwQ0NxVCxHV2wwQ2F0SixFQUFBL0osUUFBTTBTLFVYcTBDNUIvUyxHQUFRSyxRV3RwQ09pUyxFQUNiLFNBQUMvRSxHQUNDLE9BQ0UrRyxjQUFlL0csRUFBTW5GLFNBQVM0SyxVQUdsQ1UsSVh3cENJLFNBQVUzVCxFQUFRQyxFQUFTQyxHQUVqQyxZQVdBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBRXZGLFFBQVNtRCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUVoSCxRQUFTa08sR0FBMkJDLEVBQU1qTCxHQUFRLElBQUtpTCxFQUFRLEtBQU0sSUFBSUMsZ0JBQWUsNERBQWdFLFFBQU9sTCxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCaUwsRUFBUGpMLEVBRWxPLFFBQVNtTCxHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUl2TyxXQUFVLGlFQUFvRXVPLEdBQWVELEdBQVN4TixVQUFZakUsT0FBTzJSLE9BQU9ELEdBQWNBLEVBQVd6TixXQUFhMk4sYUFBZTFSLE1BQU91UixFQUFVOU4sWUFBWSxFQUFPRSxVQUFVLEVBQU1ELGNBQWMsS0FBZThOLElBQVkxUixPQUFPNlIsZUFBaUI3UixPQUFPNlIsZUFBZUosRUFBVUMsR0FBY0QsRUFBU0ssVUFBWUosR0FkamUsR0FBSXRPLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTVk3MUNoaUIrRyxFQUFBdEssRUFBQSxHWmkyQ0ltSyxFQUFVbEssRUFBdUJxSyxHWWgyQ3JDMEksRUFBQWhULEVBQUEsSUFFTWdXLEVaMDJDWSxTQUFVeEQsR0FHMUIsUUFBU3dELEtBR1AsTUFGQTNTLEdBQWdCcUIsS0FBTXNSLEdBRWZ0RSxFQUEyQmhOLE1BQU9zUixFQUFZN0QsV0FBYTlSLE9BQU9vUyxlQUFldUQsSUFBY3hQLE1BQU05QixLQUFNeUIsWUE2RHBILE1BbEVBMEwsR0FBVW1FLEVBQWF4RCxHQVF2Qi9PLEVBQWF1UyxJQUNYN1IsSUFBSyxTQUNMNUQsTUFBTyxXWXAzQ0EsR0FBQTBWLEdBQ2tCdlIsS0FBS2QsTUFBekJnUCxFQURFcUQsRUFDRnJELE1BQU8vUSxFQURMb1UsRUFDS3BVLEdBQUlxVSxFQURURCxFQUNTQyxLQUVoQixPQUNFL0wsR0FBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsZ0JBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLHNCQUNiRixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBQSxZQUFnQnZVLEdBQU1zSSxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxxQkFBcUJtRSxPQUFRNkgsZ0JBQWlCLE9BQVNILEVBQVEsUUFDMUcvTCxFQUFBL0osUUFBQWdLLGNBQUEsV0FDQUQsRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsc0JBQXFCRixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBQSxZQUFnQnZVLEdBQU8rUSxJQUNoRXpJLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLFVBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGdCQUFnQm1FLE9BQVE2SCxnQkFBaUIsT0FBU0gsRUFBUSxPQUN6RS9MLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGdCQUNiRixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBQSxZQUNKak0sRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsZ0JBQWYsV0FDQUYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsb0JBQWYsd0JaODVDUDJMLEdZNzZDaUI3TCxFQUFBL0osUUFBTTBTLFVBMEJoQ2hULEdBQU9DLFFBQVVpVyxHWnk1Q1QsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FFRixTQUFVbFcsRUFBUUMsRUFBU0MsR2E5N0NqQyxHQUFBc1csR0FBQXRXLEVBQUEsS0FFQXVXLEVBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBLGlCQUNBLE9BQUFBLEdBQUFDLEtBQUFGLElBR0FHLEVBQUEsU0FBQXpXLEdBQ0EsR0FBQTBXLEdBQUEsR0FDQUMsRUFBQXhXLE9BQUFxSCxLQUFBeEgsRUFtQkEsT0FsQkEyVyxHQUFBN1QsUUFBQSxTQUFBd1QsRUFBQWpPLEdBQ0EsR0FBQWhJLEdBQUFMLEVBQUFzVyxFQUNBQSxHQUFBRixFQUFBRSxHQUVBRCxFQUFBQyxJQUFBLGdCQUFBalcsS0FDQUEsR0FBQSxNQUdBcVcsR0FEQXJXLEtBQUEsRUFDQWlXLEVBQ0tqVyxLQUFBLEVBQ0wsT0FBQWlXLEVBRUEsSUFBQUEsRUFBQSxLQUFBalcsRUFBQSxJQUVBZ0ksRUFBQXNPLEVBQUEvUyxPQUFBLElBQ0E4UyxHQUFBLFdBR0FBLEdBR0FFLEVBQUEsU0FBQUMsR0FDQSxHQUFBSCxHQUFBLEVBQ0EsdUJBQUFHLEdBQ0FBLEVBR0FBLFlBQUF6USxRQUNBeVEsRUFBQS9ULFFBQUEsU0FBQWdVLEVBQUF6TyxHQUNBcU8sR0FBQUQsRUFBQUssR0FDQXpPLEVBQUF3TyxFQUFBalQsT0FBQSxJQUNBOFMsR0FBQSxRQUdBQSxHQUdBRCxFQUFBSSxHQUdBalgsR0FBQUMsUUFBQStXLEdibThDUSxDQUVGLFNBQVVoWCxFQUFRQyxHY3o5Q3hCLFFBQUF5RyxHQUFBeVEsRUFBQUMsRUFBQUMsR0FDQSxPQUFBQSxFQUFBclQsUUFDQSxhQUFBbVQsR0FBQXZRLEtBQUF3USxFQUNBLGNBQUFELEdBQUF2USxLQUFBd1EsRUFBQUMsRUFBQSxHQUNBLGNBQUFGLEdBQUF2USxLQUFBd1EsRUFBQUMsRUFBQSxHQUFBQSxFQUFBLEdBQ0EsY0FBQUYsR0FBQXZRLEtBQUF3USxFQUFBQyxFQUFBLEdBQUFBLEVBQUEsR0FBQUEsRUFBQSxJQUVBLE1BQUFGLEdBQUF6USxNQUFBMFEsRUFBQUMsR0FZQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUlBLElBSEEsR0FBQS9PLElBQUEsRUFDQWdQLEVBQUFqUixNQUFBK1EsS0FFQTlPLEVBQUE4TyxHQUNBRSxFQUFBaFAsR0FBQStPLEVBQUEvTyxFQUVBLE9BQUFnUCxHQVdBLFFBQUFDLEdBQUFQLEVBQUFRLEdBQ0EsZ0JBQUFyUixHQUNBLE1BQUE2USxHQUFBUSxFQUFBclIsS0FtQ0EsUUFBQXNSLEdBQUFuWCxFQUFBb1gsR0FHQSxHQUFBSixHQUFBaFIsRUFBQWhHLElBQUFxWCxFQUFBclgsR0FDQTZXLEVBQUE3VyxFQUFBdUQsT0FBQStULFdBR0EvVCxFQUFBeVQsRUFBQXpULE9BQ0FnVSxJQUFBaFUsQ0FFQSxRQUFBSyxLQUFBNUQsSUFDQW9YLElBQUEvUSxFQUFBRixLQUFBbkcsRUFBQTRELElBQ0EyVCxJQUFBLFVBQUEzVCxHQUFBNFQsRUFBQTVULEVBQUFMLEtBQ0F5VCxFQUFBcFUsS0FBQWdCLEVBR0EsT0FBQW9ULEdBYUEsUUFBQVMsR0FBQUMsRUFBQTlULEVBQUE1RCxHQUNBLEdBQUEyWCxHQUFBRCxFQUFBOVQsRUFDQXlDLEdBQUFGLEtBQUF1UixFQUFBOVQsSUFBQWdVLEVBQUFELEVBQUEzWCxLQUNBUSxTQUFBUixHQUFBNEQsSUFBQThULE1BQ0FBLEVBQUE5VCxHQUFBNUQsR0FXQSxRQUFBNlgsR0FBQUgsR0FDQSxJQUFBSSxFQUFBSixHQUNBLE1BQUFLLEdBQUFMLEVBRUEsSUFBQVYsS0FDQSxRQUFBcFQsS0FBQTlELFFBQUE0WCxHQUNBclIsRUFBQUYsS0FBQXVSLEVBQUE5VCxJQUFBLGVBQUFBLEdBQ0FvVCxFQUFBcFUsS0FBQWdCLEVBR0EsT0FBQW9ULEdBV0EsUUFBQWdCLEdBQUF0QixFQUFBdUIsR0FFQSxNQURBQSxHQUFBQyxFQUFBMVgsU0FBQXlYLEVBQUF2QixFQUFBblQsT0FBQSxFQUFBMFUsRUFBQSxHQUNBLFdBTUEsSUFMQSxHQUFBckIsR0FBQWhSLFVBQ0FvQyxHQUFBLEVBQ0F6RSxFQUFBMlUsRUFBQXRCLEVBQUFyVCxPQUFBMFUsRUFBQSxHQUNBRSxFQUFBcFMsTUFBQXhDLEtBRUF5RSxFQUFBekUsR0FDQTRVLEVBQUFuUSxHQUFBNE8sRUFBQXFCLEVBQUFqUSxFQUVBQSxJQUFBLENBRUEsS0FEQSxHQUFBb1EsR0FBQXJTLE1BQUFrUyxFQUFBLEtBQ0FqUSxFQUFBaVEsR0FDQUcsRUFBQXBRLEdBQUE0TyxFQUFBNU8sRUFHQSxPQURBb1EsR0FBQUgsR0FBQUUsRUFDQWxTLEVBQUF5USxFQUFBdlMsS0FBQWlVLElBY0EsUUFBQUMsR0FBQTFSLEVBQUF0RCxFQUFBcVUsRUFBQVksR0FDQVosU0FLQSxLQUhBLEdBQUExUCxJQUFBLEVBQ0F6RSxFQUFBRixFQUFBRSxTQUVBeUUsRUFBQXpFLEdBQUEsQ0FDQSxHQUFBSyxHQUFBUCxFQUFBMkUsR0FFQXVRLEVBQUFELEVBQ0FBLEVBQUFaLEVBQUE5VCxHQUFBK0MsRUFBQS9DLEtBQUE4VCxFQUFBL1EsR0FDQW5HLE1BRUFpWCxHQUFBQyxFQUFBOVQsRUFBQXBELFNBQUErWCxFQUFBNVIsRUFBQS9DLEdBQUEyVSxHQUVBLE1BQUFiLEdBVUEsUUFBQWMsR0FBQUMsR0FDQSxNQUFBVCxHQUFBLFNBQUFOLEVBQUFnQixHQUNBLEdBQUExUSxJQUFBLEVBQ0F6RSxFQUFBbVYsRUFBQW5WLE9BQ0ErVSxFQUFBL1UsRUFBQSxFQUFBbVYsRUFBQW5WLEVBQUEsR0FBQS9DLE9BQ0FtWSxFQUFBcFYsRUFBQSxFQUFBbVYsRUFBQSxHQUFBbFksTUFXQSxLQVRBOFgsRUFBQUcsRUFBQWxWLE9BQUEscUJBQUErVSxJQUNBL1UsSUFBQStVLEdBQ0E5WCxPQUVBbVksR0FBQUMsRUFBQUYsRUFBQSxHQUFBQSxFQUFBLEdBQUFDLEtBQ0FMLEVBQUEvVSxFQUFBLEVBQUEvQyxPQUFBOFgsRUFDQS9VLEVBQUEsR0FFQW1VLEVBQUE1WCxPQUFBNFgsS0FDQTFQLEVBQUF6RSxHQUFBLENBQ0EsR0FBQW9ELEdBQUErUixFQUFBMVEsRUFDQXJCLElBQ0E4UixFQUFBZixFQUFBL1EsRUFBQXFCLEVBQUFzUSxHQUdBLE1BQUFaLEtBWUEsUUFBQUYsR0FBQXhYLEVBQUF1RCxHQUVBLE1BREFBLEdBQUEsTUFBQUEsRUFBQXNWLEVBQUF0VixJQUNBQSxJQUNBLGdCQUFBdkQsSUFBQThZLEVBQUEzQyxLQUFBblcsS0FDQUEsR0FBQSxHQUFBQSxFQUFBLE1BQUFBLEVBQUF1RCxFQWFBLFFBQUFxVixHQUFBNVksRUFBQWdJLEVBQUEwUCxHQUNBLElBQUFxQixFQUFBckIsR0FDQSxRQUVBLElBQUE1VixTQUFBa0csRUFDQSxvQkFBQWxHLEVBQ0FrWCxFQUFBdEIsSUFBQUYsRUFBQXhQLEVBQUEwUCxFQUFBblUsUUFDQSxVQUFBekIsR0FBQWtHLElBQUEwUCxLQUVBRSxFQUFBRixFQUFBMVAsR0FBQWhJLEdBWUEsUUFBQThYLEdBQUE5WCxHQUNBLEdBQUFpWixHQUFBalosS0FBQTBSLFlBQ0F3SCxFQUFBLGtCQUFBRCxNQUFBbFYsV0FBQW9WLENBRUEsT0FBQW5aLEtBQUFrWixFQW1DQSxRQUFBdEIsR0FBQTVYLEVBQUFvWixHQUNBLE1BQUFwWixLQUFBb1osR0FBQXBaLE9BQUFvWixNQXFCQSxRQUFBL0IsR0FBQXJYLEdBRUEsTUFBQXFaLEdBQUFyWixJQUFBcUcsRUFBQUYsS0FBQW5HLEVBQUEsYUFDQXNaLEVBQUFuVCxLQUFBbkcsRUFBQSxXQUFBdVosRUFBQXBULEtBQUFuRyxJQUFBd1osR0FxREEsUUFBQVIsR0FBQWhaLEdBQ0EsYUFBQUEsR0FBQXlaLEVBQUF6WixFQUFBdUQsVUFBQW1XLEVBQUExWixHQTRCQSxRQUFBcVosR0FBQXJaLEdBQ0EsTUFBQTJaLEdBQUEzWixJQUFBZ1osRUFBQWhaLEdBb0JBLFFBQUEwWixHQUFBMVosR0FHQSxHQUFBNFosR0FBQWIsRUFBQS9ZLEdBQUF1WixFQUFBcFQsS0FBQW5HLEdBQUEsRUFDQSxPQUFBNFosSUFBQUMsR0FBQUQsR0FBQUUsRUE2QkEsUUFBQUwsR0FBQXpaLEdBQ0Esc0JBQUFBLElBQ0FBLEdBQUEsR0FBQUEsRUFBQSxNQUFBQSxHQUFBNlksRUE0QkEsUUFBQUUsR0FBQS9ZLEdBQ0EsR0FBQThCLFNBQUE5QixFQUNBLFNBQUFBLElBQUEsVUFBQThCLEdBQUEsWUFBQUEsR0EyQkEsUUFBQTZYLEdBQUEzWixHQUNBLFFBQUFBLEdBQUEsZ0JBQUFBLEdBMkVBLFFBQUFtSCxHQUFBdVEsR0FDQSxNQUFBc0IsR0FBQXRCLEdBQUFQLEVBQUFPLEdBQUFHLEVBQUFILEdBL21CQSxHQUFBbUIsR0FBQSxpQkFHQVcsRUFBQSxxQkFDQUssRUFBQSxvQkFDQUMsRUFBQSw2QkFHQWhCLEVBQUEsbUJBd0RBSyxFQUFBclosT0FBQWlFLFVBR0FzQyxFQUFBOFMsRUFBQTlTLGVBT0FrVCxFQUFBSixFQUFBeE8sU0FHQTJPLEVBQUFILEVBQUFHLHFCQUdBdkIsRUFBQWQsRUFBQW5YLE9BQUFxSCxLQUFBckgsUUFDQW9ZLEVBQUEzSCxLQUFBd0osSUFHQUMsR0FBQVYsRUFBQW5ULE1BQWlEOFQsUUFBQSxHQUFlLFdBcVNoRWpVLEVBQUFELE1BQUFDLFFBNk1BVSxFQUFBOFIsRUFBQSxTQUFBZCxFQUFBL1EsR0FDQSxHQUFBcVQsR0FBQWxDLEVBQUFuUixJQUFBcVMsRUFBQXJTLEdBRUEsV0FEQTBSLEdBQUExUixFQUFBUSxFQUFBUixHQUFBK1EsRUFHQSxRQUFBOVQsS0FBQStDLEdBQ0FOLEVBQUFGLEtBQUFRLEVBQUEvQyxJQUNBNlQsRUFBQUMsRUFBQTlULEVBQUErQyxFQUFBL0MsS0FxQ0FyRSxHQUFBQyxRQUFBa0gsR2Q2L0NRLENBQ0EsQ0FDQSxDQUNBLENBQ0MsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUVILFNBQVVuSCxFQUFRQyxHZXJwRXhCLFFBQUEwYSxHQUFBQyxHQUNBbFksUUFBQWlZLEtBQUEsYUFBQUMsR0FHQTVhLEVBQUFDLFFBQUEwYSxHZjRwRU0sU0FBVTNhLEVBQVFDLEdnQjdwRXhCLFFBQUE0YSxHQUFBRCxHQUNBLE1BQUFBLEdBQUF6UCxRQUFBLGlCQUdBbkwsRUFBQUMsUUFBQTRhLEdoQnVxRU0sU0FBVTdhLEVBQVFDOzs7Ozs7Ozs7OztBaUJscUV4QixRQUFBNmEsR0FBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBRixFQUFBRSxTQUFBQyxhQUNBLDhDQUFBdEUsS0FBQXFFLElBQ0FGLEVBQUFJLFNBQ0EsTUFBQUYsRUFDQUYsRUFBQWpGLE1BQUFrRixFQUNBQSxJQUFBSSxFQUFBTCxHQUdBLFFBQUFNLEdBQUFDLEdBQ0EsTUFBQUEsR0FBQWxOLGFBQUEsR0FBQWtOLEVBQUFoTixjQUFBLEdBQ0EsU0FBQWdOLEVBQUE1TSxNQUFBNk0sUUFHQSxRQUFBSCxHQUFBTCxHQUNBLEtBQUFBLEdBQ0FBLElBQUFTLFNBQUFDLE1BREEsQ0FFQSxHQUFBSixFQUFBTixHQUFBLFFBQ0FBLEtBQUFXLFdBRUEsU0FHQSxRQUFBQyxHQUFBWixHQUNBLEdBQUFhLEdBQUFiLEVBQUFjLGFBQUEsV0FDQSxRQUFBRCxNQUFBM2EsT0FDQSxJQUFBNmEsR0FBQUMsTUFBQUgsRUFDQSxRQUFBRSxHQUFBRixHQUFBLElBQUFkLEVBQUFDLEdBQUFlLEdBR0EsUUFBQUUsR0FBQWpCLEdBQ0EsU0FBQWtCLE1BQUFyVixLQUFBbVUsRUFBQW1CLGlCQUFBLFFBQUF0YSxPQUFBLFNBQUEwWixHQUNBLE1BQUFLLEdBQUFMLEtBSUF0YixFQUFBQyxRQUFBK2IsR2pCcXJFUyxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUVILFNBQVVoYyxFQUFRQyxFQUFTQyxHQUVqQyxZa0IvdUVBLFNBQUFDLEdBQUFDLEdBQXNDLE1BQUFBLE1BQUFDLFdBQUFELEdBQXVDRSxRQUFBRixHQUo3RSxHQUFBb0ssR0FBQXRLLEVBQUEsR0FFQW1LLEVBQUFsSyxFQUFBcUssR0FJQTJSLEdBQ0E1UixVQUFBLEdBQ0E2UixlQUFBLEVBQ0E1TixnQkFBQSxFQUNBNk4sUUFBQSxFQUNBdE8sVUFBQSxFQUNBNEQsY0FBQSxJQUNBakYsWUFBQSxFQUNBQyxjQUFBLE9BQ0EyUCxRQUFBLE9BQ0FDLGFBQUEsU0FBQXhZLEdBQ0EsTUFBQXNHLEdBQUEvSixRQUFBZ0ssY0FDQSxTQUNBLEtBQ0F2RyxFQUFBLElBR0F5WSxNQUFBLEVBQ0FDLFVBQUEsYUFDQUMsV0FBQSxFQUNBQyxPQUFBLFNBQ0FDLGFBQUEsSUFDQXZOLE1BQUEsRUFDQXdOLGVBQUEsRUFDQS9OLFVBQUEsRUFDQTNCLGFBQUEsRUFDQW1DLFVBQUEsRUFDQXdOLGNBQUEsRUFDQUMsV0FBQSxLQUNBN1AsS0FBQSxFQUNBOFAsTUFBQSxNQUNBcFEsYUFBQSxFQUNBbUQsZUFBQSxFQUNBRixNQUFBLElBQ0FvTixPQUFBLEVBQ0FDLGNBQUEsRUFDQUMsV0FBQSxFQUNBQyxlQUFBLEVBQ0FsTixRQUFBLEVBQ0FtTixlQUFBLEVBQ0E3USxVQUFBLEVBQ0EyQyxnQkFBQSxFQUNBTyxZQUFBLEtBQ0FJLGFBQUEsS0FDQXdOLFVBQUEsS0FDQUMsS0FBQSxLQUNBQyxXQUFBLEtBRUFDLFVBQUEsS0FDQUMsVUFBQSxLQUdBMWQsR0FBQUMsUUFBQWtjLEdsQjB2RU0sU0FBVW5jLEVBQVFDLEVBQVNDLEdBRWpDLFltQjN5RUEsU0FBQUMsR0FBQUMsR0FBc0MsTUFBQUEsTUFBQUMsV0FBQUQsR0FBdUNFLFFBQUFGLEdBWDdFSCxFQUFBSSxZQUFBLEVBQ0FKLEVBQUFxTixhQUFBck4sRUFBQW9RLG1CQUFBcFEsRUFBQTBOLFlBQUExTSxNQUVBLElBQUFvSyxHQUFBbkwsRUFBQSxJQUVBb0wsRUFBQW5MLEVBQUFrTCxHQUVBRyxFQUFBdEwsRUFBQSxHQUVBdUwsRUFBQXRMLEVBQUFxTCxHQUlBbVMsRUFBQSxTQUFBQyxFQUFBQyxHQUNBLE1BQUFBLEdBQUFDLE9BQUEsU0FBQXJkLEVBQUE0RCxHQUNBLE1BQUE1RCxJQUFBbWQsRUFBQTlXLGVBQUF6QyxLQUNHLFFBQUEzQixRQUFBcWIsTUFBQSxlQUFBSCxJQUdIalEsRUFBQTFOLEVBQUEwTixZQUFBLFNBQUFpUSxHQUNBRCxFQUFBQyxHQUFBLGlFQUVBLElBQUF0UixHQUFBMFIsRUFFQUMsRUFBQUwsRUFBQTVSLFdBQUEsRUFBQTRSLEVBQUFoUixZQUVBZ1IsR0FBQXBSLFNBU0F3UixFQUFBQyxFQUFBTCxFQUFBL1EsWUFQQVAsRUFEQXNSLEVBQUFQLGVBQ0FPLEVBQUE1UixXQUFBLEVBQUE0UixFQUFBaFIsY0FBQWdSLEVBQUFoUyxXQUNLZ1MsRUFBQWxSLFlBQ0xrUixFQUFBNVIsV0FBQSxHQUFBNFIsRUFBQWhSLGFBQUEsSUFBQWdSLEVBQUFoUyxZQUVBZ1MsRUFBQTVSLFdBQUEsRUFBQTRSLEVBQUFoUixjQUFBZ1IsRUFBQWhTLFVBTUEsSUFBQThDLElBQ0F3UCxRQUFBLEVBQ0FDLGdCQUFBUCxFQUFBcFIsU0FBQSxvQkFBQW9SLEVBQUFoUSxLQUFBLDBCQUFBZ1EsRUFBQWhRLEtBQUEsZ0JBQ0ErSixVQUFBaUcsRUFBQXBSLFNBQUEsb0JBQUFvUixFQUFBaFEsS0FBQSwwQkFBQWdRLEVBQUFoUSxLQUFBLGdCQUNBd1EsV0FBQSxHQUNBQyxpQkFBQSxHQUNBQyxZQUFBVixFQUFBcFIsU0FBQSxjQUFBb1IsRUFBQWhRLEtBQUEsb0JBQUFnUSxFQUFBaFEsS0FBQSxNQW9CQSxPQWpCQXRCLEtBQ0EsRUFBQWIsRUFBQW5MLFNBQUFvTyxHQUF3Q1AsTUFBQTdCLElBR3hDMFIsSUFDQSxFQUFBdlMsRUFBQW5MLFNBQUFvTyxHQUF3Q0wsT0FBQTJQLElBSXhDL1QsZ0JBQUFzVSxrQkFBQXRVLE9BQUF1VSxjQUNBWixFQUFBcFIsU0FHQWtDLEVBQUErUCxVQUFBYixFQUFBaFEsS0FBQSxLQUZBYyxFQUFBZ1EsV0FBQWQsRUFBQWhRLEtBQUEsTUFNQWMsRUFHQXpPLEdBQUFvUSxtQkFBQSxTQUFBdU4sR0FDQUQsRUFBQUMsR0FBQSxtRkFFQSxJQUFBbFAsR0FBQWYsRUFBQWlRLEVBSUEsT0FGQWxQLEdBQUEyUCxpQkFBQSxxQkFBQVQsRUFBQS9OLE1BQUEsTUFBQStOLEVBQUF0QixRQUNBNU4sRUFBQTBQLFdBQUEsYUFBQVIsRUFBQS9OLE1BQUEsTUFBQStOLEVBQUF0QixRQUNBNU4sR0FHQXpPLEVBQUFxTixhQUFBLFNBQUFzUSxHQUVBRCxFQUFBQyxHQUFBLHFKQUVBLElBQ0F2USxHQUNBMkIsRUFGQTJQLEVBQUEsRUFHQUMsRUFBQSxDQUVBLElBQUFoQixFQUFBdk8sS0FDQSxRQUdBLElBQUF1TyxFQUFBOU8sU0FDQThPLEVBQUE1UixZQUFBNFIsRUFBQWhSLGVBQ0ErUixFQUFBZixFQUFBaFMsV0FBQWdTLEVBQUFoUixjQUFBLEVBQ0FnUyxFQUFBaEIsRUFBQS9RLFlBQUErUSxFQUFBaFIsY0FBQSxHQUVBZ1IsRUFBQTVSLFdBQUE0UixFQUFBN04saUJBQUEsR0FDQTZOLEVBQUFyUSxXQUFBcVEsRUFBQTdOLGVBQUE2TixFQUFBNVIsWUFBQTRSLEVBQUE1UixXQUFBNFIsRUFBQWhSLGVBQ0FnUixFQUFBclEsV0FBQXFRLEVBQUE1UixZQUNBMlMsR0FBQWYsRUFBQWhSLGNBQUFnUixFQUFBclEsV0FBQXFRLEVBQUE1UixhQUFBNFIsRUFBQWhTLFlBQUEsRUFDQWdULEdBQUFoQixFQUFBaFIsY0FBQWdSLEVBQUFyUSxXQUFBcVEsRUFBQTVSLGFBQUE0UixFQUFBL1EsYUFBQSxJQUVBOFIsRUFBQWYsRUFBQTVSLFdBQUE0UixFQUFBN04sZUFBQTZOLEVBQUFoUyxZQUFBLEVBQ0FnVCxFQUFBaEIsRUFBQTVSLFdBQUE0UixFQUFBN04sZUFBQTZOLEVBQUEvUSxhQUFBLFFBTUEsSUFBQStRLEVBQUE1UixXQUFBNFIsRUFBQTdOLGlCQUFBLEdBQ0E2TixFQUFBclEsV0FBQXFRLEVBQUE3TixlQUFBNk4sRUFBQTVSLFlBQUE0UixFQUFBNVIsV0FBQTRSLEVBQUFoUixhQUFBLENBQ0EsR0FBQWlTLEdBQUFqQixFQUFBaFIsYUFBQWdSLEVBQUE1UixXQUFBNFIsRUFBQTdOLGNBQ0E0TyxHQUFBRSxFQUFBakIsRUFBQWhTLFdBbUJBLEdBZEFnUyxFQUFBbFIsYUFDQWtSLEVBQUE5TyxTQUNBNlAsR0FBQWYsRUFBQWhTLFdBQUFvRixLQUFBOE4sTUFBQWxCLEVBQUFoUixhQUFBLEdBRUErUixFQUFBZixFQUFBaFMsV0FBQW9GLEtBQUE4TixNQUFBbEIsRUFBQWhSLGFBQUEsSUFPQVMsRUFIQXVRLEVBQUFwUixTQUdBb1IsRUFBQXJRLFdBQUFxUSxFQUFBL1EsYUFBQSxFQUFBK1IsRUFGQWhCLEVBQUFyUSxXQUFBcVEsRUFBQWhTLFlBQUEsRUFBQStTLEVBS0FmLEVBQUFQLGlCQUFBLEdBQ0EsR0FBQTBCLEVBQ0FuQixHQUFBNVIsWUFBQTRSLEVBQUFoUixjQUFBZ1IsRUFBQTlPLFlBQUEsRUFDQUUsRUFBQTFELEVBQUFoTCxRQUFBd0wsWUFBQThSLEVBQUFuUSxVQUFBdVIsV0FBQXBCLEVBQUFyUSxhQUVBd1IsRUFBQW5CLEVBQUFyUSxXQUFBcVEsRUFBQWhSLGFBQ0FvQyxFQUFBMUQsRUFBQWhMLFFBQUF3TCxZQUFBOFIsRUFBQW5RLFVBQUF1UixXQUFBRCxJQUVBMVIsRUFBQTJCLElBQUFpUSxZQUFBLElBQ0FyQixFQUFBbFIsY0FBQSxJQUVBc0MsRUFEQTRPLEVBQUE5TyxZQUFBLEVBQ0F4RCxFQUFBaEwsUUFBQXdMLFlBQUE4UixFQUFBblEsVUFBQXRCLFNBQUF5UixFQUFBclEsWUFFQWpDLEVBQUFoTCxRQUFBd0wsWUFBQThSLEVBQUFuUSxVQUFBdEIsU0FBQXlSLEVBQUFyUSxXQUFBcVEsRUFBQWhSLGFBQUEsR0FHQW9DLElBQ0EzQixFQUFBMkIsRUFBQWlRLFlBQUEsR0FBQXJCLEVBQUF4UixVQUFBNEMsRUFBQVosYUFBQSxJQUtBLE1BQUFmLEtuQjZ6RVMsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBRUgsU0FBVXJOLEVBQVFDLEdBRXhCLEtBQU0sSUFBSWlmLE9BQU0sK05BSVYsU0FBVWxmLEVBQVFDLEVBQVNDLEdBRWpDLFlBcUVBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdvQnhoRnZGLFFBQVMrZSxHQUFZQyxHQUNuQkMsRUFBQS9lLFFBQVFnZixLQUFNQyxLQUFNSCxFQUFTSSxXQUM3QkgsRUFBQS9lLFFBQVFtZixTQUFTTCxFQUFTSSxVcEJvOUU1QmpmLE9BQU9DLGVBQWVQLEVBQVMsY0FDN0JRLE9BQU8sR29CNytFVCxJQUFBK0osR0FBQXRLLEVBQUEsR3BCay9FSW1LLEVBQVVsSyxFQUF1QnFLLEdvQmovRXJDMEksRUFBQWhULEVBQUEsSUFJQXdmLEVBQUF4ZixFQUFBLElBQ0F5ZixHcEJrL0UwQnhmLEVBQXVCdWYsR29CbC9FakR4ZixFQUFBLE1wQnMvRUkwZixFQUFTemYsRUFBdUJ3ZixHb0JyL0VwQ0UsRUFBQTNmLEVBQUEsS3BCeS9FSTRmLEVBQVUzZixFQUF1QjBmLEdvQngvRXJDRSxFQUFBN2YsRUFBQSxLcEI0L0VJOGYsRUFBYTdmLEVBQXVCNGYsR29CMy9FeENFLEVBQUEvZixFQUFBLElwQisvRUlnZ0IsRUFBWS9mLEVBQXVCOGYsR29COS9FdkNFLEVBQUFqZ0IsRUFBQSxLcEJrZ0ZJa2dCLEVBQWdCamdCLEVBQXVCZ2dCLEdvQmpnRjNDRSxFQUFBbmdCLEVBQUEsSXBCcWdGSW9nQixFQUFlbmdCLEVBQXVCa2dCLEdvQnBnRjFDRSxFQUFBcmdCLEVBQUEsS3BCd2dGSXNnQixFQUFXcmdCLEVBQXVCb2dCLEdvQnZnRnRDRSxFQUFBdmdCLEVBQUEsS3BCMmdGSXdnQixFQUFnQnZnQixFQUF1QnNnQixHb0IxZ0YzQ0UsRUFBQXpnQixFQUFBLEtwQjhnRkkwZ0IsRUFBUXpnQixFQUF1QndnQixHb0I3Z0ZuQ0UsRUFBQTNnQixFQUFBLEtwQmloRkk0Z0IsRUFBVTNnQixFQUF1QjBnQixHb0JoaEZyQ0UsRUFBQTdnQixFQUFBLEtwQm9oRkk4Z0IsRUFBVTdnQixFQUF1QjRnQixHb0JuaEZyQ0UsRUFBQS9nQixFQUFBLEtwQnVoRklnaEIsRUFBWS9nQixFQUF1QjhnQixHb0JyaEZ2Q0UsRUFBQWpoQixFQUFBLEtwQnloRkltZixFQUFZbGYsRUFBdUJnaEIsR0FJbkM3TyxFb0I5aUZZcFMsRUFBUSxFcEIraUZWb1MsR29CL2lGVEMsUUFDT3JTLEVBQVEsSUFBa0J5RSxXQXdCdEN1TyxHQUFBb0MsZUFBZThMLE9BQU8sU0FBQ2hDLEdBQ3JCRCxFQUFZQyxHQUdablYsT0FBT29YLFNBQVMsRUFBRyxLcEJvaUZyQnBoQixFQUFRSyxRb0JoaUZOK0osRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQW9PLFFBQVFDLFFBQUFyTyxFQUFBb0MsZ0JBQ05qTCxFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBc08sT0FBT0MsS0FBSyxJQUFJQyxVQUFBOUIsRUFBQXRmLFNBQ2QrSixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBeU8sWUFBWUYsS0FBSyxJQUFJQyxVQUFBNUIsRUFBQXhmLFVBQ3JCK0osRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQXNPLE9BQU9DLEtBQUssV0FBV0MsVUFBQTFCLEVBQUExZixVQUN2QitKLEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFzTyxPQUFPQyxLQUFLLHFCQUFxQkMsVUFBQXhCLEVBQUE1ZixVQUNqQytKLEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFzTyxPQUFPQyxLQUFLLGNBQWNDLFVBQUF0QixFQUFBOWYsVUFDMUIrSixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBc08sT0FBT0MsS0FBSywyQkFBMkJDLFVBQUFwQixFQUFBaGdCLFVBQ3ZDK0osRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQXNPLE9BQU9DLEtBQUssVUFBVUMsVUFBQTFCLEVBQUExZixVQUN0QitKLEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFzTyxPQUFPQyxLQUFLLFNBQVNDLFVBQUFsQixFQUFBbGdCLFVBQ3JCK0osRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQXNPLE9BQU9DLEtBQUssZUFBZUMsVUFBQWhCLEVBQUFwZ0IsVUFDM0IrSixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBc08sT0FBT0MsS0FBSyxNQUFNQyxVQUFBZCxFQUFBdGdCLFVBQ2xCK0osRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQXNPLE9BQU9DLEtBQUssUUFBUUMsVUFBQVosRUFBQXhnQixVQUNwQitKLEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFzTyxPQUFPQyxLQUFLLFFBQVFDLFVBQUFWLEVBQUExZ0IsVUFDcEIrSixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBc08sT0FBT0MsS0FBSyxVQUFVQyxVQUFBUixFQUFBNWdCLGFwQjhuRm5CLENBRUgsU0FBVU4sRUFBUUMsRUFBU0MsR0FFakMsWUFpQkEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FFdkYsUUFBU21ELEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRWhILFFBQVNrTyxHQUEyQkMsRUFBTWpMLEdBQVEsSUFBS2lMLEVBQVEsS0FBTSxJQUFJQyxnQkFBZSw0REFBZ0UsUUFBT2xMLEdBQXlCLGdCQUFUQSxJQUFxQyxrQkFBVEEsR0FBOEJpTCxFQUFQakwsRUFFbE8sUUFBU21MLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSXZPLFdBQVUsaUVBQW9FdU8sR0FBZUQsR0FBU3hOLFVBQVlqRSxPQUFPMlIsT0FBT0QsR0FBY0EsRUFBV3pOLFdBQWEyTixhQUFlMVIsTUFBT3VSLEVBQVU5TixZQUFZLEVBQU9FLFVBQVUsRUFBTUQsY0FBYyxLQUFlOE4sSUFBWTFSLE9BQU82UixlQUFpQjdSLE9BQU82UixlQUFlSixFQUFVQyxHQUFjRCxFQUFTSyxVQUFZSixHQXBCamUxUixPQUFPQyxlQUFlUCxFQUFTLGNBQzdCUSxPQUFPLEdBR1QsSUFBSWtELEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTXFCenJGaGlCK0csRUFBQXRLLEVBQUEsR3JCNnJGSW1LLEVBQVVsSyxFQUF1QnFLLEdxQjVyRnJDMkksRUFBQWpULEVBQUEsSXJCZ3NGSWtULEVBQVdqVCxFQUF1QmdULEdBVWxDYixFcUJ6c0ZjcFMsRUFBUSxHQUFwQnFTLEVyQjBzRlFELEVxQjFzRlJDLFFBQ0ZDLEVBQVV0UyxFQUFRLElBRWhCMGhCLEVyQjJzRlMsU0FBVWxQLEdxQjFzRnZCLFFBQUFrUCxLQUFhLE1BQUFyZSxHQUFBcUIsS0FBQWdkLEdBQUFoUSxFQUFBaE4sTUFBQWdkLEVBQUF2UCxXQUFBOVIsT0FBQW9TLGVBQUFpUCxJQUFBaGIsS0FBQWhDLE9yQnd6RmIsTUE3R0FtTixHQUFVNlAsRUFBVWxQLEdBUXBCL08sRUFBYWllLElBQ1h2ZCxJQUFLLFNBQ0w1RCxNQUFPLFdxQmp0RkEsR0FBQTBWLEdBQzZDdlIsS0FBS2QsTUFBcER4QyxFQURFNlUsRUFDRjdVLFNBQVVPLEVBRFJzVSxFQUNRdFUsS0FBeUJSLEdBRGpDOFUsRUFDYzBMLGtCQURkMUwsRUFDaUM5VSxVQUVwQ3lnQixFQUFpQixTQUFDemdCLEdBRXBCQyxFQUFTa1IsRUFBUXhSLHlCQUF5QmEsRUFBTUksU0FBU1osS0FHM0QsT0FDRWdKLEdBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGFBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGlCQUFpQm1FLE9BQVE2SCxnQkFBaUIsT0FBUzFVLEVBQUttSCxjQUFjLEdBQUdGLElBQU0sT0FDOUZ1QixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxzQkFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsMEJBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLDRCQUE0QjFJLEVBQUtrZ0IsZUFDaEQxWCxFQUFBL0osUUFBQWdLLGNBQUEsUUFBTUMsVUFBVSxvQkFBb0IxSSxFQUFLaVIsUUFFM0N6SSxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSwwQkFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsaUNBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxVQUNFQyxVQUFVLG1DQUNWaEksS0FBSyxTQUNMOFMsUUFBUyxXQUFPeU0sR0FBZSxLQUNoQ3pYLEVBQUEvSixRQUFBZ0ssY0FBQSxpQkFBY0QsRUFBQS9KLFFBQUFnSyxjQUFBLFFBQU1DLFVBQVUsUUFBaEIsY0FDZkYsRUFBQS9KLFFBQUFnSyxjQUFBLFNBQ0U3SixNQUFPWSxFQUNQa0osVUFBVSxzQkFDVmhJLEtBQUssU0FDTHlmLElBQUksSUFDSkMsVUFBQSxJQUVGNVgsRUFBQS9KLFFBQUFnSyxjQUFBLFVBQ0VDLFVBQVUsbUNBQ1ZoSSxLQUFLLFNBQ0w4UyxRQUFTLFdBQU95TSxFQUFlLEtBQ2hDelgsRUFBQS9KLFFBQUFnSyxjQUFBLGlCQUFjRCxFQUFBL0osUUFBQWdLLGNBQUEsUUFBTUMsVUFBVSxRQUFoQixlQUVqQkYsRUFBQS9KLFFBQUFnSyxjQUFBLFFBQU1DLFVBQVUsb0JBQW9CNkksRUFBQTlTLFFBQU9xVixRQUFROVQsRUFBSytULE1BQU12VSxXckJneEZqRXVnQixHcUJ6ekZjdlgsRUFBQS9KLFFBQU0wUyxVckI0ekY3Qi9TLEdBQVFLLFFxQjF3Rk9pUyxFQUNiLFNBQUMvRSxHQUNDLE9BQ0U5TCxLQUFNOEwsRUFBTTlMLFFBR2hCa2dCLElyQjR3RkksU0FBVTVoQixFQUFRQyxFQUFTQyxHQUVqQyxZQVdBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBRXZGLFFBQVNtRCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUVoSCxRQUFTa08sR0FBMkJDLEVBQU1qTCxHQUFRLElBQUtpTCxFQUFRLEtBQU0sSUFBSUMsZ0JBQWUsNERBQWdFLFFBQU9sTCxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCaUwsRUFBUGpMLEVBRWxPLFFBQVNtTCxHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUl2TyxXQUFVLGlFQUFvRXVPLEdBQWVELEdBQVN4TixVQUFZakUsT0FBTzJSLE9BQU9ELEdBQWNBLEVBQVd6TixXQUFhMk4sYUFBZTFSLE1BQU91UixFQUFVOU4sWUFBWSxFQUFPRSxVQUFVLEVBQU1ELGNBQWMsS0FBZThOLElBQVkxUixPQUFPNlIsZUFBaUI3UixPQUFPNlIsZUFBZUosRUFBVUMsR0FBY0QsRUFBU0ssVUFBWUosR0FkamUsR0FBSXRPLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTXNCOTBGaGlCK0csRUFBQXRLLEVBQUEsR3RCazFGSW1LLEVBQVVsSyxFQUF1QnFLLEdzQmoxRnJDMEksRUFBQWhULEVBQUEsSUFFTWdpQixFdEIyMUZlLFNBQVV4UCxHQUc3QixRQUFTd1AsS0FHUCxNQUZBM2UsR0FBZ0JxQixLQUFNc2QsR0FFZnRRLEVBQTJCaE4sTUFBT3NkLEVBQWU3UCxXQUFhOVIsT0FBT29TLGVBQWV1UCxJQUFpQnhiLE1BQU05QixLQUFNeUIsWUErQjFILE1BcENBMEwsR0FBVW1RLEVBQWdCeFAsR0FRMUIvTyxFQUFhdWUsSUFDWDdkLElBQUssU0FDTDVELE1BQU8sV3NCcjJGQSxHQUFBMFYsR0FDV3ZSLEtBQUtkLE1BQWxCZ1AsRUFERXFELEVBQ0ZyRCxNQUFPL1EsRUFETG9VLEVBQ0twVSxFQUVaLE9BQ0VzSSxHQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxtQkFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUseUJBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxNQUFJQyxVQUFVLGVBQWNGLEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFtRCxNQUFNQyxHQUFBLGVBQW1CdlUsR0FBTytRLFV0QnkzRjdEb1AsR3NCaDRGb0I3WCxFQUFBL0osUUFBTTBTLFVBY25DaFQsR0FBT0MsUUFBVWlpQixHdEJ5M0ZYLFNBQVVsaUIsRUFBUUMsRUFBU0MsR0FFakMsWUFxQkEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FFdkYsUUFBU21ELEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRWhILFFBQVNrTyxHQUEyQkMsRUFBTWpMLEdBQVEsSUFBS2lMLEVBQVEsS0FBTSxJQUFJQyxnQkFBZSw0REFBZ0UsUUFBT2xMLEdBQXlCLGdCQUFUQSxJQUFxQyxrQkFBVEEsR0FBOEJpTCxFQUFQakwsRUFFbE8sUUFBU21MLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSXZPLFdBQVUsaUVBQW9FdU8sR0FBZUQsR0FBU3hOLFVBQVlqRSxPQUFPMlIsT0FBT0QsR0FBY0EsRUFBV3pOLFdBQWEyTixhQUFlMVIsTUFBT3VSLEVBQVU5TixZQUFZLEVBQU9FLFVBQVUsRUFBTUQsY0FBYyxLQUFlOE4sSUFBWTFSLE9BQU82UixlQUFpQjdSLE9BQU82UixlQUFlSixFQUFVQyxHQUFjRCxFQUFTSyxVQUFZSixHQXhCamUxUixPQUFPQyxlQUFlUCxFQUFTLGNBQzdCUSxPQUFPLEdBR1QsSUFBSWtELEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTXVCbjVGaGlCK0csRUFBQXRLLEVBQUEsR3ZCdTVGSW1LLEVBQVVsSyxFQUF1QnFLLEd1Qm41RnJDNlYsRUFBQW5nQixFQUFBLElBQ0FpaUIsR3ZCczVGbUJoaUIsRUFBdUJrZ0IsR3VCdDVGMUNuZ0IsRUFBQSxNdkIwNUZJa2lCLEVBQW1CamlCLEVBQXVCZ2lCLEdBVTFDN1AsRXVCeDZGY3BTLEVBQVEsR0FBcEJxUyxFdkJ5NkZRRCxFdUJ6NkZSQyxRQU1BOFAsR0FMUW5pQixFQUFRLEl2QjQ2RkosU0FBVXdTLEd1QnQ2RjFCLFFBQUEyUCxLQUFhLE1BQUE5ZSxHQUFBcUIsS0FBQXlkLEdBQUF6USxFQUFBaE4sTUFBQXlkLEVBQUFoUSxXQUFBOVIsT0FBQW9TLGVBQUEwUCxJQUFBemIsS0FBQWhDLE92QnU4RmIsTUFoQ0FtTixHQUFVc1EsRUFBYTNQLEdBUXZCL08sRUFBYTBlLElBQ1hoZSxJQUFLLFNBQ0w1RCxNQUFPLFd1Qjc2RkEsR0FDRmlILEdBQWU5QyxLQUFLZCxNQUFwQjRELFdBRUwsT0FBSUEsR0FBWTFELE9BQVMsRUFFckJxRyxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxPQUNaN0MsRUFBWWEsSUFBSSxTQUFBaEIsR0FDZixNQUFPOEMsR0FBQS9KLFFBQUFnSyxjQUFBOFgsRUFBQTloQixTQUFnQitELElBQUtrRCxFQUFXd0wsY0FBZWhSLEdBQUl3RixFQUFXd0wsY0FBZUQsTUFBT3ZMLEVBQVd1TCxXQU0xR3pJLEVBQUEvSixRQUFBZ0ssY0FBQSx5Q3ZCczdGQytYLEd1Qng4RmlCaFksRUFBQS9KLFFBQU0wUyxXdkIyOEZoQy9TLEdBQVFLLFF1Qmw3Rk9pUyxFQUNiLFNBQUMvRSxHQUNDLE9BQ0U5RixZQUFhOEYsRUFBTTlGLFlBQVlpQixPQUduQzBaLEl2Qm83RkksU0FBVXJpQixFQUFRQyxFQUFTQyxHQUVqQyxZQVdBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBRXZGLFFBQVNtRCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUVoSCxRQUFTa08sR0FBMkJDLEVBQU1qTCxHQUFRLElBQUtpTCxFQUFRLEtBQU0sSUFBSUMsZ0JBQWUsNERBQWdFLFFBQU9sTCxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCaUwsRUFBUGpMLEVBRWxPLFFBQVNtTCxHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUl2TyxXQUFVLGlFQUFvRXVPLEdBQWVELEdBQVN4TixVQUFZakUsT0FBTzJSLE9BQU9ELEdBQWNBLEVBQVd6TixXQUFhMk4sYUFBZTFSLE1BQU91UixFQUFVOU4sWUFBWSxFQUFPRSxVQUFVLEVBQU1ELGNBQWMsS0FBZThOLElBQVkxUixPQUFPNlIsZUFBaUI3UixPQUFPNlIsZUFBZUosRUFBVUMsR0FBY0QsRUFBU0ssVUFBWUosR0FkamUsR0FBSXRPLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTXdCLzlGaGlCK0csRUFBQXRLLEVBQUEsR3hCbStGSW1LLEVBQVVsSyxFQUF1QnFLLEd3QmwrRnJDMEksRUFBQWhULEVBQUEsSUFFTW9pQixFeEI0K0ZPLFNBQVU1UCxHd0IzK0ZyQixRQUFBNFAsS0FBYSxNQUFBL2UsR0FBQXFCLEtBQUEwZCxHQUFBMVEsRUFBQWhOLE1BQUEwZCxFQUFBalEsV0FBQTlSLE9BQUFvUyxlQUFBMlAsSUFBQTFiLEtBQUFoQyxPeEIyaUdiLE1BL0RBbU4sR0FBVXVRLEVBQVE1UCxHQVFsQi9PLEVBQWEyZSxJQUNYamUsSUFBSyxTQUNMNUQsTUFBTyxXd0JqL0ZQLE1BQ0U0SixHQUFBL0osUUFBQWdLLGNBQUEsVUFBUXZJLEdBQUcsZUFDVHNJLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGNBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxVQUNFRCxFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBRyxTQUFTaU0sZ0JBQWdCLFVBQWxDLFVBRUZsWSxFQUFBL0osUUFBQWdLLGNBQUEsVUFDRUQsRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQW1ELE1BQU1DLEdBQUcsWUFBWWlNLGdCQUFnQixVQUFyQyxhQUVGbFksRUFBQS9KLFFBQUFnSyxjQUFBLFVBQ0VELEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFtRCxNQUFNQyxHQUFHLFdBQVdpTSxnQkFBZ0IsVUFBcEMsWUFFRmxZLEVBQUEvSixRQUFBZ0ssY0FBQSxVQUNFRCxFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBRyxVQUFVaU0sZ0JBQWdCLFVBQW5DLG1CQUdKbFksRUFBQS9KLFFBQUFnSyxjQUFBLDREeEJzaEdDZ1ksR3dCNWlHWWpZLEVBQUEvSixRQUFNMFMsVUE0QjNCaFQsR0FBT0MsUUFBVXFpQixHeEJ1aEdYLFNBQVV0aUIsRUFBUUMsRUFBU0MsR0FFakMsWUFlQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQUV2RixRQUFTbUQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2tPLEdBQTJCQyxFQUFNakwsR0FBUSxJQUFLaUwsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPbEwsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QmlMLEVBQVBqTCxFQUVsTyxRQUFTbUwsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJdk8sV0FBVSxpRUFBb0V1TyxHQUFlRCxHQUFTeE4sVUFBWWpFLE9BQU8yUixPQUFPRCxHQUFjQSxFQUFXek4sV0FBYTJOLGFBQWUxUixNQUFPdVIsRUFBVTlOLFlBQVksRUFBT0UsVUFBVSxFQUFNRCxjQUFjLEtBQWU4TixJQUFZMVIsT0FBTzZSLGVBQWlCN1IsT0FBTzZSLGVBQWVKLEVBQVVDLEdBQWNELEVBQVNLLFVBQVlKLEdBbEJqZTFSLE9BQU9DLGVBQWVQLEVBQVMsY0FDN0JRLE9BQU8sR0FHVCxJQUFJa0QsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNN0QsT0FBT0MsZUFBZXFELEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVIsRUFBYWEsRUFBWUMsR0FBaUosTUFBOUhELElBQVlWLEVBQWlCSCxFQUFZZSxVQUFXRixHQUFpQkMsR0FBYVgsRUFBaUJILEVBQWFjLEdBQXFCZCxNeUIvakdoaUIrRyxFQUFBdEssRUFBQSxHekJta0dJbUssRUFBVWxLLEVBQXVCcUssR3lCbGtHckMwSSxFQUFBaFQsRUFBQSxJekI4a0dJb1MsRXlCN2tHWXBTLEVBQVEsR0FBbkJxUyxFekI4a0dTRCxFeUI5a0dUQyxRQUNEbUIsRUFBY3hULEVBQVEsSUFFcEJzaUIsRXpCK2tHTyxTQUFVOVAsR3lCOWtHckIsUUFBQThQLEtBQWEsTUFBQWpmLEdBQUFxQixLQUFBNGQsR0FBQTVRLEVBQUFoTixNQUFBNGQsRUFBQW5RLFdBQUE5UixPQUFBb1MsZUFBQTZQLElBQUE1YixLQUFBaEMsT3pCd3NHYixNQXpIQW1OLEdBQVV5USxFQUFROVAsR0FRbEIvTyxFQUFhNmUsSUFDWG5lLElBQUssU0FDTDVELE1BQU8sV3lCcmxHQSxHQUFBMFYsR0FDcUJ2UixLQUFLZCxNQUE1QnhDLEVBREU2VSxFQUNGN1UsU0FBVW1oQixFQURSdE0sRUFDUXNNLFNBRWYsT0FDRXBZLEdBQUEvSixRQUFBZ0ssY0FBQSxVQUFRdkksR0FBRyxlQUNUc0ksRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsWUFDWkYsRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsaUJBQWdCRixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBRyxTQUFTaU0sZ0JBQWdCLFVBQWxDLFVBQzlCbFksRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsaUJBQWdCRixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBRyxnQkFBZ0JpTSxnQkFBZ0IsVUFBekMsaUJBQzlCbFksRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsaUJBQWdCRixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBRyxPQUFPaU0sZ0JBQWdCLFVBQWhDLFFBQzlCbFksRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsaUJBQWdCRixFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBRyxTQUFTaU0sZ0JBQWdCLFVBQWxDLFVBQzlCbFksRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsbUNBQW1DOEssUUFBUyxXQUN4RC9ULEVBQVNvUyxFQUFZL1MsY0FDcEIwSixFQUFBL0osUUFBQWdLLGNBQUEsS0FBR0MsVUFBVSx3QkFGaEIsSUFFNENrWSxFQUFZLEVBQUksSUFBTUEsRUFBWSxJQUFNLEtBR3RGcFksRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUt2SSxHQUFHLGFBQ05zSSxFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBd1AsV0FBV3BNLEdBQUcsSUFBSWlNLGdCQUFnQixTQUFTSSxhQUFjQyxXQUFZLFNBQVN2WSxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS3hCLElBQUksdUJBR3pGdUIsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUt2SSxHQUFHLFlBQ05zSSxFQUFBL0osUUFBQWdLLGNBQUEsTUFBSUMsVUFBVSxpQkFBZ0JGLEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFtRCxNQUFNQyxHQUFHLFlBQVlpTSxnQkFBZ0IsVUFBckMsU0FDOUJsWSxFQUFBL0osUUFBQWdLLGNBQUEsTUFBSUMsVUFBVSxpQkFBZ0JGLEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFtRCxNQUFNQyxHQUFHLFdBQVdpTSxnQkFBZ0IsVUFBcEMsWUFDOUJsWSxFQUFBL0osUUFBQWdLLGNBQUEsTUFBSUMsVUFBVSxpQkFBZ0JGLEVBQUEvSixRQUFBZ0ssY0FBQTRJLEVBQUFtRCxNQUFNQyxHQUFHLGNBQWNpTSxnQkFBZ0IsVUFBdkMsZUFDOUJsWSxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS3ZJLEdBQUcsbUJBQ05zSSxFQUFBL0osUUFBQWdLLGNBQUE0SSxFQUFBbUQsTUFBTUMsR0FBQSxXQUFlak0sRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUt4QixJQUFJLCtCekI0cUdqQzBaLEd5QnpzR1luWSxFQUFBL0osUUFBTTBTLFV6QjRzRzNCL1MsR0FBUUssUXlCdnFHT2lTLEVBQ2IsU0FBQy9FLEdBQ0MsT0FDRWlWLFVBQVdqVixFQUFNOUwsS0FBS3FCLGtCQUcxQnlmLEl6QnlxR0ksU0FBVXhpQixFQUFRQyxFQUFTQyxHQUVqQyxZQTJCQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQUV2RixRQUFTbUQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2tPLEdBQTJCQyxFQUFNakwsR0FBUSxJQUFLaUwsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPbEwsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QmlMLEVBQVBqTCxFQUVsTyxRQUFTbUwsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJdk8sV0FBVSxpRUFBb0V1TyxHQUFlRCxHQUFTeE4sVUFBWWpFLE9BQU8yUixPQUFPRCxHQUFjQSxFQUFXek4sV0FBYTJOLGFBQWUxUixNQUFPdVIsRUFBVTlOLFlBQVksRUFBT0UsVUFBVSxFQUFNRCxjQUFjLEtBQWU4TixJQUFZMVIsT0FBTzZSLGVBQWlCN1IsT0FBTzZSLGVBQWVKLEVBQVVDLEdBQWNELEVBQVNLLFVBQVlKLEdBOUJqZTFSLE9BQU9DLGVBQWVQLEVBQVMsY0FDN0JRLE9BQU8sR0FHVCxJQUFJa0QsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNN0QsT0FBT0MsZUFBZXFELEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVIsRUFBYWEsRUFBWUMsR0FBaUosTUFBOUhELElBQVlWLEVBQWlCSCxFQUFZZSxVQUFXRixHQUFpQkMsR0FBYVgsRUFBaUJILEVBQWFjLEdBQXFCZCxNMEJsdUdoaUIrRyxFQUFBdEssRUFBQSxHMUJzdUdJbUssRUFBVWxLLEVBQXVCcUssRzBCcnVHckNxWSxFQUFBM2lCLEVBQUEsSzFCeXVHSTRpQixFQUFlM2lCLEVBQXVCMGlCLEcwQnh1RzFDM1AsRUFBQWhULEVBQUEsSUFJQXFULEVBQUFyVCxFQUFBLEkxQjB1R0lzVCxFQUFXclQsRUFBdUJvVCxHMEJ6dUd0Q3dQLEVBQUE3aUIsRUFBQSxJMUI2dUdJOGlCLEVBQWdCN2lCLEVBQXVCNGlCLEdBVXZDelEsRTBCM3ZHWXBTLEVBQVEsR0FBbkJxUyxFMUI0dkdTRCxFMEI1dkdUQyxRQUNEQyxFQUFVdFMsRUFBUSxJQUtoQitpQixFMUIwdkdNLFNBQVV2USxHMEJ6dkdwQixRQUFBdVEsS0FBYyxNQUFBMWYsR0FBQXFCLEtBQUFxZSxHQUFBclIsRUFBQWhOLE1BQUFxZSxFQUFBNVEsV0FBQTlSLE9BQUFvUyxlQUFBc1EsSUFBQXJjLEtBQUFoQyxPMUIwNEdkLE1BaEpBbU4sR0FBVWtSLEVBQU92USxHQVFqQi9PLEVBQWFzZixJQUNYNWUsSUFBSyxrQkFDTDVELE1BQU8sUzBCaHdHTytILEdBQVMsR0FDbEJsSCxHQUFZc0QsS0FBS2QsTUFBakJ4QyxRQUNMQSxHQUFTa1IsRUFBUXhSLHlCQUF5QndILEVBQVFPLGdCQUFpQixPMUJvd0duRTFFLElBQUssU0FDTDVELE1BQU8sVzBCbHdHQSxHQUFBbUYsR0FBQWhCLEtBQ0Z5RCxFQUFZekQsS0FBS2QsTUFBakJ1RSxRQUNMQSxHQUFXQSxFQUFTNFQsTUFBTSxFQUFHLEdBRzdCLElBQUlpSCxJQUNGM1ksVUFBVywyQkFDWHVFLFVBQVUsRUFDVm5DLGNBQWUsT0FDZm9CLFVBQVUsRUFDVm5CLGFBQWMsRUFDZGlELE1BQU8sSUFDUHdNLFFBQVEsRUFDUi9NLFVBQVUsRUFDVnlOLGFBQ0VvRyxXQUFZLEtBQ1pELFVBQ0V0VyxhQUFjLEVBQ2RtRCxlQUFnQixFQUNoQmpCLFVBQVUsS0FHWnFVLFdBQVksSUFDWkQsVUFDRXRXLGFBQWMsRUFDZG1ELGVBQWdCLEVBQ2hCNUMsYUFBYyxLQUdoQmdXLFdBQVksSUFDWkQsVUFDRXRXLGFBQWMsRUFDZG1ELGVBQWdCLEtBS3RCLE9BQUkxSCxHQUFTckUsT0FBUyxFQUVsQnFHLEVBQUEvSixRQUFBZ0ssY0FBQSxXQUNFRCxFQUFBL0osUUFBQWdLLGNBQUF3WSxFQUFBeGlCLFFBQVk0aUIsRUFDVDdhLEVBQVNFLElBQUksU0FBQ0MsRUFBU0MsR0FDdEIsTUFDRTRCLEdBQUEvSixRQUFBZ0ssY0FBQSxPQUFLakcsSUFBS29FLEVBQU84QixVQUFVLDBCQUN6QkYsRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQW1ELE1BQU1DLEdBQUEsWUFBZ0I5TixFQUFRaU0sTUFBTUMsWUFBY3JLLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLHFCQUFxQm1FLE9BQVE2SCxnQkFBaUIsT0FBUy9OLEVBQVFPLGdCQUFnQkMsY0FBYyxHQUFHRixJQUFNLFlBTS9LdUIsRUFBQS9KLFFBQUFnSyxjQUFBLFdBQVNDLFVBQVUsbUJBQ2pCRixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxhQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsTUFBSUMsVUFBVSxvQkFBZCwwQ0FBd0VGLEVBQUEvSixRQUFBZ0ssY0FBQSxRQUFNQyxVQUFVLGNBQWhCLG1CQUN4RUYsRUFBQS9KLFFBQUFnSyxjQUFBLG9YQUNBRCxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSw4QkFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQW1ELE1BQU1DLEdBQUEsYUFBaUJqTSxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS3hCLElBQUksMEJBQTBCME0sSUFBSSxjQUM5RG5MLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGNBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxLQUFHQyxVQUFVLGlCQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsU0FBTzhZLEtBQUssT0FBT3ZOLFlBQVksb0JBRWpDeEwsRUFBQS9KLFFBQUFnSyxjQUFBNEksRUFBQW1ELE1BQU1DLEdBQUEsV0FBZWpNLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLeEIsSUFBSSw0QkFBNEIwTSxJQUFJLGlCQUtwRW5MLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGFBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxNQUFJQyxVQUFVLHVCQUFkLDJCQUNBRixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxpQkFDWmxDLEVBQVNFLElBQUksU0FBQUMsR0FDWixNQUFPNkIsR0FBQS9KLFFBQUFnSyxjQUFBMFksRUFBQTFpQixTQUFhK0QsSUFBS21FLEVBQVFuRSxJQUFLdEQsVUFBVyxpQkFBTTZFLEdBQUt5ZCxnQkFBZ0I3YSxJQUFVekcsR0FBSXlHLEVBQVFpTSxNQUFNQyxXQUFZNUIsTUFBT3RLLEVBQVFpTSxNQUFNM0IsTUFBT3NELE1BQU81TixFQUFRTyxnQkFBZ0JDLGNBQWMsR0FBR0YsV0FReE11QixFQUFBL0osUUFBQWdLLGNBQUFrSixFQUFBbFQsUUFBQSxVMUJvekdDMmlCLEcwQjM0R1c1WSxFQUFBL0osUUFBTTBTLFUxQjg0RzFCL1MsR0FBUUssUTBCanpHT2lTLEVBQ2IsU0FBQy9FLEdBQ0MsT0FDRW5GLFNBQVVtRixFQUFNbkYsU0FBU00sT0FHN0JzYSxJMUJtekdJLFNBQVVqakIsRUFBUUMsRUFBU0MsR0FFakMsWUF5QkEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FFdkYsUUFBU21ELEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRWhILFFBQVNrTyxHQUEyQkMsRUFBTWpMLEdBQVEsSUFBS2lMLEVBQVEsS0FBTSxJQUFJQyxnQkFBZSw0REFBZ0UsUUFBT2xMLEdBQXlCLGdCQUFUQSxJQUFxQyxrQkFBVEEsR0FBOEJpTCxFQUFQakwsRUFFbE8sUUFBU21MLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSXZPLFdBQVUsaUVBQW9FdU8sR0FBZUQsR0FBU3hOLFVBQVlqRSxPQUFPMlIsT0FBT0QsR0FBY0EsRUFBV3pOLFdBQWEyTixhQUFlMVIsTUFBT3VSLEVBQVU5TixZQUFZLEVBQU9FLFVBQVUsRUFBTUQsY0FBYyxLQUFlOE4sSUFBWTFSLE9BQU82UixlQUFpQjdSLE9BQU82UixlQUFlSixFQUFVQyxHQUFjRCxFQUFTSyxVQUFZSixHQTVCamUsR0FBSXRPLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTTJCcDZHaGlCK0csRUFBQXRLLEVBQUEsRzNCdzZHSW1LLEVBQVVsSyxFQUF1QnFLLEcyQnY2R3JDOFksRUFBQXBqQixFQUFBLEszQjI2R0lxakIsRUFBV3BqQixFQUF1Qm1qQixHMkIxNkd0Q0UsRUFBQXRqQixFQUFBLEszQjg2R0l1akIsRUFBV3RqQixFQUF1QnFqQixHMkI3Nkd0QzlELEVBQUF4ZixFQUFBLEkzQmk3R0l3akIsRUFBc0J2akIsRUFBdUJ1ZixHMkJoN0dqRGlFLEVBQUF6akIsRUFBQSxLM0JvN0dJMGpCLEVBQVN6akIsRUFBdUJ3akIsRzJCbDdHOUJFLEUzQjQ3R0ssU0FBVW5SLEcyQjM3R25CLFFBQUFtUixHQUFZL2YsR0FBTVAsRUFBQXFCLEtBQUFpZixFQUFBLElBQUEzZSxHQUFBME0sRUFBQWhOLE1BQUFpZixFQUFBeFIsV0FBQTlSLE9BQUFvUyxlQUFBa1IsSUFBQWpkLEtBQUFoQyxLQUNWZCxHQURVLE9BR2hCb0IsR0FBS3NJLE9BQ0hzRixNQUFPLEdBQ1BnUixRQUFTLElBTEs1ZSxFM0IwK0dsQixNQTlDQTZNLEdBQVU4UixFQUFNblIsR0FjaEIvTyxFQUFha2dCLElBQ1h4ZixJQUFLLFNBQ0w1RCxNQUFPLFcyQmw4R1AsR0FBTXNqQixJQUNKalIsTUFBTyxnQkFDUDhCLFlBQWEsNEJBQ2JtUCxNQUNFQyxRQUFTLFNBRVhDLE1BQ0VDLFFBQVEsSUFJUkMsRUFBV3ZmLEtBQUtkLE1BQU1zYixTQUFTSSxTQUFTNEUsT0FBTyxHQUFHQyxNQUFNLElBRTVELE9BQ0VoYSxHQUFBL0osUUFBQWdLLGNBQUEsT0FBS3ZJLEdBQUcsT0FBT3dJLFVBQUEsU0FBbUI0WixFQUFTLEdBQUtBLEVBQVMsR0FBSyxXQUFhLFNBQ3pFOVosRUFBQS9KLFFBQUFnSyxjQUFBb1osRUFBQXBqQixRQUFrQnlqQixHQUNsQjFaLEVBQUEvSixRQUFBZ0ssY0FBQWlaLEVBQUFqakIsUUFBQSxNQUNBK0osRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUt2SSxHQUFHLGtCQUNOc0ksRUFBQS9KLFFBQUFnSyxjQUFBc1osRUFBQXRqQixRQUFBLE1BQ0NzRSxLQUFLZCxNQUFNcUksVUFFZDlCLEVBQUEvSixRQUFBZ0ssY0FBQW1aLEVBQUFuakIsUUFBQSxXM0IyOEdDdWpCLEcyQjMrR1V4WixFQUFBL0osUUFBTTBTLFVBc0N6QmhULEdBQU9DLFFBQVU0akIsRzNCNDhHWCxTQUFVN2pCLEVBQVFDLEVBQVNDLEdBRWpDLFlBcUJBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBRXZGLFFBQVNtRCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUVoSCxRQUFTa08sR0FBMkJDLEVBQU1qTCxHQUFRLElBQUtpTCxFQUFRLEtBQU0sSUFBSUMsZ0JBQWUsNERBQWdFLFFBQU9sTCxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCaUwsRUFBUGpMLEVBRWxPLFFBQVNtTCxHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUl2TyxXQUFVLGlFQUFvRXVPLEdBQWVELEdBQVN4TixVQUFZakUsT0FBTzJSLE9BQU9ELEdBQWNBLEVBQVd6TixXQUFhMk4sYUFBZTFSLE1BQU91UixFQUFVOU4sWUFBWSxFQUFPRSxVQUFVLEVBQU1ELGNBQWMsS0FBZThOLElBQVkxUixPQUFPNlIsZUFBaUI3UixPQUFPNlIsZUFBZUosRUFBVUMsR0FBY0QsRUFBU0ssVUFBWUosR0F4QmplMVIsT0FBT0MsZUFBZVAsRUFBUyxjQUM3QlEsT0FBTyxHQUdULElBQUlrRCxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU03RCxPQUFPQyxlQUFlcUQsRUFBUUksRUFBV0ksSUFBS0osSUFBaUIsTUFBTyxVQUFVUixFQUFhYSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVYsRUFBaUJILEVBQVllLFVBQVdGLEdBQWlCQyxHQUFhWCxFQUFpQkgsRUFBYWMsR0FBcUJkLE00QmpnSGhpQitHLEVBQUF0SyxFQUFBLEc1QnFnSEltSyxFQUFVbEssRUFBdUJxSyxHNEJsZ0hyQytJLEVBQUFyVCxFQUFBLEk1QnNnSElzVCxFQUFXclQsRUFBdUJvVCxHNEJyZ0h0Q3dQLEVBQUE3aUIsRUFBQSxJNUJ5Z0hJOGlCLEVBQWdCN2lCLEVBQXVCNGlCLEdBVXZDelEsRTRCdGhIWXBTLEVBQVEsR0FBbkJxUyxFNUJ1aEhTRCxFNEJ2aEhUQyxRQUNEQyxFQUFVdFMsRUFBUSxJQUloQm9rQixFNUJzaEhTLFNBQVU1UixHNEJyaEh2QixRQUFBNFIsS0FBYyxNQUFBL2dCLEdBQUFxQixLQUFBMGYsR0FBQTFTLEVBQUFoTixNQUFBMGYsRUFBQWpTLFdBQUE5UixPQUFBb1MsZUFBQTJSLElBQUExZCxLQUFBaEMsTzVCc3BIZCxNQWhJQW1OLEdBQVV1UyxFQUFVNVIsR0FRcEIvTyxFQUFhMmdCLElBQ1hqZ0IsSUFBSyxrQkFDTDVELE1BQU8sUzRCNWhITytILEdBQVMsR0FDbEJsSCxHQUFZc0QsS0FBS2QsTUFBakJ4QyxRQUNMQSxHQUFTa1IsRUFBUXhSLHlCQUF5QndILEVBQVFPLGdCQUFpQixPNUJnaUhuRTFFLElBQUssU0FDTDVELE1BQU8sVzRCOWhIQSxHQUFBbUYsR0FBQWhCLEtBQ0Z5RCxFQUFZekQsS0FBS2QsTUFBakJ1RSxRQUVMLE9BQUlBLEdBQVNyRSxPQUFTLEVBRWxCcUcsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsYUFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsT0FDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsNkJBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGdCQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsTUFBSUMsVUFBVSwwQkFBZCxjQUNBRixFQUFBL0osUUFBQWdLLGNBQUEsVUFDRUQsRUFBQS9KLFFBQUFnSyxjQUFBLDBCQUNBRCxFQUFBL0osUUFBQWdLLGNBQUEsb0JBQ0FELEVBQUEvSixRQUFBZ0ssY0FBQSxxQkFDQUQsRUFBQS9KLFFBQUFnSyxjQUFBLG1CQUNBRCxFQUFBL0osUUFBQWdLLGNBQUEscUJBQ0FELEVBQUEvSixRQUFBZ0ssY0FBQSx1QkFHRkQsRUFBQS9KLFFBQUFnSyxjQUFBLE1BQUlDLFVBQVUsMEJBQWQsU0FDQUYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsd0JBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxTQUFPL0gsS0FBSyxPQUFPc1QsWUFBWSxpQkFDL0J4TCxFQUFBL0osUUFBQWdLLGNBQUEsVUFBUS9ILEtBQUssU0FBU2dJLFVBQVUsK0JBQThCRixFQUFBL0osUUFBQWdLLGNBQUEsS0FBR0MsVUFBVSxtQkFHN0VGLEVBQUEvSixRQUFBZ0ssY0FBQSxNQUFJQyxVQUFVLDBCQUFkLFVBQ0FGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLHdCQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsU0FBTy9ILEtBQUssT0FBT3NULFlBQVksbUJBQy9CeEwsRUFBQS9KLFFBQUFnSyxjQUFBLFVBQVEvSCxLQUFLLFNBQVNnSSxVQUFVLCtCQUE4QkYsRUFBQS9KLFFBQUFnSyxjQUFBLEtBQUdDLFVBQVUscUJBS2pGRixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSw0QkFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsaUJBQ1psQyxFQUFTRSxJQUFJLFNBQUFDLEdBQ1osTUFBTzZCLEdBQUEvSixRQUFBZ0ssY0FBQTBZLEVBQUExaUIsU0FBYStELElBQUttRSxFQUFRbkUsSUFBS3RELFVBQVcsaUJBQU02RSxHQUFLeWQsZ0JBQWdCN2EsSUFBVXpHLEdBQUl5RyxFQUFRaU0sTUFBTUMsV0FBWTVCLE1BQU90SyxFQUFRaU0sTUFBTTNCLE1BQU9zRCxNQUFPNU4sRUFBUU8sZ0JBQWdCQyxjQUFjLEdBQUdGLFlBUzFNdUIsRUFBQS9KLFFBQUFnSyxjQUFBa0osRUFBQWxULFFBQUEsVTVCZ21IQ2drQixHNEJ2cEhjamEsRUFBQS9KLFFBQU0wUyxVNUIwcEg3Qi9TLEdBQVFLLFE0QjdsSE9pUyxFQUNiLFNBQUMvRSxHQUNDLE9BQ0VuRixTQUFVbUYsRUFBTW5GLFNBQVNNLE9BRzdCMmIsSTVCK2xISSxTQUFVdGtCLEVBQVFDLEVBQVNDLEdBRWpDLFlBZUEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FFdkYsUUFBU21ELEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRWhILFFBQVNrTyxHQUEyQkMsRUFBTWpMLEdBQVEsSUFBS2lMLEVBQVEsS0FBTSxJQUFJQyxnQkFBZSw0REFBZ0UsUUFBT2xMLEdBQXlCLGdCQUFUQSxJQUFxQyxrQkFBVEEsR0FBOEJpTCxFQUFQakwsRUFFbE8sUUFBU21MLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSXZPLFdBQVUsaUVBQW9FdU8sR0FBZUQsR0FBU3hOLFVBQVlqRSxPQUFPMlIsT0FBT0QsR0FBY0EsRUFBV3pOLFdBQWEyTixhQUFlMVIsTUFBT3VSLEVBQVU5TixZQUFZLEVBQU9FLFVBQVUsRUFBTUQsY0FBYyxLQUFlOE4sSUFBWTFSLE9BQU82UixlQUFpQjdSLE9BQU82UixlQUFlSixFQUFVQyxHQUFjRCxFQUFTSyxVQUFZSixHQWxCamUxUixPQUFPQyxlQUFlUCxFQUFTLGNBQzdCUSxPQUFPLEdBR1QsSUFBSWtELEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTTZCanJIaGlCK0csRUFBQXRLLEVBQUEsRzdCcXJISW1LLEVBQVVsSyxFQUF1QnFLLEdBWWpDOEgsRzZCaHNISnBTLEVBQUEsSUFDZ0JBLEVBQVEsSUFBbkJxUyxFN0Jnc0hTRCxFNkJoc0hUQyxRQUtDZ1MsR0FKZXJrQixFQUFRLElBQ1hBLEVBQVEsSTdCbXNIYixTQUFVd1MsRzZCL3JIckIsUUFBQTZSLEtBQWEsTUFBQWhoQixHQUFBcUIsS0FBQTJmLEdBQUEzUyxFQUFBaE4sTUFBQTJmLEVBQUFsUyxXQUFBOVIsT0FBQW9TLGVBQUE0UixJQUFBM2QsS0FBQWhDLE83QnN0SGIsTUF0QkFtTixHQUFVd1MsRUFBUTdSLEdBUWxCL08sRUFBYTRnQixJQUNYbGdCLElBQUssU0FDTDVELE1BQU8sVzZCcnNIVW1FLEtBQUtkLE1BQWpCeEMsUUFFTCxPQUNFK0ksR0FBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUseUJBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLeEIsSUFBSSx3QzdCNnNIUnliLEc2QnZ0SFlsYSxFQUFBL0osUUFBTTBTLFc3QjB0SDNCL1MsR0FBUUssUTZCMXNIT2lTLEVBQ2IsU0FBQy9FLEdBQ0MsT0FDRStHLGNBQWUvRyxFQUFNbkYsU0FBUzRLLFVBR2xDc1IsSTdCNHNISSxTQUFVdmtCLEVBQVFDLEVBQVNDLEdBRWpDLFlBeUJBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBRXZGLFFBQVNtRCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUVoSCxRQUFTa08sR0FBMkJDLEVBQU1qTCxHQUFRLElBQUtpTCxFQUFRLEtBQU0sSUFBSUMsZ0JBQWUsNERBQWdFLFFBQU9sTCxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCaUwsRUFBUGpMLEVBRWxPLFFBQVNtTCxHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUl2TyxXQUFVLGlFQUFvRXVPLEdBQWVELEdBQVN4TixVQUFZakUsT0FBTzJSLE9BQU9ELEdBQWNBLEVBQVd6TixXQUFhMk4sYUFBZTFSLE1BQU91UixFQUFVOU4sWUFBWSxFQUFPRSxVQUFVLEVBQU1ELGNBQWMsS0FBZThOLElBQVkxUixPQUFPNlIsZUFBaUI3UixPQUFPNlIsZUFBZUosRUFBVUMsR0FBY0QsRUFBU0ssVUFBWUosR0E1QmplMVIsT0FBT0MsZUFBZVAsRUFBUyxjQUM3QlEsT0FBTyxHQUdULElBQUlrRCxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU03RCxPQUFPQyxlQUFlcUQsRUFBUUksRUFBV0ksSUFBS0osSUFBaUIsTUFBTyxVQUFVUixFQUFhYSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVYsRUFBaUJILEVBQVllLFVBQVdGLEdBQWlCQyxHQUFhWCxFQUFpQkgsRUFBYWMsR0FBcUJkLE04Qmx2SGhpQitHLEVBQUF0SyxFQUFBLEc5QnN2SEltSyxFQUFVbEssRUFBdUJxSyxHOEJsdkhyQ3RKLEVBQUFoQixFQUFBLEk5QnN2SElpQixFQUFlaEIsRUFBdUJlLEc4QnJ2SDFDc2pCLEVBQUF0a0IsRUFBQSxLOUJ5dkhJdWtCLEVBQWF0a0IsRUFBdUJxa0IsRzhCdnZIeENyUixFQUFBalQsRUFBQSxJOUIydkhJa1QsRUFBV2pULEVBQXVCZ1QsR0FVbENiLEU4QjN3SGNwUyxFQUFRLEdBQXBCcVMsRTlCNHdIUUQsRThCNXdIUkMsUUFDRkMsRUFBVXRTLEVBQVEsSUFPaEJ3a0IsRTlCd3dISyxTQUFVaFMsRzhCdndIbkIsUUFBQWdTLEtBQWFuaEIsRUFBQXFCLEtBQUE4ZixFQUFBLElBQUF4ZixHQUFBME0sRUFBQWhOLE1BQUE4ZixFQUFBclMsV0FBQTlSLE9BQUFvUyxlQUFBK1IsSUFBQTlkLEtBQUFoQyxNQUlVTSxHQUFLeWYsZ0JBSmYsT0FBQXpmLEc5Qmc1SGIsTUF4SUE2TSxHQUFVMlMsRUFBTWhTLEdBWWhCL08sRUFBYStnQixJQUNYcmdCLElBQUsscUJBQ0w1RCxNQUFPLFc4Qjl3SFBtRSxLQUFLdEQsU0FBV3NELEtBQUtkLE1BQU14QyxZOUJreEgzQitDLElBQUssa0JBQ0w1RCxNQUFPLFc4Qi93SFBtRSxLQUFLdEQsU0FBU2tSLEVBQVE5UixnQjlCbXhIdEIyRCxJQUFLLGlCQUNMNUQsTUFBTyxXOEJoeEhQd0osT0FBTzJhLEtBQUt6akIsRUFBQWIsUUFBV29CLEtBQUttakIsWUFBYSxZOUJveEh6Q3hnQixJQUFLLFNBQ0w1RCxNQUFPLFc4Qmx4SEEsR0FBQXFrQixHQUM0Q2xnQixLQUFLZCxNQUFNcEMsS0FBekRpRSxFQURFbWYsRUFDRm5mLE9BQVFoRSxFQURObWpCLEVBQ01uakIsVUFBMEJrQixHQURoQ2lpQixFQUNpQjllLGNBRGpCOGUsRUFDZ0NqaUIsVUFDbkNraUIsRUFBa0IsV0FDcEIsR0FBSXBqQixFQUFVcUMsT0FBUyxFQUNyQixNQUFPckMsR0FBVTRHLElBQUksU0FBQXljLEdBQ25CLE1BQU8zYSxHQUFBL0osUUFBQWdLLGNBQUFtYSxFQUFBbmtCLFNBQ0wrRCxJQUFLMmdCLEVBQVNqakIsR0FDZEYsS0FBTW1qQixFQUNOM2pCLFNBQVUyakIsRUFBUzNqQixhQU0zQixPQUNFZ0osR0FBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVcsU0FBVzVFLEVBQVMsWUFBYyxLQUNoRDBFLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGtDQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsTUFBSUMsVUFBVSxjQUFkLGNBQXVDNUUsR0FDdkMwRSxFQUFBL0osUUFBQWdLLGNBQUEsVUFBUUMsVUFBVSxjQUNoQkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUsrSyxRQUFTelEsS0FBS3FnQixnQkFBZ0JuUixLQUFLbFAsT0FBeEMsS0FDQXlGLEVBQUEvSixRQUFBZ0ssY0FBQSxRQUFNQyxVQUFVLFFBQWhCLFdBSUpGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGFBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLG9DQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsV0FDR3lhLE1BSUwxYSxFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxlQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxtQ0FDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsZ0RBQWYsU0FDQUYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsc0JBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxRQUFNQyxVQUFVLHFDQUFoQixPQUNBRixFQUFBL0osUUFBQWdLLGNBQUEsUUFBTUMsVUFBVSwrQkFBK0I2SSxFQUFBOVMsUUFBT3FWLFFBQVE5UyxNQUdsRXdILEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLG9EQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSx5Q0FBZixzREFDQUYsRUFBQS9KLFFBQUFnSyxjQUFBLFNBQ0UvSCxLQUFLLFNBQ0xnSSxVQUFVLHlCQUNWeEksR0FBRyxXQUNIcVMsS0FBSyxXQUNMM1QsTUFBTSxXQUNONFUsUUFBU3pRLEtBQUsrZix5QjlCODBIckJELEc4Qmo1SFVyYSxFQUFBL0osUUFBTTBTLFU5Qm81SHpCL1MsR0FBUUssUThCdjBIT2lTLEVBQ2IsU0FBQy9FLEdBQ0MsT0FDRTlMLEtBQU04TCxFQUFNOUwsUUFHaEJnakIsSTlCeTBISSxTQUFVMWtCLEVBQVFDLEVBQVNDLEdBRWpDLFlBYUEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FFdkYsUUFBU21ELEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRWhILFFBQVNrTyxHQUEyQkMsRUFBTWpMLEdBQVEsSUFBS2lMLEVBQVEsS0FBTSxJQUFJQyxnQkFBZSw0REFBZ0UsUUFBT2xMLEdBQXlCLGdCQUFUQSxJQUFxQyxrQkFBVEEsR0FBOEJpTCxFQUFQakwsRUFFbE8sUUFBU21MLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSXZPLFdBQVUsaUVBQW9FdU8sR0FBZUQsR0FBU3hOLFVBQVlqRSxPQUFPMlIsT0FBT0QsR0FBY0EsRUFBV3pOLFdBQWEyTixhQUFlMVIsTUFBT3VSLEVBQVU5TixZQUFZLEVBQU9FLFVBQVUsRUFBTUQsY0FBYyxLQUFlOE4sSUFBWTFSLE9BQU82UixlQUFpQjdSLE9BQU82UixlQUFlSixFQUFVQyxHQUFjRCxFQUFTSyxVQUFZSixHQWhCamUsR0FBSXRPLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTTdELE9BQU9DLGVBQWVxRCxFQUFRSSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVSLEVBQWFhLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZVixFQUFpQkgsRUFBWWUsVUFBV0YsR0FBaUJDLEdBQWFYLEVBQWlCSCxFQUFhYyxHQUFxQmQsTStCMTZIaGlCK0csRUFBQXRLLEVBQUEsRy9CODZISW1LLEVBQVVsSyxFQUF1QnFLLEcrQjc2SHJDa1YsRUFBQXhmLEVBQUEsSUFFTWdsQixHL0IrNkhvQi9rQixFQUF1QnVmLEdBVXJDLFNBQVVoTixHK0J4N0hwQixRQUFBd1MsS0FBYSxNQUFBM2hCLEdBQUFxQixLQUFBc2dCLEdBQUF0VCxFQUFBaE4sTUFBQXNnQixFQUFBN1MsV0FBQTlSLE9BQUFvUyxlQUFBdVMsSUFBQXRlLEtBQUFoQyxPL0JvOUhiLE1BM0JBbU4sR0FBVW1ULEVBQU94UyxHQVFqQi9PLEVBQWF1aEIsSUFDWDdnQixJQUFLLFNBQ0w1RCxNQUFPLFcrQjk3SFAsTUFDRTRKLEdBQUEvSixRQUFBZ0ssY0FBQSxXQUFTQyxVQUFVLFdBQ2pCRixFQUFBL0osUUFBQWdLLGNBQUEsT0FBS0MsVUFBVSxhQUNiRixFQUFBL0osUUFBQWdLLGNBQUEsNEIvQjQ4SEQ0YSxHK0JyOUhXN2EsRUFBQS9KLFFBQU0wUyxXQWdCMUJoVCxHQUFPQyxRQUFVaWxCLEcvQjQ4SFgsU0FBVWxsQixFQUFRQyxFQUFTQyxHQUVqQyxZQWFBLFNBQVNDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBRXZGLFFBQVNtRCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUVoSCxRQUFTa08sR0FBMkJDLEVBQU1qTCxHQUFRLElBQUtpTCxFQUFRLEtBQU0sSUFBSUMsZ0JBQWUsNERBQWdFLFFBQU9sTCxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCaUwsRUFBUGpMLEVBRWxPLFFBQVNtTCxHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUl2TyxXQUFVLGlFQUFvRXVPLEdBQWVELEdBQVN4TixVQUFZakUsT0FBTzJSLE9BQU9ELEdBQWNBLEVBQVd6TixXQUFhMk4sYUFBZTFSLE1BQU91UixFQUFVOU4sWUFBWSxFQUFPRSxVQUFVLEVBQU1ELGNBQWMsS0FBZThOLElBQVkxUixPQUFPNlIsZUFBaUI3UixPQUFPNlIsZUFBZUosRUFBVUMsR0FBY0QsRUFBU0ssVUFBWUosR0FoQmplLEdBQUl0TyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU03RCxPQUFPQyxlQUFlcUQsRUFBUUksRUFBV0ksSUFBS0osSUFBaUIsTUFBTyxVQUFVUixFQUFhYSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVYsRUFBaUJILEVBQVllLFVBQVdGO0FBQWlCQyxHQUFhWCxFQUFpQkgsRUFBYWMsR0FBcUJkLE1nQ3ArSGhpQitHLEVBQUF0SyxFQUFBLEdoQ3crSEltSyxFQUFVbEssRUFBdUJxSyxHZ0N2K0hyQ2tWLEVBQUF4ZixFQUFBLElBRU1pbEIsR2hDeStIb0JobEIsRUFBdUJ1ZixHQVVuQyxTQUFVaE4sR2dDbC9IdEIsUUFBQXlTLEtBQWEsTUFBQTVoQixHQUFBcUIsS0FBQXVnQixHQUFBdlQsRUFBQWhOLE1BQUF1Z0IsRUFBQTlTLFdBQUE5UixPQUFBb1MsZUFBQXdTLElBQUF2ZSxLQUFBaEMsT2hDOGdJYixNQTNCQW1OLEdBQVVvVCxFQUFTelMsR0FRbkIvTyxFQUFhd2hCLElBQ1g5Z0IsSUFBSyxTQUNMNUQsTUFBTyxXZ0N4L0hQLE1BQ0U0SixHQUFBL0osUUFBQWdLLGNBQUEsV0FBU0MsVUFBVSxXQUNqQkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsYUFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLDJCaENzZ0lENmEsR2dDL2dJYTlhLEVBQUEvSixRQUFNMFMsV0FnQjVCaFQsR0FBT0MsUUFBVWtsQixHaENzZ0lYLFNBQVVubEIsRUFBUUMsRUFBU0MsR0FFakMsWUFhQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQUV2RixRQUFTbUQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2tPLEdBQTJCQyxFQUFNakwsR0FBUSxJQUFLaUwsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPbEwsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QmlMLEVBQVBqTCxFQUVsTyxRQUFTbUwsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJdk8sV0FBVSxpRUFBb0V1TyxHQUFlRCxHQUFTeE4sVUFBWWpFLE9BQU8yUixPQUFPRCxHQUFjQSxFQUFXek4sV0FBYTJOLGFBQWUxUixNQUFPdVIsRUFBVTlOLFlBQVksRUFBT0UsVUFBVSxFQUFNRCxjQUFjLEtBQWU4TixJQUFZMVIsT0FBTzZSLGVBQWlCN1IsT0FBTzZSLGVBQWVKLEVBQVVDLEdBQWNELEVBQVNLLFVBQVlKLEdBaEJqZSxHQUFJdE8sR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNN0QsT0FBT0MsZUFBZXFELEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVIsRUFBYWEsRUFBWUMsR0FBaUosTUFBOUhELElBQVlWLEVBQWlCSCxFQUFZZSxVQUFXRixHQUFpQkMsR0FBYVgsRUFBaUJILEVBQWFjLEdBQXFCZCxNaUM5aEloaUIrRyxFQUFBdEssRUFBQSxHakNraUlJbUssRUFBVWxLLEVBQXVCcUssR2lDamlJckNrVixFQUFBeGYsRUFBQSxJQUVNa2xCLEdqQ21pSW9CamxCLEVBQXVCdWYsR0FVckMsU0FBVWhOLEdpQzVpSXBCLFFBQUEwUyxLQUFhLE1BQUE3aEIsR0FBQXFCLEtBQUF3Z0IsR0FBQXhULEVBQUFoTixNQUFBd2dCLEVBQUEvUyxXQUFBOVIsT0FBQW9TLGVBQUF5UyxJQUFBeGUsS0FBQWhDLE9qQytrSWIsTUFsQ0FtTixHQUFVcVQsRUFBTzFTLEdBUWpCL08sRUFBYXloQixJQUNYL2dCLElBQUssU0FDTDVELE1BQU8sV2lDbGpJUCxNQUNFNEosR0FBQS9KLFFBQUFnSyxjQUFBLFdBQVNDLFVBQVUsV0FDakJGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGFBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxtQkFDQUQsRUFBQS9KLFFBQUFnSyxjQUFBLFlBQ0VELEVBQUEvSixRQUFBZ0ssY0FBQSxTQUFPL0gsS0FBSyxPQUFPc1QsWUFBWSxVQUMvQnhMLEVBQUEvSixRQUFBZ0ssY0FBQSxTQUFPL0gsS0FBSyxXQUFXc1QsWUFBWSxhQUNuQ3hMLEVBQUEvSixRQUFBZ0ssY0FBQSxTQUFPL0gsS0FBSyxTQUFTZ0ksVUFBVSxTQUFTOUosTUFBTSxpQmpDbWtJakQya0IsR2lDaGxJVy9hLEVBQUEvSixRQUFNMFMsV0FxQjFCaFQsR0FBT0MsUUFBVW1sQixHakNra0lYLFNBQVVwbEIsRUFBUUMsRUFBU0MsR0FFakMsWUFhQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQUV2RixRQUFTbUQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2tPLEdBQTJCQyxFQUFNakwsR0FBUSxJQUFLaUwsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPbEwsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QmlMLEVBQVBqTCxFQUVsTyxRQUFTbUwsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJdk8sV0FBVSxpRUFBb0V1TyxHQUFlRCxHQUFTeE4sVUFBWWpFLE9BQU8yUixPQUFPRCxHQUFjQSxFQUFXek4sV0FBYTJOLGFBQWUxUixNQUFPdVIsRUFBVTlOLFlBQVksRUFBT0UsVUFBVSxFQUFNRCxjQUFjLEtBQWU4TixJQUFZMVIsT0FBTzZSLGVBQWlCN1IsT0FBTzZSLGVBQWVKLEVBQVVDLEdBQWNELEVBQVNLLFVBQVlKLEdBaEJqZSxHQUFJdE8sR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNN0QsT0FBT0MsZUFBZXFELEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVIsRUFBYWEsRUFBWUMsR0FBaUosTUFBOUhELElBQVlWLEVBQWlCSCxFQUFZZSxVQUFXRixHQUFpQkMsR0FBYVgsRUFBaUJILEVBQWFjLEdBQXFCZCxNa0MvbEloaUIrRyxFQUFBdEssRUFBQSxHbENtbUlJbUssRUFBVWxLLEVBQXVCcUssR2tDbG1JckNrVixFQUFBeGYsRUFBQSxJQUVNbWxCLEdsQ29tSW9CbGxCLEVBQXVCdWYsR0FVdkMsU0FBVWhOLEdrQzdtSWxCLFFBQUEyUyxLQUFhLE1BQUE5aEIsR0FBQXFCLEtBQUF5Z0IsR0FBQXpULEVBQUFoTixNQUFBeWdCLEVBQUFoVCxXQUFBOVIsT0FBQW9TLGVBQUEwUyxJQUFBemUsS0FBQWhDLE9sQ3lvSWIsTUEzQkFtTixHQUFVc1QsRUFBSzNTLEdBUWYvTyxFQUFhMGhCLElBQ1hoaEIsSUFBSyxTQUNMNUQsTUFBTyxXa0NubklQLE1BQ0U0SixHQUFBL0osUUFBQWdLLGNBQUEsV0FBU0MsVUFBVSxXQUNqQkYsRUFBQS9KLFFBQUFnSyxjQUFBLE9BQUtDLFVBQVUsYUFDYkYsRUFBQS9KLFFBQUFnSyxjQUFBLDRCbENpb0lEK2EsR2tDMW9JU2hiLEVBQUEvSixRQUFNMFMsV0FnQnhCaFQsR0FBT0MsUUFBVW9sQixHbENpb0lYLFNBQVVybEIsRUFBUUMsRUFBU0MsR0FFakMsWUFhQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQUV2RixRQUFTbUQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2tPLEdBQTJCQyxFQUFNakwsR0FBUSxJQUFLaUwsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPbEwsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QmlMLEVBQVBqTCxFQUVsTyxRQUFTbUwsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJdk8sV0FBVSxpRUFBb0V1TyxHQUFlRCxHQUFTeE4sVUFBWWpFLE9BQU8yUixPQUFPRCxHQUFjQSxFQUFXek4sV0FBYTJOLGFBQWUxUixNQUFPdVIsRUFBVTlOLFlBQVksRUFBT0UsVUFBVSxFQUFNRCxjQUFjLEtBQWU4TixJQUFZMVIsT0FBTzZSLGVBQWlCN1IsT0FBTzZSLGVBQWVKLEVBQVVDLEdBQWNELEVBQVNLLFVBQVlKLEdBaEJqZSxHQUFJdE8sR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNN0QsT0FBT0MsZUFBZXFELEVBQVFJLEVBQVdJLElBQUtKLElBQWlCLE1BQU8sVUFBVVIsRUFBYWEsRUFBWUMsR0FBaUosTUFBOUhELElBQVlWLEVBQWlCSCxFQUFZZSxVQUFXRixHQUFpQkMsR0FBYVgsRUFBaUJILEVBQWFjLEdBQXFCZCxNbUN6cEloaUIrRyxFQUFBdEssRUFBQSxHbkM2cElJbUssRUFBVWxLLEVBQXVCcUssR21DNXBJckNrVixFQUFBeGYsRUFBQSxJQUVNb2xCLEduQzhwSW9CbmxCLEVBQXVCdWYsR0FVL0IsU0FBVWhOLEdtQ3ZxSTFCLFFBQUE0UyxLQUFhLE1BQUEvaEIsR0FBQXFCLEtBQUEwZ0IsR0FBQTFULEVBQUFoTixNQUFBMGdCLEVBQUFqVCxXQUFBOVIsT0FBQW9TLGVBQUEyUyxJQUFBMWUsS0FBQWhDLE9uQ21zSWIsTUEzQkFtTixHQUFVdVQsRUFBYTVTLEdBUXZCL08sRUFBYTJoQixJQUNYamhCLElBQUssU0FDTDVELE1BQU8sV21DN3FJUCxNQUNFNEosR0FBQS9KLFFBQUFnSyxjQUFBLFdBQVNDLFVBQVUsV0FDakJGLEVBQUEvSixRQUFBZ0ssY0FBQSxPQUFLQyxVQUFVLGFBQ2JGLEVBQUEvSixRQUFBZ0ssY0FBQSxxQ25DMnJJRGdiLEdtQ3BzSWlCamIsRUFBQS9KLFFBQU0wUyxXQWdCaENoVCxHQUFPQyxRQUFVcWxCLEduQzJySVgsU0FBVXRsQixFQUFRQyxFQUFTQyxHQUVqQyxZQUdBSyxRQUFPQyxlQUFlUCxFQUFTLGNBQzdCUSxPQUFPLEdBR1QsSUFBSXlHLEdBQVczRyxPQUFPNEcsUUFBVSxTQUFVdEQsR0FBVSxJQUFLLEdBQUlFLEdBQUksRUFBR0EsRUFBSXNDLFVBQVVyQyxPQUFRRCxJQUFLLENBQUUsR0FBSXFELEdBQVNmLFVBQVV0QyxFQUFJLEtBQUssR0FBSU0sS0FBTytDLEdBQWM3RyxPQUFPaUUsVUFBVXNDLGVBQWVGLEtBQUtRLEVBQVEvQyxLQUFRUixFQUFPUSxHQUFPK0MsRUFBTy9DLElBQVksTUFBT1IsR29DdnRJNU8waEIsbUJBQWtCLFdBQTZDLEdBQTVDL1gsR0FBNENuSCxVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxJQUFuQ3NDLE9BQVNzSyxPQUFRLE1BQU91UyxFQUFXbmYsVUFBQSxFQUN4RSxRQUFPbWYsRUFBT2pqQixNQUNaLElBQUssZUFDSCxNQUFBMkUsTUFDS3NHLEdBQ0g3RSxJQUFLNmMsRUFBT25kLFVBRWhCLEtBQUsscUJBQ0gsTUFBQW5CLE1BQ0tzRyxHQUNIeUYsWUFDS3pGLEVBQU15RixRQUNUd1MsU0FBUyxFQUNUeGMsUUFBU3VjLEVBQU92YyxXQUd0QixLQUFLLHVCQUNILE1BQUEvQixNQUNLc0csR0FDSHlGLE9BQVEsTUFFWixLQUFLLGdDQUNILE1BQUEvTCxNQUNLc0csR0FDSHlGLFlBQ0t6RixFQUFNeUYsUUFDVGhLLFFBQVN1YyxFQUFPdmMsV0FHdEIsU0FDRSxNQUFPdUUsS0FJRmtZLHFCQUFxQixXQUE2QyxHQUE1Q2xZLEdBQTRDbkgsVUFBQXJDLE9BQUEsR0FBQS9DLFNBQUFvRixVQUFBLEdBQUFBLFVBQUEsSUFBbkNzQyxPQUFTc0ssT0FBUSxNQUFPdVMsRUFBV25mLFVBQUEsRUFDM0UsUUFBT21mLEVBQU9qakIsTUFDWixJQUFLLGtCQUNILE1BQUEyRSxNQUNLc0csR0FDSDdFLElBQUs2YyxFQUFPOWQsYUFFaEIsS0FBSyx3QkFDSCxNQUFBUixNQUNLc0csR0FDSHlGLE9BQVF1UyxFQUFPaGUsa0JBRW5CLFNBQ0UsTUFBT2dHLEtBSUZtWSxjQUFjLFdBQW9ELEdBQW5EblksR0FBbURuSCxVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxJQUExQ1YsUUFBUSxFQUFPaEUsY0FBZ0I2akIsRUFBV25mLFVBQUEsRUFDM0UsUUFBT21mLEVBQU9qakIsTUFHWixJQUFLLHlCQUNILE1BQUEyRSxNQUNLc2UsRUFBTzlmLFVBRWQsS0FBSyxvQkFDSCxNQUFBd0IsTUFDS3NHLEdBQ0g3TCxVQUFXNmpCLEVBQU9sakIsa0JBRXRCLEtBQUssMEJBQ0gsTUFBQTRFLE1BQ0tzRyxHQUNIekssZUFBZ0J5aUIsRUFBTzFpQix1QkFFM0IsS0FBSyx1QkFDSCxNQUFBb0UsTUFDS3NHLEdBQ0gzSyxTQUFVMmlCLEVBQU81aUIsYUFFckIsS0FBSyxZQUNILE1BQUFzRSxNQUNLc0csR0FDSDdILFFBQVEsR0FFWixLQUFLLGFBQ0gsTUFBQXVCLE1BQ0tzRyxHQUNIN0gsUUFBUSxHQUVaLFNBQ0UsTUFBTzZILEtBSUZvWSxhQUFhLFdBQXdELEdBQXZEcFksR0FBdURuSCxVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxJQUE5Q3dmLFdBQVcsRUFBT0MsU0FBUyxHQUFRTixFQUFXbmYsVUFBQSxFQUM5RSxRQUFRbWYsRUFBT2pqQixNQUNiLElBQUssa0JBQ0gsTUFBQTJFLE1BQ0tzRyxHQUNIcVksV0FBWXJZLEVBQU1xWSxVQUNsQkMsUUFBU3RZLEVBQU1zWSxTQUVuQixLQUFLLGFBQ0gsTUFBQTVlLE1BQ0tzRyxHQUNIcVksV0FBWXJZLEVBQU1xWSxVQUNsQkMsU0FBVXRZLEVBQU1zWSxTQUVwQixLQUFLLFlBQ0gsTUFBQTVlLE1BQ0tzRyxHQUNIcVksV0FBVyxFQUNYQyxTQUFTLEdBRWIsU0FDRSxNQUFPdFksTXBDeXRJUCxTQUFVeE4sRUFBUUMsRUFBU0MsR0FFakMsWXFDdHpJQSxTQUFBNmxCLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQWhpQixNQUNBLElBQUFpaUIsRUFBQSxJQUNBLFNBQUEvRyxPQUFBLGlEQVFBLGFBQUE4RyxFQUFBQyxFQUFBLFdBQUFELEVBQUFDLEVBQUEsT0FHQSxRQUFBQyxHQUFBRixHQUVBLFNBQUFBLEVBQUFoaUIsT0FBQSxFQUFBK2hCLEVBQUFDLEdBR0EsUUFBQUcsR0FBQUgsR0FDQSxHQUFBamlCLEdBQUFxaUIsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFDQVAsRUFBQUQsRUFBQWhpQixNQUNBdWlCLEdBQUFSLEVBQUFDLEdBRUFRLEVBQUEsR0FBQUMsR0FBQSxFQUFBUixFQUFBLEVBQUFNLEdBR0FGLEVBQUFFLEVBQUEsRUFBQU4sRUFBQSxFQUFBQSxDQUVBLElBQUFTLEdBQUEsQ0FFQSxLQUFBM2lCLEVBQUEsRUFBQXFpQixFQUFBLEVBQW9CcmlCLEVBQUFzaUIsRUFBT3RpQixHQUFBLEVBQUFxaUIsR0FBQSxFQUMzQkUsRUFBQUssRUFBQVgsRUFBQVksV0FBQTdpQixLQUFBLEdBQUE0aUIsRUFBQVgsRUFBQVksV0FBQTdpQixFQUFBLFFBQUE0aUIsRUFBQVgsRUFBQVksV0FBQTdpQixFQUFBLE9BQUE0aUIsRUFBQVgsRUFBQVksV0FBQTdpQixFQUFBLElBQ0F5aUIsRUFBQUUsS0FBQUosR0FBQSxPQUNBRSxFQUFBRSxLQUFBSixHQUFBLE1BQ0FFLEVBQUFFLEtBQUEsSUFBQUosQ0FZQSxPQVRBLEtBQUFDLEdBQ0FELEVBQUFLLEVBQUFYLEVBQUFZLFdBQUE3aUIsS0FBQSxFQUFBNGlCLEVBQUFYLEVBQUFZLFdBQUE3aUIsRUFBQSxPQUNBeWlCLEVBQUFFLEtBQUEsSUFBQUosR0FDRyxJQUFBQyxJQUNIRCxFQUFBSyxFQUFBWCxFQUFBWSxXQUFBN2lCLEtBQUEsR0FBQTRpQixFQUFBWCxFQUFBWSxXQUFBN2lCLEVBQUEsT0FBQTRpQixFQUFBWCxFQUFBWSxXQUFBN2lCLEVBQUEsT0FDQXlpQixFQUFBRSxLQUFBSixHQUFBLE1BQ0FFLEVBQUFFLEtBQUEsSUFBQUosR0FHQUUsRUFHQSxRQUFBSyxHQUFBQyxHQUNBLE1BQUFDLEdBQUFELEdBQUEsT0FBQUMsRUFBQUQsR0FBQSxPQUFBQyxFQUFBRCxHQUFBLE1BQUFDLEVBQUEsR0FBQUQsR0FHQSxRQUFBRSxHQUFBQyxFQUFBdk8sRUFBQXdPLEdBR0EsT0FGQVosR0FDQWEsS0FDQXBqQixFQUFBMlUsRUFBcUIzVSxFQUFBbWpCLEVBQVNuakIsR0FBQSxFQUM5QnVpQixHQUFBVyxFQUFBbGpCLElBQUEsS0FBQWtqQixFQUFBbGpCLEVBQUEsT0FBQWtqQixFQUFBbGpCLEVBQUEsR0FDQW9qQixFQUFBOWpCLEtBQUF3akIsRUFBQVAsR0FFQSxPQUFBYSxHQUFBdGdCLEtBQUEsSUFHQSxRQUFBdWdCLEdBQUFILEdBU0EsT0FSQVgsR0FDQUwsRUFBQWdCLEVBQUFqakIsT0FDQXFqQixFQUFBcEIsRUFBQSxFQUNBa0IsRUFBQSxHQUNBRyxLQUNBQyxFQUFBLE1BR0F4akIsRUFBQSxFQUFBeWpCLEVBQUF2QixFQUFBb0IsRUFBMEN0akIsRUFBQXlqQixFQUFVempCLEdBQUF3akIsRUFDcERELEVBQUFqa0IsS0FBQTJqQixFQUFBQyxFQUFBbGpCLElBQUF3akIsRUFBQUMsSUFBQXpqQixFQUFBd2pCLEdBbUJBLE9BZkEsS0FBQUYsR0FDQWYsRUFBQVcsRUFBQWhCLEVBQUEsR0FDQWtCLEdBQUFKLEVBQUFULEdBQUEsR0FDQWEsR0FBQUosRUFBQVQsR0FBQSxNQUNBYSxHQUFBLE1BQ0csSUFBQUUsSUFDSGYsR0FBQVcsRUFBQWhCLEVBQUEsT0FBQWdCLEVBQUFoQixFQUFBLEdBQ0FrQixHQUFBSixFQUFBVCxHQUFBLElBQ0FhLEdBQUFKLEVBQUFULEdBQUEsTUFDQWEsR0FBQUosRUFBQVQsR0FBQSxNQUNBYSxHQUFBLEtBR0FHLEVBQUFqa0IsS0FBQThqQixHQUVBRyxFQUFBemdCLEtBQUEsSUE5R0E1RyxFQUFBaW1CLGFBQ0FqbUIsRUFBQWttQixjQUNBbG1CLEVBQUFtbkIsZUFPQSxRQUxBTCxNQUNBSixLQUNBRixFQUFBLG1CQUFBZ0IsdUJBQUFqaEIsTUFFQWtoQixFQUFBLG1FQUNBM2pCLEVBQUEsRUFBQWtpQixFQUFBeUIsRUFBQTFqQixPQUFrQ0QsRUFBQWtpQixJQUFTbGlCLEVBQzNDZ2pCLEVBQUFoakIsR0FBQTJqQixFQUFBM2pCLEdBQ0E0aUIsRUFBQWUsRUFBQWQsV0FBQTdpQixLQUdBNGlCLEdBQUEsSUFBQUMsV0FBQSxPQUNBRCxFQUFBLElBQUFDLFdBQUEsUXJDKzZJTSxTQUFVNW1CLEVBQVFDLEVBQVNDLEdBRWpDLGNzQ2w4SUEsU0FBQXluQixHQW1EQSxRQUFBQyxLQUNBLElBQ0EsR0FBQXBCLEdBQUEsR0FBQWlCLFlBQUEsRUFFQSxPQURBakIsR0FBQW5VLFdBQXFCQSxVQUFBb1YsV0FBQWpqQixVQUFBcWpCLElBQUEsV0FBbUQsWUFDeEUsS0FBQXJCLEVBQUFxQixPQUNBLGtCQUFBckIsR0FBQXNCLFVBQ0EsSUFBQXRCLEVBQUFzQixTQUFBLEtBQUE1QixXQUNHLE1BQUE2QixHQUNILFVBSUEsUUFBQUMsS0FDQSxNQUFBQyxHQUFBQyxvQkFDQSxXQUNBLFdBR0EsUUFBQUMsR0FBQUMsRUFBQXBrQixHQUNBLEdBQUFna0IsSUFBQWhrQixFQUNBLFNBQUFxa0IsWUFBQSw2QkFjQSxPQVpBSixHQUFBQyxxQkFFQUUsRUFBQSxHQUFBWCxZQUFBempCLEdBQ0Fva0IsRUFBQS9WLFVBQUE0VixFQUFBempCLFlBR0EsT0FBQTRqQixJQUNBQSxFQUFBLEdBQUFILEdBQUFqa0IsSUFFQW9rQixFQUFBcGtCLFVBR0Fva0IsRUFhQSxRQUFBSCxHQUFBM2hCLEVBQUFnaUIsRUFBQXRrQixHQUNBLEtBQUFpa0IsRUFBQUMscUJBQUF0akIsZUFBQXFqQixJQUNBLFVBQUFBLEdBQUEzaEIsRUFBQWdpQixFQUFBdGtCLEVBSUEsb0JBQUFzQyxHQUFBLENBQ0EsbUJBQUFnaUIsR0FDQSxTQUFBcEosT0FDQSxvRUFHQSxPQUFBcUosR0FBQTNqQixLQUFBMEIsR0FFQSxNQUFBa2lCLEdBQUE1akIsS0FBQTBCLEVBQUFnaUIsRUFBQXRrQixHQVdBLFFBQUF3a0IsR0FBQUosRUFBQTNuQixFQUFBNm5CLEVBQUF0a0IsR0FDQSxtQkFBQXZELEdBQ0EsU0FBQWlELFdBQUEsd0NBR0EsMEJBQUEra0IsY0FBQWhvQixZQUFBZ29CLGFBQ0FDLEVBQUFOLEVBQUEzbkIsRUFBQTZuQixFQUFBdGtCLEdBR0EsZ0JBQUF2RCxHQUNBa29CLEVBQUFQLEVBQUEzbkIsRUFBQTZuQixHQUdBTSxFQUFBUixFQUFBM25CLEdBNEJBLFFBQUFvb0IsR0FBQUMsR0FDQSxtQkFBQUEsR0FDQSxTQUFBcGxCLFdBQUEsbUNBQ0csSUFBQW9sQixFQUFBLEVBQ0gsU0FBQVQsWUFBQSx3Q0FJQSxRQUFBVSxHQUFBWCxFQUFBVSxFQUFBRSxFQUFBQyxHQUVBLE1BREFKLEdBQUFDLEdBQ0FBLEdBQUEsRUFDQVgsRUFBQUMsRUFBQVUsR0FFQTduQixTQUFBK25CLEVBSUEsZ0JBQUFDLEdBQ0FkLEVBQUFDLEVBQUFVLEdBQUFFLE9BQUFDLEdBQ0FkLEVBQUFDLEVBQUFVLEdBQUFFLFFBRUFiLEVBQUFDLEVBQUFVLEdBV0EsUUFBQVAsR0FBQUgsRUFBQVUsR0FHQSxHQUZBRCxFQUFBQyxHQUNBVixFQUFBRCxFQUFBQyxFQUFBVSxFQUFBLE1BQUFJLEVBQUFKLEtBQ0FiLEVBQUFDLG9CQUNBLE9BQUFua0IsR0FBQSxFQUFtQkEsRUFBQStrQixJQUFVL2tCLEVBQzdCcWtCLEVBQUFya0IsR0FBQSxDQUdBLE9BQUFxa0IsR0FnQkEsUUFBQU8sR0FBQVAsRUFBQWUsRUFBQUYsR0FLQSxHQUpBLGdCQUFBQSxJQUFBLEtBQUFBLElBQ0FBLEVBQUEsU0FHQWhCLEVBQUFtQixXQUFBSCxHQUNBLFNBQUF2bEIsV0FBQSw2Q0FHQSxJQUFBTSxHQUFBLEVBQUFraUIsRUFBQWlELEVBQUFGLEVBQ0FiLEdBQUFELEVBQUFDLEVBQUFwa0IsRUFFQSxJQUFBcWxCLEdBQUFqQixFQUFBa0IsTUFBQUgsRUFBQUYsRUFTQSxPQVBBSSxLQUFBcmxCLElBSUFva0IsSUFBQW5NLE1BQUEsRUFBQW9OLElBR0FqQixFQUdBLFFBQUFtQixHQUFBbkIsRUFBQXhQLEdBQ0EsR0FBQTVVLEdBQUE0VSxFQUFBNVUsT0FBQSxNQUFBa2xCLEVBQUF0USxFQUFBNVUsT0FDQW9rQixHQUFBRCxFQUFBQyxFQUFBcGtCLEVBQ0EsUUFBQUQsR0FBQSxFQUFpQkEsRUFBQUMsRUFBWUQsR0FBQSxFQUM3QnFrQixFQUFBcmtCLEdBQUEsSUFBQTZVLEVBQUE3VSxFQUVBLE9BQUFxa0IsR0FHQSxRQUFBTSxHQUFBTixFQUFBeFAsRUFBQTRRLEVBQUF4bEIsR0FHQSxHQUZBNFUsRUFBQXNOLFdBRUFzRCxFQUFBLEdBQUE1USxFQUFBc04sV0FBQXNELEVBQ0EsU0FBQW5CLFlBQUEsNEJBR0EsSUFBQXpQLEVBQUFzTixXQUFBc0QsR0FBQXhsQixHQUFBLEdBQ0EsU0FBQXFrQixZQUFBLDRCQW1CQSxPQWZBelAsR0FEQTNYLFNBQUF1b0IsR0FBQXZvQixTQUFBK0MsRUFDQSxHQUFBeWpCLFlBQUE3TyxHQUNHM1gsU0FBQStDLEVBQ0gsR0FBQXlqQixZQUFBN08sRUFBQTRRLEdBRUEsR0FBQS9CLFlBQUE3TyxFQUFBNFEsRUFBQXhsQixHQUdBaWtCLEVBQUFDLHFCQUVBRSxFQUFBeFAsRUFDQXdQLEVBQUEvVixVQUFBNFYsRUFBQXpqQixXQUdBNGpCLEVBQUFtQixFQUFBbkIsRUFBQXhQLEdBRUF3UCxFQUdBLFFBQUFRLEdBQUFSLEVBQUFob0IsR0FDQSxHQUFBNm5CLEVBQUF3QixTQUFBcnBCLEdBQUEsQ0FDQSxHQUFBNmxCLEdBQUEsRUFBQWlELEVBQUE5b0IsRUFBQTRELE9BR0EsT0FGQW9rQixHQUFBRCxFQUFBQyxFQUFBbkMsR0FFQSxJQUFBbUMsRUFBQXBrQixPQUNBb2tCLEdBR0Fob0IsRUFBQXNwQixLQUFBdEIsRUFBQSxJQUFBbkMsR0FDQW1DLEdBR0EsR0FBQWhvQixFQUFBLENBQ0Esc0JBQUFxb0IsY0FDQXJvQixFQUFBdXBCLGlCQUFBbEIsY0FBQSxVQUFBcm9CLEdBQ0Esc0JBQUFBLEdBQUE0RCxRQUFBNGxCLEVBQUF4cEIsRUFBQTRELFFBQ0Fta0IsRUFBQUMsRUFBQSxHQUVBbUIsRUFBQW5CLEVBQUFob0IsRUFHQSxlQUFBQSxFQUFBbUMsTUFBQWtFLEVBQUFyRyxFQUFBa0gsTUFDQSxNQUFBaWlCLEdBQUFuQixFQUFBaG9CLEVBQUFrSCxNQUlBLFNBQUE1RCxXQUFBLHNGQUdBLFFBQUF3bEIsR0FBQWxsQixHQUdBLEdBQUFBLEdBQUFna0IsSUFDQSxTQUFBSyxZQUFBLDBEQUNBTCxJQUFBNWMsU0FBQSxhQUVBLFVBQUFwSCxFQUdBLFFBQUE2bEIsR0FBQTdsQixHQUlBLE9BSEFBLE9BQ0FBLEVBQUEsR0FFQWlrQixFQUFBYyxPQUFBL2tCLEdBK0VBLFFBQUFraUIsR0FBQWlELEVBQUFGLEdBQ0EsR0FBQWhCLEVBQUF3QixTQUFBTixHQUNBLE1BQUFBLEdBQUFubEIsTUFFQSx1QkFBQXlrQixjQUFBLGtCQUFBQSxhQUFBcUIsU0FDQXJCLFlBQUFxQixPQUFBWCxnQkFBQVYsY0FDQSxNQUFBVSxHQUFBakQsVUFFQSxpQkFBQWlELEtBQ0FBLEVBQUEsR0FBQUEsRUFHQSxJQUFBbEQsR0FBQWtELEVBQUFubEIsTUFDQSxRQUFBaWlCLEVBQUEsUUFJQSxLQURBLEdBQUE4RCxJQUFBLElBRUEsT0FBQWQsR0FDQSxZQUNBLGFBQ0EsYUFDQSxNQUFBaEQsRUFDQSxZQUNBLFlBQ0EsSUFBQWhsQixRQUNBLE1BQUErb0IsR0FBQWIsR0FBQW5sQixNQUNBLFlBQ0EsWUFDQSxjQUNBLGVBQ0EsU0FBQWlpQixDQUNBLFdBQ0EsTUFBQUEsS0FBQSxDQUNBLGNBQ0EsTUFBQWdFLEdBQUFkLEdBQUFubEIsTUFDQSxTQUNBLEdBQUErbEIsRUFBQSxNQUFBQyxHQUFBYixHQUFBbmxCLE1BQ0FpbEIsSUFBQSxHQUFBQSxHQUFBL04sY0FDQTZPLEdBQUEsR0FNQSxRQUFBRyxHQUFBakIsRUFBQXZRLEVBQUF3TyxHQUNBLEdBQUE2QyxJQUFBLENBY0EsS0FMQTlvQixTQUFBeVgsS0FBQSxLQUNBQSxFQUFBLEdBSUFBLEVBQUE5VCxLQUFBWixPQUNBLFFBT0EsS0FKQS9DLFNBQUFpbUIsS0FBQXRpQixLQUFBWixVQUNBa2pCLEVBQUF0aUIsS0FBQVosUUFHQWtqQixHQUFBLEVBQ0EsUUFPQSxJQUhBQSxLQUFBLEVBQ0F4TyxLQUFBLEVBRUF3TyxHQUFBeE8sRUFDQSxRQUtBLEtBRkF1USxNQUFBLFVBR0EsT0FBQUEsR0FDQSxVQUNBLE1BQUFrQixHQUFBdmxCLEtBQUE4VCxFQUFBd08sRUFFQSxZQUNBLFlBQ0EsTUFBQWtELEdBQUF4bEIsS0FBQThULEVBQUF3TyxFQUVBLGFBQ0EsTUFBQW1ELEdBQUF6bEIsS0FBQThULEVBQUF3TyxFQUVBLGNBQ0EsYUFDQSxNQUFBb0QsR0FBQTFsQixLQUFBOFQsRUFBQXdPLEVBRUEsY0FDQSxNQUFBcUQsR0FBQTNsQixLQUFBOFQsRUFBQXdPLEVBRUEsWUFDQSxZQUNBLGNBQ0EsZUFDQSxNQUFBc0QsR0FBQTVsQixLQUFBOFQsRUFBQXdPLEVBRUEsU0FDQSxHQUFBNkMsRUFBQSxTQUFBcm1CLFdBQUEscUJBQUF1bEIsRUFDQUEsTUFBQSxJQUFBL04sY0FDQTZPLEdBQUEsR0FTQSxRQUFBVSxHQUFBQyxFQUFBblQsRUFBQW9ULEdBQ0EsR0FBQTVtQixHQUFBMm1CLEVBQUFuVCxFQUNBbVQsR0FBQW5ULEdBQUFtVCxFQUFBQyxHQUNBRCxFQUFBQyxHQUFBNW1CLEVBbUlBLFFBQUE2bUIsR0FBQWpCLEVBQUFrQixFQUFBckIsRUFBQVAsRUFBQTZCLEdBRUEsT0FBQW5CLEVBQUEzbEIsT0FBQSxRQW1CQSxJQWhCQSxnQkFBQXdsQixJQUNBUCxFQUFBTyxFQUNBQSxFQUFBLEdBQ0dBLEVBQUEsV0FDSEEsRUFBQSxXQUNHQSxHQUFBLGFBQ0hBLEdBQUEsWUFFQUEsS0FDQXpOLE1BQUF5TixLQUVBQSxFQUFBc0IsRUFBQSxFQUFBbkIsRUFBQTNsQixPQUFBLEdBSUF3bEIsRUFBQSxJQUFBQSxFQUFBRyxFQUFBM2xCLE9BQUF3bEIsR0FDQUEsR0FBQUcsRUFBQTNsQixPQUFBLENBQ0EsR0FBQThtQixFQUFBLFFBQ0F0QixHQUFBRyxFQUFBM2xCLE9BQUEsTUFDRyxJQUFBd2xCLEVBQUEsR0FDSCxJQUFBc0IsRUFDQSxRQURBdEIsR0FBQSxFQVVBLEdBTEEsZ0JBQUFxQixLQUNBQSxFQUFBNUMsRUFBQU8sS0FBQXFDLEVBQUE1QixJQUlBaEIsRUFBQXdCLFNBQUFvQixHQUVBLFdBQUFBLEVBQUE3bUIsUUFDQSxFQUVBK21CLEVBQUFwQixFQUFBa0IsRUFBQXJCLEVBQUFQLEVBQUE2QixFQUNHLG9CQUFBRCxHQUVILE1BREFBLElBQUEsSUFDQTVDLEVBQUFDLHFCQUNBLGtCQUFBVCxZQUFBampCLFVBQUFnTCxRQUNBc2IsRUFDQXJELFdBQUFqakIsVUFBQWdMLFFBQUE1SSxLQUFBK2lCLEVBQUFrQixFQUFBckIsR0FFQS9CLFdBQUFqakIsVUFBQXdtQixZQUFBcGtCLEtBQUEraUIsRUFBQWtCLEVBQUFyQixHQUdBdUIsRUFBQXBCLEdBQUFrQixHQUFBckIsRUFBQVAsRUFBQTZCLEVBR0EsVUFBQXBuQixXQUFBLHdDQUdBLFFBQUFxbkIsR0FBQXZFLEVBQUFxRSxFQUFBckIsRUFBQVAsRUFBQTZCLEdBbUJBLFFBQUFHLEdBQUFDLEVBQUFubkIsR0FDQSxXQUFBb25CLEVBQ0FELEVBQUFubkIsR0FFQW1uQixFQUFBRSxhQUFBcm5CLEVBQUFvbkIsR0F0QkEsR0FBQUEsR0FBQSxFQUNBRSxFQUFBN0UsRUFBQXhpQixPQUNBc25CLEVBQUFULEVBQUE3bUIsTUFFQSxJQUFBL0MsU0FBQWdvQixJQUNBQSxFQUFBbFIsT0FBQWtSLEdBQUEvTixjQUNBLFNBQUErTixHQUFBLFVBQUFBLEdBQ0EsWUFBQUEsR0FBQSxhQUFBQSxHQUFBLENBQ0EsR0FBQXpDLEVBQUF4aUIsT0FBQSxHQUFBNm1CLEVBQUE3bUIsT0FBQSxFQUNBLFFBRUFtbkIsR0FBQSxFQUNBRSxHQUFBLEVBQ0FDLEdBQUEsRUFDQTlCLEdBQUEsRUFZQSxHQUFBemxCLEVBQ0EsSUFBQSttQixFQUFBLENBQ0EsR0FBQVMsSUFBQSxDQUNBLEtBQUF4bkIsRUFBQXlsQixFQUF3QnpsQixFQUFBc25CLEVBQWV0bkIsSUFDdkMsR0FBQWtuQixFQUFBekUsRUFBQXppQixLQUFBa25CLEVBQUFKLEVBQUFVLEtBQUEsSUFBQXhuQixFQUFBd25CLElBRUEsR0FEQUEsS0FBQSxJQUFBQSxFQUFBeG5CLEdBQ0FBLEVBQUF3bkIsRUFBQSxJQUFBRCxFQUFBLE1BQUFDLEdBQUFKLE1BRUFJLE1BQUEsSUFBQXhuQixLQUFBd25CLEdBQ0FBLEdBQUEsTUFLQSxLQURBL0IsRUFBQThCLEVBQUFELElBQUE3QixFQUFBNkIsRUFBQUMsR0FDQXZuQixFQUFBeWxCLEVBQXdCemxCLEdBQUEsRUFBUUEsSUFBQSxDQUVoQyxPQURBeW5CLElBQUEsRUFDQXBGLEVBQUEsRUFBcUJBLEVBQUFrRixFQUFlbEYsSUFDcEMsR0FBQTZFLEVBQUF6RSxFQUFBemlCLEVBQUFxaUIsS0FBQTZFLEVBQUFKLEVBQUF6RSxHQUFBLENBQ0FvRixHQUFBLENBQ0EsT0FHQSxHQUFBQSxFQUFBLE1BQUF6bkIsR0FJQSxTQWVBLFFBQUEwbkIsR0FBQVAsRUFBQS9CLEVBQUF1QyxFQUFBMW5CLEdBQ0EwbkIsRUFBQUMsT0FBQUQsSUFBQSxDQUNBLElBQUFFLEdBQUFWLEVBQUFsbkIsT0FBQTBuQixDQUNBMW5CLElBR0FBLEVBQUEybkIsT0FBQTNuQixHQUNBQSxFQUFBNG5CLElBQ0E1bkIsRUFBQTRuQixJQUpBNW5CLEVBQUE0bkIsQ0FTQSxJQUFBQyxHQUFBMUMsRUFBQW5sQixNQUNBLElBQUE2bkIsRUFBQSxlQUFBbm9CLFdBQUEscUJBRUFNLEdBQUE2bkIsRUFBQSxJQUNBN25CLEVBQUE2bkIsRUFBQSxFQUVBLFFBQUE5bkIsR0FBQSxFQUFpQkEsRUFBQUMsSUFBWUQsRUFBQSxDQUM3QixHQUFBK25CLEdBQUE3cEIsU0FBQWtuQixFQUFBL0UsT0FBQSxFQUFBcmdCLEVBQUEsTUFDQSxJQUFBZ1ksTUFBQStQLEdBQUEsTUFBQS9uQixFQUNBbW5CLEdBQUFRLEVBQUEzbkIsR0FBQStuQixFQUVBLE1BQUEvbkIsR0FHQSxRQUFBZ29CLEdBQUFiLEVBQUEvQixFQUFBdUMsRUFBQTFuQixHQUNBLE1BQUFnb0IsR0FBQWhDLEVBQUFiLEVBQUErQixFQUFBbG5CLE9BQUEwbkIsR0FBQVIsRUFBQVEsRUFBQTFuQixHQUdBLFFBQUFpb0IsR0FBQWYsRUFBQS9CLEVBQUF1QyxFQUFBMW5CLEdBQ0EsTUFBQWdvQixHQUFBRSxFQUFBL0MsR0FBQStCLEVBQUFRLEVBQUExbkIsR0FHQSxRQUFBbW9CLEdBQUFqQixFQUFBL0IsRUFBQXVDLEVBQUExbkIsR0FDQSxNQUFBaW9CLEdBQUFmLEVBQUEvQixFQUFBdUMsRUFBQTFuQixHQUdBLFFBQUFvb0IsR0FBQWxCLEVBQUEvQixFQUFBdUMsRUFBQTFuQixHQUNBLE1BQUFnb0IsR0FBQS9CLEVBQUFkLEdBQUErQixFQUFBUSxFQUFBMW5CLEdBR0EsUUFBQXFvQixHQUFBbkIsRUFBQS9CLEVBQUF1QyxFQUFBMW5CLEdBQ0EsTUFBQWdvQixHQUFBTSxFQUFBbkQsRUFBQStCLEVBQUFsbkIsT0FBQTBuQixHQUFBUixFQUFBUSxFQUFBMW5CLEdBa0ZBLFFBQUF1bUIsR0FBQVcsRUFBQXhTLEVBQUF3TyxHQUNBLFdBQUF4TyxHQUFBd08sSUFBQWdFLEVBQUFsbkIsT0FDQXVvQixFQUFBbkYsY0FBQThELEdBRUFxQixFQUFBbkYsY0FBQThELEVBQUFqUCxNQUFBdkQsRUFBQXdPLElBSUEsUUFBQWtELEdBQUFjLEVBQUF4UyxFQUFBd08sR0FDQUEsRUFBQWxXLEtBQUFnUixJQUFBa0osRUFBQWxuQixPQUFBa2pCLEVBSUEsS0FIQSxHQUFBc0YsTUFFQXpvQixFQUFBMlUsRUFDQTNVLEVBQUFtakIsR0FBQSxDQUNBLEdBQUF1RixHQUFBdkIsRUFBQW5uQixHQUNBMm9CLEVBQUEsS0FDQUMsRUFBQUYsRUFBQSxNQUNBQSxFQUFBLE1BQ0FBLEVBQUEsTUFDQSxDQUVBLElBQUExb0IsRUFBQTRvQixHQUFBekYsRUFBQSxDQUNBLEdBQUEwRixHQUFBQyxFQUFBQyxFQUFBQyxDQUVBLFFBQUFKLEdBQ0EsT0FDQUYsRUFBQSxNQUNBQyxFQUFBRCxFQUVBLE1BQ0EsUUFDQUcsRUFBQTFCLEVBQUFubkIsRUFBQSxHQUNBLFdBQUE2b0IsS0FDQUcsR0FBQSxHQUFBTixJQUFBLEtBQUFHLEVBQ0FHLEVBQUEsTUFDQUwsRUFBQUssR0FHQSxNQUNBLFFBQ0FILEVBQUExQixFQUFBbm5CLEVBQUEsR0FDQThvQixFQUFBM0IsRUFBQW5uQixFQUFBLEdBQ0EsV0FBQTZvQixJQUFBLFdBQUFDLEtBQ0FFLEdBQUEsR0FBQU4sSUFBQSxPQUFBRyxJQUFBLEtBQUFDLEVBQ0FFLEVBQUEsT0FBQUEsRUFBQSxPQUFBQSxFQUFBLFNBQ0FMLEVBQUFLLEdBR0EsTUFDQSxRQUNBSCxFQUFBMUIsRUFBQW5uQixFQUFBLEdBQ0E4b0IsRUFBQTNCLEVBQUFubkIsRUFBQSxHQUNBK29CLEVBQUE1QixFQUFBbm5CLEVBQUEsR0FDQSxXQUFBNm9CLElBQUEsV0FBQUMsSUFBQSxXQUFBQyxLQUNBQyxHQUFBLEdBQUFOLElBQUEsT0FBQUcsSUFBQSxPQUFBQyxJQUFBLEtBQUFDLEVBQ0FDLEVBQUEsT0FBQUEsRUFBQSxVQUNBTCxFQUFBSyxLQU1BLE9BQUFMLEdBR0FBLEVBQUEsTUFDQUMsRUFBQSxHQUNLRCxFQUFBLFFBRUxBLEdBQUEsTUFDQUYsRUFBQW5wQixLQUFBcXBCLElBQUEsZUFDQUEsRUFBQSxXQUFBQSxHQUdBRixFQUFBbnBCLEtBQUFxcEIsR0FDQTNvQixHQUFBNG9CLEVBR0EsTUFBQUssR0FBQVIsR0FRQSxRQUFBUSxHQUFBQyxHQUNBLEdBQUFoSCxHQUFBZ0gsRUFBQWpwQixNQUNBLElBQUFpaUIsR0FBQWlILEdBQ0EsTUFBQW5WLFFBQUFvVixhQUFBem1CLE1BQUFxUixPQUFBa1YsRUFNQSxLQUZBLEdBQUFULEdBQUEsR0FDQXpvQixFQUFBLEVBQ0FBLEVBQUFraUIsR0FDQXVHLEdBQUF6VSxPQUFBb1YsYUFBQXptQixNQUNBcVIsT0FDQWtWLEVBQUFoUixNQUFBbFksS0FBQW1wQixJQUdBLE9BQUFWLEdBR0EsUUFBQW5DLEdBQUFhLEVBQUF4UyxFQUFBd08sR0FDQSxHQUFBa0csR0FBQSxFQUNBbEcsR0FBQWxXLEtBQUFnUixJQUFBa0osRUFBQWxuQixPQUFBa2pCLEVBRUEsUUFBQW5qQixHQUFBMlUsRUFBcUIzVSxFQUFBbWpCLElBQVNuakIsRUFDOUJxcEIsR0FBQXJWLE9BQUFvVixhQUFBLElBQUFqQyxFQUFBbm5CLEdBRUEsT0FBQXFwQixHQUdBLFFBQUE5QyxHQUFBWSxFQUFBeFMsRUFBQXdPLEdBQ0EsR0FBQWtHLEdBQUEsRUFDQWxHLEdBQUFsVyxLQUFBZ1IsSUFBQWtKLEVBQUFsbkIsT0FBQWtqQixFQUVBLFFBQUFuakIsR0FBQTJVLEVBQXFCM1UsRUFBQW1qQixJQUFTbmpCLEVBQzlCcXBCLEdBQUFyVixPQUFBb1YsYUFBQWpDLEVBQUFubkIsR0FFQSxPQUFBcXBCLEdBR0EsUUFBQWpELEdBQUFlLEVBQUF4UyxFQUFBd08sR0FDQSxHQUFBakIsR0FBQWlGLEVBQUFsbkIsU0FFQTBVLEtBQUEsS0FBQUEsRUFBQSxLQUNBd08sS0FBQSxHQUFBQSxFQUFBakIsS0FBQWlCLEVBQUFqQixFQUdBLFFBREFvSCxHQUFBLEdBQ0F0cEIsRUFBQTJVLEVBQXFCM1UsRUFBQW1qQixJQUFTbmpCLEVBQzlCc3BCLEdBQUFDLEVBQUFwQyxFQUFBbm5CLEdBRUEsT0FBQXNwQixHQUdBLFFBQUE3QyxHQUFBVSxFQUFBeFMsRUFBQXdPLEdBR0EsT0FGQXFHLEdBQUFyQyxFQUFBalAsTUFBQXZELEVBQUF3TyxHQUNBc0YsRUFBQSxHQUNBem9CLEVBQUEsRUFBaUJBLEVBQUF3cEIsRUFBQXZwQixPQUFrQkQsR0FBQSxFQUNuQ3lvQixHQUFBelUsT0FBQW9WLGFBQUFJLEVBQUF4cEIsR0FBQSxJQUFBd3BCLEVBQUF4cEIsRUFBQSxHQUVBLE9BQUF5b0IsR0EwQ0EsUUFBQWdCLEdBQUE5QixFQUFBK0IsRUFBQXpwQixHQUNBLEdBQUEwbkIsRUFBQSxPQUFBQSxFQUFBLFdBQUFyRCxZQUFBLHFCQUNBLElBQUFxRCxFQUFBK0IsRUFBQXpwQixFQUFBLFNBQUFxa0IsWUFBQSx5Q0ErSkEsUUFBQXFGLEdBQUF4QyxFQUFBenFCLEVBQUFpckIsRUFBQStCLEVBQUFqVCxFQUFBd0gsR0FDQSxJQUFBaUcsRUFBQXdCLFNBQUF5QixHQUFBLFNBQUF4bkIsV0FBQSw4Q0FDQSxJQUFBakQsRUFBQStaLEdBQUEvWixFQUFBdWhCLEVBQUEsU0FBQXFHLFlBQUEsb0NBQ0EsSUFBQXFELEVBQUErQixFQUFBdkMsRUFBQWxuQixPQUFBLFNBQUFxa0IsWUFBQSxzQkFrREEsUUFBQXNGLEdBQUF6QyxFQUFBenFCLEVBQUFpckIsRUFBQWtDLEdBQ0FudEIsRUFBQSxJQUFBQSxFQUFBLE1BQUFBLEVBQUEsRUFDQSxRQUFBc0QsR0FBQSxFQUFBcWlCLEVBQUFwVixLQUFBZ1IsSUFBQWtKLEVBQUFsbkIsT0FBQTBuQixFQUFBLEdBQXVEM25CLEVBQUFxaUIsSUFBT3JpQixFQUM5RG1uQixFQUFBUSxFQUFBM25CLElBQUF0RCxFQUFBLFFBQUFtdEIsRUFBQTdwQixFQUFBLEVBQUFBLE1BQ0EsR0FBQTZwQixFQUFBN3BCLEVBQUEsRUFBQUEsR0E4QkEsUUFBQThwQixHQUFBM0MsRUFBQXpxQixFQUFBaXJCLEVBQUFrQyxHQUNBbnRCLEVBQUEsSUFBQUEsRUFBQSxXQUFBQSxFQUFBLEVBQ0EsUUFBQXNELEdBQUEsRUFBQXFpQixFQUFBcFYsS0FBQWdSLElBQUFrSixFQUFBbG5CLE9BQUEwbkIsRUFBQSxHQUF1RDNuQixFQUFBcWlCLElBQU9yaUIsRUFDOURtbkIsRUFBQVEsRUFBQTNuQixHQUFBdEQsSUFBQSxHQUFBbXRCLEVBQUE3cEIsRUFBQSxFQUFBQSxHQUFBLElBbUpBLFFBQUErcEIsR0FBQTVDLEVBQUF6cUIsRUFBQWlyQixFQUFBK0IsRUFBQWpULEVBQUF3SCxHQUNBLEdBQUEwSixFQUFBK0IsRUFBQXZDLEVBQUFsbkIsT0FBQSxTQUFBcWtCLFlBQUEscUJBQ0EsSUFBQXFELEVBQUEsV0FBQXJELFlBQUEsc0JBR0EsUUFBQTBGLEdBQUE3QyxFQUFBenFCLEVBQUFpckIsRUFBQWtDLEVBQUFJLEdBS0EsTUFKQUEsSUFDQUYsRUFBQTVDLEVBQUF6cUIsRUFBQWlyQixFQUFBLGdEQUVBdUMsRUFBQTNFLE1BQUE0QixFQUFBenFCLEVBQUFpckIsRUFBQWtDLEVBQUEsTUFDQWxDLEVBQUEsRUFXQSxRQUFBd0MsR0FBQWhELEVBQUF6cUIsRUFBQWlyQixFQUFBa0MsRUFBQUksR0FLQSxNQUpBQSxJQUNBRixFQUFBNUMsRUFBQXpxQixFQUFBaXJCLEVBQUEsa0RBRUF1QyxFQUFBM0UsTUFBQTRCLEVBQUF6cUIsRUFBQWlyQixFQUFBa0MsRUFBQSxNQUNBbEMsRUFBQSxFQWdJQSxRQUFBeUMsR0FBQUMsR0FJQSxHQUZBQSxFQUFBQyxFQUFBRCxHQUFBampCLFFBQUFtakIsR0FBQSxJQUVBRixFQUFBcHFCLE9BQUEsVUFFQSxNQUFBb3FCLEVBQUFwcUIsT0FBQSxPQUNBb3FCLEdBQUEsR0FFQSxPQUFBQSxHQUdBLFFBQUFDLEdBQUFELEdBQ0EsTUFBQUEsR0FBQXZULEtBQUF1VCxFQUFBdlQsT0FDQXVULEVBQUFqakIsUUFBQSxpQkFHQSxRQUFBbWlCLEdBQUEvVixHQUNBLE1BQUFBLEdBQUEsT0FBQUEsRUFBQW5NLFNBQUEsSUFDQW1NLEVBQUFuTSxTQUFBLElBR0EsUUFBQTRlLEdBQUFiLEVBQUFvRixHQUNBQSxLQUFBQyxHQU1BLFFBTEE5QixHQUNBMW9CLEVBQUFtbEIsRUFBQW5sQixPQUNBeXFCLEVBQUEsS0FDQWxCLEtBRUF4cEIsRUFBQSxFQUFpQkEsRUFBQUMsSUFBWUQsRUFBQSxDQUk3QixHQUhBMm9CLEVBQUF2RCxFQUFBdkMsV0FBQTdpQixHQUdBMm9CLEVBQUEsT0FBQUEsRUFBQSxPQUVBLElBQUErQixFQUFBLENBRUEsR0FBQS9CLEVBQUEsUUFFQTZCLEdBQUEsT0FBQWhCLEVBQUFscUIsS0FBQSxZQUNBLFVBQ1MsR0FBQVUsRUFBQSxJQUFBQyxFQUFBLEVBRVR1cUIsR0FBQSxPQUFBaEIsRUFBQWxxQixLQUFBLFlBQ0EsVUFJQW9yQixFQUFBL0IsQ0FFQSxVQUlBLEdBQUFBLEVBQUEsUUFDQTZCLEdBQUEsT0FBQWhCLEVBQUFscUIsS0FBQSxhQUNBb3JCLEVBQUEvQixDQUNBLFVBSUFBLEdBQUErQixFQUFBLFVBQUEvQixFQUFBLGlCQUNLK0IsS0FFTEYsR0FBQSxPQUFBaEIsRUFBQWxxQixLQUFBLFlBTUEsSUFIQW9yQixFQUFBLEtBR0EvQixFQUFBLEtBQ0EsSUFBQTZCLEdBQUEsVUFDQWhCLEdBQUFscUIsS0FBQXFwQixPQUNLLElBQUFBLEVBQUEsTUFDTCxJQUFBNkIsR0FBQSxVQUNBaEIsR0FBQWxxQixLQUNBcXBCLEdBQUEsTUFDQSxHQUFBQSxFQUFBLFNBRUssSUFBQUEsRUFBQSxPQUNMLElBQUE2QixHQUFBLFVBQ0FoQixHQUFBbHFCLEtBQ0FxcEIsR0FBQSxPQUNBQSxHQUFBLFNBQ0EsR0FBQUEsRUFBQSxTQUVLLE1BQUFBLEVBQUEsU0FTTCxTQUFBeE4sT0FBQSxxQkFSQSxLQUFBcVAsR0FBQSxVQUNBaEIsR0FBQWxxQixLQUNBcXBCLEdBQUEsT0FDQUEsR0FBQSxVQUNBQSxHQUFBLFNBQ0EsR0FBQUEsRUFBQSxNQU9BLE1BQUFhLEdBR0EsUUFBQXJCLEdBQUFrQyxHQUVBLE9BREFNLE1BQ0EzcUIsRUFBQSxFQUFpQkEsRUFBQXFxQixFQUFBcHFCLFNBQWdCRCxFQUVqQzJxQixFQUFBcnJCLEtBQUEsSUFBQStxQixFQUFBeEgsV0FBQTdpQixHQUVBLE9BQUEycUIsR0FHQSxRQUFBcEMsR0FBQThCLEVBQUFHLEdBR0EsT0FGQUksR0FBQUMsRUFBQUMsRUFDQUgsS0FDQTNxQixFQUFBLEVBQWlCQSxFQUFBcXFCLEVBQUFwcUIsV0FDakJ1cUIsR0FBQSxRQURpQ3hxQixFQUdqQzRxQixFQUFBUCxFQUFBeEgsV0FBQTdpQixHQUNBNnFCLEVBQUFELEdBQUEsRUFDQUUsRUFBQUYsRUFBQSxJQUNBRCxFQUFBcnJCLEtBQUF3ckIsR0FDQUgsRUFBQXJyQixLQUFBdXJCLEVBR0EsT0FBQUYsR0FHQSxRQUFBekUsR0FBQW1FLEdBQ0EsTUFBQTdCLEdBQUFwRyxZQUFBZ0ksRUFBQUMsSUFHQSxRQUFBcEMsR0FBQWxqQixFQUFBZ21CLEVBQUFwRCxFQUFBMW5CLEdBQ0EsT0FBQUQsR0FBQSxFQUFpQkEsRUFBQUMsS0FDakJELEVBQUEybkIsR0FBQW9ELEVBQUE5cUIsUUFBQUQsR0FBQStFLEVBQUE5RSxVQUQ2QkQsRUFFN0IrcUIsRUFBQS9xQixFQUFBMm5CLEdBQUE1aUIsRUFBQS9FLEVBRUEsT0FBQUEsR0FHQSxRQUFBNmxCLEdBQUFpQixHQUNBLE1BQUFBOzs7Ozs7QUFqdkRBLEdBQUEwQixHQUFBcnNCLEVBQUEsS0FDQSt0QixFQUFBL3RCLEVBQUEsS0FDQXVHLEVBQUF2RyxFQUFBLElBRUFELEdBQUFnb0IsU0FDQWhvQixFQUFBNHBCLGFBQ0E1cEIsRUFBQTh1QixrQkFBQSxHQTBCQTlHLEVBQUFDLG9CQUFBam5CLFNBQUEwbUIsRUFBQU8sb0JBQ0FQLEVBQUFPLG9CQUNBTixJQUtBM25CLEVBQUErbkIsZUFrRUFDLEVBQUErRyxTQUFBLEtBR0EvRyxFQUFBZ0gsU0FBQSxTQUFBekksR0FFQSxNQURBQSxHQUFBblUsVUFBQTRWLEVBQUF6akIsVUFDQWdpQixHQTJCQXlCLEVBQUFPLEtBQUEsU0FBQS9uQixFQUFBNm5CLEVBQUF0a0IsR0FDQSxNQUFBd2tCLEdBQUEsS0FBQS9uQixFQUFBNm5CLEVBQUF0a0IsSUFHQWlrQixFQUFBQyxzQkFDQUQsRUFBQXpqQixVQUFBNk4sVUFBQW9WLFdBQUFqakIsVUFDQXlqQixFQUFBNVYsVUFBQW9WLFdBQ0EsbUJBQUF5SCxnQkFBQUMsU0FDQWxILEVBQUFpSCxPQUFBQyxXQUFBbEgsR0FFQTFuQixPQUFBQyxlQUFBeW5CLEVBQUFpSCxPQUFBQyxTQUNBMXVCLE1BQUEsS0FDQTBELGNBQUEsS0FpQ0E4akIsRUFBQWMsTUFBQSxTQUFBRCxFQUFBRSxFQUFBQyxHQUNBLE1BQUFGLEdBQUEsS0FBQUQsRUFBQUUsRUFBQUMsSUFpQkFoQixFQUFBTSxZQUFBLFNBQUFPLEdBQ0EsTUFBQVAsR0FBQSxLQUFBTyxJQUtBYixFQUFBbUgsZ0JBQUEsU0FBQXRHLEdBQ0EsTUFBQVAsR0FBQSxLQUFBTyxJQWlIQWIsRUFBQXdCLFNBQUEsU0FBQWlCLEdBQ0EsY0FBQUEsTUFBQTJFLFlBR0FwSCxFQUFBcUgsUUFBQSxTQUFBQyxFQUFBN0UsR0FDQSxJQUFBekMsRUFBQXdCLFNBQUE4RixLQUFBdEgsRUFBQXdCLFNBQUFpQixHQUNBLFNBQUFobkIsV0FBQSw0QkFHQSxJQUFBNnJCLElBQUE3RSxFQUFBLFFBS0EsUUFIQThFLEdBQUFELEVBQUF2ckIsT0FDQXlyQixFQUFBL0UsRUFBQTFtQixPQUVBRCxFQUFBLEVBQUFraUIsRUFBQWpWLEtBQUFnUixJQUFBd04sRUFBQUMsR0FBdUMxckIsRUFBQWtpQixJQUFTbGlCLEVBQ2hELEdBQUF3ckIsRUFBQXhyQixLQUFBMm1CLEVBQUEzbUIsR0FBQSxDQUNBeXJCLEVBQUFELEVBQUF4ckIsR0FDQTByQixFQUFBL0UsRUFBQTNtQixFQUNBLE9BSUEsTUFBQXlyQixHQUFBQyxHQUFBLEVBQ0FBLEVBQUFELEVBQUEsRUFDQSxHQUdBdkgsRUFBQW1CLFdBQUEsU0FBQUgsR0FDQSxPQUFBbFIsT0FBQWtSLEdBQUEvTixlQUNBLFVBQ0EsV0FDQSxZQUNBLFlBQ0EsYUFDQSxhQUNBLGFBQ0EsV0FDQSxZQUNBLGNBQ0EsZUFDQSxRQUNBLFNBQ0EsV0FJQStNLEVBQUF4WSxPQUFBLFNBQUExRCxFQUFBL0gsR0FDQSxJQUFBeUMsRUFBQXNGLEdBQ0EsU0FBQXJJLFdBQUEsOENBR0EsUUFBQXFJLEVBQUEvSCxPQUNBLE1BQUFpa0IsR0FBQWMsTUFBQSxFQUdBLElBQUFobEIsRUFDQSxJQUFBOUMsU0FBQStDLEVBRUEsSUFEQUEsRUFBQSxFQUNBRCxFQUFBLEVBQWVBLEVBQUFnSSxFQUFBL0gsU0FBaUJELEVBQ2hDQyxHQUFBK0gsRUFBQWhJLEdBQUFDLE1BSUEsSUFBQTJsQixHQUFBMUIsRUFBQU0sWUFBQXZrQixHQUNBMHJCLEVBQUEsQ0FDQSxLQUFBM3JCLEVBQUEsRUFBYUEsRUFBQWdJLEVBQUEvSCxTQUFpQkQsRUFBQSxDQUM5QixHQUFBbW5CLEdBQUFuZixFQUFBaEksRUFDQSxLQUFBa2tCLEVBQUF3QixTQUFBeUIsR0FDQSxTQUFBeG5CLFdBQUEsOENBRUF3bkIsR0FBQXhCLEtBQUFDLEVBQUErRixHQUNBQSxHQUFBeEUsRUFBQWxuQixPQUVBLE1BQUEybEIsSUE4Q0ExQixFQUFBL0IsYUEwRUErQixFQUFBempCLFVBQUE2cUIsV0FBQSxFQVFBcEgsRUFBQXpqQixVQUFBbXJCLE9BQUEsV0FDQSxHQUFBMUosR0FBQXJoQixLQUFBWixNQUNBLElBQUFpaUIsRUFBQSxNQUNBLFNBQUFvQyxZQUFBLDRDQUVBLFFBQUF0a0IsR0FBQSxFQUFpQkEsRUFBQWtpQixFQUFTbGlCLEdBQUEsRUFDMUIwbUIsRUFBQTdsQixLQUFBYixJQUFBLEVBRUEsT0FBQWEsT0FHQXFqQixFQUFBempCLFVBQUFvckIsT0FBQSxXQUNBLEdBQUEzSixHQUFBcmhCLEtBQUFaLE1BQ0EsSUFBQWlpQixFQUFBLE1BQ0EsU0FBQW9DLFlBQUEsNENBRUEsUUFBQXRrQixHQUFBLEVBQWlCQSxFQUFBa2lCLEVBQVNsaUIsR0FBQSxFQUMxQjBtQixFQUFBN2xCLEtBQUFiLElBQUEsR0FDQTBtQixFQUFBN2xCLEtBQUFiLEVBQUEsRUFBQUEsRUFBQSxFQUVBLE9BQUFhLE9BR0FxakIsRUFBQXpqQixVQUFBcXJCLE9BQUEsV0FDQSxHQUFBNUosR0FBQXJoQixLQUFBWixNQUNBLElBQUFpaUIsRUFBQSxNQUNBLFNBQUFvQyxZQUFBLDRDQUVBLFFBQUF0a0IsR0FBQSxFQUFpQkEsRUFBQWtpQixFQUFTbGlCLEdBQUEsRUFDMUIwbUIsRUFBQTdsQixLQUFBYixJQUFBLEdBQ0EwbUIsRUFBQTdsQixLQUFBYixFQUFBLEVBQUFBLEVBQUEsR0FDQTBtQixFQUFBN2xCLEtBQUFiLEVBQUEsRUFBQUEsRUFBQSxHQUNBMG1CLEVBQUE3bEIsS0FBQWIsRUFBQSxFQUFBQSxFQUFBLEVBRUEsT0FBQWEsT0FHQXFqQixFQUFBempCLFVBQUE0RyxTQUFBLFdBQ0EsR0FBQXBILEdBQUEsRUFBQVksS0FBQVosTUFDQSxZQUFBQSxFQUFBLEdBQ0EsSUFBQXFDLFVBQUFyQyxPQUFBb21CLEVBQUF4bEIsS0FBQSxFQUFBWixHQUNBa21CLEVBQUF4akIsTUFBQTlCLEtBQUF5QixZQUdBNGhCLEVBQUF6akIsVUFBQXNyQixPQUFBLFNBQUFwRixHQUNBLElBQUF6QyxFQUFBd0IsU0FBQWlCLEdBQUEsU0FBQWhuQixXQUFBLDRCQUNBLE9BQUFrQixRQUFBOGxCLEdBQ0EsSUFBQXpDLEVBQUFxSCxRQUFBMXFCLEtBQUE4bEIsSUFHQXpDLEVBQUF6akIsVUFBQXVyQixRQUFBLFdBQ0EsR0FBQTNCLEdBQUEsR0FDQTVULEVBQUF2YSxFQUFBOHVCLGlCQUtBLE9BSkFucUIsTUFBQVosT0FBQSxJQUNBb3FCLEVBQUF4cEIsS0FBQXdHLFNBQUEsUUFBQW9QLEdBQUF3VixNQUFBLFNBQWtEbnBCLEtBQUEsS0FDbERqQyxLQUFBWixPQUFBd1csSUFBQTRULEdBQUEsVUFFQSxXQUFBQSxFQUFBLEtBR0FuRyxFQUFBempCLFVBQUE4cUIsUUFBQSxTQUFBenJCLEVBQUE2VSxFQUFBd08sRUFBQStJLEVBQUFDLEdBQ0EsSUFBQWpJLEVBQUF3QixTQUFBNWxCLEdBQ0EsU0FBQUgsV0FBQSw0QkFnQkEsSUFiQXpDLFNBQUF5WCxJQUNBQSxFQUFBLEdBRUF6WCxTQUFBaW1CLElBQ0FBLEVBQUFyakIsSUFBQUcsT0FBQSxHQUVBL0MsU0FBQWd2QixJQUNBQSxFQUFBLEdBRUFodkIsU0FBQWl2QixJQUNBQSxFQUFBdHJCLEtBQUFaLFFBR0EwVSxFQUFBLEdBQUF3TyxFQUFBcmpCLEVBQUFHLFFBQUFpc0IsRUFBQSxHQUFBQyxFQUFBdHJCLEtBQUFaLE9BQ0EsU0FBQXFrQixZQUFBLHFCQUdBLElBQUE0SCxHQUFBQyxHQUFBeFgsR0FBQXdPLEVBQ0EsUUFFQSxJQUFBK0ksR0FBQUMsRUFDQSxRQUVBLElBQUF4WCxHQUFBd08sRUFDQSxRQVFBLElBTEF4TyxLQUFBLEVBQ0F3TyxLQUFBLEVBQ0ErSSxLQUFBLEVBQ0FDLEtBQUEsRUFFQXRyQixPQUFBZixFQUFBLFFBU0EsUUFQQTJyQixHQUFBVSxFQUFBRCxFQUNBUixFQUFBdkksRUFBQXhPLEVBQ0F1TixFQUFBalYsS0FBQWdSLElBQUF3TixFQUFBQyxHQUVBVSxFQUFBdnJCLEtBQUFxWCxNQUFBZ1UsRUFBQUMsR0FDQUUsRUFBQXZzQixFQUFBb1ksTUFBQXZELEVBQUF3TyxHQUVBbmpCLEVBQUEsRUFBaUJBLEVBQUFraUIsSUFBU2xpQixFQUMxQixHQUFBb3NCLEVBQUFwc0IsS0FBQXFzQixFQUFBcnNCLEdBQUEsQ0FDQXlyQixFQUFBVyxFQUFBcHNCLEdBQ0EwckIsRUFBQVcsRUFBQXJzQixFQUNBLE9BSUEsTUFBQXlyQixHQUFBQyxHQUFBLEVBQ0FBLEVBQUFELEVBQUEsRUFDQSxHQTZIQXZILEVBQUF6akIsVUFBQTZyQixTQUFBLFNBQUF4RixFQUFBckIsRUFBQVAsR0FDQSxNQUFBcmtCLE1BQUE0SyxRQUFBcWIsRUFBQXJCLEVBQUFQLE1BQUEsR0FHQWhCLEVBQUF6akIsVUFBQWdMLFFBQUEsU0FBQXFiLEVBQUFyQixFQUFBUCxHQUNBLE1BQUEyQixHQUFBaG1CLEtBQUFpbUIsRUFBQXJCLEVBQUFQLEdBQUEsSUFHQWhCLEVBQUF6akIsVUFBQXdtQixZQUFBLFNBQUFILEVBQUFyQixFQUFBUCxHQUNBLE1BQUEyQixHQUFBaG1CLEtBQUFpbUIsRUFBQXJCLEVBQUFQLEdBQUEsSUFrREFoQixFQUFBempCLFVBQUE4a0IsTUFBQSxTQUFBSCxFQUFBdUMsRUFBQTFuQixFQUFBaWxCLEdBRUEsR0FBQWhvQixTQUFBeXFCLEVBQ0F6QyxFQUFBLE9BQ0FqbEIsRUFBQVksS0FBQVosT0FDQTBuQixFQUFBLE1BRUcsSUFBQXpxQixTQUFBK0MsR0FBQSxnQkFBQTBuQixHQUNIekMsRUFBQXlDLEVBQ0ExbkIsRUFBQVksS0FBQVosT0FDQTBuQixFQUFBLE1BRUcsS0FBQTRFLFNBQUE1RSxHQVdILFNBQUF4TSxPQUNBLDBFQVhBd00sSUFBQSxFQUNBNEUsU0FBQXRzQixJQUNBQSxHQUFBLEVBQ0EvQyxTQUFBZ29CLE1BQUEsVUFFQUEsRUFBQWpsQixFQUNBQSxFQUFBL0MsUUFTQSxHQUFBMnFCLEdBQUFobkIsS0FBQVosT0FBQTBuQixDQUdBLEtBRkF6cUIsU0FBQStDLEtBQUE0bkIsS0FBQTVuQixFQUFBNG5CLEdBRUF6QyxFQUFBbmxCLE9BQUEsSUFBQUEsRUFBQSxHQUFBMG5CLEVBQUEsSUFBQUEsRUFBQTltQixLQUFBWixPQUNBLFNBQUFxa0IsWUFBQSx5Q0FHQVksT0FBQSxPQUdBLEtBREEsR0FBQWMsSUFBQSxJQUVBLE9BQUFkLEdBQ0EsVUFDQSxNQUFBd0MsR0FBQTdtQixLQUFBdWtCLEVBQUF1QyxFQUFBMW5CLEVBRUEsWUFDQSxZQUNBLE1BQUErbkIsR0FBQW5uQixLQUFBdWtCLEVBQUF1QyxFQUFBMW5CLEVBRUEsYUFDQSxNQUFBaW9CLEdBQUFybkIsS0FBQXVrQixFQUFBdUMsRUFBQTFuQixFQUVBLGNBQ0EsYUFDQSxNQUFBbW9CLEdBQUF2bkIsS0FBQXVrQixFQUFBdUMsRUFBQTFuQixFQUVBLGNBRUEsTUFBQW9vQixHQUFBeG5CLEtBQUF1a0IsRUFBQXVDLEVBQUExbkIsRUFFQSxZQUNBLFlBQ0EsY0FDQSxlQUNBLE1BQUFxb0IsR0FBQXpuQixLQUFBdWtCLEVBQUF1QyxFQUFBMW5CLEVBRUEsU0FDQSxHQUFBK2xCLEVBQUEsU0FBQXJtQixXQUFBLHFCQUFBdWxCLEVBQ0FBLElBQUEsR0FBQUEsR0FBQS9OLGNBQ0E2TyxHQUFBLElBS0E5QixFQUFBempCLFVBQUErckIsT0FBQSxXQUNBLE9BQ0FodUIsS0FBQSxTQUNBK0UsS0FBQWQsTUFBQWhDLFVBQUF5WCxNQUFBclYsS0FBQWhDLEtBQUE0ckIsTUFBQTVyQixLQUFBLElBd0ZBLElBQUFzb0IsSUFBQSxJQThEQWpGLEdBQUF6akIsVUFBQXlYLE1BQUEsU0FBQXZELEVBQUF3TyxHQUNBLEdBQUFqQixHQUFBcmhCLEtBQUFaLE1BQ0EwVSxPQUNBd08sRUFBQWptQixTQUFBaW1CLEVBQUFqQixJQUFBaUIsRUFFQXhPLEVBQUEsR0FDQUEsR0FBQXVOLEVBQ0F2TixFQUFBLElBQUFBLEVBQUEsSUFDR0EsRUFBQXVOLElBQ0h2TixFQUFBdU4sR0FHQWlCLEVBQUEsR0FDQUEsR0FBQWpCLEVBQ0FpQixFQUFBLElBQUFBLEVBQUEsSUFDR0EsRUFBQWpCLElBQ0hpQixFQUFBakIsR0FHQWlCLEVBQUF4TyxJQUFBd08sRUFBQXhPLEVBRUEsSUFBQStYLEVBQ0EsSUFBQXhJLEVBQUFDLG9CQUNBdUksRUFBQTdyQixLQUFBa2pCLFNBQUFwUCxFQUFBd08sR0FDQXVKLEVBQUFwZSxVQUFBNFYsRUFBQXpqQixjQUNHLENBQ0gsR0FBQWtzQixHQUFBeEosRUFBQXhPLENBQ0ErWCxHQUFBLEdBQUF4SSxHQUFBeUksRUFBQXp2QixPQUNBLFFBQUE4QyxHQUFBLEVBQW1CQSxFQUFBMnNCLElBQWMzc0IsRUFDakMwc0IsRUFBQTFzQixHQUFBYSxLQUFBYixFQUFBMlUsR0FJQSxNQUFBK1gsSUFXQXhJLEVBQUF6akIsVUFBQW1zQixXQUFBLFNBQUFqRixFQUFBeEYsRUFBQThILEdBQ0F0QyxHQUFBLEVBQ0F4RixHQUFBLEVBQ0E4SCxHQUFBUixFQUFBOUIsRUFBQXhGLEVBQUF0aEIsS0FBQVosT0FLQSxLQUhBLEdBQUE2bUIsR0FBQWptQixLQUFBOG1CLEdBQ0FrRixFQUFBLEVBQ0E3c0IsRUFBQSxJQUNBQSxFQUFBbWlCLElBQUEwSyxHQUFBLE1BQ0EvRixHQUFBam1CLEtBQUE4bUIsRUFBQTNuQixHQUFBNnNCLENBR0EsT0FBQS9GLElBR0E1QyxFQUFBempCLFVBQUFxc0IsV0FBQSxTQUFBbkYsRUFBQXhGLEVBQUE4SCxHQUNBdEMsR0FBQSxFQUNBeEYsR0FBQSxFQUNBOEgsR0FDQVIsRUFBQTlCLEVBQUF4RixFQUFBdGhCLEtBQUFaLE9BS0EsS0FGQSxHQUFBNm1CLEdBQUFqbUIsS0FBQThtQixJQUFBeEYsR0FDQTBLLEVBQUEsRUFDQTFLLEVBQUEsSUFBQTBLLEdBQUEsTUFDQS9GLEdBQUFqbUIsS0FBQThtQixJQUFBeEYsR0FBQTBLLENBR0EsT0FBQS9GLElBR0E1QyxFQUFBempCLFVBQUFzc0IsVUFBQSxTQUFBcEYsRUFBQXNDLEdBRUEsTUFEQUEsSUFBQVIsRUFBQTlCLEVBQUEsRUFBQTltQixLQUFBWixRQUNBWSxLQUFBOG1CLElBR0F6RCxFQUFBempCLFVBQUF1c0IsYUFBQSxTQUFBckYsRUFBQXNDLEdBRUEsTUFEQUEsSUFBQVIsRUFBQTlCLEVBQUEsRUFBQTltQixLQUFBWixRQUNBWSxLQUFBOG1CLEdBQUE5bUIsS0FBQThtQixFQUFBLE9BR0F6RCxFQUFBempCLFVBQUE0bUIsYUFBQSxTQUFBTSxFQUFBc0MsR0FFQSxNQURBQSxJQUFBUixFQUFBOUIsRUFBQSxFQUFBOW1CLEtBQUFaLFFBQ0FZLEtBQUE4bUIsSUFBQSxFQUFBOW1CLEtBQUE4bUIsRUFBQSxJQUdBekQsRUFBQXpqQixVQUFBd3NCLGFBQUEsU0FBQXRGLEVBQUFzQyxHQUdBLE1BRkFBLElBQUFSLEVBQUE5QixFQUFBLEVBQUE5bUIsS0FBQVosU0FFQVksS0FBQThtQixHQUNBOW1CLEtBQUE4bUIsRUFBQSxNQUNBOW1CLEtBQUE4bUIsRUFBQSxRQUNBLFNBQUE5bUIsS0FBQThtQixFQUFBLElBR0F6RCxFQUFBempCLFVBQUF5c0IsYUFBQSxTQUFBdkYsRUFBQXNDLEdBR0EsTUFGQUEsSUFBQVIsRUFBQTlCLEVBQUEsRUFBQTltQixLQUFBWixRQUVBLFNBQUFZLEtBQUE4bUIsSUFDQTltQixLQUFBOG1CLEVBQUEsT0FDQTltQixLQUFBOG1CLEVBQUEsTUFDQTltQixLQUFBOG1CLEVBQUEsS0FHQXpELEVBQUF6akIsVUFBQTBzQixVQUFBLFNBQUF4RixFQUFBeEYsRUFBQThILEdBQ0F0QyxHQUFBLEVBQ0F4RixHQUFBLEVBQ0E4SCxHQUFBUixFQUFBOUIsRUFBQXhGLEVBQUF0aEIsS0FBQVosT0FLQSxLQUhBLEdBQUE2bUIsR0FBQWptQixLQUFBOG1CLEdBQ0FrRixFQUFBLEVBQ0E3c0IsRUFBQSxJQUNBQSxFQUFBbWlCLElBQUEwSyxHQUFBLE1BQ0EvRixHQUFBam1CLEtBQUE4bUIsRUFBQTNuQixHQUFBNnNCLENBTUEsT0FKQUEsSUFBQSxJQUVBL0YsR0FBQStGLElBQUEvRixHQUFBN1osS0FBQW1nQixJQUFBLElBQUFqTCxJQUVBMkUsR0FHQTVDLEVBQUF6akIsVUFBQTRzQixVQUFBLFNBQUExRixFQUFBeEYsRUFBQThILEdBQ0F0QyxHQUFBLEVBQ0F4RixHQUFBLEVBQ0E4SCxHQUFBUixFQUFBOUIsRUFBQXhGLEVBQUF0aEIsS0FBQVosT0FLQSxLQUhBLEdBQUFELEdBQUFtaUIsRUFDQTBLLEVBQUEsRUFDQS9GLEVBQUFqbUIsS0FBQThtQixJQUFBM25CLEdBQ0FBLEVBQUEsSUFBQTZzQixHQUFBLE1BQ0EvRixHQUFBam1CLEtBQUE4bUIsSUFBQTNuQixHQUFBNnNCLENBTUEsT0FKQUEsSUFBQSxJQUVBL0YsR0FBQStGLElBQUEvRixHQUFBN1osS0FBQW1nQixJQUFBLElBQUFqTCxJQUVBMkUsR0FHQTVDLEVBQUF6akIsVUFBQTZzQixTQUFBLFNBQUEzRixFQUFBc0MsR0FFQSxNQURBQSxJQUFBUixFQUFBOUIsRUFBQSxFQUFBOW1CLEtBQUFaLFFBQ0EsSUFBQVksS0FBQThtQixJQUNBLElBQUE5bUIsS0FBQThtQixHQUFBLE1BREE5bUIsS0FBQThtQixJQUlBekQsRUFBQXpqQixVQUFBOHNCLFlBQUEsU0FBQTVGLEVBQUFzQyxHQUNBQSxHQUFBUixFQUFBOUIsRUFBQSxFQUFBOW1CLEtBQUFaLE9BQ0EsSUFBQTZtQixHQUFBam1CLEtBQUE4bUIsR0FBQTltQixLQUFBOG1CLEVBQUEsS0FDQSxjQUFBYixFQUFBLFdBQUFBLEtBR0E1QyxFQUFBempCLFVBQUErc0IsWUFBQSxTQUFBN0YsRUFBQXNDLEdBQ0FBLEdBQUFSLEVBQUE5QixFQUFBLEVBQUE5bUIsS0FBQVosT0FDQSxJQUFBNm1CLEdBQUFqbUIsS0FBQThtQixFQUFBLEdBQUE5bUIsS0FBQThtQixJQUFBLENBQ0EsY0FBQWIsRUFBQSxXQUFBQSxLQUdBNUMsRUFBQXpqQixVQUFBZ3RCLFlBQUEsU0FBQTlGLEVBQUFzQyxHQUdBLE1BRkFBLElBQUFSLEVBQUE5QixFQUFBLEVBQUE5bUIsS0FBQVosUUFFQVksS0FBQThtQixHQUNBOW1CLEtBQUE4bUIsRUFBQSxNQUNBOW1CLEtBQUE4bUIsRUFBQSxPQUNBOW1CLEtBQUE4bUIsRUFBQSxRQUdBekQsRUFBQXpqQixVQUFBaXRCLFlBQUEsU0FBQS9GLEVBQUFzQyxHQUdBLE1BRkFBLElBQUFSLEVBQUE5QixFQUFBLEVBQUE5bUIsS0FBQVosUUFFQVksS0FBQThtQixJQUFBLEdBQ0E5bUIsS0FBQThtQixFQUFBLE9BQ0E5bUIsS0FBQThtQixFQUFBLE1BQ0E5bUIsS0FBQThtQixFQUFBLElBR0F6RCxFQUFBempCLFVBQUFrdEIsWUFBQSxTQUFBaEcsRUFBQXNDLEdBRUEsTUFEQUEsSUFBQVIsRUFBQTlCLEVBQUEsRUFBQTltQixLQUFBWixRQUNBaXFCLEVBQUFoRCxLQUFBcm1CLEtBQUE4bUIsR0FBQSxTQUdBekQsRUFBQXpqQixVQUFBbXRCLFlBQUEsU0FBQWpHLEVBQUFzQyxHQUVBLE1BREFBLElBQUFSLEVBQUE5QixFQUFBLEVBQUE5bUIsS0FBQVosUUFDQWlxQixFQUFBaEQsS0FBQXJtQixLQUFBOG1CLEdBQUEsU0FHQXpELEVBQUF6akIsVUFBQW90QixhQUFBLFNBQUFsRyxFQUFBc0MsR0FFQSxNQURBQSxJQUFBUixFQUFBOUIsRUFBQSxFQUFBOW1CLEtBQUFaLFFBQ0FpcUIsRUFBQWhELEtBQUFybUIsS0FBQThtQixHQUFBLFNBR0F6RCxFQUFBempCLFVBQUFxdEIsYUFBQSxTQUFBbkcsRUFBQXNDLEdBRUEsTUFEQUEsSUFBQVIsRUFBQTlCLEVBQUEsRUFBQTltQixLQUFBWixRQUNBaXFCLEVBQUFoRCxLQUFBcm1CLEtBQUE4bUIsR0FBQSxTQVNBekQsRUFBQXpqQixVQUFBc3RCLFlBQUEsU0FBQXJ4QixFQUFBaXJCLEVBQUF4RixFQUFBOEgsR0FJQSxHQUhBdnRCLEtBQ0FpckIsR0FBQSxFQUNBeEYsR0FBQSxHQUNBOEgsRUFBQSxDQUNBLEdBQUErRCxHQUFBL2dCLEtBQUFtZ0IsSUFBQSxJQUFBakwsR0FBQSxDQUNBd0gsR0FBQTlvQixLQUFBbkUsRUFBQWlyQixFQUFBeEYsRUFBQTZMLEVBQUEsR0FHQSxHQUFBbkIsR0FBQSxFQUNBN3NCLEVBQUEsQ0FFQSxLQURBYSxLQUFBOG1CLEdBQUEsSUFBQWpyQixJQUNBc0QsRUFBQW1pQixJQUFBMEssR0FBQSxNQUNBaHNCLEtBQUE4bUIsRUFBQTNuQixHQUFBdEQsRUFBQW13QixFQUFBLEdBR0EsT0FBQWxGLEdBQUF4RixHQUdBK0IsRUFBQXpqQixVQUFBd3RCLFlBQUEsU0FBQXZ4QixFQUFBaXJCLEVBQUF4RixFQUFBOEgsR0FJQSxHQUhBdnRCLEtBQ0FpckIsR0FBQSxFQUNBeEYsR0FBQSxHQUNBOEgsRUFBQSxDQUNBLEdBQUErRCxHQUFBL2dCLEtBQUFtZ0IsSUFBQSxJQUFBakwsR0FBQSxDQUNBd0gsR0FBQTlvQixLQUFBbkUsRUFBQWlyQixFQUFBeEYsRUFBQTZMLEVBQUEsR0FHQSxHQUFBaHVCLEdBQUFtaUIsRUFBQSxFQUNBMEssRUFBQSxDQUVBLEtBREFoc0IsS0FBQThtQixFQUFBM25CLEdBQUEsSUFBQXRELElBQ0FzRCxHQUFBLElBQUE2c0IsR0FBQSxNQUNBaHNCLEtBQUE4bUIsRUFBQTNuQixHQUFBdEQsRUFBQW13QixFQUFBLEdBR0EsT0FBQWxGLEdBQUF4RixHQUdBK0IsRUFBQXpqQixVQUFBeXRCLFdBQUEsU0FBQXh4QixFQUFBaXJCLEVBQUFzQyxHQU1BLE1BTEF2dEIsTUFDQWlyQixHQUFBLEVBQ0FzQyxHQUFBTixFQUFBOW9CLEtBQUFuRSxFQUFBaXJCLEVBQUEsU0FDQXpELEVBQUFDLHNCQUFBem5CLEVBQUF1USxLQUFBOE4sTUFBQXJlLElBQ0FtRSxLQUFBOG1CLEdBQUEsSUFBQWpyQixFQUNBaXJCLEVBQUEsR0FXQXpELEVBQUF6akIsVUFBQTB0QixjQUFBLFNBQUF6eEIsRUFBQWlyQixFQUFBc0MsR0FVQSxNQVRBdnRCLE1BQ0FpckIsR0FBQSxFQUNBc0MsR0FBQU4sRUFBQTlvQixLQUFBbkUsRUFBQWlyQixFQUFBLFdBQ0F6RCxFQUFBQyxxQkFDQXRqQixLQUFBOG1CLEdBQUEsSUFBQWpyQixFQUNBbUUsS0FBQThtQixFQUFBLEdBQUFqckIsSUFBQSxHQUVBa3RCLEVBQUEvb0IsS0FBQW5FLEVBQUFpckIsR0FBQSxHQUVBQSxFQUFBLEdBR0F6RCxFQUFBempCLFVBQUEydEIsY0FBQSxTQUFBMXhCLEVBQUFpckIsRUFBQXNDLEdBVUEsTUFUQXZ0QixNQUNBaXJCLEdBQUEsRUFDQXNDLEdBQUFOLEVBQUE5b0IsS0FBQW5FLEVBQUFpckIsRUFBQSxXQUNBekQsRUFBQUMscUJBQ0F0akIsS0FBQThtQixHQUFBanJCLElBQUEsRUFDQW1FLEtBQUE4bUIsRUFBQSxPQUFBanJCLEdBRUFrdEIsRUFBQS9vQixLQUFBbkUsRUFBQWlyQixHQUFBLEdBRUFBLEVBQUEsR0FVQXpELEVBQUF6akIsVUFBQTR0QixjQUFBLFNBQUEzeEIsRUFBQWlyQixFQUFBc0MsR0FZQSxNQVhBdnRCLE1BQ0FpckIsR0FBQSxFQUNBc0MsR0FBQU4sRUFBQTlvQixLQUFBbkUsRUFBQWlyQixFQUFBLGdCQUNBekQsRUFBQUMscUJBQ0F0akIsS0FBQThtQixFQUFBLEdBQUFqckIsSUFBQSxHQUNBbUUsS0FBQThtQixFQUFBLEdBQUFqckIsSUFBQSxHQUNBbUUsS0FBQThtQixFQUFBLEdBQUFqckIsSUFBQSxFQUNBbUUsS0FBQThtQixHQUFBLElBQUFqckIsR0FFQW90QixFQUFBanBCLEtBQUFuRSxFQUFBaXJCLEdBQUEsR0FFQUEsRUFBQSxHQUdBekQsRUFBQXpqQixVQUFBNnRCLGNBQUEsU0FBQTV4QixFQUFBaXJCLEVBQUFzQyxHQVlBLE1BWEF2dEIsTUFDQWlyQixHQUFBLEVBQ0FzQyxHQUFBTixFQUFBOW9CLEtBQUFuRSxFQUFBaXJCLEVBQUEsZ0JBQ0F6RCxFQUFBQyxxQkFDQXRqQixLQUFBOG1CLEdBQUFqckIsSUFBQSxHQUNBbUUsS0FBQThtQixFQUFBLEdBQUFqckIsSUFBQSxHQUNBbUUsS0FBQThtQixFQUFBLEdBQUFqckIsSUFBQSxFQUNBbUUsS0FBQThtQixFQUFBLE9BQUFqckIsR0FFQW90QixFQUFBanBCLEtBQUFuRSxFQUFBaXJCLEdBQUEsR0FFQUEsRUFBQSxHQUdBekQsRUFBQXpqQixVQUFBOHRCLFdBQUEsU0FBQTd4QixFQUFBaXJCLEVBQUF4RixFQUFBOEgsR0FHQSxHQUZBdnRCLEtBQ0FpckIsR0FBQSxHQUNBc0MsRUFBQSxDQUNBLEdBQUF1RSxHQUFBdmhCLEtBQUFtZ0IsSUFBQSxJQUFBakwsRUFBQSxFQUVBd0gsR0FBQTlvQixLQUFBbkUsRUFBQWlyQixFQUFBeEYsRUFBQXFNLEVBQUEsR0FBQUEsR0FHQSxHQUFBeHVCLEdBQUEsRUFDQTZzQixFQUFBLEVBQ0E0QixFQUFBLENBRUEsS0FEQTV0QixLQUFBOG1CLEdBQUEsSUFBQWpyQixJQUNBc0QsRUFBQW1pQixJQUFBMEssR0FBQSxNQUNBbndCLEVBQUEsT0FBQSt4QixHQUFBLElBQUE1dEIsS0FBQThtQixFQUFBM25CLEVBQUEsS0FDQXl1QixFQUFBLEdBRUE1dEIsS0FBQThtQixFQUFBM25CLElBQUF0RCxFQUFBbXdCLEdBQUEsR0FBQTRCLEVBQUEsR0FHQSxPQUFBOUcsR0FBQXhGLEdBR0ErQixFQUFBempCLFVBQUFpdUIsV0FBQSxTQUFBaHlCLEVBQUFpckIsRUFBQXhGLEVBQUE4SCxHQUdBLEdBRkF2dEIsS0FDQWlyQixHQUFBLEdBQ0FzQyxFQUFBLENBQ0EsR0FBQXVFLEdBQUF2aEIsS0FBQW1nQixJQUFBLElBQUFqTCxFQUFBLEVBRUF3SCxHQUFBOW9CLEtBQUFuRSxFQUFBaXJCLEVBQUF4RixFQUFBcU0sRUFBQSxHQUFBQSxHQUdBLEdBQUF4dUIsR0FBQW1pQixFQUFBLEVBQ0EwSyxFQUFBLEVBQ0E0QixFQUFBLENBRUEsS0FEQTV0QixLQUFBOG1CLEVBQUEzbkIsR0FBQSxJQUFBdEQsSUFDQXNELEdBQUEsSUFBQTZzQixHQUFBLE1BQ0Fud0IsRUFBQSxPQUFBK3hCLEdBQUEsSUFBQTV0QixLQUFBOG1CLEVBQUEzbkIsRUFBQSxLQUNBeXVCLEVBQUEsR0FFQTV0QixLQUFBOG1CLEVBQUEzbkIsSUFBQXRELEVBQUFtd0IsR0FBQSxHQUFBNEIsRUFBQSxHQUdBLE9BQUE5RyxHQUFBeEYsR0FHQStCLEVBQUF6akIsVUFBQWt1QixVQUFBLFNBQUFqeUIsRUFBQWlyQixFQUFBc0MsR0FPQSxNQU5BdnRCLE1BQ0FpckIsR0FBQSxFQUNBc0MsR0FBQU4sRUFBQTlvQixLQUFBbkUsRUFBQWlyQixFQUFBLFlBQ0F6RCxFQUFBQyxzQkFBQXpuQixFQUFBdVEsS0FBQThOLE1BQUFyZSxJQUNBQSxFQUFBLElBQUFBLEVBQUEsSUFBQUEsRUFBQSxHQUNBbUUsS0FBQThtQixHQUFBLElBQUFqckIsRUFDQWlyQixFQUFBLEdBR0F6RCxFQUFBempCLFVBQUFtdUIsYUFBQSxTQUFBbHlCLEVBQUFpckIsRUFBQXNDLEdBVUEsTUFUQXZ0QixNQUNBaXJCLEdBQUEsRUFDQXNDLEdBQUFOLEVBQUE5b0IsS0FBQW5FLEVBQUFpckIsRUFBQSxnQkFDQXpELEVBQUFDLHFCQUNBdGpCLEtBQUE4bUIsR0FBQSxJQUFBanJCLEVBQ0FtRSxLQUFBOG1CLEVBQUEsR0FBQWpyQixJQUFBLEdBRUFrdEIsRUFBQS9vQixLQUFBbkUsRUFBQWlyQixHQUFBLEdBRUFBLEVBQUEsR0FHQXpELEVBQUF6akIsVUFBQW91QixhQUFBLFNBQUFueUIsRUFBQWlyQixFQUFBc0MsR0FVQSxNQVRBdnRCLE1BQ0FpckIsR0FBQSxFQUNBc0MsR0FBQU4sRUFBQTlvQixLQUFBbkUsRUFBQWlyQixFQUFBLGdCQUNBekQsRUFBQUMscUJBQ0F0akIsS0FBQThtQixHQUFBanJCLElBQUEsRUFDQW1FLEtBQUE4bUIsRUFBQSxPQUFBanJCLEdBRUFrdEIsRUFBQS9vQixLQUFBbkUsRUFBQWlyQixHQUFBLEdBRUFBLEVBQUEsR0FHQXpELEVBQUF6akIsVUFBQXF1QixhQUFBLFNBQUFweUIsRUFBQWlyQixFQUFBc0MsR0FZQSxNQVhBdnRCLE1BQ0FpckIsR0FBQSxFQUNBc0MsR0FBQU4sRUFBQTlvQixLQUFBbkUsRUFBQWlyQixFQUFBLDBCQUNBekQsRUFBQUMscUJBQ0F0akIsS0FBQThtQixHQUFBLElBQUFqckIsRUFDQW1FLEtBQUE4bUIsRUFBQSxHQUFBanJCLElBQUEsRUFDQW1FLEtBQUE4bUIsRUFBQSxHQUFBanJCLElBQUEsR0FDQW1FLEtBQUE4bUIsRUFBQSxHQUFBanJCLElBQUEsSUFFQW90QixFQUFBanBCLEtBQUFuRSxFQUFBaXJCLEdBQUEsR0FFQUEsRUFBQSxHQUdBekQsRUFBQXpqQixVQUFBc3VCLGFBQUEsU0FBQXJ5QixFQUFBaXJCLEVBQUFzQyxHQWFBLE1BWkF2dEIsTUFDQWlyQixHQUFBLEVBQ0FzQyxHQUFBTixFQUFBOW9CLEtBQUFuRSxFQUFBaXJCLEVBQUEsMEJBQ0FqckIsRUFBQSxJQUFBQSxFQUFBLFdBQUFBLEVBQUEsR0FDQXduQixFQUFBQyxxQkFDQXRqQixLQUFBOG1CLEdBQUFqckIsSUFBQSxHQUNBbUUsS0FBQThtQixFQUFBLEdBQUFqckIsSUFBQSxHQUNBbUUsS0FBQThtQixFQUFBLEdBQUFqckIsSUFBQSxFQUNBbUUsS0FBQThtQixFQUFBLE9BQUFqckIsR0FFQW90QixFQUFBanBCLEtBQUFuRSxFQUFBaXJCLEdBQUEsR0FFQUEsRUFBQSxHQWdCQXpELEVBQUF6akIsVUFBQXV1QixhQUFBLFNBQUF0eUIsRUFBQWlyQixFQUFBc0MsR0FDQSxNQUFBRCxHQUFBbnBCLEtBQUFuRSxFQUFBaXJCLEdBQUEsRUFBQXNDLElBR0EvRixFQUFBempCLFVBQUF3dUIsYUFBQSxTQUFBdnlCLEVBQUFpckIsRUFBQXNDLEdBQ0EsTUFBQUQsR0FBQW5wQixLQUFBbkUsRUFBQWlyQixHQUFBLEVBQUFzQyxJQVdBL0YsRUFBQXpqQixVQUFBeXVCLGNBQUEsU0FBQXh5QixFQUFBaXJCLEVBQUFzQyxHQUNBLE1BQUFFLEdBQUF0cEIsS0FBQW5FLEVBQUFpckIsR0FBQSxFQUFBc0MsSUFHQS9GLEVBQUF6akIsVUFBQTB1QixjQUFBLFNBQUF6eUIsRUFBQWlyQixFQUFBc0MsR0FDQSxNQUFBRSxHQUFBdHBCLEtBQUFuRSxFQUFBaXJCLEdBQUEsRUFBQXNDLElBSUEvRixFQUFBempCLFVBQUFrbEIsS0FBQSxTQUFBN2xCLEVBQUFzdkIsRUFBQXphLEVBQUF3TyxHQVFBLEdBUEF4TyxNQUFBLEdBQ0F3TyxHQUFBLElBQUFBLE1BQUF0aUIsS0FBQVosUUFDQW12QixHQUFBdHZCLEVBQUFHLFNBQUFtdkIsRUFBQXR2QixFQUFBRyxRQUNBbXZCLE1BQUEsR0FDQWpNLEVBQUEsR0FBQUEsRUFBQXhPLElBQUF3TyxFQUFBeE8sR0FHQXdPLElBQUF4TyxFQUFBLFFBQ0EsUUFBQTdVLEVBQUFHLFFBQUEsSUFBQVksS0FBQVosT0FBQSxRQUdBLElBQUFtdkIsRUFBQSxFQUNBLFNBQUE5SyxZQUFBLDRCQUVBLElBQUEzUCxFQUFBLEdBQUFBLEdBQUE5VCxLQUFBWixPQUFBLFNBQUFxa0IsWUFBQSw0QkFDQSxJQUFBbkIsRUFBQSxXQUFBbUIsWUFBQSwwQkFHQW5CLEdBQUF0aUIsS0FBQVosU0FBQWtqQixFQUFBdGlCLEtBQUFaLFFBQ0FILEVBQUFHLE9BQUFtdkIsRUFBQWpNLEVBQUF4TyxJQUNBd08sRUFBQXJqQixFQUFBRyxPQUFBbXZCLEVBQUF6YSxFQUdBLElBQ0EzVSxHQURBa2lCLEVBQUFpQixFQUFBeE8sQ0FHQSxJQUFBOVQsT0FBQWYsR0FBQTZVLEVBQUF5YSxLQUFBak0sRUFFQSxJQUFBbmpCLEVBQUFraUIsRUFBQSxFQUFxQmxpQixHQUFBLElBQVFBLEVBQzdCRixFQUFBRSxFQUFBb3ZCLEdBQUF2dUIsS0FBQWIsRUFBQTJVLE9BRUcsSUFBQXVOLEVBQUEsTUFBQWdDLEVBQUFDLG9CQUVILElBQUFua0IsRUFBQSxFQUFlQSxFQUFBa2lCLElBQVNsaUIsRUFDeEJGLEVBQUFFLEVBQUFvdkIsR0FBQXZ1QixLQUFBYixFQUFBMlUsT0FHQStPLFlBQUFqakIsVUFBQThhLElBQUExWSxLQUNBL0MsRUFDQWUsS0FBQWtqQixTQUFBcFAsSUFBQXVOLEdBQ0FrTixFQUlBLE9BQUFsTixJQU9BZ0MsRUFBQXpqQixVQUFBd2tCLEtBQUEsU0FBQTZCLEVBQUFuUyxFQUFBd08sRUFBQStCLEdBRUEsbUJBQUE0QixHQUFBLENBU0EsR0FSQSxnQkFBQW5TLElBQ0F1USxFQUFBdlEsRUFDQUEsRUFBQSxFQUNBd08sRUFBQXRpQixLQUFBWixRQUNLLGdCQUFBa2pCLEtBQ0wrQixFQUFBL0IsRUFDQUEsRUFBQXRpQixLQUFBWixRQUVBLElBQUE2bUIsRUFBQTdtQixPQUFBLENBQ0EsR0FBQTBqQixHQUFBbUQsRUFBQWpFLFdBQUEsRUFDQWMsR0FBQSxNQUNBbUQsRUFBQW5ELEdBR0EsR0FBQXptQixTQUFBZ29CLEdBQUEsZ0JBQUFBLEdBQ0EsU0FBQXZsQixXQUFBLDRCQUVBLG9CQUFBdWxCLEtBQUFoQixFQUFBbUIsV0FBQUgsR0FDQSxTQUFBdmxCLFdBQUEscUJBQUF1bEIsT0FFRyxnQkFBQTRCLEtBQ0hBLEdBQUEsSUFJQSxJQUFBblMsRUFBQSxHQUFBOVQsS0FBQVosT0FBQTBVLEdBQUE5VCxLQUFBWixPQUFBa2pCLEVBQ0EsU0FBQW1CLFlBQUEscUJBR0EsSUFBQW5CLEdBQUF4TyxFQUNBLE1BQUE5VCxLQUdBOFQsTUFBQSxFQUNBd08sRUFBQWptQixTQUFBaW1CLEVBQUF0aUIsS0FBQVosT0FBQWtqQixJQUFBLEVBRUEyRCxNQUFBLEVBRUEsSUFBQTltQixFQUNBLG9CQUFBOG1CLEdBQ0EsSUFBQTltQixFQUFBMlUsRUFBbUIzVSxFQUFBbWpCLElBQVNuakIsRUFDNUJhLEtBQUFiLEdBQUE4bUIsTUFFRyxDQUNILEdBQUEwQyxHQUFBdEYsRUFBQXdCLFNBQUFvQixHQUNBQSxFQUNBYixFQUFBLEdBQUEvQixHQUFBNEMsRUFBQTVCLEdBQUE3ZCxZQUNBNmEsRUFBQXNILEVBQUF2cEIsTUFDQSxLQUFBRCxFQUFBLEVBQWVBLEVBQUFtakIsRUFBQXhPLElBQWlCM1UsRUFDaENhLEtBQUFiLEVBQUEyVSxHQUFBNlUsRUFBQXhwQixFQUFBa2lCLEdBSUEsTUFBQXJoQixNQU1BLElBQUEwcEIsSUFBQSx1QnRDb2xKNkIxbkIsS0FBSzNHLEVBQVNDLEVBQW9CLE1BSXpELFNBQVVGLEVBQVFDLEd1Q3JzTXhCLEdBQUFtTCxNQUFpQkEsUUFFakJwTCxHQUFBQyxRQUFBdUcsTUFBQUMsU0FBQSxTQUFBK2YsR0FDQSx3QkFBQXBiLEVBQUF4RSxLQUFBNGYsS3ZDNnNNTSxTQUFVeG1CLEVBQVFDLEd3Q2h0TXhCLEdBQUFtekIsS0FDQSxtQkFBQW5wQixVQUNBQSxPQUFBdVIsV0FDQXZSLE9BQUF1UixTQUFBbFIsY0FHQXRLLEdBQUFDLFFBQUFtekIsR3hDc3RNTSxTQUFVcHpCLEVBQVFDLEd5Q3h0TXhCLFFBQUF1UCxHQUFBZ1gsRUFBQTZNLEdBQ0EsR0FBQTdNLEVBQUFoWCxRQUFBLE1BQUFnWCxHQUFBaFgsUUFBQTZqQixFQUNBLFFBQUF0dkIsR0FBQSxFQUFBa2lCLEVBQUFPLEVBQUF4aUIsT0FBbUNELEVBQUFraUIsRUFBU2xpQixJQUM1QyxHQUFBeWlCLEVBQUF6aUIsS0FBQXN2QixFQUFBLE1BQUF0dkIsRUFDQSxVQUdBLFFBQUF1dkIsR0FBQTFrQixHQUNBLEtBQUFoSyxlQUFBMHVCLElBQUEsVUFBQUEsR0FBQTFrQixFQUVBQSxXQUdBQSxFQUFBMmtCLFdBQUEza0IsR0FBNkIwTSxHQUFBMU0sSUFFN0JoSyxLQUFBZ0ssT0FDQWhLLEtBQUEwVyxHQUFBMU0sRUFBQTBNLElBQUFFLFNBQUFDLEtBQ0EsZ0JBQUE3VyxNQUFBMFcsS0FBQTFXLEtBQUEwVyxHQUFBRSxTQUFBek8sY0FBQW5JLEtBQUEwVyxLQXJCQXRiLEVBQUFDLFFBQUEsU0FBQTJPLEdBQ0EsVUFBQTBrQixHQUFBMWtCLElBdUJBMGtCLEVBQUE5dUIsVUFBQWd2QixJQUFBLFNBQUFqcEIsR0FDQSxHQUFBK1EsR0FBQTFXLEtBQUEwVyxFQUNBLElBQUFBLEVBQUEsQ0FDQSxRQUFBQSxFQUFBL1EsVUFBQSxNQUFBK1EsR0FBQS9RLFdBQ0EsSUFBQW5FLEdBQUFrVixFQUFBL1EsVUFBQThaLE1BQUEsSUFDQSxPQUFBN1UsR0FBQXBKLEVBQUFtRSxJQUFBLEVBQUFuRSxHQUNBQSxFQUFBL0MsS0FBQWtILEdBQ0ErUSxFQUFBL1EsVUFBQW5FLEVBQUFTLEtBQUEsS0FDQVQsS0FHQWt0QixFQUFBOXVCLFVBQUFpdkIsT0FBQSxTQUFBbHBCLEdBQ0EsR0FBQStRLEdBQUExVyxLQUFBMFcsRUFDQSxJQUFBQSxHQUNBLEtBQUFBLEVBQUEvUSxVQUFBLENBQ0EsR0FBQW5FLEdBQUFrVixFQUFBL1EsVUFBQThaLE1BQUEsS0FDQXFQLEVBQUFsa0IsRUFBQXBKLEVBQUFtRSxFQUdBLE9BRkFtcEIsSUFBQSxHQUFBdHRCLEVBQUF1dEIsT0FBQUQsRUFBQSxHQUNBcFksRUFBQS9RLFVBQUFuRSxFQUFBUyxLQUFBLEtBQ0FULElBR0FrdEIsRUFBQTl1QixVQUFBb3ZCLElBQUEsU0FBQXJwQixHQUNBLEdBQUErUSxHQUFBMVcsS0FBQTBXLEVBQ0EsSUFBQUEsRUFBQSxDQUNBLEdBQUFsVixHQUFBa1YsRUFBQS9RLFVBQUE4WixNQUFBLElBQ0EsT0FBQTdVLEdBQUFwSixFQUFBbUUsSUFBQSxJQUdBK29CLEVBQUE5dUIsVUFBQXF2QixPQUFBLFNBQUF0cEIsR0FDQSxHQUFBK1EsR0FBQTFXLEtBQUEwVyxFQUNBQSxLQUNBMVcsS0FBQWd2QixJQUFBcnBCLEdBQUEzRixLQUFBNnVCLE9BQUFscEIsR0FDQTNGLEtBQUE0dUIsSUFBQWpwQixNekNvdU1NLFNBQVV2SyxFQUFRQyxHQUV4QixLQUFNLElBQUlpZixPQUFNLG1KQUlWLFNBQVVsZixFQUFRQyxFQUFTQyxHMENueU1qQyxHQUFBZ0c7Ozs7O0NBTUEsV0FDQSxZQUVBLElBQUFrdEIsS0FDQSxtQkFBQW5wQixVQUNBQSxPQUFBdVIsV0FDQXZSLE9BQUF1UixTQUFBbFIsZUFHQXdwQixHQUVBVixZQUVBVyxjQUFBLG1CQUFBQyxRQUVBQyxxQkFDQWIsTUFBQW5wQixPQUFBc1UsbUJBQUF0VSxPQUFBdVUsYUFFQTBWLGVBQUFkLEtBQUFucEIsT0FBQWtxQixPQUtBanVCLEdBQUEsV0FDQSxNQUFBNHRCLElBQ0dsdEIsS0FBQTNHLEVBQUFDLEVBQUFELEVBQUFELEtBQUFpQixTQUFBaUYsSUFBQWxHLEVBQUFDLFFBQUFpRyxRMUNpek1NLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUVILFNBQVVsRyxFQUFRQyxHMkNuMk14QkEsRUFBQWdyQixLQUFBLFNBQUF0QixFQUFBK0IsRUFBQTBJLEVBQUFDLEVBQUFDLEdBQ0EsR0FBQXZNLEdBQUE0QyxFQUNBNEosRUFBQSxFQUFBRCxFQUFBRCxFQUFBLEVBQ0FHLEdBQUEsR0FBQUQsR0FBQSxFQUNBRSxFQUFBRCxHQUFBLEVBQ0FFLEdBQUEsRUFDQTN3QixFQUFBcXdCLEVBQUFFLEVBQUEsSUFDQUssRUFBQVAsR0FBQSxJQUNBeFosRUFBQStPLEVBQUErQixFQUFBM25CLEVBT0EsS0FMQUEsR0FBQTR3QixFQUVBNU0sRUFBQW5OLEdBQUEsSUFBQThaLEdBQUEsRUFDQTlaLEtBQUE4WixFQUNBQSxHQUFBSCxFQUNRRyxFQUFBLEVBQVczTSxFQUFBLElBQUFBLEVBQUE0QixFQUFBK0IsRUFBQTNuQixNQUFBNHdCLEVBQUFELEdBQUEsR0FLbkIsSUFIQS9KLEVBQUE1QyxHQUFBLElBQUEyTSxHQUFBLEVBQ0EzTSxLQUFBMk0sRUFDQUEsR0FBQUwsRUFDUUssRUFBQSxFQUFXL0osRUFBQSxJQUFBQSxFQUFBaEIsRUFBQStCLEVBQUEzbkIsTUFBQTR3QixFQUFBRCxHQUFBLEdBRW5CLE9BQUEzTSxFQUNBQSxFQUFBLEVBQUEwTSxNQUNHLElBQUExTSxJQUFBeU0sRUFDSCxNQUFBN0osR0FBQWlLLEtBQUFoYSxHQUFBLE1BQUE0VCxJQUVBN0QsSUFBQTNaLEtBQUFtZ0IsSUFBQSxFQUFBa0QsR0FDQXRNLEdBQUEwTSxFQUVBLE9BQUE3WixHQUFBLEtBQUErUCxFQUFBM1osS0FBQW1nQixJQUFBLEVBQUFwSixFQUFBc00sSUFHQXAwQixFQUFBcXBCLE1BQUEsU0FBQUssRUFBQWxwQixFQUFBaXJCLEVBQUEwSSxFQUFBQyxFQUFBQyxHQUNBLEdBQUF2TSxHQUFBNEMsRUFBQWdFLEVBQ0E0RixFQUFBLEVBQUFELEVBQUFELEVBQUEsRUFDQUcsR0FBQSxHQUFBRCxHQUFBLEVBQ0FFLEVBQUFELEdBQUEsRUFDQUssRUFBQSxLQUFBUixFQUFBcmpCLEtBQUFtZ0IsSUFBQSxPQUFBbmdCLEtBQUFtZ0IsSUFBQSxTQUNBcHRCLEVBQUFxd0IsRUFBQSxFQUFBRSxFQUFBLEVBQ0FLLEVBQUFQLEVBQUEsS0FDQXhaLEVBQUFuYSxFQUFBLE9BQUFBLEdBQUEsRUFBQUEsRUFBQSxLQW1DQSxLQWpDQUEsRUFBQXVRLEtBQUFJLElBQUEzUSxHQUVBc2IsTUFBQXRiLFFBQUErdEIsS0FDQTdELEVBQUE1TyxNQUFBdGIsR0FBQSxJQUNBc25CLEVBQUF5TSxJQUVBek0sRUFBQS9XLEtBQUE4TixNQUFBOU4sS0FBQXJPLElBQUFsQyxHQUFBdVEsS0FBQThqQixLQUNBcjBCLEdBQUFrdUIsRUFBQTNkLEtBQUFtZ0IsSUFBQSxHQUFBcEosSUFBQSxJQUNBQSxJQUNBNEcsR0FBQSxHQUdBbHVCLEdBREFzbkIsRUFBQTBNLEdBQUEsRUFDQUksRUFBQWxHLEVBRUFrRyxFQUFBN2pCLEtBQUFtZ0IsSUFBQSxJQUFBc0QsR0FFQWgwQixFQUFBa3VCLEdBQUEsSUFDQTVHLElBQ0E0RyxHQUFBLEdBR0E1RyxFQUFBME0sR0FBQUQsR0FDQTdKLEVBQUEsRUFDQTVDLEVBQUF5TSxHQUNLek0sRUFBQTBNLEdBQUEsR0FDTDlKLEdBQUFscUIsRUFBQWt1QixFQUFBLEdBQUEzZCxLQUFBbWdCLElBQUEsRUFBQWtELEdBQ0F0TSxHQUFBME0sSUFFQTlKLEVBQUFscUIsRUFBQXVRLEtBQUFtZ0IsSUFBQSxFQUFBc0QsRUFBQSxHQUFBempCLEtBQUFtZ0IsSUFBQSxFQUFBa0QsR0FDQXRNLEVBQUEsSUFJUXNNLEdBQUEsRUFBVzFLLEVBQUErQixFQUFBM25CLEdBQUEsSUFBQTRtQixFQUFBNW1CLEdBQUE0d0IsRUFBQWhLLEdBQUEsSUFBQTBKLEdBQUEsR0FJbkIsSUFGQXRNLEtBQUFzTSxFQUFBMUosRUFDQTRKLEdBQUFGLEVBQ1FFLEVBQUEsRUFBVTVLLEVBQUErQixFQUFBM25CLEdBQUEsSUFBQWdrQixFQUFBaGtCLEdBQUE0d0IsRUFBQTVNLEdBQUEsSUFBQXdNLEdBQUEsR0FFbEI1SyxFQUFBK0IsRUFBQTNuQixFQUFBNHdCLElBQUEsSUFBQS9aLEkzQzAyTVMsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FFSCxTQUFVNWEsRUFBUUMsRUFBU0MsRzRDemdOakMsR0FBQTYwQixHQUFBNzBCLEVBQUEsR0FDQWlILEVBQUFqSCxFQUFBLEdBRUE4MEIsRUFBQSxTQUVBQyxFQUFBRixFQUFBRyxhQUNBQyxZQUFBLGVBQ0FDLFdBQ0FDLFdBQUFOLEVBQUFPLFVBQUFuTSxPQUFBb00sWUFFQUMsU0FDQUMsVUFBQSxXQUNBL3lCLFFBQUFpWSxLQUFBLDZCQUdBK2EsWUFBQSxTQUFBM04sR0FDQUEsRUFBQTROLGdCQUNBLElBQUE3eEIsR0FBQWMsS0FBQWQsTUFDQTh4QixHQUFxQkMsTUFBQS94QixFQUFBdXhCLFdBQ3JCSixHQUFBUSxVQUFBRyxFQUFBLFdBQ0E5eEIsRUFBQUQsU0FBQW14QixFQUNBL3FCLE9BQUEyYSxLQUFBOWdCLEVBQUF3UyxHQUFBMGUsR0FFQS9xQixPQUFBbVYsU0FBQXRKLEtBQUFoUyxFQUFBd1MsS0FJQXhTLEVBQUF1UixTQUNBdlIsRUFBQXVSLFFBQUEwUyxJQUlBK04sT0FBQSxXQUNBLEdBQUFoeUIsR0FBQXFELEtBQXlCdkMsS0FBQWQsT0FDekJnUyxLQUFBbFIsS0FBQWQsTUFBQXdTLEdBQ0FqQixRQUFBelEsS0FBQTh3QixhQUdBLGNBREE1eEIsR0FBQXV4QixXQUNBTixFQUFBenFCLGNBQUEsSUFBQXhHLEtBSUE5RCxHQUFBQyxRQUFBZzFCLEc1Q2doTk0sU0FBVWoxQixFQUFRQyxFQUFTQyxHNkMvaU5qQyxHQUFBNjFCLEdBQUE3MUIsRUFBQSxLQUNBODFCLEVBQUE5MUIsRUFBQSxLQUNBMmEsRUFBQTNhLEVBQUEsS0FFQXlhLEVBQUF6YSxFQUFBLEtBQ0F5QyxFQUFBekMsRUFBQSxLQUVBKzFCLEdBQUEsRUFDQUMsR0FBQSxFQUVBL2lCLEVBQUEsU0FBQXlILEdBQ0EsTUFBQW1iLEdBQUFuYixFQUFBc2IsSUFHQUMsR0FDQXhxQixXQUFBLFNBQUF5cUIsRUFBQW50QixHQUNBLE1BQUFtdEIsSUFLQW50QixJQUNBQSxFQUFBb3RCLE9BQUFwdEIsRUFBQW90QixTQUFBLElBQ0FKLEdBQUEsR0FHQWh0QixFQUFBcXRCLGFBQUEsSUFDQUosR0FBQSxJQU1BLFNBQUFueUIsRUFBQTZXLEVBQUEyYixFQUFBQyxFQUFBOWxCLEVBQUE2ZSxFQUFBNUUsR0FDQTVtQixFQUFBLHNCQUFBMk0sRUFDQTNNLEVBQUEyTSxHQUFBM00sRUFBQTJNLElBQUEsWUFDQTNNLEVBQUEyTSxHQUFBd0csRUFBQW5ULEVBQUEyTSxHQUFBd0csT0FBQTdULEtBQUFnRCxZQUNPdEMsRUFBQTJNLEdBQUEyVixFQUFBLEtBQUFvUSxNQUNQbEgsRUFBQTNVLEVBQUF0USxjQUFBaXNCLEdBQ0E1TCxFQUFBL1AsRUFBQThiLHFCQUFBSCxHQUFBLEdBQ0FoSCxFQUFBb0gsTUFBQSxFQUNBcEgsRUFBQXptQixJQUFBMHRCLEVBQ0E3TCxFQUFBalAsV0FBQWtiLGFBQUFySCxFQUFBNUUsSUFDSzFnQixPQUFBdVIsU0FBQSxvRUFHTHZTLEtBQUE0dEIsVUFDQUMsR0FBQSxTQUFBVixFQUFBbnRCLEVBQUE0dEIsV0FFQUMsR0FBQSxTQUFBVixFQUFBLGNBaENBemIsR0FBQSw2Q0F3Q0FtYyxHQUFBLFdBQ0EsTUFBQXp3QixXQUFBckMsT0FBQSxHQUNBOHlCLEdBQUFwd0IsTUFBQTlCLEtBQUF5QixnQkFDQTR2QixJQUNBdHpCLEVBQUEsMkJBQ0FBLEVBQUEsbUJBQUFvMEIsS0FBQUMsYUFBQS9hLE1BQUF2VixNQUFBTCxnQkFNQXl3QixJQVFBeFgsSUFBQSxTQUFBMlgsR0FDQSxxQkFBQUgsSUFBQSxDQUNBLElBQUFHLEVBRUEsV0FEQXRjLEdBQUEsdUNBSUEsb0JBQUFzYyxHQUVBLFdBREF0YyxHQUFBLDhDQUlBLEtBQUFwYSxPQUFBcUgsS0FBQXF2QixHQUFBanpCLFFBQ0EyVyxFQUFBLHdDQUdBbWMsR0FBQSxNQUFBRyxHQUVBaEIsSUFDQXR6QixFQUFBLG1DQUNBQSxFQUFBLHNCQUFBbzBCLEtBQUFDLFVBQUFDLE9BV0FDLEtBQUEsU0FBQUMsR0FDQSxrQkFBQUwsTUFDQUEsR0FBQSxPQUFBSyxHQUVBbEIsSUFDQXR6QixFQUFBLG1DQUNBQSxFQUFBLHFCQUFBbzBCLEtBQUFDLFVBQUFHLE9BVUExWCxTQUFBLFNBQUFnQyxHQUNBLE1BQUFBLElBS0FBLEVBQUE1RyxFQUFBNEcsR0FDQSxLQUFBQSxNQUNBOUcsR0FBQSxzREFJQSxrQkFBQW1jLE1BQ0FBLEdBQUEsa0JBQUFyVixHQUVBd1UsSUFDQXR6QixFQUFBLHdDQUNBQSxFQUFBLGNBQUE4ZSxXQWZBOUcsR0FBQSxvQ0EwQkF5YyxVQUFBLFNBQUFDLEdBQ0EsSUFBQUEsRUFFQSxXQURBMWMsR0FBQSxpREFPQSxJQUhBMGMsRUFBQXhjLEVBQUF3YyxHQUNBQSxFQUFBckIsRUFBQXFCLEdBRUEsS0FBQUEsRUFFQSxXQURBMWMsR0FBQSxvRUFJQSxzQkFBQW1jLElBQUEsQ0FDQU8sRUFBQXhjLEVBQUF3YyxFQUNBLElBQUE1VixHQUFBLFVBQUE0VixDQUNBUCxJQUFBLGtCQUFBclYsR0FFQXdVLElBQ0F0ekIsRUFBQSx3Q0FDQUEsRUFBQSxjQUFBOGUsTUFhQTZWLE9BQUEsU0FBQWpnQixHQUNBLHFCQUFBeWYsSUFBQSxDQUNBLEtBQUF6ZixLQUFBa2dCLFVBQUFsZ0IsRUFBQW1nQixVQUNBbmdCLEVBQUE1VyxPQUFBLGdCQUFBNFcsR0FBQTVXLE9BSUEsV0FIQWthLEdBQUEseUdBT0EsSUFBQXdjLElBQ0FNLFFBQUEsU0FDQUMsZUFBQXZrQixFQUFBa0UsRUFBQWtnQixVQUNBSSxVQUFBeGtCLEVBQUFrRSxFQUFBbWdCLFVBQ0FJLFlBQUF2Z0IsRUFBQTVXLE1BR0E0VyxHQUFBd2UsUUFDQXNCLEVBQUFVLFlBQUExa0IsRUFBQWtFLEVBQUF3ZSxRQUdBanhCLEtBQUFzeUIsS0FBQUMsS0FhQW5pQixNQUFBLFNBQUFxQyxHQUNBLHFCQUFBeWYsSUFBQSxDQUdBLElBQUF6ZixNQUFBa2dCLFdBQUFsZ0IsRUFBQW1PLE9BRUEsV0FEQTdLLEdBQUEsd0RBS0EsSUFBQXdjLElBQ0FNLFFBQUEsUUFDQUssY0FBQTNrQixFQUFBa0UsRUFBQWtnQixVQUNBUSxZQUFBNWtCLEVBQUFrRSxFQUFBbU8sUUFJQW5PLEdBQUF3ZSxRQUNBc0IsRUFBQTlCLFdBQUFsaUIsRUFBQWtFLEVBQUF3ZSxRQUdBeGUsRUFBQTVXLFFBQ0EsZ0JBQUE0VyxHQUFBNVcsTUFDQWthLEVBQUEsNkNBRUF3YyxFQUFBYSxXQUFBM2dCLEVBQUE1VyxPQUlBNFcsRUFBQTRnQixpQkFDQSxpQkFBQTVnQixHQUFBNGdCLGVBQ0F0ZCxFQUFBLDRDQUVBd2MsRUFBQWMsZUFBQTVnQixFQUFBNGdCLGdCQUlBNWdCLEVBQUE2Z0IsWUFDQSxnQkFBQTdnQixHQUFBNmdCLFVBQ0F2ZCxFQUFBLHdDQUVBLHdCQUFBbkwsUUFBQTZILEVBQUE2Z0IsY0FBQSxHQUNBdmQsRUFBQSxtRkFHQXdjLEVBQUFlLFVBQUE3Z0IsRUFBQTZnQixZQUtBdHpCLEtBQUFzeUIsS0FBQUMsS0FVQWdCLFVBQUEsU0FBQTlnQixHQUNBLHFCQUFBeWYsSUFBQSxDQUdBLEdBQUFLLElBQ0FNLFFBQUEsWUFJQXBnQixHQUFBekMsY0FDQXVpQixFQUFBaUIsY0FBQWpsQixFQUFBa0UsRUFBQXpDLGNBR0EsbUJBQUF5QyxHQUFBZ2hCLFFBQ0EsaUJBQUFoaEIsR0FBQWdoQixNQUNBMWQsRUFBQSxtQ0FFQXdjLEVBQUFtQixRQUFBamhCLEVBQUFnaEIsT0FLQXp6QixLQUFBc3lCLEtBQUFDLEtBSUFvQixRQU9BQyxRQUFBLFNBQUFwa0IsRUFBQW5MLEdBQ0EscUJBQUE2dEIsSUFHQSxNQUFBMWlCLElBS0FBLEVBQUF5RyxFQUFBekcsR0FDQSxLQUFBQSxNQUNBdUcsR0FBQSxrREFLQTFSLEVBQ0EsZ0JBQUFBLE9BQ0EwUixHQUFBLDJDQUlBLElBQUFwYSxPQUFBcUgsS0FBQXFCLEdBQUFqRixRQUNBMlcsRUFBQSx1Q0FHQW1jLEdBQUEsVUFBQTFpQixFQUFBbkwsUUFFQWd0QixHQUNBdHpCLEVBQUEseUJBQUF5UixFQUFBLE1BQUEyaUIsS0FBQUMsVUFBQS90QixHQUFBLFNBS0E2dEIsR0FBQSxVQUFBMWlCLFFBRUE2aEIsR0FDQXR6QixFQUFBLHlCQUFBeVIsRUFBQSxjQWhDQXVHLEdBQUEscUNBaURBOGQsUUFBQSxXQUNBLEdBSUFDLEdBQ0FDLEVBTEF0aEIsRUFBQTdRLE1BQUFoQyxVQUFBeVgsTUFBQXJWLEtBQUFQLFdBRUF1eUIsRUFBQXZoQixFQUFBLEdBQ0FtTyxFQUFBbk8sRUFBQSxFQVdBLElBUEEsSUFBQUEsRUFBQXJULE9BQ0EwMEIsRUFBQXJoQixFQUFBLElBRUFzaEIsRUFBQXRoQixFQUFBLEdBQ0FxaEIsRUFBQXJoQixFQUFBLElBR0Esa0JBQUF5ZixJQUNBLG1CQUFBOEIsR0FDQWplLEVBQUEsaURBQ1Msb0JBQUE2SyxHQUNUN0ssRUFBQSw2Q0FDUyxDQUNULEdBQUFrZSxHQUFBRCxFQUFBLElBQUFwVCxDQUNBa1QsTUFBQSxLQUNBQyxHQUFBRCxHQUNBNUIsR0FBQStCLEVBQUFGLEVBQUFELEdBQ0F6QyxJQUNBdHpCLEVBQUEsY0FBQWsyQixFQUFBLE9BQ0FsMkIsRUFBQSxnQkFBQWcyQixFQUFBLG1CQUFBNUIsS0FBQUMsVUFBQTBCLE1BRVdBLEdBQ1g1QixHQUFBK0IsRUFBQUgsR0FDQXpDLElBQ0F0ekIsRUFBQSxjQUFBazJCLEVBQUEsT0FDQWwyQixFQUFBLGlCQUFBbzBCLEtBQUFDLFVBQUEwQixPQUdBNUIsR0FBQStCLEdBQ0E1QyxHQUNBdHpCLEVBQUEsY0FBQWsyQixFQUFBLFdBZUFDLGFBQUEsU0FBQXpoQixFQUFBMGhCLEdBQ0EscUJBQUFBLEdBRUEsV0FEQXBlLEdBQUEsbUNBSUEsc0JBQUFtYyxJQUFBLENBR0EsSUFBQXpmLE1BQUF3ZSxNQUVBLFdBREFsYixHQUFBLDJDQUtBLElBQUF3YyxJQUNBTSxRQUFBLFFBQ0FLLGNBQUEsV0FDQUMsWUFBQSxRQUNBMUMsV0FBQWxpQixFQUFBa0UsRUFBQXdlLFFBR0FtRCxHQUFBLEVBQ0FDLEVBQUEsV0FJQUQsR0FBQSxFQUVBRCxLQVFBRyxFQUFBdHBCLFdBQUFxcEIsRUFBQSxLQUVBRSxFQUFBLFdBQ0F6bkIsYUFBQXduQixHQUNBRixHQUNBRCxJQUlBNUIsR0FBQTRCLFlBQUFJLEVBR0F2MEIsS0FBQXN5QixLQUFBQyxPQUlBdm5CLFlBQUFtcEIsRUFBQSxLQUtBOUQsRUFBQS8wQixFQUFBLElBQ0ErMEIsR0FBQW1FLGNBQUFuRSxFQUFBUSxVQUNBUixFQUFBUSxVQUFBVSxFQUFBMkMsYUFBQWhsQixLQUFBcWlCLEdBQ0FBLEVBQUFsQixlQUVBajFCLEVBQUFDLFFBQUFrMkIsRzdDaWtOTSxTQUFVbjJCLEVBQVFDLEc4Qy9pT3hCLFFBQUEwQyxHQUFBaVksR0FDQWxZLFFBQUEyMkIsS0FBQSxhQUFBemUsR0FHQTVhLEVBQUFDLFFBQUEwQyxHOUNzak9NLFNBQVUzQyxFQUFRQyxFQUFTQyxHK0Nwak9qQyxRQUFBNjFCLEdBQUFuYixFQUFBMGIsR0FDQSxNQUFBZ0QsR0FBQTFlLElBQ0FELEVBQUEsb0RBQ0E0ZSxHQUdBakQsRUFDQWtELEVBQUE1ZSxHQUdBQSxFQWhCQSxHQUFBMGUsR0FBQXA1QixFQUFBLEtBQ0FzNUIsRUFBQXQ1QixFQUFBLEtBQ0F5YSxFQUFBemEsRUFBQSxLQUVBcTVCLEVBQUEsb0NBZUF2NUIsR0FBQUMsUUFBQTgxQixHL0Npa09NLFNBQVUvMUIsRUFBUUMsR2dEbGxPeEIsUUFBQXE1QixHQUFBMWUsR0FFQSxvQkFBQWhFLEtBQUFnRSxHQUdBNWEsRUFBQUMsUUFBQXE1QixHaEQybE9NLFNBQVV0NUIsRUFBUUMsR2lEbG1PeEIsUUFBQSsxQixHQUFBcGIsR0FLQSxNQUpBLE1BQUFBLEVBQUE2ZSxVQUFBLE9BQ0E3ZSxJQUFBNmUsVUFBQSxJQUdBN2UsRUFHQTVhLEVBQUFDLFFBQUErMUIsR2pEeW1PTSxTQUFVaDJCLEVBQVFDLEVBQVNDLEdrRHptT2pDLFFBQUFzNUIsR0FBQTVlLEdBQ0EsR0FBQThlLEdBQUEsNEVBR0EsT0FGQTllLEdBQUFDLEVBQUFELEdBRUFBLEVBQUF6UCxRQUFBLDZDQUFBNmtCLEVBQUF2bkIsRUFBQXFLLEdBQ0EsTUFBQXJLLEdBQUEsR0FDQUEsRUFBQXVuQixFQUFBaHNCLFNBQUE4TyxFQUFBOU8sUUFDQWdzQixFQUFBMkosT0FBQUQsSUFBQSxHQUNBLE1BQUE1bUIsRUFBQThtQixPQUFBbnhCLEVBQUEsS0FDQSxNQUFBcUssRUFBQThtQixPQUFBbnhCLEVBQUF1bkIsRUFBQWhzQixTQUFBLE1BQUE4TyxFQUFBOG1CLE9BQUFueEIsRUFBQSxLQUNBcUssRUFBQThtQixPQUFBbnhCLEVBQUEsR0FBQWt4QixPQUFBLFlBQ0EzSixFQUFBOVUsY0FHQThVLEVBQUE1TCxPQUFBLEdBQUF1VixPQUFBLGdCQUNBM0osRUFHQUEsRUFBQTRKLE9BQUEsR0FBQUMsY0FBQTdKLEVBQUE1TCxPQUFBLEtBcEJBLEdBQUF2SixHQUFBM2EsRUFBQSxJQXdCQUYsR0FBQUMsUUFBQXU1QixHbER3bk9NLFNBQVV4NUIsRUFBUUMsRUFBU0MsR21EMW9PakMsUUFBQTQ1QixHQUFBQyxHQUNBLE1BQUFBLEtBYkEsR0FBQWhGLEdBQUE3MEIsRUFBQSxHQUNBODVCLEVBQUE5NUIsRUFBQSxJQUNBNHpCLEVBQUE1ekIsRUFBQSxLQUNBKzVCLEVBQUFsRixFQUFBbUYsY0FBQWg2QixFQUFBLE1BQ0FpNkIsRUFBQWo2QixFQUFBLEtBQ0FrNkIsRUFBQWw2QixFQUFBLEtBQ0FtNkIsRUFBQW42QixFQUFBLElBQUFvNkIsb0NBQ0FDLEVBQUFyNkIsRUFBQSxJQUVBczZCLEVBQUExRyxFQUFBVixVQUFBbnBCLE9BQUF3d0IsZUFDQUMsRUFBQTVHLEVBQUFWLFVBQUE1WCxTQUFBQyxNQUFtRWtmLFlBQUEsY0FNbkVDLEVBQUE3RixFQUFBRyxhQUVBQyxZQUFBLFFBQ0FLLFNBQ0FxRixjQUFBLFNBQUE5ZixHQUNBMmYsRUFBQVAsRUFBQVcsV0FBQS9mLElBRUFnZ0IsVUFBQSxjQU9BM0YsV0FDQXp2QixPQUFBb3ZCLEVBQUFPLFVBQUEwRixLQUFBekYsV0FDQTdtQixNQUFBcW1CLEVBQUFPLFVBQUEyRixPQUNBblgsUUFBQWlSLEVBQUFPLFVBQUFuZCxPQUNBK2lCLFFBQUFuRyxFQUFBTyxVQUFBbmQsU0FFQWdqQixnQkFBQXBHLEVBQUFPLFVBQUFuTSxPQUNBaVMsV0FBQXJHLEVBQUFPLFVBQUErRixXQUFBYixHQUNBYyxZQUFBdkcsRUFBQU8sVUFBQW5lLEtBQ0FwQixlQUFBZ2YsRUFBQU8sVUFBQW5lLEtBQ0FsQixlQUFBOGUsRUFBQU8sVUFBQWlHLE9BQ0FDLFlBQUF6RyxFQUFBTyxVQUFBMEYsS0FDQVMsMEJBQUExRyxFQUFBTyxVQUFBMEYsS0FDQWpCLGVBQUFoRixFQUFBTyxVQUFBbmUsS0FDQXVrQixLQUFBM0csRUFBQU8sVUFBQW5NLE9BQ0FuVCxhQUFBK2UsRUFBQU8sVUFBQW5NLE9BQUFvTSxZQUdBb0csZ0JBQUEsV0FDQSxPQUNBaDJCLFFBQUEsRUFDQXcxQixnQkFBQSxtQkFDQUssYUFBQSxFQUNBdmxCLGVBQUEsRUFDQXdsQiwyQkFBQSxFQUNBMUIsZUFBQSxXQUFtQyxNQUFBdmUsVUFBQUMsUUFJbkNtZ0Isa0JBQUEsV0FDQWgzQixLQUFBaTNCLEtBQUFyZ0IsU0FBQWxSLGNBQUEsT0FDQTFGLEtBQUFpM0IsS0FBQXR4QixVQUFBM0YsS0FBQWQsTUFBQXEzQixlQUVBLElBQUFXLEdBQUFoQyxFQUFBbDFCLEtBQUFkLE1BQUFpMkIsZUFDQStCLEdBQUFuQixZQUFBLzFCLEtBQUFpM0IsTUFDQWozQixLQUFBbTNCLGFBQUFuM0IsS0FBQWQsUUFHQWs0QiwwQkFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFwQyxFQUFBbDFCLEtBQUFkLE1BQUFpMkIsZ0JBQ0FvQyxFQUFBckMsRUFBQW1DLEVBQUFsQyxlQUVBb0MsS0FBQUQsSUFDQUEsRUFBQUUsWUFBQXgzQixLQUFBaTNCLE1BQ0FNLEVBQUF4QixZQUFBLzFCLEtBQUFpM0IsT0FHQWozQixLQUFBbTNCLGFBQUFFLElBR0FJLHFCQUFBLFdBQ0F6M0IsS0FBQWQsTUFBQTAzQixhQUNBckIsRUFBQW1DLEtBQUExM0IsS0FBQWQsTUFBQXMzQixZQUdBcEIsRUFBQXVDLHVCQUFBMzNCLEtBQUFpM0IsS0FDQSxJQUFBQyxHQUFBaEMsRUFBQWwxQixLQUFBZCxNQUFBaTJCLGVBQ0ErQixHQUFBTSxZQUFBeDNCLEtBQUFpM0IsTUFDQXpCLEVBQUE1ZSxTQUFBQyxNQUFBZ1ksT0FBQSwyQkFHQXNJLGFBQUEsU0FBQWo0QixHQUNBQSxFQUFBNkIsT0FDQXkwQixFQUFBNWUsU0FBQUMsTUFBQStYLElBQUEsMEJBRUE0RyxFQUFBNWUsU0FBQUMsTUFBQWdZLE9BQUEsMEJBR0EzdkIsRUFBQTAzQixhQUNBckIsRUFBQXRHLE9BQUEvdkIsRUFBQTZCLE9BQUE3QixFQUFBczNCLFlBR0F4MkIsS0FBQTQzQixPQUFBbkMsRUFBQXoxQixLQUFBcTFCLEVBQUFNLEtBQXdFejJCLEdBQVUyNEIsY0FBQTdCLEVBQUE2QixpQkFBbUM3M0IsS0FBQWkzQixPQUdySC9GLE9BQUEsV0FDQSxNQUFBZixHQUFBMkgsSUFBQUMsYUFJQS9CLEdBQUE2QixlQUNBdkIsU0FDQTBCLFNBQUEsUUFDQUMsSUFBQSxFQUNBanZCLEtBQUEsRUFDQWt2QixNQUFBLEVBQ0FDLE9BQUEsRUFDQUMsZ0JBQUEsNkJBRUFsWixTQUNBOFksU0FBQSxXQUNBQyxJQUFBLE9BQ0FqdkIsS0FBQSxPQUNBa3ZCLE1BQUEsT0FDQUMsT0FBQSxPQUNBRSxPQUFBLGlCQUNBQyxXQUFBLE9BQ0FDLFNBQUEsT0FDQUMsd0JBQUEsUUFDQUMsYUFBQSxNQUNBQyxRQUFBLE9BQ0FDLFFBQUEsU0FJQXY5QixFQUFBQyxRQUFBMjZCLEduRDZwT00sU0FBVTU2QixFQUFRQyxFQUFTQyxHb0RweU9qQyxHQUFBNjBCLEdBQUE3MEIsRUFBQSxHQUNBczlCLEVBQUF6SSxFQUFBMkgsSUFBQWMsSUFDQUMsRUFBQXY5QixFQUFBLEtBQ0F3OUIsRUFBQXg5QixFQUFBLEtBQ0FxNkIsRUFBQXI2QixFQUFBLElBR0F5OUIsR0FDQXpDLFNBQ0EwQyxLQUFBLHNCQUNBQyxVQUFBLGtDQUNBQyxZQUFBLHFDQUVBaGEsU0FDQThaLEtBQUEsc0JBQ0FDLFVBQUEsa0NBQ0FDLFlBQUEscUNBSUE5OUIsR0FBQUMsUUFBQTgwQixFQUFBRyxhQUVBQyxZQUFBLGNBQ0E0SSxZQUFBLEtBRUFwQyxnQkFBQSxXQUNBLE9BQ0FqdEIsT0FDQXdzQixXQUNBcFgsY0FLQWthLGdCQUFBLFdBQ0EsT0FDQUgsV0FBQSxFQUNBQyxhQUFBLElBSUFsQyxrQkFBQSxXQUVBaDNCLEtBQUFkLE1BQUE2QixTQUNBZixLQUFBcTVCLHFCQUFBLEdBQ0FyNUIsS0FBQWdnQixTQUlBeVgscUJBQUEsV0FDQTNxQixhQUFBOU0sS0FBQXM1QixhQUdBbEMsMEJBQUEsU0FBQUMsSUFFQXIzQixLQUFBZCxNQUFBNkIsUUFBQXMyQixFQUFBdDJCLFFBQ0FmLEtBQUFxNUIscUJBQUEsR0FDQXI1QixLQUFBZ2dCLFFBQ0toZ0IsS0FBQWQsTUFBQTZCLFNBQUFzMkIsRUFBQXQyQixRQUNMZixLQUFBdTVCLFNBSUFDLG1CQUFBLFdBQ0F4NUIsS0FBQXk1QixtQkFDQXo1QixLQUFBMDVCLGVBQ0ExNUIsS0FBQXE1QixxQkFBQSxLQUlBQSxvQkFBQSxTQUFBTSxHQUNBMzVCLEtBQUF5NUIsaUJBQUFFLEdBR0EzWixLQUFBLFdBQ0FoZ0IsS0FBQTRJLE1BQUFxd0IsV0FBQWo1QixLQUFBNEksTUFBQXN3QixhQUNBcHNCLGFBQUE5TSxLQUFBczVCLFlBQ0F0NUIsS0FBQXdJLFVBQXFCMHdCLGFBQUEsTUFFckJMLEVBQUFlLGlCQUFBNTVCLEtBQUFpM0IsTUFDQTRCLEVBQUFnQixvQkFDQTc1QixLQUFBd0ksVUFBcUJ6SCxRQUFBLEdBQWEsV0FDbENmLEtBQUF3SSxVQUF1Qnl3QixXQUFBLElBRXZCajVCLEtBQUFkLE1BQUE2QixRQUFBZixLQUFBZCxNQUFBdzNCLGFBQ0ExMkIsS0FBQWQsTUFBQXczQixlQUVPeG5CLEtBQUFsUCxTQUlQdTVCLE1BQUEsV0FDQXY1QixLQUFBZCxNQUFBbVMsZUFBQSxFQUNBclIsS0FBQTg1QixtQkFFQTk1QixLQUFBKzVCLHVCQUdBTCxhQUFBLFdBRUExNUIsS0FBQWc2QixtQkFDQWg2QixLQUFBaTZCLEtBQUEvYSxRQUFBeWEsU0FJQUcsaUJBQUEsV0FDQTk1QixLQUFBd0ksVUFBbUIwd0IsYUFBQSxHQUFrQixXQUNyQ2w1QixLQUFBczVCLFdBQUF0dUIsV0FBQWhMLEtBQUErNUIsb0JBQUEvNUIsS0FBQWQsTUFBQW1TLGlCQUNLbkMsS0FBQWxQLFFBR0wrNUIsb0JBQUEsV0FDQS81QixLQUFBd0ksVUFDQTB3QixhQUFBLEVBQ0FuNEIsUUFBQSxFQUNBazRCLFdBQUEsR0FDS2o1QixLQUFBazZCLGFBR0xBLFdBQUEsV0FDQXJCLEVBQUFzQixjQUNBdEIsRUFBQXVCLHVCQUdBQyxjQUFBLFNBQUFqcUIsR0FDQSxHQUFBQSxFQUFBa3FCLFNBQUF4QixFQUFBOTRCLEtBQUFpNkIsS0FBQS9hLFFBQUE5TyxHQUNBLElBQUFBLEVBQUFrcUIsVUFDQWxxQixFQUFBMmdCLGlCQUNBL3dCLEtBQUF1NkIsYUFBQW5xQixLQUlBb3FCLHVCQUFBLFNBQUFwcUIsR0FDQSxPQUFBcFEsS0FBQW01QixjQUNBbjVCLEtBQUFtNUIsYUFBQSxJQUlBc0IscUJBQUEsU0FBQXJxQixHQUNBcFEsS0FBQW01QixhQUFBbjVCLEtBQUFkLE1BQUEyM0IsNEJBQ0E3MkIsS0FBQTA2QixvQkFDQTE2QixLQUFBdTZCLGFBQUFucUIsR0FFQXBRLEtBQUEwNUIsZ0JBRUExNUIsS0FBQW01QixZQUFBLE1BR0F3Qix1QkFBQSxTQUFBdnFCLEdBQ0FwUSxLQUFBbTVCLGFBQUEsR0FHQXlCLHFCQUFBLFNBQUF4cUIsR0FDQXBRLEtBQUFtNUIsYUFBQSxHQUdBb0IsYUFBQSxTQUFBbnFCLEdBQ0FwUSxLQUFBMDZCLHFCQUNBMTZCLEtBQUFkLE1BQUFpUyxlQUFBZixJQUdBc3FCLGtCQUFBLFdBQ0EsTUFBQTE2QixNQUFBZCxNQUFBaVMsZ0JBR0EwcEIsZUFBQSxXQUNBLE9BQUE3NkIsS0FBQWQsTUFBQTZCLFNBQUFmLEtBQUE0SSxNQUFBc3dCLGFBR0FjLGdCQUFBLFdBQ0EsTUFBQXBqQixVQUFBa2tCLGdCQUFBOTZCLEtBQUFpNkIsS0FBQS9hLFNBQUFsZixLQUFBaTZCLEtBQUEvYSxRQUFBNmIsU0FBQW5rQixTQUFBa2tCLGdCQUdBRSxlQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQXYxQixHQUFBb3pCLEVBQUFrQyxHQUFBakMsSUFLQSxPQUpBaDVCLE1BQUE0SSxNQUFBcXdCLFlBQ0F0ekIsR0FBQSxJQUFBb3pCLEVBQUFrQyxHQUFBaEMsV0FDQWo1QixLQUFBNEksTUFBQXN3QixjQUNBdnpCLEdBQUEsSUFBQW96QixFQUFBa0MsR0FBQS9CLGFBQ0FnQyxFQUFBdjFCLEVBQUEsSUFBQXUxQixFQUFBdjFCLEdBR0F1ckIsT0FBQSxXQUNBLEdBQUFpSyxHQUFBbjdCLEtBQUFkLE1BQUEsYUFBbURjLEtBQUFkLE1BQUEyNEIsY0FBQTNZLFFBQ25Ea2MsRUFBQXA3QixLQUFBZCxNQUFBLG9CQUEwRGMsS0FBQWQsTUFBQTI0QixjQUFBdkIsT0FFMUQsT0FBQXQyQixNQUFBNjZCLGlCQUFBakMsSUFDQUEsR0FDQXlDLElBQUEsVUFDQTExQixVQUFBM0YsS0FBQWc3QixlQUFBLFVBQUFoN0IsS0FBQWQsTUFBQW84QixrQkFDQXh4QixNQUFBNnJCLEtBQXdCeUYsRUFBQXA3QixLQUFBZCxNQUFBNEssTUFBQXdzQixhQUN4QmlGLFlBQUF2N0IsS0FBQXc2Qix1QkFDQWdCLFVBQUF4N0IsS0FBQXk2QixzQkFFQTdCLEdBQ0F5QyxJQUFBLFVBQ0F2eEIsTUFBQTZyQixLQUEwQndGLEVBQUFuN0IsS0FBQWQsTUFBQTRLLE1BQUFvVixhQUMxQnZaLFVBQUEzRixLQUFBZzdCLGVBQUEsVUFBQWg3QixLQUFBZCxNQUFBeUcsV0FDQXFSLFNBQUEsS0FDQXlrQixVQUFBejdCLEtBQUFxNkIsY0FDQWtCLFlBQUF2N0IsS0FBQTI2Qix1QkFDQWEsVUFBQXg3QixLQUFBNDZCLHFCQUNBOUQsS0FBQTkyQixLQUFBZCxNQUFBNDNCLEtBQ0E0RSxhQUFBMTdCLEtBQUFkLE1BQUFrUyxjQUVBcFIsS0FBQWQsTUFBQXFJLGVwRGd6T00sU0FBVW5NLEVBQVFDLEdxRDMvT3hCLFFBQUE2NkIsR0FBQS9mLEdBQ0EsbUJBQUFBLEdBQUEsQ0FDQSxHQUFBTyxHQUFBRSxTQUFBVSxpQkFBQW5CLEVBQ0FBLEdBQUEsVUFBQU8sS0FBQSxHQUFBQSxFQUdBLE1BREFpbEIsR0FBQXhsQixHQUFBd2xCLEVBSUEsUUFBQUMsR0FBQXBGLEdBQ0FxRixFQUFBckYsSUFDQUEsR0FBQW1GLEdBQUFHLGFBQUEsc0JBR0EsUUFBQXBFLEdBQUFsQixHQUNBcUYsRUFBQXJGLElBQ0FBLEdBQUFtRixHQUFBSSxnQkFBQSxlQUdBLFFBQUE5TSxHQUFBK00sRUFBQXhGLEdBQ0F3RixFQUNBSixFQUFBcEYsR0FFQWtCLEVBQUFsQixHQUdBLFFBQUFxRixHQUFBckYsR0FDQSxJQUFBQSxJQUFBbUYsRUFDQSxTQUFBcmhCLE9BQUEsK0ZBR0EsUUFBQTJoQixLQUNBTixFQUFBL2tCLFNBQUFDLEtBbENBLEdBQUE4a0IsR0FBQSxtQkFBQS9rQixtQkFBQUMsS0FBQSxJQXFDQXhiLEdBQUE0ekIsU0FDQTV6QixFQUFBNjZCLGFBQ0E3NkIsRUFBQXE4QixPQUNBcjhCLEVBQUF1Z0MsT0FDQXZnQyxFQUFBNGdDLG1CckRvZ1BNLFNBQVU3Z0MsRUFBUUMsRUFBU0MsR3NEeGlQakMsUUFBQTRnQyxHQUFBOXJCLEdBQ0ErckIsR0FBQSxFQUdBLFFBQUFDLEdBQUFoc0IsR0FDQSxHQUFBK3JCLEVBQUEsQ0FFQSxHQURBQSxHQUFBLEdBQ0FFLEVBQ0EsTUFPQXJ4QixZQUFBLFdBQ0EsSUFBQXF4QixFQUFBdEIsU0FBQW5rQixTQUFBa2tCLGVBQUEsQ0FFQSxHQUFBcGtCLEdBQUE0bEIsRUFBQUQsR0FBQSxJQUFBQSxDQUNBM2xCLEdBQUFpakIsVUFDSyxJQXpCTCxHQUFBMkMsR0FBQWhoQyxFQUFBLEtBQ0ErZ0MsRUFBQSxLQUNBRSxFQUFBLEtBQ0FKLEdBQUEsQ0EwQkE5Z0MsR0FBQXcrQixrQkFBQSxXQUNBMEMsRUFBQTNsQixTQUFBa2tCLGVBR0F6L0IsRUFBQTgrQixZQUFBLFdBQ0EsSUFDQW9DLEVBQUE1QyxRQUVBLE1BQUF4VyxHQUNBcmxCLFFBQUFpWSxLQUFBLGdDQUFBd21CLEVBQUEscUNBRUFBLEVBQUEsTUFHQWxoQyxFQUFBdStCLGlCQUFBLFNBQUF6akIsR0FDQWttQixFQUFBbG1CLEVBRUE5USxPQUFBc1Usa0JBQ0F0VSxPQUFBc1UsaUJBQUEsT0FBQXVpQixHQUFBLEdBQ0F0bEIsU0FBQStDLGlCQUFBLFFBQUF5aUIsR0FBQSxLQUVBLzJCLE9BQUF1VSxZQUFBLFNBQUFzaUIsR0FDQXRsQixTQUFBZ0QsWUFBQSxVQUFBd2lCLEtBSUEvZ0MsRUFBQSsrQixvQkFBQSxXQUNBaUMsRUFBQSxLQUVBaDNCLE9BQUFzVSxrQkFDQXRVLE9BQUFtM0Isb0JBQUEsT0FBQU4sR0FDQXRsQixTQUFBNGxCLG9CQUFBLFFBQUFKLEtBRUEvMkIsT0FBQW8zQixZQUFBLFNBQUFQLEdBQ0F0bEIsU0FBQTZsQixZQUFBLFVBQUFMLE10RHdqUE0sU0FBVWhoQyxFQUFRQyxFQUFTQyxHdUR2blBqQyxHQUFBZ2hDLEdBQUFoaEMsRUFBQSxJQUVBRixHQUFBQyxRQUFBLFNBQUE0N0IsRUFBQTdtQixHQUNBLEdBQUEyRyxHQUFBdWxCLEVBQUFyRixFQUNBLEtBQUFsZ0IsRUFBQTNYLE9BRUEsV0FEQWdSLEdBQUEyZ0IsZ0JBR0EsSUFBQTJMLEdBQUEzbEIsRUFBQTNHLEVBQUF1c0IsU0FBQSxFQUFBNWxCLEVBQUEzWCxPQUFBLEdBQ0F3OUIsRUFDQUYsSUFBQTlsQixTQUFBa2tCLGVBRUE3RCxJQUFBcmdCLFNBQUFra0IsYUFFQSxJQUFBOEIsRUFBQSxDQUNBeHNCLEVBQUEyZ0IsZ0JBQ0EsSUFBQTl4QixHQUFBOFgsRUFBQTNHLEVBQUF1c0IsU0FBQTVsQixFQUFBM1gsT0FBQSxJQUNBSCxHQUFBMDZCLFd2RCtuUE0sU0FBVXYrQixFQUFRQyxFQUFTQyxHd0RocFBqQ0YsRUFBQUMsUUFBQUMsRUFBQSxNeER1cFBTLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FFSCxTQUFVRixFQUFRQyxFQUFTQyxHeURocVBqQyxHQUFBa3pCLEdBQUFsekIsRUFBQSxLQUNBdWhDLEVBQUFyTyxHQUFBbHpCLEVBQUEsS0FDQThXLEVBQUE5VyxFQUFBLElBRUF3aEMsR0FDQUMsTUFBQSxTQUFBMXFCLEVBQUEycUIsR0FDQTNxQixFQUFBRCxFQUFBQyxHQUNBLGtCQUFBMnFCLEtBQ0FBLEdBQ0E1UixNQUFBNFIsSUFHQXhPLEdBQUFxTyxFQUFBSSxTQUFBNXFCLEVBQUEycUIsR0FHQWg5QixLQUFBazlCLDJCQUNBbDlCLEtBQUFrOUIsNkJBRUFsOUIsS0FBQWs5Qix5QkFBQXorQixNQUF3QzRULFFBQUEycUIsYUFFeEN2RixxQkFBQSxXQUNBejNCLEtBQUFrOUIsMEJBQ0FsOUIsS0FBQWs5Qix5QkFBQTUrQixRQUFBLFNBQUE5QyxHQUNBZ3pCLEdBQUFxTyxFQUFBTSxXQUFBM2hDLEVBQUE2VyxNQUFBN1csRUFBQXdoQyxZQU1BNWhDLEdBQUFDLFFBQUF5aEMsR3pEc3FQUyxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FFSCxTQUFVMWhDLEVBQVFDLEVBQVNDLEdBRWpDLFkwRHJzUEEsU0FBQUMsR0FBQUMsR0FBc0MsTUFBQUEsTUFBQUMsV0FBQUQsR0FBdUNFLFFBQUFGLEdBakI3RUgsRUFBQUksWUFBQSxFQUNBSixFQUFBK2hDLFVBQUEvaEMsRUFBQWdpQyxVQUFBaGhDLE1BRUEsSUFBQWlHLEdBQUEzRyxPQUFBNEcsUUFBQSxTQUFBdEQsR0FBbUQsT0FBQUUsR0FBQSxFQUFnQkEsRUFBQXNDLFVBQUFyQyxPQUFzQkQsSUFBQSxDQUFPLEdBQUFxRCxHQUFBZixVQUFBdEMsRUFBMkIsUUFBQU0sS0FBQStDLEdBQTBCN0csT0FBQWlFLFVBQUFzQyxlQUFBRixLQUFBUSxFQUFBL0MsS0FBeURSLEVBQUFRLEdBQUErQyxFQUFBL0MsSUFBaUMsTUFBQVIsSUFFL08yRyxFQUFBdEssRUFBQSxHQUVBbUssRUFBQWxLLEVBQUFxSyxHQUVBMDNCLEVBQUFoaUMsRUFBQSxJQUVBaWlDLEVBQUFoaUMsRUFBQStoQyxHQUVBRSxFQUFBbGlDLEVBQUEsSUFFQW1pQyxFQUFBbGlDLEVBQUFpaUMsRUFJQW5pQyxHQUFBZ2lDLFVBQUE1M0IsRUFBQS9KLFFBQUE0MEIsYUFDQUMsWUFBQSxZQUdBbU4sYUFBQSxTQUFBcjVCLEVBQUE4ZSxHQUNBQSxHQUNBQSxFQUFBNE4saUJBRUEvd0IsS0FBQWQsTUFBQXcrQixhQUFBcjVCLEVBQUE4ZSxJQUVBK04sT0FBQSxXQUNBLEdBQUF5TSxJQUF1QkMsZUFBQSxFQUFBQyxjQUFBLEdBQ3ZCQyxFQUFBOTlCLEtBQUEwOUIsYUFBQXh1QixLQUFBbFAsTUFBb0QrOUIsUUFBQSxjQUVwRC85QixLQUFBZCxNQUFBZ0wsV0FBQSxJQUFBbEssS0FBQWQsTUFBQW1KLGNBQUFySSxLQUFBZCxNQUFBa0ksWUFBQXBILEtBQUFkLE1BQUE4SSxnQkFDQTIxQixFQUFBLHFCQUNBRyxFQUFBLEtBR0EsSUFTQWhsQixHQVRBa2xCLEdBQ0F2K0IsSUFBQSxJQUNBdytCLFlBQUEsT0FDQXQ0QixXQUFBLEVBQUE0M0IsRUFBQTdoQyxTQUFBaWlDLEdBQ0F0MUIsYUFBQXJJLEtBQUFkLE1BQUFtSixhQUNBakIsV0FBQXBILEtBQUFkLE1BQUFrSSxXQUNBMEMsT0FBYzZNLFFBQUEsU0FDZGxHLFFBQUFxdEIsRUFjQSxPQVRBaGxCLEdBREE5WSxLQUFBZCxNQUFBNFosVUFDQXJULEVBQUEvSixRQUFBd2lDLGFBQUFsK0IsS0FBQWQsTUFBQTRaLFVBQUFrbEIsR0FFQXY0QixFQUFBL0osUUFBQWdLLGNBQ0EsU0FDQXBELEdBQWtCN0MsSUFBQSxJQUFBOUIsS0FBQSxVQUEyQnFnQyxHQUM3QyxnQkFRQTNpQyxFQUFBK2hDLFVBQUEzM0IsRUFBQS9KLFFBQUE0MEIsYUFDQUMsWUFBQSxZQUVBbU4sYUFBQSxTQUFBcjVCLEVBQUE4ZSxHQUNBQSxHQUNBQSxFQUFBNE4saUJBRUEvd0IsS0FBQWQsTUFBQXcrQixhQUFBcjVCLEVBQUE4ZSxJQUVBK04sT0FBQSxXQUNBLEdBQUFpTixJQUF1QlAsZUFBQSxFQUFBUSxjQUFBLEdBQ3ZCQyxFQUFBcitCLEtBQUEwOUIsYUFBQXh1QixLQUFBbFAsTUFBb0QrOUIsUUFBQSxRQUVwRE4sR0FBQS9oQyxRQUFBcU8sVUFBQS9KLEtBQUFkLFNBQ0FpL0IsRUFBQSxxQkFDQUUsRUFBQSxLQUdBLElBVUF4bEIsR0FWQXlsQixHQUNBNytCLElBQUEsSUFDQXcrQixZQUFBLE9BQ0F0NEIsV0FBQSxFQUFBNDNCLEVBQUE3aEMsU0FBQXlpQyxHQUNBOTFCLGFBQUFySSxLQUFBZCxNQUFBbUosYUFDQWpCLFdBQUFwSCxLQUFBZCxNQUFBa0ksV0FDQTBDLE9BQWM2TSxRQUFBLFNBQ2RsRyxRQUFBNHRCLEVBZUEsT0FUQXhsQixHQURBN1ksS0FBQWQsTUFBQTJaLFVBQ0FwVCxFQUFBL0osUUFBQXdpQyxhQUFBbCtCLEtBQUFkLE1BQUEyWixVQUFBeWxCLEdBRUE3NEIsRUFBQS9KLFFBQUFnSyxjQUNBLFNBQ0FwRCxHQUFrQjdDLElBQUEsSUFBQTlCLEtBQUEsVUFBMkIyZ0MsR0FDN0MsYTFEbXVQTSxTQUFVbGpDLEVBQVFDLEVBQVNDLEdBRWpDLFkyRDd6UEEsU0FBQUMsR0FBQUMsR0FBc0MsTUFBQUEsTUFBQUMsV0FBQUQsR0FBdUNFLFFBQUFGLEdBWDdFSCxFQUFBSSxZQUFBLEVBQ0FKLEVBQUFrakMsS0FBQWxpQyxNQUVBLElBQUF1SixHQUFBdEssRUFBQSxHQUVBbUssRUFBQWxLLEVBQUFxSyxHQUVBMDNCLEVBQUFoaUMsRUFBQSxJQUVBaWlDLEVBQUFoaUMsRUFBQStoQyxHQUlBa0IsRUFBQSxTQUFBeGxCLEdBQ0EsR0FBQXBCLEVBRUEsT0FEQUEsR0FBQXhMLEtBQUFxeUIsS0FBQXpsQixFQUFBNVIsV0FBQTRSLEVBQUE3TixnQkFJQTlQLEdBQUFrakMsS0FBQTk0QixFQUFBL0osUUFBQTQwQixhQUNBQyxZQUFBLE9BR0FtTixhQUFBLFNBQUFyNUIsRUFBQThlLEdBR0FBLEVBQUE0TixpQkFDQS93QixLQUFBZCxNQUFBdytCLGFBQUFyNUIsSUFFQTZzQixPQUFBLFdBQ0EsR0FBQTV3QixHQUFBTixLQUVBMCtCLEVBQUFGLEdBQ0FwM0IsV0FBQXBILEtBQUFkLE1BQUFrSSxXQUNBK0QsZUFBQW5MLEtBQUFkLE1BQUFpTSxpQkFNQXlNLEVBQUFoVyxNQUFBRSxNQUFBLEtBQUFGLE1BQUE4OEIsRUFBQSxHQUFBejhCLEtBQUEsS0FBQXdkLE1BQUEsS0FBQTliLElBQUEsU0FBQWluQixFQUFBenJCLEdBRUEsR0FBQXcvQixHQUFBeC9CLEVBQUFtQixFQUFBcEIsTUFBQWlNLGVBQ0F5ekIsRUFBQXovQixFQUFBbUIsRUFBQXBCLE1BQUFpTSxnQkFBQTdLLEVBQUFwQixNQUFBaU0sZUFBQSxHQUNBeEYsR0FBQSxFQUFBNDNCLEVBQUE3aEMsVUFDQW1qQyxlQUFBditCLEVBQUFwQixNQUFBbUosY0FBQXMyQixHQUFBcitCLEVBQUFwQixNQUFBbUosY0FBQXUyQixJQUdBRSxHQUNBZixRQUFBLE9BQ0FsNkIsTUFBQTFFLEVBQ0FnTSxlQUFBN0ssRUFBQXBCLE1BQUFpTSxlQUNBOUMsYUFBQS9ILEVBQUFwQixNQUFBbUosY0FHQW9JLEVBQUFuUSxFQUFBbzlCLGFBQUF4dUIsS0FBQTVPLEVBQUF3K0IsRUFFQSxPQUFBcjVCLEdBQUEvSixRQUFBZ0ssY0FDQSxNQUNTakcsSUFBQU4sRUFBQXdHLGFBQ1RGLEVBQUEvSixRQUFBd2lDLGFBQUE1OUIsRUFBQXBCLE1BQUF5WSxhQUFBeFksSUFBbUVzUixjQUluRSxPQUFBaEwsR0FBQS9KLFFBQUFnSyxjQUNBLE1BQ09DLFVBQUEzRixLQUFBZCxNQUFBMlksVUFBQS9OLE9BQTBDNk0sUUFBQSxVQUNqRGlCLE8zRGsxUE0sU0FBVXhjLEVBQVFDLEVBQVNDLEdBRWpDLFk0RHY1UEFGLEdBQUFDLFFBQUFDLEVBQUEsTTVEODVQTSxTQUFVRixFQUFRQyxFQUFTQyxHQUVqQyxZNkRoNlBBLElBQUF1SixJQUNBMkYsV0FBQSxFQUNBdTBCLFVBQUEsRUFDQWx5QixjQUFBLEtBQ0FteUIsaUJBQUEsRUFDQTMwQixZQUFBLEtBQ0FoQyxhQUFBLEVBQ0E0MkIsVUFBQSxFQUNBejNCLFVBQUEsS0FDQVksV0FBQSxLQUVBaEIsV0FBQSxLQUNBSixXQUFBLEtBQ0FpQixZQUFBLEtBR0F1RCxVQUFBLEtBQ0FHLGFBQ0FLLE9BQUEsRUFDQUUsT0FBQSxFQUNBRCxLQUFBLEVBQ0FFLEtBQUEsR0FHQXhCLGtCQUdBdTBCLGFBQUEsRUFDQUMsYUFBQSxFQUNBQyxRQUFBLEVBQ0F0MkIsY0FDQXBCLFdBQUEsRUFZQXRNLEdBQUFDLFFBQUF3SixHN0R1NlBNLFNBQVV6SixFQUFRQyxFQUFTQyxHQUVqQyxZOEQ3NlBBLFNBQUFDLEdBQUFDLEdBQXNDLE1BQUFBLE1BQUFDLFdBQUFELEdBQXVDRSxRQUFBRixHQXZDN0VILEVBQUFJLFlBQUEsRUFDQUosRUFBQWdrQyxZQUFBaGpDLE1BRUEsSUFBQWlHLEdBQUEzRyxPQUFBNEcsUUFBQSxTQUFBdEQsR0FBbUQsT0FBQUUsR0FBQSxFQUFnQkEsRUFBQXNDLFVBQUFyQyxPQUFzQkQsSUFBQSxDQUFPLEdBQUFxRCxHQUFBZixVQUFBdEMsRUFBMkIsUUFBQU0sS0FBQStDLEdBQTBCN0csT0FBQWlFLFVBQUFzQyxlQUFBRixLQUFBUSxFQUFBL0MsS0FBeURSLEVBQUFRLEdBQUErQyxFQUFBL0MsSUFBaUMsTUFBQVIsSUFFL08yRyxFQUFBdEssRUFBQSxHQUVBbUssRUFBQWxLLEVBQUFxSyxHQUVBMDVCLEVBQUFoa0MsRUFBQSxLQUVBaWtDLEVBQUFoa0MsRUFBQStqQyxHQUVBOUIsRUFBQWxpQyxFQUFBLElBRUFtaUMsRUFBQWxpQyxFQUFBaWlDLEdBRUFnQyxFQUFBbGtDLEVBQUEsS0FFQW1rQyxFQUFBbGtDLEVBQUFpa0MsR0FFQUUsRUFBQXBrQyxFQUFBLEtBRUFxa0MsRUFBQXBrQyxFQUFBbWtDLEdBRUFwQyxFQUFBaGlDLEVBQUEsSUFFQWlpQyxFQUFBaGlDLEVBQUEraEMsR0FFQTEyQixFQUFBdEwsRUFBQSxHQUVBdUwsRUFBQXRMLEVBQUFxTCxHQUVBZzVCLEVBQUF0a0MsRUFBQSxLQUVBdWtDLEVBQUF2a0MsRUFBQSxLQUVBd2tDLEVBQUF4a0MsRUFBQSxJQUlBRCxHQUFBZ2tDLFlBQUE1NUIsRUFBQS9KLFFBQUE0MEIsYUFDQUMsWUFBQSxjQUVBd1AsUUFBQXRDLEVBQUEvaEMsUUFBQTZqQyxFQUFBN2pDLFNBQ0F5TCxLQUFBLEtBQ0FRLE1BQUEsS0FDQXE0QixlQUFBLFNBQUEzRSxHQUNBcjdCLEtBQUFtSCxLQUFBazBCLEdBRUE0RSxnQkFBQSxTQUFBNUUsR0FDQXI3QixLQUFBMkgsTUFBQTB6QixHQUVBakMsZ0JBQUEsV0FDQSxNQUFBOTJCLE1BQXNCbTlCLEVBQUEvakMsU0FDdEIyTSxhQUFBckksS0FBQWQsTUFBQXFKLGdCQUdBd3VCLGdCQUFBLFdBQ0EsTUFBQTRJLEdBQUFqa0MsU0FFQXdrQyxtQkFBQSxXQUNBbGdDLEtBQUFkLE1BQUF5WixNQUNBM1ksS0FBQWQsTUFBQXlaLE9BRUEzWSxLQUFBd0ksVUFDQW9FLFNBQUEsR0FHQSxRQURBakMsTUFDQXhMLEVBQUEsRUFBbUJBLEVBQUFzRyxFQUFBL0osUUFBQTJMLFNBQUFDLE1BQUF0SCxLQUFBZCxNQUFBcUksVUFBeURwSSxJQUM1RUEsR0FBQWEsS0FBQTRJLE1BQUFQLGNBQUFsSixFQUFBYSxLQUFBNEksTUFBQVAsYUFBQXJJLEtBQUFkLE1BQUE4SSxjQUNBMkMsRUFBQWxNLEtBQUFVLEVBSUFhLE1BQUFkLE1BQUF3TCxVQUFBLElBQUExSyxLQUFBNEksTUFBQStCLGVBQUF2TCxRQUNBWSxLQUFBd0ksVUFDQW1DLG9CQUlBcXNCLGtCQUFBLFdBRUFoM0IsS0FBQStHLFdBQUEvRyxLQUFBZCxPQUNBYyxLQUFBMkosY0FHQXRFLFNBR0FBLE9BQUFzVSxpQkFDQXRVLE9BQUFzVSxpQkFBQSxTQUFBM1osS0FBQW1nQyxpQkFFQTk2QixPQUFBdVUsWUFBQSxXQUFBNVosS0FBQW1nQyxtQkFHQTFJLHFCQUFBLFdBQ0F6M0IsS0FBQStLLHNCQUNBK0IsYUFBQTlNLEtBQUErSyxzQkFFQTFGLE9BQUFzVSxpQkFDQXRVLE9BQUFtM0Isb0JBQUEsU0FBQXg4QixLQUFBbWdDLGlCQUVBOTZCLE9BQUFvM0IsWUFBQSxXQUFBejhCLEtBQUFtZ0MsaUJBRUFuZ0MsS0FBQTRJLE1BQUFpRSxlQUNBdXpCLGNBQUFwZ0MsS0FBQTRJLE1BQUFpRSxnQkFHQXVxQiwwQkFBQSxTQUFBaUosR0FDQXJnQyxLQUFBZCxNQUFBb2hDLFdBQUFELEVBQUFDLFVBSUF0Z0MsS0FBQXVnQyxhQUNBeEMsUUFBQSxRQUNBbDZCLE1BQUF3OEIsRUFBQUMsVUFDQWo0QixhQUFBckksS0FBQTRJLE1BQUFQLGVBRUtySSxLQUFBNEksTUFBQVAsY0FBQWc0QixFQUFBOTRCLFNBQUFuSSxRQUNMWSxLQUFBa0osT0FBQW0zQixHQUNBcmdDLEtBQUF1Z0MsYUFDQXhDLFFBQUEsUUFDQWw2QixNQUFBdzhCLEVBQUE5NEIsU0FBQW5JLE9BQUFpaEMsRUFBQXI0QixhQUNBSyxhQUFBckksS0FBQTRJLE1BQUFQLGdCQUdBckksS0FBQWtKLE9BQUFtM0IsSUFHQTdHLG1CQUFBLFdBQ0F4NUIsS0FBQTJKLGVBRUF3MkIsZ0JBQUEsV0FDQW5nQyxLQUFBa0osT0FBQWxKLEtBQUFkLE9BRUFjLEtBQUF3SSxVQUNBZ0MsV0FBQSxJQUVBc0MsYUFBQTlNLEtBQUErSyw0QkFDQS9LLE1BQUErSyxzQkFFQXkxQixVQUFBLFdBQ0F4Z0MsS0FBQXVnQyxhQUFzQnhDLFFBQUEsY0FFdEIwQyxVQUFBLFdBQ0F6Z0MsS0FBQXVnQyxhQUFzQnhDLFFBQUEsVUFFdEJ1QyxVQUFBLFNBQUFsb0IsR0FDQSxnQkFBQUEsSUFBQXBZLEtBQUF1Z0MsYUFDQXhDLFFBQUEsUUFDQWw2QixNQUFBdVUsRUFDQS9QLGFBQUFySSxLQUFBNEksTUFBQVAsZ0JBR0E2b0IsT0FBQSxXQUNBLEdBdUJBdFosR0F2QkFqUyxHQUFBLEVBQUE0M0IsRUFBQTdoQyxTQUFBLG1DQUFBc0UsS0FBQWQsTUFBQXlHLFdBQ0ErNkIsaUJBQUExZ0MsS0FBQWQsTUFBQTBJLFdBR0ErNEIsR0FDQWwyQixLQUFBekssS0FBQWQsTUFBQXVMLEtBQ0FpTixRQUFBMVgsS0FBQWQsTUFBQXdZLFFBQ0F6TSxNQUFBakwsS0FBQWQsTUFBQStMLE1BQ0FmLFNBQUFsSyxLQUFBZCxNQUFBZ0wsU0FDQXBDLFdBQUE5SCxLQUFBZCxNQUFBNEksV0FDQW1RLGNBQUFqWSxLQUFBZCxNQUFBK1ksY0FBQWpZLEtBQUE0Z0MsY0FBQSxLQUNBdjRCLGFBQUFySSxLQUFBNEksTUFBQVAsYUFDQXFDLFNBQUExSyxLQUFBZCxNQUFBd0wsU0FDQUMsZUFBQTNLLEtBQUE0SSxNQUFBK0IsZUFDQXJDLElBQUF0SSxLQUFBZCxNQUFBb0osSUFDQXRCLFdBQUFoSCxLQUFBNEksTUFBQTVCLFdBQ0FnQixhQUFBaEksS0FBQWQsTUFBQThJLGFBQ0FtRCxlQUFBbkwsS0FBQWQsTUFBQWlNLGVBQ0EvRCxXQUFBcEgsS0FBQTRJLE1BQUF4QixXQUNBMEIsV0FBQTlJLEtBQUE0SSxNQUFBRSxXQUNBMlAsY0FBQXpZLEtBQUFkLE1BQUF1WixjQUtBLElBQUF6WSxLQUFBZCxNQUFBMFksUUFBQSxHQUFBNVgsS0FBQTRJLE1BQUF4QixZQUFBcEgsS0FBQWQsTUFBQThJLGFBQUEsQ0FDQSxHQUFBNjRCLElBQ0FocEIsVUFBQTdYLEtBQUFkLE1BQUEyWSxVQUNBelEsV0FBQXBILEtBQUE0SSxNQUFBeEIsV0FDQVksYUFBQWhJLEtBQUFkLE1BQUE4SSxhQUNBSyxhQUFBckksS0FBQTRJLE1BQUFQLGFBQ0E4QyxlQUFBbkwsS0FBQWQsTUFBQWlNLGVBQ0F1eUIsYUFBQTE5QixLQUFBdWdDLFlBQ0FoNUIsU0FBQXZILEtBQUFkLE1BQUFxSSxTQUNBb1EsYUFBQTNYLEtBQUFkLE1BQUF5WSxhQUdBQyxHQUFBblMsRUFBQS9KLFFBQUFnSyxjQUFBbTZCLEVBQUF0QixLQUFBc0MsR0FHQSxHQUFBL25CLEdBQUFELEVBRUFpb0IsR0FDQTUyQixTQUFBbEssS0FBQWQsTUFBQWdMLFNBQ0FwQyxXQUFBOUgsS0FBQWQsTUFBQTRJLFdBQ0FPLGFBQUFySSxLQUFBNEksTUFBQVAsYUFDQWpCLFdBQUFwSCxLQUFBNEksTUFBQXhCLFdBQ0FZLGFBQUFoSSxLQUFBZCxNQUFBOEksYUFDQThRLFVBQUE5WSxLQUFBZCxNQUFBNFosVUFDQUQsVUFBQTdZLEtBQUFkLE1BQUEyWixVQUNBNmtCLGFBQUExOUIsS0FBQXVnQyxZQUdBdmdDLE1BQUFkLE1BQUF1WSxTQUNBcUIsRUFBQXJULEVBQUEvSixRQUFBZ0ssY0FBQW82QixFQUFBekMsVUFBQXlELEdBQ0Fqb0IsRUFBQXBULEVBQUEvSixRQUFBZ0ssY0FBQW82QixFQUFBMUMsVUFBQTBELEdBR0EsSUFBQUMsR0FBQSxJQUVBL2dDLE1BQUFkLE1BQUEwSSxXQUNBbTVCLEdBQ0F0M0IsT0FBQXpKLEtBQUE0SSxNQUFBUixZQUlBLElBQUE0NEIsR0FBQSxJQUVBaGhDLE1BQUFkLE1BQUEwSSxZQUFBLEVBQ0E1SCxLQUFBZCxNQUFBNEksY0FBQSxJQUNBazVCLEdBQ0FySSxRQUFBLE9BQUEzNEIsS0FBQWQsTUFBQTZJLGdCQUlBL0gsS0FBQWQsTUFBQTRJLGNBQUEsSUFDQWs1QixHQUNBckksUUFBQTM0QixLQUFBZCxNQUFBNkksY0FBQSxRQUtBLElBQUFrNUIsSUFBQSxFQUFBcDZCLEVBQUFuTCxZQUFrRHFsQyxFQUFBQyxFQUVsRCxPQUFBdjdCLEdBQUEvSixRQUFBZ0ssY0FDQSxPQUVBQyxZQUNBdTdCLGFBQUFsaEMsS0FBQW1oQyxtQkFDQUMsYUFBQXBoQyxLQUFBcWhDLG1CQUNBQyxZQUFBdGhDLEtBQUF1aEMsbUJBRUF6b0IsRUFDQXJULEVBQUEvSixRQUFBZ0ssY0FDQSxPQUVBMjFCLElBQUFyN0IsS0FBQWdnQyxlQUNBcjZCLFVBQUEsYUFDQW1FLE1BQUFtM0IsRUFDQTFGLFlBQUF2N0IsS0FBQXdoQyxXQUNBQyxZQUFBemhDLEtBQUE0SSxNQUFBbTJCLFNBQUEvK0IsS0FBQTBoQyxVQUFBLEtBQ0FsRyxVQUFBeDdCLEtBQUEyaEMsU0FDQVAsYUFBQXBoQyxLQUFBNEksTUFBQW0yQixTQUFBLytCLEtBQUEyaEMsU0FBQSxLQUNBQyxhQUFBNWhDLEtBQUF3aEMsV0FDQUssWUFBQTdoQyxLQUFBNEksTUFBQW0yQixTQUFBLytCLEtBQUEwaEMsVUFBQSxLQUNBSSxXQUFBOWhDLEtBQUEyaEMsU0FDQUksY0FBQS9oQyxLQUFBNEksTUFBQW0yQixTQUFBLytCLEtBQUEyaEMsU0FBQSxLQUNBbEcsVUFBQXo3QixLQUFBZCxNQUFBc1ksY0FBQXhYLEtBQUFnaUMsV0FBQSxNQUNBdjhCLEVBQUEvSixRQUFBZ0ssY0FDQWs2QixFQUFBcUMsTUFDQTMvQixHQUFvQis0QixJQUFBcjdCLEtBQUFpZ0MsaUJBQTRCVSxHQUNoRDNnQyxLQUFBZCxNQUFBcUksV0FHQXNSLEVBQ0FqQixPOUQ4OVBNLFNBQVV4YyxFQUFRQyxFQUFTQyxHQUVqQyxZK0QvdFFBLFNBQUFDLEdBQUFDLEdBQXNDLE1BQUFBLE1BQUFDLFdBQUFELEdBQXVDRSxRQUFBRixHQWhCN0VILEVBQUFJLFlBQUEsQ0FFQSxJQUFBa0wsR0FBQXJMLEVBQUEsS0FFQWtpQyxFQUFBbGlDLEVBQUEsSUFJQXNMLEdBRkFyTCxFQUFBaWlDLEdBRUFsaUMsRUFBQSxJQUVBdUwsRUFBQXRMLEVBQUFxTCxHQUVBSCxFQUFBbkwsRUFBQSxJQUVBb0wsRUFBQW5MLEVBQUFrTCxHQUlBeTdCLEdBRUEzQixZQUFBLFNBQUFsOEIsR0FDQSxHQUFBODlCLEdBQUFDLEVBQUFyb0IsRUFBQXNvQixFQUFBajRCLEVBQ0FtSCxFQUFBdlIsS0FBQWQsTUFDQWlNLEVBQUFvRyxFQUFBcEcsZUFDQW5ELEVBQUF1SixFQUFBdkosYUFDQXM2QixFQUFBdGlDLEtBQUE0SSxNQUNBeEIsRUFBQWs3QixFQUFBbDdCLFdBQ0FpQixFQUFBaTZCLEVBQUFqNkIsWUFLQSxJQUhBZzZCLEVBQUFqN0IsRUFBQStELElBQUEsRUFDQWczQixFQUFBRSxFQUFBLEdBQUFqN0IsRUFBQWlCLEdBQUE4QyxFQUVBLGFBQUE5RyxFQUFBMDVCLFFBQ0Foa0IsRUFBQSxJQUFBb29CLEVBQUFoM0IsRUFBQW5ELEVBQUFtNkIsRUFDQS8zQixFQUFBL0IsRUFBQTBSLEVBQ0EvWixLQUFBZCxNQUFBd0wsV0FDQTAzQixFQUFBLzVCLEVBQUEwUixFQUNBM1AsRUFBQWc0QixLQUFBLEVBQUFoN0IsRUFBQSxFQUFBZzdCLE9BRUssYUFBQS85QixFQUFBMDVCLFFBQ0xoa0IsRUFBQSxJQUFBb29CLEVBQUFoM0IsRUFBQWczQixFQUNBLzNCLEVBQUEvQixFQUFBMFIsRUFDQS9aLEtBQUFkLE1BQUF3TCxXQUNBTixHQUFBL0IsRUFBQThDLEdBQUEvRCxFQUFBKzZCLE9BRUssYUFBQTk5QixFQUFBMDVCLFNBQUEsYUFBQTE1QixFQUFBMDVCLFNBR0wsR0FEQTN6QixFQUFBL0YsRUFBQVIsTUFBQVEsRUFBQThHLGVBQ0FmLElBQUEvRixFQUFBZ0UsYUFDQSxXQUVLLGNBQUFoRSxFQUFBMDVCLFVBQ0wzekIsRUFBQS9NLFNBQUFnSCxFQUFBUixPQUNBdUcsSUFBQS9GLEVBQUFnRSxjQUNBLE1BSUFySSxNQUFBbUssYUFBQUMsSUFJQTQzQixXQUFBLFNBQUE3ZSxHQUVBQSxFQUFBbGtCLE9BQUFzakMsUUFBQW5YLE1BQUEsMkJBQ0EsS0FBQWpJLEVBQUFtWCxTQUFBdDZCLEtBQUFkLE1BQUFzWSxpQkFBQSxFQUNBeFgsS0FBQXVnQyxhQUNBeEMsUUFBQS85QixLQUFBZCxNQUFBb0osT0FBQSxzQkFFTyxLQUFBNmEsRUFBQW1YLFNBQUF0NkIsS0FBQWQsTUFBQXNZLGlCQUFBLEdBQ1B4WCxLQUFBdWdDLGFBQ0F4QyxRQUFBLzlCLEtBQUFkLE1BQUFvSixPQUFBLHdCQU1BczRCLGNBQUEsU0FBQXY4QixHQUNBckUsS0FBQXVnQyxZQUFBbDhCLElBRUFtOUIsV0FBQSxTQUFBcmUsR0FDQSxHQUFBcWYsR0FBQUMsQ0FFQXppQyxNQUFBZCxNQUFBbVosU0FBQSxpQkFBQXpCLFdBQUE1VyxLQUFBZCxNQUFBbVosU0FBQSxHQUVLclksS0FBQWQsTUFBQTRZLGFBQUEsR0FBQXFMLEVBQUF4bEIsS0FBQWlOLFFBQUEsZ0JBR0w0M0IsRUFBQW5tQyxTQUFBOG1CLEVBQUF1ZixRQUFBdmYsRUFBQXVmLFFBQUEsR0FBQUMsTUFBQXhmLEVBQUF5ZixRQUNBSCxFQUFBcG1DLFNBQUE4bUIsRUFBQXVmLFFBQUF2ZixFQUFBdWYsUUFBQSxHQUFBRyxNQUFBMWYsRUFBQTJmLFFBQ0E5aUMsS0FBQXdJLFVBQ0F1MkIsVUFBQSxFQUNBcHpCLGFBQ0FLLE9BQUF3MkIsRUFDQXQyQixPQUFBdTJCLEVBQ0F4MkIsS0FBQXUyQixFQUNBcjJCLEtBQUFzMkIsT0FJQWYsVUFBQSxTQUFBdmUsR0FDQSxJQUFBbmpCLEtBQUE0SSxNQUFBbTJCLFNBRUEsV0FEQTViLEdBQUE0TixnQkFHQSxLQUFBL3dCLEtBQUE0SSxNQUFBNEIsVUFBQSxDQUdBeEssS0FBQWQsTUFBQTBJLFVBQUE1SCxLQUFBZCxNQUFBb1osY0FBQXRZLEtBQUFkLE1BQUF1TixpQkFDQTBXLEVBQUE0TixnQkFFQSxJQUFBdmxCLEdBQ0F1M0IsRUFBQUMsRUFDQXIzQixFQUFBM0wsS0FBQTRJLE1BQUErQyxXQUVBbzNCLElBQUEsRUFBQXA4QixFQUFBK0IsZUFBQSxFQUFBN0IsRUFBQW5MLFVBQ0FpTixXQUFBM0ksS0FBQTRJLE1BQUFQLGFBQ0FRLFNBQUE3SSxLQUFBMkgsT0FDSzNILEtBQUFkLE1BQUFjLEtBQUE0SSxRQUNMK0MsRUFBQU0sS0FBQWtYLEVBQUF1ZixRQUFBdmYsRUFBQXVmLFFBQUEsR0FBQUMsTUFBQXhmLEVBQUF5ZixRQUNBajNCLEVBQUFRLEtBQUFnWCxFQUFBdWYsUUFBQXZmLEVBQUF1ZixRQUFBLEdBQUFHLE1BQUExZixFQUFBMmYsUUFDQW4zQixFQUFBczNCLFlBQUE3MkIsS0FBQUUsTUFBQUYsS0FBQTgyQixLQUFBOTJCLEtBQUFtZ0IsSUFBQTVnQixFQUFBTSxLQUFBTixFQUFBSyxPQUFBLEtBRUFoTSxLQUFBZCxNQUFBdU4sa0JBQ0FkLEVBQUFzM0IsWUFBQTcyQixLQUFBRSxNQUFBRixLQUFBODJCLEtBQUE5MkIsS0FBQW1nQixJQUFBNWdCLEVBQUFRLEtBQUFSLEVBQUFPLE9BQUEsTUFHQTgyQixHQUFBaGpDLEtBQUFkLE1BQUFvSixPQUFBLFNBQUFxRCxFQUFBTSxLQUFBTixFQUFBSyxPQUFBLE1BRUFoTSxLQUFBZCxNQUFBdU4sa0JBQ0F1MkIsRUFBQXIzQixFQUFBUSxLQUFBUixFQUFBTyxPQUFBLEtBR0EsSUFBQTdELEdBQUFySSxLQUFBNEksTUFBQVAsYUFDQXEyQixFQUFBdHlCLEtBQUFxeUIsS0FBQXorQixLQUFBNEksTUFBQXhCLFdBQUFwSCxLQUFBZCxNQUFBaU0sZ0JBQ0FPLEVBQUExTCxLQUFBMEwsZUFBQTFMLEtBQUE0SSxNQUFBK0MsYUFDQXczQixFQUFBeDNCLEVBQUFzM0IsV0FFQWpqQyxNQUFBZCxNQUFBZ0wsWUFBQSxJQUNBLElBQUE3QixHQUFBLFVBQUFxRCxHQUFBckQsRUFBQSxHQUFBcTJCLEdBQUEsU0FBQWh6QixLQUNBeTNCLEVBQUF4M0IsRUFBQXMzQixZQUFBampDLEtBQUFkLE1BQUE4WSxhQUVBaFksS0FBQTRJLE1BQUF1MkIsZUFBQSxHQUFBbi9CLEtBQUFkLE1BQUF3WixZQUNBMVksS0FBQWQsTUFBQXdaLFVBQUFoTixHQUNBMUwsS0FBQXdJLFVBQXlCMjJCLGFBQUEsTUFLekJuL0IsS0FBQTRJLE1BQUF3MkIsVUFBQSxHQUFBcC9CLEtBQUFkLE1BQUEwWixhQUNBNVksS0FBQWQsTUFBQTBaLFdBQUFsTixHQUNBMUwsS0FBQXdJLFVBQXFCNDJCLFFBQUEsS0FNckI1ekIsRUFIQXhMLEtBQUFkLE1BQUEwSSxTQUdBbTdCLEVBQUFJLEdBQUFuakMsS0FBQTRJLE1BQUFSLFdBQUFwSSxLQUFBNEksTUFBQXBCLFdBQUF3N0IsRUFGQUQsRUFBQUksRUFBQUgsRUFLQWhqQyxLQUFBZCxNQUFBdU4sa0JBQ0FqQixFQUFBdTNCLEVBQUFJLEVBQUFILEdBR0FoakMsS0FBQXdJLFVBQ0FtRCxjQUNBSCxZQUNBMUMsWUFBQSxFQUFBbkMsRUFBQW9DLGNBQUEsRUFBQWxDLEVBQUFuTCxVQUE2RXNOLEtBQUF3QyxHQUFrQnhMLEtBQUFkLE1BQUFjLEtBQUE0SSxVQUcvRndELEtBQUFJLElBQUFiLEVBQUFNLEtBQUFOLEVBQUFLLFFBQUEsR0FBQUksS0FBQUksSUFBQWIsRUFBQVEsS0FBQVIsRUFBQU8sU0FHQVAsRUFBQXMzQixZQUFBLEdBQ0E5ZixFQUFBNE4sbUJBR0FxUyxvQkFBQSxXQUNBLEdBQUF4dEIsR0FBQSxPQUNBeXRCLEVBQUEsRUFDQUMsRUFBQSxFQUNBQyxJQVVBLEtBUkF2akMsS0FBQWQsTUFBQWdMLFVBR0FtNUIsRUFBQXJqQyxLQUFBZCxNQUFBOEksY0FBQSxFQUNBczdCLEVBQUF0akMsS0FBQWQsTUFBQThJLGNBQUEsRUFDQTROLEVBQUEsRUFBQTVWLEtBQUE0SSxNQUFBeEIsWUFKQXdPLEVBQUE1VixLQUFBNEksTUFBQXhCLFdBT0FpOEIsRUFBQXp0QixHQUNBMnRCLEVBQUE5a0MsS0FBQTRrQyxHQUNBQSxFQUFBQyxFQUFBdGpDLEtBQUFkLE1BQUFpTSxlQUVBbTRCLEdBQUF0akMsS0FBQWQsTUFBQWlNLGdCQUFBbkwsS0FBQWQsTUFBQThJLGFBQUFoSSxLQUFBZCxNQUFBaU0sZUFBQW5MLEtBQUFkLE1BQUE4SSxZQUdBLE9BQUF1N0IsSUFFQUMsZUFBQSxTQUFBMy9CLEdBQ0EsR0FBQTQvQixHQUFBempDLEtBQUFvakMsc0JBQ0FNLEVBQUEsQ0FFQSxJQUFBNy9CLEVBQUE0L0IsSUFBQXJrQyxPQUFBLEdBQ0F5RSxFQUFBNC9CLElBQUFya0MsT0FBQSxPQUVBLFFBQUF1VCxLQUFBOHdCLEdBQUEsQ0FDQSxHQUFBNS9CLEVBQUE0L0IsRUFBQTl3QixHQUFBLENBQ0E5TyxFQUFBNi9CLENBQ0EsT0FHQUEsRUFBQUQsRUFBQTl3QixHQUlBLE1BQUE5TyxJQUVBOC9CLGNBQUEsV0FDQSxHQUFBcmpDLEdBQUFOLEtBRUE0akMsRUFBQTVqQyxLQUFBZCxNQUFBNEksV0FBQTlILEtBQUE0SSxNQUFBNUIsV0FBQW9GLEtBQUE4TixNQUFBbGEsS0FBQWQsTUFBQThJLGFBQUEsSUFFQSxJQUFBaEksS0FBQWQsTUFBQW9aLGFBQUEsQ0FDQSxHQUFBdXJCLEdBQUEsT0FFQTU4QixFQUFBUCxFQUFBaEwsUUFBQXdMLFlBQUFsSCxLQUFBbUgsTUFFQTI4QixFQUFBNzhCLEVBQUFxUSxpQkFBQSxlQUVBMVYsT0FBQWdpQixLQUFBa2dCLEdBQUFDLE1BQUEsU0FBQTNyQixHQUNBLEdBQUE5WCxFQUFBcEIsTUFBQTBJLFVBTUEsR0FBQXdRLEVBQUE0ckIsVUFBQTFqQyxFQUFBNEgsVUFBQWtRLEdBQUEsRUFBQTlYLEVBQUFzSSxNQUFBNEMsV0FBQSxFQUVBLE1BREFxNEIsR0FBQXpyQixHQUNBLE1BUEEsSUFBQUEsRUFBQWlDLFdBQUF1cEIsRUFBQXRqQyxFQUFBbUgsU0FBQTJRLEdBQUEsRUFBQTlYLEVBQUFzSSxNQUFBNEMsV0FBQSxFQUVBLE1BREFxNEIsR0FBQXpyQixHQUNBLENBU0EsV0FHQSxJQUFBNnJCLEdBQUE3M0IsS0FBQUksSUFBQXEzQixFQUFBSyxRQUFBcmdDLE1BQUE3RCxLQUFBNEksTUFBQVAsZUFBQSxDQUVBLE9BQUE0N0IsR0FFQSxNQUFBamtDLE1BQUFkLE1BQUFpTSxnQkFJQXcyQixTQUFBLFNBQUF4ZSxHQUNBLElBQUFuakIsS0FBQTRJLE1BQUFtMkIsU0FJQSxZQUhBLytCLEtBQUFkLE1BQUFtWixPQUNBOEssRUFBQTROLGlCQUlBLElBQUFwbEIsR0FBQTNMLEtBQUE0SSxNQUFBK0MsWUFDQXc0QixFQUFBbmtDLEtBQUE0SSxNQUFBcEIsVUFBQXhILEtBQUFkLE1BQUFzWixlQUNBOU0sRUFBQTFMLEtBQUEwTCxlQUFBQyxFQWVBLElBYkEzTCxLQUFBZCxNQUFBdU4sa0JBQ0EwM0IsRUFBQW5rQyxLQUFBNEksTUFBQVIsV0FBQXBJLEtBQUFkLE1BQUFzWixnQkFJQXhZLEtBQUF3SSxVQUNBdTJCLFVBQUEsRUFDQUksYUFBQSxFQUNBQyxRQUFBLEVBQ0E1ekIsVUFBQSxLQUNBRyxpQkFHQUEsRUFBQXMzQixZQUdBLEdBQUF0M0IsRUFBQXMzQixZQUFBa0IsRUFBQSxDQUNBaGhCLEVBQUE0TixnQkFFQSxJQUFBM3BCLEdBQUEsT0FDQWc5QixFQUFBLE1BRUEsUUFBQTE0QixHQUVBLFdBQ0EsV0FDQTA0QixFQUFBcGtDLEtBQUE0SSxNQUFBUCxhQUFBckksS0FBQTJqQyxnQkFDQXY4QixFQUFBcEgsS0FBQWQsTUFBQW9aLGFBQUF0WSxLQUFBd2pDLGVBQUFZLEtBQ0Fwa0MsS0FBQTRJLE1BQUFvMkIsaUJBQUEsQ0FDQSxNQUVBLGFBQ0EsU0FDQW9GLEVBQUFwa0MsS0FBQTRJLE1BQUFQLGFBQUFySSxLQUFBMmpDLGdCQUNBdjhCLEVBQUFwSCxLQUFBZCxNQUFBb1osYUFBQXRZLEtBQUF3akMsZUFBQVksS0FDQXBrQyxLQUFBNEksTUFBQW8yQixpQkFBQSxDQUNBLE1BRUEsU0FDQTUzQixFQUFBcEgsS0FBQTRJLE1BQUFQLGFBSUFySSxLQUFBbUssYUFBQS9DLE9BQ0ssQ0FFTCxHQUFBaUQsSUFBQSxFQUFBMUQsRUFBQStCLGVBQUEsRUFBQTdCLEVBQUFuTCxVQUNBaU4sV0FBQTNJLEtBQUE0SSxNQUFBUCxhQUNBUSxTQUFBN0ksS0FBQTJILE9BQ08zSCxLQUFBZCxNQUFBYyxLQUFBNEksT0FFUDVJLE1BQUF3SSxVQUNBTSxZQUFBLEVBQUFuQyxFQUFBOEUscUJBQUEsRUFBQTVFLEVBQUFuTCxVQUFzRnNOLEtBQUFxQixHQUFvQnJLLEtBQUFkLE1BQUFjLEtBQUE0SSxZQUkxR3U0QixtQkFBQSxTQUFBaGUsR0FDQW5qQixLQUFBZCxNQUFBaUssVUFBQW5KLEtBQUFkLE1BQUFnWixjQUNBbFksS0FBQW9KLFNBR0FtNEIsa0JBQUEsU0FBQXBlLEdBQ0FuakIsS0FBQWQsTUFBQWlLLFVBQUFuSixLQUFBZCxNQUFBZ1osY0FDQWxZLEtBQUFvSixTQUdBaTRCLG1CQUFBLFNBQUFsZSxHQUNBbmpCLEtBQUFkLE1BQUFpSyxVQUFBbkosS0FBQWQsTUFBQWdaLGNBQ0FsWSxLQUFBaUosWUFLQTVOLEdBQUFLLFFBQUF3bUMsRy9Ec3ZRTSxTQUFVOW1DLEVBQVFDLEVBQVNDLEdBRWpDLFlnRW5qUkEsU0FBQUMsR0FBQUMsR0FBc0MsTUFBQUEsTUFBQUMsV0FBQUQsR0FBdUNFLFFBQUFGLEdBeEI3RSxHQUFBOEcsR0FBQTNHLE9BQUE0RyxRQUFBLFNBQUF0RCxHQUFtRCxPQUFBRSxHQUFBLEVBQWdCQSxFQUFBc0MsVUFBQXJDLE9BQXNCRCxJQUFBLENBQU8sR0FBQXFELEdBQUFmLFVBQUF0QyxFQUEyQixRQUFBTSxLQUFBK0MsR0FBMEI3RyxPQUFBaUUsVUFBQXNDLGVBQUFGLEtBQUFRLEVBQUEvQyxLQUF5RFIsRUFBQVEsR0FBQStDLEVBQUEvQyxJQUFpQyxNQUFBUixJQUUvTzJHLEVBQUF0SyxFQUFBLEdBRUFtSyxFQUFBbEssRUFBQXFLLEdBRUF5K0IsRUFBQS9vQyxFQUFBLEtBRUFzTCxFQUFBdEwsRUFBQSxHQUVBdUwsRUFBQXRMLEVBQUFxTCxHQUVBMDlCLEVBQUFocEMsRUFBQSxJQUVBaXBDLEVBQUFocEMsRUFBQStvQyxHQUVBRSxFQUFBbHBDLEVBQUEsS0FFQW1wQyxFQUFBbHBDLEVBQUFpcEMsR0FFQTlFLEVBQUFwa0MsRUFBQSxLQUVBcWtDLEVBQUFwa0MsRUFBQW1rQyxHQUlBZ0YsRUFBQWovQixFQUFBL0osUUFBQTQwQixhQUNBQyxZQUFBLFNBRUF3UCxRQUFBMEUsRUFBQS9vQyxTQUNBaXBDLFlBQUEsS0FDQUMsc0JBQUEsU0FBQXZKLEdBQ0FyN0IsS0FBQTJrQyxZQUFBdEosR0FFQWpDLGdCQUFBLFdBQ0EsT0FDQTdhLFdBQUEsT0FHQTJoQixtQkFBQSxXQUNBLEdBQUE1L0IsR0FBQU4sSUFFQSxJQUFBQSxLQUFBZCxNQUFBaVosV0FBQSxDQUNBLEdBQUEwc0IsR0FBQTdrQyxLQUFBZCxNQUFBaVosV0FBQXhVLElBQUEsU0FBQW1oQyxHQUNBLE1BQUFBLEdBQUF2bUIsWUFFQXNtQixHQUFBRSxLQUFBLFNBQUFuYSxFQUFBQyxHQUNBLE1BQUFELEdBQUFDLElBR0FnYSxFQUFBdm1DLFFBQUEsU0FBQWlnQixFQUFBMWEsR0FDQSxHQUFBbWhDLEVBRUFBLEdBREEsSUFBQW5oQyxHQUNBLEVBQUEwZ0MsRUFBQTdvQyxVQUEyQ3VwQyxTQUFBLEVBQUFDLFNBQUEzbUIsS0FFM0MsRUFBQWdtQixFQUFBN29DLFVBQTJDdXBDLFNBQUFKLEVBQUFoaEMsRUFBQSxHQUFBcWhDLFNBQUEzbUIsSUFFM0NqZSxFQUFBeThCLE1BQUFpSSxFQUFBLFdBQ0Exa0MsRUFBQWtJLFVBQTBCK1Ysa0JBSzFCLElBQUFsTSxJQUFBLEVBQUFreUIsRUFBQTdvQyxVQUEwQ3VwQyxTQUFBSixFQUFBeHRCLE9BQUEsT0FFMUNyWCxNQUFBKzhCLE1BQUExcUIsRUFBQSxXQUNBL1IsRUFBQWtJLFVBQXdCK1YsV0FBQSxXQUt4QmlpQixVQUFBLFdBQ0F4Z0MsS0FBQTJrQyxZQUFBbkUsYUFHQUMsVUFBQSxXQUNBemdDLEtBQUEya0MsWUFBQWxFLGFBR0FILFVBQUEsU0FBQWxvQixHQUNBcFksS0FBQTJrQyxZQUFBckUsVUFBQWxvQixJQUdBOFksT0FBQSxXQUNBLEdBRUE1UyxHQUNBK1ksRUFIQXIyQixFQUFBaEIsSUFJQUEsTUFBQTRJLE1BQUEyVixZQUNBOFksRUFBQXIzQixLQUFBZCxNQUFBaVosV0FBQW5iLE9BQUEsU0FBQW1vQyxHQUNBLE1BQUFBLEdBQUE1bUIsYUFBQXZkLEVBQUE0SCxNQUFBMlYsYUFFQUQsRUFBQSxZQUFBK1ksRUFBQSxHQUFBL1ksU0FBQSxhQUFBelgsRUFBQW5MLFlBQWdHc0UsS0FBQWQsTUFBQW00QixFQUFBLEdBQUEvWSxXQUVoR0EsR0FBQSxFQUFBelgsRUFBQW5MLFlBQStDaWtDLEVBQUFqa0MsUUFBQXNFLEtBQUFkLE1BRy9DLElBQUFxSSxHQUFBdkgsS0FBQWQsTUFBQXFJLFFBVUEsT0FUQTNGLE9BQUFDLFFBQUEwRixLQUNBQSxPQUlBQSxJQUFBdkssT0FBQSxTQUFBb29DLEdBQ0EsUUFBQUEsSUFHQSxZQUFBOW1CLEVBRUE3WSxFQUFBL0osUUFBQWdLLGNBQ0EsTUFDQSxLQUNBNkIsR0FHQTlCLEVBQUEvSixRQUFBZ0ssY0FDQTIrQixFQUFBaEYsWUFDQS84QixHQUFrQis0QixJQUFBcjdCLEtBQUE0a0MsdUJBQWtDdG1CLEdBQ3BEL1csS0FNQW5NLEdBQUFDLFFBQUFxcEMsR2hFa2xSTSxTQUFVdHBDLEVBQVFDLEVBQVNDLEdBRWpDLFlpRWpzUkEsU0FBQUMsR0FBQUMsR0FBc0MsTUFBQUEsTUFBQUMsV0FBQUQsR0FBdUNFLFFBQUFGLEdBZjdFSCxFQUFBSSxZQUFBLEVBQ0FKLEVBQUE0bUMsTUFBQTVsQyxNQUVBLElBQUF1SixHQUFBdEssRUFBQSxHQUVBbUssRUFBQWxLLEVBQUFxSyxHQUVBZ0IsRUFBQXRMLEVBQUEsR0FFQXVMLEVBQUF0TCxFQUFBcUwsR0FFQTAyQixFQUFBaGlDLEVBQUEsSUFFQWlpQyxFQUFBaGlDLEVBQUEraEMsR0FJQStILEVBQUEsU0FBQXJzQixHQUNBLEdBQUFzc0IsR0FBQUMsRUFBQUMsRUFDQTVCLEVBQUEvL0IsQ0FrQkEsT0FmQUEsR0FEQW1WLEVBQUExUSxJQUNBMFEsRUFBQTVSLFdBQUEsRUFBQTRSLEVBQUFuVixNQUVBbVYsRUFBQW5WLE1BR0EyaEMsRUFBQTNoQyxFQUFBLEdBQUFBLEdBQUFtVixFQUFBNVIsV0FDQTRSLEVBQUFsUixZQUNBODdCLEVBQUF4M0IsS0FBQThOLE1BQUFsQixFQUFBaFIsYUFBQSxHQUNBdTlCLEdBQUExaEMsRUFBQW1WLEVBQUEzUSxjQUFBMlEsRUFBQTVSLGFBQUEsRUFDQXZELEVBQUFtVixFQUFBM1EsYUFBQXU3QixFQUFBLEdBQUEvL0IsR0FBQW1WLEVBQUEzUSxhQUFBdTdCLElBQ0EwQixHQUFBLElBR0FBLEVBQUF0c0IsRUFBQTNRLGNBQUF4RSxLQUFBbVYsRUFBQTNRLGFBQUEyUSxFQUFBaFIsY0FFQSxFQUFBdTFCLEVBQUE3aEMsVUFDQStwQyxlQUFBLEVBQ0E1RyxlQUFBeUcsRUFDQUksZUFBQUgsRUFDQUksZUFBQUgsS0FJQUksRUFBQSxTQUFBNXNCLEdBQ0EsR0FBQWxQLEtBY0EsT0FaQXpOLFVBQUEyYyxFQUFBUCxlQUFBTyxFQUFBUCxpQkFBQSxJQUNBM08sRUFBQVAsTUFBQXlQLEVBQUFoUyxZQUdBZ1MsRUFBQXZPLE9BQ0FYLEVBQUFrdUIsU0FBQSxXQUNBbHVCLEVBQUFkLE1BQUFnUSxFQUFBblYsTUFBQW1WLEVBQUFoUyxXQUNBOEMsRUFBQXdQLFFBQUFOLEVBQUEzUSxlQUFBMlEsRUFBQW5WLE1BQUEsSUFDQWlHLEVBQUEwUCxXQUFBLFdBQUFSLEVBQUEvTixNQUFBLE1BQUErTixFQUFBdEIsUUFDQTVOLEVBQUEyUCxpQkFBQSxXQUFBVCxFQUFBL04sTUFBQSxNQUFBK04sRUFBQXRCLFNBR0E1TixHQUdBKzdCLEVBQUEsU0FBQVQsRUFBQVUsR0FFQSxjQUFBVixFQUFBM2xDLEtBQUFwRCxTQUFBK29DLEVBQUEzbEMsSUFBQXFtQyxFQUFBVixFQUFBM2xDLEtBR0FzbUMsRUFBQSxTQUFBL3NCLEdBQ0EsR0FBQXZaLEdBQ0Fxa0MsS0FDQWtDLEtBQ0FDLEtBQ0EzK0IsRUFBQTdCLEVBQUEvSixRQUFBMkwsU0FBQUMsTUFBQTBSLEVBQUF6UixTQXNFQSxPQXBFQTlCLEdBQUEvSixRQUFBMkwsU0FBQS9JLFFBQUEwYSxFQUFBelIsU0FBQSxTQUFBOEIsRUFBQXhGLEdBQ0EsR0FBQXVoQyxHQUFBLE9BQ0FjLEdBQ0FuSSxRQUFBLFdBQ0FsNkIsUUFDQXNILGVBQUE2TixFQUFBN04sZUFDQTlDLGFBQUEyUSxFQUFBM1EsYUFJQSs4QixJQURBcHNCLEVBQUF0TyxVQUFBc08sRUFBQXRPLFVBQUFzTyxFQUFBck8sZUFBQUMsUUFBQS9HLElBQUEsR0FDQXdGLEVBRUE1RCxFQUFBL0osUUFBQWdLLGNBQUEsV0FFQSxJQUVBeWdDLEdBRkFDLEVBQUFSLEdBQUEsRUFBQS8rQixFQUFBbkwsWUFBaUVzZCxHQUFTblYsV0FDMUV3aUMsRUFBQWhCLEdBQUEsRUFBQXgrQixFQUFBbkwsVUFBb0VtSSxTQUFlbVYsR0FJbkZtdEIsR0FEQWYsRUFBQWxtQyxNQUFBeUcsV0FDQSxFQUFBNDNCLEVBQUE3aEMsU0FBQTJxQyxFQUFBakIsRUFBQWxtQyxNQUFBeUcsV0FFQTBnQyxDQUdBLElBQUE1MUIsR0FBQSxTQUFBMFMsR0FDQWlpQixFQUFBbG1DLE9BQUFrbUMsRUFBQWxtQyxNQUFBdVIsU0FBQTIwQixFQUFBbG1DLE1BQUF1UixRQUFBMFMsR0FDQW5LLEVBQUFmLGVBQ0FlLEVBQUFmLGNBQUFpdUIsR0FjQSxJQVZBcEMsRUFBQXJsQyxLQUFBZ0gsRUFBQS9KLFFBQUF3aUMsYUFBQWtILEdBQ0EzbEMsSUFBQSxXQUFBb21DLEVBQUFULEVBQUF2aEMsR0FDQXlpQyxhQUFBemlDLEVBQ0E4QixVQUFBd2dDLEVBQ0FudkIsU0FBQSxLQUNBbE4sT0FBQSxFQUFBakQsRUFBQW5MO0FBQTBDZzlCLFFBQUEsUUFBa0IwTSxFQUFBbG1DLE1BQUE0SyxVQUF5QnM4QixHQUNyRjMxQixhQUlBdUksRUFBQTlPLFVBQUE4TyxFQUFBdk8sUUFBQSxHQUNBLEdBQUE4N0IsR0FBQXZ0QixFQUFBUCxjQUFBTyxFQUFBaFIsYUFBQSxFQUFBZ1IsRUFBQWhSLFlBRUFuRSxJQUFBeUQsRUFBQWkvQixJQUNBOW1DLElBQUE2SCxFQUFBekQsR0FDQW1pQyxFQUFBdm5DLEtBQUFnSCxFQUFBL0osUUFBQXdpQyxhQUFBa0gsR0FDQTNsQyxJQUFBLFlBQUFvbUMsRUFBQVQsRUFBQTNsQyxHQUNBNm1DLGFBQUE3bUMsRUFDQWtHLFVBQUF3Z0MsRUFDQXI4QixPQUFBLEVBQUFqRCxFQUFBbkwsWUFBK0MwcEMsRUFBQWxtQyxNQUFBNEssVUFBeUJzOEIsR0FDeEUzMUIsY0FJQTVNLEVBQUEwaUMsSUFDQTltQyxFQUFBNkgsRUFBQXpELEVBQ0FvaUMsRUFBQXhuQyxLQUFBZ0gsRUFBQS9KLFFBQUF3aUMsYUFBQWtILEdBQ0EzbEMsSUFBQSxhQUFBb21DLEVBQUFULEVBQUEzbEMsR0FDQTZtQyxhQUFBN21DLEVBQ0FrRyxVQUFBd2dDLEVBQ0FyOEIsT0FBQSxFQUFBakQsRUFBQW5MLFlBQStDMHBDLEVBQUFsbUMsTUFBQTRLLFVBQXlCczhCLEdBQ3hFMzFCLGlCQU1BdUksRUFBQTFRLElBQ0EwOUIsRUFBQW43QixPQUFBaTVCLEVBQUFtQyxHQUFBTyxVQUVBUixFQUFBbjdCLE9BQUFpNUIsRUFBQW1DLEdBSUE1cUMsR0FBQTRtQyxNQUFBeDhCLEVBQUEvSixRQUFBNDBCLGFBQ0FDLFlBQUEsUUFFQVcsT0FBQSxXQUNBLEdBQUE0UyxHQUFBaUMsRUFBQS9qQyxLQUFBaEMsVUFBQWQsTUFDQSxPQUFBdUcsR0FBQS9KLFFBQUFnSyxjQUNBLE9BQ09DLFVBQUEsY0FBQW1FLE1BQUE5SixLQUFBZCxNQUFBNEosWUFDUGc3QixPakV5dFJTLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FFSCxTQUFVMW9DLEVBQVFDLEVBQVNDLEdBRWpDLFlrRXA0UkEsU0FBQW1yQyxHQUFBQyxHQUNBLGdCQUFBQyxHQUNBLEdBQUFqcUMsR0FBQWlxQyxFQUFBanFDLFNBQ0FDLEVBQUFncUMsRUFBQWhxQyxRQUNBLGlCQUFBaXFDLEdBQ0EsZ0JBQUFobUIsR0FDQSx3QkFBQUEsR0FDQUEsRUFBQWxrQixFQUFBQyxFQUFBK3BDLEdBR0FFLEVBQUFobUIsTUFYQXZsQixFQUFBSSxZQUFBLENBaUJBLElBQUFvckMsR0FBQUosR0FDQUksR0FBQUMsa0JBQUFMLEVBRUFwckMsRUFBQSxRQUFBd3JDLEdsRTI0UlMsQ0FDQSxDQUNBLENBQ0EsQ0FFSCxTQUFVenJDLEVBQVFDLEVBQVNDLEdBRWpDLGNBQzRCLFNBQVN5bkIsRUFBUU0sR21FbjZSN0MsUUFBQTBqQixHQUFBbmxCLEdBQWtDLEdBQUFoZ0IsTUFBQUMsUUFBQStmLEdBQUEsQ0FBMEIsT0FBQXppQixHQUFBLEVBQUE2bkMsRUFBQXBsQyxNQUFBZ2dCLEVBQUF4aUIsUUFBMENELEVBQUF5aUIsRUFBQXhpQixPQUFnQkQsSUFBTzZuQyxFQUFBN25DLEdBQUF5aUIsRUFBQXppQixFQUFvQixPQUFBNm5DLEdBQXNCLE1BQUFwbEMsT0FBQWdpQixLQUFBaEMsR0FtRnZLLFFBQUFxbEIsR0FBQTEwQixFQUFBMjBCLEdBQ0EsUUFBQUMsS0FDQSxHQUFBQyxHQUFBcG5DLEtBQUEsS0FFQUEsTUFBQSxpQkFDQSxNQUFBa25DLEdBQUFwbEMsTUFBQTlCLEtBQUF5QixXQUdBLElBQUErbUIsR0FBQWpXLEVBQUF6USxNQUFBOUIsS0FBQXlCLFVBSUEsT0FGQXpCLE1BQUEsTUFBQW9uQyxFQUVBNWUsRUFLQSxNQUZBMmUsR0FBQUUsZ0JBQUE5MEIsRUFFQTQwQixFQUdBLFFBQUFub0MsR0FBQXNvQyxFQUFBdnlCLEVBQUF3eUIsR0FDQSxHQUFBQyxHQUFBN3JDLE9BQUFvUyxlQUFBdzVCLEVBRUFELEdBQUFocEMsUUFBQSxTQUFBa1IsR0FDQSxHQUFBblEsR0FBQTFELE9BQUE4ckMseUJBQUExeUIsRUFBQXZGLEdBQ0FrNEIsRUFBQUYsRUFBQXRsQyxlQUFBc04sSUFBQTdULE9BQUE4ckMseUJBQUFELEVBQUFoNEIsRUFFQSxzQkFBQWs0QixHQUFBN3JDLE9BQUEsa0JBQUF3RCxHQUFBeEQsTUFBQSxDQUNBLEdBQUF3ckMsR0FBQUosRUFBQTVuQyxFQUFBeEQsTUFBQTZyQyxFQUFBN3JDLE1BRUFGLFFBQUFDLGVBQUEyckMsRUFBQS8zQixHQUFnRDNULE1BQUF3ckMsUUFFaEQxckMsUUFBQUMsZUFBQTJyQyxFQUFBLzNCLEVBQUFuUSxLQUtBLFFBQUFpeEIsR0FBQXB4QixHQUNBLEdBQUFnNEIsR0FBQXoxQixVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxHQUFBOUYsT0FFQWtELEVBQUFvb0MsRUFBQS9uQyxFQUFBcU8sWUFBQTJwQixHQUNBeVEsRUFBQWhzQyxPQUFBaXNDLG9CQUFBMW9DLEdBQUFsQyxPQUFBLFNBQUF5QyxHQUNBLE9BQUFvb0MsR0FBQSx3QkFBQXBvQyxJQUdBcW9DLEdBQUFqcEMsRUFBQXE0QixHQUVBcjRCLEVBQUFlLFVBQUFqRSxPQUFBMlIsT0FBQTRwQixFQUFBdDNCLFdBQ0FaLEVBQUEyb0MsRUFBQXpvQyxFQUFBTCxFQUFBZSxXQUNBZixFQUFBZSxVQUFBMk4sWUFBQTFPLENBRUEsSUFBQWMsR0FBQVQsRUFBQSxNQUVBLElBQUFTLEVBQUEsQ0FDQSxHQUFBb29DLEdBQUFwc0MsT0FBQWlzQyxvQkFBQWpvQyxFQUVBWCxHQUFBK29DLEVBQUFwb0MsRUFBQWQsR0FHQSxNQUFBQSxHQWNBLFFBQUFtcEMsR0FBQUMsR0FDQSxHQUFBQyxHQUFBLFdBQ0EsR0FBQW5xQyxHQUFBLE1BSUFBLEdBREFELFFBQUFtcUMsR0FDQUUsU0FBQXZvQyxVQUFBc1AsS0FBQWxOLEtBQUFsRSxRQUFBbXFDLEdBQUFucUMsU0FFQXFxQyxTQUFBdm9DLFVBQUFzUCxLQUFBbE4sS0FBQWxFLFFBQUFDLElBQUFELFNBRUFDLEVBQUErRCxNQUFBekYsT0FBQW9GLFdBSUEsbUJBQ0EsR0FBQWdSLE1BQUE1SCxPQUFBakosTUFBQWhDLFVBQUF5WCxNQUFBclYsS0FBQVAsV0FFQWdSLEdBQUEyMUIsUUFBQSxrQkFDQUYsRUFBQXBtQyxNQUFBekYsT0FBQTBxQyxFQUFBdDBCLEtBdzBCQSxRQUFBNDFCLEdBQUFDLEVBQUF0K0IsR0FDQSxHQUFBdStCLEdBQUEsTUFVQSxJQVJBditCLEVBQUF3K0IsU0FDQTdzQyxPQUFBcUgsS0FBQWdILEVBQUF3K0IsU0FBQWxxQyxRQUFBLFNBQUFtQixHQUNBLGtCQUFBQSxFQUFBNlcsZ0JBQ0FpeUIsRUFBQXYrQixFQUFBdytCLFFBQUEvb0MsTUFLQThvQyxFQUFBLENBQ0EsR0FBQUUsR0FBQUYsRUFBQTlvQixNQUFBLEtBQUFwSSxPQUFBLEtBRUEsS0FDQSxHQUFBcXhCLEdBQUFDLEtBQUFGLEdBRUFHLEVBQUEsTUFRQSxPQUxBQSxHQURBTixFQUFBMTlCLFFBQUEsUUFDQTA5QixFQUFBLDBCQUFBSSxFQUVBSixFQUFBLDBCQUFBSSxFQUlLLE1BQUF2bEIsS0FVTCxNQUFBbWxCLEdBR0EsUUFBQU8sR0FBQUMsRUFBQVIsRUFBQXQrQixHQUNBLFVBQUF6SixTQUFBLFNBQUFDLEVBQUFDLEdBYUEsUUFBQXNvQyxLQUNBdG9DLEVBQUEsR0FBQTZaLE9BQUEsb0NBYkEsR0FBQTB1QixHQUFBLEdBQUFDLGVBRUFELEdBQUFFLE9BQUEsV0FDQSxJQUNBLEdBQUFDLEdBQUFoWCxLQUFBaVgsTUFBQUosRUFBQUssYUFFQTdvQyxJQUFpQjJvQyxPQUFBRyxpQkFBQU4sRUFBQU8sUUFBQSxJQUNWLE1BQUFwbUIsR0FDUDNpQixHQUFpQmdwQyxLQUFBUixFQUFBSyxhQUFBQyxpQkFBQU4sRUFBQVMsUUFBQSxNQVFqQlQsRUFBQVUsUUFBQVgsRUFDQUMsRUFBQVcsVUFBQVosRUFFQUMsRUFBQWhwQixLQUFBOG9CLEVBQUFULEVBQUFDLEVBQUF0K0IsSUFDQWcvQixFQUFBMVcsS0FBQXRvQixFQUFBdEgsUUFJQSxRQUFBa25DLEtBQ0EsR0FBQUMsR0FBQSxtQkFBQXhrQyxRQUNBeWtDLEdBQUEsQ0FFQSxPQUFBRCxJQUFBQyxFQUdBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUEsRUFBQUMsUUFBQSxLQUFBRCxFQUFBQyxPQUFBLElBQ0EsTUFBQUQsRUFHQSxJQUFBN3dCLEdBQUEsR0FBQW1CLE9BQUEwdkIsRUFBQUUsV0FJQSxNQUZBL3dCLEdBQUE4d0IsT0FBQUQsRUFBQUMsT0FDQTl3QixFQUFBNndCLFdBQ0E3d0IsRUFHQSxRQUFBZ3hCLEdBQUFILEdBQ0EsTUFBQUEsR0FBQWIsT0FBQTNyQyxLQUFBLFNBQUEyckMsR0FDQSxPQUFZQSxPQUFBRyxpQkFBQVUsRUFBQVQsUUFBQSxLQUNULGlCQUNILEdBQUFhLEdBQUFKLEVBQUFLLE9BRUEsT0FBQUQsR0FBQVosT0FBQWhzQyxLQUFBLFNBQUFnc0MsR0FDQSxPQUFjQSxPQUFBRixpQkFBQWMsRUFBQVgsUUFBQSxPQUtkLFFBQUFhLEdBQUF4QixFQUFBUixHQUNBLEdBQUF0K0IsR0FBQXZJLFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLEtBSUEsS0FBQW1vQyxJQUFBLENBQ0EsR0FBQVcsR0FBQSxHQUFBQyxlQUVBLHlCQUFBRCxJQUNBLE1BQUExQixHQUFBL21DLE1BQUF6RixPQUFBb0YsV0FPQSxNQUhBdUksR0FBQTgrQixTQUNBOStCLEVBQUF5Z0MsS0FBQSxPQUVBQyxNQUFBcEMsRUFBQXQrQixHQUFBeE0sS0FBQXVzQyxHQUFBdnNDLEtBQUEyc0MsR0E4V0EsUUFBQVEsS0FDQSxRQUFBQyxFQU1BLFFBQUFDLEdBQUFydkMsR0FDQSxHQUFBQSxLQUFBc3ZDLEdBQ0EsTUFBQXR2QyxHQUFBc3ZDLEVBR0EsSUFBQXp1QyxTQUFBYixFQUNBLG1CQUdBLFdBQUFBLEVBQ0EsY0FHQSxJQUFBbUMsR0FBQSxtQkFBQW5DLEdBQUEsWUFBQXV2QyxFQUFBdnZDLEdBQ0EyQixFQUFBLE1BRUEsUUFBQVEsR0FDQSxhQUNBUixFQUFBNnRDLEVBQUF4dkMsR0FFQTJCLElBQ0FBLEVBQUE2dEMsRUFBQXh2QyxHQUFBLEtBQUFBLEVBR0EsTUFFQSxjQUNBMkIsRUFBQTh0QyxFQUFBenZDLEdBRUEyQixJQUNBQSxFQUFBOHRDLEVBQUF6dkMsR0FBQSxLQUFBbXZDLElBR0EsTUFFQSxlQUVBeHRDLEVBREEzQixFQUNBLFNBRUEsU0FHQSxNQUVBLFNBQ0EsR0FBQUEsSUFBQUcsT0FBQSxDQUNBd0IsRUFBQSxVQUNBLE9BR0EsR0FBQTNCLElBQUFvRyxNQUFBLENBQ0F6RSxFQUFBLFNBQ0EsT0FHQUEsRUFBQSt0QyxFQUFBLElBQUFQLElBRUEsT0FBQW52QyxFQUFBc3ZDLEdBQ0F0dkMsRUFBQXN2QyxHQUFBM3RDLEdBRUFndUMsRUFBQXR2QyxNQUFBc0IsRUFDQXhCLE9BQUFDLGVBQUFKLEVBQUFzdkMsRUFBQUssSUFJQSxNQUFBaHVDLEdBYUEsUUFBQXVkLEdBQUFqYixFQUFBNUQsR0FDQXV2QyxFQUFBM3JDLEtBQ0EyckMsRUFBQTNyQyxHQUFBNUQsR0FJQSxRQUFBd3ZDLEdBQUE1ckMsR0FDQSxNQUFBMnJDLEdBQUEzckMsR0FLQSxRQUFBNnJDLEdBQUFDLEVBQUFDLEdBQ0EsTUFBQUQsS0FBQUMsR0FJQTd2QyxPQUFBcUgsS0FBQXVvQyxHQUFBeEgsTUFBQSxTQUFBdGtDLEdBQ0EsTUFBQThyQyxHQUFBOXJDLFlBQUFveUIsTUFDQTBaLEVBQUE5ckMsR0FBQStHLGFBQUFnbEMsRUFBQS9yQyxHQUFBK0csV0FDSyxXQUFBdWtDLEVBQUFRLEVBQUE5ckMsSUFDTDZyQyxFQUFBQyxFQUFBOXJDLEdBQUErckMsRUFBQS9yQyxJQUdBOHJDLEVBQUE5ckMsS0FBQStyQyxFQUFBL3JDLEtBeWhCQSxRQUFBZ3NDLEdBQUFDLEVBQUEvdEMsR0FDQSxHQUFBNFUsR0FBQSxNQUVBLFFBQUFtNUIsR0FDQSxVQUNBbjVCLEVBQUEsV0FDQSxNQUFBdlMsTUFBQTJyQyxTQUFBaHVDLEdBRUEsTUFDQSxXQUNBNFUsRUFBQSxXQUNBLE1BQUF2UyxNQUFBMHFDLE1BQUE1b0MsTUFBQTlCLE1BQUFyQyxHQUFBa04sT0FBQWpKLE1BQUFoQyxVQUFBeVgsTUFBQXJWLEtBQUFQLGFBRUEsTUFDQSxhQUNBOFEsRUFBQSxXQUNBLE1BQUF2UyxNQUFBNHJDLFdBQUE5cEMsTUFBQTlCLE1BQUFyQyxHQUFBa04sT0FBQWpKLE1BQUFoQyxVQUFBeVgsTUFBQXJWLEtBQUFQLGNBS0EsTUFBQThRLEduRW96TnNELEdtRXI2UnREdzRCLEdBQUEsa0JBQUF6Z0IsU0FBQSxnQkFBQUEsUUFBQXVoQixTQUFBLFNBQUFyd0MsR0FBb0csYUFBQUEsSUFBcUIsU0FBQUEsR0FBbUIsTUFBQUEsSUFBQSxrQkFBQTh1QixTQUFBOXVCLEVBQUErUixjQUFBK2MsUUFBQTl1QixJQUFBOHVCLE9BQUExcUIsVUFBQSxlQUFBcEUsSUFJNUkrRyxFQUFBLE1BR0FBLEdBREEsa0JBQUE1RyxRQUFBNEcsT0FDQTVHLE9BQUE0RyxPQUVBLFNBQUF0RCxHQUNBLEdBQUE1QyxTQUFBNEMsR0FBQSxPQUFBQSxFQUNBLFNBQUFILFdBQUEsNkNBR0EsSUFBQXlqQixHQUFBNW1CLE9BQUFzRCxHQUVBNnNDLEtBQUF6MEIsTUFBQXJWLEtBQUFQLFVBQUEsRUFnQkEsT0FkQXFxQyxHQUFBMXNDLE9BQUEsR0FDQTBzQyxFQUFBeHRDLFFBQUEsU0FBQWtFLEdBQ0EsR0FBQW5HLFNBQUFtRyxHQUFBLE9BQUFBLEVBQUEsQ0FDQSxHQUFBdXBDLEdBQUEsTUFFQSxLQUFBQSxJQUFBdnBDLEdBQ0FBLEVBQUFOLGVBQUE2cEMsS0FDQXhwQixFQUFBd3BCLEdBQUF2cEMsRUFBQXVwQyxPQU9BeHBCLEVBSUEsSUFBQXVsQixHQUFBdmxDLEVBRUFrcEIsRUFBQSxNQXNDQUEsR0FwQ0E3cEIsTUFBQWhDLFVBQUE2ckIsU0FvQ0EsU0FBQXpYLEdBQ0EsR0FBQXZCLE1BQUE0RSxNQUFBclYsS0FBQVAsVUFBQSxFQUVBLE9BQUFHLE9BQUFoQyxVQUFBNnJCLFNBQUEzcEIsTUFBQWtTLEVBQUF2QixJQXRDQSxTQUFBdUIsRUFBQWc0QixHQUNBLEdBQUFDLEdBQUF0d0MsT0FBQXFZLEdBQ0E1VSxFQUFBL0IsU0FBQTR1QyxFQUFBN3NDLE9BQUEsTUFFQSxRQUFBQSxFQUNBLFFBR0EsSUFBQThzQyxHQUFBN3VDLFNBQUFvRSxVQUFBLFVBQ0FvQyxFQUFBLE1BWUEsS0FWQXFvQyxHQUFBLEVBQ0Fyb0MsRUFBQXFvQyxHQUVBcm9DLEVBQUF6RSxFQUFBOHNDLEVBRUFyb0MsRUFBQSxJQUNBQSxFQUFBLElBSUFBLEVBQUF6RSxHQUFBLENBQ0EsR0FBQStzQyxHQUFBRixFQUFBcG9DLEVBR0EsSUFBQW1vQyxJQUFBRyxHQUFBSCxPQUFBRyxNQUVBLFFBRUF0b0MsS0FHQSxTQVVBLElBQUFna0MsR0FBQXBjLEVBZ0VBMmdCLEVBQUE5YixHQUNBL2lCLFlBQUEsYUFHQTgrQixRQUNBQyxPQUFBLFNBQUFDLEdBQ0EsTUFBQWpjLEdBQUFpYyxFQUFBdnNDLFVBMkJBd3NDLEVBQUFKLEVBQUFFLFFBUUEvK0IsWUFBQSxhQUVBa2tCLE1BQUF1VyxFQUFBLFNBQ0F2VCxLQUFBdVQsRUFBQSxRQUNBanlCLEtBQUFpeUIsRUFBQSxRQUNBN3VCLE1BQUE2dUIsRUFBQSxXQUdBeUUsRUFBQSxHQUFBRCxHQUVBRSxFQUFBTixFQUFBRSxRQUNBLytCLFlBQUEsU0FBQXNDLEdBQ0EsR0FBQXZQLEdBQUFOLElBRUFyRSxRQUFBcUgsS0FBQWhELEtBQUEyc0Msc0JBQUFydUMsUUFBQSxTQUFBbUIsR0FDQSxHQUFBb1EsRUFBQTNOLGVBQUF6QyxHQUFBLENBQ0EsR0FBQW10QyxHQUFBdHNDLEVBQUFxc0MscUJBQUFsdEMsR0FDQXNULEVBQUF6UyxFQUFBc3NDLEVBRUE3NUIsR0FBQWxELEVBQUFwUSxHQUFBb1EsTUFHQTdQLEtBQUE2c0MsbUJBQUF2dUMsUUFBQSxTQUFBbUIsR0FDQSxJQUFBb1EsRUFBQTNOLGVBQUF6QyxHQUNBLFNBQUE2YSxPQUFBLHFDQUFBN2EsRUFBQSxJQUVBYSxHQUFBYixHQUFBb1EsRUFBQXBRLEtBR0FPLEtBQUE4c0MsbUJBQUF4dUMsUUFBQSxTQUFBbUIsR0FDQW9RLEVBQUEzTixlQUFBekMsS0FDQWEsRUFBQWIsR0FBQW9RLEVBQUFwUSxPQWVBa3RDLHNCQUNBSSxnQkFBQSw0QkFhQUMseUJBQUEsU0FBQUMsRUFBQXA5QixHQUNBNDhCLEVBQUExMkIsS0FBQSxrR0FDQWxHLEVBQUF6UCxPQUFBNnNDLEVBQUEsa0JBV0FKLG9CQUFBLDJCQVNBQyxvQkFBQSxlQVVBM3NDLE9BQUEsR0FRQUUsTUFBQSxHQVNBRCxPQUFBLEdBVUEyc0MsZ0JBQUEsR0FRQUcsaUJBR0FDLEVBQUEsaUJBRUFDLEVBQUFoQixFQUFBRSxRQUNBLytCLFlBQUEsV0FDQSxHQUFBc0MsR0FBQXBPLFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLE1BQ0E0ckMsRUFBQTVyQyxVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxLQUVBekIsTUFBQTZQLFFBRUFpNEIsRUFBQTluQyxLQUFBcXRDLElBR0F4OUIsTUFBQSxLQUNBeTlCLFdBQUEsS0FDQUMsUUFBQSxLQUNBQyxXQUFBLE9BUUFDLEVBQUFMLEVBQUFkLE9BQUEzd0MsT0FBQXFELGtCQUNBdU8sWUFBQSxXQUNBdk4sS0FBQSxNQUFBOEIsTUFBQTlCLEtBQUF5QixXQUVBekIsS0FBQXlQLFNBQUF6UCxLQUFBc1EsT0FBQSxNQUdBZCxNQVFBNjdCLElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBTCxNQUVBalEsY0FBQSxFQUNBRCxZQUFBLEdBRUFnUixRQVVBKzZCLElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBUyxRQUVBL1EsY0FBQSxFQUNBRCxZQUFBLEdBRUFtUSxVQVdBNDdCLElBQUEsV0FDQSxNQUFBcnJDLE1BQUEwdEMsV0FFQWh6QixJQUFBLFNBQUE3ZSxHQUNBLElBQUFnc0MsRUFBQTduQyxLQUFBc1EsT0FBQXpVLEdBR0EsU0FBQXllLE9BQUEsZ0NBQUF0YSxLQUFBd1AsS0FBQSxJQUdBLE9BTEF4UCxNQUFBMHRDLFVBQUE3eEMsRUFLQUEsR0FFQTBELGNBQUEsRUFDQUQsWUFBQSxNQUlBcXVDLElBQWlCbitCLEtBQUEsT0FBQW8rQixVQUFBLFVBQXNDcCtCLEtBQUEsT0FBQW8rQixVQUFBLFVBQXNDcCtCLEtBQUEsUUFBQW8rQixVQUFBLFVBQXVDcCtCLEtBQUEsUUFBQW8rQixVQUFBLFlBQXlDcCtCLEtBQUEsVUFBQW8rQixVQUFBLFlBQTJDcCtCLEtBQUEsU0FBQW8rQixVQUFBLFlBQTBDcCtCLEtBQUEsUUFBQW8rQixVQUFBLFlBQXlDcCtCLEtBQUEsU0FBQW8rQixVQUFBLFlBQTBDcCtCLEtBQUEsWUFBQW8rQixVQUFBLGNBQStDcCtCLEtBQUEsWUFBQW8rQixVQUFBLGNBRXBZQyxFQUFBekIsRUFBQUUsT0FBQTN3QyxPQUFBcUQsa0JBQ0F1TyxZQUFBLFNBQUFzQyxHQUNBLEdBQUE3TyxHQUFBaEIsSUFFQXJFLFFBQUFxSCxLQUFBNk0sR0FBQXZSLFFBQUEsU0FBQW1CLEdBQ0F1QixFQUFBdkIsR0FBQW9RLEVBQUFwUSxRQUlBa3VDLFVBc0JBdEMsSUFBQSxXQUNBLEdBQUFubkMsR0FBQWxFLEtBQUFrRSxJQUNBNHBDLEVBQUE1cEMsRUFBQWtpQixZQUFBLEtBQ0EybkIsRUFBQTdwQyxFQUFBbVQsTUFBQSxFQUFBeTJCLEdBQ0FFLEVBQUE5cEMsRUFBQW1ULE1BQUF5MkIsRUFNQSxPQUpBSCxHQUFBcnZDLFFBQUEsU0FBQWYsR0FDQUEsRUFBQTJHLElBQUE2cEMsRUFBQSxJQUFBeHdDLEVBQUFpUyxLQUFBdytCLElBR0FMLEdBRUFwdUMsY0FBQSxFQUNBRCxZQUFBLE1BU0EydUMsRUFBQWIsRUFBQWQsT0FBQTN3QyxPQUFBcUQsa0JBQ0F1TyxZQUFBLFdBQ0F2TixLQUFBLE1BQUE4QixNQUFBOUIsS0FBQXlCLFlBa0JBd2UsWUFBQSxXQUNBLEdBQUF4akIsR0FBQWdGLFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLEtBRUF5c0MsRUFBQWx1QyxLQUFBa3VDLE9BQ0FDLEVBQUEsV0FBQUQsRUFBQTl0QyxPQUFBLFFBRUFndUMsRUFBQXB1QyxLQUFBN0MsR0FBQSxJQUFBRSxTQUFBWixFQUFBLElBRUE0VixFQUFBLGdCQUFBNjdCLEVBQUEvdEMsT0FBQSxRQUVBLE9BQUFndUMsR0FBQSxJQUFBQyxFQUFBLElBQUEvN0IsS0FHQWxWLElBT0FrdUMsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUF0UyxRQUFBSixJQUVBb0MsY0FBQSxFQUNBRCxZQUFBLEdBRUErUCxXQU9BZzhCLElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBak0sUUFBQXpHLElBRUFvQyxjQUFBLEVBQ0FELFlBQUEsR0FFQTRPLE9BT0FtOUIsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUF0UyxRQUFBMlEsT0FFQTNPLGNBQUEsRUFDQUQsWUFBQSxHQUVBK3VDLGNBT0FoRCxJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQWpNLFFBQUFzSyxPQUVBM08sY0FBQSxFQUNBRCxZQUFBLEdBRUFndkMsZ0JBV0FqRCxJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQXRTLFFBQUFneEMsa0JBRUFodkMsY0FBQSxFQUNBRCxZQUFBLEdBRUEwUixPQVFBcTZCLElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBdFMsUUFBQXlULE9BRUF6UixjQUFBLEVBQ0FELFlBQUEsR0FFQWt2QyxnQkFTQW5ELElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBdFMsUUFBQWt4QyxpQkFFQWx2QyxjQUFBLEVBQ0FELFlBQUEsR0FFQW92QyxPQU9BckQsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUF0UyxRQUFBbXhDLE9BRUFudkMsY0FBQSxFQUNBRCxZQUFBLEdBRUFxdkMsY0FzQkF0RCxJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQXRTLFFBQUFxeEMsZUFFQXJ2QyxjQUFBLEVBQ0FELFlBQUEsR0FFQXV2QyxXQU9BeEQsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUF0UyxRQUFBc3hDLFdBRUF0dkMsY0FBQSxFQUNBRCxZQUFBLEdBRUFrUyxPQW1CQTY1QixJQUFBLFdBQ0EsR0FBQWx1QyxHQUFBNkMsS0FBQTdDLEdBQ0E2RyxFQUFBaEUsS0FBQTZQLE1BQUFqTSxRQUFBSSxPQUVBOHFDLEVBQUE5cUMsRUFBQSxHQUNBK3FDLEVBQUEvcUMsRUFBQWhILE9BQUEsU0FBQXdVLEdBQ0EsTUFBQUEsR0FBQXc5QixZQUFBcGtDLFFBQUF6TixNQUFBLElBQ08sR0FFUHFVLEVBQUF1OUIsR0FBQUQsQ0FFQSxPQUFBdDlCLEdBSUEsR0FBQXE4QixHQUFBcjhCLEdBSEEsTUFLQWpTLGNBQUEsRUFDQUQsWUFBQSxHQUVBOEUsZUFzQkFpbkMsSUFBQSxXQUNBLE1BQUFyckMsTUFBQXdSLE1BSUF4UixLQUFBd1IsTUFBQW04QixhQUVBcHVDLGNBQUEsRUFDQUQsWUFBQSxNQUlBMnZDLEVBQUEsU0FBQWo3QixHQUNBLE1BQUFBLEdBQUFrRixPQUFBLFNBQUFnMkIsRUFBQWp5QyxHQUtBLE1BSkFpeUMsR0FBQXRrQyxRQUFBM04sR0FBQSxHQUNBaXlDLEVBQUF6d0MsS0FBQXhCLEdBR0FpeUMsUUFJQUMsRUFBQSxzREFPQUMsRUFBQWhDLEVBQUFkLE9BQUEzd0MsT0FBQXFELGtCQUNBdU8sWUFBQSxXQUNBdk4sS0FBQSxNQUFBOEIsTUFBQTlCLEtBQUF5QixjQUdBdEUsSUFRQWt1QyxJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQUMsWUFFQXZRLGNBQUEsRUFDQUQsWUFBQSxHQUVBNE8sT0FPQW05QixJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQTNCLE9BRUEzTyxjQUFBLEVBQ0FELFlBQUEsR0FFQTBRLGFBT0FxN0IsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUF3L0IsV0FFQTl2QyxjQUFBLEVBQ0FELFlBQUEsR0FFQTBFLFFBb0JBcW5DLElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBN0wsT0FBQUwsSUFBQSxTQUFBNk4sR0FDQSxVQUFBcThCLEdBQUFyOEIsTUFHQWpTLGNBQUEsRUFDQUQsWUFBQSxHQUVBZ3dDLFVBQ0FqRSxJQUFBLFdBR0EsTUFGQXJyQyxNQUFBdXZDLFVBQUF2dkMsS0FBQXV2QyxjQUVBdnZDLEtBQUF1dkMsV0FFQWh3QyxjQUFBLEVBQ0FELFlBQUEsR0FFQStFLFNBZ0NBZ25DLElBQUEsV0FDQSxHQUFBcnJDLEtBQUFzdkMsU0FBQWpyQyxRQUNBLE1BQUFyRSxNQUFBc3ZDLFNBQUFqckMsT0FHQSxJQUFBbXJDLEdBQUF4dkMsS0FBQTZQLE1BQUF4TCxRQUNBb3JDLEVBQUF6dkMsS0FBQTJ0QyxRQW9CQSxPQWxCQTN0QyxNQUFBc3ZDLFNBQUFqckMsUUFBQW1yQyxFQUFBN3JDLElBQUEsU0FBQTRMLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUMsS0FFQWtnQyxFQUFBRCxFQUFBdjJCLE9BQUEsU0FBQXkyQixFQUFBcHlDLEdBQ0EsR0FBQXF5QyxHQUFBcnlDLEVBQUFveEMsYUFBQTN4QyxPQUFBLFNBQUE2eUMsR0FDQSxNQUFBQSxHQUFBcmdDLE9BQUFELEVBQUFDLE9BQ1csRUFJWCxPQUZBbWdDLEdBQUFseEMsS0FBQW14QyxFQUFBL3pDLE9BRUE4ekMsT0FHQXIvQixFQUFBMitCLEVBQUFTLEVBRUEsV0FBQWpDLElBQXVDaitCLE9BQUFjLGFBR3ZDdFEsS0FBQXN2QyxTQUFBanJDLFNBRUE5RSxjQUFBLEVBQ0FELFlBQUEsR0FFQXF1QyxVQU9BdEMsSUFBQSxXQUNBLEdBQUEzN0IsR0FBQTFQLElBRUEsT0FBQUEsTUFBQTZQLE1BQUE4OUIsU0FBQWhxQyxJQUFBLFNBQUFwRyxHQUNBLFVBQUEwd0MsSUFBd0Mxd0MsVUFBQXFHLFFBQUE4TCxJQUF1Q3crQixPQUFBeCtCLEVBQUF3K0IsWUFHL0UzdUMsY0FBQSxFQUNBRCxZQUFBLEdBRUF3d0MsWUFPQXpFLElBQUEsV0FDQSxNQUFBcnJDLE1BQUFxRSxRQUFBVixJQUFBLFNBQUE0TCxHQUNBLE1BQUFBLEdBQUFFLFlBR0FsUSxjQUFBLEVBQ0FELFlBQUEsR0FFQTZFLGlCQWFBa25DLElBQUEsV0FDQSxHQUFBMEUsR0FBQS92QyxLQUFBOHZDLFdBQUE3dEMsS0FBQSxNQUVBLE9BQUFqQyxNQUFBMnRDLFNBQUEzd0MsT0FBQSxTQUFBTyxHQUNBLE1BQUFBLEdBQUEyUSxRQUFBNmhDLElBQ08sVUFFUHh3QyxjQUFBLEVBQ0FELFlBQUEsR0FFQTJRLHNCQW1CQW83QixJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBbUUsZ0JBSUFuRSxLQUFBbUUsZ0JBQUFxTixNQUhBLE1BS0FqUyxjQUFBLEVBQ0FELFlBQUEsTUFJQTB3QyxFQUFBNUQsRUFBQUUsUUFDQS8rQixZQUFBLFNBQUEyZ0MsR0FDQWx1QyxLQUFBa3VDLFVBRUErQixlQUFBLFNBQUF0eUMsR0FDQSxNQUFBQSxHQUFBMFosTUFBQSxrQkFJQTY0QixRQUNBcHRDLFlBQUFzcUMsRUFDQTNwQyxTQUFBMnJDLEdBR0FlLGFBQUEsU0FBQXh5QyxHQUNBLE1BQUFxQyxNQUFBa3dDLE9BQUF2eUMsSUFFQXl5QyxrQkFBQSxTQUFBenlDLEdBQ0EsR0FBQTB5QyxHQUFBNXVDLFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLE1BQ0E0ckMsRUFBQTVyQyxVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxNQUVBNnVDLEVBQUFELEVBQUFyd0MsS0FBQWl3QyxlQUFBdHlDLElBQ0E0eUMsRUFBQXZ3QyxLQUFBd3dDLGVBQUE3eUMsRUFBQTJ5QyxFQUFBakQsRUFFQSxPQUFBa0QsSUFFQUUsb0JBQUEsU0FBQTl5QyxHQUNBLEdBQUEreUMsR0FBQTF3QyxLQUVBMndDLEVBQUFsdkMsVUFBQXJDLE9BQUEsR0FBQS9DLFNBQUFvRixVQUFBLEdBQUFBLFVBQUEsTUFDQTRyQyxFQUFBNXJDLFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLE1BRUF5dUMsRUFBQVMsRUFBQTN3QyxLQUFBaXdDLGVBQUF0eUMsR0FBQSxJQUVBLE9BQUF1eUMsR0FBQXZzQyxJQUFBLFNBQUFrTSxHQUNBLEdBQUEwZ0MsR0FBQUcsRUFBQUYsZUFBQTd5QyxFQUFBa1MsRUFBQXc5QixFQUVBLE9BQUFrRCxNQUdBQyxlQUFBLFNBQUE3eUMsRUFBQWtTLEVBQUF3OUIsR0FDQSxHQUFBdUQsR0FBQTV3QyxLQUFBbXdDLGFBQUF4eUMsRUFJQSxPQUZBMHZDLEdBQUFhLE9BQUFsdUMsS0FBQWt1QyxPQUVBLEdBQUEwQyxHQUFBL2dDLEVBQUF3OUIsTUF1SEF3RCxFQUFBekUsRUFBQUUsT0FBQTN3QyxPQUFBcUQsa0JBQ0FzckMsT0FFQS84QixZQUFBLFNBQUEyZ0MsR0FDQWx1QyxLQUFBa3VDLFVBRUE0QyxZQUFBLFNBQUFuekMsR0FDQSxVQUFBQSxFQUFBMFosTUFBQSxtQkFFQTA1QixTQUFBLFNBQUFDLEVBQUFyekMsRUFBQXN6QyxHQUNBLE9BQUFELEdBQ0EsZUFDQSxNQUFBaHhDLE1BQUFreEMsaUJBQUF2ekMsRUFBQXN6QyxFQUNBLGNBQ0EsTUFBQWp4QyxNQUFBbXhDLGVBQUF4ekMsRUFBQXN6QyxFQUNBLFNBQ0EsV0FHQUMsaUJBQUEsU0FBQXZ6QyxHQUNBLEdBQUEwVSxHQUFBNVEsVUFBQXJDLE9BQUEsR0FBQS9DLFNBQUFvRixVQUFBLEdBQUFBLFVBQUEsTUFFQTZtQyxFQUFBLEdBQUF0b0MsS0FBQW11QyxRQUFBbnVDLEtBQUE4d0MsWUFBQW56QyxHQUNBeXpDLEVBQUF6MUMsT0FBQXFILEtBQUFxUCxFQUVBLElBQUErK0IsRUFBQWh5QyxPQUFBLEdBQ0EsR0FBQWl5QyxHQUFBRCxFQUFBenRDLElBQUEsU0FBQWxFLEdBQ0EsR0FBQTVELEdBQUEsTUFRQSxPQUxBQSxHQURBK0YsTUFBQUMsUUFBQXdRLEVBQUE1UyxJQUNBNFMsRUFBQTVTLEdBQUF3QyxLQUFBLEtBRUFvUSxFQUFBNVMsR0FHQUEsRUFBQSxJQUFBNnhDLG1CQUFBejFDLEtBQ09vRyxLQUFBLElBRVAsT0FBQXFtQyxHQUFBLElBQUErSSxFQUdBLE1BQUEvSSxJQUVBNkksZUFBQSxTQUFBeHpDLEVBQUFSLEdBQ0EsU0FBQTZDLEtBQUFtdUMsUUFBQW51QyxLQUFBOHdDLFlBQUFuekMsR0FBQSxJQUFBUixHQUVBbzBDLGNBQUEsV0FDQSxHQUFBakosR0FBQXRvQyxLQUFBK3dDLFNBQUFqdkMsTUFBQTlCLE1BQUEsWUFBQTZLLE9BQUFqSixNQUFBaEMsVUFBQXlYLE1BQUFyVixLQUFBUCxZQUVBLE9BQUF6QixNQUFBc3FDLEtBQUEsTUFBQWhDLEdBQWtDRSxRQUFBeG9DLEtBQUF3b0MsVUFBd0JockMsS0FBQSxTQUFBd3NDLEdBQzFELE1BQUFBLEdBQUFiLFFBR0FxSSxZQUFBLFdBQ0EsR0FBQWxKLEdBQUF0b0MsS0FBQSt3QyxTQUFBanZDLE1BQUE5QixNQUFBLFVBQUE2SyxPQUFBakosTUFBQWhDLFVBQUF5WCxNQUFBclYsS0FBQVAsWUFFQSxPQUFBekIsTUFBQXNxQyxLQUFBLE1BQUFoQyxHQUFrQ0UsUUFBQXhvQyxLQUFBd29DLFVBQXdCaHJDLEtBQUEsU0FBQXdzQyxHQUMxRCxNQUFBQSxHQUFBYixVQUlBc0ksY0FDQXBHLElBQUEsV0FDQSxNQUFBcUcsTUFBQTF4QyxLQUFBa3VDLE9BQUEvdEMsU0FFQVosY0FBQSxFQUNBRCxZQUFBLEdBRUE2dUMsU0FDQTlDLElBQUEsV0FDQSxHQUFBc0csR0FBQTN4QyxLQUFBa3VDLE9BQ0E5dEMsRUFBQXV4QyxFQUFBdnhDLE9BQ0FDLEVBQUFzeEMsRUFBQXR4QyxLQUdBLGtCQUFBRCxFQUFBLGFBQUFDLEdBRUFkLGNBQUEsRUFDQUQsWUFBQSxHQUVBa3BDLFNBQ0E2QyxJQUFBLFdBQ0EsTUFBQXZELE9BQ0E4SixjQUFBLFNBQUE1eEMsS0FBQXl4QyxhQUNBSSxlQUFBLG1CQUNBQyxnQkFBQSxhQUNBQyxnQkFBQTVFLEdBRU9udEMsS0FBQWt1QyxPQUFBaEIsY0FFUDN0QyxjQUFBLEVBQ0FELFlBQUEsTUFJQXdyQyxFQUFBLG1CQU9Ba0gsRUFBQTVFLEVBQUFkLE9BQUEzd0MsT0FBQXFELGtCQUNBdU8sWUFBQSxXQUNBdk4sS0FBQSxNQUFBOEIsTUFBQTlCLEtBQUF5QixjQUdBdEUsSUFRQWt1QyxJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQWk3QixJQUVBdnJDLGNBQUEsRUFDQUQsWUFBQSxHQUVBcEMsWUFRQW11QyxJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQTNTLFlBRUFxQyxjQUFBLEVBQ0FELFlBQUEsR0FFQXdRLFlBUUF1N0IsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUFDLFlBRUF2USxjQUFBLEVBQ0FELFlBQUEsR0FFQWtTLE9Bb0JBNjVCLElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBMkIsTUFJQSxHQUFBcThCLEdBQUE3dEMsS0FBQTZQLE1BQUEyQixPQUhBLE1BS0FqUyxjQUFBLEVBQ0FELFlBQUEsR0FFQThFLGVBc0JBaW5DLElBQUEsV0FDQSxNQUFBcnJDLE1BQUF3UixNQUlBeFIsS0FBQXdSLE1BQUFtOEIsYUFFQXB1QyxjQUFBLEVBQ0FELFlBQUEsR0FFQTRPLE9BUUFtOUIsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUEzQixPQUVBM08sY0FBQSxFQUNBRCxZQUFBLEdBRUE3QyxVQU9BNHVDLElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBcFQsVUFFQWllLElBQUEsU0FBQTdlLEdBQ0EsR0FBQW8yQyxHQUFBNTBDLFNBQUF4QixFQUFBLEdBRUEsSUFBQW8yQyxFQUFBLEVBQ0EsU0FBQTMzQixPQUFBLDhCQUNPLElBQUEyM0IsSUFBQTVyQyxXQUFBeEssR0FFUCxTQUFBeWUsT0FBQSxtQ0FLQSxPQUZBdGEsTUFBQTZQLE1BQUFwVCxTQUFBdzFDLEVBRUFqeUMsS0FBQTZQLE1BQUFwVCxVQUVBOEMsY0FBQSxFQUNBRCxZQUFBLEdBRUE0eUMsWUFXQTdHLElBQUEsV0FDQSxNQUFBcnJDLE1BQUE2UCxNQUFBcWlDLGdCQUVBeDNCLElBQUEsU0FBQTdlLEdBR0EsTUFGQW1FLE1BQUE2UCxNQUFBcWlDLFdBQUFyMkMsTUFFQUEsR0FFQTBELGNBQUEsRUFDQUQsWUFBQSxHQUVBNmQsZUFRQWt1QixJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQXNOLGVBRUE1ZCxjQUFBLEVBQ0FELFlBQUEsR0FFQTBSLE9BUUFxNkIsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUFtQixPQUVBelIsY0FBQSxFQUNBRCxZQUFBLEdBRUFpdkMsa0JBWUFsRCxJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQTArQixrQkFFQWh2QyxjQUFBLEVBQ0FELFlBQUEsR0FFQTZ5QyxZQVNBOUcsSUFBQSxXQUNBLE9BQUFyckMsS0FBQXZELFNBQUE0SixXQUFBckcsS0FBQWdSLFFBQUExSyxRQUFBLElBRUEvRyxjQUFBLEVBQ0FELFlBQUEsR0FFQW92QyxPQVFBckQsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUE2K0IsT0FFQW52QyxjQUFBLEVBQ0FELFlBQUEsTUFLQTRyQyxFQUFBLGVBQUFyWixLQUFBdWdCLE1BRUFqSCxHQUNBM3JDLFVBQUEsRUFDQUQsY0FBQSxFQUNBRCxZQUFBLEVBQ0F6RCxNQUFBLE1BR0ErdUMsRUFBQSxFQU1BSSxLQUNBQyxLQXdFQUcsRUFBQSxNQUdBQSxHQURBLG1CQUFBcm9CLEdBQ0ExZCxPQUVBMGQsQ0FhQSxJQUFBc3ZCLElBQWtCMzNCLE1BQUEyd0IsT0FzQmxCaUgsRUFBQWxGLEVBQUFkLE9BQUEzd0MsT0FBQXFELGtCQUNBdU8sWUFBQSxXQUNBdk4sS0FBQSxNQUFBOEIsTUFBQTlCLEtBQUF5QixZQW9CQTh3QyxZQUFBLFdBR0EsTUFGQTlGLEdBQUExMkIsS0FBQSw0RkFFQS9WLEtBQUExQyw0QkFBQXdFLE1BQUE5QixLQUFBeUIsWUFtQkFuRSw0QkFBQSxXQUNBLEdBQUFrMUMsTUFBQTNuQyxPQUFBakosTUFBQWhDLFVBQUF5WCxNQUFBclYsS0FBQVAsWUFBQWtDLElBQUEsU0FBQTFHLEdBQ0EsR0FBQW1qQixJQUNBNU8sTUFBQXZVLEVBQUFNLFFBQUFpVSxNQUNBaWhDLGVBQUF4MUMsRUFBQU0sUUFBQTZHLGNBQ0FsSCxXQUFBRCxFQUFBTSxRQUFBSixHQUNBMlMsV0FBQTdTLEVBQUFNLFFBQUE4UixVQUNBbkIsTUFBQWpSLEVBQUFNLFFBQUE4d0MsYUFDQTV4QyxTQUFBWSxTQUFBSixFQUFBUixTQUFBLElBQ0F5MUMsV0FBQWoxQyxFQUFBaTFDLGVBQ0EvMEIsY0FBQWxnQixFQUFBTSxRQUFBMlEsTUFDQThDLE1BQUEvVCxFQUFBTSxRQUFBeVQsTUFDQXU5QixpQkFBQXR4QyxFQUFBTSxRQUFBK3dDLGVBQ0FJLE1BQUF6eEMsRUFBQU0sUUFBQW14QyxNQUtBLE9BRkE3RCxHQUFBenFCLEdBRUFBLElBRUFzeUIsRUFBQTF5QyxLQUFBNlAsTUFBQThpQyxVQUVBRCxHQUFBajBDLEtBQUFxRCxNQUFBNHdDLEVBQUEzTCxFQUFBeUwsR0FFQSxJQUFBSSxHQUFBRixFQUFBeDVCLE9BQUEsU0FBQTI1QixFQUFBNTFDLEdBQ0EsR0FBQTYxQyxHQUFBRCxFQUFBNzFDLE9BQUEsU0FBQSsxQyxHQUNBLE1BQUFBLEdBQUE3MUMsYUFBQUQsRUFBQUMsWUFBQW91QyxFQUFBeUgsRUFBQWIsV0FBQWoxQyxFQUFBaTFDLGNBQ08sRUFRUCxPQU5BWSxHQUNBQSxFQUFBcjJDLFNBQUFxMkMsRUFBQXIyQyxTQUFBUSxFQUFBUixTQUVBbzJDLEVBQUFwMEMsS0FBQXhCLEdBR0E0MUMsTUFhQSxPQVJBN3lDLE1BQUE2UCxNQUFBOGlDLFdBQUFDLEVBQUExNUIsT0FBQSxTQUFBMjVCLEVBQUE1MUMsR0FLQSxNQUpBQSxHQUFBUixVQUFBLEdBQ0FvMkMsRUFBQXAwQyxLQUFBeEIsR0FHQTQxQyxPQUdBN3lDLEtBQUFnekMsZUFxQkF0MEMsZUFBQSxTQUFBdkIsRUFBQVYsR0FDQSxHQUFBQSxFQUFBLEVBQ0EsTUFBQXVELE1BQUFpekMsZUFBQTkxQyxFQUdBLElBQUFpakIsR0FBQXBnQixLQUFBakQsVUFBQUMsT0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFFLFNBQ0ssRUFFTCxPQUFBaWpCLElBQ0FBLEVBQUEzakIsV0FFQXVELEtBQUFnekMsZUFHQSxHQUFBenlDLFNBQUEsU0FBQUMsRUFBQUMsR0FDQUEsRUFBQSxHQUFBNlosT0FBQSxzQkFBQW5kLEVBQUEsc0JBQUE2QyxLQUFBN0MsUUFzQkE4MUMsZUFBQSxTQUFBOTFDLEdBQ0EsR0FBQSsxQyxHQUFBbHpDLEtBQUFqRCxVQUFBcUMsT0FDQW96QyxFQUFBeHlDLEtBQUFqRCxVQUFBQyxPQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUUsU0FFQWcyQyxFQUFBWCxFQUFBcHpDLE1BRUEsT0FBQSt6QyxHQUFBRCxHQUNBbHpDLEtBQUE2UCxNQUFBOGlDLFdBQUFILEVBQUE3dUMsSUFBQSxTQUFBMUcsR0FDQSxNQUFBQSxHQUFBNFMsUUFHQTdQLEtBQUFnekMsZUFHQSxHQUFBenlDLFNBQUEsU0FBQUMsRUFBQUMsR0FDQUEsRUFBQSxHQUFBNlosT0FBQSxzQkFBQW5kLEVBQUEsc0JBQUE2QyxLQUFBN0MsUUFnQkFpMkMsZUFBQSxXQUdBLE1BRkFwekMsTUFBQTZQLE1BQUE4aUMsY0FFQTN5QyxLQUFBZ3pDLGVBZ0JBQSxZQUFBLFdBQ0EsR0FBQUssR0FBQXJ6QyxJQUVBLE9BQUFBLE1BQUF3dEMsV0FBQXRrQyxPQUFBLFFBQUFsSixNQUFBeEMsS0FBQSxTQUFBODFDLEdBR0EsTUFGQXhMLEdBQUF1TCxFQUFBeGpDLE1BQUF5akMsRUFBQXpqQyxPQUVBd2pDLE9BSUFsMkMsSUFRQWt1QyxJQUFBLFdBQ0EsTUFBQXJyQyxNQUFBNlAsTUFBQWk3QixJQUVBdnJDLGNBQUEsRUFDQUQsWUFBQSxHQUVBdkMsV0FRQXN1QyxJQUFBLFdBQ0EsT0FBQXJyQyxLQUFBNlAsTUFBQThpQyxnQkFBQWh2QyxJQUFBLFNBQUExRyxHQUNBLFVBQUErMEMsR0FBQS8wQyxNQUdBc0MsY0FBQSxFQUNBRCxZQUFBLEdBRUE4QixlQVFBaXFDLElBQUEsV0FDQSxNQUFBcnJDLE1BQUFqRCxVQUFBbWMsT0FBQSxTQUFBcTZCLEVBQUF0MkMsR0FDQSxNQUFBczJDLEdBQUF0MkMsRUFBQVIsVUFDTyxJQUVQOEMsY0FBQSxFQUNBRCxZQUFBLEdBRUFyQixVQVVBb3RDLElBQUEsV0FDQSxHQUFBcHRDLEdBQUErQixLQUFBakQsVUFBQW1jLE9BQUEsU0FBQXM2QixFQUFBcHpCLEdBQ0EsTUFBQW96QixHQUFBbnRDLFdBQUErWixFQUFBK3hCLGFBQ08sRUFFUCxPQUFBbDBDLEdBQUFxSSxRQUFBLElBRUEvRyxjQUFBLEVBQ0FELFlBQUEsR0FFQTJnQixhQVFBb3JCLElBQUEsV0FDQSxHQUFBNkMsR0FBQWx1QyxLQUFBa3VDLE9BQ0FDLEVBQUEsV0FBQUQsRUFBQTl0QyxPQUFBLFFBQ0E4eEIsRUFBQW1nQixFQUFBaEgsSUFBQSxNQUVBK0MsRUFBQXB1QyxLQUFBakQsVUFBQTRHLElBQUEsU0FBQTFHLEdBQ0EsTUFBQUEsR0FBQUMsV0FBQSxJQUFBRCxFQUFBUixXQUdBNFYsRUFBQSxnQkFBQTY3QixFQUFBL3RDLE9BQUEsUUFFQSxzQkFBQSt4QixHQUFBLENBQ0EsR0FBQXVoQixHQUFBLE1BRUF2aEIsR0FBQSxTQUFBd2hCLEdBQ0FELEVBQUFDLEVBQUFySSxJQUFBLGlCQUdBb0ksSUFDQXBoQyxHQUFBLElBQUFvaEMsR0FJQSxNQUFBdEYsR0FBQSxJQUFBQyxFQUFBLElBQUEvN0IsR0FFQTlTLGNBQUEsRUFDQUQsWUFBQSxNQUlBcTBDLEVBQUF2SCxFQUFBRSxRQUNBLytCLFlBQUEsU0FBQTJnQyxHQUNBbHVDLEtBQUFrdUMsVUFFQStCLGVBQUEsU0FBQXR5QyxHQUNBLE1BQUFBLEdBQUEwWixNQUFBLE9BRUE4NEIsYUFBQSxXQUNBLE1BQUFtQyxJQUVBbEMsa0JBQUEsU0FBQXp5QyxHQUNBLEdBQUEweUMsR0FBQTV1QyxVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxNQUNBNHJDLEVBQUE1ckMsVUFBQXJDLE9BQUEsR0FBQS9DLFNBQUFvRixVQUFBLEdBQUFBLFVBQUEsTUFFQTZ1QyxFQUFBRCxFQUFBcndDLEtBQUFpd0MsZUFBQXR5QyxJQUNBNHlDLEVBQUF2d0MsS0FBQXd3QyxlQUFBN3lDLEVBQUEyeUMsRUFBQWpELEVBRUEsT0FBQWtELElBRUFDLGVBQUEsU0FBQTd5QyxFQUFBa1MsRUFBQXc5QixHQUNBLEdBQUF1RCxHQUFBNXdDLEtBQUFtd0MsYUFBQXh5QyxFQUlBLE9BRkEwdkMsR0FBQWEsT0FBQWx1QyxLQUFBa3VDLE9BRUEsR0FBQTBDLEdBQUEvZ0MsRUFBQXc5QixJQUVBdUcsVUFBQSxTQUFBajJDLEVBQUE0eUMsR0FDQSxHQUFBc0QsR0FBQTd6QyxLQUFBaXdDLGVBQUF0eUMsR0FDQW0yQixLQUNBamtCLEVBQUFpNEIsS0FBMkJ5SSxFQUFBMWdDLE1BYzNCLE9BWkFpa0IsR0FBQStmLEdBQUFoa0MsUUFFQUEsR0FBQWlrQyxXQUVBbjRDLE9BQUFxSCxLQUFBNk0sR0FBQXZSLFFBQUEsU0FBQW1CLEdBQ0EsR0FBQTVELEdBQUFnVSxFQUFBcFEsSUFFQSxPQUFBNUQsR0FBQSxnQkFBQUEsSUFBQSxJQUFBQSxFQUFBdUQsZUFDQXlRLEdBQUFwUSxLQUlBcTBCLEtBSUFpZ0IsRUFBQTNHLEVBQUFkLE9BQUEzd0MsT0FBQXFELGtCQVFBdU8sWUFBQSxTQUFBc0MsR0FDQSxHQUFBbFUsT0FBQXFILEtBQUE2TSxHQUFBakYsUUFBQSxpQkFDQSxTQUFBMFAsT0FBQSwyRUFHQXRhLE1BQUEsTUFBQThCLE1BQUE5QixLQUFBeUIsY0FHQXRFLElBT0FrdUMsSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUFpN0IsSUFFQXZyQyxjQUFBLEVBQ0FELFlBQUEsR0FFQTAwQyxhQUNBM0ksSUFBQSxXQUNBLE1BQUFyckMsTUFBQTZQLE1BQUFta0MsYUFFQXQ1QixJQUFBLFNBQUE3ZSxHQUdBLE1BRkFtRSxNQUFBNlAsTUFBQW1rQyxZQUFBbjRDLEVBRUFBLEdBRUEwRCxjQUFBLEVBQ0FELFlBQUEsTUFJQTIwQyxFQUFBN0gsRUFBQUUsUUFDQS8rQixZQUFBLFNBQUEyZ0MsR0FDQWx1QyxLQUFBa3VDLFVBRUFpQyxhQUFBLFdBQ0EsTUFBQTRELElBRUEzRCxrQkFBQSxTQUFBenlDLEdBQ0EsR0FBQTB5QyxHQUFBNXVDLFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLE1BQ0E0ckMsRUFBQTVyQyxVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxNQUVBbXZDLEVBQUE1d0MsS0FBQW13QyxhQUFBeHlDLEVBRUEsV0FBQWl6QyxHQUFBUCxFQUFBaEQsSUFFQXVHLFVBQUEsU0FBQWoyQyxFQUFBNHlDLEdBQ0EsR0FBQTFnQyxHQUFBaTRCLEtBQTJCeUksRUFBQTFnQyxNQUUzQixPQUFBQSxNQUlBcWtDLEdBQUE5SCxFQUFBRSxRQUNBLytCLFlBQUEsV0FDQXZOLEtBQUFtMEMsc0JBQUFuMEMsS0FBQW8wQyxpQkFBQSxnQkFDQXAwQyxLQUFBcTBDLFVBRUF4ekMsUUFBQSxTQUFBcEIsRUFBQTVELEdBT0EsTUFOQW1FLE1BQUFtMEMsc0JBQ0F2ekMsYUFBQUMsUUFBQXBCLEVBQUEweUIsS0FBQUMsVUFBQXYyQixJQUVBbUUsS0FBQXEwQyxNQUFBNTBDLEdBQUE1RCxFQUdBQSxHQUVBcUYsUUFBQSxTQUFBekIsR0FDQSxJQUFBTyxLQUFBbTBDLHNCQVNBLE1BQUFuMEMsTUFBQXEwQyxNQUFBNTBDLElBQUEsSUFSQSxJQUFBNjBDLEdBQUExekMsYUFBQU0sUUFBQXpCLEVBRUEsS0FDQSxNQUFBMHlCLE1BQUFpWCxNQUFBa0wsR0FDTyxNQUFBbnhCLEdBQ1AsY0FNQWl4QixpQkFBQSxTQUFBejJDLEdBQ0EsSUFDQSxHQUFBNDJDLEdBQUFsQyxFQUFBaEgsSUFBQTF0QyxHQUNBaXRCLEVBQUEsa0JBS0EsT0FIQTJwQixHQUFBMXpDLFFBQUErcEIsS0FDQTJwQixFQUFBQyxXQUFBNXBCLElBRUEsRUFDSyxNQUFBekgsR0FDTCxhQUtBc3hCLEdBQUFySSxFQUFBRSxRQUNBLytCLFlBQUEsV0FDQXZOLEtBQUFpRixNQUFBLEdBQUFpdkMsS0FFQVEsYUFBQSxXQUNBLE1BQUE1SixJQUVBMEcsWUFBQSxTQUFBN3pDLEVBQUFSLEdBQ0EsR0FBQXczQyxHQUFBMzBDLElBRUEsV0FBQU8sU0FBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUE1RSxHQUFBODRDLEVBQUExdkMsTUFBQS9ELFFBQUF5ekMsRUFBQUMsV0FBQWozQyxFQUFBUixHQUVBLGVBQUF0QixNQUNBNEUsR0FBQSxHQUFBNlosT0FBQTNjLEVBQUEsSUFBQVIsRUFBQSxtQkFLQXFELEdBQUEzRSxNQUdBeVIsT0FBQSxTQUFBM1AsRUFBQW0yQixHQUNBLEdBQUErZ0IsR0FBQTcwQyxJQUVBLFdBQUFPLFNBQUEsU0FBQUMsR0FDQSxHQUFBckQsR0FBQTAzQyxFQUFBQyxTQUFBaGhCLEVBRUErZ0IsR0FBQTV2QyxNQUFBcEUsUUFBQWcwQyxFQUFBRCxXQUFBajNDLEVBQUFSLEdBQUEyMkIsR0FDQXR6QixFQUFBc3pCLE1BR0E1cUIsT0FBQSxTQUFBdkwsRUFBQVIsRUFBQTIyQixHQUNBLEdBQUFpaEIsR0FBQS8wQyxJQUVBLFdBQUFPLFNBQUEsU0FBQUMsR0FDQXUwQyxFQUFBOXZDLE1BQUFwRSxRQUFBazBDLEVBQUFILFdBQUFqM0MsRUFBQVIsR0FBQTIyQixHQUNBdHpCLEVBQUFzekIsTUFHQThnQixXQUFBLFNBQUFqM0MsRUFBQVIsR0FDQSxNQUFBUSxHQUFBLElBQUFSLEdBRUEyM0MsU0FBQSxTQUFBaGhCLEdBQ0EsR0FBQTl3QixHQUFBckgsT0FBQXFILEtBQUE4d0IsRUFFQSxPQUNBK1csR0FEQSxJQUFBN25DLEVBQUE1RCxRQUFBLFdBQUEyckMsRUFBQWpYLEVBQUE5d0IsRUFBQSxLQUNBOHdCLEVBQUE5d0IsRUFBQSxJQUdBOHdCLE1BaUNBa2hCLEdBQUE1SSxFQUFBRSxPQUFBM3dDLE9BQUFxRCxrQkFLQXVPLFlBQUEsU0FBQTJnQyxHQUNBbHVDLEtBQUFrdUMsU0FFQWx1QyxLQUFBaTFDLGFBQ0F4eEMsU0FBQXVzQyxFQUNBbHRDLFlBQUFrdEMsRUFDQWtGLE1BQUF2QixFQUNBd0IsV0FBQWxCLEdBR0FqMEMsS0FBQW8xQyxVQUNBM3hDLFNBQUFvdEMsRUFDQS90QyxZQUFBK3RDLEVBQ0FxRSxNQUFBVCxHQUNBVSxXQUFBVixLQUtBdkcsT0FBQSxLQWdCQXZDLFNBQUEsU0FBQWh1QyxHQUNBLEdBQUEwM0MsR0FBQXIxQyxLQUVBdXRDLEVBQUEsR0FBQXZ0QyxNQUFBbzFDLFNBQUF6M0MsR0FBQXFDLEtBQUFrdUMsT0FFQSxPQUFBWCxHQUFBZ0UsY0FBQTV6QyxHQUFBSCxLQUFBLFNBQUFzMkIsR0FDQSxNQUFBdWhCLEdBQUFDLFlBQUEzM0MsRUFBQW0yQixFQUFBeVosRUFBQSxNQUErRGdJLFVBQUEsT0FxQi9EN0ssTUFBQSxTQUFBL3NDLEVBQUFSLEdBQ0EsR0FBQXE0QyxHQUFBeDFDLEtBRUF1dEMsRUFBQSxHQUFBdnRDLE1BQUFvMUMsU0FBQXozQyxHQUFBcUMsS0FBQWt1QyxPQUVBLE9BQUFYLEdBQUFpRSxZQUFBN3pDLEVBQUFSLEdBQUFLLEtBQUEsU0FBQXMyQixHQUNBLE1BQUEwaEIsR0FBQUYsWUFBQTMzQyxFQUFBbTJCLEVBQUF5WixFQUFBLE1BQWdFa0ksUUFBQSxPQW9CaEU3SixXQUFBLFNBQUFqdUMsRUFBQTBVLEdBQ0EsR0FBQXFqQyxHQUFBMTFDLEtBRUF1dEMsRUFBQSxHQUFBdnRDLE1BQUFvMUMsU0FBQXozQyxHQUFBcUMsS0FBQWt1QyxPQUVBLE9BQUFYLEdBQUFnRSxjQUFBNXpDLEVBQUEwVSxHQUFBN1UsS0FBQSxTQUFBczJCLEdBQ0EsTUFBQTRoQixHQUFBSixZQUFBMzNDLEVBQUFtMkIsRUFBQXlaLEVBQUEsTUFBZ0VnSSxVQUFBLE9Bc0JoRWpvQyxPQUFBLFNBQUEzUCxHQUNBLEdBQUFnNEMsR0FBQTMxQyxLQUVBc3dDLEVBQUE3dUMsVUFBQXJDLE9BQUEsR0FBQS9DLFNBQUFvRixVQUFBLEdBQUFBLFVBQUEsTUFFQThyQyxFQUFBLEdBQUF2dEMsTUFBQW8xQyxTQUFBejNDLEdBQUFxQyxLQUFBa3VDLFFBQ0FaLEVBQUEsR0FBQXR0QyxNQUFBaTFDLFlBQUF0M0MsR0FBQXFDLEtBQUFrdUMsUUFDQTBDLEVBQUF0RCxFQUFBNkMsYUFBQXh5QyxHQUNBNHlDLEVBQUEsR0FBQUssR0FBQU4sR0FBdUM5QyxXQUFBeHRDLE9BQ3ZDNlAsRUFBQXk5QixFQUFBc0csVUFBQWoyQyxFQUFBNHlDLEVBRUEsT0FBQWhELEdBQUFqZ0MsT0FBQTNQLEVBQUFrUyxHQUFBclMsS0FBQSxTQUFBczJCLEdBQ0EsTUFBQTZoQixHQUFBTCxZQUFBMzNDLEVBQUFtMkIsRUFBQXlaLEVBQUFELEdBQXNFbUksUUFBQSxPQXNCdEV2c0MsT0FBQSxTQUFBdkwsRUFBQWk0QyxHQUNBLEdBQUFDLEdBQUE3MUMsS0FFQXV0QyxFQUFBcUksRUFBQXJJLFFBQ0FELEVBQUFzSSxFQUFBdEksV0FDQXdJLEVBQUF4SSxFQUFBc0csVUFBQWoyQyxFQUFBaTRDLEdBQ0F6NEMsRUFBQXk0QyxFQUFBL2xDLE1BQUEwOUIsRUFBQW1ILGFBQUEvMkMsR0FFQSxPQUFBNHZDLEdBQUFya0MsT0FBQXZMLEVBQUFSLEVBQUEyNEMsR0FBQXQ0QyxLQUFBLFNBQUFzMkIsR0FDQSxNQUFBK2hCLEdBQUFQLFlBQUEzM0MsRUFBQW0yQixFQUFBeVosRUFBQUQsR0FBc0VtSSxRQUFBLE9Bc0J0RUgsWUFBQSxTQUFBMzNDLEVBQUFtMkIsRUFBQXlaLEVBQUF3SSxHQUNBLEdBQUEvckMsR0FBQXZJLFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLE1BRUE2ckMsRUFBQXlJLEdBQUEsR0FBQS8xQyxNQUFBaTFDLFlBQUF0M0MsR0FBQXFDLEtBQUFrdUMsUUFDQS91QixHQUFnQnF1QixXQUFBeHRDLEtBQUF1dEMsVUFBQUQsYUFBQTN2QyxRQUNoQnE0QyxFQUFBLE1BUUEsT0FMQUEsR0FEQWhzQyxFQUFBdXJDLFNBQ0FqSSxFQUFBbUQsb0JBQUE5eUMsRUFBQW0yQixFQUFBM1UsR0FFQW11QixFQUFBOEMsa0JBQUF6eUMsRUFBQW0yQixFQUFBM1UsSUFvQkF6ZSxXQUFBLFdBQ0EsR0FBQXUxQyxHQUFBeDBDLFVBQUFyQyxPQUFBLEdBQUEvQyxTQUFBb0YsVUFBQSxHQUFBQSxVQUFBLE1BRUF5MEMsR0FDQXZELGVBRUE5aUMsSUFLQSxPQUhBaTRCLEdBQUFqNEIsRUFBQXFtQyxHQUNBcE8sRUFBQWo0QixFQUFBb21DLEdBRUFqMkMsS0FBQXNOLE9BQUEsUUFBQXVDLElBcUJBeWpDLFdBQUEsU0FBQTcxQyxHQUNBLE1BQUF1QyxNQUFBa0osT0FBQSxRQUFBekwsSUFrQkF3RCxVQUFBd3FDLEVBQUEsZUFlQWpvQyxpQkFBQWlvQyxFQUFBLGtCQWVBNW9DLG9CQUFBNG9DLEVBQUEscUJBZ0JBcjhCLGFBQUFxOEIsRUFBQSxrQkFnQkFocEMsZ0JBQUFncEMsRUFBQSxxQkEyQkEwSyxtQkFBQTFLLEVBQUEsb0JBa0JBMkssc0JBQUEzSyxFQUFBLHVCQWlCQTRLLGdCQUFBLFdBQ0EsR0FBQUMsR0FBQXQyQyxJQUVBLE9BQUFBLE1BQUEwcUMsTUFBQSxhQUFBMXFDLEtBQUFrdUMsT0FBQTl0QyxPQUFBLGdCQUFBNUMsS0FBQSxTQUFBKzRDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQXZDLFdBRUEsT0FBQXNDLEdBQUFyMUMsVUFBQXUxQyxLQUNLLGlCQUNMLE1BQUFGLEdBQUE1MUMsYUFBQWxELEtBQUEsU0FBQVYsR0FDQSxHQUFBMjVDLElBQ0F6QyxZQUFBbDNDLEVBQUFLLEdBT0EsT0FKQXM1QyxHQUFBM0wsR0FBQXdMLEVBQUFwSSxPQUFBOXRDLE9BQUEsZUFFQWsyQyxFQUFBaHBDLE9BQUEsYUFBQW1wQyxHQUVBMzVDLFNBS0FtNEMsYUFZQTVKLElBQUEsV0FDQSxNQUFBdkQsTUFBd0I5bkMsS0FBQTAyQyxzQkFFeEJoOEIsSUFBQSxTQUFBcEssR0FDQXRRLEtBQUEwMkMsb0JBQUE1TyxLQUE0Q3gzQixJQUU1Qy9RLGNBQUEsRUFDQUQsWUFBQSxHQUVBODFDLFVBQ0EvSixJQUFBLFdBQ0EsTUFBQXZELE1BQXdCOW5DLEtBQUEyMkMsbUJBRXhCajhCLElBQUEsU0FBQXBLLEdBQ0F0USxLQUFBMjJDLGlCQUFBN08sS0FBeUN4M0IsSUFFekMvUSxjQUFBLEVBQ0FELFlBQUEsS0FNQSxJQUFBc3FDLElBQUEsQ0FJQSxHQUNBZ04sSUFBQXQ3QyxFQUFBLElBRUErMkMsR0FBQTMzQixJQUFBLFFBQUFrOEIsSUFDQXZFLEVBQUEzM0IsSUFBQSxXQUFBazhCLEdBQUFDLFVBS0FqTixLQUNBeUksRUFBQTMzQixJQUFBLGdCQUFBNkosR0FDQSxVQUFBbEIsR0FBQWtCLEdBQUEvZCxTQUFBLFdBbUJBLElBQUFzd0MsS0FDQTlCLGNBQ0F0SSxTQUNBUyxVQUNBZ0MsZUEyQkFqdkMsWUFBQSxXQUNBLEdBQUE2MkMsR0FBQXQxQyxVQUFBckMsT0FBQSxHQUFBL0MsU0FBQW9GLFVBQUEsR0FBQUEsVUFBQSxNQUVBeXNDLEVBQUEsR0FBQWx1QyxNQUFBMHNDLE9BQUFxSyxFQUVBLFdBQUEvMkMsTUFBQWcxQyxXQUFBOUcsSUFJQTl5QyxHQUFBQyxRQUFBeTdDLEtuRTI2UjZCOTBDLEtBQUszRyxFQUFTQyxFQUFvQixJQUFLQSxFQUFvQixLQUFLK25CLFNBR3BGLENBRUgsU0FBVWpvQixFQUFRQyxHb0Vsalh4QixHQUFBdVcsR0FBQSxTQUFBNFgsR0FDQSxNQUFBQSxHQUNBampCLFFBQUEsa0JBQUE2a0IsR0FDQSxVQUFBQSxFQUFBOVUsZ0JBRUFBLGNBR0FsYixHQUFBQyxRQUFBdVcsR3BFdWpYUyxDQUNBLENBQ0EsQ0FDQSxDQUVILFNBQVV4VyxFQUFRQyxLQU1sQixTQUFVRCxFQUFRQyxFQUFTQyxHQUVqQyxZQXVCQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHcUVubVh2RixHQUFBb0ssR0FBQXRLLEVBQUEsR3JFaWxYSW1LLEVBQVVsSyxFQUF1QnFLLEdxRWhsWHJDYSxFQUFBbkwsRUFBQSxJckVvbFhJb0wsRUFBYW5MLEVBQXVCa0wsR3FFbmxYeEN1d0MsRUFBQTE3QyxFQUFBLEdBQ0FnQixFQUFBaEIsRUFBQSxJckV3bFhJaUIsRUFBZWhCLEVBQXVCZSxFcUV2bFgxQ2hCLEdBQUEsSUFNQSxJQUFBMjdDLEdBQUEzN0MsRUFBQSxLckV1bFhJNDdDLEVBQVczN0MsRUFBdUIwN0MsR3FFMWxYbENwb0MsR0FEY3ZULEVBQVEsSUFDTEEsRUFBUSxLQUN6QjY3QyxFQUFvQjc3QyxFQUFRLElBQzVCMkosRUFBUTNKLEVBQVEsSUFBa0J5RSxXQUt0Q2tGLEdBQU1teUMsVUFBVSxXQUNkLEdBQUl4dUMsR0FBUTNELEVBQU10SSxVQUNsQm1CLFNBQVFDLElBQUksWUFBYTZLLEtBSTNCM0QsRUFBTXZJLFNBQVNtUyxFQUFldEwsb0JBQzlCMEIsRUFBTXZJLFNBQVN5NkMsRUFBa0IvMEMsdUJBRzlCeEIsYUFBYU0sUUFBUSxjQUN0QjNFLEVBQUFiLFFBQVcyN0MsY0FBYzc1QyxLQUFLLFNBQUNzRCxHQUM3Qm1FLEVBQU12SSxVQUFXaUIsS0FBTSx5QkFBMEJtRCxnQkFHbkR2RSxFQUFBYixRQUFXZ0YsYUFBYWxELEtBQUssU0FBQ3NELEdBQzVCbUUsRUFBTXZJLFVBQVdpQixLQUFNLHlCQUEwQm1ELGdCQU9yRDRGLEVBQUFoTCxRQUFTdzFCLE9BQ1B6ckIsRUFBQS9KLFFBQUFnSyxjQUFBc3hDLEVBQUFNLFVBQVVyeUMsTUFBT0EsR0FBakJpeUMsRUFBQXg3QyxTQUdBa2IsU0FBUzJnQyxlQUFlLFdyRWltWHZCIiwiZmlsZSI6ImJ1bmRsZS5taW4uMDRkMmI5MDM5NmRmNGY3MjZlYTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzEsMl0sW1xuLyogMCAqLyxcbi8qIDEgKi8sXG4vKiAyICovLFxuLyogMyAqLyxcbi8qIDQgKi8sXG4vKiA1ICovLFxuLyogNiAqLyxcbi8qIDcgKi8sXG4vKiA4ICovLFxuLyogOSAqLyxcbi8qIDEwICovLFxuLyogMTEgKi8sXG4vKiAxMiAqLyxcbi8qIDEzICovLFxuLyogMTQgKi8sXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jbG9zZUNhcnQgPSBleHBvcnRzLm9wZW5DYXJ0ID0gZXhwb3J0cy51cGRhdGVDYXJ0SXRlbSA9IGV4cG9ydHMudXBkYXRlQ2FydEl0ZW1zQ291bnQgPSBleHBvcnRzLnVwZGF0ZUNhcnRTdWJ0b3RhbCA9IGV4cG9ydHMuYWRkVG9DYXJ0ID0gZXhwb3J0cy5zdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0gPSB1bmRlZmluZWQ7XG5cbnZhciBfc2hvcGlmeUFQSSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX3Nob3BpZnlBUEkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2hvcGlmeUFQSSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBzdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0gPSBleHBvcnRzLnN0YXJ0QWRkb3JVcGRhdGVDYXJ0SXRlbSA9IGZ1bmN0aW9uIHN0YXJ0QWRkb3JVcGRhdGVDYXJ0SXRlbShwcm9kdWN0VmFyaWFudCwgcXVhbnRpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCwgZ2V0U3RhdGUpIHtcbiAgICB2YXIgY2FydCA9IGdldFN0YXRlKCkuY2FydDtcbiAgICB2YXIgdmFyaWFudElkID0gdm9pZCAwO1xuXG4gICAgLy8gYXNzaWduIHZhcmlhbnQgaWQgYmFzZWQgb24gaXMgcHJvZHVjdCBvciBjYXJ0IGxpbmUgaXRlbVxuICAgIGlmIChwcm9kdWN0VmFyaWFudC52YXJpYW50X2lkKSB7XG4gICAgICB2YXJpYW50SWQgPSBwcm9kdWN0VmFyaWFudC52YXJpYW50X2lkO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXJpYW50SWQgPSBwcm9kdWN0VmFyaWFudC5pZDtcbiAgICB9XG5cbiAgICB2YXIgY2FydExpbmVJdGVtID0gZmluZENhcnRJdGVtQnlWYXJpYW50SWQodmFyaWFudElkKTtcblxuICAgIC8vIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHByb2R1Y3QgdmFyaWFudCBhbHJlYWR5IGV4aXN0cyBpbiBjYXJ0XG4gICAgZnVuY3Rpb24gZmluZENhcnRJdGVtQnlWYXJpYW50SWQodmFyaWFudElkKSB7XG4gICAgICByZXR1cm4gY2FydC5saW5lSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdpdGVtLnZhcmlhbnRfaWQ6ICcsIGl0ZW0udmFyaWFudF9pZCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd2YXJpYW50SWQ6ICcsIHZhcmlhbnRJZCk7XG4gICAgICAgIHJldHVybiBpdGVtLnZhcmlhbnRfaWQgPT09IHZhcmlhbnRJZDtcbiAgICAgIH0pWzBdO1xuICAgIH1cblxuICAgIGlmIChjYXJ0TGluZUl0ZW0pIHtcbiAgICAgIGRpc3BhdGNoKHVwZGF0ZUNhcnRJdGVtKGNhcnRMaW5lSXRlbSwgcGFyc2VJbnQocXVhbnRpdHkpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc3BhdGNoKGFkZFRvQ2FydChwcm9kdWN0VmFyaWFudCwgcXVhbnRpdHkpKTtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgdGhlIGNhcnQgc3VidG90YWxcbiAgICBkaXNwYXRjaCh1cGRhdGVDYXJ0U3VidG90YWwoKSk7XG5cbiAgICAvLyAgdXBkYXRlIHRoZSBjYXJ0IGl0ZW1zIGNvdW50XG4gICAgZGlzcGF0Y2godXBkYXRlQ2FydEl0ZW1zQ291bnQocXVhbnRpdHkpKTtcbiAgfTtcbn07XG5cbi8vIGFkZCBwcm9kdWN0IHRvIGNhcnRcbnZhciBhZGRUb0NhcnQgPSBleHBvcnRzLmFkZFRvQ2FydCA9IGZ1bmN0aW9uIGFkZFRvQ2FydChwcm9kdWN0VmFyaWFudCwgcXVhbnRpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCwgZ2V0U3RhdGUpIHtcbiAgICBfc2hvcGlmeUFQSTIuZGVmYXVsdC5jYXJ0LmNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cyh7IHZhcmlhbnQ6IHByb2R1Y3RWYXJpYW50LCBxdWFudGl0eTogcXVhbnRpdHkgfSkudGhlbihmdW5jdGlvbiAodXBkYXRlZENhcnQpIHtcbiAgICAgIHZhciB1cGRhdGVkQ2FydEl0ZW1zID0gdXBkYXRlZENhcnQubGluZUl0ZW1zO1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnVVBEQVRFX0NBUlRfSVRFTVMnLCB1cGRhdGVkQ2FydEl0ZW1zOiB1cGRhdGVkQ2FydEl0ZW1zIH0pO1xuICAgICAgZGlzcGF0Y2gob3BlbkNhcnQoKSk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9ycykge1xuICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBhZGRUb0NhcnQnLCBlcnJvcnMpO1xuICAgIH0pO1xuICB9O1xufTtcblxuLy8gdXBkYXRlIGNhcnQgc3VidG90YWxcbnZhciB1cGRhdGVDYXJ0U3VidG90YWwgPSBleHBvcnRzLnVwZGF0ZUNhcnRTdWJ0b3RhbCA9IGZ1bmN0aW9uIHVwZGF0ZUNhcnRTdWJ0b3RhbCgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCwgZ2V0U3RhdGUpIHtcbiAgICB2YXIgbmV3U3VidG90YWwgPSBfc2hvcGlmeUFQSTIuZGVmYXVsdC5jYXJ0LnN1YnRvdGFsO1xuICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DQVJUX1NVQlRPVEFMJywgbmV3U3VidG90YWw6IG5ld1N1YnRvdGFsIH0pO1xuICB9O1xufTtcblxuLy8gdXBkYXRlIGNhcnQgaXRlbXMgY291bnRcbnZhciB1cGRhdGVDYXJ0SXRlbXNDb3VudCA9IGV4cG9ydHMudXBkYXRlQ2FydEl0ZW1zQ291bnQgPSBmdW5jdGlvbiB1cGRhdGVDYXJ0SXRlbXNDb3VudChxdWFudGl0eSkge1xuICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoLCBnZXRTdGF0ZSkge1xuICAgIHZhciBjYXJ0ID0gZ2V0U3RhdGUoKS5jYXJ0O1xuICAgIHZhciB1cGRhdGVkQ2FydEl0ZW1zQ291bnQgPSBwYXJzZUludChjYXJ0LmxpbmVJdGVtc0NvdW50KSArIHBhcnNlSW50KHF1YW50aXR5KTtcbiAgICBjb25zb2xlLmxvZygnbmV3IHF1YW50aXR5OiAnLCBxdWFudGl0eSk7XG4gICAgY29uc29sZS5sb2coJ29sZCBxdWFudGl0eTogJywgY2FydC5saW5lSXRlbXNDb3VudCk7XG4gICAgY29uc29sZS5sb2coJ3VwZGF0ZWRDYXJ0SXRlbXNDb3VudDogJywgdXBkYXRlZENhcnRJdGVtc0NvdW50KTtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfQ0FSVF9JVEVNU19DT1VOVCcsIHVwZGF0ZWRDYXJ0SXRlbXNDb3VudDogdXBkYXRlZENhcnRJdGVtc0NvdW50IH0pO1xuXG4gICAgaWYgKHBhcnNlSW50KHVwZGF0ZWRDYXJ0SXRlbXNDb3VudCkgPCAxKSB7XG4gICAgICBkaXNwYXRjaChjbG9zZUNhcnQoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc3BhdGNoKG9wZW5DYXJ0KCkpO1xuICAgIH1cbiAgfTtcbn07XG5cbi8vIHVwZGF0ZSBhIGNhcnQgaXRlbVxudmFyIHVwZGF0ZUNhcnRJdGVtID0gZXhwb3J0cy51cGRhdGVDYXJ0SXRlbSA9IGZ1bmN0aW9uIHVwZGF0ZUNhcnRJdGVtKHNlbGVjdGVkQ2FydEl0ZW0sIHF1YW50aXR5KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gsIGdldFN0YXRlKSB7XG4gICAgdmFyIGNhcnQgPSBnZXRTdGF0ZSgpLmNhcnQ7XG4gICAgdmFyIHVwZGF0ZWRRdWFudGl0eSA9IHNlbGVjdGVkQ2FydEl0ZW0ucXVhbnRpdHkgKyBxdWFudGl0eTtcbiAgICB2YXIgdXBkYXRlZENhcnRJdGVtcyA9IFtdO1xuXG4gICAgLy8gaWYgdGhlIG5ldyBxdWFudGl0eSBpcyBtb3JlIHRoYW4gMCwga2VlcCBpdCBpbiB0aGUgbmV3IGFycmF5XG4gICAgY2FydC5saW5lSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoY2FydEl0ZW0pIHtcbiAgICAgIGlmIChzZWxlY3RlZENhcnRJdGVtLmlkID09PSBjYXJ0SXRlbS5pZCkge1xuICAgICAgICBpZiAodXBkYXRlZFF1YW50aXR5ID4gMCkge1xuICAgICAgICAgIHZhciB1cGRhdGVkQ2FydEl0ZW0gPSBbXTtcblxuICAgICAgICAgIC8vIGNsb25lIHRoZSBsaW5lIGl0ZW1cbiAgICAgICAgICB1cGRhdGVkQ2FydEl0ZW0gPSBjYXJ0SXRlbTtcblxuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgcXVhbnRpdHkgb2YgdGhlIG5ldyBjbG9uZVxuICAgICAgICAgIHVwZGF0ZWRDYXJ0SXRlbS5xdWFudGl0eSA9IHVwZGF0ZWRRdWFudGl0eTtcblxuICAgICAgICAgIC8vIHJldHVybiB0aGUgdXBkYXRlZCBjYXJ0IGl0ZW1cbiAgICAgICAgICB1cGRhdGVkQ2FydEl0ZW1zLnB1c2godXBkYXRlZENhcnRJdGVtKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoZSB1bm1vZGlmaWVkIGl0ZW1cbiAgICAgICAgdXBkYXRlZENhcnRJdGVtcy5wdXNoKGNhcnRJdGVtKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHVwZGF0ZSB0aGUgc2hvcGlmeSBjYXJ0IGFwaSBzaW5nbGV0b25cbiAgICBfc2hvcGlmeUFQSTIuZGVmYXVsdC5jYXJ0LnVwZGF0ZUxpbmVJdGVtKHNlbGVjdGVkQ2FydEl0ZW0uaWQsIHVwZGF0ZWRRdWFudGl0eSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB1cGRhdGUgdGhlIGxvY2FsIGNhcnQgaXRlbXMgKGluIHJlZHV4IHN0b3JlKVxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnVVBEQVRFX0NBUlRfSVRFTVMnLCB1cGRhdGVkQ2FydEl0ZW1zOiB1cGRhdGVkQ2FydEl0ZW1zIH0pO1xuICAgIH0pO1xuICB9O1xufTtcblxuLy8gb3BlbiBjYXJ0XG52YXIgb3BlbkNhcnQgPSBleHBvcnRzLm9wZW5DYXJ0ID0gZnVuY3Rpb24gb3BlbkNhcnQoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ09QRU5fQ0FSVCdcbiAgfTtcbn07XG5cbi8vIGNsb3NlIGNhcnRcbnZhciBjbG9zZUNhcnQgPSBleHBvcnRzLmNsb3NlQ2FydCA9IGZ1bmN0aW9uIGNsb3NlQ2FydCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQ0xPU0VfQ0FSVCdcbiAgfTtcbn07XG5cbi8qKiovIH0pLFxuLyogMTYgKi8sXG4vKiAxNyAqLyxcbi8qIDE4ICovLFxuLyogMTkgKi8sXG4vKiAyMCAqLyxcbi8qIDIxICovLFxuLyogMjIgKi8sXG4vKiAyMyAqLyxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgU2hvcGlmeUJ1eSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM1KTtcbnZhciBzdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpLmNvbmZpZ3VyZSgpO1xuXG52YXIgc2hvcGlmeUFQSSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gc2hvcGlmeUFQSSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgc2hvcGlmeUFQSSk7XG5cbiAgICB0aGlzLmNsaWVudCA9IFNob3BpZnlCdXkuYnVpbGRDbGllbnQoe1xuICAgICAgYXBpS2V5OiAnZTBhYjhjZjliNWEzMGNlZTI2MTZiZjE1MWE1NmM3NjMnLFxuICAgICAgZG9tYWluOiAncm1jLXByZXZpZXcubXlzaG9waWZ5LmNvbScsXG4gICAgICBhcHBJZDogJzYnXG4gICAgfSk7XG4gICAgdGhpcy5jYXJ0ID0ge307XG4gIH1cblxuICBfY3JlYXRlQ2xhc3Moc2hvcGlmeUFQSSwgW3tcbiAgICBrZXk6ICdjcmVhdGVDYXJ0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQ2FydCgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIF90aGlzLmNsaWVudC5jcmVhdGVDYXJ0KCkudGhlbihmdW5jdGlvbiAobmV3Q2FydCkge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYXN0Q2FydElkJywgbmV3Q2FydC5pZCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZWQgbmV3IGNhcnQnLCBuZXdDYXJ0KTtcbiAgICAgICAgICAvLyBzZXQgc2luZ2xldG9uIGNhcnQgb2JqZWN0IHRvIHJlZmVyZW5jZSBzaG9waWZ5IGNhcnRcbiAgICAgICAgICBfdGhpcy5jYXJ0ID0gbmV3Q2FydDtcblxuICAgICAgICAgIC8vIHNldCBsb2NhbENhcnQgKHJlZHV4IGNvbm5lY3RlZCkgdG8ga2VlcCB0cmFjayBvZiBzdGF0ZSBjaGFuZ2VzXG4gICAgICAgICAgdmFyIGxvY2FsQ2FydCA9IHtcbiAgICAgICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgICAgICBsaW5lSXRlbXNDb3VudDogMCxcbiAgICAgICAgICAgIGxpbmVJdGVtczogW10sXG4gICAgICAgICAgICBzdWJ0b3RhbDogMFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmVzb2x2ZShsb2NhbENhcnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Jlc3RvcmVDYXJ0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdG9yZUNhcnQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgX3RoaXMyLmNsaWVudC5mZXRjaENhcnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhc3RDYXJ0SWQnKSkudGhlbihmdW5jdGlvbiAocmVtb3RlQ2FydCkge1xuICAgICAgICAgIC8vIHNldCBzaW5nbGV0b24gY2FydCBvYmplY3QgdG8gcmVmZXJlbmNlIHNob3BpZnkgY2FydFxuICAgICAgICAgIF90aGlzMi5jYXJ0ID0gcmVtb3RlQ2FydDtcblxuICAgICAgICAgIC8vIHNldCBsb2NhbENhcnQgKHJlZHV4IGNvbm5lY3RlZCkgdG8ga2VlcCB0cmFjayBvZiBzdGF0ZSBjaGFuZ2VzXG4gICAgICAgICAgdmFyIGxvY2FsQ2FydCA9IHtcbiAgICAgICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgICAgICBsaW5lSXRlbXNDb3VudDogcmVtb3RlQ2FydC5saW5lSXRlbUNvdW50LFxuICAgICAgICAgICAgbGluZUl0ZW1zOiByZW1vdGVDYXJ0LmxpbmVJdGVtcyxcbiAgICAgICAgICAgIHN1YnRvdGFsOiByZW1vdGVDYXJ0LnN1YnRvdGFsXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXNvbHZlKGxvY2FsQ2FydCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIHNob3BpZnlBUEk7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IG5ldyBzaG9waWZ5QVBJKCk7XG5cbi8qKiovIH0pLFxuLyogMjUgKi8sXG4vKiAyNiAqLyxcbi8qIDI3ICovLFxuLyogMjggKi8sXG4vKiAyOSAqLyxcbi8qIDMwICovLFxuLyogMzEgKi8sXG4vKiAzMiAqLyxcbi8qIDMzICovLFxuLyogMzQgKi8sXG4vKiAzNSAqLyxcbi8qIDM2ICovLFxuLyogMzcgKi8sXG4vKiAzOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0cnVlKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdCEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksXG5cdFx0XHRcdF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG5cblxuLyoqKi8gfSksXG4vKiAzOSAqLyxcbi8qIDQwICovLFxuLyogNDEgKi8sXG4vKiA0MiAqLyxcbi8qIDQzICovLFxuLyogNDQgKi8sXG4vKiA0NSAqLyxcbi8qIDQ2ICovLFxuLyogNDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuYWRkQ29sbGVjdGlvbnMgPSBleHBvcnRzLnN0YXJ0QWRkQ29sbGVjdGlvbnMgPSBleHBvcnRzLnNldEFjdGl2ZUNvbGxlY3Rpb24gPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfc2hvcGlmeUFQSSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX3Nob3BpZnlBUEkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2hvcGlmeUFQSSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBzZXRBY3RpdmVDb2xsZWN0aW9uID0gZXhwb3J0cy5zZXRBY3RpdmVDb2xsZWN0aW9uID0gZnVuY3Rpb24gc2V0QWN0aXZlQ29sbGVjdGlvbihpZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7XG4gICAgcmV0dXJuIF9zaG9waWZ5QVBJMi5kZWZhdWx0LmNsaWVudC5mZXRjaENvbGxlY3Rpb24oaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gZGF0YSB8fCB7fTtcbiAgICAgIHZhciBwYXJzZWRDb2xsZWN0aW9uID0gX2V4dGVuZHMoe30sIGNvbGxlY3Rpb24pO1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0FDVElWRV9DT0xMRUNUSU9OJywgcGFyc2VkQ29sbGVjdGlvbjogcGFyc2VkQ29sbGVjdGlvbiB9KTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbi8vIEFkZCBjb2xsZWN0aW9ucyB0byBzdG9yZVxudmFyIHN0YXJ0QWRkQ29sbGVjdGlvbnMgPSBleHBvcnRzLnN0YXJ0QWRkQ29sbGVjdGlvbnMgPSBmdW5jdGlvbiBzdGFydEFkZENvbGxlY3Rpb25zKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7XG4gICAgcmV0dXJuIF9zaG9waWZ5QVBJMi5kZWZhdWx0LmNsaWVudC5mZXRjaEFsbENvbGxlY3Rpb25zKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgdmFyIGNvbGxlY3Rpb25zID0gZGF0YSB8fCB7fTtcbiAgICAgIHZhciBwYXJzZWRDb2xsZWN0aW9ucyA9IFtdO1xuXG4gICAgICBPYmplY3Qua2V5cyhjb2xsZWN0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAoY29sbGVjdGlvbklkKSB7XG4gICAgICAgIHBhcnNlZENvbGxlY3Rpb25zLnB1c2goX2V4dGVuZHMoe1xuICAgICAgICAgIGtleTogY29sbGVjdGlvbklkXG4gICAgICAgIH0sIGNvbGxlY3Rpb25zW2NvbGxlY3Rpb25JZF0pKTtcbiAgICAgIH0pO1xuXG4gICAgICBkaXNwYXRjaChhZGRDb2xsZWN0aW9ucyhwYXJzZWRDb2xsZWN0aW9ucykpO1xuICAgIH0pO1xuICB9O1xufTtcblxudmFyIGFkZENvbGxlY3Rpb25zID0gZXhwb3J0cy5hZGRDb2xsZWN0aW9ucyA9IGZ1bmN0aW9uIGFkZENvbGxlY3Rpb25zKGNvbGxlY3Rpb25zKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0FERF9DT0xMRUNUSU9OUycsXG4gICAgY29sbGVjdGlvbnM6IGNvbGxlY3Rpb25zXG4gIH07XG59O1xuXG4vKioqLyB9KSxcbi8qIDQ4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnVwZGF0ZUFjdGl2ZVByb2R1Y3RPcHRpb25zID0gZXhwb3J0cy5jbGVhckFjdGl2ZVByb2R1Y3QgPSBleHBvcnRzLnNldEFjdGl2ZVByb2R1Y3QgPSBleHBvcnRzLnByZWxvYWRQcm9kdWN0SW1hZ2VzID0gZXhwb3J0cy5hZGRQcm9kdWN0cyA9IGV4cG9ydHMuc3RhcnRBZGRQcm9kdWN0cyA9IHVuZGVmaW5lZDtcblxudmFyIF9zaG9waWZ5QVBJID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cbnZhciBfc2hvcGlmeUFQSTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaG9waWZ5QVBJKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLy8gQWRkIHByb2R1Y3RzIHRvIHN0b3JlXG52YXIgc3RhcnRBZGRQcm9kdWN0cyA9IGV4cG9ydHMuc3RhcnRBZGRQcm9kdWN0cyA9IGZ1bmN0aW9uIHN0YXJ0QWRkUHJvZHVjdHMoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHtcbiAgICByZXR1cm4gX3Nob3BpZnlBUEkyLmRlZmF1bHQuY2xpZW50LmZldGNoQWxsUHJvZHVjdHMoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB2YXIgcHJvZHVjdHMgPSBkYXRhIHx8IHt9O1xuICAgICAgdmFyIHBhcnNlZFByb2R1Y3RzID0gcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChwcm9kdWN0LCBpbmRleCkge1xuICAgICAgICB2YXIgdXBkYXRlZFByb2R1Y3QgPSBbXTtcbiAgICAgICAgdXBkYXRlZFByb2R1Y3QgPSBwcm9kdWN0O1xuICAgICAgICB1cGRhdGVkUHJvZHVjdC5rZXkgPSBpbmRleDtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRQcm9kdWN0O1xuICAgICAgfSk7XG5cbiAgICAgIGRpc3BhdGNoKGFkZFByb2R1Y3RzKHBhcnNlZFByb2R1Y3RzKSk7XG4gICAgICBkaXNwYXRjaChwcmVsb2FkUHJvZHVjdEltYWdlcygpKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbnZhciBhZGRQcm9kdWN0cyA9IGV4cG9ydHMuYWRkUHJvZHVjdHMgPSBmdW5jdGlvbiBhZGRQcm9kdWN0cyhwcm9kdWN0cykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdBRERfUFJPRFVDVFMnLFxuICAgIHByb2R1Y3RzOiBwcm9kdWN0c1xuICB9O1xufTtcblxudmFyIHByZWxvYWRQcm9kdWN0SW1hZ2VzID0gZXhwb3J0cy5wcmVsb2FkUHJvZHVjdEltYWdlcyA9IGZ1bmN0aW9uIHByZWxvYWRQcm9kdWN0SW1hZ2VzKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoLCBnZXRTdGF0ZSkge1xuICAgIHZhciBwcm9kdWN0cyA9IGdldFN0YXRlKCkucHJvZHVjdHMuYWxsO1xuICAgIHZhciBpbWFnZXMgPSBbXTtcbiAgICBwcm9kdWN0cy5tYXAoZnVuY3Rpb24gKHByb2R1Y3QsIGluZGV4KSB7XG4gICAgICBpbWFnZXNbaW5kZXhdID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZXNbaW5kZXhdLnNyYyA9IHByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LmltYWdlVmFyaWFudHNbNF0uc3JjO1xuICAgICAgcmV0dXJuIGltYWdlc1tpbmRleF07XG4gICAgfSk7XG4gIH07XG59O1xuXG4vLyBzZXQgYWN0aXZlIHByb2R1Y3RcbnZhciBzZXRBY3RpdmVQcm9kdWN0ID0gZXhwb3J0cy5zZXRBY3RpdmVQcm9kdWN0ID0gZnVuY3Rpb24gc2V0QWN0aXZlUHJvZHVjdChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ1NFVF9BQ1RJVkVfUFJPRFVDVCcsXG4gICAgb3B0aW9uczogb3B0aW9uc1xuICB9O1xufTtcblxuLy8gY2xlYXIgYWN0aXZlIHByb2R1Y3QgZnJvbSByZWR1eFxudmFyIGNsZWFyQWN0aXZlUHJvZHVjdCA9IGV4cG9ydHMuY2xlYXJBY3RpdmVQcm9kdWN0ID0gZnVuY3Rpb24gY2xlYXJBY3RpdmVQcm9kdWN0KCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdDTEVBUl9BQ1RJVkVfUFJPRFVDVCdcbiAgfTtcbn07XG5cbi8vIHVwZGF0ZSBhY3RpdmUgcHJvZHVjdCBvcHRpb25cbnZhciB1cGRhdGVBY3RpdmVQcm9kdWN0T3B0aW9ucyA9IGV4cG9ydHMudXBkYXRlQWN0aXZlUHJvZHVjdE9wdGlvbnMgPSBmdW5jdGlvbiB1cGRhdGVBY3RpdmVQcm9kdWN0T3B0aW9ucyhvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ1VQREFURV9BQ1RJVkVfUFJPRFVDVF9PUFRJT05TJyxcbiAgICBvcHRpb25zOiBvcHRpb25zXG4gIH07XG59O1xuXG4vKioqLyB9KSxcbi8qIDQ5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmNvbmZpZ3VyZSA9IHVuZGVmaW5lZDtcblxudmFyIF9yZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ4KTtcblxudmFyIHJlZHV4ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3JlZHV4KTtcblxudmFyIF9yZWR1eFRodW5rID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXG52YXIgX3JlZHV4VGh1bmsyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVkdXhUaHVuayk7XG5cbnZhciBfcmVkdWNlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbnZhciBjb25maWd1cmUgPSBleHBvcnRzLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIGNvbmZpZ3VyZSgpIHtcbiAgdmFyIGluaXRpYWxTdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgdmFyIHJlZHVjZXIgPSByZWR1eC5jb21iaW5lUmVkdWNlcnMoe1xuICAgIHByb2R1Y3RzOiBfcmVkdWNlcnMucHJvZHVjdHNSZWR1Y2VyLFxuICAgIGNvbGxlY3Rpb25zOiBfcmVkdWNlcnMuY29sbGVjdGlvbnNSZWR1Y2VyLFxuICAgIGNhcnQ6IF9yZWR1Y2Vycy5jYXJ0UmVkdWNlcixcbiAgICBuYXY6IF9yZWR1Y2Vycy5uYXZSZWR1Y2VyXG4gIH0pO1xuXG4gIHZhciBzdG9yZSA9IHJlZHV4LmNyZWF0ZVN0b3JlKHJlZHVjZXIsIGluaXRpYWxTdGF0ZSwgcmVkdXguY29tcG9zZShyZWR1eC5hcHBseU1pZGRsZXdhcmUoX3JlZHV4VGh1bmsyLmRlZmF1bHQpLCB3aW5kb3cuZGV2VG9vbHNFeHRlbnNpb24gPyB3aW5kb3cuZGV2VG9vbHNFeHRlbnNpb24oKSA6IGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGY7XG4gIH0pKTtcblxuICByZXR1cm4gc3RvcmU7XG59O1xuXG4vKioqLyB9KSxcbi8qIDUwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBMb2FkZXI7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gTG9hZGVyKCkge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJkaXZcIixcbiAgICB7IGNsYXNzTmFtZTogXCJsb2FkZXJcIiB9LFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaVwiLCB7IGNsYXNzTmFtZTogXCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIGZhLTN4IGZhLWZ3XCIgfSlcbiAgKTtcbn1cblxuLyoqKi8gfSksXG4vKiA1MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgRm9ybWF0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBGb3JtYXQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvcm1hdCk7XG4gIH1cblxuICAvLyBmb3JtYXQgYW1vdW50IGFzIGN1cnJlbmN5XG5cblxuICBfY3JlYXRlQ2xhc3MoRm9ybWF0LCBbe1xuICAgIGtleTogJ2FzTW9uZXknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhc01vbmV5KGFtb3VudCwgY3VycmVuY3ksIHRob3VzYW5kU2VwYXJhdG9yLCBkZWNpbWFsU2VwYXJhdG9yLCBsb2NhbGVEZWNpbWFsU2VwYXJhdG9yKSB7XG4gICAgICBjdXJyZW5jeSA9IGN1cnJlbmN5IHx8ICckJztcbiAgICAgIHRob3VzYW5kU2VwYXJhdG9yID0gdGhvdXNhbmRTZXBhcmF0b3IgfHwgJywnO1xuICAgICAgZGVjaW1hbFNlcGFyYXRvciA9IGRlY2ltYWxTZXBhcmF0b3IgfHwgJy4nO1xuICAgICAgbG9jYWxlRGVjaW1hbFNlcGFyYXRvciA9IGxvY2FsZURlY2ltYWxTZXBhcmF0b3IgfHwgJy4nO1xuICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFxcXFxkKSg/PShcXFxcZHszfSkrXFxcXC4pJywgJ2cnKTtcblxuICAgICAgcmV0dXJuIGN1cnJlbmN5ICsgcGFyc2VGbG9hdChhbW91bnQsIDEwKS50b0ZpeGVkKDIpLnJlcGxhY2UobG9jYWxlRGVjaW1hbFNlcGFyYXRvciwgZGVjaW1hbFNlcGFyYXRvcikucmVwbGFjZShyZWdleCwgJyQxJyArIHRob3VzYW5kU2VwYXJhdG9yKS50b1N0cmluZygpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBGb3JtYXQ7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IG5ldyBGb3JtYXQoKTtcblxuLyoqKi8gfSksXG4vKiA1MiAqLyxcbi8qIDUzICovLFxuLyogNTQgKi8sXG4vKiA1NSAqLyxcbi8qIDU2ICovLFxuLyogNTcgKi8sXG4vKiA1OCAqLyxcbi8qIDU5ICovLFxuLyogNjAgKi8sXG4vKiA2MSAqLyxcbi8qIDYyICovLFxuLyogNjMgKi8sXG4vKiA2NCAqLyxcbi8qIDY1ICovLFxuLyogNjYgKi8sXG4vKiA2NyAqLyxcbi8qIDY4ICovLFxuLyogNjkgKi8sXG4vKiA3MCAqLyxcbi8qIDcxICovLFxuLyogNzIgKi8sXG4vKiA3MyAqLyxcbi8qIDc0ICovLFxuLyogNzUgKi8sXG4vKiA3NiAqLyxcbi8qIDc3ICovLFxuLyogNzggKi8sXG4vKiA3OSAqLyxcbi8qIDgwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF90cmFja0hlbHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQwKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgaGVscGVycyA9IHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShwcm9wcykge1xuICAgIHZhciBzbGlja0xpc3QgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5saXN0KTtcblxuICAgIHZhciBzbGlkZUNvdW50ID0gX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KHByb3BzLmNoaWxkcmVuKTtcbiAgICB2YXIgbGlzdFdpZHRoID0gdGhpcy5nZXRXaWR0aChzbGlja0xpc3QpO1xuICAgIHZhciB0cmFja1dpZHRoID0gdGhpcy5nZXRXaWR0aChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy50cmFjaykpO1xuICAgIHZhciBzbGlkZVdpZHRoO1xuXG4gICAgaWYgKCFwcm9wcy52ZXJ0aWNhbCkge1xuICAgICAgdmFyIGNlbnRlclBhZGRpbmdBZGogPSBwcm9wcy5jZW50ZXJNb2RlICYmIHBhcnNlSW50KHByb3BzLmNlbnRlclBhZGRpbmcpICogMjtcbiAgICAgIHNsaWRlV2lkdGggPSAodGhpcy5nZXRXaWR0aChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykpIC0gY2VudGVyUGFkZGluZ0FkaikgLyBwcm9wcy5zbGlkZXNUb1Nob3c7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlV2lkdGggPSB0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKSk7XG4gICAgfVxuXG4gICAgdmFyIHNsaWRlSGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoc2xpY2tMaXN0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWluZGV4PVwiMFwiXScpKTtcbiAgICB2YXIgbGlzdEhlaWdodCA9IHNsaWRlSGVpZ2h0ICogcHJvcHMuc2xpZGVzVG9TaG93O1xuXG4gICAgdmFyIGN1cnJlbnRTbGlkZSA9IHByb3BzLnJ0bCA/IHNsaWRlQ291bnQgLSAxIC0gcHJvcHMuaW5pdGlhbFNsaWRlIDogcHJvcHMuaW5pdGlhbFNsaWRlO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzbGlkZUNvdW50OiBzbGlkZUNvdW50LFxuICAgICAgc2xpZGVXaWR0aDogc2xpZGVXaWR0aCxcbiAgICAgIGxpc3RXaWR0aDogbGlzdFdpZHRoLFxuICAgICAgdHJhY2tXaWR0aDogdHJhY2tXaWR0aCxcbiAgICAgIGN1cnJlbnRTbGlkZTogY3VycmVudFNsaWRlLFxuICAgICAgc2xpZGVIZWlnaHQ6IHNsaWRlSGVpZ2h0LFxuICAgICAgbGlzdEhlaWdodDogbGlzdEhlaWdodFxuICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgdmFyIHRhcmdldExlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgICAgc2xpZGVJbmRleDogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgICB9LCBwcm9wcywgdGhpcy5zdGF0ZSkpO1xuICAgICAgLy8gZ2V0Q1NTIGZ1bmN0aW9uIG5lZWRzIHByZXZpb3VzbHkgc2V0IHN0YXRlXG4gICAgICB2YXIgdHJhY2tTdHlsZSA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IHRhcmdldExlZnQgfSwgcHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRyYWNrU3R5bGU6IHRyYWNrU3R5bGUgfSk7XG5cbiAgICAgIHRoaXMuYXV0b1BsYXkoKTsgLy8gb25jZSB3ZSdyZSBzZXQgdXAsIHRyaWdnZXIgdGhlIGluaXRpYWwgYXV0b3BsYXkuXG4gICAgfSk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHByb3BzKSB7XG4gICAgdmFyIHNsaWNrTGlzdCA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLmxpc3QpO1xuICAgIC8vIFRoaXMgbWV0aG9kIGhhcyBtb3N0bHkgc2FtZSBjb2RlIGFzIGluaXRpYWxpemUgbWV0aG9kLlxuICAgIC8vIFJlZmFjdG9yIGl0XG4gICAgdmFyIHNsaWRlQ291bnQgPSBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uY291bnQocHJvcHMuY2hpbGRyZW4pO1xuICAgIHZhciBsaXN0V2lkdGggPSB0aGlzLmdldFdpZHRoKHNsaWNrTGlzdCk7XG4gICAgdmFyIHRyYWNrV2lkdGggPSB0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLnRyYWNrKSk7XG4gICAgdmFyIHNsaWRlV2lkdGg7XG5cbiAgICBpZiAoIXByb3BzLnZlcnRpY2FsKSB7XG4gICAgICB2YXIgY2VudGVyUGFkZGluZ0FkaiA9IHByb3BzLmNlbnRlck1vZGUgJiYgcGFyc2VJbnQocHJvcHMuY2VudGVyUGFkZGluZykgKiAyO1xuICAgICAgc2xpZGVXaWR0aCA9ICh0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKSkgLSBjZW50ZXJQYWRkaW5nQWRqKSAvIHByb3BzLnNsaWRlc1RvU2hvdztcbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpKTtcbiAgICB9XG5cbiAgICB2YXIgc2xpZGVIZWlnaHQgPSB0aGlzLmdldEhlaWdodChzbGlja0xpc3QucXVlcnlTZWxlY3RvcignW2RhdGEtaW5kZXg9XCIwXCJdJykpO1xuICAgIHZhciBsaXN0SGVpZ2h0ID0gc2xpZGVIZWlnaHQgKiBwcm9wcy5zbGlkZXNUb1Nob3c7XG5cbiAgICAvLyBwYXVzZSBzbGlkZXIgaWYgYXV0b3BsYXkgaXMgc2V0IHRvIGZhbHNlXG4gICAgaWYgKHByb3BzLmF1dG9wbGF5KSB7XG4gICAgICB0aGlzLnBhdXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXV0b1BsYXkoKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNsaWRlQ291bnQ6IHNsaWRlQ291bnQsXG4gICAgICBzbGlkZVdpZHRoOiBzbGlkZVdpZHRoLFxuICAgICAgbGlzdFdpZHRoOiBsaXN0V2lkdGgsXG4gICAgICB0cmFja1dpZHRoOiB0cmFja1dpZHRoLFxuICAgICAgc2xpZGVIZWlnaHQ6IHNsaWRlSGVpZ2h0LFxuICAgICAgbGlzdEhlaWdodDogbGlzdEhlaWdodFxuICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgdmFyIHRhcmdldExlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgICAgc2xpZGVJbmRleDogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgICB9LCBwcm9wcywgdGhpcy5zdGF0ZSkpO1xuICAgICAgLy8gZ2V0Q1NTIGZ1bmN0aW9uIG5lZWRzIHByZXZpb3VzbHkgc2V0IHN0YXRlXG4gICAgICB2YXIgdHJhY2tTdHlsZSA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IHRhcmdldExlZnQgfSwgcHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRyYWNrU3R5bGU6IHRyYWNrU3R5bGUgfSk7XG4gICAgfSk7XG4gIH0sXG4gIGdldFdpZHRoOiBmdW5jdGlvbiBnZXRXaWR0aChlbGVtKSB7XG4gICAgcmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggfHwgZWxlbS5vZmZzZXRXaWR0aCB8fCAwO1xuICB9LFxuICBnZXRIZWlnaHQ6IGZ1bmN0aW9uIGdldEhlaWdodChlbGVtKSB7XG4gICAgcmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IHx8IGVsZW0ub2Zmc2V0SGVpZ2h0IHx8IDA7XG4gIH0sXG5cbiAgYWRhcHRIZWlnaHQ6IGZ1bmN0aW9uIGFkYXB0SGVpZ2h0KCkge1xuICAgIGlmICh0aGlzLnByb3BzLmFkYXB0aXZlSGVpZ2h0KSB7XG4gICAgICB2YXIgc2VsZWN0b3IgPSAnW2RhdGEtaW5kZXg9XCInICsgdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgKyAnXCJdJztcbiAgICAgIGlmICh0aGlzLmxpc3QpIHtcbiAgICAgICAgdmFyIHNsaWNrTGlzdCA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLmxpc3QpO1xuICAgICAgICBzbGlja0xpc3Quc3R5bGUuaGVpZ2h0ID0gc2xpY2tMaXN0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBjYW5Hb05leHQ6IGZ1bmN0aW9uIGNhbkdvTmV4dChvcHRzKSB7XG4gICAgdmFyIGNhbkdvID0gdHJ1ZTtcbiAgICBpZiAoIW9wdHMuaW5maW5pdGUpIHtcbiAgICAgIGlmIChvcHRzLmNlbnRlck1vZGUpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgY3VycmVudCBzbGlkZSBpcyBsYXN0IHNsaWRlXG4gICAgICAgIGlmIChvcHRzLmN1cnJlbnRTbGlkZSA+PSBvcHRzLnNsaWRlQ291bnQgLSAxKSB7XG4gICAgICAgICAgY2FuR28gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgYWxsIHNsaWRlcyBhcmUgc2hvd24gaW4gc2xpZGVyXG4gICAgICAgIGlmIChvcHRzLnNsaWRlQ291bnQgPD0gb3B0cy5zbGlkZXNUb1Nob3cgfHwgb3B0cy5jdXJyZW50U2xpZGUgPj0gb3B0cy5zbGlkZUNvdW50IC0gb3B0cy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgICBjYW5HbyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYW5HbztcbiAgfSxcbiAgc2xpZGVIYW5kbGVyOiBmdW5jdGlvbiBzbGlkZUhhbmRsZXIoaW5kZXgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy8gRnVuY3Rpb25hbGl0eSBvZiBhbmltYXRlU2xpZGUgYW5kIHBvc3RTbGlkZSBpcyBtZXJnZWQgaW50byB0aGlzIGZ1bmN0aW9uXG4gICAgLy8gY29uc29sZS5sb2coJ3NsaWRlSGFuZGxlcicsIGluZGV4KTtcbiAgICB2YXIgdGFyZ2V0U2xpZGUsIGN1cnJlbnRTbGlkZTtcbiAgICB2YXIgdGFyZ2V0TGVmdCwgY3VycmVudExlZnQ7XG4gICAgdmFyIGNhbGxiYWNrO1xuXG4gICAgaWYgKHRoaXMucHJvcHMud2FpdEZvckFuaW1hdGUgJiYgdGhpcy5zdGF0ZS5hbmltYXRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5mYWRlKSB7XG4gICAgICBjdXJyZW50U2xpZGUgPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZTtcblxuICAgICAgLy8gRG9uJ3QgY2hhbmdlIHNsaWRlIGlmIGl0J3Mgbm90IGluZml0ZSBhbmQgY3VycmVudCBzbGlkZSBpcyB0aGUgZmlyc3Qgb3IgbGFzdCBzbGlkZS5cbiAgICAgIGlmICh0aGlzLnByb3BzLmluZmluaXRlID09PSBmYWxzZSAmJiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuc3RhdGUuc2xpZGVDb3VudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyAgU2hpZnRpbmcgdGFyZ2V0U2xpZGUgYmFjayBpbnRvIHRoZSByYW5nZVxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICB0YXJnZXRTbGlkZSA9IGluZGV4ICsgdGhpcy5zdGF0ZS5zbGlkZUNvdW50O1xuICAgICAgfSBlbHNlIGlmIChpbmRleCA+PSB0aGlzLnN0YXRlLnNsaWRlQ291bnQpIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBpbmRleCAtIHRoaXMuc3RhdGUuc2xpZGVDb3VudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFNsaWRlID0gaW5kZXg7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmxhenlMb2FkICYmIHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QuaW5kZXhPZih0YXJnZXRTbGlkZSkgPCAwKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGxhenlMb2FkZWRMaXN0OiB0aGlzLnN0YXRlLmxhenlMb2FkZWRMaXN0LmNvbmNhdCh0YXJnZXRTbGlkZSlcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBhbmltYXRpbmc6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMuYWZ0ZXJDaGFuZ2UpIHtcbiAgICAgICAgICBfdGhpcy5wcm9wcy5hZnRlckNoYW5nZSh0YXJnZXRTbGlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIF90aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFuaW1hdGluZzogdHJ1ZSxcbiAgICAgICAgY3VycmVudFNsaWRlOiB0YXJnZXRTbGlkZVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrID0gc2V0VGltZW91dChjYWxsYmFjaywgdGhpcy5wcm9wcy5zcGVlZCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMuYmVmb3JlQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYmVmb3JlQ2hhbmdlKHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLCB0YXJnZXRTbGlkZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYXV0b1BsYXkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0YXJnZXRTbGlkZSA9IGluZGV4O1xuICAgIGlmICh0YXJnZXRTbGlkZSA8IDApIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnNsaWRlQ291bnQgJSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudCAtIHRoaXMuc3RhdGUuc2xpZGVDb3VudCAlIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSB0aGlzLnN0YXRlLnNsaWRlQ291bnQgKyB0YXJnZXRTbGlkZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRhcmdldFNsaWRlID49IHRoaXMuc3RhdGUuc2xpZGVDb3VudCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaW5maW5pdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudCAtIHRoaXMucHJvcHMuc2xpZGVzVG9TaG93O1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnNsaWRlQ291bnQgJSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSB0YXJnZXRTbGlkZSAtIHRoaXMuc3RhdGUuc2xpZGVDb3VudDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFNsaWRlID0gdGFyZ2V0U2xpZGU7XG4gICAgfVxuXG4gICAgdGFyZ2V0TGVmdCA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tMZWZ0KSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgc2xpZGVJbmRleDogdGFyZ2V0U2xpZGUsXG4gICAgICB0cmFja1JlZjogdGhpcy50cmFja1xuICAgIH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgIGN1cnJlbnRMZWZ0ID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0xlZnQpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7XG4gICAgICBzbGlkZUluZGV4OiBjdXJyZW50U2xpZGUsXG4gICAgICB0cmFja1JlZjogdGhpcy50cmFja1xuICAgIH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgIGlmICh0aGlzLnByb3BzLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgdGFyZ2V0TGVmdCA9IGN1cnJlbnRMZWZ0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmJlZm9yZUNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5iZWZvcmVDaGFuZ2UodGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsIGN1cnJlbnRTbGlkZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMubGF6eUxvYWQpIHtcbiAgICAgIHZhciBsb2FkZWQgPSB0cnVlO1xuICAgICAgdmFyIHNsaWRlc1RvTG9hZCA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IHRhcmdldFNsaWRlOyBpIDwgdGFyZ2V0U2xpZGUgKyB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdzsgaSsrKSB7XG4gICAgICAgIGxvYWRlZCA9IGxvYWRlZCAmJiB0aGlzLnN0YXRlLmxhenlMb2FkZWRMaXN0LmluZGV4T2YoaSkgPj0gMDtcbiAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICBzbGlkZXNUb0xvYWQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgbGF6eUxvYWRlZExpc3Q6IHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QuY29uY2F0KHNsaWRlc1RvTG9hZClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2xpZGUgVHJhbnNpdGlvbiBoYXBwZW5zIGhlcmUuXG4gICAgLy8gYW5pbWF0ZWQgdHJhbnNpdGlvbiBoYXBwZW5zIHRvIHRhcmdldCBTbGlkZSBhbmRcbiAgICAvLyBub24gLSBhbmltYXRlZCB0cmFuc2l0aW9uIGhhcHBlbnMgdG8gY3VycmVudCBTbGlkZVxuICAgIC8vIElmIENTUyB0cmFuc2l0aW9ucyBhcmUgZmFsc2UsIGRpcmVjdGx5IGdvIHRoZSBjdXJyZW50IHNsaWRlLlxuXG4gICAgaWYgKHRoaXMucHJvcHMudXNlQ1NTID09PSBmYWxzZSkge1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY3VycmVudFNsaWRlOiBjdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrU3R5bGU6ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IGN1cnJlbnRMZWZ0IH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hZnRlckNoYW5nZSkge1xuICAgICAgICAgIHRoaXMucHJvcHMuYWZ0ZXJDaGFuZ2UoY3VycmVudFNsaWRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcblxuICAgICAgdmFyIG5leHRTdGF0ZUNoYW5nZXMgPSB7XG4gICAgICAgIGFuaW1hdGluZzogZmFsc2UsXG4gICAgICAgIGN1cnJlbnRTbGlkZTogY3VycmVudFNsaWRlLFxuICAgICAgICB0cmFja1N0eWxlOiAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiBjdXJyZW50TGVmdCB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSksXG4gICAgICAgIHN3aXBlTGVmdDogbnVsbFxuICAgICAgfTtcblxuICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUobmV4dFN0YXRlQ2hhbmdlcyk7XG4gICAgICAgIGlmIChfdGhpcy5wcm9wcy5hZnRlckNoYW5nZSkge1xuICAgICAgICAgIF90aGlzLnByb3BzLmFmdGVyQ2hhbmdlKGN1cnJlbnRTbGlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIF90aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFuaW1hdGluZzogdHJ1ZSxcbiAgICAgICAgY3VycmVudFNsaWRlOiBjdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrU3R5bGU6ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tBbmltYXRlQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiB0YXJnZXRMZWZ0IH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrID0gc2V0VGltZW91dChjYWxsYmFjaywgdGhpcy5wcm9wcy5zcGVlZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmF1dG9QbGF5KCk7XG4gIH0sXG4gIHN3aXBlRGlyZWN0aW9uOiBmdW5jdGlvbiBzd2lwZURpcmVjdGlvbih0b3VjaE9iamVjdCkge1xuICAgIHZhciB4RGlzdCwgeURpc3QsIHIsIHN3aXBlQW5nbGU7XG5cbiAgICB4RGlzdCA9IHRvdWNoT2JqZWN0LnN0YXJ0WCAtIHRvdWNoT2JqZWN0LmN1clg7XG4gICAgeURpc3QgPSB0b3VjaE9iamVjdC5zdGFydFkgLSB0b3VjaE9iamVjdC5jdXJZO1xuICAgIHIgPSBNYXRoLmF0YW4yKHlEaXN0LCB4RGlzdCk7XG5cbiAgICBzd2lwZUFuZ2xlID0gTWF0aC5yb3VuZChyICogMTgwIC8gTWF0aC5QSSk7XG4gICAgaWYgKHN3aXBlQW5nbGUgPCAwKSB7XG4gICAgICBzd2lwZUFuZ2xlID0gMzYwIC0gTWF0aC5hYnMoc3dpcGVBbmdsZSk7XG4gICAgfVxuICAgIGlmIChzd2lwZUFuZ2xlIDw9IDQ1ICYmIHN3aXBlQW5nbGUgPj0gMCB8fCBzd2lwZUFuZ2xlIDw9IDM2MCAmJiBzd2lwZUFuZ2xlID49IDMxNSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMucnRsID09PSBmYWxzZSA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gICAgfVxuICAgIGlmIChzd2lwZUFuZ2xlID49IDEzNSAmJiBzd2lwZUFuZ2xlIDw9IDIyNSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMucnRsID09PSBmYWxzZSA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsU3dpcGluZyA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHN3aXBlQW5nbGUgPj0gMzUgJiYgc3dpcGVBbmdsZSA8PSAxMzUpIHtcbiAgICAgICAgcmV0dXJuICdkb3duJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAndXAnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAndmVydGljYWwnO1xuICB9LFxuICBwbGF5OiBmdW5jdGlvbiBwbGF5KCkge1xuICAgIHZhciBuZXh0SW5kZXg7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUubW91bnRlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLnJ0bCkge1xuICAgICAgbmV4dEluZGV4ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgLSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5jYW5Hb05leHQoX2V4dGVuZHMoe30sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKSkge1xuICAgICAgICBuZXh0SW5kZXggPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSArIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zbGlkZUhhbmRsZXIobmV4dEluZGV4KTtcbiAgfSxcbiAgYXV0b1BsYXk6IGZ1bmN0aW9uIGF1dG9QbGF5KCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmF1dG9QbGF5VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YXRlLmF1dG9QbGF5VGltZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvcGxheSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGF1dG9QbGF5VGltZXI6IHNldFRpbWVvdXQodGhpcy5wbGF5LCB0aGlzLnByb3BzLmF1dG9wbGF5U3BlZWQpXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5hdXRvUGxheVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zdGF0ZS5hdXRvUGxheVRpbWVyKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhdXRvUGxheVRpbWVyOiBudWxsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGhlbHBlcnM7XG5cbi8qKiovIH0pLFxuLyogODEgKi8sXG4vKiA4MiAqLyxcbi8qIDgzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLFxuICAgIGNvbm5lY3QgPSBfcmVxdWlyZS5jb25uZWN0O1xuXG52YXIgYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXG52YXIgQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDb2xsZWN0aW9uLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDb2xsZWN0aW9uKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xsZWN0aW9uKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29sbGVjdGlvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbGxlY3Rpb24pKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDb2xsZWN0aW9uLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIHZhciBkaXNwYXRjaCA9IHRoaXMucHJvcHMuZGlzcGF0Y2g7XG5cbiAgICAgIGRpc3BhdGNoKGFjdGlvbnMuc2V0QWN0aXZlQ29sbGVjdGlvbih0aGlzLnByb3BzLnBhcmFtcy5jb2xsZWN0aW9uSWQpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHZvaWQgMDtcbiAgICAgIGNvbGxlY3Rpb24gPSB0aGlzLnByb3BzLmNvbGxlY3Rpb247XG4gICAgICBpZiAoY29sbGVjdGlvbikge1xuICAgICAgICB2YXIgZGlzcGF0Y2ggPSB0aGlzLnByb3BzLmRpc3BhdGNoO1xuICAgICAgICB2YXIgX2NvbGxlY3Rpb24gPSBjb2xsZWN0aW9uLFxuICAgICAgICAgICAgY29sbGVjdGlvbl9pZCA9IF9jb2xsZWN0aW9uLmNvbGxlY3Rpb25faWQsXG4gICAgICAgICAgICB0aXRsZSA9IF9jb2xsZWN0aW9uLnRpdGxlO1xuXG5cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sbGVjdGlvbi1pbmRleCcgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RleHQtY2VudGVyJyB9LFxuICAgICAgICAgICAgdGl0bGVcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICAnTG9hZGluZyBjb2xsZWN0aW9uLi4uJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDb2xsZWN0aW9uO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBjb2xsZWN0aW9uOiBzdGF0ZS5jb2xsZWN0aW9ucy5hY3RpdmVcbiAgfTtcbn0pKENvbGxlY3Rpb24pO1xuXG4vKioqLyB9KSxcbi8qIDg0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX2Zvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXG52YXIgX2Zvcm1hdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mb3JtYXQpO1xuXG52YXIgX3JlYWN0TW9kYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4Myk7XG5cbnZhciBfcmVhY3RNb2RhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdE1vZGFsKTtcblxudmFyIF9zaG9waWZ5QVBJID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cbnZhciBfc2hvcGlmeUFQSTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaG9waWZ5QVBJKTtcblxudmFyIF9Mb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblxudmFyIF9Mb2FkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9hZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLFxuICAgIGNvbm5lY3QgPSBfcmVxdWlyZS5jb25uZWN0O1xuXG52YXIgcHJvZHVjdEFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcbnZhciBjYXJ0QWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgUHJvZHVjdCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhQcm9kdWN0LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQcm9kdWN0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm9kdWN0KTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm9kdWN0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvZHVjdCkpLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBtb2RhbElzT3BlbjogZmFsc2VcbiAgICB9O1xuXG4gICAgX3RoaXMub3Blbk1vZGFsID0gX3RoaXMub3Blbk1vZGFsLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmNsb3NlTW9kYWwgPSBfdGhpcy5jbG9zZU1vZGFsLmJpbmQoX3RoaXMpO1xuXG4gICAgdmFyIGRpc3BhdGNoID0gdm9pZCAwO1xuICAgIHZhciBwcm9kdWN0ID0gdm9pZCAwO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm9kdWN0LCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB0aGlzLmRpc3BhdGNoID0gdGhpcy5wcm9wcy5kaXNwYXRjaDtcblxuICAgICAgX3Nob3BpZnlBUEkyLmRlZmF1bHQuY2xpZW50LmZldGNoUHJvZHVjdCh0aGlzLnByb3BzLnBhcmFtcy5wcm9kdWN0SWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHByb2R1Y3QgPSBkYXRhIHx8IHt9O1xuICAgICAgICBfdGhpczIucHJvZHVjdCA9IHByb2R1Y3Q7XG4gICAgICAgIF90aGlzMi5kaXNwYXRjaChwcm9kdWN0QWN0aW9ucy5zZXRBY3RpdmVQcm9kdWN0KHByb2R1Y3Qub3B0aW9ucykpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2gocHJvZHVjdEFjdGlvbnMuY2xlYXJBY3RpdmVQcm9kdWN0KCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2Nsb3NlTW9kYWwnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1vZGFsSXNPcGVuOiBmYWxzZSB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvcGVuTW9kYWwnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuTW9kYWwoKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbW9kYWxJc09wZW46IHRydWUgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaGFuZGxlT3B0aW9uQ2hhbmdlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlT3B0aW9uQ2hhbmdlKG9wdGlvbk5hbWUsIHZhbHVlKSB7XG4gICAgICAvLyB1cGRhdGUgcHJvZHVjdCBvcHRpb25zIGluIHRoZSBTaG9waWZ5IHNpbmdsZXRvblxuICAgICAgdGhpcy5wcm9kdWN0Lm9wdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbi5uYW1lID09PSBvcHRpb25OYW1lO1xuICAgICAgfSlbMF0uc2VsZWN0ZWQgPSB2YWx1ZTtcblxuICAgICAgLy8gdXBkYXRlIHByb2R1Y3Qgb3B0aW9uc1xuICAgICAgdGhpcy5kaXNwYXRjaChwcm9kdWN0QWN0aW9ucy51cGRhdGVBY3RpdmVQcm9kdWN0T3B0aW9ucyh0aGlzLnByb2R1Y3Qub3B0aW9ucykpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgYWN0aXZlUHJvZHVjdCA9IHZvaWQgMDtcbiAgICAgIGFjdGl2ZVByb2R1Y3QgPSB0aGlzLnByb2R1Y3Q7XG4gICAgICBpZiAoYWN0aXZlUHJvZHVjdCkge1xuICAgICAgICB2YXIgZGlzcGF0Y2ggPSB0aGlzLnByb3BzLmRpc3BhdGNoO1xuICAgICAgICB2YXIgX2FjdGl2ZVByb2R1Y3QkYXR0cnMgPSBhY3RpdmVQcm9kdWN0LmF0dHJzLFxuICAgICAgICAgICAgcHJvZHVjdF9pZCA9IF9hY3RpdmVQcm9kdWN0JGF0dHJzLnByb2R1Y3RfaWQsXG4gICAgICAgICAgICB0aXRsZSA9IF9hY3RpdmVQcm9kdWN0JGF0dHJzLnRpdGxlLFxuICAgICAgICAgICAgaW1hZ2VzID0gX2FjdGl2ZVByb2R1Y3QkYXR0cnMuaW1hZ2VzLFxuICAgICAgICAgICAgb3B0aW9ucyA9IF9hY3RpdmVQcm9kdWN0JGF0dHJzLm9wdGlvbnM7XG4gICAgICAgIHZhciBfYWN0aXZlUHJvZHVjdCA9IGFjdGl2ZVByb2R1Y3QsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IF9hY3RpdmVQcm9kdWN0LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgc2VsZWN0ZWRWYXJpYW50ID0gX2FjdGl2ZVByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LFxuICAgICAgICAgICAgc2VsZWN0ZWRWYXJpYW50SW1hZ2UgPSBfYWN0aXZlUHJvZHVjdC5zZWxlY3RlZFZhcmlhbnRJbWFnZTtcblxuXG4gICAgICAgIHZhciByZW5kZXJPcHRpb25zID0gZnVuY3Rpb24gcmVuZGVyT3B0aW9ucygpIHtcbiAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1vcHRpb25zJyB9LFxuICAgICAgICAgICAgYWN0aXZlUHJvZHVjdC5vcHRpb25zLm1hcChmdW5jdGlvbiAob3B0aW9uLCBpbmRleCkge1xuICAgICAgICAgICAgICBpZiAob3B0aW9uLm5hbWUgIT0gXCJTaXplXCIgJiYgb3B0aW9uLm5hbWUgIT0gXCJUaXRsZVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgICB7IGtleTogaW5kZXgsIG5hbWU6IG9wdGlvbi5uYW1lLCB2YWx1ZTogb3B0aW9uLnNlbGVjdGVkLCBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuaGFuZGxlT3B0aW9uQ2hhbmdlKG9wdGlvbi5uYW1lLCBldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAnb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICB7IGtleTogaW5kZXgsIHZhbHVlOiB2YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmVuZGVyU2l6ZXMgPSBmdW5jdGlvbiByZW5kZXJTaXplcygpIHtcbiAgICAgICAgICByZXR1cm4gYWN0aXZlUHJvZHVjdC5vcHRpb25zLm1hcChmdW5jdGlvbiAob3B0aW9uLCBvcHRpb25zSW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb24ubmFtZSA9PSBcIlNpemVcIikge1xuICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ3VsJyxcbiAgICAgICAgICAgICAgICB7IGtleTogb3B0aW9uc0luZGV4LCBjbGFzc05hbWU6ICdwcm9kdWN0LXNpemVzJyB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncHJvZHVjdC1zaXplICcgKyAob3B0aW9uLnNlbGVjdGVkID09PSB2YWx1ZSA/ICdzZWxlY3RlZCcgOiAnJyksXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5oYW5kbGVPcHRpb25DaGFuZ2Uob3B0aW9uLm5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc29sZS5sb2coJ2FjdGl2ZVByb2R1Y3Q6ICcsIGFjdGl2ZVByb2R1Y3QpO1xuXG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbnRhaW5lcicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc21hbGwtMTIgbWVkaXVtLTggY29sdW1uJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICB7IG9uQ2xpY2s6IF9yZWFjdFJvdXRlci5icm93c2VySGlzdG9yeS5nb0JhY2ssIGNsYXNzTmFtZTogJ2J1dHRvbiBob2xsb3cnIH0sXG4gICAgICAgICAgICAgICAgJ1xcdTIwMzkgQmFjayB0byBwcm9kdWN0cydcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndGV4dC1jZW50ZXInIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgc3JjOiBzZWxlY3RlZFZhcmlhbnRJbWFnZS5zcmMsIGFsdDogJycgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzbWFsbC0xMiBtZWRpdW0tNCBjb2x1bW4nIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0LXRpdGxlJyB9LFxuICAgICAgICAgICAgICAgIHRpdGxlXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1pbmZvJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2g1JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1pbmZvX19oZWFkbGluZScgfSxcbiAgICAgICAgICAgICAgICAgICdBcnRpc3QnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAnSldJU0g4OCdcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2g1JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1pbmZvX19oZWFkbGluZScgfSxcbiAgICAgICAgICAgICAgICAgICdEZXNjcmlwdGlvbidcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogZGVzY3JpcHRpb24gfSB9KSxcbiAgICAgICAgICAgICAgICByZW5kZXJPcHRpb25zKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyU2l6ZXMoKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0LXByaWNlJyB9LFxuICAgICAgICAgICAgICAgICAgX2Zvcm1hdDIuZGVmYXVsdC5hc01vbmV5KHNlbGVjdGVkVmFyaWFudC5wcmljZSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3QtY2hhcml0eScgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBwbGFjZWhvbGRlcjogJ0Nob29zZSBDaGFyaXR5JyB9KSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnc3VibWl0JywgY2xhc3NOYW1lOiAncHJvZHVjdC1jaGFyaXR5X19idXR0b24nIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS1jYXJldC1yaWdodCcgfSlcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1jaGFyaXR5X19tb3JlLWluZm8nLCBvbkNsaWNrOiB0aGlzLm9wZW5Nb2RhbCB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaScsIHsgY2xhc3NOYW1lOiAnZmEgZmEtaW5mby1jaXJjbGUnIH0pLFxuICAgICAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6ICcjJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICdtb3JlIGluZm8nXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0TW9kYWwyLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBpc09wZW46IHRoaXMuc3RhdGUubW9kYWxJc09wZW4sXG4gICAgICAgICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U6IHRoaXMuY2xvc2VNb2RhbCxcbiAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGFiZWw6ICdtb3JlIGluZm8nLFxuICAgICAgICAgICAgICAgICAgICAgIGNsb3NlVGltZW91dE1TOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUmVhY3RNb2RhbF9fQ29udGVudCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIFBlbGxlbnRlc3F1ZSBlZ2VzdGFzLCBuaWJoIHNlZCB0cmlzdGlxdWUgb3JuYXJlLCBudW5jIGR1aSBzb2xsaWNpdHVkaW4gZWxpdCwgaWQgY29uc2VjdGV0dXIgb2RpbyBsZWN0dXMgZXUgbnVsbGEuIFByb2luIGRhcGlidXMgY29udmFsbGlzIHVybmEgc2l0IGFtZXQgZGljdHVtLiBVdCBwb3J0dGl0b3IgbGlndWxhIGF0IHB1cnVzIGF1Y3RvciBtb2xlc3RpZS4gRXRpYW0gdmVsaXQgbmliaCwgcG9ydHRpdG9yIGF0IGlwc3VtIG1hdHRpcywgY29uc2VjdGV0dXIgZWdlc3RhcyBhcmN1LiBEb25lYyBwZWxsZW50ZXNxdWUgYXVndWUgc2l0IGFtZXQgZWxlbWVudHVtIGZhY2lsaXNpcy4gQWVuZWFuIHNlbXBlciBtYWxlc3VhZGEgbGlndWxhIGZhdWNpYnVzIHNvbGxpY2l0dWRpbi4gQ3VyYWJpdHVyIHV0IGxvcmVtIGFjIGVyYXQgcG9ydGEgbGFjaW5pYSBwdWx2aW5hciBldCByaXN1cy4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICdTZWQgYXQgbnVsbGEgZG9sb3IuIFV0IHF1aXMgcXVhbSBmaW5pYnVzLCBlZmZpY2l0dXIgbWkgc2VkLCBzb2xsaWNpdHVkaW4gdXJuYS4gTnVuYyB2ZWwgdG9ydG9yIGNvbW1vZG8sIG1vbGxpcyBlc3QgZXUsIGJsYW5kaXQgbWFzc2EuIFZpdmFtdXMgc2VkIG1pIHZpdGFlIHNlbSBjb21tb2RvIGNvbnNlY3RldHVyIGV1IGluIHNlbS4gRG9uZWMgdXQgZmFjaWxpc2lzIG9kaW8uIE51bGxhbSBpZCBlbGVtZW50dW0gZXJvcywgbm9uIHRlbXB1cyB0b3J0b3IuIE51bGxhbSBpbiBtYXR0aXMgZmVsaXMuIFByYWVzZW50IGJpYmVuZHVtIGJsYW5kaXQgYW50ZSwgZXQgZWxlbWVudHVtIG1ldHVzIGNvbnNlY3RldHVyIHZpdGFlLidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjbG9zZS1tb2RhbC1pY29uJywgb25DbGljazogdGhpcy5jbG9zZU1vZGFsIH0sXG4gICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXRpbWVzJyB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGNhcnRBY3Rpb25zLnN0YXJ0QWRkb3JVcGRhdGVDYXJ0SXRlbShhY3RpdmVQcm9kdWN0LnNlbGVjdGVkVmFyaWFudCwgMSkpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidXR0b24gbGFyZ2UgYWRkLXRvLWNhcnQnIH0sXG4gICAgICAgICAgICAgICAgICAnQWRkIFRvIENhcnQnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW1nJywgeyBzcmM6ICcvaW1hZ2VzL2NyZWRpdC1jYXJkcy5wbmcnLCBhbHQ6ICdBY2NlcHRlZCBjcmVkaXQgY2FyZHMnIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xvYWRlcjIuZGVmYXVsdCwgbnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb2R1Y3Q7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjb25uZWN0KGZ1bmN0aW9uIChzdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIGFjdGl2ZVByb2R1Y3Q6IHN0YXRlLnByb2R1Y3RzLmFjdGl2ZVxuICB9O1xufSkoUHJvZHVjdCk7XG5cbi8qKiovIH0pLFxuLyogODUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0Um91dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb2R1Y3RJdGVtID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFByb2R1Y3RJdGVtLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQcm9kdWN0SXRlbSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZHVjdEl0ZW0pO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm9kdWN0SXRlbS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb2R1Y3RJdGVtKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvZHVjdEl0ZW0sIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgdGl0bGUgPSBfcHJvcHMudGl0bGUsXG4gICAgICAgICAgaWQgPSBfcHJvcHMuaWQsXG4gICAgICAgICAgaW1hZ2UgPSBfcHJvcHMuaW1hZ2U7XG5cblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0LWl0ZW0nIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1pdGVtLWlubmVyJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICB7IHRvOiAnL3Byb2R1Y3QvJyArIGlkIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdwcm9kdWN0LWl0ZW0taW1hZ2UnLCBzdHlsZTogeyBiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoJyArIGltYWdlICsgJyknIH0gfSlcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdocicsIG51bGwpLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2g2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdC1pdGVtLXRpdGxlJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL3Byb2R1Y3QvJyArIGlkIH0sXG4gICAgICAgICAgICAgIHRpdGxlXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdhdXRob3InIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdhdXRob3JfX3Bob3RvJywgc3R5bGU6IHsgYmFja2dyb3VuZEltYWdlOiAndXJsKCcgKyBpbWFnZSArICcpJyB9IH0pLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2F1dGhvcl9faW5mbycgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgICAgeyB0bzogJy9hdXRob3IvJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2F1dGhvcl9fbmFtZScgfSxcbiAgICAgICAgICAgICAgICAgICdKYW1lczg4J1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYXV0aG9yX19sb2NhdGlvbicgfSxcbiAgICAgICAgICAgICAgICAgICdDYW50b24gT2hpbydcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb2R1Y3RJdGVtO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9kdWN0SXRlbTtcblxuLyoqKi8gfSksXG4vKiA4NiAqLyxcbi8qIDg3ICovLFxuLyogODggKi8sXG4vKiA4OSAqLyxcbi8qIDkwICovLFxuLyogOTEgKi8sXG4vKiA5MiAqLyxcbi8qIDkzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBjYW1lbDJoeXBoZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cbnZhciBpc0RpbWVuc2lvbiA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciByZSA9IC9baGVpZ2h0fHdpZHRoXSQvO1xuICByZXR1cm4gcmUudGVzdChmZWF0dXJlKTtcbn07XG5cbnZhciBvYmoybXEgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBtcSA9ICcnO1xuICB2YXIgZmVhdHVyZXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlLCBpbmRleCkge1xuICAgIHZhciB2YWx1ZSA9IG9ialtmZWF0dXJlXTtcbiAgICBmZWF0dXJlID0gY2FtZWwyaHlwaGVuKGZlYXR1cmUpO1xuICAgIC8vIEFkZCBweCB0byBkaW1lbnNpb24gZmVhdHVyZXNcbiAgICBpZiAoaXNEaW1lbnNpb24oZmVhdHVyZSkgJiYgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgdmFsdWUgPSB2YWx1ZSArICdweCc7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgbXEgKz0gZmVhdHVyZTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgbXEgKz0gJ25vdCAnICsgZmVhdHVyZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbXEgKz0gJygnICsgZmVhdHVyZSArICc6ICcgKyB2YWx1ZSArICcpJztcbiAgICB9XG4gICAgaWYgKGluZGV4IDwgZmVhdHVyZXMubGVuZ3RoLTEpIHtcbiAgICAgIG1xICs9ICcgYW5kICdcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbXE7XG59O1xuXG52YXIganNvbjJtcSA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICB2YXIgbXEgPSAnJztcbiAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcXVlcnk7XG4gIH1cbiAgLy8gSGFuZGxpbmcgYXJyYXkgb2YgbWVkaWEgcXVlcmllc1xuICBpZiAocXVlcnkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHF1ZXJ5LmZvckVhY2goZnVuY3Rpb24gKHEsIGluZGV4KSB7XG4gICAgICBtcSArPSBvYmoybXEocSk7XG4gICAgICBpZiAoaW5kZXggPCBxdWVyeS5sZW5ndGgtMSkge1xuICAgICAgICBtcSArPSAnLCAnXG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1xO1xuICB9XG4gIC8vIEhhbmRsaW5nIHNpbmdsZSBtZWRpYSBxdWVyeVxuICByZXR1cm4gb2JqMm1xKHF1ZXJ5KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ganNvbjJtcTtcblxuLyoqKi8gfSksXG4vKiA5NCAqLyxcbi8qIDk1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG52YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cXGQqKSQvO1xuXG4vKipcbiAqIEEgZmFzdGVyIGFsdGVybmF0aXZlIHRvIGBGdW5jdGlvbiNhcHBseWAsIHRoaXMgZnVuY3Rpb24gaW52b2tlcyBgZnVuY2BcbiAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgdGhlIGFyZ3VtZW50cyBvZiBgYXJnc2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtBcnJheX0gYXJncyBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXN1bHQgb2YgYGZ1bmNgLlxuICovXG5mdW5jdGlvbiBhcHBseShmdW5jLCB0aGlzQXJnLCBhcmdzKSB7XG4gIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZyk7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0pO1xuICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kc1xuICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIGFyZ3VtZW50IHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvdmVyQXJnKGZ1bmMsIHRyYW5zZm9ybSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuICB9O1xufVxuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUtleXMgPSBvdmVyQXJnKE9iamVjdC5rZXlzLCBPYmplY3QpLFxuICAgIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXG4vKiogRGV0ZWN0IGlmIHByb3BlcnRpZXMgc2hhZG93aW5nIHRob3NlIG9uIGBPYmplY3QucHJvdG90eXBlYCBhcmUgbm9uLWVudW1lcmFibGUuICovXG52YXIgbm9uRW51bVNoYWRvd3MgPSAhcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh7ICd2YWx1ZU9mJzogMSB9LCAndmFsdWVPZicpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgdGhlIGFycmF5LWxpa2UgYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGluaGVyaXRlZCBTcGVjaWZ5IHJldHVybmluZyBpbmhlcml0ZWQgcHJvcGVydHkgbmFtZXMuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBhcnJheUxpa2VLZXlzKHZhbHVlLCBpbmhlcml0ZWQpIHtcbiAgLy8gU2FmYXJpIDguMSBtYWtlcyBgYXJndW1lbnRzLmNhbGxlZWAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cbiAgLy8gU2FmYXJpIDkgbWFrZXMgYGFyZ3VtZW50cy5sZW5ndGhgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG4gIHZhciByZXN1bHQgPSAoaXNBcnJheSh2YWx1ZSkgfHwgaXNBcmd1bWVudHModmFsdWUpKVxuICAgID8gYmFzZVRpbWVzKHZhbHVlLmxlbmd0aCwgU3RyaW5nKVxuICAgIDogW107XG5cbiAgdmFyIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGgsXG4gICAgICBza2lwSW5kZXhlcyA9ICEhbGVuZ3RoO1xuXG4gIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgIGlmICgoaW5oZXJpdGVkIHx8IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGtleSkpICYmXG4gICAgICAgICEoc2tpcEluZGV4ZXMgJiYgKGtleSA9PSAnbGVuZ3RoJyB8fCBpc0luZGV4KGtleSwgbGVuZ3RoKSkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEFzc2lnbnMgYHZhbHVlYCB0byBga2V5YCBvZiBgb2JqZWN0YCBpZiB0aGUgZXhpc3RpbmcgdmFsdWUgaXMgbm90IGVxdWl2YWxlbnRcbiAqIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGFzc2lnbi5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFzc2lnbi5cbiAqL1xuZnVuY3Rpb24gYXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldO1xuICBpZiAoIShoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJiBlcShvYmpWYWx1ZSwgdmFsdWUpKSB8fFxuICAgICAgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkpIHtcbiAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBiYXNlS2V5cyhvYmplY3QpIHtcbiAgaWYgKCFpc1Byb3RvdHlwZShvYmplY3QpKSB7XG4gICAgcmV0dXJuIG5hdGl2ZUtleXMob2JqZWN0KTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gW107XG4gIGZvciAodmFyIGtleSBpbiBPYmplY3Qob2JqZWN0KSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJiBrZXkgIT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5yZXN0YCB3aGljaCBkb2Vzbid0IHZhbGlkYXRlIG9yIGNvZXJjZSBhcmd1bWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVJlc3QoZnVuYywgc3RhcnQpIHtcbiAgc3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQgPT09IHVuZGVmaW5lZCA/IChmdW5jLmxlbmd0aCAtIDEpIDogc3RhcnQsIDApO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSxcbiAgICAgICAgYXJyYXkgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIGFycmF5W2luZGV4XSA9IGFyZ3Nbc3RhcnQgKyBpbmRleF07XG4gICAgfVxuICAgIGluZGV4ID0gLTE7XG4gICAgdmFyIG90aGVyQXJncyA9IEFycmF5KHN0YXJ0ICsgMSk7XG4gICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuICAgICAgb3RoZXJBcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdO1xuICAgIH1cbiAgICBvdGhlckFyZ3Nbc3RhcnRdID0gYXJyYXk7XG4gICAgcmV0dXJuIGFwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7XG4gIH07XG59XG5cbi8qKlxuICogQ29waWVzIHByb3BlcnRpZXMgb2YgYHNvdXJjZWAgdG8gYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbS5cbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBpZGVudGlmaWVycyB0byBjb3B5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3Q9e31dIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIHRvLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29waWVkIHZhbHVlcy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGNvcHlPYmplY3Qoc291cmNlLCBwcm9wcywgb2JqZWN0LCBjdXN0b21pemVyKSB7XG4gIG9iamVjdCB8fCAob2JqZWN0ID0ge30pO1xuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcblxuICAgIHZhciBuZXdWYWx1ZSA9IGN1c3RvbWl6ZXJcbiAgICAgID8gY3VzdG9taXplcihvYmplY3Rba2V5XSwgc291cmNlW2tleV0sIGtleSwgb2JqZWN0LCBzb3VyY2UpXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICAgIGFzc2lnblZhbHVlKG9iamVjdCwga2V5LCBuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkID8gc291cmNlW2tleV0gOiBuZXdWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gbGlrZSBgXy5hc3NpZ25gLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhc3NpZ25lciBUaGUgZnVuY3Rpb24gdG8gYXNzaWduIHZhbHVlcy5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFzc2lnbmVyIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVBc3NpZ25lcihhc3NpZ25lcikge1xuICByZXR1cm4gYmFzZVJlc3QoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2VzKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IHNvdXJjZXMubGVuZ3RoLFxuICAgICAgICBjdXN0b21pemVyID0gbGVuZ3RoID4gMSA/IHNvdXJjZXNbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQsXG4gICAgICAgIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQ7XG5cbiAgICBjdXN0b21pemVyID0gKGFzc2lnbmVyLmxlbmd0aCA+IDMgJiYgdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJylcbiAgICAgID8gKGxlbmd0aC0tLCBjdXN0b21pemVyKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc291cmNlc1swXSwgc291cmNlc1sxXSwgZ3VhcmQpKSB7XG4gICAgICBjdXN0b21pemVyID0gbGVuZ3RoIDwgMyA/IHVuZGVmaW5lZCA6IGN1c3RvbWl6ZXI7XG4gICAgICBsZW5ndGggPSAxO1xuICAgIH1cbiAgICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaW5kZXhdO1xuICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICBhc3NpZ25lcihvYmplY3QsIHNvdXJjZSwgaW5kZXgsIGN1c3RvbWl6ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gISFsZW5ndGggJiZcbiAgICAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJlxuICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgdmFsdWUgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp9IGluZGV4IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgaW5kZXggb3Iga2V5IGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBvYmplY3QgYXJndW1lbnQuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGluZGV4LCBvYmplY3QpIHtcbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB0eXBlID0gdHlwZW9mIGluZGV4O1xuICBpZiAodHlwZSA9PSAnbnVtYmVyJ1xuICAgICAgICA/IChpc0FycmF5TGlrZShvYmplY3QpICYmIGlzSW5kZXgoaW5kZXgsIG9iamVjdC5sZW5ndGgpKVxuICAgICAgICA6ICh0eXBlID09ICdzdHJpbmcnICYmIGluZGV4IGluIG9iamVjdClcbiAgICAgICkge1xuICAgIHJldHVybiBlcShvYmplY3RbaW5kZXhdLCB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm90b3R5cGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcbiAgdmFyIEN0b3IgPSB2YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3RvcixcbiAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXG4gIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87XG59XG5cbi8qKlxuICogUGVyZm9ybXMgYVxuICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSB9O1xuICogdmFyIG90aGVyID0geyAnYSc6IDEgfTtcbiAqXG4gKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKCdhJywgJ2EnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKE5hTiwgTmFOKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gb3RoZXIgfHwgKHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXIpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICAvLyBTYWZhcmkgOC4xIG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuICAgICghcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NUYWcpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzXG4gKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG4gKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZSgnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0FycmF5TGlrZWAgZXhjZXB0IHRoYXQgaXQgYWxzbyBjaGVja3MgaWYgYHZhbHVlYFxuICogaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIFNhZmFyaSA4LTkgd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy5cbiAgdmFyIHRhZyA9IGlzT2JqZWN0KHZhbHVlKSA/IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0xlbmd0aCgzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aCgnMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIEFzc2lnbnMgb3duIGVudW1lcmFibGUgc3RyaW5nIGtleWVkIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdHMgdG8gdGhlXG4gKiBkZXN0aW5hdGlvbiBvYmplY3QuIFNvdXJjZSBvYmplY3RzIGFyZSBhcHBsaWVkIGZyb20gbGVmdCB0byByaWdodC5cbiAqIFN1YnNlcXVlbnQgc291cmNlcyBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YCBhbmQgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BPYmplY3QuYXNzaWduYF0oaHR0cHM6Ly9tZG4uaW8vT2JqZWN0L2Fzc2lnbikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEwLjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqIEBzZWUgXy5hc3NpZ25JblxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiB9XG4gKlxuICogZnVuY3Rpb24gQmFyKCkge1xuICogICB0aGlzLmMgPSAzO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYiA9IDI7XG4gKiBCYXIucHJvdG90eXBlLmQgPSA0O1xuICpcbiAqIF8uYXNzaWduKHsgJ2EnOiAwIH0sIG5ldyBGb28sIG5ldyBCYXIpO1xuICogLy8gPT4geyAnYSc6IDEsICdjJzogMyB9XG4gKi9cbnZhciBhc3NpZ24gPSBjcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3QsIHNvdXJjZSkge1xuICBpZiAobm9uRW51bVNoYWRvd3MgfHwgaXNQcm90b3R5cGUoc291cmNlKSB8fCBpc0FycmF5TGlrZShzb3VyY2UpKSB7XG4gICAgY29weU9iamVjdChzb3VyY2UsIGtleXMoc291cmNlKSwgb2JqZWN0KTtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgYXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LmtleXMpXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5cyhuZXcgRm9vKTtcbiAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqXG4gKiBfLmtleXMoJ2hpJyk7XG4gKiAvLyA9PiBbJzAnLCAnMSddXG4gKi9cbmZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG4gIHJldHVybiBpc0FycmF5TGlrZShvYmplY3QpID8gYXJyYXlMaWtlS2V5cyhvYmplY3QpIDogYmFzZUtleXMob2JqZWN0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ247XG5cblxuLyoqKi8gfSksXG4vKiA5NiAqLyxcbi8qIDk3ICovLFxuLyogOTggKi8sXG4vKiA5OSAqLyxcbi8qIDEwMCAqLyxcbi8qIDEwMSAqLyxcbi8qIDEwMiAqLyxcbi8qIDEwMyAqLyxcbi8qIDEwNCAqLyxcbi8qIDEwNSAqLyxcbi8qIDEwNiAqLyxcbi8qIDEwNyAqLyxcbi8qIDEwOCAqLyxcbi8qIDEwOSAqLyxcbi8qIDExMCAqLyxcbi8qIDExMSAqLyxcbi8qIDExMiAqLyxcbi8qIDExMyAqLyxcbi8qIDExNCAqLyxcbi8qIDExNSAqLyxcbi8qIDExNiAqLyxcbi8qIDExNyAqLyxcbi8qIDExOCAqLyxcbi8qIDExOSAqLyxcbi8qIDEyMCAqLyxcbi8qIDEyMSAqLyxcbi8qIDEyMiAqLyxcbi8qIDEyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5mdW5jdGlvbiB3YXJuKHMpIHtcbiAgY29uc29sZS53YXJuKCdbcmVhY3QtZ2FdJywgcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2FybjtcblxuXG4vKioqLyB9KSxcbi8qIDEyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyBHQSBzdHJpbmdzIG5lZWQgdG8gaGF2ZSBsZWFkaW5nL3RyYWlsaW5nIHdoaXRlc3BhY2UgdHJpbW1lZCwgYW5kIG5vdCBhbGxcbi8vIGJyb3dzZXJzIGhhdmUgU3RyaW5nLnByb3RvdG95cGUudHJpbSgpLlxuXG5mdW5jdGlvbiB0cmltKHMpIHtcbiAgcmV0dXJuIHMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyaW07XG5cblxuLyoqKi8gfSksXG4vKiAxMjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyohXG4gKiBBZGFwdGVkIGZyb20galF1ZXJ5IFVJIGNvcmVcbiAqXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NhdGVnb3J5L3VpLWNvcmUvXG4gKi9cblxuZnVuY3Rpb24gZm9jdXNhYmxlKGVsZW1lbnQsIGlzVGFiSW5kZXhOb3ROYU4pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChub2RlTmFtZSkgP1xuICAgICFlbGVtZW50LmRpc2FibGVkIDpcbiAgICBcImFcIiA9PT0gbm9kZU5hbWUgP1xuICAgICAgZWxlbWVudC5ocmVmIHx8IGlzVGFiSW5kZXhOb3ROYU4gOlxuICAgICAgaXNUYWJJbmRleE5vdE5hTikgJiYgdmlzaWJsZShlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gaGlkZGVuKGVsKSB7XG4gIHJldHVybiAoZWwub2Zmc2V0V2lkdGggPD0gMCAmJiBlbC5vZmZzZXRIZWlnaHQgPD0gMCkgfHxcbiAgICBlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZSc7XG59XG5cbmZ1bmN0aW9uIHZpc2libGUoZWxlbWVudCkge1xuICB3aGlsZSAoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KSBicmVhaztcbiAgICBpZiAoaGlkZGVuKGVsZW1lbnQpKSByZXR1cm4gZmFsc2U7XG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gdGFiYmFibGUoZWxlbWVudCkge1xuICB2YXIgdGFiSW5kZXggPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgaWYgKHRhYkluZGV4ID09PSBudWxsKSB0YWJJbmRleCA9IHVuZGVmaW5lZDtcbiAgdmFyIGlzVGFiSW5kZXhOYU4gPSBpc05hTih0YWJJbmRleCk7XG4gIHJldHVybiAoaXNUYWJJbmRleE5hTiB8fCB0YWJJbmRleCA+PSAwKSAmJiBmb2N1c2FibGUoZWxlbWVudCwgIWlzVGFiSW5kZXhOYU4pO1xufVxuXG5mdW5jdGlvbiBmaW5kVGFiYmFibGVEZXNjZW5kYW50cyhlbGVtZW50KSB7XG4gIHJldHVybiBbXS5zbGljZS5jYWxsKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpLCAwKS5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICByZXR1cm4gdGFiYmFibGUoZWwpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaW5kVGFiYmFibGVEZXNjZW5kYW50cztcblxuXG5cbi8qKiovIH0pLFxuLyogMTI2ICovLFxuLyogMTI3ICovLFxuLyogMTI4ICovLFxuLyogMTI5ICovLFxuLyogMTMwICovLFxuLyogMTMxICovLFxuLyogMTMyICovLFxuLyogMTMzICovLFxuLyogMTM0ICovLFxuLyogMTM1ICovLFxuLyogMTM2ICovLFxuLyogMTM3ICovLFxuLyogMTM4ICovLFxuLyogMTM5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBjbGFzc05hbWU6ICcnLFxuICAgIGFjY2Vzc2liaWxpdHk6IHRydWUsXG4gICAgYWRhcHRpdmVIZWlnaHQ6IGZhbHNlLFxuICAgIGFycm93czogdHJ1ZSxcbiAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgYXV0b3BsYXlTcGVlZDogMzAwMCxcbiAgICBjZW50ZXJNb2RlOiBmYWxzZSxcbiAgICBjZW50ZXJQYWRkaW5nOiAnNTBweCcsXG4gICAgY3NzRWFzZTogJ2Vhc2UnLFxuICAgIGN1c3RvbVBhZ2luZzogZnVuY3Rpb24gY3VzdG9tUGFnaW5nKGkpIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgaSArIDFcbiAgICAgICAgKTtcbiAgICB9LFxuICAgIGRvdHM6IGZhbHNlLFxuICAgIGRvdHNDbGFzczogJ3NsaWNrLWRvdHMnLFxuICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICBlYXNpbmc6ICdsaW5lYXInLFxuICAgIGVkZ2VGcmljdGlvbjogMC4zNSxcbiAgICBmYWRlOiBmYWxzZSxcbiAgICBmb2N1c09uU2VsZWN0OiBmYWxzZSxcbiAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICBpbml0aWFsU2xpZGU6IDAsXG4gICAgbGF6eUxvYWQ6IGZhbHNlLFxuICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICByZXNwb25zaXZlOiBudWxsLFxuICAgIHJ0bDogZmFsc2UsXG4gICAgc2xpZGU6ICdkaXYnLFxuICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICBzcGVlZDogNTAwLFxuICAgIHN3aXBlOiB0cnVlLFxuICAgIHN3aXBlVG9TbGlkZTogZmFsc2UsXG4gICAgdG91Y2hNb3ZlOiB0cnVlLFxuICAgIHRvdWNoVGhyZXNob2xkOiA1LFxuICAgIHVzZUNTUzogdHJ1ZSxcbiAgICB2YXJpYWJsZVdpZHRoOiBmYWxzZSxcbiAgICB2ZXJ0aWNhbDogZmFsc2UsXG4gICAgd2FpdEZvckFuaW1hdGU6IHRydWUsXG4gICAgYWZ0ZXJDaGFuZ2U6IG51bGwsXG4gICAgYmVmb3JlQ2hhbmdlOiBudWxsLFxuICAgIGVkZ2VFdmVudDogbnVsbCxcbiAgICBpbml0OiBudWxsLFxuICAgIHN3aXBlRXZlbnQ6IG51bGwsXG4gICAgLy8gbmV4dEFycm93LCBwcmV2QXJyb3cgYXJlIHJlYWN0IGNvbXBvbmV0c1xuICAgIG5leHRBcnJvdzogbnVsbCxcbiAgICBwcmV2QXJyb3c6IG51bGxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdFByb3BzO1xuXG4vKioqLyB9KSxcbi8qIDE0MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5nZXRUcmFja0xlZnQgPSBleHBvcnRzLmdldFRyYWNrQW5pbWF0ZUNTUyA9IGV4cG9ydHMuZ2V0VHJhY2tDU1MgPSB1bmRlZmluZWQ7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfb2JqZWN0QXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNoZWNrU3BlY0tleXMgPSBmdW5jdGlvbiBjaGVja1NwZWNLZXlzKHNwZWMsIGtleXNBcnJheSkge1xuICByZXR1cm4ga2V5c0FycmF5LnJlZHVjZShmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiBzcGVjLmhhc093blByb3BlcnR5KGtleSk7XG4gIH0sIHRydWUpID8gbnVsbCA6IGNvbnNvbGUuZXJyb3IoJ0tleXMgTWlzc2luZycsIHNwZWMpO1xufTtcblxudmFyIGdldFRyYWNrQ1NTID0gZXhwb3J0cy5nZXRUcmFja0NTUyA9IGZ1bmN0aW9uIGdldFRyYWNrQ1NTKHNwZWMpIHtcbiAgY2hlY2tTcGVjS2V5cyhzcGVjLCBbJ2xlZnQnLCAndmFyaWFibGVXaWR0aCcsICdzbGlkZUNvdW50JywgJ3NsaWRlc1RvU2hvdycsICdzbGlkZVdpZHRoJ10pO1xuXG4gIHZhciB0cmFja1dpZHRoLCB0cmFja0hlaWdodDtcblxuICB2YXIgdHJhY2tDaGlsZHJlbiA9IHNwZWMuc2xpZGVDb3VudCArIDIgKiBzcGVjLnNsaWRlc1RvU2hvdztcblxuICBpZiAoIXNwZWMudmVydGljYWwpIHtcbiAgICBpZiAoc3BlYy52YXJpYWJsZVdpZHRoKSB7XG4gICAgICB0cmFja1dpZHRoID0gKHNwZWMuc2xpZGVDb3VudCArIDIgKiBzcGVjLnNsaWRlc1RvU2hvdykgKiBzcGVjLnNsaWRlV2lkdGg7XG4gICAgfSBlbHNlIGlmIChzcGVjLmNlbnRlck1vZGUpIHtcbiAgICAgIHRyYWNrV2lkdGggPSAoc3BlYy5zbGlkZUNvdW50ICsgMiAqIChzcGVjLnNsaWRlc1RvU2hvdyArIDEpKSAqIHNwZWMuc2xpZGVXaWR0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhY2tXaWR0aCA9IChzcGVjLnNsaWRlQ291bnQgKyAyICogc3BlYy5zbGlkZXNUb1Nob3cpICogc3BlYy5zbGlkZVdpZHRoO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0cmFja0hlaWdodCA9IHRyYWNrQ2hpbGRyZW4gKiBzcGVjLnNsaWRlSGVpZ2h0O1xuICB9XG5cbiAgdmFyIHN0eWxlID0ge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgV2Via2l0VHJhbnNmb3JtOiAhc3BlYy52ZXJ0aWNhbCA/ICd0cmFuc2xhdGUzZCgnICsgc3BlYy5sZWZ0ICsgJ3B4LCAwcHgsIDBweCknIDogJ3RyYW5zbGF0ZTNkKDBweCwgJyArIHNwZWMubGVmdCArICdweCwgMHB4KScsXG4gICAgdHJhbnNmb3JtOiAhc3BlYy52ZXJ0aWNhbCA/ICd0cmFuc2xhdGUzZCgnICsgc3BlYy5sZWZ0ICsgJ3B4LCAwcHgsIDBweCknIDogJ3RyYW5zbGF0ZTNkKDBweCwgJyArIHNwZWMubGVmdCArICdweCwgMHB4KScsXG4gICAgdHJhbnNpdGlvbjogJycsXG4gICAgV2Via2l0VHJhbnNpdGlvbjogJycsXG4gICAgbXNUcmFuc2Zvcm06ICFzcGVjLnZlcnRpY2FsID8gJ3RyYW5zbGF0ZVgoJyArIHNwZWMubGVmdCArICdweCknIDogJ3RyYW5zbGF0ZVkoJyArIHNwZWMubGVmdCArICdweCknXG4gIH07XG5cbiAgaWYgKHRyYWNrV2lkdGgpIHtcbiAgICAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoc3R5bGUsIHsgd2lkdGg6IHRyYWNrV2lkdGggfSk7XG4gIH1cblxuICBpZiAodHJhY2tIZWlnaHQpIHtcbiAgICAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoc3R5bGUsIHsgaGVpZ2h0OiB0cmFja0hlaWdodCB9KTtcbiAgfVxuXG4gIC8vIEZhbGxiYWNrIGZvciBJRThcbiAgaWYgKHdpbmRvdyAmJiAhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgd2luZG93LmF0dGFjaEV2ZW50KSB7XG4gICAgaWYgKCFzcGVjLnZlcnRpY2FsKSB7XG4gICAgICBzdHlsZS5tYXJnaW5MZWZ0ID0gc3BlYy5sZWZ0ICsgJ3B4JztcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUubWFyZ2luVG9wID0gc3BlYy5sZWZ0ICsgJ3B4JztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59O1xuXG52YXIgZ2V0VHJhY2tBbmltYXRlQ1NTID0gZXhwb3J0cy5nZXRUcmFja0FuaW1hdGVDU1MgPSBmdW5jdGlvbiBnZXRUcmFja0FuaW1hdGVDU1Moc3BlYykge1xuICBjaGVja1NwZWNLZXlzKHNwZWMsIFsnbGVmdCcsICd2YXJpYWJsZVdpZHRoJywgJ3NsaWRlQ291bnQnLCAnc2xpZGVzVG9TaG93JywgJ3NsaWRlV2lkdGgnLCAnc3BlZWQnLCAnY3NzRWFzZSddKTtcblxuICB2YXIgc3R5bGUgPSBnZXRUcmFja0NTUyhzcGVjKTtcbiAgLy8gdXNlQ1NTIGlzIHRydWUgYnkgZGVmYXVsdCBzbyBpdCBjYW4gYmUgdW5kZWZpbmVkXG4gIHN0eWxlLldlYmtpdFRyYW5zaXRpb24gPSAnLXdlYmtpdC10cmFuc2Zvcm0gJyArIHNwZWMuc3BlZWQgKyAnbXMgJyArIHNwZWMuY3NzRWFzZTtcbiAgc3R5bGUudHJhbnNpdGlvbiA9ICd0cmFuc2Zvcm0gJyArIHNwZWMuc3BlZWQgKyAnbXMgJyArIHNwZWMuY3NzRWFzZTtcbiAgcmV0dXJuIHN0eWxlO1xufTtcblxudmFyIGdldFRyYWNrTGVmdCA9IGV4cG9ydHMuZ2V0VHJhY2tMZWZ0ID0gZnVuY3Rpb24gZ2V0VHJhY2tMZWZ0KHNwZWMpIHtcblxuICBjaGVja1NwZWNLZXlzKHNwZWMsIFsnc2xpZGVJbmRleCcsICd0cmFja1JlZicsICdpbmZpbml0ZScsICdjZW50ZXJNb2RlJywgJ3NsaWRlQ291bnQnLCAnc2xpZGVzVG9TaG93JywgJ3NsaWRlc1RvU2Nyb2xsJywgJ3NsaWRlV2lkdGgnLCAnbGlzdFdpZHRoJywgJ3ZhcmlhYmxlV2lkdGgnLCAnc2xpZGVIZWlnaHQnXSk7XG5cbiAgdmFyIHNsaWRlT2Zmc2V0ID0gMDtcbiAgdmFyIHRhcmdldExlZnQ7XG4gIHZhciB0YXJnZXRTbGlkZTtcbiAgdmFyIHZlcnRpY2FsT2Zmc2V0ID0gMDtcblxuICBpZiAoc3BlYy5mYWRlKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBpZiAoc3BlYy5pbmZpbml0ZSkge1xuICAgIGlmIChzcGVjLnNsaWRlQ291bnQgPj0gc3BlYy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgIHNsaWRlT2Zmc2V0ID0gc3BlYy5zbGlkZVdpZHRoICogc3BlYy5zbGlkZXNUb1Nob3cgKiAtMTtcbiAgICAgIHZlcnRpY2FsT2Zmc2V0ID0gc3BlYy5zbGlkZUhlaWdodCAqIHNwZWMuc2xpZGVzVG9TaG93ICogLTE7XG4gICAgfVxuICAgIGlmIChzcGVjLnNsaWRlQ291bnQgJSBzcGVjLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XG4gICAgICBpZiAoc3BlYy5zbGlkZUluZGV4ICsgc3BlYy5zbGlkZXNUb1Njcm9sbCA+IHNwZWMuc2xpZGVDb3VudCAmJiBzcGVjLnNsaWRlQ291bnQgPiBzcGVjLnNsaWRlc1RvU2hvdykge1xuICAgICAgICBpZiAoc3BlYy5zbGlkZUluZGV4ID4gc3BlYy5zbGlkZUNvdW50KSB7XG4gICAgICAgICAgc2xpZGVPZmZzZXQgPSAoc3BlYy5zbGlkZXNUb1Nob3cgLSAoc3BlYy5zbGlkZUluZGV4IC0gc3BlYy5zbGlkZUNvdW50KSkgKiBzcGVjLnNsaWRlV2lkdGggKiAtMTtcbiAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9IChzcGVjLnNsaWRlc1RvU2hvdyAtIChzcGVjLnNsaWRlSW5kZXggLSBzcGVjLnNsaWRlQ291bnQpKSAqIHNwZWMuc2xpZGVIZWlnaHQgKiAtMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbGlkZU9mZnNldCA9IHNwZWMuc2xpZGVDb3VudCAlIHNwZWMuc2xpZGVzVG9TY3JvbGwgKiBzcGVjLnNsaWRlV2lkdGggKiAtMTtcbiAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9IHNwZWMuc2xpZGVDb3VudCAlIHNwZWMuc2xpZGVzVG9TY3JvbGwgKiBzcGVjLnNsaWRlSGVpZ2h0ICogLTE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG5cbiAgICBpZiAoc3BlYy5zbGlkZUNvdW50ICUgc3BlYy5zbGlkZXNUb1Njcm9sbCAhPT0gMCkge1xuICAgICAgaWYgKHNwZWMuc2xpZGVJbmRleCArIHNwZWMuc2xpZGVzVG9TY3JvbGwgPiBzcGVjLnNsaWRlQ291bnQgJiYgc3BlYy5zbGlkZUNvdW50ID4gc3BlYy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgdmFyIHNsaWRlc1RvT2Zmc2V0ID0gc3BlYy5zbGlkZXNUb1Nob3cgLSBzcGVjLnNsaWRlQ291bnQgJSBzcGVjLnNsaWRlc1RvU2Nyb2xsO1xuICAgICAgICBzbGlkZU9mZnNldCA9IHNsaWRlc1RvT2Zmc2V0ICogc3BlYy5zbGlkZVdpZHRoO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzcGVjLmNlbnRlck1vZGUpIHtcbiAgICBpZiAoc3BlYy5pbmZpbml0ZSkge1xuICAgICAgc2xpZGVPZmZzZXQgKz0gc3BlYy5zbGlkZVdpZHRoICogTWF0aC5mbG9vcihzcGVjLnNsaWRlc1RvU2hvdyAvIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzbGlkZU9mZnNldCA9IHNwZWMuc2xpZGVXaWR0aCAqIE1hdGguZmxvb3Ioc3BlYy5zbGlkZXNUb1Nob3cgLyAyKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIXNwZWMudmVydGljYWwpIHtcbiAgICB0YXJnZXRMZWZ0ID0gc3BlYy5zbGlkZUluZGV4ICogc3BlYy5zbGlkZVdpZHRoICogLTEgKyBzbGlkZU9mZnNldDtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXRMZWZ0ID0gc3BlYy5zbGlkZUluZGV4ICogc3BlYy5zbGlkZUhlaWdodCAqIC0xICsgdmVydGljYWxPZmZzZXQ7XG4gIH1cblxuICBpZiAoc3BlYy52YXJpYWJsZVdpZHRoID09PSB0cnVlKSB7XG4gICAgdmFyIHRhcmdldFNsaWRlSW5kZXg7XG4gICAgaWYgKHNwZWMuc2xpZGVDb3VudCA8PSBzcGVjLnNsaWRlc1RvU2hvdyB8fCBzcGVjLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgdGFyZ2V0U2xpZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoc3BlYy50cmFja1JlZikuY2hpbGROb2Rlc1tzcGVjLnNsaWRlSW5kZXhdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRTbGlkZUluZGV4ID0gc3BlYy5zbGlkZUluZGV4ICsgc3BlYy5zbGlkZXNUb1Nob3c7XG4gICAgICB0YXJnZXRTbGlkZSA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShzcGVjLnRyYWNrUmVmKS5jaGlsZE5vZGVzW3RhcmdldFNsaWRlSW5kZXhdO1xuICAgIH1cbiAgICB0YXJnZXRMZWZ0ID0gdGFyZ2V0U2xpZGUgPyB0YXJnZXRTbGlkZS5vZmZzZXRMZWZ0ICogLTEgOiAwO1xuICAgIGlmIChzcGVjLmNlbnRlck1vZGUgPT09IHRydWUpIHtcbiAgICAgIGlmIChzcGVjLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgICB0YXJnZXRTbGlkZSA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShzcGVjLnRyYWNrUmVmKS5jaGlsZHJlbltzcGVjLnNsaWRlSW5kZXhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoc3BlYy50cmFja1JlZikuY2hpbGRyZW5bc3BlYy5zbGlkZUluZGV4ICsgc3BlYy5zbGlkZXNUb1Nob3cgKyAxXTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldFNsaWRlKSB7XG4gICAgICAgIHRhcmdldExlZnQgPSB0YXJnZXRTbGlkZS5vZmZzZXRMZWZ0ICogLTEgKyAoc3BlYy5saXN0V2lkdGggLSB0YXJnZXRTbGlkZS5vZmZzZXRXaWR0aCkgLyAyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXRMZWZ0O1xufTtcblxuLyoqKi8gfSksXG4vKiAxNDEgKi8sXG4vKiAxNDIgKi8sXG4vKiAxNDMgKi8sXG4vKiAxNDQgKi8sXG4vKiAxNDUgKi8sXG4vKiAxNDYgKi8sXG4vKiAxNDcgKi8sXG4vKiAxNDggKi8sXG4vKiAxNDkgKi8sXG4vKiAxNTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudGhyb3cgbmV3IEVycm9yKFwiTW9kdWxlIHBhcnNlIGZhaWxlZDogL1VzZXJzL2p1bGlhbmpvcmdlbnNlbi9zaXRlcy9ybWMvYXBwL3N0eWxlcy9hcHAuc2NzcyBVbmV4cGVjdGVkIGNoYXJhY3RlciAnQCcgKDE6MClcXG5Zb3UgbWF5IG5lZWQgYW4gYXBwcm9wcmlhdGUgbG9hZGVyIHRvIGhhbmRsZSB0aGlzIGZpbGUgdHlwZS5cXG58IEBpbXBvcnQgXFxcImJhc2UvdmFyaWFibGVzXFxcIjtcXG58IFxcbnwgLy8gZm91bmRhdGlvblwiKTtcblxuLyoqKi8gfSksXG4vKiAxNTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0Um91dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvY3VtZW50TWV0YSk7XG5cbnZhciBfTWFpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTU5KTtcblxudmFyIF9NYWluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01haW4pO1xuXG52YXIgX0luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXG52YXIgX0luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0luZGV4KTtcblxudmFyIF9Qcm9kdWN0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYwKTtcblxudmFyIF9Qcm9kdWN0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm9kdWN0cyk7XG5cbnZhciBfUHJvZHVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oODQpO1xuXG52YXIgX1Byb2R1Y3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJvZHVjdCk7XG5cbnZhciBfQ29sbGVjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NSk7XG5cbnZhciBfQ29sbGVjdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29sbGVjdGlvbnMpO1xuXG52YXIgX0NvbGxlY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKTtcblxudmFyIF9Db2xsZWN0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbGxlY3Rpb24pO1xuXG52YXIgX1VwbG9hZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYxKTtcblxudmFyIF9VcGxvYWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVXBsb2FkKTtcblxudmFyIF9PcmRlclN0YXR1cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY3KTtcblxudmFyIF9PcmRlclN0YXR1czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PcmRlclN0YXR1cyk7XG5cbnZhciBfTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjYpO1xuXG52YXIgX01hcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NYXApO1xuXG52YXIgX0xvZ2luID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjUpO1xuXG52YXIgX0xvZ2luMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvZ2luKTtcblxudmFyIF9BYm91dCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYzKTtcblxudmFyIF9BYm91dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BYm91dCk7XG5cbnZhciBfQ29udGFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTY0KTtcblxudmFyIF9Db250YWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnRhY3QpO1xuXG52YXIgX3JlYWN0R2EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3Mik7XG5cbnZhciBfcmVhY3RHYTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEdhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSxcbiAgICBjb25uZWN0ID0gX3JlcXVpcmUuY29ubmVjdDtcblxudmFyIHN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkuY29uZmlndXJlKCk7XG5cbi8vIFJlYWN0R0EuaW5pdGlhbGl6ZSgnVUEtNjI0MTgyNS05Jyk7IC8vIGluaXRpYWxpemUgR29vZ2xlIEFuYWx5dGljc1xuXG5mdW5jdGlvbiBsb2dQYWdlVmlldyhsb2NhdGlvbikge1xuICBfcmVhY3RHYTIuZGVmYXVsdC5zZXQoeyBwYWdlOiBsb2NhdGlvbi5wYXRobmFtZSB9KTtcbiAgX3JlYWN0R2EyLmRlZmF1bHQucGFnZXZpZXcobG9jYXRpb24ucGF0aG5hbWUpO1xufVxuXG5fcmVhY3RSb3V0ZXIuYnJvd3Nlckhpc3RvcnkubGlzdGVuKGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICBsb2dQYWdlVmlldyhsb2NhdGlvbik7XG5cbiAgLy8gc2Nyb2xsIHRvIHRvcCB3aGVuIGNoYW5naW5nIHBhZ2VcbiAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICBfcmVhY3RSb3V0ZXIuUm91dGVyLFxuICB7IGhpc3Rvcnk6IF9yZWFjdFJvdXRlci5icm93c2VySGlzdG9yeSB9LFxuICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfcmVhY3RSb3V0ZXIuUm91dGUsXG4gICAgeyBwYXRoOiAnLycsIGNvbXBvbmVudDogX01haW4yLmRlZmF1bHQgfSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuSW5kZXhSb3V0ZSwgeyBwYXRoOiAnLycsIGNvbXBvbmVudDogX0luZGV4Mi5kZWZhdWx0IH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlci5Sb3V0ZSwgeyBwYXRoOiAncHJvZHVjdHMnLCBjb21wb25lbnQ6IF9Qcm9kdWN0czIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ3Byb2R1Y3QvOnByb2R1Y3RJZCcsIGNvbXBvbmVudDogX1Byb2R1Y3QyLmRlZmF1bHQgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyLlJvdXRlLCB7IHBhdGg6ICdjb2xsZWN0aW9ucycsIGNvbXBvbmVudDogX0NvbGxlY3Rpb25zMi5kZWZhdWx0IH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlci5Sb3V0ZSwgeyBwYXRoOiAnY29sbGVjdGlvbi86Y29sbGVjdGlvbklkJywgY29tcG9uZW50OiBfQ29sbGVjdGlvbjIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ215LWNpdHknLCBjb21wb25lbnQ6IF9Qcm9kdWN0czIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ3VwbG9hZCcsIGNvbXBvbmVudDogX1VwbG9hZDIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ29yZGVyLXN0YXR1cycsIGNvbXBvbmVudDogX09yZGVyU3RhdHVzMi5kZWZhdWx0IH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlci5Sb3V0ZSwgeyBwYXRoOiAnbWFwJywgY29tcG9uZW50OiBfTWFwMi5kZWZhdWx0IH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlci5Sb3V0ZSwgeyBwYXRoOiAnbG9naW4nLCBjb21wb25lbnQ6IF9Mb2dpbjIuZGVmYXVsdCB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXIuUm91dGUsIHsgcGF0aDogJ2Fib3V0JywgY29tcG9uZW50OiBfQWJvdXQyLmRlZmF1bHQgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyLlJvdXRlLCB7IHBhdGg6ICdjb250YWN0JywgY29tcG9uZW50OiBfQ29udGFjdDIuZGVmYXVsdCB9KVxuICApXG4pO1xuXG4vLyBjb25zdCBjb21wb25lbnRSb3V0ZXMgPSB7XG4vLyAgIGNvbXBvbmVudDogJ01haW4nLFxuLy8gICBwYXRoOiAnLycsXG4vLyAgIGluZGV4Um91dGU6IHsgY29tcG9uZW50OiAnSW5kZXgnIH0sXG4vLyAgIGNoaWxkUm91dGVzOiBbXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ2NvbGxlY3Rpb25zJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnQ29sbGVjdGlvbnMnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ2NvbGxlY3Rpb24vOmNvbGxlY3Rpb25JZCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0NvbGxlY3Rpb24nKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ3Byb2R1Y3RzJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnUHJvZHVjdHMnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ3Byb2R1Y3QvcHJvZHVjdElkJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnUHJvZHVjdCcpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAnbXktY2l0eScsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ1Byb2R1Y3RzJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdhYm91dCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0Fib3V0Jylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdjb250YWN0Jyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnQ29udGFjdCcpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAndXBsb2FkJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnVXBsb2FkJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdtYXAnLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdNYXAnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ2xvZ2luJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnTG9naW4nKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ29yZGVyLXN0YXR1cycsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ09yZGVyU3RhdHVzJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9XG4vLyAgIF1cbi8vIH07XG5cbi8qKiovIH0pLFxuLyogMTUyICovLFxuLyogMTUzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9mb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblxudmFyIF9mb3JtYXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm9ybWF0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLFxuICAgIGNvbm5lY3QgPSBfcmVxdWlyZS5jb25uZWN0O1xuXG52YXIgYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgQ2FydEl0ZW0gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQ2FydEl0ZW0sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENhcnRJdGVtKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYXJ0SXRlbSk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENhcnRJdGVtLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2FydEl0ZW0pKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDYXJ0SXRlbSwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBkaXNwYXRjaCA9IF9wcm9wcy5kaXNwYXRjaCxcbiAgICAgICAgICBpdGVtID0gX3Byb3BzLml0ZW0sXG4gICAgICAgICAgaW5jcmVtZW50TGluZUl0ZW0gPSBfcHJvcHMuaW5jcmVtZW50TGluZUl0ZW0sXG4gICAgICAgICAgcXVhbnRpdHkgPSBfcHJvcHMucXVhbnRpdHk7XG5cblxuICAgICAgdmFyIGNoYW5nZVF1YW50aXR5ID0gZnVuY3Rpb24gY2hhbmdlUXVhbnRpdHkocXVhbnRpdHkpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NhcnQgSXRlbSBvYmplY3Q6ICcsIGl0ZW0pO1xuICAgICAgICBkaXNwYXRjaChhY3Rpb25zLnN0YXJ0QWRkb3JVcGRhdGVDYXJ0SXRlbShpdGVtLCBwYXJzZUludChxdWFudGl0eSkpKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1pdGVtJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdjYXJ0LWl0ZW1fX2ltZycsIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogJ3VybCgnICsgaXRlbS5pbWFnZVZhcmlhbnRzWzJdLnNyYyArICcpJyB9IH0pLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtaXRlbV9fY29udGVudCcgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWl0ZW1fX2NvbnRlbnQtcm93JyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtaXRlbV9fdmFyaWFudC10aXRsZScgfSxcbiAgICAgICAgICAgICAgaXRlbS52YXJpYW50X3RpdGxlXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWl0ZW1fX3RpdGxlJyB9LFxuICAgICAgICAgICAgICBpdGVtLnRpdGxlXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWl0ZW1fX2NvbnRlbnQtcm93JyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtaXRlbV9fcXVhbnRpdHktY29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidG4tLXNlYW1sZXNzIHF1YW50aXR5LWRlY3JlbWVudCcsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZVF1YW50aXR5KC0xKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICctJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2hpZGUnIH0sXG4gICAgICAgICAgICAgICAgICAnRGVjcmVtZW50J1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBxdWFudGl0eSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdjYXJ0LWl0ZW1fX3F1YW50aXR5JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgICBtaW46ICcwJyxcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuLS1zZWFtbGVzcyBxdWFudGl0eS1pbmNyZW1lbnQnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VRdWFudGl0eSgxKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICcrJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2hpZGUnIH0sXG4gICAgICAgICAgICAgICAgICAnSW5jcmVtZW50J1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1pdGVtX19wcmljZScgfSxcbiAgICAgICAgICAgICAgX2Zvcm1hdDIuZGVmYXVsdC5hc01vbmV5KGl0ZW0ucHJpY2UgKiBxdWFudGl0eSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENhcnRJdGVtO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBjYXJ0OiBzdGF0ZS5jYXJ0XG4gIH07XG59KShDYXJ0SXRlbSk7XG5cbi8qKiovIH0pLFxuLyogMTU0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBDb2xsZWN0aW9uSXRlbSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDb2xsZWN0aW9uSXRlbSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ29sbGVjdGlvbkl0ZW0oKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbGxlY3Rpb25JdGVtKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29sbGVjdGlvbkl0ZW0uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xsZWN0aW9uSXRlbSkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENvbGxlY3Rpb25JdGVtLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHRpdGxlID0gX3Byb3BzLnRpdGxlLFxuICAgICAgICAgIGlkID0gX3Byb3BzLmlkO1xuXG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnY29sbGVjdGlvbi1pdGVtJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbGxlY3Rpb24taXRlbS1pbm5lcicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdoMicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3RleHQtY2VudGVyJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL2NvbGxlY3Rpb24vJyArIGlkIH0sXG4gICAgICAgICAgICAgIHRpdGxlXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDb2xsZWN0aW9uSXRlbTtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ29sbGVjdGlvbkl0ZW07XG5cbi8qKiovIH0pLFxuLyogMTU1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9Db2xsZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cbnZhciBfQ29sbGVjdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db2xsZWN0aW9uKTtcblxudmFyIF9Db2xsZWN0aW9uSXRlbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU0KTtcblxudmFyIF9Db2xsZWN0aW9uSXRlbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db2xsZWN0aW9uSXRlbSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSxcbiAgICBjb25uZWN0ID0gX3JlcXVpcmUuY29ubmVjdDtcblxudmFyIGFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblxudmFyIENvbGxlY3Rpb25zID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKENvbGxlY3Rpb25zLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDb2xsZWN0aW9ucygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sbGVjdGlvbnMpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDb2xsZWN0aW9ucy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbGxlY3Rpb25zKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ29sbGVjdGlvbnMsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGNvbGxlY3Rpb25zID0gdGhpcy5wcm9wcy5jb2xsZWN0aW9ucztcblxuXG4gICAgICBpZiAoY29sbGVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgY29sbGVjdGlvbnMubWFwKGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NvbGxlY3Rpb25JdGVtMi5kZWZhdWx0LCB7IGtleTogY29sbGVjdGlvbi5jb2xsZWN0aW9uX2lkLCBpZDogY29sbGVjdGlvbi5jb2xsZWN0aW9uX2lkLCB0aXRsZTogY29sbGVjdGlvbi50aXRsZSB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgJ0xvYWRpbmcgY29sbGVjdGlvbnMuLi4nXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENvbGxlY3Rpb25zO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBjb2xsZWN0aW9uczogc3RhdGUuY29sbGVjdGlvbnMuYWxsXG4gIH07XG59KShDb2xsZWN0aW9ucyk7XG5cbi8qKiovIH0pLFxuLyogMTU2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBGb290ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRm9vdGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBGb290ZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvb3Rlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZvb3Rlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZvb3RlcikpLmNhbGwodGhpcykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEZvb3RlciwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdmb290ZXInLFxuICAgICAgICB7IGlkOiAnc2l0ZS1mb290ZXInIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICduYXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZm9vdGVyLW5hdicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL2Fib3V0JywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnQWJvdXQnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL3Byb2R1Y3RzJywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnU2hvcCBBbGwnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL2NvbnRhY3QnLCBhY3RpdmVDbGFzc05hbWU6ICdhY3RpdmUnIH0sXG4gICAgICAgICAgICAgICdDb250YWN0J1xuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy91cGxvYWQnLCBhY3RpdmVDbGFzc05hbWU6ICdhY3RpdmUnIH0sXG4gICAgICAgICAgICAgICdVcGxvYWQgRGVzaWduJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ3AnLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgJ0xvcmVtIGlwc3VtIGRvbGFyIHNpdCBhbWl0LiBTZWQgZG9ubyBhdmVjLidcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRm9vdGVyO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBGb290ZXI7XG5cbi8qKiovIH0pLFxuLyogMTU3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCksXG4gICAgY29ubmVjdCA9IF9yZXF1aXJlLmNvbm5lY3Q7XG5cbnZhciBjYXJ0QWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgSGVhZGVyID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEhlYWRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gSGVhZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIZWFkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChIZWFkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihIZWFkZXIpKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhIZWFkZXIsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgZGlzcGF0Y2ggPSBfcHJvcHMuZGlzcGF0Y2gsXG4gICAgICAgICAgY2FydEl0ZW1zID0gX3Byb3BzLmNhcnRJdGVtcztcblxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdoZWFkZXInLFxuICAgICAgICB7IGlkOiAnc2l0ZS1oZWFkZXInIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICd1bCcsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdtaW5pLW5hdicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ21pbmktbmF2LWl0ZW0nIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgIHsgdG86ICcvYWJvdXQnLCBhY3RpdmVDbGFzc05hbWU6ICdhY3RpdmUnIH0sXG4gICAgICAgICAgICAgICdBYm91dCdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbWluaS1uYXYtaXRlbScgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9vcmRlci1zdGF0dXMnLCBhY3RpdmVDbGFzc05hbWU6ICdhY3RpdmUnIH0sXG4gICAgICAgICAgICAgICdPcmRlciBTdGF0dXMnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ21pbmktbmF2LWl0ZW0nIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgIHsgdG86ICcvbWFwJywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnTWFwJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdtaW5pLW5hdi1pdGVtJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL2xvZ2luJywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnTG9naW4nXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ21pbmktbmF2LWl0ZW0gbWluaS1uYXYtaXRlbS1jYXJ0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaChjYXJ0QWN0aW9ucy5vcGVuQ2FydCgpKTtcbiAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXNob3BwaW5nLWNhcnQnIH0pLFxuICAgICAgICAgICAgJyAnLFxuICAgICAgICAgICAgY2FydEl0ZW1zID4gMCA/ICdbJyArIGNhcnRJdGVtcyArICddJyA6ICcnXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGlkOiAnc2l0ZS1sb2dvJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX3JlYWN0Um91dGVyLkluZGV4TGluayxcbiAgICAgICAgICAgIHsgdG86ICcvJywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJywgYWN0aXZlU3R5bGU6IHsgZm9udFdlaWdodDogJ2JvbGQnIH0gfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHNyYzogJy9pbWFnZXMvbG9nby5wbmcnIH0pXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnbmF2JyxcbiAgICAgICAgICB7IGlkOiAnc2l0ZS1uYXYnIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzaXRlLW5hdi1pdGVtJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL3Byb2R1Y3RzJywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnU2hvcCdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2l0ZS1uYXYtaXRlbScgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9teS1jaXR5JywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnTXkgQ2l0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2l0ZS1uYXYtaXRlbScgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgeyB0bzogJy9jYXRlZ29yaWVzJywgYWN0aXZlQ2xhc3NOYW1lOiAnYWN0aXZlJyB9LFxuICAgICAgICAgICAgICAnQ2F0ZWdvcmllcydcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IGlkOiAnc2l0ZS1uYXYtdXBsb2FkJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9yZWFjdFJvdXRlci5MaW5rLFxuICAgICAgICAgICAgICB7IHRvOiAnL3VwbG9hZCcgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgc3JjOiAnL2ltYWdlcy91cGxvYWQucG5nJyB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gSGVhZGVyO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBjYXJ0SXRlbXM6IHN0YXRlLmNhcnQubGluZUl0ZW1zQ291bnRcbiAgfTtcbn0pKEhlYWRlcik7XG5cbi8qKiovIH0pLFxuLyogMTU4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFNsaWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTMpO1xuXG52YXIgX3JlYWN0U2xpY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RTbGljayk7XG5cbnZhciBfcmVhY3RSb3V0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIF9Mb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblxudmFyIF9Mb2FkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9hZGVyKTtcblxudmFyIF9Qcm9kdWN0SXRlbSA9IF9fd2VicGFja19yZXF1aXJlX18oODUpO1xuXG52YXIgX1Byb2R1Y3RJdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb2R1Y3RJdGVtKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLFxuICAgIGNvbm5lY3QgPSBfcmVxdWlyZS5jb25uZWN0O1xuXG52YXIgYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgSW5kZXggPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoSW5kZXgsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEluZGV4KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbmRleCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEluZGV4Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSW5kZXgpKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhJbmRleCwgW3tcbiAgICBrZXk6ICdoYW5kbGVBZGRUb0NhcnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVBZGRUb0NhcnQocHJvZHVjdCkge1xuICAgICAgdmFyIGRpc3BhdGNoID0gdGhpcy5wcm9wcy5kaXNwYXRjaDtcblxuICAgICAgZGlzcGF0Y2goYWN0aW9ucy5zdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0ocHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQsIDEpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHByb2R1Y3RzID0gdGhpcy5wcm9wcy5wcm9kdWN0cztcblxuICAgICAgcHJvZHVjdHMgPSBwcm9kdWN0cy5zbGljZSgwLCAxMik7XG5cbiAgICAgIC8vIHNsaWRlciBzZXR0aW5nc1xuICAgICAgdmFyIHNldHRpbmdzID0ge1xuICAgICAgICBjbGFzc05hbWU6ICdjZW50ZXIgcHJvZHVjdHMtY2Fyb3VzZWwnLFxuICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgY2VudGVyUGFkZGluZzogJzYwcHgnLFxuICAgICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxuICAgICAgICBzcGVlZDogNTAwLFxuICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICBsYXp5TG9hZDogdHJ1ZSxcbiAgICAgICAgcmVzcG9uc2l2ZTogW3tcbiAgICAgICAgICBicmVha3BvaW50OiAxMDI0LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMyxcbiAgICAgICAgICAgIGluZmluaXRlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgYnJlYWtwb2ludDogNjAwLFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMixcbiAgICAgICAgICAgIGluaXRpYWxTbGlkZTogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgIGJyZWFrcG9pbnQ6IDQ4MCxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH1dXG4gICAgICB9O1xuXG4gICAgICBpZiAocHJvZHVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9yZWFjdFNsaWNrMi5kZWZhdWx0LFxuICAgICAgICAgICAgc2V0dGluZ3MsXG4gICAgICAgICAgICBwcm9kdWN0cy5tYXAoZnVuY3Rpb24gKHByb2R1Y3QsIGluZGV4KSB7XG4gICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGtleTogaW5kZXgsIGNsYXNzTmFtZTogJ3Byb2R1Y3RzLWNhcm91c2VsLWl0ZW0nIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgICAgIHsgdG86ICcvcHJvZHVjdC8nICsgcHJvZHVjdC5hdHRycy5wcm9kdWN0X2lkIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdwcm9kdWN0LWl0ZW0taW1hZ2UnLCBzdHlsZTogeyBiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoJyArIHByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LmltYWdlVmFyaWFudHNbNV0uc3JjICsgJyknIH0gfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnc2VjdGlvbicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NlY3Rpb24tY2FsbG91dCcgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb250YWluZXInIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdoNCcsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzZWN0aW9uLWhlYWRsaW5lJyB9LFxuICAgICAgICAgICAgICAgICdTaG93IHlvdXIgcHJpZGUuIERpc3BsYXkgeW91ciB0YWxlbnRzLiAnLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmb250LXdoaXRlJyB9LFxuICAgICAgICAgICAgICAgICAgJ1JlcCB5b3VyIGNpdHkuJ1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIE51bGxhbSBzZW1wZXIgbnVsbGEgdmVsIGVsaXQgZ3JhdmlkYSwgdmVsIHBsYWNlcmF0IHR1cnBpcyBjb252YWxsaXMuIFByYWVzZW50IGV1IGxvcmVtIHN1c2NpcGl0LCBncmF2aWRhIGxlbyBzZWQsIGx1Y3R1cyBlcmF0LiBOdWxsYW0gY29uc2VjdGV0dXIsIHRvcnRvciBhIGZhY2lsaXNpcyBsb2JvcnRpcywgdmVsaXQgbWFzc2EgbWF0dGlzIHJpc3VzLCBlZ2V0IGltcGVyZGlldCB2ZWxpdCBhcmN1IG5vbiBtYXVyaXMuIE1hdXJpcyBiaWJlbmR1bSBiaWJlbmR1bSBsaWd1bGEsIG5lYyBtYXhpbXVzIHNhcGllbiBwb3J0YSBub24uJ1xuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NlY3Rpb24tY2FsbG91dF9fY3RhLWl0ZW1zJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyLkxpbmssXG4gICAgICAgICAgICAgICAgICB7IHRvOiAnL3Byb2R1Y3RzJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgc3JjOiAnL2ltYWdlcy9idXR0b24tc2hvcC5wbmcnLCBhbHQ6ICdTaG9wIG5vdycgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NlYXJjaC1ib3gnIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaScsIHsgY2xhc3NOYW1lOiAnZmEgZmEtc2VhcmNoJyB9KSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHllcDogJ3RleHQnLCBwbGFjZWhvbGRlcjogJ0tleXdvcmQgU2VhcmNoJyB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXIuTGluayxcbiAgICAgICAgICAgICAgICAgIHsgdG86ICcvdXBsb2FkJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgc3JjOiAnL2ltYWdlcy9idXR0b24tdXBsb2FkLnBuZycsIGFsdDogJ1Nob3Agbm93JyB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdoMycsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdHMtZ3JpZC10aXRsZScgfSxcbiAgICAgICAgICAgICAgJ1doYXRcXCdzIGhvdCAvIFdoYXRcXCdzIG5ldydcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdHMtZ3JpZCcgfSxcbiAgICAgICAgICAgICAgcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChwcm9kdWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Qcm9kdWN0SXRlbTIuZGVmYXVsdCwgeyBrZXk6IHByb2R1Y3Qua2V5LCBhZGRUb0NhcnQ6IGZ1bmN0aW9uIGFkZFRvQ2FydCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5oYW5kbGVBZGRUb0NhcnQocHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgICB9LCBpZDogcHJvZHVjdC5hdHRycy5wcm9kdWN0X2lkLCB0aXRsZTogcHJvZHVjdC5hdHRycy50aXRsZSwgaW1hZ2U6IHByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LmltYWdlVmFyaWFudHNbNV0uc3JjIH0pO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTG9hZGVyMi5kZWZhdWx0LCBudWxsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gSW5kZXg7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjb25uZWN0KGZ1bmN0aW9uIChzdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIHByb2R1Y3RzOiBzdGF0ZS5wcm9kdWN0cy5hbGxcbiAgfTtcbn0pKEluZGV4KTtcblxuLyoqKi8gfSksXG4vKiAxNTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX0hlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTU3KTtcblxudmFyIF9IZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSGVhZGVyKTtcblxudmFyIF9Gb290ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nik7XG5cbnZhciBfRm9vdGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Zvb3Rlcik7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvY3VtZW50TWV0YSk7XG5cbnZhciBfY2FydCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYyKTtcblxudmFyIF9jYXJ0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NhcnQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBNYWluID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKE1haW4sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIE1haW4ocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFpbik7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWFpbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1haW4pKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHRpdGxlOiAnJyxcbiAgICAgIGNvbnRlbnQ6ICcnXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTWFpbiwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgbWV0YSA9IHtcbiAgICAgICAgdGl0bGU6ICdSZXAgWW91ciBDaXR5JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdSZXAgWW91ciBDaXR5IGRlc2NyaXB0aW9uJyxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIGNoYXJzZXQ6ICd1dGYtOCdcbiAgICAgICAgfSxcbiAgICAgICAgYXV0bzoge1xuICAgICAgICAgIG9ncmFwaDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgcGFnZU5hbWUgPSB0aGlzLnByb3BzLmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cigxKS5zcGxpdCgnLycpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGlkOiAnbWFpbicsIGNsYXNzTmFtZTogJ3BhZ2UtJyArIChwYWdlTmFtZVswXSA/IHBhZ2VOYW1lWzBdICsgJyBzdWJwYWdlJyA6ICdob21lJykgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0RG9jdW1lbnRNZXRhMi5kZWZhdWx0LCBtZXRhKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0hlYWRlcjIuZGVmYXVsdCwgbnVsbCksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgaWQ6ICdtYWluLWNvbnRhaW5lcicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2FydDIuZGVmYXVsdCwgbnVsbCksXG4gICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRm9vdGVyMi5kZWZhdWx0LCBudWxsKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTWFpbjtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gTWFpbjtcblxuLyoqKi8gfSksXG4vKiAxNjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX0xvYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXG52YXIgX0xvYWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Mb2FkZXIpO1xuXG52YXIgX1Byb2R1Y3RJdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSk7XG5cbnZhciBfUHJvZHVjdEl0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJvZHVjdEl0ZW0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCksXG4gICAgY29ubmVjdCA9IF9yZXF1aXJlLmNvbm5lY3Q7XG5cbnZhciBhY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBQcm9kdWN0cyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhQcm9kdWN0cywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUHJvZHVjdHMoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2R1Y3RzKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvZHVjdHMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm9kdWN0cykpLmNhbGwodGhpcykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb2R1Y3RzLCBbe1xuICAgIGtleTogJ2hhbmRsZUFkZFRvQ2FydCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUFkZFRvQ2FydChwcm9kdWN0KSB7XG4gICAgICB2YXIgZGlzcGF0Y2ggPSB0aGlzLnByb3BzLmRpc3BhdGNoO1xuXG4gICAgICBkaXNwYXRjaChhY3Rpb25zLnN0YXJ0QWRkb3JVcGRhdGVDYXJ0SXRlbShwcm9kdWN0LnNlbGVjdGVkVmFyaWFudCwgMSkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgcHJvZHVjdHMgPSB0aGlzLnByb3BzLnByb2R1Y3RzO1xuXG5cbiAgICAgIGlmIChwcm9kdWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbnRhaW5lcicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc21hbGwtMTIgbWVkaXVtLTMgY29sdW1ucycgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ25hdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0cy1uYXYnIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnaDQnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0cy1uYXZfX2hlYWRsaW5lJyB9LFxuICAgICAgICAgICAgICAgICAgJ0NhdGVnb3JpZXMnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICd1bCcsXG4gICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICdDaXR5IC8gc3RhdGUnXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICdTcG9ydHMnXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICdIb2JiaWVzJ1xuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAnTXVzaWMnXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICdBbmltYWxzJ1xuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAnU2hvdyBhbGwnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdoNCcsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2R1Y3RzLW5hdl9faGVhZGxpbmUnIH0sXG4gICAgICAgICAgICAgICAgICAnU3R5bGUnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0cy1uYXZfX3NlYXJjaCcgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBwbGFjZWhvbGRlcjogJ1NlbGVjdCBzdHlsZScgfSksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ3N1Ym1pdCcsIGNsYXNzTmFtZTogJ3Byb2R1Y3RzLW5hdl9fc2VhcmNoLWJ1dHRvbicgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXNlYXJjaCcgfSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2g0JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdHMtbmF2X19oZWFkbGluZScgfSxcbiAgICAgICAgICAgICAgICAgICdTZWFyY2gnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9kdWN0cy1uYXZfX3NlYXJjaCcgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBwbGFjZWhvbGRlcjogJ0VudGVyIGtleXdvcmRzJyB9KSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnc3VibWl0JywgY2xhc3NOYW1lOiAncHJvZHVjdHMtbmF2X19zZWFyY2gtYnV0dG9uJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaScsIHsgY2xhc3NOYW1lOiAnZmEgZmEtc2VhcmNoJyB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzbWFsbC0xMiBtZWRpdW0tOSBjb2x1bW4nIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZHVjdHMtZ3JpZCcgfSxcbiAgICAgICAgICAgICAgICBwcm9kdWN0cy5tYXAoZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfUHJvZHVjdEl0ZW0yLmRlZmF1bHQsIHsga2V5OiBwcm9kdWN0LmtleSwgYWRkVG9DYXJ0OiBmdW5jdGlvbiBhZGRUb0NhcnQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5oYW5kbGVBZGRUb0NhcnQocHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGlkOiBwcm9kdWN0LmF0dHJzLnByb2R1Y3RfaWQsIHRpdGxlOiBwcm9kdWN0LmF0dHJzLnRpdGxlLCBpbWFnZTogcHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQuaW1hZ2VWYXJpYW50c1s0XS5zcmMgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTG9hZGVyMi5kZWZhdWx0LCBudWxsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvZHVjdHM7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjb25uZWN0KGZ1bmN0aW9uIChzdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIHByb2R1Y3RzOiBzdGF0ZS5wcm9kdWN0cy5hbGxcbiAgfTtcbn0pKFByb2R1Y3RzKTtcblxuLyoqKi8gfSksXG4vKiAxNjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0Um91dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSxcbiAgICBjb25uZWN0ID0gX3JlcXVpcmUuY29ubmVjdDtcblxudmFyIHByb2R1Y3RBY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG52YXIgY2FydEFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIFVwbG9hZCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhVcGxvYWQsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFVwbG9hZCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXBsb2FkKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVXBsb2FkLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVXBsb2FkKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVXBsb2FkLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBkaXNwYXRjaCA9IHRoaXMucHJvcHMuZGlzcGF0Y2g7XG5cblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdjb250YWluZXIgdGV4dC1jZW50ZXInIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHNyYzogJy9pbWFnZXMvdXBsb2FkLXBsYWNlaG9sZGVyLnBuZycgfSlcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFVwbG9hZDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNvbm5lY3QoZnVuY3Rpb24gKHN0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgYWN0aXZlUHJvZHVjdDogc3RhdGUucHJvZHVjdHMuYWN0aXZlXG4gIH07XG59KShVcGxvYWQpO1xuXG4vKioqLyB9KSxcbi8qIDE2MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfc2hvcGlmeUFQSSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX3Nob3BpZnlBUEkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2hvcGlmeUFQSSk7XG5cbnZhciBfQ2FydEl0ZW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7XG5cbnZhciBfQ2FydEl0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2FydEl0ZW0pO1xuXG52YXIgX2Zvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXG52YXIgX2Zvcm1hdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mb3JtYXQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCksXG4gICAgY29ubmVjdCA9IF9yZXF1aXJlLmNvbm5lY3Q7XG5cbnZhciBhY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBDYXJ0ID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKENhcnQsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENhcnQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhcnQpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENhcnQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDYXJ0KSkuY2FsbCh0aGlzKSk7XG5cbiAgICB2YXIgZGlzcGF0Y2ggPSB2b2lkIDA7XG4gICAgdmFyIGhhbmRsZUNoZWNrb3V0ID0gX3RoaXMuaGFuZGxlQ2hlY2tvdXQoKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ2FydCwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoID0gdGhpcy5wcm9wcy5kaXNwYXRjaDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdoYW5kbGVDbG9zZUNhcnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZUNhcnQoKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoKGFjdGlvbnMuY2xvc2VDYXJ0KCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2hhbmRsZUNoZWNrb3V0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2hlY2tvdXQoKSB7XG4gICAgICB3aW5kb3cub3Blbihfc2hvcGlmeUFQSTIuZGVmYXVsdC5jYXJ0LmNoZWNrb3V0VXJsLCAnX3NlbGYnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzJGNhcnQgPSB0aGlzLnByb3BzLmNhcnQsXG4gICAgICAgICAgaXNPcGVuID0gX3Byb3BzJGNhcnQuaXNPcGVuLFxuICAgICAgICAgIGxpbmVJdGVtcyA9IF9wcm9wcyRjYXJ0LmxpbmVJdGVtcyxcbiAgICAgICAgICBsaW5lSXRlbUNvdW50ID0gX3Byb3BzJGNhcnQubGluZUl0ZW1Db3VudCxcbiAgICAgICAgICBzdWJ0b3RhbCA9IF9wcm9wcyRjYXJ0LnN1YnRvdGFsO1xuXG4gICAgICB2YXIgcmVuZGVyTGluZUl0ZW1zID0gZnVuY3Rpb24gcmVuZGVyTGluZUl0ZW1zKCkge1xuICAgICAgICBpZiAobGluZUl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXR1cm4gbGluZUl0ZW1zLm1hcChmdW5jdGlvbiAobGluZUl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQ2FydEl0ZW0yLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAga2V5OiBsaW5lSXRlbS5pZCxcbiAgICAgICAgICAgICAgaXRlbTogbGluZUl0ZW0sXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBsaW5lSXRlbS5xdWFudGl0eVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBcImNhcnQgXCIgKyAoaXNPcGVuID8gJ2pzLWFjdGl2ZScgOiAnJykgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LXNlY3Rpb24gY2FydC1zZWN0aW9uLS10b3AnIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDInLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LXRpdGxlJyB9LFxuICAgICAgICAgICAgJ1lvdXIgY2FydDogJyxcbiAgICAgICAgICAgIGlzT3BlblxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnYnRuLS1jbG9zZScgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsb3NlQ2FydC5iaW5kKHRoaXMpIH0sXG4gICAgICAgICAgICAgICdcXHhENydcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2hpZGUnIH0sXG4gICAgICAgICAgICAgICdDbG9zZSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1mb3JtJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtaXRlbS1jb250YWluZXIgY2FydC1zZWN0aW9uJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICByZW5kZXJMaW5lSXRlbXMoKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1ib3R0b20nIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1pbmZvIGNsZWFyZml4IGNhcnQtc2VjdGlvbicgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd0eXBlLS1jYXBzIGNhcnQtaW5mb19fdG90YWwgY2FydC1pbmZvX19zbWFsbCcgfSxcbiAgICAgICAgICAgICAgICAnVG90YWwnXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1pbmZvX19wcmljaW5nJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXJ0LWluZm9fX3NtYWxsIGNhcnQtaW5mb19fdG90YWwnIH0sXG4gICAgICAgICAgICAgICAgICAnVVNEJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3ByaWNpbmcgcHJpY2luZy0tbm8tcGFkZGluZycgfSxcbiAgICAgICAgICAgICAgICAgIF9mb3JtYXQyLmRlZmF1bHQuYXNNb25leShzdWJ0b3RhbClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FydC1hY3Rpb25zLWNvbnRhaW5lciBjYXJ0LXNlY3Rpb24gdHlwZS0tY2VudGVyJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcnQtZGlzY291bnQtbm90aWNlIGNhcnQtaW5mb19fc21hbGwnIH0sXG4gICAgICAgICAgICAgICAgJ1NoaXBwaW5nIGFuZCBkaXNjb3VudCBjb2RlcyBhcmUgYWRkZWQgYXQgY2hlY2tvdXQuJ1xuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3N1Ym1pdCcsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuIGJ0bi0tY2FydC1jaGVja291dCcsXG4gICAgICAgICAgICAgICAgaWQ6ICdjaGVja291dCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogJ0NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNoZWNrb3V0XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDYXJ0O1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBjYXJ0OiBzdGF0ZS5jYXJ0XG4gIH07XG59KShDYXJ0KTtcblxuLyoqKi8gfSksXG4vKiAxNjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9jdW1lbnRNZXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb2N1bWVudE1ldGEpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBBYm91dCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhBYm91dCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQWJvdXQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFib3V0KTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQWJvdXQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihBYm91dCkpLmNhbGwodGhpcykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEFib3V0LCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2gxJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAnQWJvdXQgdXMnXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBBYm91dDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gQWJvdXQ7XG5cbi8qKiovIH0pLFxuLyogMTY0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgX3JlYWN0RG9jdW1lbnRNZXRhMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9jdW1lbnRNZXRhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQ29udGFjdCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDb250YWN0LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDb250YWN0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250YWN0KTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29udGFjdC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbnRhY3QpKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDb250YWN0LCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29udGFpbmVyJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2gxJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAnQ29udGFjdCdcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENvbnRhY3Q7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRhY3Q7XG5cbi8qKiovIH0pLFxuLyogMTY1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgX3JlYWN0RG9jdW1lbnRNZXRhMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9jdW1lbnRNZXRhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgTG9naW4gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTG9naW4sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIExvZ2luKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2dpbik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExvZ2luLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTG9naW4pKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhMb2dpbiwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdzZWN0aW9uJyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdzZWN0aW9uJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbnRhaW5lcicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgJ0xvZ2luJ1xuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZm9ybScsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHBsYWNlaG9sZGVyOiAnRW1haWwnIH0pLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyB0eXBlOiAncGFzc3dvcmQnLCBwbGFjZWhvbGRlcjogJ1Bhc3N3b3JkJyB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3N1Ym1pdCcsIGNsYXNzTmFtZTogJ2J1dHRvbicsIHZhbHVlOiAnTG9naW4nIH0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBMb2dpbjtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gTG9naW47XG5cbi8qKiovIH0pLFxuLyogMTY2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgX3JlYWN0RG9jdW1lbnRNZXRhMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9jdW1lbnRNZXRhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgTWFwID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKE1hcCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTWFwKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNYXApO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNYXAuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXApKS5jYWxsKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhNYXAsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnc2VjdGlvbicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnc2VjdGlvbicgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjb250YWluZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICdNYXAgcGFnZSdcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE1hcDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gTWFwO1xuXG4vKioqLyB9KSxcbi8qIDE2NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb2N1bWVudE1ldGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9yZWFjdERvY3VtZW50TWV0YTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvY3VtZW50TWV0YSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIE9yZGVyU3RhdHVzID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKE9yZGVyU3RhdHVzLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBPcmRlclN0YXR1cygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT3JkZXJTdGF0dXMpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChPcmRlclN0YXR1cy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE9yZGVyU3RhdHVzKSkuY2FsbCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoT3JkZXJTdGF0dXMsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnc2VjdGlvbicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnc2VjdGlvbicgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjb250YWluZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICdPcmRlciBTdGF0dXMgcGFnZSdcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE9yZGVyU3RhdHVzO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBPcmRlclN0YXR1cztcblxuLyoqKi8gfSksXG4vKiAxNjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIHByb2R1Y3RzUmVkdWNlciA9IGV4cG9ydHMucHJvZHVjdHNSZWR1Y2VyID0gZnVuY3Rpb24gcHJvZHVjdHNSZWR1Y2VyKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHsgYWxsOiBbXSwgYWN0aXZlOiBudWxsIH07XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ0FERF9QUk9EVUNUUyc6XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0YXRlLCB7XG4gICAgICAgIGFsbDogYWN0aW9uLnByb2R1Y3RzXG4gICAgICB9KTtcbiAgICBjYXNlICdTRVRfQUNUSVZFX1BST0RVQ1QnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBhY3RpdmU6IF9leHRlbmRzKHt9LCBzdGF0ZS5hY3RpdmUsIHtcbiAgICAgICAgICBmZXRjaGVkOiB0cnVlLFxuICAgICAgICAgIG9wdGlvbnM6IGFjdGlvbi5vcHRpb25zXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICBjYXNlICdDTEVBUl9BQ1RJVkVfUFJPRFVDVCc6XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0YXRlLCB7XG4gICAgICAgIGFjdGl2ZTogbnVsbFxuICAgICAgfSk7XG4gICAgY2FzZSAnVVBEQVRFX0FDVElWRV9QUk9EVUNUX09QVElPTlMnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBhY3RpdmU6IF9leHRlbmRzKHt9LCBzdGF0ZS5hY3RpdmUsIHtcbiAgICAgICAgICBvcHRpb25zOiBhY3Rpb24ub3B0aW9uc1xuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxudmFyIGNvbGxlY3Rpb25zUmVkdWNlciA9IGV4cG9ydHMuY29sbGVjdGlvbnNSZWR1Y2VyID0gZnVuY3Rpb24gY29sbGVjdGlvbnNSZWR1Y2VyKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHsgYWxsOiBbXSwgYWN0aXZlOiBudWxsIH07XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ0FERF9DT0xMRUNUSU9OUyc6XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0YXRlLCB7XG4gICAgICAgIGFsbDogYWN0aW9uLmNvbGxlY3Rpb25zXG4gICAgICB9KTtcbiAgICBjYXNlICdTRVRfQUNUSVZFX0NPTExFQ1RJT04nOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBhY3RpdmU6IGFjdGlvbi5wYXJzZWRDb2xsZWN0aW9uXG4gICAgICB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59O1xuXG52YXIgY2FydFJlZHVjZXIgPSBleHBvcnRzLmNhcnRSZWR1Y2VyID0gZnVuY3Rpb24gY2FydFJlZHVjZXIoKSB7XG4gIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogeyBpc09wZW46IGZhbHNlLCBsaW5lSXRlbXM6IFtdIH07XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIC8vIGNhc2UgJ1JFU1RPUkVfUFJFVklPVVNfQ0FSVCc6XG4gICAgLy8gICByZXR1cm4gYWN0aW9uLnJlbW90ZUNhcnQ7XG4gICAgY2FzZSAnU0VUX0lOSVRJQUxfQ0FSVF9TVEFURSc6XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIGFjdGlvbi5sb2NhbENhcnQpO1xuICAgIGNhc2UgJ1VQREFURV9DQVJUX0lURU1TJzpcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgbGluZUl0ZW1zOiBhY3Rpb24udXBkYXRlZENhcnRJdGVtc1xuICAgICAgfSk7XG4gICAgY2FzZSAnVVBEQVRFX0NBUlRfSVRFTVNfQ09VTlQnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBsaW5lSXRlbXNDb3VudDogYWN0aW9uLnVwZGF0ZWRDYXJ0SXRlbXNDb3VudFxuICAgICAgfSk7XG4gICAgY2FzZSAnVVBEQVRFX0NBUlRfU1VCVE9UQUwnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBzdWJ0b3RhbDogYWN0aW9uLm5ld1N1YnRvdGFsXG4gICAgICB9KTtcbiAgICBjYXNlICdPUEVOX0NBUlQnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBpc09wZW46IHRydWVcbiAgICAgIH0pO1xuICAgIGNhc2UgJ0NMT1NFX0NBUlQnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59O1xuXG52YXIgbmF2UmVkdWNlciA9IGV4cG9ydHMubmF2UmVkdWNlciA9IGZ1bmN0aW9uIG5hdlJlZHVjZXIoKSB7XG4gIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogeyBzaG93Q2xvc2U6IGZhbHNlLCBzaG93TmF2OiBmYWxzZSB9O1xuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzWzFdO1xuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdUT0dHTEVfTkFWX0lDT04nOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBzaG93Q2xvc2U6ICFzdGF0ZS5zaG93Q2xvc2UsXG4gICAgICAgIHNob3dOYXY6IHN0YXRlLnNob3dOYXZcbiAgICAgIH0pO1xuICAgIGNhc2UgJ1RPR0dMRV9OQVYnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBzaG93Q2xvc2U6ICFzdGF0ZS5zaG93Q2xvc2UsXG4gICAgICAgIHNob3dOYXY6ICFzdGF0ZS5zaG93TmF2XG4gICAgICB9KTtcbiAgICBjYXNlICdDTE9TRV9OQVYnOlxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICBzaG93Q2xvc2U6IGZhbHNlLFxuICAgICAgICBzaG93TmF2OiBmYWxzZVxuICAgICAgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiAxNjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5XG5leHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5XG5cbnZhciBsb29rdXAgPSBbXVxudmFyIHJldkxvb2t1cCA9IFtdXG52YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5XG5cbnZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nXG5mb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICBsb29rdXBbaV0gPSBjb2RlW2ldXG4gIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaVxufVxuXG5yZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjJcbnJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2M1xuXG5mdW5jdGlvbiBwbGFjZUhvbGRlcnNDb3VudCAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG4gIGlmIChsZW4gJSA0ID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG4gIH1cblxuICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuICAvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG4gIC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcbiAgLy8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuICByZXR1cm4gYjY0W2xlbiAtIDJdID09PSAnPScgPyAyIDogYjY0W2xlbiAtIDFdID09PSAnPScgPyAxIDogMFxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChiNjQpIHtcbiAgLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG4gIHJldHVybiBiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnNDb3VudChiNjQpXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcbiAgcGxhY2VIb2xkZXJzID0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxuXG4gIGFyciA9IG5ldyBBcnIobGVuICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpXG5cbiAgLy8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuICBsID0gcGxhY2VIb2xkZXJzID4gMCA/IGxlbiAtIDQgOiBsZW5cblxuICB2YXIgTCA9IDBcblxuICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDE2KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArIGxvb2t1cFtudW0gJiAweDNGXVxufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHRtcFxuICB2YXIgb3V0cHV0ID0gW11cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pXG4gICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpXG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW4gPSB1aW50OC5sZW5ndGhcbiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG4gIHZhciBvdXRwdXQgPSAnJ1xuICB2YXIgcGFydHMgPSBbXVxuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMl1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXVxuICAgIG91dHB1dCArPSAnPT0nXG4gIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikge1xuICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArICh1aW50OFtsZW4gLSAxXSlcbiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9ICc9J1xuICB9XG5cbiAgcGFydHMucHVzaChvdXRwdXQpXG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG5cblxuLyoqKi8gfSksXG4vKiAxNzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7LyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuXG5cbnZhciBiYXNlNjQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSlcbnZhciBpZWVlNzU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTQpXG52YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcxKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5cbi8qKlxuICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcbiAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpXG4gKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG4gKlxuICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLFxuICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuICpcbiAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW5cbiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuICpcbiAqIE5vdGU6XG4gKlxuICogICAtIEZpcmVmb3ggNC0yOSBsYWNrcyBzdXBwb3J0IGZvciBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcyxcbiAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cbiAqXG4gKiAgIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cbiAqXG4gKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuICogICAgIGluY29ycmVjdCBsZW5ndGggaW4gc29tZSBzaXR1YXRpb25zLlxuXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgYmVoYXZlcyBjb3JyZWN0bHkuXG4gKi9cbkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuICA/IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gIDogdHlwZWRBcnJheVN1cHBvcnQoKVxuXG4vKlxuICogRXhwb3J0IGtNYXhMZW5ndGggYWZ0ZXIgdHlwZWQgYXJyYXkgc3VwcG9ydCBpcyBkZXRlcm1pbmVkLlxuICovXG5leHBvcnRzLmtNYXhMZW5ndGggPSBrTWF4TGVuZ3RoKClcblxuZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuICB0cnkge1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fVxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gICAgPyAweDdmZmZmZmZmXG4gICAgOiAweDNmZmZmZmZmXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7XG4gIGlmIChrTWF4TGVuZ3RoKCkgPCBsZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKVxuICB9XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIGlmICh0aGF0ID09PSBudWxsKSB7XG4gICAgICB0aGF0ID0gbmV3IEJ1ZmZlcihsZW5ndGgpXG4gICAgfVxuICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgaGF2ZSB0aGVpclxuICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZlxuICogYFVpbnQ4QXJyYXlgLCBzbyB0aGUgcmV0dXJuZWQgaW5zdGFuY2VzIHdpbGwgaGF2ZSBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgbWV0aG9kc1xuICogYW5kIHRoZSBgVWludDhBcnJheWAgbWV0aG9kcy4gU3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXRcbiAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuXG4gKlxuICogVGhlIGBVaW50OEFycmF5YCBwcm90b3R5cGUgcmVtYWlucyB1bm1vZGlmaWVkLlxuICovXG5cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBhbGxvY1Vuc2FmZSh0aGlzLCBhcmcpXG4gIH1cbiAgcmV0dXJuIGZyb20odGhpcywgYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG4vLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcbiAgfVxuXG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KVxuICB9XG5cbiAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpXG59XG5cbi8qKlxuICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3JcbiAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKVxuICogQnVmZmVyLmZyb20oYXJyYXkpXG4gKiBCdWZmZXIuZnJvbShidWZmZXIpXG4gKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSlcbiAqKi9cbkJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGZyb20obnVsbCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbiAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmXG4gICAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHtcbiAgICAvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKVxuICB9XG59XG5cbmZ1bmN0aW9uIGFsbG9jICh0aGF0LCBzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIGlmIChzaXplIDw9IDApIHtcbiAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG4gIH1cbiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIE9ubHkgcGF5IGF0dGVudGlvbiB0byBlbmNvZGluZyBpZiBpdCdzIGEgc3RyaW5nLiBUaGlzXG4gICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZFxuICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC5cbiAgICByZXR1cm4gdHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJ1xuICAgICAgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZylcbiAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbClcbiAgfVxuICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogYWxsb2Moc2l6ZVssIGZpbGxbLCBlbmNvZGluZ11dKVxuICoqL1xuQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIHJldHVybiBhbGxvYyhudWxsLCBzaXplLCBmaWxsLCBlbmNvZGluZylcbn1cblxuZnVuY3Rpb24gYWxsb2NVbnNhZmUgKHRoYXQsIHNpemUpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpIHtcbiAgICAgIHRoYXRbaV0gPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogRXF1aXZhbGVudCB0byBCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqICovXG5CdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcbn1cbi8qKlxuICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICB9XG5cbiAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImVuY29kaW5nXCIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpXG4gIH1cblxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG5cbiAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblxuICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHtcbiAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGxcbiAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLlxuICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKVxuICAgIHRoYXQgPSB0aGF0LnNsaWNlKDAsIGFjdHVhbClcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGggPCAwID8gMCA6IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgYXJyYXkuYnl0ZUxlbmd0aCAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyXG5cbiAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ29mZnNldFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KVxuICB9IGVsc2Uge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBhcnJheVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0ID0gZnJvbUFycmF5TGlrZSh0aGF0LCBhcnJheSlcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG4gICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG4gICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW4pXG5cbiAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGF0XG4gICAgfVxuXG4gICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKVxuICAgIHJldHVybiB0aGF0XG4gIH1cblxuICBpZiAob2JqKSB7XG4gICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IGlzbmFuKG9iai5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMClcbiAgICAgIH1cbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iailcbiAgICB9XG5cbiAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqLmRhdGEpKSB7XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmouZGF0YSlcbiAgICB9XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuJylcbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGgoKWAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkge1xuICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcbiAgICBsZW5ndGggPSAwXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV1cbiAgICAgIHkgPSBiW2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdsYXRpbjEnOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gIH1cblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApXG4gIH1cblxuICB2YXIgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgIHZhciBidWYgPSBsaXN0W2ldXG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgICB9XG4gICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpXG4gICAgcG9zICs9IGJ1Zi5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmZmVyXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgc3RyaW5nIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5ieXRlTGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgc3RyaW5nID0gJycgKyBzdHJpbmdcbiAgfVxuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXG4gIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG4gIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG4gIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICAvLyBSZXR1cm4gZWFybHkgaWYgc3RhcnQgPiB0aGlzLmxlbmd0aC4gRG9uZSBoZXJlIHRvIHByZXZlbnQgcG90ZW50aWFsIHVpbnQzMlxuICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChlbmQgPD0gMCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLy8gRm9yY2UgY29lcnNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC5cbiAgZW5kID4+Pj0gMFxuICBzdGFydCA+Pj49IDBcblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuLy8gVGhlIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgYW5kIGBpcy1idWZmZXJgIChpbiBTYWZhcmkgNS03KSB0byBkZXRlY3Rcbi8vIEJ1ZmZlciBpbnN0YW5jZXMuXG5CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWVcblxuZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuICB2YXIgaSA9IGJbbl1cbiAgYltuXSA9IGJbbV1cbiAgYlttXSA9IGlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDIgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAxKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA0ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgOCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gOCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDcpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpXG4gICAgc3dhcCh0aGlzLCBpICsgMiwgaSArIDUpXG4gICAgc3dhcCh0aGlzLCBpICsgMywgaSArIDQpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgfVxuXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzU3RhcnQgPSAwXG4gIH1cbiAgaWYgKHRoaXNFbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHtcbiAgICByZXR1cm4gLTFcbiAgfVxuICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIHN0YXJ0ID4+Pj0gMFxuICBlbmQgPj4+PSAwXG4gIHRoaXNTdGFydCA+Pj49IDBcbiAgdGhpc0VuZCA+Pj49IDBcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0KSByZXR1cm4gMFxuXG4gIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydFxuICB2YXIgeSA9IGVuZCAtIHN0YXJ0XG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuXG4gIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxuICB2YXIgdGFyZ2V0Q29weSA9IHRhcmdldC5zbGljZShzdGFydCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAodGhpc0NvcHlbaV0gIT09IHRhcmdldENvcHlbaV0pIHtcbiAgICAgIHggPSB0aGlzQ29weVtpXVxuICAgICAgeSA9IHRhcmdldENvcHlbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG4vLyBGaW5kcyBlaXRoZXIgdGhlIGZpcnN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA+PSBgYnl0ZU9mZnNldGAsXG4vLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuLy9cbi8vIEFyZ3VtZW50czpcbi8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG4vLyAtIHZhbCAtIGEgc3RyaW5nLCBCdWZmZXIsIG9yIG51bWJlclxuLy8gLSBieXRlT2Zmc2V0IC0gYW4gaW5kZXggaW50byBgYnVmZmVyYDsgd2lsbCBiZSBjbGFtcGVkIHRvIGFuIGludDMyXG4vLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuLy8gLSBkaXIgLSB0cnVlIGZvciBpbmRleE9mLCBmYWxzZSBmb3IgbGFzdEluZGV4T2ZcbmZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mIChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcbiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG4gIGlmICh0eXBlb2YgYnl0ZU9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IGJ5dGVPZmZzZXRcbiAgICBieXRlT2Zmc2V0ID0gMFxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7XG4gICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcbiAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgfVxuICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgIC8vIENvZXJjZSB0byBOdW1iZXIuXG4gIGlmIChpc05hTihieXRlT2Zmc2V0KSkge1xuICAgIC8vIGJ5dGVPZmZzZXQ6IGl0IGl0J3MgdW5kZWZpbmVkLCBudWxsLCBOYU4sIFwiZm9vXCIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlclxuICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXRcbiAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkge1xuICAgIGlmIChkaXIpIHJldHVybiAtMVxuICAgIGVsc2UgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggLSAxXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IDApIHtcbiAgICBpZiAoZGlyKSBieXRlT2Zmc2V0ID0gMFxuICAgIGVsc2UgcmV0dXJuIC0xXG4gIH1cblxuICAvLyBOb3JtYWxpemUgdmFsXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXG4gIH1cblxuICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZlxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcbiAgICAvLyBTcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZy9idWZmZXIgYWx3YXlzIGZhaWxzXG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMHhGRiAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXG4gICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoZGlyKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG5mdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIHZhciBpbmRleFNpemUgPSAxXG4gIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoXG4gIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoXG5cbiAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XG4gICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHtcbiAgICAgIGlmIChhcnIubGVuZ3RoIDwgMiB8fCB2YWwubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gLTFcbiAgICAgIH1cbiAgICAgIGluZGV4U2l6ZSA9IDJcbiAgICAgIGFyckxlbmd0aCAvPSAyXG4gICAgICB2YWxMZW5ndGggLz0gMlxuICAgICAgYnl0ZU9mZnNldCAvPSAyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZCAoYnVmLCBpKSB7XG4gICAgaWYgKGluZGV4U2l6ZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIGJ1ZltpXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpICogaW5kZXhTaXplKVxuICAgIH1cbiAgfVxuXG4gIHZhciBpXG4gIGlmIChkaXIpIHtcbiAgICB2YXIgZm91bmRJbmRleCA9IC0xXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aFxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgZm91bmQgPSB0cnVlXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIHRoaXMuaW5kZXhPZih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSAhPT0gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSlcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG4gIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG4gICAgKVxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKVxuICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgKytpKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZlxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IDBcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuICB2YXIgaVxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuICAgICAgdGFyZ2V0LFxuICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLFxuICAgICAgdGFyZ2V0U3RhcnRcbiAgICApXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIFVzYWdlOlxuLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydFxuICAgICAgc3RhcnQgPSAwXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH1cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdmFyIGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKVxuICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcbiAgICAgICAgdmFsID0gY29kZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nJylcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDI1NVxuICB9XG5cbiAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuXG4gIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzdGFydCA9IHN0YXJ0ID4+PiAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblxuICBpZiAoIXZhbCkgdmFsID0gMFxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICAgIHRoaXNbaV0gPSB2YWxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbClcbiAgICAgID8gdmFsXG4gICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSlcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG4gICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcbiAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gaXNuYW4gKHZhbCkge1xuICByZXR1cm4gdmFsICE9PSB2YWwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmVcbn1cblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNDYpKSlcblxuLyoqKi8gfSksXG4vKiAxNzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cblxuLyoqKi8gfSksXG4vKiAxNzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudmFyIGNhblVzZURPTSA9ICEhKFxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICB3aW5kb3cuZG9jdW1lbnQgJiZcbiAgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnRcbik7XG5cbm1vZHVsZS5leHBvcnRzID0gY2FuVXNlRE9NO1xuXG4vKioqLyB9KSxcbi8qIDE3MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgcmV0dXJuIG5ldyBFbGVtZW50Q2xhc3Mob3B0cylcbn1cblxuZnVuY3Rpb24gaW5kZXhPZihhcnIsIHByb3ApIHtcbiAgaWYgKGFyci5pbmRleE9mKSByZXR1cm4gYXJyLmluZGV4T2YocHJvcClcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKylcbiAgICBpZiAoYXJyW2ldID09PSBwcm9wKSByZXR1cm4gaVxuICByZXR1cm4gLTFcbn1cblxuZnVuY3Rpb24gRWxlbWVudENsYXNzKG9wdHMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEVsZW1lbnRDbGFzcykpIHJldHVybiBuZXcgRWxlbWVudENsYXNzKG9wdHMpXG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoIW9wdHMpIG9wdHMgPSB7fVxuXG4gIC8vIHNpbWlsYXIgZG9pbmcgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCBidXQgd29ya3MgaW4gSUU4XG4gIGlmIChvcHRzLm5vZGVUeXBlKSBvcHRzID0ge2VsOiBvcHRzfVxuXG4gIHRoaXMub3B0cyA9IG9wdHNcbiAgdGhpcy5lbCA9IG9wdHMuZWwgfHwgZG9jdW1lbnQuYm9keVxuICBpZiAodHlwZW9mIHRoaXMuZWwgIT09ICdvYmplY3QnKSB0aGlzLmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmVsKVxufVxuXG5FbGVtZW50Q2xhc3MucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICB2YXIgZWwgPSB0aGlzLmVsXG4gIGlmICghZWwpIHJldHVyblxuICBpZiAoZWwuY2xhc3NOYW1lID09PSBcIlwiKSByZXR1cm4gZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lXG4gIHZhciBjbGFzc2VzID0gZWwuY2xhc3NOYW1lLnNwbGl0KCcgJylcbiAgaWYgKGluZGV4T2YoY2xhc3NlcywgY2xhc3NOYW1lKSA+IC0xKSByZXR1cm4gY2xhc3Nlc1xuICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKVxuICBlbC5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oJyAnKVxuICByZXR1cm4gY2xhc3Nlc1xufVxuXG5FbGVtZW50Q2xhc3MucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICB2YXIgZWwgPSB0aGlzLmVsXG4gIGlmICghZWwpIHJldHVyblxuICBpZiAoZWwuY2xhc3NOYW1lID09PSBcIlwiKSByZXR1cm5cbiAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoJyAnKVxuICB2YXIgaWR4ID0gaW5kZXhPZihjbGFzc2VzLCBjbGFzc05hbWUpXG4gIGlmIChpZHggPiAtMSkgY2xhc3Nlcy5zcGxpY2UoaWR4LCAxKVxuICBlbC5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oJyAnKVxuICByZXR1cm4gY2xhc3Nlc1xufVxuXG5FbGVtZW50Q2xhc3MucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICB2YXIgZWwgPSB0aGlzLmVsXG4gIGlmICghZWwpIHJldHVyblxuICB2YXIgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZS5zcGxpdCgnICcpXG4gIHJldHVybiBpbmRleE9mKGNsYXNzZXMsIGNsYXNzTmFtZSkgPiAtMVxufVxuXG5FbGVtZW50Q2xhc3MucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICB2YXIgZWwgPSB0aGlzLmVsXG4gIGlmICghZWwpIHJldHVyblxuICBpZiAodGhpcy5oYXMoY2xhc3NOYW1lKSkgdGhpcy5yZW1vdmUoY2xhc3NOYW1lKVxuICBlbHNlIHRoaXMuYWRkKGNsYXNzTmFtZSlcbn1cblxuXG4vKioqLyB9KSxcbi8qIDE3NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG50aHJvdyBuZXcgRXJyb3IoXCJNb2R1bGUgYnVpbGQgZmFpbGVkOiBFcnJvcjogRU5PRU5UOiBubyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5LCBvcGVuICcvVXNlcnMvanVsaWFuam9yZ2Vuc2VuL3NpdGVzL3JtYy9ub2RlX21vZHVsZXMvZW5xdWlyZS5qcy9kaXN0L2VucXVpcmUuanMnXCIpO1xuXG4vKioqLyB9KSxcbi8qIDE3NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohXG4gIENvcHlyaWdodCAoYykgMjAxNSBKZWQgV2F0c29uLlxuICBCYXNlZCBvbiBjb2RlIHRoYXQgaXMgQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgY2FuVXNlRE9NID0gISEoXG5cdFx0dHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0XHR3aW5kb3cuZG9jdW1lbnQgJiZcblx0XHR3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudFxuXHQpO1xuXG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHtcblxuXHRcdGNhblVzZURPTTogY2FuVXNlRE9NLFxuXG5cdFx0Y2FuVXNlV29ya2VyczogdHlwZW9mIFdvcmtlciAhPT0gJ3VuZGVmaW5lZCcsXG5cblx0XHRjYW5Vc2VFdmVudExpc3RlbmVyczpcblx0XHRcdGNhblVzZURPTSAmJiAhISh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCB3aW5kb3cuYXR0YWNoRXZlbnQpLFxuXG5cdFx0Y2FuVXNlVmlld3BvcnQ6IGNhblVzZURPTSAmJiAhIXdpbmRvdy5zY3JlZW5cblxuXHR9O1xuXG5cdGlmICh0cnVlKSB7XG5cdFx0IShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBFeGVjdXRpb25FbnZpcm9ubWVudDtcblx0XHR9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSxcblx0XHRcdFx0X19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudDtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuRXhlY3V0aW9uRW52aXJvbm1lbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudDtcblx0fVxuXG59KCkpO1xuXG5cbi8qKiovIH0pLFxuLyogMTc2ICovLFxuLyogMTc3ICovLFxuLyogMTc4ICovLFxuLyogMTc5ICovLFxuLyogMTgwICovLFxuLyogMTgxICovLFxuLyogMTgyICovLFxuLyogMTgzICovLFxuLyogMTg0ICovLFxuLyogMTg1ICovLFxuLyogMTg2ICovLFxuLyogMTg3ICovLFxuLyogMTg4ICovLFxuLyogMTg5ICovLFxuLyogMTkwICovLFxuLyogMTkxICovLFxuLyogMTkyICovLFxuLyogMTkzICovLFxuLyogMTk0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbmV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuXG5cbi8qKiovIH0pLFxuLyogMTk1ICovLFxuLyogMTk2ICovLFxuLyogMTk3ICovLFxuLyogMTk4ICovLFxuLyogMTk5ICovLFxuLyogMjAwICovLFxuLyogMjAxICovLFxuLyogMjAyICovLFxuLyogMjAzICovLFxuLyogMjA0ICovLFxuLyogMjA1ICovLFxuLyogMjA2ICovLFxuLyogMjA3ICovLFxuLyogMjA4ICovLFxuLyogMjA5ICovLFxuLyogMjEwICovLFxuLyogMjExICovLFxuLyogMjEyICovLFxuLyogMjEzICovLFxuLyogMjE0ICovLFxuLyogMjE1ICovLFxuLyogMjE2ICovLFxuLyogMjE3ICovLFxuLyogMjE4ICovLFxuLyogMjE5ICovLFxuLyogMjIwICovLFxuLyogMjIxICovLFxuLyogMjIyICovLFxuLyogMjIzICovLFxuLyogMjI0ICovLFxuLyogMjI1ICovLFxuLyogMjI2ICovLFxuLyogMjI3ICovLFxuLyogMjI4ICovLFxuLyogMjI5ICovLFxuLyogMjMwICovLFxuLyogMjMxICovLFxuLyogMjMyICovLFxuLyogMjMzICovLFxuLyogMjM0ICovLFxuLyogMjM1ICovLFxuLyogMjM2ICovLFxuLyogMjM3ICovLFxuLyogMjM4ICovLFxuLyogMjM5ICovLFxuLyogMjQwICovLFxuLyogMjQxICovLFxuLyogMjQyICovLFxuLyogMjQzICovLFxuLyogMjQ0ICovLFxuLyogMjQ1ICovLFxuLyogMjQ2ICovLFxuLyogMjQ3ICovLFxuLyogMjQ4ICovLFxuLyogMjQ5ICovLFxuLyogMjUwICovLFxuLyogMjUxICovLFxuLyogMjUyICovLFxuLyogMjUzICovLFxuLyogMjU0ICovLFxuLyogMjU1ICovLFxuLyogMjU2ICovLFxuLyogMjU3ICovLFxuLyogMjU4ICovLFxuLyogMjU5ICovLFxuLyogMjYwICovLFxuLyogMjYxICovLFxuLyogMjYyICovLFxuLyogMjYzICovLFxuLyogMjY0ICovLFxuLyogMjY1ICovLFxuLyogMjY2ICovLFxuLyogMjY3ICovLFxuLyogMjY4ICovLFxuLyogMjY5ICovLFxuLyogMjcwICovLFxuLyogMjcxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIE5FV1RBQiA9ICdfYmxhbmsnO1xuXG52YXIgT3V0Ym91bmRMaW5rID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ091dGJvdW5kTGluaycsXG4gIHByb3BUeXBlczoge1xuICAgIGV2ZW50TGFiZWw6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICB9LFxuICBzdGF0aWNzOiB7XG4gICAgdHJhY2tMaW5rOiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2dhIHRyYWNraW5nIG5vdCBlbmFibGVkJyk7XG4gICAgfVxuICB9LFxuICBoYW5kbGVDbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZXZlbnRNZXRhID0geyBsYWJlbDogcHJvcHMuZXZlbnRMYWJlbCB9O1xuICAgIE91dGJvdW5kTGluay50cmFja0xpbmsoZXZlbnRNZXRhLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocHJvcHMudGFyZ2V0ID09PSBORVdUQUIpIHtcbiAgICAgICAgd2luZG93Lm9wZW4ocHJvcHMudG8sIE5FV1RBQik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHByb3BzLnRvO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHByb3BzLm9uQ2xpY2spIHtcbiAgICAgIHByb3BzLm9uQ2xpY2soZSk7XG4gICAgfVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgdGhpcy5wcm9wcywge1xuICAgICAgaHJlZjogdGhpcy5wcm9wcy50byxcbiAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2tcbiAgICB9KTtcbiAgICBkZWxldGUgcHJvcHMuZXZlbnRMYWJlbDtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnYScsIHByb3BzKTtcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gT3V0Ym91bmRMaW5rO1xuXG5cbi8qKiovIH0pLFxuLyogMjcyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qKlxuICogUmVhY3QgR29vZ2xlIEFuYWx5dGljcyBNb2R1bGVcbiAqXG4gKiBAcGFja2FnZSByZWFjdC1nYVxuICogQGF1dGhvciAgQWRhbSBMb2Z0aW5nIDxhZGFtQG1vemlsbGFmb3VuZGF0aW9uLm9yZz5cbiAqICAgICAgICAgIEF0dWwgVmFybWEgPGF0dWxAbW96aWxsYWZvdW5kYXRpb24ub3JnPlxuICovXG5cbi8qKlxuICogVXRpbGl0aWVzXG4gKi9cbnZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3NCk7XG52YXIgcmVtb3ZlTGVhZGluZ1NsYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzYpO1xudmFyIHRyaW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNCk7XG5cbnZhciB3YXJuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpO1xudmFyIGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjczKTtcblxudmFyIF9kZWJ1ZyA9IGZhbHNlO1xudmFyIF90aXRsZUNhc2UgPSB0cnVlO1xuXG52YXIgX2Zvcm1hdCA9IGZ1bmN0aW9uIChzKSB7XG4gIHJldHVybiBmb3JtYXQocywgX3RpdGxlQ2FzZSk7XG59O1xuXG52YXIgUmVhY3RHQSA9IHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKGdhVHJhY2tpbmdJRCwgb3B0aW9ucykge1xuICAgIGlmICghZ2FUcmFja2luZ0lEKSB7XG4gICAgICB3YXJuKCdnYVRyYWNraW5nSUQgaXMgcmVxdWlyZWQgaW4gaW5pdGlhbGl6ZSgpJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zLmRlYnVnICYmIG9wdGlvbnMuZGVidWcgPT09IHRydWUpIHtcbiAgICAgICAgX2RlYnVnID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMudGl0bGVDYXNlID09PSBmYWxzZSkge1xuICAgICAgICBfdGl0bGVDYXNlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL1xuICAgIC8vIGpzY3M6ZGlzYWJsZVxuICAgIChmdW5jdGlvbiAoaSwgcywgbywgZywgciwgYSwgbSkge1xuICAgICAgaVsnR29vZ2xlQW5hbHl0aWNzT2JqZWN0J10gPSByO1xuICAgICAgaVtyXSA9IGlbcl0gfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICAoaVtyXS5xID0gaVtyXS5xIHx8IFtdKS5wdXNoKGFyZ3VtZW50cyk7XG4gICAgICB9LCBpW3JdLmwgPSAxICogbmV3IERhdGUoKTtcbiAgICAgIGEgPSBzLmNyZWF0ZUVsZW1lbnQobyksXG4gICAgICAgICAgbSA9IHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUobylbMF07XG4gICAgICBhLmFzeW5jID0gMTtcbiAgICAgIGEuc3JjID0gZztcbiAgICAgIG0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSwgbSk7XG4gICAgfSkod2luZG93LCBkb2N1bWVudCwgJ3NjcmlwdCcsICdodHRwczovL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9hbmFseXRpY3MuanMnLCAnZ2EnKTtcbiAgICAvLyBqc2NzOmVuYWJsZVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nYU9wdGlvbnMpIHtcbiAgICAgIGdhKCdjcmVhdGUnLCBnYVRyYWNraW5nSUQsIG9wdGlvbnMuZ2FPcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2EoJ2NyZWF0ZScsIGdhVHJhY2tpbmdJRCwgJ2F1dG8nKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIGdhOlxuICAgKiBSZXR1cm5zIHRoZSBvcmlnaW5hbCBHQSBvYmplY3QuXG4gICAqL1xuICBnYTogZnVuY3Rpb24gKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgZ2EuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnYXJndW1lbnRzXFwnKTsnKTtcbiAgICAgICAgbG9nKCd3aXRoIGFyZ3VtZW50czogJyArIEpTT04uc3RyaW5naWZ5KFtdLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiBnYTtcbiAgfSxcblxuICAvKipcbiAgICogc2V0OlxuICAgKiBHQSB0cmFja2VyIHNldCBtZXRob2RcbiAgICogQHBhcmFtIHtPYmplY3R9IGZpZWxkc09iamVjdCAtIGEgZmllbGQvdmFsdWUgcGFpciBvciBhIGdyb3VwIG9mIGZpZWxkL3ZhbHVlIHBhaXJzIG9uIHRoZSB0cmFja2VyXG4gICAqL1xuICBzZXQ6IGZ1bmN0aW9uIChmaWVsZHNPYmplY3QpIHtcbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoIWZpZWxkc09iamVjdCkge1xuICAgICAgICB3YXJuKCdgZmllbGRzT2JqZWN0YCBpcyByZXF1aXJlZCBpbiAuc2V0KCknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGZpZWxkc09iamVjdCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgd2FybignRXhwZWN0ZWQgYGZpZWxkc09iamVjdGAgYXJnIHRvIGJlIGFuIE9iamVjdCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhmaWVsZHNPYmplY3QpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB3YXJuKCdlbXB0eSBgZmllbGRzT2JqZWN0YCBnaXZlbiB0byAuc2V0KCknKTtcbiAgICAgIH1cblxuICAgICAgZ2EoJ3NldCcsIGZpZWxkc09iamVjdCk7XG5cbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnc2V0XFwnLCBmaWVsZHNPYmplY3QpOycpO1xuICAgICAgICBsb2coJ3dpdGggZmllbGRzT2JqZWN0OiAnICsgSlNPTi5zdHJpbmdpZnkoZmllbGRzT2JqZWN0KSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBzZW5kOlxuICAgKiBDbG9uZSBvZiB0aGUgbG93IGxldmVsIGBnYS5zZW5kYCBtZXRob2RcbiAgICogV0FSTklORzogTm8gdmFsaWRhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIHRvIHRoaXNcbiAgICogQHBhcmFtICB7T2JqZWN0fSBmaWVsZE9iamVjdCAtIGZpZWxkIG9iamVjdCBmb3IgdHJhY2tpbmcgZGlmZmVyZW50IGFuYWx5dGljc1xuICAgKi9cbiAgc2VuZDogZnVuY3Rpb24gKGZpZWxkT2JqZWN0KSB7XG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZ2EoJ3NlbmQnLCBmaWVsZE9iamVjdCk7XG5cbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnc2VuZFxcJywgZmllbGRPYmplY3QpOycpO1xuICAgICAgICBsb2coJ3dpdGggZmllbGRPYmplY3Q6ICcgKyBKU09OLnN0cmluZ2lmeShmaWVsZE9iamVjdCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogcGFnZXZpZXc6XG4gICAqIEJhc2ljIEdBIHBhZ2V2aWV3IHRyYWNraW5nXG4gICAqIEBwYXJhbSAge1N0cmluZ30gcGF0aCAtIHRoZSBjdXJyZW50IHBhZ2UgcGFnZSBlLmcuICcvYWJvdXQnXG4gICAqL1xuICBwYWdldmlldzogZnVuY3Rpb24gKHBhdGgpIHtcbiAgICBpZiAoIXBhdGgpIHtcbiAgICAgIHdhcm4oJ3BhdGggaXMgcmVxdWlyZWQgaW4gLnBhZ2V2aWV3KCknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwYXRoID0gdHJpbShwYXRoKTtcbiAgICBpZiAocGF0aCA9PT0gJycpIHtcbiAgICAgIHdhcm4oJ3BhdGggY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZyBpbiAucGFnZXZpZXcoKScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGdhKCdzZW5kJywgJ3BhZ2V2aWV3JywgcGF0aCk7XG5cbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnc2VuZFxcJywgXFwncGFnZXZpZXdcXCcsIHBhdGgpOycpO1xuICAgICAgICBsb2coJ3dpdGggcGF0aDogJyArIHBhdGgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogbW9kYWx2aWV3OlxuICAgKiBhIHByb3h5IHRvIGJhc2ljIEdBIHBhZ2V2aWV3IHRyYWNraW5nIHRvIGNvbnNpc3RlbnRseSB0cmFja1xuICAgKiBtb2RhbCB2aWV3cyB0aGF0IGFyZSBhbiBlcXVpdmFsZW50IFVYIHRvIGEgdHJhZGl0aW9uYWwgcGFnZXZpZXdcbiAgICogQHBhcmFtICB7U3RyaW5nfSBtb2RhbE5hbWUgZS5nLiAnYWRkLW9yLWVkaXQtY2x1YidcbiAgICovXG4gIG1vZGFsdmlldzogZnVuY3Rpb24gKG1vZGFsTmFtZSkge1xuICAgIGlmICghbW9kYWxOYW1lKSB7XG4gICAgICB3YXJuKCdtb2RhbE5hbWUgaXMgcmVxdWlyZWQgaW4gLm1vZGFsdmlldyhtb2RhbE5hbWUpJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbW9kYWxOYW1lID0gdHJpbShtb2RhbE5hbWUpO1xuICAgIG1vZGFsTmFtZSA9IHJlbW92ZUxlYWRpbmdTbGFzaChtb2RhbE5hbWUpO1xuXG4gICAgaWYgKG1vZGFsTmFtZSA9PT0gJycpIHtcbiAgICAgIHdhcm4oJ21vZGFsTmFtZSBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nIG9yIGEgc2luZ2xlIC8gaW4gLm1vZGFsdmlldygpJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbW9kYWxOYW1lID0gdHJpbShtb2RhbE5hbWUpO1xuICAgICAgdmFyIHBhdGggPSAnL21vZGFsLycgKyBtb2RhbE5hbWU7XG4gICAgICBnYSgnc2VuZCcsICdwYWdldmlldycsIHBhdGgpO1xuXG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJ3NlbmRcXCcsIFxcJ3BhZ2V2aWV3XFwnLCBwYXRoKTsnKTtcbiAgICAgICAgbG9nKCd3aXRoIHBhdGg6ICcgKyBwYXRoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIHRpbWluZzpcbiAgICogR0EgdGltaW5nXG4gICAqIEBwYXJhbSBhcmdzLmNhdGVnb3J5IHtTdHJpbmd9IHJlcXVpcmVkXG4gICAqIEBwYXJhbSBhcmdzLnZhcmlhYmxlIHtTdHJpbmd9IHJlcXVpcmVkXG4gICAqIEBwYXJhbSBhcmdzLnZhbHVlICB7SW50fSAgcmVxdWlyZWRcbiAgICogQHBhcmFtIGFyZ3MubGFiZWwgIHtTdHJpbmd9IHJlcXVpcmVkXG4gICAqL1xuICB0aW1pbmc6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLmNhdGVnb3J5IHx8ICFhcmdzLnZhcmlhYmxlXG4gICAgICAgICAgfHwgIWFyZ3MudmFsdWUgfHwgdHlwZW9mIGFyZ3MudmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHdhcm4oJ2FyZ3MuY2F0ZWdvcnksIGFyZ3MudmFyaWFibGUgJyArXG4gICAgICAgICAgICAgICdBTkQgYXJncy52YWx1ZSBhcmUgcmVxdWlyZWQgaW4gdGltaW5nKCkgJyArXG4gICAgICAgICAgICAgICdBTkQgYXJncy52YWx1ZSBoYXMgdG8gYmUgYSBudW1iZXInKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvL1JlcXVpcmVkIEZpZWxkc1xuICAgICAgdmFyIGZpZWxkT2JqZWN0ID0ge1xuICAgICAgICBoaXRUeXBlOiAndGltaW5nJyxcbiAgICAgICAgdGltaW5nQ2F0ZWdvcnk6IF9mb3JtYXQoYXJncy5jYXRlZ29yeSksXG4gICAgICAgIHRpbWluZ1ZhcjogX2Zvcm1hdChhcmdzLnZhcmlhYmxlKSxcbiAgICAgICAgdGltaW5nVmFsdWU6IGFyZ3MudmFsdWVcbiAgICAgIH07XG5cbiAgICAgIGlmIChhcmdzLmxhYmVsKSB7XG4gICAgICAgIGZpZWxkT2JqZWN0LnRpbWluZ0xhYmVsID0gX2Zvcm1hdChhcmdzLmxhYmVsKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZW5kKGZpZWxkT2JqZWN0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIGV2ZW50OlxuICAgKiBHQSBldmVudCB0cmFja2luZ1xuICAgKiBAcGFyYW0gYXJncy5jYXRlZ29yeSB7U3RyaW5nfSByZXF1aXJlZFxuICAgKiBAcGFyYW0gYXJncy5hY3Rpb24ge1N0cmluZ30gcmVxdWlyZWRcbiAgICogQHBhcmFtIGFyZ3MubGFiZWwge1N0cmluZ30gb3B0aW9uYWxcbiAgICogQHBhcmFtIGFyZ3MudmFsdWUge0ludH0gb3B0aW9uYWxcbiAgICogQHBhcmFtIGFyZ3Mubm9uSW50ZXJhY3Rpb24ge2Jvb2xlYW59IG9wdGlvbmFsXG4gICAqL1xuICBldmVudDogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgIC8vIFNpbXBsZSBWYWxpZGF0aW9uXG4gICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuY2F0ZWdvcnkgfHwgIWFyZ3MuYWN0aW9uKSB7XG4gICAgICAgIHdhcm4oJ2FyZ3MuY2F0ZWdvcnkgQU5EIGFyZ3MuYWN0aW9uIGFyZSByZXF1aXJlZCBpbiBldmVudCgpJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUmVxdWlyZWQgRmllbGRzXG4gICAgICB2YXIgZmllbGRPYmplY3QgPSB7XG4gICAgICAgIGhpdFR5cGU6ICdldmVudCcsXG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6IF9mb3JtYXQoYXJncy5jYXRlZ29yeSksXG4gICAgICAgIGV2ZW50QWN0aW9uOiBfZm9ybWF0KGFyZ3MuYWN0aW9uKVxuICAgICAgfTtcblxuICAgICAgLy8gT3B0aW9uYWwgRmllbGRzXG4gICAgICBpZiAoYXJncy5sYWJlbCkge1xuICAgICAgICBmaWVsZE9iamVjdC5ldmVudExhYmVsID0gX2Zvcm1hdChhcmdzLmxhYmVsKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFyZ3MudmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzLnZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgIHdhcm4oJ0V4cGVjdGVkIGBhcmdzLnZhbHVlYCBhcmcgdG8gYmUgYSBOdW1iZXIuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmllbGRPYmplY3QuZXZlbnRWYWx1ZSA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFyZ3Mubm9uSW50ZXJhY3Rpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzLm5vbkludGVyYWN0aW9uICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICB3YXJuKCdgYXJncy5ub25JbnRlcmFjdGlvbmAgbXVzdCBiZSBhIGJvb2xlYW4uJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmllbGRPYmplY3Qubm9uSW50ZXJhY3Rpb24gPSBhcmdzLm5vbkludGVyYWN0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhcmdzLnRyYW5zcG9ydCkge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3MudHJhbnNwb3J0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHdhcm4oJ2BhcmdzLnRyYW5zcG9ydGAgbXVzdCBiZSBhIHN0cmluZy4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoWydiZWFjb24nLCAneGhyJywgJ2ltYWdlJ10uaW5kZXhPZihhcmdzLnRyYW5zcG9ydCkgPT09IC0xKSB7XG4gICAgICAgICAgICB3YXJuKCdgYXJncy50cmFuc3BvcnRgIG11c3QgYmUgZWl0aGVyIG9uZSBvZiB0aGVzZSB2YWx1ZXM6IGBiZWFjb25gLCBgeGhyYCBvciBgaW1hZ2VgJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZmllbGRPYmplY3QudHJhbnNwb3J0ID0gYXJncy50cmFuc3BvcnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCB0byBHQVxuICAgICAgdGhpcy5zZW5kKGZpZWxkT2JqZWN0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIGV4Y2VwdGlvbjpcbiAgICogR0EgZXhjZXB0aW9uIHRyYWNraW5nXG4gICAqIEBwYXJhbSBhcmdzLmRlc2NyaXB0aW9uIHtTdHJpbmd9IG9wdGlvbmFsXG4gICAqIEBwYXJhbSBhcmdzLmZhdGFsIHtib29sZWFufSBvcHRpb25hbFxuICAgKi9cbiAgZXhjZXB0aW9uOiBmdW5jdGlvbiAoYXJncykge1xuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcblxuICAgICAgLy8gUmVxdWlyZWQgRmllbGRzXG4gICAgICB2YXIgZmllbGRPYmplY3QgPSB7XG4gICAgICAgIGhpdFR5cGU6ICdleGNlcHRpb24nXG4gICAgICB9O1xuXG4gICAgICAvLyBPcHRpb25hbCBGaWVsZHNcbiAgICAgIGlmIChhcmdzLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGZpZWxkT2JqZWN0LmV4RGVzY3JpcHRpb24gPSBfZm9ybWF0KGFyZ3MuZGVzY3JpcHRpb24pO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGFyZ3MuZmF0YWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJncy5mYXRhbCAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgd2FybignYGFyZ3MuZmF0YWxgIG11c3QgYmUgYSBib29sZWFuLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkT2JqZWN0LmV4RmF0YWwgPSBhcmdzLmZhdGFsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbmQgdG8gR0FcbiAgICAgIHRoaXMuc2VuZChmaWVsZE9iamVjdCk7XG4gICAgfVxuICB9LFxuXG4gIHBsdWdpbjoge1xuICAgIC8qKlxuICAgICAqIHJlcXVpcmU6XG4gICAgICogR0EgcmVxdWlyZXMgYSBwbHVnaW5cbiAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBlLmcuICdlY29tbWVyY2UnIG9yICdteXBsdWdpbidcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBvcHRpb25hbCBlLmcge3BhdGg6ICcvbG9nJywgZGVidWc6IHRydWV9XG4gICAgICovXG4gICAgcmVxdWlyZTogZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcblxuICAgICAgICAvLyBSZXF1aXJlZCBGaWVsZHNcbiAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgd2FybignYG5hbWVgIGlzIHJlcXVpcmVkIGluIC5yZXF1aXJlKCknKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBuYW1lID0gdHJpbShuYW1lKTtcbiAgICAgICAgaWYgKG5hbWUgPT09ICcnKSB7XG4gICAgICAgICAgd2FybignYG5hbWVgIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmcgaW4gLnJlcXVpcmUoKScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9wdGlvbmFsIEZpZWxkc1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHdhcm4oJ0V4cGVjdGVkIGBvcHRpb25zYCBhcmcgdG8gYmUgYW4gT2JqZWN0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9wdGlvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgd2FybignRW1wdHkgYG9wdGlvbnNgIGdpdmVuIHRvIC5yZXF1aXJlKCknKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnYSgncmVxdWlyZScsIG5hbWUsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwncmVxdWlyZVxcJywgXFwnJyArIG5hbWUgKyAnXFwnLCAnICsgSlNPTi5zdHJpbmdpZnkob3B0aW9ucykgKyAnKTsnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2EoJ3JlcXVpcmUnLCBuYW1lKTtcblxuICAgICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJ3JlcXVpcmVcXCcsIFxcJycgKyBuYW1lICsgJ1xcJyk7Jyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGV4ZWN1dGU6XG4gICAgICogR0EgZXhlY3V0ZSBhY3Rpb24gZm9yIHBsdWdpblxuICAgICAqIFRha2VzIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHNcbiAgICAgKiBAcGFyYW0gcGx1Z2luTmFtZSB7U3RyaW5nfSBlLmcuICdlY29tbWVyY2UnIG9yICdteXBsdWdpbidcbiAgICAgKiBAcGFyYW0gYWN0aW9uIHtTdHJpbmd9IGUuZy4gJ2FkZEl0ZW0nIG9yICdteUN1c3RvbUFjdGlvbidcbiAgICAgKiBAcGFyYW0gYWN0aW9uVHlwZSB7U3RyaW5nfSBvcHRpb25hbCBlLmcuICdkZXRhaWwnXG4gICAgICogQHBhcmFtIHBheWxvYWQge09iamVjdH0gb3B0aW9uYWwgZS5nIHsgaWQ6ICcxeDVlJywgbmFtZSA6ICdNeSBwcm9kdWN0IHRvIHRyYWNrJyB9XG4gICAgICovXG4gICAgZXhlY3V0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gICAgICB2YXIgcGx1Z2luTmFtZSA9IGFyZ3NbMF07XG4gICAgICB2YXIgYWN0aW9uID0gYXJnc1sxXTtcbiAgICAgIHZhciBwYXlsb2FkO1xuICAgICAgdmFyIGFjdGlvblR5cGU7XG5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMykge1xuICAgICAgICBwYXlsb2FkID0gYXJnc1syXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGlvblR5cGUgPSBhcmdzWzJdO1xuICAgICAgICBwYXlsb2FkID0gYXJnc1szXTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAodHlwZW9mIHBsdWdpbk5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgd2FybignRXhwZWN0ZWQgYHBsdWdpbk5hbWVgIGFyZyB0byBiZSBhIFN0cmluZy4nKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWN0aW9uICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHdhcm4oJ0V4cGVjdGVkIGBhY3Rpb25gIGFyZyB0byBiZSBhIFN0cmluZy4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgY29tbWFuZCA9IHBsdWdpbk5hbWUgKyAnOicgKyBhY3Rpb247XG4gICAgICAgICAgcGF5bG9hZCA9IHBheWxvYWQgfHwgbnVsbDtcbiAgICAgICAgICBpZiAoYWN0aW9uVHlwZSAmJiBwYXlsb2FkKSB7XG4gICAgICAgICAgICBnYShjb21tYW5kLCBhY3Rpb25UeXBlLCBwYXlsb2FkKTtcbiAgICAgICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnJyArIGNvbW1hbmQgKyAnXFwnKTsnKTtcbiAgICAgICAgICAgICAgbG9nKCdhY3Rpb25UeXBlOiBcIicgKyBhY3Rpb25UeXBlICsgJ1wiIHdpdGggcGF5bG9hZDogJyArIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHBheWxvYWQpIHtcbiAgICAgICAgICAgIGdhKGNvbW1hbmQsIHBheWxvYWQpO1xuICAgICAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCcnICsgY29tbWFuZCArICdcXCcpOycpO1xuICAgICAgICAgICAgICBsb2coJ3dpdGggcGF5bG9hZDogJyArIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2EoY29tbWFuZCk7XG4gICAgICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJycgKyBjb21tYW5kICsgJ1xcJyk7Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIG91dGJvdW5kTGluazpcbiAgICogR0Egb3V0Ym91bmRMaW5rIHRyYWNraW5nXG4gICAqIEBwYXJhbSBhcmdzLmxhYmVsIHtTdHJpbmd9IGUuZy4gdXJsLCBvciAnQ3JlYXRlIGFuIEFjY291bnQnXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhpdENhbGxiYWNrIC0gQ2FsbGVkIGFmdGVyIHByb2Nlc3NpbmcgYSBoaXQuXG4gICAqL1xuICBvdXRib3VuZExpbms6IGZ1bmN0aW9uIChhcmdzLCBoaXRDYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgaGl0Q2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHdhcm4oJ2hpdENhbGxiYWNrIGZ1bmN0aW9uIGlzIHJlcXVpcmVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAvLyBTaW1wbGUgVmFsaWRhdGlvblxuICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLmxhYmVsKSB7XG4gICAgICAgIHdhcm4oJ2FyZ3MubGFiZWwgaXMgcmVxdWlyZWQgaW4gb3V0Ym91bmRMaW5rKCknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXF1aXJlZCBGaWVsZHNcbiAgICAgIHZhciBmaWVsZE9iamVjdCA9IHtcbiAgICAgICAgaGl0VHlwZTogJ2V2ZW50JyxcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogJ091dGJvdW5kJyxcbiAgICAgICAgZXZlbnRBY3Rpb246ICdDbGljaycsXG4gICAgICAgIGV2ZW50TGFiZWw6IF9mb3JtYXQoYXJncy5sYWJlbClcbiAgICAgIH07XG5cbiAgICAgIHZhciBzYWZldHlDYWxsYmFja0NhbGxlZCA9IGZhbHNlO1xuICAgICAgdmFyIHNhZmV0eUNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgYSBkZWxheWVkIHJlc3BvbnNlIGZyb20gR0FcbiAgICAgICAgLy8gY2F1c2luZyBoaXRDYWxsYmFjayBmcm9tIGJlaW5nIGZpcmVkIHR3aWNlXG4gICAgICAgIHNhZmV0eUNhbGxiYWNrQ2FsbGVkID0gdHJ1ZTtcblxuICAgICAgICBoaXRDYWxsYmFjaygpO1xuICAgICAgfTtcblxuICAgICAgLy8gVXNpbmcgYSB0aW1lb3V0IHRvIGVuc3VyZSB0aGUgZXhlY3V0aW9uIG9mIGNyaXRpY2FsIGFwcGxpY2F0aW9uIGNvZGVcbiAgICAgIC8vIGluIHRoZSBjYXNlIHdoZW4gdGhlIEdBIHNlcnZlciBtaWdodCBiZSBkb3duXG4gICAgICAvLyBvciBhbiBhZCBibG9ja2VyIHByZXZlbnRzIHNlbmRpbmcgdGhlIGRhdGFcblxuICAgICAgLy8gcmVnaXN0ZXIgc2FmZXR5IG5ldCB0aW1lb3V0OlxuICAgICAgdmFyIHQgPSBzZXRUaW1lb3V0KHNhZmV0eUNhbGxiYWNrLCAyNTApO1xuXG4gICAgICB2YXIgY2xlYXJhYmxlQ2FsbGJhY2tGb3JHQSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgICAgICBpZiAoIXNhZmV0eUNhbGxiYWNrQ2FsbGVkKSB7XG4gICAgICAgICAgaGl0Q2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZmllbGRPYmplY3QuaGl0Q2FsbGJhY2sgPSBjbGVhcmFibGVDYWxsYmFja0ZvckdBO1xuXG4gICAgICAvLyBTZW5kIHRvIEdBXG4gICAgICB0aGlzLnNlbmQoZmllbGRPYmplY3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiBnYSBpcyBub3QgZGVmaW5lZCwgcmV0dXJuIHRoZSBjYWxsYmFjayBzbyB0aGUgYXBwbGljYXRpb25cbiAgICAgIC8vIGNvbnRpbnVlcyB0byB3b3JrIGFzIGV4cGVjdGVkXG4gICAgICBzZXRUaW1lb3V0KGhpdENhbGxiYWNrLCAwKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBPdXRib3VuZExpbmsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3MSk7XG5PdXRib3VuZExpbmsub3JpZ1RyYWNrTGluayA9IE91dGJvdW5kTGluay50cmFja0xpbms7XG5PdXRib3VuZExpbmsudHJhY2tMaW5rID0gUmVhY3RHQS5vdXRib3VuZExpbmsuYmluZChSZWFjdEdBKTtcblJlYWN0R0EuT3V0Ym91bmRMaW5rID0gT3V0Ym91bmRMaW5rO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0R0E7XG5cblxuLyoqKi8gfSksXG4vKiAyNzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuZnVuY3Rpb24gbG9nKHMpIHtcbiAgY29uc29sZS5pbmZvKCdbcmVhY3QtZ2FdJywgcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbG9nO1xuXG5cbi8qKiovIH0pLFxuLyogMjc0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBtaWdodEJlRW1haWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3NSk7XG52YXIgdG9UaXRsZUNhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3Nyk7XG52YXIgd2FybiA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTtcblxudmFyIF9yZWRhY3RlZCA9ICdSRURBQ1RFRCAoUG90ZW50aWFsIEVtYWlsIEFkZHJlc3MpJztcblxuZnVuY3Rpb24gZm9ybWF0KHMsIHRpdGxlQ2FzZSkge1xuICBpZiAobWlnaHRCZUVtYWlsKHMpKSB7XG4gICAgd2FybignVGhpcyBhcmcgbG9va3MgbGlrZSBhbiBlbWFpbCBhZGRyZXNzLCByZWRhY3RpbmcuJyk7XG4gICAgcmV0dXJuIF9yZWRhY3RlZDtcbiAgfVxuXG4gIGlmICh0aXRsZUNhc2UpIHtcbiAgICByZXR1cm4gdG9UaXRsZUNhc2Uocyk7XG4gIH1cblxuICByZXR1cm4gcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmb3JtYXQ7XG5cblxuLyoqKi8gfSksXG4vKiAyNzUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gU2VlIGlmIHMgY291bGQgYmUgYW4gZW1haWwgYWRkcmVzcy4gV2UgZG9uJ3Qgd2FudCB0byBzZW5kIHBlcnNvbmFsIGRhdGEgbGlrZSBlbWFpbC5cbi8vIGh0dHBzOi8vc3VwcG9ydC5nb29nbGUuY29tL2FuYWx5dGljcy9hbnN3ZXIvMjc5NTk4Mz9obD1lblxuZnVuY3Rpb24gbWlnaHRCZUVtYWlsKHMpIHtcbiAgLy8gVGhlcmUncyBubyBwb2ludCB0cnlpbmcgdG8gdmFsaWRhdGUgcmZjODIyIGZ1bGx5LCBqdXN0IGxvb2sgZm9yIC4uLkAuLi5cbiAgcmV0dXJuICgvW15AXStAW15AXSsvKS50ZXN0KHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1pZ2h0QmVFbWFpbDtcblxuXG4vKioqLyB9KSxcbi8qIDI3NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5mdW5jdGlvbiByZW1vdmVMZWFkaW5nU2xhc2gocykge1xuICBpZiAocy5zdWJzdHJpbmcoMCwgMSkgPT09ICcvJykge1xuICAgIHMgPSBzLnN1YnN0cmluZygxKTtcbiAgfVxuXG4gIHJldHVybiBzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlbW92ZUxlYWRpbmdTbGFzaDtcblxuXG4vKioqLyB9KSxcbi8qIDI3NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIFRvIFRpdGxlIENhc2UgMi4xIC0gaHR0cDovL2luZGl2aWRlZC5jb20vY29kZS90by10aXRsZS1jYXNlL1xuICogQ29weXJpZ2h0IDIwMDgtMjAxMyBEYXZpZCBHb3VjaC4gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvdWNoL3RvLXRpdGxlLWNhc2VcbiAqL1xuXG52YXIgdHJpbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KTtcblxuZnVuY3Rpb24gdG9UaXRsZUNhc2Uocykge1xuICB2YXIgc21hbGxXb3JkcyA9IC9eKGF8YW58YW5kfGFzfGF0fGJ1dHxieXxlbnxmb3J8aWZ8aW58bm9yfG9mfG9ufG9yfHBlcnx0aGV8dG98dnM/XFwuP3x2aWEpJC9pO1xuICBzID0gdHJpbShzKTtcblxuICByZXR1cm4gcy5yZXBsYWNlKC9bQS1aYS16MC05XFx1MDBDMC1cXHUwMEZGXStbXlxccy1dKi9nLCBmdW5jdGlvbiAobWF0Y2gsIGluZGV4LCB0aXRsZSkge1xuICAgIGlmIChpbmRleCA+IDAgJiZcbiAgICAgICAgaW5kZXggKyBtYXRjaC5sZW5ndGggIT09IHRpdGxlLmxlbmd0aCAmJlxuICAgICAgICBtYXRjaC5zZWFyY2goc21hbGxXb3JkcykgPiAtMSAmJlxuICAgICAgICB0aXRsZS5jaGFyQXQoaW5kZXggLSAyKSAhPT0gJzonICYmXG4gICAgICAgICh0aXRsZS5jaGFyQXQoaW5kZXggKyBtYXRjaC5sZW5ndGgpICE9PSAnLScgfHwgdGl0bGUuY2hhckF0KGluZGV4IC0gMSkgPT09ICctJykgJiZcbiAgICAgICAgdGl0bGUuY2hhckF0KGluZGV4IC0gMSkuc2VhcmNoKC9bXlxccy1dLykgPCAwKSB7XG4gICAgICByZXR1cm4gbWF0Y2gudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICBpZiAobWF0Y2guc3Vic3RyKDEpLnNlYXJjaCgvW0EtWl18XFwuLi8pID4gLTEpIHtcbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWF0Y2guY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBtYXRjaC5zdWJzdHIoMSk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvVGl0bGVDYXNlO1xuXG5cbi8qKiovIH0pLFxuLyogMjc4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgUmVhY3RET00gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTc1KTtcbnZhciBNb2RhbFBvcnRhbCA9IFJlYWN0LmNyZWF0ZUZhY3RvcnkoX193ZWJwYWNrX3JlcXVpcmVfXygyNzkpKTtcbnZhciBhcmlhQXBwSGlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4MCk7XG52YXIgZWxlbWVudENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzMpO1xudmFyIHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykudW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXI7XG52YXIgQXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG5cbnZhciBTYWZlSFRNTEVsZW1lbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyB3aW5kb3cuSFRNTEVsZW1lbnQgOiB7fTtcbnZhciBBcHBFbGVtZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gZG9jdW1lbnQuYm9keSA6IHthcHBlbmRDaGlsZDogZnVuY3Rpb24oKSB7fX07XG5cbmZ1bmN0aW9uIGdldFBhcmVudEVsZW1lbnQocGFyZW50U2VsZWN0b3IpIHtcbiAgcmV0dXJuIHBhcmVudFNlbGVjdG9yKCk7XG59XG5cbnZhciBNb2RhbCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICBkaXNwbGF5TmFtZTogJ01vZGFsJyxcbiAgc3RhdGljczoge1xuICAgIHNldEFwcEVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgQXBwRWxlbWVudCA9IGFyaWFBcHBIaWRlci5zZXRFbGVtZW50KGVsZW1lbnQpO1xuICAgIH0sXG4gICAgaW5qZWN0Q1NTOiBmdW5jdGlvbigpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSBcInByb2R1Y3Rpb25cIlxuICAgICAgICAmJiBjb25zb2xlLndhcm4oJ1JlYWN0LU1vZGFsOiBpbmplY3RDU1MgaGFzIGJlZW4gZGVwcmVjYXRlZCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdhbmQgbm8gbG9uZ2VyIGhhcyBhbnkgZWZmZWN0LiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBsYXRlciB2ZXJzaW9uJyk7XG4gICAgfVxuICB9LFxuXG4gIHByb3BUeXBlczoge1xuICAgIGlzT3BlbjogUmVhY3QuUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBzdHlsZTogUmVhY3QuUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIGNvbnRlbnQ6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QsXG4gICAgICBvdmVybGF5OiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0XG4gICAgfSksXG4gICAgcG9ydGFsQ2xhc3NOYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIGFwcEVsZW1lbnQ6IFJlYWN0LlByb3BUeXBlcy5pbnN0YW5jZU9mKFNhZmVIVE1MRWxlbWVudCksXG4gICAgb25BZnRlck9wZW46IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgIG9uUmVxdWVzdENsb3NlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBjbG9zZVRpbWVvdXRNUzogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgICBhcmlhSGlkZUFwcDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljazogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgcGFyZW50U2VsZWN0b3I6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgIHJvbGU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgY29udGVudExhYmVsOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbiAgfSxcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgIHBvcnRhbENsYXNzTmFtZTogJ1JlYWN0TW9kYWxQb3J0YWwnLFxuICAgICAgYXJpYUhpZGVBcHA6IHRydWUsXG4gICAgICBjbG9zZVRpbWVvdXRNUzogMCxcbiAgICAgIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s6IHRydWUsXG4gICAgICBwYXJlbnRTZWxlY3RvcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQuYm9keTsgfVxuICAgIH07XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMubm9kZS5jbGFzc05hbWUgPSB0aGlzLnByb3BzLnBvcnRhbENsYXNzTmFtZTtcblxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnRFbGVtZW50KHRoaXMucHJvcHMucGFyZW50U2VsZWN0b3IpO1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIHRoaXMucmVuZGVyUG9ydGFsKHRoaXMucHJvcHMpO1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKG5ld1Byb3BzKSB7XG4gICAgdmFyIGN1cnJlbnRQYXJlbnQgPSBnZXRQYXJlbnRFbGVtZW50KHRoaXMucHJvcHMucGFyZW50U2VsZWN0b3IpO1xuICAgIHZhciBuZXdQYXJlbnQgPSBnZXRQYXJlbnRFbGVtZW50KG5ld1Byb3BzLnBhcmVudFNlbGVjdG9yKTtcblxuICAgIGlmKG5ld1BhcmVudCAhPT0gY3VycmVudFBhcmVudCkge1xuICAgICAgY3VycmVudFBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpO1xuICAgICAgbmV3UGFyZW50LmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJQb3J0YWwobmV3UHJvcHMpO1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hcmlhSGlkZUFwcCkge1xuICAgICAgYXJpYUFwcEhpZGVyLnNob3codGhpcy5wcm9wcy5hcHBFbGVtZW50KTtcbiAgICB9XG5cbiAgICBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKHRoaXMubm9kZSk7XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQodGhpcy5wcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMubm9kZSk7XG4gICAgZWxlbWVudENsYXNzKGRvY3VtZW50LmJvZHkpLnJlbW92ZSgnUmVhY3RNb2RhbF9fQm9keS0tb3BlbicpO1xuICB9LFxuXG4gIHJlbmRlclBvcnRhbDogZnVuY3Rpb24ocHJvcHMpIHtcbiAgICBpZiAocHJvcHMuaXNPcGVuKSB7XG4gICAgICBlbGVtZW50Q2xhc3MoZG9jdW1lbnQuYm9keSkuYWRkKCdSZWFjdE1vZGFsX19Cb2R5LS1vcGVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnRDbGFzcyhkb2N1bWVudC5ib2R5KS5yZW1vdmUoJ1JlYWN0TW9kYWxfX0JvZHktLW9wZW4nKTtcbiAgICB9XG5cbiAgICBpZiAocHJvcHMuYXJpYUhpZGVBcHApIHtcbiAgICAgIGFyaWFBcHBIaWRlci50b2dnbGUocHJvcHMuaXNPcGVuLCBwcm9wcy5hcHBFbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnBvcnRhbCA9IHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyKHRoaXMsIE1vZGFsUG9ydGFsKEFzc2lnbih7fSwgcHJvcHMsIHtkZWZhdWx0U3R5bGVzOiBNb2RhbC5kZWZhdWx0U3R5bGVzfSkpLCB0aGlzLm5vZGUpO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBSZWFjdC5ET00ubm9zY3JpcHQoKTtcbiAgfVxufSk7XG5cbk1vZGFsLmRlZmF1bHRTdHlsZXMgPSB7XG4gIG92ZXJsYXk6IHtcbiAgICBwb3NpdGlvbiAgICAgICAgOiAnZml4ZWQnLFxuICAgIHRvcCAgICAgICAgICAgICA6IDAsXG4gICAgbGVmdCAgICAgICAgICAgIDogMCxcbiAgICByaWdodCAgICAgICAgICAgOiAwLFxuICAgIGJvdHRvbSAgICAgICAgICA6IDAsXG4gICAgYmFja2dyb3VuZENvbG9yIDogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC43NSknXG4gIH0sXG4gIGNvbnRlbnQ6IHtcbiAgICBwb3NpdGlvbiAgICAgICAgICAgICAgICA6ICdhYnNvbHV0ZScsXG4gICAgdG9wICAgICAgICAgICAgICAgICAgICAgOiAnNDBweCcsXG4gICAgbGVmdCAgICAgICAgICAgICAgICAgICAgOiAnNDBweCcsXG4gICAgcmlnaHQgICAgICAgICAgICAgICAgICAgOiAnNDBweCcsXG4gICAgYm90dG9tICAgICAgICAgICAgICAgICAgOiAnNDBweCcsXG4gICAgYm9yZGVyICAgICAgICAgICAgICAgICAgOiAnMXB4IHNvbGlkICNjY2MnLFxuICAgIGJhY2tncm91bmQgICAgICAgICAgICAgIDogJyNmZmYnLFxuICAgIG92ZXJmbG93ICAgICAgICAgICAgICAgIDogJ2F1dG8nLFxuICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nIDogJ3RvdWNoJyxcbiAgICBib3JkZXJSYWRpdXMgICAgICAgICAgICA6ICc0cHgnLFxuICAgIG91dGxpbmUgICAgICAgICAgICAgICAgIDogJ25vbmUnLFxuICAgIHBhZGRpbmcgICAgICAgICAgICAgICAgIDogJzIwcHgnXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNb2RhbFxuXG5cbi8qKiovIH0pLFxuLyogMjc5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgZGl2ID0gUmVhY3QuRE9NLmRpdjtcbnZhciBmb2N1c01hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4MSk7XG52YXIgc2NvcGVUYWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4Mik7XG52YXIgQXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG5cbi8vIHNvIHRoYXQgb3VyIENTUyBpcyBzdGF0aWNhbGx5IGFuYWx5emFibGVcbnZhciBDTEFTU19OQU1FUyA9IHtcbiAgb3ZlcmxheToge1xuICAgIGJhc2U6ICdSZWFjdE1vZGFsX19PdmVybGF5JyxcbiAgICBhZnRlck9wZW46ICdSZWFjdE1vZGFsX19PdmVybGF5LS1hZnRlci1vcGVuJyxcbiAgICBiZWZvcmVDbG9zZTogJ1JlYWN0TW9kYWxfX092ZXJsYXktLWJlZm9yZS1jbG9zZSdcbiAgfSxcbiAgY29udGVudDoge1xuICAgIGJhc2U6ICdSZWFjdE1vZGFsX19Db250ZW50JyxcbiAgICBhZnRlck9wZW46ICdSZWFjdE1vZGFsX19Db250ZW50LS1hZnRlci1vcGVuJyxcbiAgICBiZWZvcmVDbG9zZTogJ1JlYWN0TW9kYWxfX0NvbnRlbnQtLWJlZm9yZS1jbG9zZSdcbiAgfVxufTtcblxudmFyIE1vZGFsUG9ydGFsID0gbW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgZGlzcGxheU5hbWU6ICdNb2RhbFBvcnRhbCcsXG4gIHNob3VsZENsb3NlOiBudWxsLFxuXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG92ZXJsYXk6IHt9LFxuICAgICAgICBjb250ZW50OiB7fVxuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWZ0ZXJPcGVuOiBmYWxzZSxcbiAgICAgIGJlZm9yZUNsb3NlOiBmYWxzZVxuICAgIH07XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vIEZvY3VzIG5lZWRzIHRvIGJlIHNldCB3aGVuIG1vdW50aW5nIGFuZCBhbHJlYWR5IG9wZW5cbiAgICBpZiAodGhpcy5wcm9wcy5pc09wZW4pIHtcbiAgICAgIHRoaXMuc2V0Rm9jdXNBZnRlclJlbmRlcih0cnVlKTtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xvc2VUaW1lcik7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV3UHJvcHMpIHtcbiAgICAvLyBGb2N1cyBvbmx5IG5lZWRzIHRvIGJlIHNldCBvbmNlIHdoZW4gdGhlIG1vZGFsIGlzIGJlaW5nIG9wZW5lZFxuICAgIGlmICghdGhpcy5wcm9wcy5pc09wZW4gJiYgbmV3UHJvcHMuaXNPcGVuKSB7XG4gICAgICB0aGlzLnNldEZvY3VzQWZ0ZXJSZW5kZXIodHJ1ZSk7XG4gICAgICB0aGlzLm9wZW4oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuaXNPcGVuICYmICFuZXdQcm9wcy5pc09wZW4pIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZm9jdXNBZnRlclJlbmRlcikge1xuICAgICAgdGhpcy5mb2N1c0NvbnRlbnQoKTtcbiAgICAgIHRoaXMuc2V0Rm9jdXNBZnRlclJlbmRlcihmYWxzZSk7XG4gICAgfVxuICB9LFxuXG4gIHNldEZvY3VzQWZ0ZXJSZW5kZXI6IGZ1bmN0aW9uIChmb2N1cykge1xuICAgIHRoaXMuZm9jdXNBZnRlclJlbmRlciA9IGZvY3VzO1xuICB9LFxuXG4gIG9wZW46IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmFmdGVyT3BlbiAmJiB0aGlzLnN0YXRlLmJlZm9yZUNsb3NlKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5jbG9zZVRpbWVyKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBiZWZvcmVDbG9zZTogZmFsc2UgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvY3VzTWFuYWdlci5zZXR1cFNjb3BlZEZvY3VzKHRoaXMubm9kZSk7XG4gICAgICBmb2N1c01hbmFnZXIubWFya0ZvckZvY3VzTGF0ZXIoKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2lzT3BlbjogdHJ1ZX0sIGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHthZnRlck9wZW46IHRydWV9KTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc09wZW4gJiYgdGhpcy5wcm9wcy5vbkFmdGVyT3Blbikge1xuICAgICAgICAgIHRoaXMucHJvcHMub25BZnRlck9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH0sXG5cbiAgY2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmNsb3NlVGltZW91dE1TID4gMClcbiAgICAgIHRoaXMuY2xvc2VXaXRoVGltZW91dCgpO1xuICAgIGVsc2VcbiAgICAgIHRoaXMuY2xvc2VXaXRob3V0VGltZW91dCgpO1xuICB9LFxuXG4gIGZvY3VzQ29udGVudDogZnVuY3Rpb24oKSB7XG4gICAgLy8gRG9uJ3Qgc3RlYWwgZm9jdXMgZnJvbSBpbm5lciBlbGVtZW50c1xuICAgIGlmICghdGhpcy5jb250ZW50SGFzRm9jdXMoKSkge1xuICAgICAgdGhpcy5yZWZzLmNvbnRlbnQuZm9jdXMoKTtcbiAgICB9XG4gIH0sXG5cbiAgY2xvc2VXaXRoVGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YmVmb3JlQ2xvc2U6IHRydWV9LCBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2xvc2VUaW1lciA9IHNldFRpbWVvdXQodGhpcy5jbG9zZVdpdGhvdXRUaW1lb3V0LCB0aGlzLnByb3BzLmNsb3NlVGltZW91dE1TKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuXG4gIGNsb3NlV2l0aG91dFRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYmVmb3JlQ2xvc2U6IGZhbHNlLFxuICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgIGFmdGVyT3BlbjogZmFsc2UsXG4gICAgfSwgdGhpcy5hZnRlckNsb3NlKTtcbiAgfSxcblxuICBhZnRlckNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICBmb2N1c01hbmFnZXIucmV0dXJuRm9jdXMoKTtcbiAgICBmb2N1c01hbmFnZXIudGVhcmRvd25TY29wZWRGb2N1cygpO1xuICB9LFxuXG4gIGhhbmRsZUtleURvd246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gOSAvKnRhYiovKSBzY29wZVRhYih0aGlzLnJlZnMuY29udGVudCwgZXZlbnQpO1xuICAgIGlmIChldmVudC5rZXlDb2RlID09IDI3IC8qZXNjKi8pIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnJlcXVlc3RDbG9zZShldmVudCk7XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZU92ZXJsYXlNb3VzZURvd246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuc2hvdWxkQ2xvc2UgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuc2hvdWxkQ2xvc2UgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICBoYW5kbGVPdmVybGF5TW91c2VVcDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5zaG91bGRDbG9zZSAmJiB0aGlzLnByb3BzLnNob3VsZENsb3NlT25PdmVybGF5Q2xpY2spIHtcbiAgICAgIGlmICh0aGlzLm93bmVySGFuZGxlc0Nsb3NlKCkpXG4gICAgICAgIHRoaXMucmVxdWVzdENsb3NlKGV2ZW50KTtcbiAgICAgIGVsc2VcbiAgICAgICAgdGhpcy5mb2N1c0NvbnRlbnQoKTtcbiAgICB9XG4gICAgdGhpcy5zaG91bGRDbG9zZSA9IG51bGw7XG4gIH0sXG5cbiAgaGFuZGxlQ29udGVudE1vdXNlRG93bjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLnNob3VsZENsb3NlID0gZmFsc2U7XG4gIH0sXG5cbiAgaGFuZGxlQ29udGVudE1vdXNlVXA6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy5zaG91bGRDbG9zZSA9IGZhbHNlO1xuICB9LFxuXG4gIHJlcXVlc3RDbG9zZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vd25lckhhbmRsZXNDbG9zZSgpKVxuICAgICAgdGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZShldmVudCk7XG4gIH0sXG5cbiAgb3duZXJIYW5kbGVzQ2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlO1xuICB9LFxuXG4gIHNob3VsZEJlQ2xvc2VkOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMuaXNPcGVuICYmICF0aGlzLnN0YXRlLmJlZm9yZUNsb3NlO1xuICB9LFxuXG4gIGNvbnRlbnRIYXNGb2N1czogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMucmVmcy5jb250ZW50IHx8IHRoaXMucmVmcy5jb250ZW50LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICB9LFxuXG4gIGJ1aWxkQ2xhc3NOYW1lOiBmdW5jdGlvbih3aGljaCwgYWRkaXRpb25hbCkge1xuICAgIHZhciBjbGFzc05hbWUgPSBDTEFTU19OQU1FU1t3aGljaF0uYmFzZTtcbiAgICBpZiAodGhpcy5zdGF0ZS5hZnRlck9wZW4pXG4gICAgICBjbGFzc05hbWUgKz0gJyAnK0NMQVNTX05BTUVTW3doaWNoXS5hZnRlck9wZW47XG4gICAgaWYgKHRoaXMuc3RhdGUuYmVmb3JlQ2xvc2UpXG4gICAgICBjbGFzc05hbWUgKz0gJyAnK0NMQVNTX05BTUVTW3doaWNoXS5iZWZvcmVDbG9zZTtcbiAgICByZXR1cm4gYWRkaXRpb25hbCA/IGNsYXNzTmFtZSArICcgJyArIGFkZGl0aW9uYWwgOiBjbGFzc05hbWU7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udGVudFN0eWxlcyA9ICh0aGlzLnByb3BzLmNsYXNzTmFtZSkgPyB7fSA6IHRoaXMucHJvcHMuZGVmYXVsdFN0eWxlcy5jb250ZW50O1xuICAgIHZhciBvdmVybGF5U3R5bGVzID0gKHRoaXMucHJvcHMub3ZlcmxheUNsYXNzTmFtZSkgPyB7fSA6IHRoaXMucHJvcHMuZGVmYXVsdFN0eWxlcy5vdmVybGF5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2hvdWxkQmVDbG9zZWQoKSA/IGRpdigpIDogKFxuICAgICAgZGl2KHtcbiAgICAgICAgcmVmOiBcIm92ZXJsYXlcIixcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmJ1aWxkQ2xhc3NOYW1lKCdvdmVybGF5JywgdGhpcy5wcm9wcy5vdmVybGF5Q2xhc3NOYW1lKSxcbiAgICAgICAgc3R5bGU6IEFzc2lnbih7fSwgb3ZlcmxheVN0eWxlcywgdGhpcy5wcm9wcy5zdHlsZS5vdmVybGF5IHx8IHt9KSxcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlT3ZlcmxheU1vdXNlRG93bixcbiAgICAgICAgb25Nb3VzZVVwOiB0aGlzLmhhbmRsZU92ZXJsYXlNb3VzZVVwXG4gICAgICB9LFxuICAgICAgICBkaXYoe1xuICAgICAgICAgIHJlZjogXCJjb250ZW50XCIsXG4gICAgICAgICAgc3R5bGU6IEFzc2lnbih7fSwgY29udGVudFN0eWxlcywgdGhpcy5wcm9wcy5zdHlsZS5jb250ZW50IHx8IHt9KSxcbiAgICAgICAgICBjbGFzc05hbWU6IHRoaXMuYnVpbGRDbGFzc05hbWUoJ2NvbnRlbnQnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSksXG4gICAgICAgICAgdGFiSW5kZXg6IFwiLTFcIixcbiAgICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93bixcbiAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVDb250ZW50TW91c2VEb3duLFxuICAgICAgICAgIG9uTW91c2VVcDogdGhpcy5oYW5kbGVDb250ZW50TW91c2VVcCxcbiAgICAgICAgICByb2xlOiB0aGlzLnByb3BzLnJvbGUsXG4gICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHRoaXMucHJvcHMuY29udGVudExhYmVsXG4gICAgICAgIH0sXG4gICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cblxuLyoqKi8gfSksXG4vKiAyODAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudmFyIF9lbGVtZW50ID0gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50LmJvZHkgOiBudWxsO1xuXG5mdW5jdGlvbiBzZXRFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudCk7XG4gICAgZWxlbWVudCA9ICdsZW5ndGgnIGluIGVsID8gZWxbMF0gOiBlbDtcbiAgfVxuICBfZWxlbWVudCA9IGVsZW1lbnQgfHwgX2VsZW1lbnQ7XG4gIHJldHVybiBfZWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaGlkZShhcHBFbGVtZW50KSB7XG4gIHZhbGlkYXRlRWxlbWVudChhcHBFbGVtZW50KTtcbiAgKGFwcEVsZW1lbnQgfHwgX2VsZW1lbnQpLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xufVxuXG5mdW5jdGlvbiBzaG93KGFwcEVsZW1lbnQpIHtcbiAgdmFsaWRhdGVFbGVtZW50KGFwcEVsZW1lbnQpO1xuICAoYXBwRWxlbWVudCB8fCBfZWxlbWVudCkucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGUoc2hvdWxkSGlkZSwgYXBwRWxlbWVudCkge1xuICBpZiAoc2hvdWxkSGlkZSlcbiAgICBoaWRlKGFwcEVsZW1lbnQpO1xuICBlbHNlXG4gICAgc2hvdyhhcHBFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVFbGVtZW50KGFwcEVsZW1lbnQpIHtcbiAgaWYgKCFhcHBFbGVtZW50ICYmICFfZWxlbWVudClcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlYWN0LW1vZGFsOiBZb3UgbXVzdCBzZXQgYW4gZWxlbWVudCB3aXRoIGBNb2RhbC5zZXRBcHBFbGVtZW50KGVsKWAgdG8gbWFrZSB0aGlzIGFjY2Vzc2libGUnKTtcbn1cblxuZnVuY3Rpb24gcmVzZXRGb3JUZXN0aW5nKCkge1xuICBfZWxlbWVudCA9IGRvY3VtZW50LmJvZHk7XG59XG5cbmV4cG9ydHMudG9nZ2xlID0gdG9nZ2xlO1xuZXhwb3J0cy5zZXRFbGVtZW50ID0gc2V0RWxlbWVudDtcbmV4cG9ydHMuc2hvdyA9IHNob3c7XG5leHBvcnRzLmhpZGUgPSBoaWRlO1xuZXhwb3J0cy5yZXNldEZvclRlc3RpbmcgPSByZXNldEZvclRlc3Rpbmc7XG5cblxuLyoqKi8gfSksXG4vKiAyODEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIGZpbmRUYWJiYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KTtcbnZhciBtb2RhbEVsZW1lbnQgPSBudWxsO1xudmFyIGZvY3VzTGF0ZXJFbGVtZW50ID0gbnVsbDtcbnZhciBuZWVkVG9Gb2N1cyA9IGZhbHNlO1xuXG5mdW5jdGlvbiBoYW5kbGVCbHVyKGV2ZW50KSB7XG4gIG5lZWRUb0ZvY3VzID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9jdXMoZXZlbnQpIHtcbiAgaWYgKG5lZWRUb0ZvY3VzKSB7XG4gICAgbmVlZFRvRm9jdXMgPSBmYWxzZTtcbiAgICBpZiAoIW1vZGFsRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBuZWVkIHRvIHNlZSBob3cgalF1ZXJ5IHNoaW1zIGRvY3VtZW50Lm9uKCdmb2N1c2luJykgc28gd2UgZG9uJ3QgbmVlZCB0aGVcbiAgICAvLyBzZXRUaW1lb3V0LCBmaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCBmb2N1c2luLCBpZiBpdCBkaWQsIHdlIGNvdWxkIGZvY3VzXG4gICAgLy8gdGhlIGVsZW1lbnQgb3V0c2lkZSBvZiBhIHNldFRpbWVvdXQuIFNpZGUtZWZmZWN0IG9mIHRoaXMgaW1wbGVtZW50YXRpb24gXG4gICAgLy8gaXMgdGhhdCB0aGUgZG9jdW1lbnQuYm9keSBnZXRzIGZvY3VzLCBhbmQgdGhlbiB3ZSBmb2N1cyBvdXIgZWxlbWVudCByaWdodCBcbiAgICAvLyBhZnRlciwgc2VlbXMgZmluZS5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKG1vZGFsRWxlbWVudC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdmFyIGVsID0gKGZpbmRUYWJiYWJsZShtb2RhbEVsZW1lbnQpWzBdIHx8IG1vZGFsRWxlbWVudCk7XG4gICAgICBlbC5mb2N1cygpO1xuICAgIH0sIDApO1xuICB9XG59XG5cbmV4cG9ydHMubWFya0ZvckZvY3VzTGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgZm9jdXNMYXRlckVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xufTtcblxuZXhwb3J0cy5yZXR1cm5Gb2N1cyA9IGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIGZvY3VzTGF0ZXJFbGVtZW50LmZvY3VzKCk7XG4gIH1cbiAgY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ1lvdSB0cmllZCB0byByZXR1cm4gZm9jdXMgdG8gJytmb2N1c0xhdGVyRWxlbWVudCsnIGJ1dCBpdCBpcyBub3QgaW4gdGhlIERPTSBhbnltb3JlJyk7XG4gIH1cbiAgZm9jdXNMYXRlckVsZW1lbnQgPSBudWxsO1xufTtcblxuZXhwb3J0cy5zZXR1cFNjb3BlZEZvY3VzID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICBtb2RhbEVsZW1lbnQgPSBlbGVtZW50O1xuXG4gIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgaGFuZGxlQmx1ciwgZmFsc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgaGFuZGxlRm9jdXMsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb25CbHVyJywgaGFuZGxlQmx1cik7XG4gICAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29uRm9jdXMnLCBoYW5kbGVGb2N1cyk7XG4gIH1cbn07XG5cbmV4cG9ydHMudGVhcmRvd25TY29wZWRGb2N1cyA9IGZ1bmN0aW9uKCkge1xuICBtb2RhbEVsZW1lbnQgPSBudWxsO1xuXG4gIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgaGFuZGxlQmx1cik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBoYW5kbGVGb2N1cyk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmRldGFjaEV2ZW50KCdvbkJsdXInLCBoYW5kbGVCbHVyKTtcbiAgICBkb2N1bWVudC5kZXRhY2hFdmVudCgnb25Gb2N1cycsIGhhbmRsZUZvY3VzKTtcbiAgfVxufTtcblxuXG5cblxuLyoqKi8gfSksXG4vKiAyODIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIGZpbmRUYWJiYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihub2RlLCBldmVudCkge1xuICB2YXIgdGFiYmFibGUgPSBmaW5kVGFiYmFibGUobm9kZSk7XG4gIGlmICghdGFiYmFibGUubGVuZ3RoKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICB9XG4gIHZhciBmaW5hbFRhYmJhYmxlID0gdGFiYmFibGVbZXZlbnQuc2hpZnRLZXkgPyAwIDogdGFiYmFibGUubGVuZ3RoIC0gMV07XG4gIHZhciBsZWF2aW5nRmluYWxUYWJiYWJsZSA9IChcbiAgICBmaW5hbFRhYmJhYmxlID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IHx8XG4gICAgLy8gaGFuZGxlIGltbWVkaWF0ZSBzaGlmdCt0YWIgYWZ0ZXIgb3BlbmluZyB3aXRoIG1vdXNlXG4gICAgbm9kZSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICApO1xuICBpZiAoIWxlYXZpbmdGaW5hbFRhYmJhYmxlKSByZXR1cm47XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHZhciB0YXJnZXQgPSB0YWJiYWJsZVtldmVudC5zaGlmdEtleSA/IHRhYmJhYmxlLmxlbmd0aCAtIDEgOiAwXTtcbiAgdGFyZ2V0LmZvY3VzKCk7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMjgzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzgpO1xuXG5cblxuLyoqKi8gfSksXG4vKiAyODQgKi8sXG4vKiAyODUgKi8sXG4vKiAyODYgKi8sXG4vKiAyODcgKi8sXG4vKiAyODggKi8sXG4vKiAyODkgKi8sXG4vKiAyOTAgKi8sXG4vKiAyOTEgKi8sXG4vKiAyOTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIGNhblVzZURPTSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcyKTtcbnZhciBlbnF1aXJlID0gY2FuVXNlRE9NICYmIF9fd2VicGFja19yZXF1aXJlX18oMTc0KTtcbnZhciBqc29uMm1xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7XG5cbnZhciBSZXNwb25zaXZlTWl4aW4gPSB7XG4gIG1lZGlhOiBmdW5jdGlvbiAocXVlcnksIGhhbmRsZXIpIHtcbiAgICBxdWVyeSA9IGpzb24ybXEocXVlcnkpO1xuICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaGFuZGxlciA9IHtcbiAgICAgICAgbWF0Y2g6IGhhbmRsZXJcbiAgICAgIH07XG4gICAgfVxuICAgIGNhblVzZURPTSAmJiBlbnF1aXJlLnJlZ2lzdGVyKHF1ZXJ5LCBoYW5kbGVyKTtcblxuICAgIC8vIFF1ZXVlIHRoZSBoYW5kbGVycyB0byB1bnJlZ2lzdGVyIHRoZW0gYXQgdW5tb3VudCAgXG4gICAgaWYgKCEgdGhpcy5fcmVzcG9uc2l2ZU1lZGlhSGFuZGxlcnMpIHtcbiAgICAgIHRoaXMuX3Jlc3BvbnNpdmVNZWRpYUhhbmRsZXJzID0gW107XG4gICAgfVxuICAgIHRoaXMuX3Jlc3BvbnNpdmVNZWRpYUhhbmRsZXJzLnB1c2goe3F1ZXJ5OiBxdWVyeSwgaGFuZGxlcjogaGFuZGxlcn0pO1xuICB9LFxuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9yZXNwb25zaXZlTWVkaWFIYW5kbGVycykge1xuICAgICAgdGhpcy5fcmVzcG9uc2l2ZU1lZGlhSGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbihvYmopIHtcbiAgICAgICAgY2FuVXNlRE9NICYmIGVucXVpcmUudW5yZWdpc3RlcihvYmoucXVlcnksIG9iai5oYW5kbGVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZXNwb25zaXZlTWl4aW47XG5cblxuLyoqKi8gfSksXG4vKiAyOTMgKi8sXG4vKiAyOTQgKi8sXG4vKiAyOTUgKi8sXG4vKiAyOTYgKi8sXG4vKiAyOTcgKi8sXG4vKiAyOTggKi8sXG4vKiAyOTkgKi8sXG4vKiAzMDAgKi8sXG4vKiAzMDEgKi8sXG4vKiAzMDIgKi8sXG4vKiAzMDMgKi8sXG4vKiAzMDQgKi8sXG4vKiAzMDUgKi8sXG4vKiAzMDYgKi8sXG4vKiAzMDcgKi8sXG4vKiAzMDggKi8sXG4vKiAzMDkgKi8sXG4vKiAzMTAgKi8sXG4vKiAzMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuTmV4dEFycm93ID0gZXhwb3J0cy5QcmV2QXJyb3cgPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxudmFyIF9oZWxwZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCk7XG5cbnZhciBfaGVscGVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWxwZXJzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFByZXZBcnJvdyA9IGV4cG9ydHMuUHJldkFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdQcmV2QXJyb3cnLFxuXG5cbiAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIob3B0aW9ucywgZSkge1xuICAgIGlmIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMuY2xpY2tIYW5kbGVyKG9wdGlvbnMsIGUpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgcHJldkNsYXNzZXMgPSB7ICdzbGljay1hcnJvdyc6IHRydWUsICdzbGljay1wcmV2JzogdHJ1ZSB9O1xuICAgIHZhciBwcmV2SGFuZGxlciA9IHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcywgeyBtZXNzYWdlOiAncHJldmlvdXMnIH0pO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLmluZmluaXRlICYmICh0aGlzLnByb3BzLmN1cnJlbnRTbGlkZSA9PT0gMCB8fCB0aGlzLnByb3BzLnNsaWRlQ291bnQgPD0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cpKSB7XG4gICAgICBwcmV2Q2xhc3Nlc1snc2xpY2stZGlzYWJsZWQnXSA9IHRydWU7XG4gICAgICBwcmV2SGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHByZXZBcnJvd1Byb3BzID0ge1xuICAgICAga2V5OiAnMCcsXG4gICAgICAnZGF0YS1yb2xlJzogJ25vbmUnLFxuICAgICAgY2xhc3NOYW1lOiAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKHByZXZDbGFzc2VzKSxcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5wcm9wcy5jdXJyZW50U2xpZGUsXG4gICAgICBzbGlkZUNvdW50OiB0aGlzLnByb3BzLnNsaWRlQ291bnQsXG4gICAgICBzdHlsZTogeyBkaXNwbGF5OiAnYmxvY2snIH0sXG4gICAgICBvbkNsaWNrOiBwcmV2SGFuZGxlclxuICAgIH07XG4gICAgdmFyIHByZXZBcnJvdztcblxuICAgIGlmICh0aGlzLnByb3BzLnByZXZBcnJvdykge1xuICAgICAgcHJldkFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudCh0aGlzLnByb3BzLnByZXZBcnJvdywgcHJldkFycm93UHJvcHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgIF9leHRlbmRzKHsga2V5OiAnMCcsIHR5cGU6ICdidXR0b24nIH0sIHByZXZBcnJvd1Byb3BzKSxcbiAgICAgICAgJyBQcmV2aW91cydcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZBcnJvdztcbiAgfVxufSk7XG5cbnZhciBOZXh0QXJyb3cgPSBleHBvcnRzLk5leHRBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnTmV4dEFycm93JyxcblxuICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihvcHRpb25zLCBlKSB7XG4gICAgaWYgKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5jbGlja0hhbmRsZXIob3B0aW9ucywgZSk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBuZXh0Q2xhc3NlcyA9IHsgJ3NsaWNrLWFycm93JzogdHJ1ZSwgJ3NsaWNrLW5leHQnOiB0cnVlIH07XG4gICAgdmFyIG5leHRIYW5kbGVyID0gdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzLCB7IG1lc3NhZ2U6ICduZXh0JyB9KTtcblxuICAgIGlmICghX2hlbHBlcnMyLmRlZmF1bHQuY2FuR29OZXh0KHRoaXMucHJvcHMpKSB7XG4gICAgICBuZXh0Q2xhc3Nlc1snc2xpY2stZGlzYWJsZWQnXSA9IHRydWU7XG4gICAgICBuZXh0SGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG5leHRBcnJvd1Byb3BzID0ge1xuICAgICAga2V5OiAnMScsXG4gICAgICAnZGF0YS1yb2xlJzogJ25vbmUnLFxuICAgICAgY2xhc3NOYW1lOiAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKG5leHRDbGFzc2VzKSxcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5wcm9wcy5jdXJyZW50U2xpZGUsXG4gICAgICBzbGlkZUNvdW50OiB0aGlzLnByb3BzLnNsaWRlQ291bnQsXG4gICAgICBzdHlsZTogeyBkaXNwbGF5OiAnYmxvY2snIH0sXG4gICAgICBvbkNsaWNrOiBuZXh0SGFuZGxlclxuICAgIH07XG5cbiAgICB2YXIgbmV4dEFycm93O1xuXG4gICAgaWYgKHRoaXMucHJvcHMubmV4dEFycm93KSB7XG4gICAgICBuZXh0QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KHRoaXMucHJvcHMubmV4dEFycm93LCBuZXh0QXJyb3dQcm9wcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHRBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgX2V4dGVuZHMoeyBrZXk6ICcxJywgdHlwZTogJ2J1dHRvbicgfSwgbmV4dEFycm93UHJvcHMpLFxuICAgICAgICAnIE5leHQnXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBuZXh0QXJyb3c7XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcbi8qIDMxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5Eb3RzID0gdW5kZWZpbmVkO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXG52YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBnZXREb3RDb3VudCA9IGZ1bmN0aW9uIGdldERvdENvdW50KHNwZWMpIHtcbiAgdmFyIGRvdHM7XG4gIGRvdHMgPSBNYXRoLmNlaWwoc3BlYy5zbGlkZUNvdW50IC8gc3BlYy5zbGlkZXNUb1Njcm9sbCk7XG4gIHJldHVybiBkb3RzO1xufTtcblxudmFyIERvdHMgPSBleHBvcnRzLkRvdHMgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ0RvdHMnLFxuXG5cbiAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIob3B0aW9ucywgZSkge1xuICAgIC8vIEluIEF1dG9wbGF5IHRoZSBmb2N1cyBzdGF5cyBvbiBjbGlja2VkIGJ1dHRvbiBldmVuIGFmdGVyIHRyYW5zaXRpb25cbiAgICAvLyB0byBuZXh0IHNsaWRlLiBUaGF0IG9ubHkgZ29lcyBhd2F5IGJ5IGNsaWNrIHNvbWV3aGVyZSBvdXRzaWRlXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMucHJvcHMuY2xpY2tIYW5kbGVyKG9wdGlvbnMpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGRvdENvdW50ID0gZ2V0RG90Q291bnQoe1xuICAgICAgc2xpZGVDb3VudDogdGhpcy5wcm9wcy5zbGlkZUNvdW50LFxuICAgICAgc2xpZGVzVG9TY3JvbGw6IHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGxcbiAgICB9KTtcblxuICAgIC8vIEFwcGx5IGpvaW4gJiBzcGxpdCB0byBBcnJheSB0byBwcmUtZmlsbCBpdCBmb3IgSUU4XG4gICAgLy9cbiAgICAvLyBDcmVkaXQ6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEzNzM1NDI1LzE4NDk0NThcbiAgICB2YXIgZG90cyA9IEFycmF5LmFwcGx5KG51bGwsIEFycmF5KGRvdENvdW50ICsgMSkuam9pbignMCcpLnNwbGl0KCcnKSkubWFwKGZ1bmN0aW9uICh4LCBpKSB7XG5cbiAgICAgIHZhciBsZWZ0Qm91bmQgPSBpICogX3RoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGw7XG4gICAgICB2YXIgcmlnaHRCb3VuZCA9IGkgKiBfdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCArIChfdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCAtIDEpO1xuICAgICAgdmFyIGNsYXNzTmFtZSA9ICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkoe1xuICAgICAgICAnc2xpY2stYWN0aXZlJzogX3RoaXMucHJvcHMuY3VycmVudFNsaWRlID49IGxlZnRCb3VuZCAmJiBfdGhpcy5wcm9wcy5jdXJyZW50U2xpZGUgPD0gcmlnaHRCb3VuZFxuICAgICAgfSk7XG5cbiAgICAgIHZhciBkb3RPcHRpb25zID0ge1xuICAgICAgICBtZXNzYWdlOiAnZG90cycsXG4gICAgICAgIGluZGV4OiBpLFxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogX3RoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwsXG4gICAgICAgIGN1cnJlbnRTbGlkZTogX3RoaXMucHJvcHMuY3VycmVudFNsaWRlXG4gICAgICB9O1xuXG4gICAgICB2YXIgb25DbGljayA9IF90aGlzLmNsaWNrSGFuZGxlci5iaW5kKF90aGlzLCBkb3RPcHRpb25zKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnbGknLFxuICAgICAgICB7IGtleTogaSwgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudChfdGhpcy5wcm9wcy5jdXN0b21QYWdpbmcoaSksIHsgb25DbGljazogb25DbGljayB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICd1bCcsXG4gICAgICB7IGNsYXNzTmFtZTogdGhpcy5wcm9wcy5kb3RzQ2xhc3MsIHN0eWxlOiB7IGRpc3BsYXk6ICdibG9jaycgfSB9LFxuICAgICAgZG90c1xuICAgICk7XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcbi8qIDMxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzE3KTtcblxuLyoqKi8gfSksXG4vKiAzMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGluaXRpYWxTdGF0ZSA9IHtcbiAgICBhbmltYXRpbmc6IGZhbHNlLFxuICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICBhdXRvUGxheVRpbWVyOiBudWxsLFxuICAgIGN1cnJlbnREaXJlY3Rpb246IDAsXG4gICAgY3VycmVudExlZnQ6IG51bGwsXG4gICAgY3VycmVudFNsaWRlOiAwLFxuICAgIGRpcmVjdGlvbjogMSxcbiAgICBsaXN0V2lkdGg6IG51bGwsXG4gICAgbGlzdEhlaWdodDogbnVsbCxcbiAgICAvLyBsb2FkSW5kZXg6IDAsXG4gICAgc2xpZGVDb3VudDogbnVsbCxcbiAgICBzbGlkZVdpZHRoOiBudWxsLFxuICAgIHNsaWRlSGVpZ2h0OiBudWxsLFxuICAgIC8vIHNsaWRpbmc6IGZhbHNlLFxuICAgIC8vIHNsaWRlT2Zmc2V0OiAwLFxuICAgIHN3aXBlTGVmdDogbnVsbCxcbiAgICB0b3VjaE9iamVjdDoge1xuICAgICAgICBzdGFydFg6IDAsXG4gICAgICAgIHN0YXJ0WTogMCxcbiAgICAgICAgY3VyWDogMCxcbiAgICAgICAgY3VyWTogMFxuICAgIH0sXG5cbiAgICBsYXp5TG9hZGVkTGlzdDogW10sXG5cbiAgICAvLyBhZGRlZCBmb3IgcmVhY3RcbiAgICBpbml0aWFsaXplZDogZmFsc2UsXG4gICAgZWRnZURyYWdnZWQ6IGZhbHNlLFxuICAgIHN3aXBlZDogZmFsc2UsIC8vIHVzZWQgYnkgc3dpcGVFdmVudC4gZGlmZmVyZW50aXRlcyBiZXR3ZWVuIHRvdWNoIGFuZCBzd2lwZS5cbiAgICB0cmFja1N0eWxlOiB7fSxcbiAgICB0cmFja1dpZHRoOiAwXG5cbiAgICAvLyBSZW1vdmVkXG4gICAgLy8gdHJhbnNmb3Jtc0VuYWJsZWQ6IGZhbHNlLFxuICAgIC8vICRuZXh0QXJyb3c6IG51bGwsXG4gICAgLy8gJHByZXZBcnJvdzogbnVsbCxcbiAgICAvLyAkZG90czogbnVsbCxcbiAgICAvLyAkbGlzdDogbnVsbCxcbiAgICAvLyAkc2xpZGVUcmFjazogbnVsbCxcbiAgICAvLyAkc2xpZGVzOiBudWxsLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbml0aWFsU3RhdGU7XG5cbi8qKiovIH0pLFxuLyogMzE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLklubmVyU2xpZGVyID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfZXZlbnRIYW5kbGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMzE2KTtcblxudmFyIF9ldmVudEhhbmRsZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V2ZW50SGFuZGxlcnMpO1xuXG52YXIgX2hlbHBlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTtcblxudmFyIF9oZWxwZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlbHBlcnMpO1xuXG52YXIgX2luaXRpYWxTdGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzE0KTtcblxudmFyIF9pbml0aWFsU3RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5pdGlhbFN0YXRlKTtcblxudmFyIF9kZWZhdWx0UHJvcHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7XG5cbnZhciBfZGVmYXVsdFByb3BzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmF1bHRQcm9wcyk7XG5cbnZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXG52YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cbnZhciBfb2JqZWN0QXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxudmFyIF90cmFjayA9IF9fd2VicGFja19yZXF1aXJlX18oMzE4KTtcblxudmFyIF9kb3RzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTIpO1xuXG52YXIgX2Fycm93cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzExKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIElubmVyU2xpZGVyID0gZXhwb3J0cy5Jbm5lclNsaWRlciA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnSW5uZXJTbGlkZXInLFxuXG4gIG1peGluczogW19oZWxwZXJzMi5kZWZhdWx0LCBfZXZlbnRIYW5kbGVyczIuZGVmYXVsdF0sXG4gIGxpc3Q6IG51bGwsXG4gIHRyYWNrOiBudWxsLFxuICBsaXN0UmVmSGFuZGxlcjogZnVuY3Rpb24gbGlzdFJlZkhhbmRsZXIocmVmKSB7XG4gICAgdGhpcy5saXN0ID0gcmVmO1xuICB9LFxuICB0cmFja1JlZkhhbmRsZXI6IGZ1bmN0aW9uIHRyYWNrUmVmSGFuZGxlcihyZWYpIHtcbiAgICB0aGlzLnRyYWNrID0gcmVmO1xuICB9LFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIF9pbml0aWFsU3RhdGUyLmRlZmF1bHQsIHtcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5wcm9wcy5pbml0aWFsU2xpZGVcbiAgICB9KTtcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvcHMyLmRlZmF1bHQ7XG4gIH0sXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLmluaXQpIHtcbiAgICAgIHRoaXMucHJvcHMuaW5pdCgpO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1vdW50ZWQ6IHRydWVcbiAgICB9KTtcbiAgICB2YXIgbGF6eUxvYWRlZExpc3QgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5jb3VudCh0aGlzLnByb3BzLmNoaWxkcmVuKTsgaSsrKSB7XG4gICAgICBpZiAoaSA+PSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSAmJiBpIDwgdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgKyB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdykge1xuICAgICAgICBsYXp5TG9hZGVkTGlzdC5wdXNoKGkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmxhenlMb2FkICYmIHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgbGF6eUxvYWRlZExpc3Q6IGxhenlMb2FkZWRMaXN0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyBIYWNrIGZvciBhdXRvcGxheSAtLSBJbnNwZWN0IExhdGVyXG4gICAgdGhpcy5pbml0aWFsaXplKHRoaXMucHJvcHMpO1xuICAgIHRoaXMuYWRhcHRIZWlnaHQoKTtcblxuICAgIC8vIFRvIHN1cHBvcnQgc2VydmVyLXNpZGUgcmVuZGVyaW5nXG4gICAgaWYgKCF3aW5kb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29ucmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZWQpO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIGlmICh0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5hbmltYXRpb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25XaW5kb3dSZXNpemVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmRldGFjaEV2ZW50KCdvbnJlc2l6ZScsIHRoaXMub25XaW5kb3dSZXNpemVkKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuYXV0b1BsYXlUaW1lcikge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0YXRlLmF1dG9QbGF5VGltZXIpO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5zbGlja0dvVG8gIT0gbmV4dFByb3BzLnNsaWNrR29Ubykge1xuICAgICAgaWYgKGZhbHNlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybigncmVhY3Qtc2xpY2sgZGVwcmVjYXRpb24gd2FybmluZzogc2xpY2tHb1RvIHByb3AgaXMgZGVwcmVjYXRlZCBhbmQgaXQgd2lsbCBiZSByZW1vdmVkIGluIG5leHQgcmVsZWFzZS4gVXNlIHNsaWNrR29UbyBtZXRob2QgaW5zdGVhZCcpO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGFuZ2VTbGlkZSh7XG4gICAgICAgIG1lc3NhZ2U6ICdpbmRleCcsXG4gICAgICAgIGluZGV4OiBuZXh0UHJvcHMuc2xpY2tHb1RvLFxuICAgICAgICBjdXJyZW50U2xpZGU6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNsaWRlID49IG5leHRQcm9wcy5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIHRoaXMudXBkYXRlKG5leHRQcm9wcyk7XG4gICAgICB0aGlzLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgbWVzc2FnZTogJ2luZGV4JyxcbiAgICAgICAgaW5kZXg6IG5leHRQcm9wcy5jaGlsZHJlbi5sZW5ndGggLSBuZXh0UHJvcHMuc2xpZGVzVG9TaG93LFxuICAgICAgICBjdXJyZW50U2xpZGU6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGUobmV4dFByb3BzKTtcbiAgICB9XG4gIH0sXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMuYWRhcHRIZWlnaHQoKTtcbiAgfSxcbiAgb25XaW5kb3dSZXNpemVkOiBmdW5jdGlvbiBvbldpbmRvd1Jlc2l6ZWQoKSB7XG4gICAgdGhpcy51cGRhdGUodGhpcy5wcm9wcyk7XG4gICAgLy8gYW5pbWF0aW5nIHN0YXRlIHNob3VsZCBiZSBjbGVhcmVkIHdoaWxlIHJlc2l6aW5nLCBvdGhlcndpc2UgYXV0b3BsYXkgc3RvcHMgd29ya2luZ1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYW5pbWF0aW5nOiBmYWxzZVxuICAgIH0pO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrKTtcbiAgICBkZWxldGUgdGhpcy5hbmltYXRpb25FbmRDYWxsYmFjaztcbiAgfSxcbiAgc2xpY2tQcmV2OiBmdW5jdGlvbiBzbGlja1ByZXYoKSB7XG4gICAgdGhpcy5jaGFuZ2VTbGlkZSh7IG1lc3NhZ2U6ICdwcmV2aW91cycgfSk7XG4gIH0sXG4gIHNsaWNrTmV4dDogZnVuY3Rpb24gc2xpY2tOZXh0KCkge1xuICAgIHRoaXMuY2hhbmdlU2xpZGUoeyBtZXNzYWdlOiAnbmV4dCcgfSk7XG4gIH0sXG4gIHNsaWNrR29UbzogZnVuY3Rpb24gc2xpY2tHb1RvKHNsaWRlKSB7XG4gICAgdHlwZW9mIHNsaWRlID09PSAnbnVtYmVyJyAmJiB0aGlzLmNoYW5nZVNsaWRlKHtcbiAgICAgIG1lc3NhZ2U6ICdpbmRleCcsXG4gICAgICBpbmRleDogc2xpZGUsXG4gICAgICBjdXJyZW50U2xpZGU6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlXG4gICAgfSk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBjbGFzc05hbWUgPSAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKCdzbGljay1pbml0aWFsaXplZCcsICdzbGljay1zbGlkZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSwge1xuICAgICAgJ3NsaWNrLXZlcnRpY2FsJzogdGhpcy5wcm9wcy52ZXJ0aWNhbFxuICAgIH0pO1xuXG4gICAgdmFyIHRyYWNrUHJvcHMgPSB7XG4gICAgICBmYWRlOiB0aGlzLnByb3BzLmZhZGUsXG4gICAgICBjc3NFYXNlOiB0aGlzLnByb3BzLmNzc0Vhc2UsXG4gICAgICBzcGVlZDogdGhpcy5wcm9wcy5zcGVlZCxcbiAgICAgIGluZmluaXRlOiB0aGlzLnByb3BzLmluZmluaXRlLFxuICAgICAgY2VudGVyTW9kZTogdGhpcy5wcm9wcy5jZW50ZXJNb2RlLFxuICAgICAgZm9jdXNPblNlbGVjdDogdGhpcy5wcm9wcy5mb2N1c09uU2VsZWN0ID8gdGhpcy5zZWxlY3RIYW5kbGVyIDogbnVsbCxcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICBsYXp5TG9hZDogdGhpcy5wcm9wcy5sYXp5TG9hZCxcbiAgICAgIGxhenlMb2FkZWRMaXN0OiB0aGlzLnN0YXRlLmxhenlMb2FkZWRMaXN0LFxuICAgICAgcnRsOiB0aGlzLnByb3BzLnJ0bCxcbiAgICAgIHNsaWRlV2lkdGg6IHRoaXMuc3RhdGUuc2xpZGVXaWR0aCxcbiAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3csXG4gICAgICBzbGlkZXNUb1Njcm9sbDogdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCxcbiAgICAgIHNsaWRlQ291bnQ6IHRoaXMuc3RhdGUuc2xpZGVDb3VudCxcbiAgICAgIHRyYWNrU3R5bGU6IHRoaXMuc3RhdGUudHJhY2tTdHlsZSxcbiAgICAgIHZhcmlhYmxlV2lkdGg6IHRoaXMucHJvcHMudmFyaWFibGVXaWR0aFxuICAgIH07XG5cbiAgICB2YXIgZG90cztcblxuICAgIGlmICh0aGlzLnByb3BzLmRvdHMgPT09IHRydWUgJiYgdGhpcy5zdGF0ZS5zbGlkZUNvdW50ID49IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93KSB7XG4gICAgICB2YXIgZG90UHJvcHMgPSB7XG4gICAgICAgIGRvdHNDbGFzczogdGhpcy5wcm9wcy5kb3RzQ2xhc3MsXG4gICAgICAgIHNsaWRlQ291bnQ6IHRoaXMuc3RhdGUuc2xpZGVDb3VudCxcbiAgICAgICAgc2xpZGVzVG9TaG93OiB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyxcbiAgICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwsXG4gICAgICAgIGNsaWNrSGFuZGxlcjogdGhpcy5jaGFuZ2VTbGlkZSxcbiAgICAgICAgY2hpbGRyZW46IHRoaXMucHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGN1c3RvbVBhZ2luZzogdGhpcy5wcm9wcy5jdXN0b21QYWdpbmdcbiAgICAgIH07XG5cbiAgICAgIGRvdHMgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZG90cy5Eb3RzLCBkb3RQcm9wcyk7XG4gICAgfVxuXG4gICAgdmFyIHByZXZBcnJvdywgbmV4dEFycm93O1xuXG4gICAgdmFyIGFycm93UHJvcHMgPSB7XG4gICAgICBpbmZpbml0ZTogdGhpcy5wcm9wcy5pbmZpbml0ZSxcbiAgICAgIGNlbnRlck1vZGU6IHRoaXMucHJvcHMuY2VudGVyTW9kZSxcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICBzbGlkZUNvdW50OiB0aGlzLnN0YXRlLnNsaWRlQ291bnQsXG4gICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93LFxuICAgICAgcHJldkFycm93OiB0aGlzLnByb3BzLnByZXZBcnJvdyxcbiAgICAgIG5leHRBcnJvdzogdGhpcy5wcm9wcy5uZXh0QXJyb3csXG4gICAgICBjbGlja0hhbmRsZXI6IHRoaXMuY2hhbmdlU2xpZGVcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMucHJvcHMuYXJyb3dzKSB7XG4gICAgICBwcmV2QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYXJyb3dzLlByZXZBcnJvdywgYXJyb3dQcm9wcyk7XG4gICAgICBuZXh0QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYXJyb3dzLk5leHRBcnJvdywgYXJyb3dQcm9wcyk7XG4gICAgfVxuXG4gICAgdmFyIHZlcnRpY2FsSGVpZ2h0U3R5bGUgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWwpIHtcbiAgICAgIHZlcnRpY2FsSGVpZ2h0U3R5bGUgPSB7XG4gICAgICAgIGhlaWdodDogdGhpcy5zdGF0ZS5saXN0SGVpZ2h0XG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBjZW50ZXJQYWRkaW5nU3R5bGUgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWwgPT09IGZhbHNlKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG4gICAgICAgIGNlbnRlclBhZGRpbmdTdHlsZSA9IHtcbiAgICAgICAgICBwYWRkaW5nOiAnMHB4ICcgKyB0aGlzLnByb3BzLmNlbnRlclBhZGRpbmdcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjZW50ZXJQYWRkaW5nU3R5bGUgPSB7XG4gICAgICAgICAgcGFkZGluZzogdGhpcy5wcm9wcy5jZW50ZXJQYWRkaW5nICsgJyAwcHgnXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpc3RTdHlsZSA9ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgdmVydGljYWxIZWlnaHRTdHlsZSwgY2VudGVyUGFkZGluZ1N0eWxlKTtcblxuICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICdkaXYnLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLm9uSW5uZXJTbGlkZXJFbnRlcixcbiAgICAgICAgb25Nb3VzZUxlYXZlOiB0aGlzLm9uSW5uZXJTbGlkZXJMZWF2ZSxcbiAgICAgICAgb25Nb3VzZU92ZXI6IHRoaXMub25Jbm5lclNsaWRlck92ZXJcbiAgICAgIH0sXG4gICAgICBwcmV2QXJyb3csXG4gICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHtcbiAgICAgICAgICByZWY6IHRoaXMubGlzdFJlZkhhbmRsZXIsXG4gICAgICAgICAgY2xhc3NOYW1lOiAnc2xpY2stbGlzdCcsXG4gICAgICAgICAgc3R5bGU6IGxpc3RTdHlsZSxcbiAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5zd2lwZVN0YXJ0LFxuICAgICAgICAgIG9uTW91c2VNb3ZlOiB0aGlzLnN0YXRlLmRyYWdnaW5nID8gdGhpcy5zd2lwZU1vdmUgOiBudWxsLFxuICAgICAgICAgIG9uTW91c2VVcDogdGhpcy5zd2lwZUVuZCxcbiAgICAgICAgICBvbk1vdXNlTGVhdmU6IHRoaXMuc3RhdGUuZHJhZ2dpbmcgPyB0aGlzLnN3aXBlRW5kIDogbnVsbCxcbiAgICAgICAgICBvblRvdWNoU3RhcnQ6IHRoaXMuc3dpcGVTdGFydCxcbiAgICAgICAgICBvblRvdWNoTW92ZTogdGhpcy5zdGF0ZS5kcmFnZ2luZyA/IHRoaXMuc3dpcGVNb3ZlIDogbnVsbCxcbiAgICAgICAgICBvblRvdWNoRW5kOiB0aGlzLnN3aXBlRW5kLFxuICAgICAgICAgIG9uVG91Y2hDYW5jZWw6IHRoaXMuc3RhdGUuZHJhZ2dpbmcgPyB0aGlzLnN3aXBlRW5kIDogbnVsbCxcbiAgICAgICAgICBvbktleURvd246IHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eSA/IHRoaXMua2V5SGFuZGxlciA6IG51bGwgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX3RyYWNrLlRyYWNrLFxuICAgICAgICAgIF9leHRlbmRzKHsgcmVmOiB0aGlzLnRyYWNrUmVmSGFuZGxlciB9LCB0cmFja1Byb3BzKSxcbiAgICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICAgIClcbiAgICAgICksXG4gICAgICBuZXh0QXJyb3csXG4gICAgICBkb3RzXG4gICAgKTtcbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuLyogMzE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfdHJhY2tIZWxwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MCk7XG5cbnZhciBfaGVscGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXG52YXIgX2hlbHBlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVscGVycyk7XG5cbnZhciBfb2JqZWN0QXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxudmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEV2ZW50SGFuZGxlcnMgPSB7XG4gIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHByZXZpb3VzIGFuZCBuZXh0XG4gIGNoYW5nZVNsaWRlOiBmdW5jdGlvbiBjaGFuZ2VTbGlkZShvcHRpb25zKSB7XG4gICAgdmFyIGluZGV4T2Zmc2V0LCBwcmV2aW91c0ludCwgc2xpZGVPZmZzZXQsIHVuZXZlbk9mZnNldCwgdGFyZ2V0U2xpZGU7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgdmFyIHNsaWRlc1RvU2Nyb2xsID0gX3Byb3BzLnNsaWRlc1RvU2Nyb2xsO1xuICAgIHZhciBzbGlkZXNUb1Nob3cgPSBfcHJvcHMuc2xpZGVzVG9TaG93O1xuICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBzbGlkZUNvdW50ID0gX3N0YXRlLnNsaWRlQ291bnQ7XG4gICAgdmFyIGN1cnJlbnRTbGlkZSA9IF9zdGF0ZS5jdXJyZW50U2xpZGU7XG5cbiAgICB1bmV2ZW5PZmZzZXQgPSBzbGlkZUNvdW50ICUgc2xpZGVzVG9TY3JvbGwgIT09IDA7XG4gICAgaW5kZXhPZmZzZXQgPSB1bmV2ZW5PZmZzZXQgPyAwIDogKHNsaWRlQ291bnQgLSBjdXJyZW50U2xpZGUpICUgc2xpZGVzVG9TY3JvbGw7XG5cbiAgICBpZiAob3B0aW9ucy5tZXNzYWdlID09PSAncHJldmlvdXMnKSB7XG4gICAgICBzbGlkZU9mZnNldCA9IGluZGV4T2Zmc2V0ID09PSAwID8gc2xpZGVzVG9TY3JvbGwgOiBzbGlkZXNUb1Nob3cgLSBpbmRleE9mZnNldDtcbiAgICAgIHRhcmdldFNsaWRlID0gY3VycmVudFNsaWRlIC0gc2xpZGVPZmZzZXQ7XG4gICAgICBpZiAodGhpcy5wcm9wcy5sYXp5TG9hZCkge1xuICAgICAgICBwcmV2aW91c0ludCA9IGN1cnJlbnRTbGlkZSAtIHNsaWRlT2Zmc2V0O1xuICAgICAgICB0YXJnZXRTbGlkZSA9IHByZXZpb3VzSW50ID09PSAtMSA/IHNsaWRlQ291bnQgLSAxIDogcHJldmlvdXNJbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1lc3NhZ2UgPT09ICduZXh0Jykge1xuICAgICAgc2xpZGVPZmZzZXQgPSBpbmRleE9mZnNldCA9PT0gMCA/IHNsaWRlc1RvU2Nyb2xsIDogaW5kZXhPZmZzZXQ7XG4gICAgICB0YXJnZXRTbGlkZSA9IGN1cnJlbnRTbGlkZSArIHNsaWRlT2Zmc2V0O1xuICAgICAgaWYgKHRoaXMucHJvcHMubGF6eUxvYWQpIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSAoY3VycmVudFNsaWRlICsgc2xpZGVzVG9TY3JvbGwpICUgc2xpZGVDb3VudCArIGluZGV4T2Zmc2V0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5tZXNzYWdlID09PSAnZG90cycgfHwgb3B0aW9ucy5tZXNzYWdlID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAvLyBDbGljayBvbiBkb3RzXG4gICAgICB0YXJnZXRTbGlkZSA9IG9wdGlvbnMuaW5kZXggKiBvcHRpb25zLnNsaWRlc1RvU2Nyb2xsO1xuICAgICAgaWYgKHRhcmdldFNsaWRlID09PSBvcHRpb25zLmN1cnJlbnRTbGlkZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1lc3NhZ2UgPT09ICdpbmRleCcpIHtcbiAgICAgIHRhcmdldFNsaWRlID0gcGFyc2VJbnQob3B0aW9ucy5pbmRleCk7XG4gICAgICBpZiAodGFyZ2V0U2xpZGUgPT09IG9wdGlvbnMuY3VycmVudFNsaWRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNsaWRlSGFuZGxlcih0YXJnZXRTbGlkZSk7XG4gIH0sXG5cbiAgLy8gQWNjZXNzaWJsaXR5IGhhbmRsZXIgZm9yIHByZXZpb3VzIGFuZCBuZXh0XG4gIGtleUhhbmRsZXI6IGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuICAgIC8vRG9udCBzbGlkZSBpZiB0aGUgY3Vyc29yIGlzIGluc2lkZSB0aGUgZm9ybSBmaWVsZHMgYW5kIGFycm93IGtleXMgYXJlIHByZXNzZWRcbiAgICBpZiAoIWUudGFyZ2V0LnRhZ05hbWUubWF0Y2goJ1RFWFRBUkVBfElOUFVUfFNFTEVDVCcpKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAzNyAmJiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VTbGlkZSh7XG4gICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy5ydGwgPT09IHRydWUgPyAnbmV4dCcgOiAncHJldmlvdXMnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM5ICYmIHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLnJ0bCA9PT0gdHJ1ZSA/ICdwcmV2aW91cycgOiAnbmV4dCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAvLyBGb2N1cyBvbiBzZWxlY3RpbmcgYSBzbGlkZSAoY2xpY2sgaGFuZGxlciBvbiB0cmFjaylcbiAgc2VsZWN0SGFuZGxlcjogZnVuY3Rpb24gc2VsZWN0SGFuZGxlcihvcHRpb25zKSB7XG4gICAgdGhpcy5jaGFuZ2VTbGlkZShvcHRpb25zKTtcbiAgfSxcbiAgc3dpcGVTdGFydDogZnVuY3Rpb24gc3dpcGVTdGFydChlKSB7XG4gICAgdmFyIHRvdWNoZXMsIHBvc1gsIHBvc1k7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5zd2lwZSA9PT0gZmFsc2UgfHwgJ29udG91Y2hlbmQnIGluIGRvY3VtZW50ICYmIHRoaXMucHJvcHMuc3dpcGUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmRyYWdnYWJsZSA9PT0gZmFsc2UgJiYgZS50eXBlLmluZGV4T2YoJ21vdXNlJykgIT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHBvc1ggPSBlLnRvdWNoZXMgIT09IHVuZGVmaW5lZCA/IGUudG91Y2hlc1swXS5wYWdlWCA6IGUuY2xpZW50WDtcbiAgICBwb3NZID0gZS50b3VjaGVzICE9PSB1bmRlZmluZWQgPyBlLnRvdWNoZXNbMF0ucGFnZVkgOiBlLmNsaWVudFk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkcmFnZ2luZzogdHJ1ZSxcbiAgICAgIHRvdWNoT2JqZWN0OiB7XG4gICAgICAgIHN0YXJ0WDogcG9zWCxcbiAgICAgICAgc3RhcnRZOiBwb3NZLFxuICAgICAgICBjdXJYOiBwb3NYLFxuICAgICAgICBjdXJZOiBwb3NZXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHN3aXBlTW92ZTogZnVuY3Rpb24gc3dpcGVNb3ZlKGUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZHJhZ2dpbmcpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuYW5pbWF0aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsICYmIHRoaXMucHJvcHMuc3dpcGVUb1NsaWRlICYmIHRoaXMucHJvcHMudmVydGljYWxTd2lwaW5nKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIHZhciBzd2lwZUxlZnQ7XG4gICAgdmFyIGN1ckxlZnQsIHBvc2l0aW9uT2Zmc2V0O1xuICAgIHZhciB0b3VjaE9iamVjdCA9IHRoaXMuc3RhdGUudG91Y2hPYmplY3Q7XG5cbiAgICBjdXJMZWZ0ID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0xlZnQpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7XG4gICAgICBzbGlkZUluZGV4OiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpO1xuICAgIHRvdWNoT2JqZWN0LmN1clggPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVggOiBlLmNsaWVudFg7XG4gICAgdG91Y2hPYmplY3QuY3VyWSA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5wYWdlWSA6IGUuY2xpZW50WTtcbiAgICB0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KE1hdGgucG93KHRvdWNoT2JqZWN0LmN1clggLSB0b3VjaE9iamVjdC5zdGFydFgsIDIpKSk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcpIHtcbiAgICAgIHRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID0gTWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3codG91Y2hPYmplY3QuY3VyWSAtIHRvdWNoT2JqZWN0LnN0YXJ0WSwgMikpKTtcbiAgICB9XG5cbiAgICBwb3NpdGlvbk9mZnNldCA9ICh0aGlzLnByb3BzLnJ0bCA9PT0gZmFsc2UgPyAxIDogLTEpICogKHRvdWNoT2JqZWN0LmN1clggPiB0b3VjaE9iamVjdC5zdGFydFggPyAxIDogLTEpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWxTd2lwaW5nKSB7XG4gICAgICBwb3NpdGlvbk9mZnNldCA9IHRvdWNoT2JqZWN0LmN1clkgPiB0b3VjaE9iamVjdC5zdGFydFkgPyAxIDogLTE7XG4gICAgfVxuXG4gICAgdmFyIGN1cnJlbnRTbGlkZSA9IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlO1xuICAgIHZhciBkb3RDb3VudCA9IE1hdGguY2VpbCh0aGlzLnN0YXRlLnNsaWRlQ291bnQgLyB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsKTtcbiAgICB2YXIgc3dpcGVEaXJlY3Rpb24gPSB0aGlzLnN3aXBlRGlyZWN0aW9uKHRoaXMuc3RhdGUudG91Y2hPYmplY3QpO1xuICAgIHZhciB0b3VjaFN3aXBlTGVuZ3RoID0gdG91Y2hPYmplY3Quc3dpcGVMZW5ndGg7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChjdXJyZW50U2xpZGUgPT09IDAgJiYgc3dpcGVEaXJlY3Rpb24gPT09ICdyaWdodCcgfHwgY3VycmVudFNsaWRlICsgMSA+PSBkb3RDb3VudCAmJiBzd2lwZURpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgIHRvdWNoU3dpcGVMZW5ndGggPSB0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCAqIHRoaXMucHJvcHMuZWRnZUZyaWN0aW9uO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVkZ2VEcmFnZ2VkID09PSBmYWxzZSAmJiB0aGlzLnByb3BzLmVkZ2VFdmVudCkge1xuICAgICAgICAgIHRoaXMucHJvcHMuZWRnZUV2ZW50KHN3aXBlRGlyZWN0aW9uKTtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZWRnZURyYWdnZWQ6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5zd2lwZWQgPT09IGZhbHNlICYmIHRoaXMucHJvcHMuc3dpcGVFdmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5zd2lwZUV2ZW50KHN3aXBlRGlyZWN0aW9uKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBzd2lwZWQ6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnByb3BzLnZlcnRpY2FsKSB7XG4gICAgICBzd2lwZUxlZnQgPSBjdXJMZWZ0ICsgdG91Y2hTd2lwZUxlbmd0aCAqIHBvc2l0aW9uT2Zmc2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZUxlZnQgPSBjdXJMZWZ0ICsgdG91Y2hTd2lwZUxlbmd0aCAqICh0aGlzLnN0YXRlLmxpc3RIZWlnaHQgLyB0aGlzLnN0YXRlLmxpc3RXaWR0aCkgKiBwb3NpdGlvbk9mZnNldDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcpIHtcbiAgICAgIHN3aXBlTGVmdCA9IGN1ckxlZnQgKyB0b3VjaFN3aXBlTGVuZ3RoICogcG9zaXRpb25PZmZzZXQ7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB0b3VjaE9iamVjdDogdG91Y2hPYmplY3QsXG4gICAgICBzd2lwZUxlZnQ6IHN3aXBlTGVmdCxcbiAgICAgIHRyYWNrU3R5bGU6ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IHN3aXBlTGVmdCB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSlcbiAgICB9KTtcblxuICAgIGlmIChNYXRoLmFicyh0b3VjaE9iamVjdC5jdXJYIC0gdG91Y2hPYmplY3Quc3RhcnRYKSA8IE1hdGguYWJzKHRvdWNoT2JqZWN0LmN1clkgLSB0b3VjaE9iamVjdC5zdGFydFkpICogMC44KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA+IDQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sXG4gIGdldE5hdmlnYWJsZUluZGV4ZXM6IGZ1bmN0aW9uIGdldE5hdmlnYWJsZUluZGV4ZXMoKSB7XG4gICAgdmFyIG1heCA9IHZvaWQgMDtcbiAgICB2YXIgYnJlYWtQb2ludCA9IDA7XG4gICAgdmFyIGNvdW50ZXIgPSAwO1xuICAgIHZhciBpbmRleGVzID0gW107XG5cbiAgICBpZiAoIXRoaXMucHJvcHMuaW5maW5pdGUpIHtcbiAgICAgIG1heCA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWtQb2ludCA9IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93ICogLTE7XG4gICAgICBjb3VudGVyID0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cgKiAtMTtcbiAgICAgIG1heCA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudCAqIDI7XG4gICAgfVxuXG4gICAgd2hpbGUgKGJyZWFrUG9pbnQgPCBtYXgpIHtcbiAgICAgIGluZGV4ZXMucHVzaChicmVha1BvaW50KTtcbiAgICAgIGJyZWFrUG9pbnQgPSBjb3VudGVyICsgdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcblxuICAgICAgY291bnRlciArPSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsIDw9IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93ID8gdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCA6IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93O1xuICAgIH1cblxuICAgIHJldHVybiBpbmRleGVzO1xuICB9LFxuICBjaGVja05hdmlnYWJsZTogZnVuY3Rpb24gY2hlY2tOYXZpZ2FibGUoaW5kZXgpIHtcbiAgICB2YXIgbmF2aWdhYmxlcyA9IHRoaXMuZ2V0TmF2aWdhYmxlSW5kZXhlcygpO1xuICAgIHZhciBwcmV2TmF2aWdhYmxlID0gMDtcblxuICAgIGlmIChpbmRleCA+IG5hdmlnYWJsZXNbbmF2aWdhYmxlcy5sZW5ndGggLSAxXSkge1xuICAgICAgaW5kZXggPSBuYXZpZ2FibGVzW25hdmlnYWJsZXMubGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIG4gaW4gbmF2aWdhYmxlcykge1xuICAgICAgICBpZiAoaW5kZXggPCBuYXZpZ2FibGVzW25dKSB7XG4gICAgICAgICAgaW5kZXggPSBwcmV2TmF2aWdhYmxlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJldk5hdmlnYWJsZSA9IG5hdmlnYWJsZXNbbl07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9LFxuICBnZXRTbGlkZUNvdW50OiBmdW5jdGlvbiBnZXRTbGlkZUNvdW50KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgY2VudGVyT2Zmc2V0ID0gdGhpcy5wcm9wcy5jZW50ZXJNb2RlID8gdGhpcy5zdGF0ZS5zbGlkZVdpZHRoICogTWF0aC5mbG9vcih0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyAvIDIpIDogMDtcblxuICAgIGlmICh0aGlzLnByb3BzLnN3aXBlVG9TbGlkZSkge1xuICAgICAgdmFyIHN3aXBlZFNsaWRlID0gdm9pZCAwO1xuXG4gICAgICB2YXIgc2xpY2tMaXN0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMubGlzdCk7XG5cbiAgICAgIHZhciBzbGlkZXMgPSBzbGlja0xpc3QucXVlcnlTZWxlY3RvckFsbCgnLnNsaWNrLXNsaWRlJyk7XG5cbiAgICAgIEFycmF5LmZyb20oc2xpZGVzKS5ldmVyeShmdW5jdGlvbiAoc2xpZGUpIHtcbiAgICAgICAgaWYgKCFfdGhpcy5wcm9wcy52ZXJ0aWNhbCkge1xuICAgICAgICAgIGlmIChzbGlkZS5vZmZzZXRMZWZ0IC0gY2VudGVyT2Zmc2V0ICsgX3RoaXMuZ2V0V2lkdGgoc2xpZGUpIC8gMiA+IF90aGlzLnN0YXRlLnN3aXBlTGVmdCAqIC0xKSB7XG4gICAgICAgICAgICBzd2lwZWRTbGlkZSA9IHNsaWRlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc2xpZGUub2Zmc2V0VG9wICsgX3RoaXMuZ2V0SGVpZ2h0KHNsaWRlKSAvIDIgPiBfdGhpcy5zdGF0ZS5zd2lwZUxlZnQgKiAtMSkge1xuICAgICAgICAgICAgc3dpcGVkU2xpZGUgPSBzbGlkZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgc2xpZGVzVHJhdmVyc2VkID0gTWF0aC5hYnMoc3dpcGVkU2xpZGUuZGF0YXNldC5pbmRleCAtIHRoaXMuc3RhdGUuY3VycmVudFNsaWRlKSB8fCAxO1xuXG4gICAgICByZXR1cm4gc2xpZGVzVHJhdmVyc2VkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcbiAgICB9XG4gIH0sXG5cbiAgc3dpcGVFbmQ6IGZ1bmN0aW9uIHN3aXBlRW5kKGUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZHJhZ2dpbmcpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLnN3aXBlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRvdWNoT2JqZWN0ID0gdGhpcy5zdGF0ZS50b3VjaE9iamVjdDtcbiAgICB2YXIgbWluU3dpcGUgPSB0aGlzLnN0YXRlLmxpc3RXaWR0aCAvIHRoaXMucHJvcHMudG91Y2hUaHJlc2hvbGQ7XG4gICAgdmFyIHN3aXBlRGlyZWN0aW9uID0gdGhpcy5zd2lwZURpcmVjdGlvbih0b3VjaE9iamVjdCk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcpIHtcbiAgICAgIG1pblN3aXBlID0gdGhpcy5zdGF0ZS5saXN0SGVpZ2h0IC8gdGhpcy5wcm9wcy50b3VjaFRocmVzaG9sZDtcbiAgICB9XG5cbiAgICAvLyByZXNldCB0aGUgc3RhdGUgb2YgdG91Y2ggcmVsYXRlZCBzdGF0ZSB2YXJpYWJsZXMuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkcmFnZ2luZzogZmFsc2UsXG4gICAgICBlZGdlRHJhZ2dlZDogZmFsc2UsXG4gICAgICBzd2lwZWQ6IGZhbHNlLFxuICAgICAgc3dpcGVMZWZ0OiBudWxsLFxuICAgICAgdG91Y2hPYmplY3Q6IHt9XG4gICAgfSk7XG4gICAgLy8gRml4IGZvciAjMTNcbiAgICBpZiAoIXRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA+IG1pblN3aXBlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHZhciBzbGlkZUNvdW50ID0gdm9pZCAwLFxuICAgICAgICAgIG5ld1NsaWRlID0gdm9pZCAwO1xuXG4gICAgICBzd2l0Y2ggKHN3aXBlRGlyZWN0aW9uKSB7XG5cbiAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICAgIG5ld1NsaWRlID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgKyB0aGlzLmdldFNsaWRlQ291bnQoKTtcbiAgICAgICAgICBzbGlkZUNvdW50ID0gdGhpcy5wcm9wcy5zd2lwZVRvU2xpZGUgPyB0aGlzLmNoZWNrTmF2aWdhYmxlKG5ld1NsaWRlKSA6IG5ld1NsaWRlO1xuICAgICAgICAgIHRoaXMuc3RhdGUuY3VycmVudERpcmVjdGlvbiA9IDA7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICBjYXNlICd1cCc6XG4gICAgICAgICAgbmV3U2xpZGUgPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSAtIHRoaXMuZ2V0U2xpZGVDb3VudCgpO1xuICAgICAgICAgIHNsaWRlQ291bnQgPSB0aGlzLnByb3BzLnN3aXBlVG9TbGlkZSA/IHRoaXMuY2hlY2tOYXZpZ2FibGUobmV3U2xpZGUpIDogbmV3U2xpZGU7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50RGlyZWN0aW9uID0gMTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHNsaWRlQ291bnQgPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZTtcblxuICAgICAgfVxuXG4gICAgICB0aGlzLnNsaWRlSGFuZGxlcihzbGlkZUNvdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQWRqdXN0IHRoZSB0cmFjayBiYWNrIHRvIGl0J3Mgb3JpZ2luYWwgcG9zaXRpb24uXG4gICAgICB2YXIgY3VycmVudExlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgICAgc2xpZGVJbmRleDogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgICB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB0cmFja1N0eWxlOiAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQW5pbWF0ZUNTUykoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgbGVmdDogY3VycmVudExlZnQgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIG9uSW5uZXJTbGlkZXJFbnRlcjogZnVuY3Rpb24gb25Jbm5lclNsaWRlckVudGVyKGUpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvcGxheSAmJiB0aGlzLnByb3BzLnBhdXNlT25Ib3Zlcikge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgIH1cbiAgfSxcbiAgb25Jbm5lclNsaWRlck92ZXI6IGZ1bmN0aW9uIG9uSW5uZXJTbGlkZXJPdmVyKGUpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvcGxheSAmJiB0aGlzLnByb3BzLnBhdXNlT25Ib3Zlcikge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgIH1cbiAgfSxcbiAgb25Jbm5lclNsaWRlckxlYXZlOiBmdW5jdGlvbiBvbklubmVyU2xpZGVyTGVhdmUoZSkge1xuICAgIGlmICh0aGlzLnByb3BzLmF1dG9wbGF5ICYmIHRoaXMucHJvcHMucGF1c2VPbkhvdmVyKSB7XG4gICAgICB0aGlzLmF1dG9QbGF5KCk7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBFdmVudEhhbmRsZXJzO1xuXG4vKioqLyB9KSxcbi8qIDMxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfaW5uZXJTbGlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxNSk7XG5cbnZhciBfb2JqZWN0QXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxudmFyIF9qc29uMm1xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7XG5cbnZhciBfanNvbjJtcTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9qc29uMm1xKTtcblxudmFyIF9yZWFjdFJlc3BvbnNpdmVNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkyKTtcblxudmFyIF9yZWFjdFJlc3BvbnNpdmVNaXhpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdFJlc3BvbnNpdmVNaXhpbik7XG5cbnZhciBfZGVmYXVsdFByb3BzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzkpO1xuXG52YXIgX2RlZmF1bHRQcm9wczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZhdWx0UHJvcHMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgU2xpZGVyID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdTbGlkZXInLFxuXG4gIG1peGluczogW19yZWFjdFJlc3BvbnNpdmVNaXhpbjIuZGVmYXVsdF0sXG4gIGlubmVyU2xpZGVyOiBudWxsLFxuICBpbm5lclNsaWRlclJlZkhhbmRsZXI6IGZ1bmN0aW9uIGlubmVyU2xpZGVyUmVmSGFuZGxlcihyZWYpIHtcbiAgICB0aGlzLmlubmVyU2xpZGVyID0gcmVmO1xuICB9LFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYnJlYWtwb2ludDogbnVsbFxuICAgIH07XG4gIH0sXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5yZXNwb25zaXZlKSB7XG4gICAgICB2YXIgYnJlYWtwb2ludHMgPSB0aGlzLnByb3BzLnJlc3BvbnNpdmUubWFwKGZ1bmN0aW9uIChicmVha3B0KSB7XG4gICAgICAgIHJldHVybiBicmVha3B0LmJyZWFrcG9pbnQ7XG4gICAgICB9KTtcbiAgICAgIGJyZWFrcG9pbnRzLnNvcnQoZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHggLSB5O1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGJyZWFrcG9pbnQsIGluZGV4KSB7XG4gICAgICAgIHZhciBiUXVlcnk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgIGJRdWVyeSA9ICgwLCBfanNvbjJtcTIuZGVmYXVsdCkoeyBtaW5XaWR0aDogMCwgbWF4V2lkdGg6IGJyZWFrcG9pbnQgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYlF1ZXJ5ID0gKDAsIF9qc29uMm1xMi5kZWZhdWx0KSh7IG1pbldpZHRoOiBicmVha3BvaW50c1tpbmRleCAtIDFdLCBtYXhXaWR0aDogYnJlYWtwb2ludCB9KTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5tZWRpYShiUXVlcnksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGJyZWFrcG9pbnQ6IGJyZWFrcG9pbnQgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlZ2lzdGVyIG1lZGlhIHF1ZXJ5IGZvciBmdWxsIHNjcmVlbi4gTmVlZCB0byBzdXBwb3J0IHJlc2l6ZSBmcm9tIHNtYWxsIHRvIGxhcmdlXG4gICAgICB2YXIgcXVlcnkgPSAoMCwgX2pzb24ybXEyLmRlZmF1bHQpKHsgbWluV2lkdGg6IGJyZWFrcG9pbnRzLnNsaWNlKC0xKVswXSB9KTtcblxuICAgICAgdGhpcy5tZWRpYShxdWVyeSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGJyZWFrcG9pbnQ6IG51bGwgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgc2xpY2tQcmV2OiBmdW5jdGlvbiBzbGlja1ByZXYoKSB7XG4gICAgdGhpcy5pbm5lclNsaWRlci5zbGlja1ByZXYoKTtcbiAgfSxcblxuICBzbGlja05leHQ6IGZ1bmN0aW9uIHNsaWNrTmV4dCgpIHtcbiAgICB0aGlzLmlubmVyU2xpZGVyLnNsaWNrTmV4dCgpO1xuICB9LFxuXG4gIHNsaWNrR29UbzogZnVuY3Rpb24gc2xpY2tHb1RvKHNsaWRlKSB7XG4gICAgdGhpcy5pbm5lclNsaWRlci5zbGlja0dvVG8oc2xpZGUpO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHNldHRpbmdzO1xuICAgIHZhciBuZXdQcm9wcztcbiAgICBpZiAodGhpcy5zdGF0ZS5icmVha3BvaW50KSB7XG4gICAgICBuZXdQcm9wcyA9IHRoaXMucHJvcHMucmVzcG9uc2l2ZS5maWx0ZXIoZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgcmV0dXJuIHJlc3AuYnJlYWtwb2ludCA9PT0gX3RoaXMyLnN0YXRlLmJyZWFrcG9pbnQ7XG4gICAgICB9KTtcbiAgICAgIHNldHRpbmdzID0gbmV3UHJvcHNbMF0uc2V0dGluZ3MgPT09ICd1bnNsaWNrJyA/ICd1bnNsaWNrJyA6ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgdGhpcy5wcm9wcywgbmV3UHJvcHNbMF0uc2V0dGluZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXR0aW5ncyA9ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgX2RlZmF1bHRQcm9wczIuZGVmYXVsdCwgdGhpcy5wcm9wcyk7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgfVxuXG4gICAgLy8gQ2hpbGRyZW4gbWF5IGNvbnRhaW4gZmFsc2Ugb3IgbnVsbCwgc28gd2Ugc2hvdWxkIGZpbHRlciB0aGVtXG4gICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gISFjaGlsZDtcbiAgICB9KTtcblxuICAgIGlmIChzZXR0aW5ncyA9PT0gJ3Vuc2xpY2snKSB7XG4gICAgICAvLyBpZiAndW5zbGljaycgcmVzcG9uc2l2ZSBicmVha3BvaW50IHNldHRpbmcgdXNlZCwganVzdCByZXR1cm4gdGhlIDxTbGlkZXI+IHRhZyBuZXN0ZWQgSFRNTFxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX2lubmVyU2xpZGVyLklubmVyU2xpZGVyLFxuICAgICAgICBfZXh0ZW5kcyh7IHJlZjogdGhpcy5pbm5lclNsaWRlclJlZkhhbmRsZXIgfSwgc2V0dGluZ3MpLFxuICAgICAgICBjaGlsZHJlblxuICAgICAgKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNsaWRlcjtcblxuLyoqKi8gfSksXG4vKiAzMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuVHJhY2sgPSB1bmRlZmluZWQ7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXG52YXIgX2NsYXNzbmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblxudmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZ2V0U2xpZGVDbGFzc2VzID0gZnVuY3Rpb24gZ2V0U2xpZGVDbGFzc2VzKHNwZWMpIHtcbiAgdmFyIHNsaWNrQWN0aXZlLCBzbGlja0NlbnRlciwgc2xpY2tDbG9uZWQ7XG4gIHZhciBjZW50ZXJPZmZzZXQsIGluZGV4O1xuXG4gIGlmIChzcGVjLnJ0bCkge1xuICAgIGluZGV4ID0gc3BlYy5zbGlkZUNvdW50IC0gMSAtIHNwZWMuaW5kZXg7XG4gIH0gZWxzZSB7XG4gICAgaW5kZXggPSBzcGVjLmluZGV4O1xuICB9XG5cbiAgc2xpY2tDbG9uZWQgPSBpbmRleCA8IDAgfHwgaW5kZXggPj0gc3BlYy5zbGlkZUNvdW50O1xuICBpZiAoc3BlYy5jZW50ZXJNb2RlKSB7XG4gICAgY2VudGVyT2Zmc2V0ID0gTWF0aC5mbG9vcihzcGVjLnNsaWRlc1RvU2hvdyAvIDIpO1xuICAgIHNsaWNrQ2VudGVyID0gKGluZGV4IC0gc3BlYy5jdXJyZW50U2xpZGUpICUgc3BlYy5zbGlkZUNvdW50ID09PSAwO1xuICAgIGlmIChpbmRleCA+IHNwZWMuY3VycmVudFNsaWRlIC0gY2VudGVyT2Zmc2V0IC0gMSAmJiBpbmRleCA8PSBzcGVjLmN1cnJlbnRTbGlkZSArIGNlbnRlck9mZnNldCkge1xuICAgICAgc2xpY2tBY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzbGlja0FjdGl2ZSA9IHNwZWMuY3VycmVudFNsaWRlIDw9IGluZGV4ICYmIGluZGV4IDwgc3BlYy5jdXJyZW50U2xpZGUgKyBzcGVjLnNsaWRlc1RvU2hvdztcbiAgfVxuICByZXR1cm4gKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KSh7XG4gICAgJ3NsaWNrLXNsaWRlJzogdHJ1ZSxcbiAgICAnc2xpY2stYWN0aXZlJzogc2xpY2tBY3RpdmUsXG4gICAgJ3NsaWNrLWNlbnRlcic6IHNsaWNrQ2VudGVyLFxuICAgICdzbGljay1jbG9uZWQnOiBzbGlja0Nsb25lZFxuICB9KTtcbn07XG5cbnZhciBnZXRTbGlkZVN0eWxlID0gZnVuY3Rpb24gZ2V0U2xpZGVTdHlsZShzcGVjKSB7XG4gIHZhciBzdHlsZSA9IHt9O1xuXG4gIGlmIChzcGVjLnZhcmlhYmxlV2lkdGggPT09IHVuZGVmaW5lZCB8fCBzcGVjLnZhcmlhYmxlV2lkdGggPT09IGZhbHNlKSB7XG4gICAgc3R5bGUud2lkdGggPSBzcGVjLnNsaWRlV2lkdGg7XG4gIH1cblxuICBpZiAoc3BlYy5mYWRlKSB7XG4gICAgc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIHN0eWxlLmxlZnQgPSAtc3BlYy5pbmRleCAqIHNwZWMuc2xpZGVXaWR0aDtcbiAgICBzdHlsZS5vcGFjaXR5ID0gc3BlYy5jdXJyZW50U2xpZGUgPT09IHNwZWMuaW5kZXggPyAxIDogMDtcbiAgICBzdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgJyArIHNwZWMuc3BlZWQgKyAnbXMgJyArIHNwZWMuY3NzRWFzZTtcbiAgICBzdHlsZS5XZWJraXRUcmFuc2l0aW9uID0gJ29wYWNpdHkgJyArIHNwZWMuc3BlZWQgKyAnbXMgJyArIHNwZWMuY3NzRWFzZTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn07XG5cbnZhciBnZXRLZXkgPSBmdW5jdGlvbiBnZXRLZXkoY2hpbGQsIGZhbGxiYWNrS2V5KSB7XG4gIC8vIGtleSBjb3VsZCBiZSBhIHplcm9cbiAgcmV0dXJuIGNoaWxkLmtleSA9PT0gbnVsbCB8fCBjaGlsZC5rZXkgPT09IHVuZGVmaW5lZCA/IGZhbGxiYWNrS2V5IDogY2hpbGQua2V5O1xufTtcblxudmFyIHJlbmRlclNsaWRlcyA9IGZ1bmN0aW9uIHJlbmRlclNsaWRlcyhzcGVjKSB7XG4gIHZhciBrZXk7XG4gIHZhciBzbGlkZXMgPSBbXTtcbiAgdmFyIHByZUNsb25lU2xpZGVzID0gW107XG4gIHZhciBwb3N0Q2xvbmVTbGlkZXMgPSBbXTtcbiAgdmFyIGNvdW50ID0gX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KHNwZWMuY2hpbGRyZW4pO1xuXG4gIF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5mb3JFYWNoKHNwZWMuY2hpbGRyZW4sIGZ1bmN0aW9uIChlbGVtLCBpbmRleCkge1xuICAgIHZhciBjaGlsZCA9IHZvaWQgMDtcbiAgICB2YXIgY2hpbGRPbkNsaWNrT3B0aW9ucyA9IHtcbiAgICAgIG1lc3NhZ2U6ICdjaGlsZHJlbicsXG4gICAgICBpbmRleDogaW5kZXgsXG4gICAgICBzbGlkZXNUb1Njcm9sbDogc3BlYy5zbGlkZXNUb1Njcm9sbCxcbiAgICAgIGN1cnJlbnRTbGlkZTogc3BlYy5jdXJyZW50U2xpZGVcbiAgICB9O1xuXG4gICAgaWYgKCFzcGVjLmxhenlMb2FkIHwgKHNwZWMubGF6eUxvYWQgJiYgc3BlYy5sYXp5TG9hZGVkTGlzdC5pbmRleE9mKGluZGV4KSA+PSAwKSkge1xuICAgICAgY2hpbGQgPSBlbGVtO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCBudWxsKTtcbiAgICB9XG4gICAgdmFyIGNoaWxkU3R5bGUgPSBnZXRTbGlkZVN0eWxlKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgc3BlYywgeyBpbmRleDogaW5kZXggfSkpO1xuICAgIHZhciBzbGlja0NsYXNzZXMgPSBnZXRTbGlkZUNsYXNzZXMoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgaW5kZXg6IGluZGV4IH0sIHNwZWMpKTtcbiAgICB2YXIgY3NzQ2xhc3NlcztcblxuICAgIGlmIChjaGlsZC5wcm9wcy5jbGFzc05hbWUpIHtcbiAgICAgIGNzc0NsYXNzZXMgPSAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKHNsaWNrQ2xhc3NlcywgY2hpbGQucHJvcHMuY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3NzQ2xhc3NlcyA9IHNsaWNrQ2xhc3NlcztcbiAgICB9XG5cbiAgICB2YXIgb25DbGljayA9IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgY2hpbGQucHJvcHMgJiYgY2hpbGQucHJvcHMub25DbGljayAmJiBjaGlsZC5wcm9wcy5vbkNsaWNrKGUpO1xuICAgICAgaWYgKHNwZWMuZm9jdXNPblNlbGVjdCkge1xuICAgICAgICBzcGVjLmZvY3VzT25TZWxlY3QoY2hpbGRPbkNsaWNrT3B0aW9ucyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHNsaWRlcy5wdXNoKF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgIGtleTogJ29yaWdpbmFsJyArIGdldEtleShjaGlsZCwgaW5kZXgpLFxuICAgICAgJ2RhdGEtaW5kZXgnOiBpbmRleCxcbiAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3NlcyxcbiAgICAgIHRhYkluZGV4OiAnLTEnLFxuICAgICAgc3R5bGU6ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IG91dGxpbmU6ICdub25lJyB9LCBjaGlsZC5wcm9wcy5zdHlsZSB8fCB7fSwgY2hpbGRTdHlsZSksXG4gICAgICBvbkNsaWNrOiBvbkNsaWNrXG4gICAgfSkpO1xuXG4gICAgLy8gdmFyaWFibGVXaWR0aCBkb2Vzbid0IHdyYXAgcHJvcGVybHkuXG4gICAgaWYgKHNwZWMuaW5maW5pdGUgJiYgc3BlYy5mYWRlID09PSBmYWxzZSkge1xuICAgICAgdmFyIGluZmluaXRlQ291bnQgPSBzcGVjLnZhcmlhYmxlV2lkdGggPyBzcGVjLnNsaWRlc1RvU2hvdyArIDEgOiBzcGVjLnNsaWRlc1RvU2hvdztcblxuICAgICAgaWYgKGluZGV4ID49IGNvdW50IC0gaW5maW5pdGVDb3VudCkge1xuICAgICAgICBrZXkgPSAtKGNvdW50IC0gaW5kZXgpO1xuICAgICAgICBwcmVDbG9uZVNsaWRlcy5wdXNoKF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgICAgICBrZXk6ICdwcmVjbG9uZWQnICsgZ2V0S2V5KGNoaWxkLCBrZXkpLFxuICAgICAgICAgICdkYXRhLWluZGV4Jzoga2V5LFxuICAgICAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3NlcyxcbiAgICAgICAgICBzdHlsZTogKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCBjaGlsZC5wcm9wcy5zdHlsZSB8fCB7fSwgY2hpbGRTdHlsZSksXG4gICAgICAgICAgb25DbGljazogb25DbGlja1xuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmRleCA8IGluZmluaXRlQ291bnQpIHtcbiAgICAgICAga2V5ID0gY291bnQgKyBpbmRleDtcbiAgICAgICAgcG9zdENsb25lU2xpZGVzLnB1c2goX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICAgIGtleTogJ3Bvc3RjbG9uZWQnICsgZ2V0S2V5KGNoaWxkLCBrZXkpLFxuICAgICAgICAgICdkYXRhLWluZGV4Jzoga2V5LFxuICAgICAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3NlcyxcbiAgICAgICAgICBzdHlsZTogKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCBjaGlsZC5wcm9wcy5zdHlsZSB8fCB7fSwgY2hpbGRTdHlsZSksXG4gICAgICAgICAgb25DbGljazogb25DbGlja1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAoc3BlYy5ydGwpIHtcbiAgICByZXR1cm4gcHJlQ2xvbmVTbGlkZXMuY29uY2F0KHNsaWRlcywgcG9zdENsb25lU2xpZGVzKS5yZXZlcnNlKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHByZUNsb25lU2xpZGVzLmNvbmNhdChzbGlkZXMsIHBvc3RDbG9uZVNsaWRlcyk7XG4gIH1cbn07XG5cbnZhciBUcmFjayA9IGV4cG9ydHMuVHJhY2sgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ1RyYWNrJyxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgc2xpZGVzID0gcmVuZGVyU2xpZGVzLmNhbGwodGhpcywgdGhpcy5wcm9wcyk7XG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICB7IGNsYXNzTmFtZTogJ3NsaWNrLXRyYWNrJywgc3R5bGU6IHRoaXMucHJvcHMudHJhY2tTdHlsZSB9LFxuICAgICAgc2xpZGVzXG4gICAgKTtcbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuLyogMzE5ICovLFxuLyogMzIwICovLFxuLyogMzIxICovLFxuLyogMzIyICovLFxuLyogMzIzICovLFxuLyogMzI0ICovLFxuLyogMzI1ICovLFxuLyogMzI2ICovLFxuLyogMzI3ICovLFxuLyogMzI4ICovLFxuLyogMzI5ICovLFxuLyogMzMwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5mdW5jdGlvbiBjcmVhdGVUaHVua01pZGRsZXdhcmUoZXh0cmFBcmd1bWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLFxuICAgICAgICBnZXRTdGF0ZSA9IF9yZWYuZ2V0U3RhdGU7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24oZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYUFyZ3VtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbnZhciB0aHVuayA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZSgpO1xudGh1bmsud2l0aEV4dHJhQXJndW1lbnQgPSBjcmVhdGVUaHVua01pZGRsZXdhcmU7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHRodW5rO1xuXG4vKioqLyB9KSxcbi8qIDMzMSAqLyxcbi8qIDMzMiAqLyxcbi8qIDMzMyAqLyxcbi8qIDMzNCAqLyxcbi8qIDMzNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIEJ1ZmZlcikge3ZhciByZXF1aXJlO1xuXG4vKiBlc2xpbnQgbm8tdW5kZWZpbmVkOiAwICovXG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbnZhciBhc3NpZ24gPSB2b2lkIDA7XG5cbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiA9PT0gJ2Z1bmN0aW9uJykge1xuICBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xufSBlbHNlIHtcbiAgYXNzaWduID0gZnVuY3Rpb24gYXNzaWduKHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICAgIH1cblxuICAgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcblxuICAgIHZhciBwcm9wZXJ0eU9iamVjdHMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cbiAgICBpZiAocHJvcGVydHlPYmplY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIHByb3BlcnR5T2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBuZXh0S2V5ID0gdm9pZCAwO1xuXG4gICAgICAgICAgZm9yIChuZXh0S2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShuZXh0S2V5KSkge1xuICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xufVxuXG52YXIgYXNzaWduJDEgPSBhc3NpZ247XG5cbnZhciBpbmNsdWRlcyA9IHZvaWQgMDtcblxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyhhcnJheSwgc2VhcmNoRWxlbWVudCkge1xuICAgIHZhciBPYmplY3RpZmllZEFycmF5ID0gT2JqZWN0KGFycmF5KTtcbiAgICB2YXIgbGVuZ3RoID0gcGFyc2VJbnQoT2JqZWN0aWZpZWRBcnJheS5sZW5ndGgsIDEwKSB8fCAwO1xuXG4gICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBzdGFydEluZGV4ID0gcGFyc2VJbnQoYXJndW1lbnRzWzJdLCAxMCkgfHwgMDtcbiAgICB2YXIgaW5kZXggPSB2b2lkIDA7XG5cbiAgICBpZiAoc3RhcnRJbmRleCA+PSAwKSB7XG4gICAgICBpbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluZGV4ID0gbGVuZ3RoICsgc3RhcnRJbmRleDtcblxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgd2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBPYmplY3RpZmllZEFycmF5W2luZGV4XTtcblxuICAgICAgLyogZXNsaW50IG5vLXNlbGYtY29tcGFyZTowICovXG4gICAgICBpZiAoc2VhcmNoRWxlbWVudCA9PT0gY3VycmVudEVsZW1lbnQgfHwgc2VhcmNoRWxlbWVudCAhPT0gc2VhcmNoRWxlbWVudCAmJiBjdXJyZW50RWxlbWVudCAhPT0gY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgLy8gTmFOICE9PSBOYU5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn0gZWxzZSB7XG4gIGluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMoYXJyYXkpIHtcbiAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5jbHVkZXMuYXBwbHkoYXJyYXksIGFyZ3MpO1xuICB9O1xufVxuXG52YXIgaW5jbHVkZXMkMSA9IGluY2x1ZGVzO1xuXG5mdW5jdGlvbiB3cmFwKGZ1bmMsIHN1cGVyRnVuYykge1xuICBmdW5jdGlvbiBzdXBlcldyYXBwZXIoKSB7XG4gICAgdmFyIG9yaWdpbmFsU3VwZXIgPSB0aGlzWydzdXBlciddO1xuXG4gICAgdGhpc1snc3VwZXInXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBzdXBlckZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgdmFyIHJldCA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXNbJ3N1cGVyJ10gPSBvcmlnaW5hbFN1cGVyO1xuXG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIHN1cGVyV3JhcHBlci53cmFwcGVkRnVuY3Rpb24gPSBmdW5jO1xuXG4gIHJldHVybiBzdXBlcldyYXBwZXI7XG59XG5cbmZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMobmFtZXMsIHByb3RvLCBkZXN0aW5hdGlvbikge1xuICB2YXIgcGFyZW50UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGVzdGluYXRpb24pO1xuXG4gIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG8sIG5hbWUpO1xuICAgIHZhciBwYXJlbnREZXNjcmlwdG9yID0gcGFyZW50UHJvdG8uaGFzT3duUHJvcGVydHkobmFtZSkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwYXJlbnRQcm90bywgbmFtZSk7XG5cbiAgICBpZiAodHlwZW9mIHBhcmVudERlc2NyaXB0b3IudmFsdWUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlc2NyaXB0b3IudmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciB3cmFwcGVkRnVuY3Rpb24gPSB3cmFwKGRlc2NyaXB0b3IudmFsdWUsIHBhcmVudERlc2NyaXB0b3IudmFsdWUpO1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVzdGluYXRpb24sIG5hbWUsIHsgdmFsdWU6IHdyYXBwZWRGdW5jdGlvbiB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRlc3RpbmF0aW9uLCBuYW1lLCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDbGFzcyhwcm9wcykge1xuICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBPYmplY3Q7XG5cbiAgdmFyIENvbnN0cnVjdG9yID0gd3JhcChwcm9wcy5jb25zdHJ1Y3RvciwgcGFyZW50KTtcbiAgdmFyIGluc3RhbmNlUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3BzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiAhaW5jbHVkZXMkMShbJ2NvbnN0cnVjdG9yJywgJ3N0YXRpYyddLCBrZXkpO1xuICB9KTtcblxuICBhc3NpZ24kMShDb25zdHJ1Y3RvciwgcGFyZW50KTtcblxuICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5wcm90b3R5cGUpO1xuICBkZWZpbmVQcm9wZXJ0aWVzKGluc3RhbmNlUHJvcGVydHlOYW1lcywgcHJvcHMsIENvbnN0cnVjdG9yLnByb3RvdHlwZSk7XG4gIENvbnN0cnVjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuXG4gIHZhciBzdGF0aWNQcm9wcyA9IHByb3BzWydzdGF0aWMnXTtcblxuICBpZiAoc3RhdGljUHJvcHMpIHtcbiAgICB2YXIgc3RhdGljUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHN0YXRpY1Byb3BzKTtcblxuICAgIGRlZmluZVByb3BlcnRpZXMoc3RhdGljUHJvcGVydHlOYW1lcywgc3RhdGljUHJvcHMsIENvbnN0cnVjdG9yKTtcbiAgfVxuXG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxudmFyIENvcmVPYmplY3QgPSBjcmVhdGVDbGFzcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHt9LFxuXG5cbiAgJ3N0YXRpYyc6IHtcbiAgICBleHRlbmQ6IGZ1bmN0aW9uIGV4dGVuZChzdWJDbGFzc1Byb3BzKSB7XG4gICAgICByZXR1cm4gY3JlYXRlQ2xhc3Moc3ViQ2xhc3NQcm9wcywgdGhpcyk7XG4gICAgfVxuICB9XG59KTtcblxuZnVuY3Rpb24gd3JhcENvbnNvbGUobG9nQ29tbWFuZCkge1xuICB2YXIgbG9nTWV0aG9kID0gZnVuY3Rpb24gbG9nTWV0aG9kKCkge1xuICAgIHZhciBsb2cgPSB2b2lkIDA7XG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gICAgaWYgKGNvbnNvbGVbbG9nQ29tbWFuZF0pIHtcbiAgICAgIGxvZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZVtsb2dDb21tYW5kXSwgY29uc29sZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5sb2csIGNvbnNvbGUpO1xuICAgIH1cbiAgICBsb2cuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG5cbiAgICBhcmdzLnVuc2hpZnQoJ1tKUy1CVVktU0RLXTogJyk7XG4gICAgbG9nTWV0aG9kLmFwcGx5KHVuZGVmaW5lZCwgX3RvQ29uc3VtYWJsZUFycmF5KGFyZ3MpKTtcbiAgfTtcbn1cblxudmFyIExvZ2dlciA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAgLyoqXG4gICAqIFdyYXBwZXIgYXJvdW5kIHRoZSBjb25zb2xlIGxvZyBzbyBpbiB0aGUgZnV0dXJlIHdlIGNhbiBoYXZlIGJldHRlciBkZXYgb3V0cHV0LlxuICAgKiBBbHNvIGFsbG93cyB1cyB0byBkaXNhYmxlIG91dHB1dCBpbiBwcm9kdWN0aW9uLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAY2xhc3MgTG9nZ2VyXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge30sXG5cbiAgZGVidWc6IHdyYXBDb25zb2xlKCdkZWJ1ZycpLFxuICBpbmZvOiB3cmFwQ29uc29sZSgnaW5mbycpLFxuICB3YXJuOiB3cmFwQ29uc29sZSgnd2FybicpLFxuICBlcnJvcjogd3JhcENvbnNvbGUoJ2Vycm9yJylcbn0pO1xuXG52YXIgbG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG52YXIgQ29uZmlnID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoYXR0cnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5kZXByZWNhdGVkUHJvcGVydGllcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtTmFtZSA9IF90aGlzLmRlcHJlY2F0ZWRQcm9wZXJ0aWVzW2tleV07XG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSBfdGhpc1t0cmFuc2Zvcm1OYW1lXTtcblxuICAgICAgICB0cmFuc2Zvcm0oYXR0cnNba2V5XSwgYXR0cnMpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMucmVxdWlyZWRQcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKCFhdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbmV3IENvbmZpZygpIHJlcXVpcmVzIHRoZSBvcHRpb24gXFwnJyArIGtleSArICdcXCcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzW2tleV0gPSBhdHRyc1trZXldO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMub3B0aW9uYWxQcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgX3RoaXNba2V5XSA9IGF0dHJzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogQW4gb2JqZWN0IHdpdGgga2V5cyBmb3IgZGVwcmVjYXRlZCBwcm9wZXJ0aWVzIGFuZCB2YWx1ZXMgYXMgZnVuY3Rpb25zIHRoYXRcbiAgICogd2lsbCB0cmFuc2Zvcm0gdGhlIHZhbHVlIGludG8gYSB1c2FibGUgdmFsdWUuIEEgZGVwcmFjYXRpb24gdHJhbnNmb3JtIHNob3VsZFxuICAgKiBoYXZlIHRoZSB2YWx1ZSBzaWduYXR1cmUgZnVuY3Rpb24oZGVwcmVjYXRlZF92YWx1ZSwgY29uZmlnX3RvX2JlX3RyYW5zZm9ybWVkKVxuICAgKiBAYXR0cmlidXRlIGRlcHJlY2F0ZWRQcm9wZXJ0aWVzXG4gICAqIEBkZWZhdWx0IHsgbXlTaG9waWZ5RG9tYWluOiB0aGlzLnRyYW5zZm9ybU15U2hvcGlmeURvbWFpbiB9XG4gICAqIEB0eXBlIE9iamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGVwcmVjYXRlZFByb3BlcnRpZXM6IHtcbiAgICBteVNob3BpZnlEb21haW46ICd0cmFuc2Zvcm1NeVNob3BpZnlEb21haW4nXG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybSB0aGUgbXlTaG9waWZ5RG9tYWluIGNvbmZpZyB0byBhIGRvbWFpbiBjb25maWcuXG4gICAqIEBtZXRob2QgdHJhbnNmb3JtTXlTaG9waWZ5RG9tYWluXG4gICAqIEBzdGF0aWNcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN1YmRvbWFpbiBUaGUgb3JpZ2luYWwgc3ViZG9tYWluIG9uIG15c2hvcGlmeS5jb21cbiAgICogQHBhcmFtIHtPYmplY3R9IGF0dHJzLiBUaGUgY29uZmlnIGF0dHJpYnV0ZXMgdG8gYmUgdHJhbnNmb3JtZWQgdG8gYVxuICAgKiBub24tZGVwcmVjYXRlZCBzdGF0ZS5cbiAgICogQHJldHVybiB7T2JqZWN0fSB0aGUgdHJhbnNmb3JtZWQgY29uZmlnIGF0dHJpYnV0ZXMuXG4gICAqL1xuICB0cmFuc2Zvcm1NeVNob3BpZnlEb21haW46IGZ1bmN0aW9uIHRyYW5zZm9ybU15U2hvcGlmeURvbWFpbihzdWJkb21haW4sIGF0dHJzKSB7XG4gICAgbG9nZ2VyLndhcm4oJ0NvbmZpZyAtICcsICdteVNob3BpZnlEb21haW4gaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBkb21haW4gYW5kIHByb3ZpZGUgdGhlIGZ1bGwgc2hvcCBkb21haW4uJyk7XG4gICAgYXR0cnMuZG9tYWluID0gc3ViZG9tYWluICsgJy5teXNob3BpZnkuY29tJztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBQcm9wZXJ0aWVzIHRoYXQgbXVzdCBiZSBzZXQgb24gaW5pdGlhbGl6YXRpb25zXG4gICAqIEBhdHRyaWJ1dGUgcmVxdWlyZWRQcm9wZXJ0aWVzXG4gICAqIEBkZWZhdWx0IFsnYXBpS2V5JywgJ2FwcElkJywgJ215U2hvcGlmeURvbWFpbiddXG4gICAqIEB0eXBlIEFycmF5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXF1aXJlZFByb3BlcnRpZXM6IFsnYXBpS2V5JywgJ2FwcElkJywgJ2RvbWFpbiddLFxuXG4gIC8qKlxuICAgKiBQcm9wZXJ0aWVzIHRoYXQgbWF5IGJlIHNldCBvbiBpbml0aWFsaXphdGlvbnNcbiAgICogQGF0dHJpYnV0ZSByZXF1aXJlZFByb3BlcnRpZXNcbiAgICogQGRlZmF1bHQgWydhamF4SGVhZGVycyddXG4gICAqIEB0eXBlIEFycmF5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvcHRpb25hbFByb3BlcnRpZXM6IFsnYWpheEhlYWRlcnMnXSxcblxuICAvKipcbiAgICogVGhlIGFwaUtleSBmb3IgYXV0aGVudGljYXRpbmcgYWdhaW5zdCBzaG9waWZ5LiBUaGlzIGlzIHlvdXIgYXBpIGNsaWVudCdzXG4gICAqIHB1YmxpYyBhcGkgdG9rZW4uIE5vdCB0aGUgc2hhcmVkIHNlY3JldC4gU2V0IGR1cmluZyBpbml0aWFsYXRpb24uXG4gICAqIEBhdHRyaWJ1dGUgYXBpS2V5XG4gICAqIEBkZWZhdWx0ICcnXG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXBpS2V5OiAnJyxcblxuICAvKipcbiAgICogQGF0dHJpYnV0ZSBhcHBJZFxuICAgKiBAZGVmYXVsdCAnJ1xuICAgKiBAdHlwZSBTdHJpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFwcElkOiAnJyxcblxuICAvKipcbiAgICogVGhlIGRvbWFpbiB0aGF0IGFsbCB0aGUgYXBpIHJlcXVlc3RzIHdpbGwgZ28gdG9cbiAgICogQGF0dHJpYnV0ZSBkb21haW5cbiAgICogQGRlZmF1bHQgJydcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkb21haW46ICcnLFxuXG4gIC8qKlxuICAgKiBUaGUgc3ViZG9tYWluIG9mIG15c2hvcGlmeS5pbyB0aGF0IGFsbCB0aGUgYXBpIHJlcXVlc3RzIHdpbGwgZ28gdG9cbiAgICogQGF0dHJpYnV0ZSBteVNob3BpZnlEb21haW5cbiAgICogQGRlZmF1bHQgJydcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqIEBwcml2YXRlXG4gICAqIEBkZXByZWNhdGVkIFVzZSBgY29uZmlnLmRvbWFpbmAgaW5zdGVhZC5cbiAgICovXG4gIG15U2hvcGlmeURvbWFpbjogJycsXG5cbiAgLyoqXG4gICAqIEBhdHRyaWJ1dGUgYWpheEhlYWRlcnNcbiAgICogQGRlZmF1bHQge31cbiAgICogQHR5cGUgT2JqZWN0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhamF4SGVhZGVyczoge31cbn0pO1xuXG52YXIgdmVyc2lvbiA9ICd2MC42LjItYzhmNDM4Zic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxudmFyIEJhc2VNb2RlbCA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHZhciBhdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdmFyIG1ldGFBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICB0aGlzLmF0dHJzID0gYXR0cnM7XG5cbiAgICBhc3NpZ24kMSh0aGlzLCBtZXRhQXR0cnMpO1xuICB9LFxuXG4gIGF0dHJzOiBudWxsLFxuICBzZXJpYWxpemVyOiBudWxsLFxuICBhZGFwdGVyOiBudWxsLFxuICBzaG9wQ2xpZW50OiBudWxsXG59KTtcblxuLyoqXG4gICogQ2xhc3MgZm9yIHByb2R1Y3Qgb3B0aW9uXG4gICogQGNsYXNzIFByb2R1Y3RPcHRpb25Nb2RlbFxuICAqIEBjb25zdHJ1Y3RvclxuKi9cbnZhciBQcm9kdWN0T3B0aW9uTW9kZWwgPSBCYXNlTW9kZWwuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXNbJ3N1cGVyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLnZhbHVlc1swXTtcbiAgfVxufSwge1xuICBuYW1lOiB7XG5cbiAgICAvKipcbiAgICAgICogbmFtZSBvZiBvcHRpb24uIEV4YW1wbGUgdmFsdWVzOiBgXCJTaXplXCJgLCBgXCJDb2xvclwiYCwgZXRjLlxuICAgICAgKiBAcHJvcGVydHkgbmFtZVxuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUgU3RyaW5nXG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLm5hbWU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB2YWx1ZXM6IHtcblxuICAgIC8qKlxuICAgICAgKiBhbiBBcnJheSBwb3NzaWJsZSB2YWx1ZXMgZm9yIG9wdGlvbi4gRm9yIGluc3RhbmNlIGlmIHRoaXMgb3B0aW9uIGlzIGEgXCJTaXplXCIgb3B0aW9uIGFuIGV4YW1wbGUgdmFsdWVcbiAgICAgICogZm9yIHZhbHVlcyBjb3VsZCBiZTogYFtcIkxhcmdlXCIsIFwiTWVkaXVtXCIsIFwiU21hbGxcIl1gXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSB2YWx1ZXNcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIEFycmF5XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhbHVlcztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHNlbGVjdGVkOiB7XG5cbiAgICAvKipcbiAgICAgICogZ2V0L3NldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbiB2YWx1ZSB3aXRoIG9uZSBvZiB0aGUgdmFsdWVzIGZyb20gdGhlXG4gICAgICAqIHt7I2Nyb3NzTGluayBcIlByb2R1Y3RPcHRpb25Nb2RlbC92YWx1ZXNcIn19UHJvZHVjdE9wdGlvbk1vZGVsLnZhbHVlc3t7L2Nyb3NzTGlua319IGFycmF5LiBGb3JcbiAgICAgICogaW5zdGFuY2UgaWYgdGhlIG9wdGlvbiB2YWx1ZXMgYXJyYXkgaGFkIHRoZSBmb2xsb3dpbmcgYFtcIkxhcmdlXCIsIFwiTWVkaXVtXCIsIFwiU21hbGxcIl1gIHNldHRpbmcgYHNlbGVjdGVkYCB0byBiZVxuICAgICAgKiBgXCJMYXJnZVwiYCwgYFwiTWVkaXVtXCJgLCBvciBgXCJTbWFsbFwiYCB3b3VsZCBiZSB2YWxpZCBhbnkgb3RoZXIgdmFsdWUgd291bGQgdGhyb3cgYW4gYEVycm9yYC5cbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHNlbGVjdGVkXG4gICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgaWYgKGluY2x1ZGVzJDEodGhpcy52YWx1ZXMsIHZhbHVlKSkge1xuICAgICAgICB0aGlzLl9zZWxlY3RlZCA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG9wdGlvbiBzZWxlY3Rpb24gZm9yICcgKyB0aGlzLm5hbWUgKyAnLicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbnZhciB2YXJpYW50cyA9IFt7IG5hbWU6ICdwaWNvJywgZGltZW5zaW9uOiAnMTZ4MTYnIH0sIHsgbmFtZTogJ2ljb24nLCBkaW1lbnNpb246ICczMngzMicgfSwgeyBuYW1lOiAndGh1bWInLCBkaW1lbnNpb246ICc1MHg1MCcgfSwgeyBuYW1lOiAnc21hbGwnLCBkaW1lbnNpb246ICcxMDB4MTAwJyB9LCB7IG5hbWU6ICdjb21wYWN0JywgZGltZW5zaW9uOiAnMTYweDE2MCcgfSwgeyBuYW1lOiAnbWVkaXVtJywgZGltZW5zaW9uOiAnMjQweDI0MCcgfSwgeyBuYW1lOiAnbGFyZ2UnLCBkaW1lbnNpb246ICc0ODB4NDgwJyB9LCB7IG5hbWU6ICdncmFuZGUnLCBkaW1lbnNpb246ICc2MDB4NjAwJyB9LCB7IG5hbWU6ICcxMDI0eDEwMjQnLCBkaW1lbnNpb246ICcxMDI0eDEwMjQnIH0sIHsgbmFtZTogJzIwNDh4MjA0OCcsIGRpbWVuc2lvbjogJzIwNDh4MjA0OCcgfV07XG5cbnZhciBJbWFnZU1vZGVsID0gQ29yZU9iamVjdC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoYXR0cnMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIF90aGlzMltrZXldID0gYXR0cnNba2V5XTtcbiAgICB9KTtcbiAgfVxufSwge1xuICB2YXJpYW50czoge1xuXG4gICAgLyoqXG4gICAgICAqIEltYWdlIHZhcmlhbnRzIGF2YWlsYWJsZSBmb3IgYW4gaW1hZ2UuIEFuIGV4YW1wbGUgdmFsdWUgb2YgYGltYWdlVmFyaWFudGA6XG4gICAgICAqIGBgYFxuICAgICAgKiBbXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwicGljb1wiLFxuICAgICAgKiAgICAgXCJkaW1lbnNpb25zXCI6IFwiMTZ4MTZcIixcbiAgICAgICogICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9hbGllbl8xNDZlZjdjMS0yNmU5LTRlOTYtOTZlNi05ZDM3MTI4ZDAwMDVfcGljby5qcGc/dj0xNDY5MDQ2NDIzXCJcbiAgICAgICogICB9LFxuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcImNvbXBhY3RcIixcbiAgICAgICogICAgIFwiZGltZW5zaW9uc1wiOiBcIjE2MHgxNjBcIixcbiAgICAgICogICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9hbGllbl8xNDZlZjdjMS0yNmU5LTRlOTYtOTZlNi05ZDM3MTI4ZDAwMDVfY29tcGFjdC5qcGc/dj0xNDY5MDQ2NDIzXCJcbiAgICAgICogICB9XG4gICAgICAqIF1cbiAgICAgICogYGBgXG4gICAgICAqXG4gICAgICAqIEBhdHRyaWJ1dGUgdmFyaWFudHNcbiAgICAgICogQHR5cGUge0FycmF5fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgc3JjID0gdGhpcy5zcmM7XG4gICAgICB2YXIgZXh0ZW5zaW9uSW5kZXggPSBzcmMubGFzdEluZGV4T2YoJy4nKTtcbiAgICAgIHZhciBwYXRoQW5kQmFzZW5hbWUgPSBzcmMuc2xpY2UoMCwgZXh0ZW5zaW9uSW5kZXgpO1xuICAgICAgdmFyIGV4dGVuc2lvbiA9IHNyYy5zbGljZShleHRlbnNpb25JbmRleCk7XG5cbiAgICAgIHZhcmlhbnRzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhbnQpIHtcbiAgICAgICAgdmFyaWFudC5zcmMgPSBwYXRoQW5kQmFzZW5hbWUgKyAnXycgKyB2YXJpYW50Lm5hbWUgKyBleHRlbnNpb247XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHZhcmlhbnRzO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG4vKipcbiAgKiBNb2RlbCBmb3IgcHJvZHVjdCB2YXJpYW50XG4gICogQGNsYXNzIFByb2R1Y3RWYXJpYW50TW9kZWxcbiAgKiBAY29uc3RydWN0b3JcbiovXG52YXIgUHJvZHVjdFZhcmlhbnRNb2RlbCA9IEJhc2VNb2RlbC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1snc3VwZXInXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBHZXQgYSBjaGVja291dCB1cmwgZm9yIGEgc3BlY2lmaWMgcHJvZHVjdCB2YXJpYW50LiBZb3UgY2FuXG4gICAgKiBvcHRpb25hbGx5IHBhc3MgYSBxdWFudGl0eS4gSWYgbm8gcXVhbnRpdHkgaXMgcGFzc2VkIHRoZW4gcXVhbnRpdHlcbiAgICAqIHdpbGwgZGVmYXVsdCB0byAxLiBUaGUgZXhhbXBsZSBiZWxvdyB3aWxsIGdyYWIgYSBjaGVja291dCB1cmwgZm9yXG4gICAgKiAzIGNvcGllcyBvZiB0aGUgZmlyc3QgdmFyaWFudDpcbiAgICAqIGBgYFxuICAgICogY29uc3QgY2hlY2tvdXRVUkwgPSBwcm9kdWN0LnZhcmlhbnRzWyAwIF0uY2hlY2tvdXRVcmwoMyk7XG4gICAgKiBgYGBcbiAgICAqXG4gICAgKiBAbWV0aG9kIGNoZWNrb3V0VXJsXG4gICAgKiBAcGFyYW0ge051bWJlcn0gW3F1YW50aXR5ID0gMV0gcXVhbnRpdHkgb2YgdmFyaWFudHNcbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1N0cmluZ30gQ2hlY2tvdXQgVVJMXG4gICovXG4gIGNoZWNrb3V0VXJsOiBmdW5jdGlvbiBjaGVja291dFVybCgpIHtcbiAgICB2YXIgcXVhbnRpdHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDE7XG5cbiAgICB2YXIgY29uZmlnID0gdGhpcy5jb25maWc7XG4gICAgdmFyIGJhc2VVcmwgPSAnaHR0cHM6Ly8nICsgY29uZmlnLmRvbWFpbiArICcvY2FydCc7XG5cbiAgICB2YXIgdmFyaWFudFBhdGggPSB0aGlzLmlkICsgJzonICsgcGFyc2VJbnQocXVhbnRpdHksIDEwKTtcblxuICAgIHZhciBxdWVyeSA9ICdhY2Nlc3NfdG9rZW49JyArIGNvbmZpZy5hcGlLZXkgKyAnJl9mZD0wJztcblxuICAgIHJldHVybiBiYXNlVXJsICsgJy8nICsgdmFyaWFudFBhdGggKyAnPycgKyBxdWVyeTtcbiAgfVxufSwge1xuICBpZDoge1xuXG4gICAgLyoqXG4gICAgICAqIFZhcmlhbnQgdW5pcXVlIElEXG4gICAgICAqIEBwcm9wZXJ0eSBpZFxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50LmlkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcHJvZHVjdElkOiB7XG5cbiAgICAvKipcbiAgICAgICogSUQgb2YgcHJvZHVjdCB2YXJpYW50IGJlbG9uZ3MgdG9cbiAgICAgICogQHByb3BlcnR5IHByb2R1Y3RJZFxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcm9kdWN0LmlkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdGl0bGU6IHtcblxuICAgIC8qKlxuICAgICAgKiBUaXRsZSBvZiB2YXJpYW50XG4gICAgICAqIEBwcm9wZXJ0eSB0aXRsZVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50LnRpdGxlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcHJvZHVjdFRpdGxlOiB7XG5cbiAgICAvKipcbiAgICAgICogVGl0bGUgb2YgcHJvZHVjdCB2YXJpYW50IGJlbG9uZ3MgdG9cbiAgICAgICogQHByb3BlcnR5IHByb2R1Y3RUaXRsZVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcm9kdWN0LnRpdGxlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgY29tcGFyZUF0UHJpY2U6IHtcblxuICAgIC8qKlxuICAgICAgKiBDb21wYXJlIGF0IHByaWNlIGZvciB2YXJpYW50LiBUaGUgYGNvbXBhcmVBdFByaWNlYCB3b3VsZCBiZVxuICAgICAgKiB0aGUgcHJpY2Ugb2YgdGhlIHByb2R1Y3QgcHJldmlvdXNseSBiZWZvcmUgdGhlIHByb2R1Y3Qgd2VudCBvbiBzYWxlLiBGb3IgbW9yZSBpbmZvXG4gICAgICAqIGdvIDxhIGhyZWY9XCJodHRwczovL2RvY3Muc2hvcGlmeS5jb20vbWFudWFsL3Byb2R1Y3RzL3Byb21vdGluZy1tYXJrZXRpbmcvc2FsZXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5oZXJlPC9hPi5cbiAgICAgICpcbiAgICAgICogSWYgbm8gYGNvbXBhcmVBdFByaWNlYCBpcyBzZXQgdGhlbiB0aGlzIHZhbHVlIHdpbGwgYmUgYG51bGxgLiBBbiBleGFtcGxlIHZhbHVlOiBgXCI1LjAwXCJgXG4gICAgICAqIEBwcm9wZXJ0eSBjb21wYXJlQXRQcmljZVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50LmNvbXBhcmVfYXRfcHJpY2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcmljZToge1xuXG4gICAgLyoqXG4gICAgICAqIFByaWNlIG9mIHRoZSB2YXJpYW50LiBUaGUgcHJpY2Ugd2lsbCBiZSBpbiB0aGUgZm9sbG93aW5nIGZvcm06IGBcIjEwLjAwXCJgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBwcmljZVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50LnByaWNlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgZm9ybWF0dGVkUHJpY2U6IHtcblxuICAgIC8qKlxuICAgICAgKiBQcmljZSBvZiB2YXJpYW50LCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHNob3AgY3VycmVuY3kgZm9ybWF0IHN0cmluZy5cbiAgICAgICogRm9yIGluc3RhbmNlIGBcIiQxMC4wMFwiYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgZm9ybWF0dGVkUHJpY2VcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5mb3JtYXR0ZWRfcHJpY2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBncmFtczoge1xuXG4gICAgLyoqXG4gICAgICAqIFZhcmlhbnQgd2VpZ2h0IGluIGdyYW1zLiBJZiBubyB3ZWlnaHQgaXMgZGVmaW5lZCBncmFtcyB3aWxsIGJlIGAwYC5cbiAgICAgICogQHByb3BlcnR5IGdyYW1zXG4gICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQuZ3JhbXM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBvcHRpb25WYWx1ZXM6IHtcblxuICAgIC8qKlxuICAgICAgKiBPcHRpb24gdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHZhcmlhbnQuIEV4YW1wbGUgYG9wdGlvblZhbHVlc2A6XG4gICAgICAqIGBgYFxuICAgICAgKiBbXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwiU2l6ZVwiLFxuICAgICAgKiAgICAgXCJvcHRpb25faWRcIjogOTE2NTMzNjUxOCxcbiAgICAgICogICAgIFwidmFsdWVcIjogXCJzbWFsbFwiXG4gICAgICAqICAgfSxcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJDb2xvclwiLFxuICAgICAgKiAgICAgXCJvcHRpb25faWRcIjogOTY0MDUzMjM1OCxcbiAgICAgICogICAgIFwidmFsdWVcIjogXCJibHVlXCJcbiAgICAgICogICB9XG4gICAgICAqIF1cbiAgICAgICogYGBgYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgb3B0aW9uVmFsdWVzXG4gICAgICAqIEB0eXBlIHtBcnJheXxPYmplY3R9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQub3B0aW9uX3ZhbHVlcztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGF2YWlsYWJsZToge1xuXG4gICAgLyoqXG4gICAgICAqIFZhcmlhbnQgaW4gc3RvY2suIEFsd2F5cyBgdHJ1ZWAgaWYgaW52ZW50b3J5IHRyYWNraW5nIGlzIGRpc2FibGVkLlxuICAgICAgKiBAcHJvcGVydHkgYXZhaWxhYmxlXG4gICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50LmF2YWlsYWJsZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGltYWdlOiB7XG5cbiAgICAvKipcbiAgICAgICogSW1hZ2UgZm9yIHZhcmlhbnQuIEFuIGV4YW1wbGUgaW1hZ2UgYE9iamVjdGA6XG4gICAgICAqIGBgYFxuICAgICAgKiB7XG4gICAgICAqICAgY3JlYXRlZF9hdDogXCIyMDE2LTA4LTI5VDEyOjM1OjA5LTA0OjAwXCIsXG4gICAgICAqICAgaWQ6IDE3NjkwNTUzMzUwLFxuICAgICAgKiAgIHBvc2l0aW9uOiAxLFxuICAgICAgKiAgIHByb2R1Y3RfaWQ6IDgyOTEwMjk0NDYsXG4gICAgICAqICAgc3JjOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvaTExX2MzMzM0MzI1LTJkNjctNDYyMy04Y2Q0LTBhNmIwOGFhMWI4My5qcGc/dj0xNDcyNDg4NTA5XCIsXG4gICAgICAqICAgdXBkYXRlZF9hdDogXCIyMDE2LTA4LTI5VDEyOjM1OjA5LTA0OjAwXCIsXG4gICAgICAqICAgdmFyaWFudF9pZHM6IFsgMjc2OTAxMDMyMzggXVxuICAgICAgKiB9XG4gICAgICAqIGBgYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgaW1hZ2VcbiAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIGlkID0gdGhpcy5pZDtcbiAgICAgIHZhciBpbWFnZXMgPSB0aGlzLmF0dHJzLnByb2R1Y3QuaW1hZ2VzO1xuXG4gICAgICB2YXIgcHJpbWFyeUltYWdlID0gaW1hZ2VzWzBdO1xuICAgICAgdmFyIHZhcmlhbnRJbWFnZSA9IGltYWdlcy5maWx0ZXIoZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHJldHVybiBpbWFnZS52YXJpYW50X2lkcy5pbmRleE9mKGlkKSAhPT0gLTE7XG4gICAgICB9KVswXTtcblxuICAgICAgdmFyIGltYWdlID0gdmFyaWFudEltYWdlIHx8IHByaW1hcnlJbWFnZTtcblxuICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBJbWFnZU1vZGVsKGltYWdlKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGltYWdlVmFyaWFudHM6IHtcblxuICAgIC8qKlxuICAgICAgKiBJbWFnZSB2YXJpYW50cyBhdmFpbGFibGUgZm9yIGEgdmFyaWFudC4gQW4gZXhhbXBsZSB2YWx1ZSBvZiBgaW1hZ2VWYXJpYW50YDpcbiAgICAgICogYGBgXG4gICAgICAqIFtcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJwaWNvXCIsXG4gICAgICAqICAgICBcImRpbWVuc2lvbnNcIjogXCIxNngxNlwiLFxuICAgICAgKiAgICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2FsaWVuXzE0NmVmN2MxLTI2ZTktNGU5Ni05NmU2LTlkMzcxMjhkMDAwNV9waWNvLmpwZz92PTE0NjkwNDY0MjNcIlxuICAgICAgKiAgIH0sXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwiY29tcGFjdFwiLFxuICAgICAgKiAgICAgXCJkaW1lbnNpb25zXCI6IFwiMTYweDE2MFwiLFxuICAgICAgKiAgICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2FsaWVuXzE0NmVmN2MxLTI2ZTktNGU5Ni05NmU2LTlkMzcxMjhkMDAwNV9jb21wYWN0LmpwZz92PTE0NjkwNDY0MjNcIlxuICAgICAgKiAgIH1cbiAgICAgICogXVxuICAgICAgKiBgYGBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IGltYWdlVmFyaWFudFxuICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICghdGhpcy5pbWFnZSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmltYWdlLnZhcmlhbnRzO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG52YXIgdW5pcSA9IGZ1bmN0aW9uIHVuaXEoYXJyYXkpIHtcbiAgcmV0dXJuIGFycmF5LnJlZHVjZShmdW5jdGlvbiAodW5pcXVlQXJyYXksIGl0ZW0pIHtcbiAgICBpZiAodW5pcXVlQXJyYXkuaW5kZXhPZihpdGVtKSA8IDApIHtcbiAgICAgIHVuaXF1ZUFycmF5LnB1c2goaXRlbSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuaXF1ZUFycmF5O1xuICB9LCBbXSk7XG59O1xuXG52YXIgTk9fSU1BR0VfVVJJID0gJ2h0dHBzOi8vd2lkZ2V0cy5zaG9waWZ5YXBwcy5jb20vYXNzZXRzL25vLWltYWdlLnN2Zyc7XG5cbi8qKlxuICAgKiBDbGFzcyBmb3IgcHJvZHVjdHMgcmV0dXJuZWQgYnkgZmV0Y2goJ3Byb2R1Y3QnKVxuICAgKiBAY2xhc3MgUHJvZHVjdE1vZGVsXG4gICAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgUHJvZHVjdE1vZGVsID0gQmFzZU1vZGVsLmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzWydzdXBlciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbn0sIHtcbiAgaWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBQcm9kdWN0IHVuaXF1ZSBJRFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgaWRcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucHJvZHVjdF9pZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHRpdGxlOiB7XG5cbiAgICAvKipcbiAgICAgICogVGhlIHByb2R1Y3QgdGl0bGVcbiAgICAgICogQHByb3BlcnR5IHRpdGxlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnRpdGxlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgZGVzY3JpcHRpb246IHtcblxuICAgIC8qKlxuICAgICAgKiBBIHByb2R1Y3QgZGVzY3JpcHRpb24uXG4gICAgICAqIEBwcm9wZXJ0eSBkZXNjcmlwdGlvblxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5ib2R5X2h0bWw7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBpbWFnZXM6IHtcblxuICAgIC8qKlxuICAgICAgKiBBbiBgQXJyYXlgIG9mIGBPYmplY3RzYCB0aGF0IGNvbnRhaW4gbWV0YSBkYXRhIGFib3V0IGFuIGltYWdlIGluY2x1ZGluZyBgc3JjYCBvZiB0aGUgaW1hZ2VzLlxuICAgICAgKlxuICAgICAgKiBBbiBleGFtcGxlIGltYWdlIGBPYmplY3RgOlxuICAgICAgKiBgYGBcbiAgICAgICoge1xuICAgICAgKiAgIGNyZWF0ZWRfYXQ6IFwiMjAxNi0wOC0yOVQxMjozNTowOS0wNDowMFwiLFxuICAgICAgKiAgIGlkOiAxNzY5MDU1MzM1MCxcbiAgICAgICogICBwb3NpdGlvbjogMSxcbiAgICAgICogICBwcm9kdWN0X2lkOiA4MjkxMDI5NDQ2LFxuICAgICAgKiAgIHNyYzogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2kxMV9jMzMzNDMyNS0yZDY3LTQ2MjMtOGNkNC0wYTZiMDhhYTFiODMuanBnP3Y9MTQ3MjQ4ODUwOVwiLFxuICAgICAgKiAgIHVwZGF0ZWRfYXQ6IFwiMjAxNi0wOC0yOVQxMjozNTowOS0wNDowMFwiLFxuICAgICAgKiAgIHZhcmlhbnRfaWRzOiBbIDI3NjkwMTAzMjM4IF1cbiAgICAgICogfVxuICAgICAgKiBgYGBcbiAgICAgICogQHByb3BlcnR5IGltYWdlc1xuICAgICAgKiBAdHlwZSB7QXJyYXl9IGFycmF5IG9mIGltYWdlIG9iamVjdHMuXG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLmltYWdlcy5tYXAoZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VNb2RlbChpbWFnZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIG1lbW9pemVkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB0aGlzLl9tZW1vaXplZCA9IHRoaXMuX21lbW9pemVkIHx8IHt9O1xuXG4gICAgICByZXR1cm4gdGhpcy5fbWVtb2l6ZWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBvcHRpb25zOiB7XG5cbiAgICAvKipcbiAgICAgKiAgR2V0IGFuIGFycmF5IG9mIHt7I2Nyb3NzTGluayBcIlByb2R1Y3RPcHRpb25Nb2RlbFwifX1Qcm9kdWN0T3B0aW9uTW9kZWxze3svY3Jvc3NMaW5rfX0uXG4gICAgICogIHt7I2Nyb3NzTGluayBcIlByb2R1Y3RPcHRpb25Nb2RlbFwifX1Qcm9kdWN0T3B0aW9uTW9kZWxze3svY3Jvc3NMaW5rfX0gY2FuIGJlIHVzZWQgdG9cbiAgICAgKiAgZGVmaW5lIHRoZSBjdXJyZW50bHkgYHNlbGVjdGVkVmFyaWFudGAgZnJvbSB3aGljaCB5b3UgY2FuIGdldCBhIGNoZWNrb3V0IHVybFxuICAgICAqICAoe3sjY3Jvc3NMaW5rIFwiUHJvZHVjdFZhcmlhbnRNb2RlbC9jaGVja291dFVybFwifX1Qcm9kdWN0VmFyaWFudE1vZGVsLmNoZWNrb3V0VXJse3svY3Jvc3NMaW5rfX0pIG9yIGNhblxuICAgICAqICBiZSBhZGRlZCB0byBhIGNhcnQgKHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbC9jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHNcIn19Q2FydE1vZGVsLmNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c3t7L2Nyb3NzTGlua319KS5cbiAgICAgKlxuICAgICAqICBCZWxvdyBpcyBhbiBleGFtcGxlIG9uIGhvdyB0byBjcmVhdGUgaHRtbCBmb3Igb3B0aW9uIHNlbGVjdGlvbnM6XG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqICAvLyB0aGUgZm9sbG93aW5nIHdpbGwgY3JlYXRlIGFuIEFycmF5IG9mIEhUTUwgdG8gY3JlYXRlIG11bHRpcGxlIHNlbGVjdCBpbnB1dHNcbiAgICAgKiAgLy8gZ2xvYmFsIGNhbGxiYWNrcyBhcmUgYWxzbyBjcmVhdGVkIHdoaWNoIHdpbGwgc2V0IHRoZSBvcHRpb24gYXMgc2VsZWN0ZWRcbiAgICAgKiAgdmFyIGVsZW1lbnRzID0gcHJvZHVjdC5vcHRpb25zLm1hcChmdW5jdGlvbihvcHRpb24pIHtcbiAgICAgKiAgICAvLyB3ZSdsbCBjcmVhdGUgYSBjYWxsYmFjayBpbiBnbG9iYWwgc2NvcGVcbiAgICAgKiAgICAvLyB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBzZWxlY3QncyB2YWx1ZSBjaGFuZ2VzXG4gICAgICogICAgdmFyIGNhbGxCYWNrTmFtZSA9IG9wdGlvbi5uYW1lICsgJ29uQ2hhbmdlJztcbiAgICAgKiAgICB3aW5kb3dbIGNhbGxCYWNrTmFtZSBdID0gZnVuY3Rpb24oc2VsZWN0KSB7XG4gICAgICogICAgICAvLyBzZXQgdGhlIHByb2R1Y3RzIG9wdGlvbiB0byBiZSBzZWxlY3RlZFxuICAgICAqICAgICAgb3B0aW9uLnNlbGVjdGVkID0gc2VsZWN0LnZhbHVlO1xuICAgICAqICAgIH07XG4gICAgICpcbiAgICAgKiAgICAvLyByZXR1cm4gYSBzdHJpbmcgd2hpY2ggd2lsbCBiZSBIVE1MIGZvciB0aGUgc2VsZWN0XG4gICAgICogICAgcmV0dXJuICc8c2VsZWN0IG5hbWU9XCInICsgb3B0aW9uLm5hbWUgKyAnXCIgb25jaGFuZ2U9XCInY2FsbEJhY2tOYW1lJyh0aGlzKVwiPicgKyBvcHRpb24udmFsdWVzLm1hcChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgICAgcmV0dXJuICc8b3B0aW9uIHZhbHVlPVwiJyArIHZhbHVlICsgJ1wiPicgKyB2YWx1ZSArICc8L29wdGlvbj4nO1xuICAgICAqICAgIH0pICsgJzwvc2VsZWN0Pic7XG4gICAgICogIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IG9wdGlvbnNcbiAgICAgKiBAdHlwZSB7QXJyYXl8UHJvZHVjdE9wdGlvbk1vZGVsfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKHRoaXMubWVtb2l6ZWQub3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplZC5vcHRpb25zO1xuICAgICAgfVxuXG4gICAgICB2YXIgYmFzZU9wdGlvbnMgPSB0aGlzLmF0dHJzLm9wdGlvbnM7XG4gICAgICB2YXIgdmFyaWFudHMkJDEgPSB0aGlzLnZhcmlhbnRzO1xuXG4gICAgICB0aGlzLm1lbW9pemVkLm9wdGlvbnMgPSBiYXNlT3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICB2YXIgbmFtZSA9IG9wdGlvbi5uYW1lO1xuXG4gICAgICAgIHZhciBkdXBlZFZhbHVlcyA9IHZhcmlhbnRzJCQxLnJlZHVjZShmdW5jdGlvbiAodmFsdWVMaXN0LCB2YXJpYW50KSB7XG4gICAgICAgICAgdmFyIG9wdGlvblZhbHVlRm9yT3B0aW9uID0gdmFyaWFudC5vcHRpb25WYWx1ZXMuZmlsdGVyKGZ1bmN0aW9uIChvcHRpb25WYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvblZhbHVlLm5hbWUgPT09IG9wdGlvbi5uYW1lO1xuICAgICAgICAgIH0pWzBdO1xuXG4gICAgICAgICAgdmFsdWVMaXN0LnB1c2gob3B0aW9uVmFsdWVGb3JPcHRpb24udmFsdWUpO1xuXG4gICAgICAgICAgcmV0dXJuIHZhbHVlTGlzdDtcbiAgICAgICAgfSwgW10pO1xuXG4gICAgICAgIHZhciB2YWx1ZXMgPSB1bmlxKGR1cGVkVmFsdWVzKTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb2R1Y3RPcHRpb25Nb2RlbCh7IG5hbWU6IG5hbWUsIHZhbHVlczogdmFsdWVzIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzLm1lbW9pemVkLm9wdGlvbnM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB2YXJpYW50czoge1xuXG4gICAgLyoqXG4gICAgICAqIEFuIGBBcnJheWAgb2Yge3sjY3Jvc3NMaW5rIFwiUHJvZHVjdFZhcmlhbnRNb2RlbFwifX1Qcm9kdWN0VmFyaWFudE1vZGVsJ3N7ey9jcm9zc0xpbmt9fVxuICAgICAgKiBAcHJvcGVydHkgdmFyaWFudHNcbiAgICAgICogQHR5cGUge0FycmF5fFByb2R1Y3RWYXJpYW50TW9kZWx9IGFycmF5IG9mIFByb2R1Y3RWYXJpYW50TW9kZWwgaW5zdGFuY2VzLlxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudHMubWFwKGZ1bmN0aW9uICh2YXJpYW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvZHVjdFZhcmlhbnRNb2RlbCh7IHZhcmlhbnQ6IHZhcmlhbnQsIHByb2R1Y3Q6IF90aGlzMyB9LCB7IGNvbmZpZzogX3RoaXMzLmNvbmZpZyB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgc2VsZWN0aW9uczoge1xuXG4gICAgLyoqXG4gICAgICAqIEEgcmVhZCBvbmx5IGBBcnJheWAgb2YgU3RyaW5ncyByZXByZXNlbnRlZCBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uIHZhbHVlcy4gZWcuIGBbXCJMYXJnZVwiLCBcIlJlZFwiXWBcbiAgICAgICogQHByb3BlcnR5IHNlbGVjdGlvbnNcbiAgICAgICogQHR5cGUge0FycmF5IHwgU3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHJldHVybiBvcHRpb24uc2VsZWN0ZWQ7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHNlbGVjdGVkVmFyaWFudDoge1xuXG4gICAgLyoqXG4gICAgICAqIFJldHJpZXZlIHZhcmlhbnQgZm9yIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb25zLiBCeSBkZWZhdWx0IHRoZSBmaXJzdCB2YWx1ZSBpbiBlYWNoXG4gICAgICAqIG9wdGlvbiBpcyBzZWxlY3RlZCB3aGljaCBtZWFucyBgc2VsZWN0ZWRWYXJpYW50YCB3aWxsIG5ldmVyIGJlIGBudWxsYC5cbiAgICAgICpcbiAgICAgICogV2l0aCBhIGBzZWxlY3RlZFZhcmlhbnRgIHlvdSBjYW4gY3JlYXRlIGNoZWNrb3V0IHVybFxuICAgICAgKiAoe3sjY3Jvc3NMaW5rIFwiUHJvZHVjdFZhcmlhbnRNb2RlbC9jaGVja291dFVybFwifX1Qcm9kdWN0VmFyaWFudE1vZGVsLmNoZWNrb3V0VXJse3svY3Jvc3NMaW5rfX0pIG9yIGl0IGNhblxuICAgICAgKiBiZSBhZGRlZCB0byBhIGNhcnQgKHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbC9jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHNcIn19Q2FydE1vZGVsLmNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c3t7L2Nyb3NzTGlua319KS5cbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHNlbGVjdGVkVmFyaWFudFxuICAgICAgKiBAdHlwZSB7UHJvZHVjdFZhcmlhbnRNb2RlbH1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIHZhcmlhbnRUaXRsZSA9IHRoaXMuc2VsZWN0aW9ucy5qb2luKCcgLyAnKTtcblxuICAgICAgcmV0dXJuIHRoaXMudmFyaWFudHMuZmlsdGVyKGZ1bmN0aW9uICh2YXJpYW50KSB7XG4gICAgICAgIHJldHVybiB2YXJpYW50LnRpdGxlID09PSB2YXJpYW50VGl0bGU7XG4gICAgICB9KVswXSB8fCBudWxsO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgc2VsZWN0ZWRWYXJpYW50SW1hZ2U6IHtcblxuICAgIC8qKlxuICAgICAgKiBSZXRyaWV2ZSBpbWFnZSBmb3IgY3VycmVudGx5IHNlbGVjdGVkIHZhcmlhbnRJbWFnZS4gQW4gZXhhbXBsZSBpbWFnZSBPYmplY3Qgd291bGQgbG9vayBsaWtlIHRoaXM6XG4gICAgICAqIGBgYFxuICAgICAgKiB7XG4gICAgICAqICAgY3JlYXRlZF9hdDogXCIyMDE2LTA4LTI5VDEyOjM1OjA5LTA0OjAwXCIsXG4gICAgICAqICAgaWQ6IDE3NjkwNTUzMzUwLFxuICAgICAgKiAgIHBvc2l0aW9uOiAxLFxuICAgICAgKiAgIHByb2R1Y3RfaWQ6IDgyOTEwMjk0NDYsXG4gICAgICAqICAgc3JjOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvaTExX2MzMzM0MzI1LTJkNjctNDYyMy04Y2Q0LTBhNmIwOGFhMWI4My5qcGc/dj0xNDcyNDg4NTA5XCIsXG4gICAgICAqICAgdXBkYXRlZF9hdDogXCIyMDE2LTA4LTI5VDEyOjM1OjA5LTA0OjAwXCIsXG4gICAgICAqICAgdmFyaWFudF9pZHM6IFsgMjc2OTAxMDMyMzggXVxuICAgICAgKiB9XG4gICAgICAqIGBgYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgc2VsZWN0ZWRWYXJpYW50SW1hZ2VcbiAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkVmFyaWFudCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRWYXJpYW50LmltYWdlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG52YXIgTGlzdGluZ3NTZXJpYWxpemVyID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH0sXG4gIHJvb3RLZXlGb3JUeXBlOiBmdW5jdGlvbiByb290S2V5Rm9yVHlwZSh0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUuc2xpY2UoMCwgLTEpICsgJ19saXN0aW5nJztcbiAgfSxcblxuXG4gIG1vZGVsczoge1xuICAgIGNvbGxlY3Rpb25zOiBCYXNlTW9kZWwsXG4gICAgcHJvZHVjdHM6IFByb2R1Y3RNb2RlbFxuICB9LFxuXG4gIG1vZGVsRm9yVHlwZTogZnVuY3Rpb24gbW9kZWxGb3JUeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlbHNbdHlwZV07XG4gIH0sXG4gIGRlc2VyaWFsaXplU2luZ2xlOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNpbmdsZSh0eXBlKSB7XG4gICAgdmFyIHNpbmdsZVBheWxvYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHZhciBtZXRhQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gICAgdmFyIG1vZGVsQXR0cnMgPSBzaW5nbGVQYXlsb2FkW3RoaXMucm9vdEtleUZvclR5cGUodHlwZSldO1xuICAgIHZhciBtb2RlbCA9IHRoaXMubW9kZWxGcm9tQXR0cnModHlwZSwgbW9kZWxBdHRycywgbWV0YUF0dHJzKTtcblxuICAgIHJldHVybiBtb2RlbDtcbiAgfSxcbiAgZGVzZXJpYWxpemVNdWx0aXBsZTogZnVuY3Rpb24gZGVzZXJpYWxpemVNdWx0aXBsZSh0eXBlKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICB2YXIgY29sbGVjdGlvblBheWxvYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHZhciBtZXRhQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gICAgdmFyIG1vZGVscyA9IGNvbGxlY3Rpb25QYXlsb2FkW3RoaXMucm9vdEtleUZvclR5cGUodHlwZSkgKyAncyddO1xuXG4gICAgcmV0dXJuIG1vZGVscy5tYXAoZnVuY3Rpb24gKGF0dHJzKSB7XG4gICAgICB2YXIgbW9kZWwgPSBfdGhpczQubW9kZWxGcm9tQXR0cnModHlwZSwgYXR0cnMsIG1ldGFBdHRycyk7XG5cbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9KTtcbiAgfSxcbiAgbW9kZWxGcm9tQXR0cnM6IGZ1bmN0aW9uIG1vZGVsRnJvbUF0dHJzKHR5cGUsIGF0dHJzLCBtZXRhQXR0cnMpIHtcbiAgICB2YXIgTW9kZWwgPSB0aGlzLm1vZGVsRm9yVHlwZSh0eXBlKTtcblxuICAgIG1ldGFBdHRycy5jb25maWcgPSB0aGlzLmNvbmZpZztcblxuICAgIHJldHVybiBuZXcgTW9kZWwoYXR0cnMsIG1ldGFBdHRycyk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBhdXRoVG9VcmwodXJsLCBvcHRzKSB7XG4gIHZhciBhdXRob3JpemF0aW9uID0gdm9pZCAwO1xuXG4gIGlmIChvcHRzLmhlYWRlcnMpIHtcbiAgICBPYmplY3Qua2V5cyhvcHRzLmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKGtleS50b0xvd2VyQ2FzZSgpID09PSAnYXV0aG9yaXphdGlvbicpIHtcbiAgICAgICAgYXV0aG9yaXphdGlvbiA9IG9wdHMuaGVhZGVyc1trZXldO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGF1dGhvcml6YXRpb24pIHtcbiAgICB2YXIgaGFzaGVkS2V5ID0gYXV0aG9yaXphdGlvbi5zcGxpdCgnICcpLnNsaWNlKC0xKVswXTtcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcGxhaW5LZXkgPSBhdG9iKGhhc2hlZEtleSk7XG5cbiAgICAgIHZhciBuZXdVcmwgPSB2b2lkIDA7XG5cbiAgICAgIGlmICh1cmwuaW5kZXhPZignPycpID4gLTEpIHtcbiAgICAgICAgbmV3VXJsID0gdXJsICsgJyZfeF9odHRwX2F1dGhvcml6YXRpb249JyArIHBsYWluS2V5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3VXJsID0gdXJsICsgJz9feF9odHRwX2F1dGhvcml6YXRpb249JyArIHBsYWluS2V5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3VXJsO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGF0b2IgY2hva2VkIG9uIG5vbi1lbmNvZGVkIGRhdGEuIFRoZXJlZm9yZSwgbm90IGEgZm9ybSBvZiBhdXRoIHdlXG4gICAgICAvLyBzdXBwb3J0LlxuICAgICAgLy9cbiAgICAgIC8vIE5PT1BcbiAgICAgIC8vXG4gICAgfVxuICB9XG5cbiAgLyogZXNsaW50IG5ld2xpbmUtYmVmb3JlLXJldHVybjogMCAqL1xuICByZXR1cm4gdXJsO1xufVxuXG5mdW5jdGlvbiBpZTlBamF4KG1ldGhvZCwgdXJsLCBvcHRzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHhkciA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuXG4gICAgeGRyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZSh4ZHIucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICByZXNvbHZlKHsganNvbjoganNvbiwgb3JpZ2luYWxSZXNwb25zZTogeGRyLCBpc0pTT046IHRydWUgfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlc29sdmUoeyB0ZXh0OiB4ZHIucmVzcG9uc2VUZXh0LCBvcmlnaW5hbFJlc3BvbnNlOiB4ZHIsIGlzVGV4dDogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgWERSJykpO1xuICAgIH1cblxuICAgIHhkci5vbmVycm9yID0gaGFuZGxlRXJyb3I7XG4gICAgeGRyLm9udGltZW91dCA9IGhhbmRsZUVycm9yO1xuXG4gICAgeGRyLm9wZW4obWV0aG9kLCBhdXRoVG9VcmwodXJsLCBvcHRzKSk7XG4gICAgeGRyLnNlbmQob3B0cy5kYXRhKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGlzTm9kZUxpa2VFbnZpcm9ubWVudCgpIHtcbiAgdmFyIHdpbmRvd0Fic2VudCA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnO1xuICB2YXIgcmVxdWlyZVByZXNlbnQgPSBcImZ1bmN0aW9uXCIgPT09ICdmdW5jdGlvbic7XG5cbiAgcmV0dXJuIHdpbmRvd0Fic2VudCAmJiByZXF1aXJlUHJlc2VudDtcbn1cblxuZnVuY3Rpb24gY2hlY2tTdGF0dXMocmVzcG9uc2UpIHtcbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuXG4gIGVycm9yLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgdGhyb3cgZXJyb3I7XG59XG5cbmZ1bmN0aW9uIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uIChqc29uKSB7XG4gICAgcmV0dXJuIHsganNvbjoganNvbiwgb3JpZ2luYWxSZXNwb25zZTogcmVzcG9uc2UsIGlzSlNPTjogdHJ1ZSB9O1xuICB9KVsnY2F0Y2gnXShmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc3BvbnNlQ2xvbmUgPSByZXNwb25zZS5jbG9uZSgpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlQ2xvbmUudGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgIHJldHVybiB7IHRleHQ6IHRleHQsIG9yaWdpbmFsUmVzcG9uc2U6IHJlc3BvbnNlQ2xvbmUsIGlzVGV4dDogdHJ1ZSB9O1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYWpheChtZXRob2QsIHVybCkge1xuICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgLy8gd2UgbmVlZCB0byBjaGVjayB0aGF0IHdlJ3JlIG5vdCBydW5uaW5nIGluIE5vZGVcbiAgLy8gYmVmb3JlIHdlIHNob3VsZCBjaGVjayBpZiB0aGlzIGlzIGllOVxuICBpZiAoIWlzTm9kZUxpa2VFbnZpcm9ubWVudCgpKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKCEoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSkge1xuICAgICAgcmV0dXJuIGllOUFqYXguYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIG9wdHMubWV0aG9kID0gbWV0aG9kO1xuICBvcHRzLm1vZGUgPSAnY29ycyc7XG5cbiAgcmV0dXJuIGZldGNoKHVybCwgb3B0cykudGhlbihjaGVja1N0YXR1cykudGhlbihwYXJzZVJlc3BvbnNlKTtcbn1cblxudmFyIExpc3RpbmdzQWRhcHRlciA9IENvcmVPYmplY3QuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgYWpheDogYWpheCxcblxuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH0sXG4gIHBhdGhGb3JUeXBlOiBmdW5jdGlvbiBwYXRoRm9yVHlwZSh0eXBlKSB7XG4gICAgcmV0dXJuICcvJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJ19saXN0aW5ncyc7XG4gIH0sXG4gIGJ1aWxkVXJsOiBmdW5jdGlvbiBidWlsZFVybChzaW5nbGVPck11bHRpcGxlLCB0eXBlLCBpZE9yUXVlcnkpIHtcbiAgICBzd2l0Y2ggKHNpbmdsZU9yTXVsdGlwbGUpIHtcbiAgICAgIGNhc2UgJ211bHRpcGxlJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRNdWx0aXBsZVVybCh0eXBlLCBpZE9yUXVlcnkpO1xuICAgICAgY2FzZSAnc2luZ2xlJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRTaW5nbGVVcmwodHlwZSwgaWRPclF1ZXJ5KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0sXG4gIGJ1aWxkTXVsdGlwbGVVcmw6IGZ1bmN0aW9uIGJ1aWxkTXVsdGlwbGVVcmwodHlwZSkge1xuICAgIHZhciBxdWVyeSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICB2YXIgdXJsID0gJycgKyB0aGlzLmJhc2VVcmwgKyB0aGlzLnBhdGhGb3JUeXBlKHR5cGUpO1xuICAgIHZhciBwYXJhbU5hbWVzID0gT2JqZWN0LmtleXMocXVlcnkpO1xuXG4gICAgaWYgKHBhcmFtTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gcGFyYW1OYW1lcy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocXVlcnlba2V5XSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHF1ZXJ5W2tleV0uam9pbignLCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gcXVlcnlba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBrZXkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgfSkuam9pbignJicpO1xuXG4gICAgICByZXR1cm4gdXJsICsgJz8nICsgcXVlcnlTdHJpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybDtcbiAgfSxcbiAgYnVpbGRTaW5nbGVVcmw6IGZ1bmN0aW9uIGJ1aWxkU2luZ2xlVXJsKHR5cGUsIGlkKSB7XG4gICAgcmV0dXJuICcnICsgdGhpcy5iYXNlVXJsICsgdGhpcy5wYXRoRm9yVHlwZSh0eXBlKSArICcvJyArIGlkO1xuICB9LFxuICBmZXRjaE11bHRpcGxlOiBmdW5jdGlvbiBmZXRjaE11bHRpcGxlKCkgLyogdHlwZSwgW3F1ZXJ5XSAqL3tcbiAgICB2YXIgdXJsID0gdGhpcy5idWlsZFVybC5hcHBseSh0aGlzLCBbJ211bHRpcGxlJ10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcblxuICAgIHJldHVybiB0aGlzLmFqYXgoJ0dFVCcsIHVybCwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uO1xuICAgIH0pO1xuICB9LFxuICBmZXRjaFNpbmdsZTogZnVuY3Rpb24gZmV0Y2hTaW5nbGUoKSAvKiB0eXBlLCBpZCAqL3tcbiAgICB2YXIgdXJsID0gdGhpcy5idWlsZFVybC5hcHBseSh0aGlzLCBbJ3NpbmdsZSddLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG5cbiAgICByZXR1cm4gdGhpcy5hamF4KCdHRVQnLCB1cmwsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbjtcbiAgICB9KTtcbiAgfVxufSwge1xuICBiYXNlNjRBcGlLZXk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBidG9hKHRoaXMuY29uZmlnLmFwaUtleSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBiYXNlVXJsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgX2NvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgICAgdmFyIGRvbWFpbiA9IF9jb25maWcuZG9tYWluO1xuICAgICAgdmFyIGFwcElkID0gX2NvbmZpZy5hcHBJZDtcblxuXG4gICAgICByZXR1cm4gJ2h0dHBzOi8vJyArIGRvbWFpbiArICcvYXBpL2FwcHMvJyArIGFwcElkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaGVhZGVyczoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGFzc2lnbiQxKHt9LCB7XG4gICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgdGhpcy5iYXNlNjRBcGlLZXksXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdYLVNESy1WYXJpYW50JzogJ2phdmFzY3JpcHQnLFxuICAgICAgICAnWC1TREstVmVyc2lvbic6IHZlcnNpb25cblxuICAgICAgfSwgdGhpcy5jb25maWcuYWpheEhlYWRlcnMpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG52YXIgR1VJRF9LRVkgPSAnc2hvcGlmeS1idXktdXVpZCc7XG5cbi8qKlxuICogQSBjYXJ0IHN0b3JlcyBhbiBBcnJheSBvZiBgQ2FydExpbmVJdGVtTW9kZWxgJ3MgaW4gaXQncyBgbGluZUl0ZW1zYCBwcm9wZXJ0eS5cbiAqIEBjbGFzcyBDYXJ0TGluZUl0ZW1Nb2RlbFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBDYXJ0TGluZUl0ZW1Nb2RlbCA9IEJhc2VNb2RlbC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1snc3VwZXInXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG59LCB7XG4gIGlkOiB7XG5cbiAgICAvKipcbiAgICAgKiBBIGxpbmUgaXRlbSBJRC5cbiAgICAgKiBAcHJvcGVydHkgaWRcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnNbR1VJRF9LRVldO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdmFyaWFudF9pZDoge1xuXG4gICAgLyoqXG4gICAgICogSUQgb2YgbGluZSBpdGVtIHZhcmlhbnQuXG4gICAgICogQHByb3BlcnR5IHZhcmlhbnRfaWRcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudF9pZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHByb2R1Y3RfaWQ6IHtcblxuICAgIC8qKlxuICAgICAqIElEIG9mIHZhcmlhbnQncyBwcm9kdWN0LlxuICAgICAqIEBwcm9wZXJ0eSBwcm9kdWN0X2lkXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByb2R1Y3RfaWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBpbWFnZToge1xuXG4gICAgLyoqXG4gICAgICogVmFyaWFudCdzIGltYWdlLlxuICAgICAqIEV4YW1wbGUgYE9iamVjdGAgcmV0dXJuZWQ6XG4gICAgICogYGBgXG4gICAgICoge1xuICAgICAqICAgIFwiaWRcIjogMTg3MjMxODMyMzgsXG4gICAgICogICAgXCJjcmVhdGVkX2F0XCI6IFwiMjAxNi0wOS0xNFQxNzoxMjoxMi0wNDowMFwiLFxuICAgICAqICAgIFwicG9zaXRpb25cIjogMSxcbiAgICAgKiAgICBcInVwZGF0ZWRfYXRcIjogXCIyMDE2LTA5LTE0VDE3OjEyOjEyLTA0OjAwXCIsXG4gICAgICogICAgXCJwcm9kdWN0X2lkXCI6IDg1Njk5MTE1NTgsXG4gICAgICogICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL01vcF9fdGhyZWVfZGlmZmVyZW50X21vcF9oYW5kbGVzLmpwZz92PTE0NzM4ODc1MzJcIixcbiAgICAgKiAgICBcInZhcmlhbnRfaWRzXCI6IFtdXG4gICAgICogIH1cbiAgICAgKiBgYGBcbiAgICAgKiBAcHJvcGVydHkgaW1hZ2VcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCF0aGlzLmF0dHJzLmltYWdlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEltYWdlTW9kZWwodGhpcy5hdHRycy5pbWFnZSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBpbWFnZVZhcmlhbnRzOiB7XG5cbiAgICAvKipcbiAgICAgICogSW1hZ2UgdmFyaWFudHMgYXZhaWxhYmxlIGZvciBhIHZhcmlhbnQuIEFuIGV4YW1wbGUgdmFsdWUgb2YgYGltYWdlVmFyaWFudGA6XG4gICAgICAqIGBgYFxuICAgICAgKiBbXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwicGljb1wiLFxuICAgICAgKiAgICAgXCJkaW1lbnNpb25zXCI6IFwiMTZ4MTZcIixcbiAgICAgICogICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9hbGllbl8xNDZlZjdjMS0yNmU5LTRlOTYtOTZlNi05ZDM3MTI4ZDAwMDVfcGljby5qcGc/dj0xNDY5MDQ2NDIzXCJcbiAgICAgICogICB9LFxuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcImNvbXBhY3RcIixcbiAgICAgICogICAgIFwiZGltZW5zaW9uc1wiOiBcIjE2MHgxNjBcIixcbiAgICAgICogICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9hbGllbl8xNDZlZjdjMS0yNmU5LTRlOTYtOTZlNi05ZDM3MTI4ZDAwMDVfY29tcGFjdC5qcGc/dj0xNDY5MDQ2NDIzXCJcbiAgICAgICogICB9XG4gICAgICAqIF1cbiAgICAgICogYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBpbWFnZVZhcmlhbnRcbiAgICAgICogQHR5cGUge0FycmF5fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoIXRoaXMuaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5pbWFnZS52YXJpYW50cztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHRpdGxlOiB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWN0IHRpdGxlIG9mIHZhcmlhbnQncyBwYXJlbnQgcHJvZHVjdC5cbiAgICAgKiBAcHJvcGVydHkgdGl0bGVcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBxdWFudGl0eToge1xuXG4gICAgLyoqXG4gICAgICogQ291bnQgb2YgdmFyaWFudHMgdG8gb3JkZXIuXG4gICAgICogQHByb3BlcnR5IHF1YW50aXR5XG4gICAgICogQHR5cGUge051bWJlcn1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnF1YW50aXR5O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgIHZhciBwYXJzZWRWYWx1ZSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cbiAgICAgIGlmIChwYXJzZWRWYWx1ZSA8IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWFudGl0aWVzIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgICAgIH0gZWxzZSBpZiAocGFyc2VkVmFsdWUgIT09IHBhcnNlRmxvYXQodmFsdWUpKSB7XG4gICAgICAgIC8qIGluY2lkZW50YWxseSwgdGhpcyBjb3ZlcnMgYWxsIE5hTiB2YWx1ZXMsIGJlY2F1c2UgTmFOICE9PSBOYW4gKi9cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWFudGl0aWVzIG11c3QgYmUgd2hvbGUgbnVtYmVycycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmF0dHJzLnF1YW50aXR5ID0gcGFyc2VkVmFsdWU7XG5cbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnF1YW50aXR5O1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcHJvcGVydGllczoge1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9taXphdGlvbiBpbmZvcm1hdGlvbiBmb3IgYSBwcm9kdWN0LlxuICAgICAqIDxhIGhyZWY9XCJodHRwczovL2hlbHAuc2hvcGlmeS5jb20vdGhlbWVzL2N1c3RvbWl6YXRpb24vcHJvZHVjdHMvZ2V0LWN1c3RvbWl6YXRpb24taW5mb3JtYXRpb24tZm9yLXByb2R1Y3RzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+XG4gICAgICogU2VlIGhlcmUgZm9yIG1vcmUgaW5mb1xuICAgICAqIDwvYT4uXG4gICAgICogQHByb3BlcnR5IHByb3BlcnRpZXNcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgIHRoaXMuYXR0cnMucHJvcGVydGllcyA9IHZhbHVlIHx8IHt9O1xuXG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB2YXJpYW50X3RpdGxlOiB7XG5cbiAgICAvKipcbiAgICAgKiBUaXRsZSBvZiB2YXJpYW50LlxuICAgICAqIEBwcm9wZXJ0eSB2YXJpYW50X3RpdGxlXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnRfdGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcmljZToge1xuXG4gICAgLyoqXG4gICAgICogUHJpY2Ugb2YgdGhlIHZhcmlhbnQuIEZvciBleGFtcGxlOiBgXCI1LjAwXCJgLlxuICAgICAqIEBwcm9wZXJ0eSBwcmljZVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcmljZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGNvbXBhcmVfYXRfcHJpY2U6IHtcblxuICAgIC8qKlxuICAgICAgKiBDb21wYXJlIGF0IHByaWNlIGZvciB2YXJpYW50LiBUaGUgYGNvbXBhcmVBdFByaWNlYCB3b3VsZCBiZVxuICAgICAgKiB0aGUgcHJpY2Ugb2YgdGhlIHByb2R1Y3QgcHJldmlvdXNseSBiZWZvcmUgdGhlIHByb2R1Y3Qgd2VudCBvbiBzYWxlLiBGb3IgbW9yZSBpbmZvXG4gICAgICAqIGdvIDxhIGhyZWY9XCJodHRwczovL2RvY3Muc2hvcGlmeS5jb20vbWFudWFsL3Byb2R1Y3RzL3Byb21vdGluZy1tYXJrZXRpbmcvc2FsZXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5oZXJlPC9hPi5cbiAgICAgICpcbiAgICAgICogSWYgbm8gYGNvbXBhcmVBdFByaWNlYCBpcyBzZXQgdGhlbiB0aGlzIHZhbHVlIHdpbGwgYmUgYG51bGxgLiBBbiBleGFtcGxlIHZhbHVlOiBgXCI1LjAwXCJgLlxuICAgICAgKiBAcHJvcGVydHkgY29tcGFyZUF0UHJpY2VcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLmNvbXBhcmVfYXRfcHJpY2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBsaW5lX3ByaWNlOiB7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgcHJpY2UgZm9yIHRoaXMgbGluZSBpdGVtLiBGb3IgaW5zdGFuY2UgaWYgdGhlIHZhcmlhbnQgY29zdHMgYDEuNTBgIGFuZCB5b3UgaGF2ZSBhIHF1YW50aXR5XG4gICAgICogb2YgMiB0aGVuIGBsaW5lX3ByaWNlYCB3aWxsIGJlIGAzLjAwYC5cbiAgICAgKiBAcHJvcGVydHkgbGluZV9wcmljZVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gKHRoaXMucXVhbnRpdHkgKiBwYXJzZUZsb2F0KHRoaXMucHJpY2UpKS50b0ZpeGVkKDIpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgZ3JhbXM6IHtcblxuICAgIC8qKlxuICAgICAqIFZhcmlhbnQncyB3ZWlnaHQgaW4gZ3JhbXMuIElmIG5vIHdlaWdodCBpcyBzZXQgdGhlbiBgMGAgaXMgcmV0dXJuZWQuXG4gICAgICogQHByb3BlcnR5IGdyYW1zXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge051bWJlcn1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLmdyYW1zO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG4vKiBlc2xpbnQgbm8tdW5kZWZpbmVkOiAwIGNvbXBsZXhpdHk6IDAgKi9cbnZhciBHVUlEX1BSRUZJWCA9ICdzaG9waWZ5LWJ1eS4nICsgRGF0ZS5ub3coKTtcblxudmFyIEdVSURfREVTQyA9IHtcbiAgd3JpdGFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IG51bGxcbn07XG5cbnZhciB1dWlkU2VlZCA9IDA7XG5cbmZ1bmN0aW9uIHV1aWQoKSB7XG4gIHJldHVybiArK3V1aWRTZWVkO1xufVxuXG52YXIgbnVtYmVyQ2FjaGUgPSB7fTtcbnZhciBzdHJpbmdDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBzZXRHdWlkRm9yKG9iaikge1xuICBpZiAob2JqICYmIG9ialtHVUlEX0tFWV0pIHtcbiAgICByZXR1cm4gb2JqW0dVSURfS0VZXTtcbiAgfVxuXG4gIGlmIChvYmogPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnKHVuZGVmaW5lZCknO1xuICB9XG5cbiAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnKG51bGwpJztcbiAgfVxuXG4gIHZhciB0eXBlID0gdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yob2JqKTtcbiAgdmFyIGlkID0gdm9pZCAwO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICBpZCA9IG51bWJlckNhY2hlW29ial07XG5cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgaWQgPSBudW1iZXJDYWNoZVtvYmpdID0gJ251JyArIG9iajtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgaWQgPSBzdHJpbmdDYWNoZVtvYmpdO1xuXG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIGlkID0gc3RyaW5nQ2FjaGVbb2JqXSA9ICdzdCcgKyB1dWlkKCk7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICBpZiAob2JqKSB7XG4gICAgICAgIGlkID0gJyh0cnVlKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZCA9ICcoZmFsc2UpJztcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKG9iaiA9PT0gT2JqZWN0KSB7XG4gICAgICAgIGlkID0gJyhPYmplY3QpJztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChvYmogPT09IEFycmF5KSB7XG4gICAgICAgIGlkID0gJyhBcnJheSknO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWQgPSBHVUlEX1BSRUZJWCArICcuJyArIHV1aWQoKTtcblxuICAgICAgaWYgKG9ialtHVUlEX0tFWV0gPT09IG51bGwpIHtcbiAgICAgICAgb2JqW0dVSURfS0VZXSA9IGlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgR1VJRF9ERVNDLnZhbHVlID0gaWQ7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIEdVSURfS0VZLCBHVUlEX0RFU0MpO1xuICAgICAgfVxuICB9XG5cbiAgcmV0dXJuIGlkO1xufVxuXG4vKiBnbG9iYWwgZ2xvYmFsICovXG5cbnZhciBnbG9iYWxOYW1lc3BhY2UgPSB2b2lkIDA7XG5cbmlmICh0eXBlb2YgZ2xvYmFsID09PSAndW5kZWZpbmVkJykge1xuICBnbG9iYWxOYW1lc3BhY2UgPSB3aW5kb3c7XG59IGVsc2Uge1xuICBnbG9iYWxOYW1lc3BhY2UgPSBnbG9iYWw7XG59XG5cbmZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7XG4gIGlmICghZ2xvYmFsTmFtZXNwYWNlW2tleV0pIHtcbiAgICBnbG9iYWxOYW1lc3BhY2Vba2V5XSA9IHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldChrZXkpIHtcbiAgcmV0dXJuIGdsb2JhbE5hbWVzcGFjZVtrZXldO1xufVxuXG52YXIgZ2xvYmFsVmFycyA9IHsgc2V0OiBzZXQsIGdldDogZ2V0IH07XG5cbmZ1bmN0aW9uIG9iamVjdHNFcXVhbChvbmUsIHR3bykge1xuICBpZiAob25lID09PSB0d28pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3Qua2V5cyhvbmUpLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAob25lW2tleV0gaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gb25lW2tleV0udG9TdHJpbmcoKSA9PT0gdHdvW2tleV0udG9TdHJpbmcoKTtcbiAgICB9IGVsc2UgaWYgKF90eXBlb2Yob25lW2tleV0pID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIG9iamVjdHNFcXVhbChvbmVba2V5XSwgdHdvW2tleV0pO1xuICAgIH1cblxuICAgIHJldHVybiBvbmVba2V5XSA9PT0gdHdvW2tleV07XG4gIH0pO1xufVxuXG4vKipcbiogQ2xhc3MgZm9yIGNhcnQgbW9kZWxcbiogQGNsYXNzIENhcnRNb2RlbFxuKi9cbnZhciBDYXJ0TW9kZWwgPSBCYXNlTW9kZWwuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXNbJ3N1cGVyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogQWRkIGl0ZW1zIHRvIHRoZSBjYXJ0LiBVcGRhdGVzIGNhcnQncyBgbGluZUl0ZW1zYCBiYXNlZCBvbiB2YXJpYW50cyBwYXNzZWQgaW4uXG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiBjYXJ0LmFkZFZhcmlhbnRzKHt2YXJpYW50OiB2YXJpYW50T2JqZWN0LCBxdWFudGl0eTogMX0pLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyBjcmVhdGVkIGxpbmUgaXRlbXNcbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKiBAZGVwcmVjYXRlZCBgY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzYCB3aWxsIGJlIHVzZWQgaW4gdGhlIGZ1dHVyZSBhcyBpdCdzIG1vcmUgZGVzY3JpcHRpdmVcbiAgICAqIEBtZXRob2QgYWRkVmFyaWFudHNcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtIC0gT25lIG9yIG1vcmUgdmFyaWFudHNcbiAgICAqIEBwYXJhbSB7UHJvZHVjdFZhcmlhbnRNb2RlbH0gaXRlbS52YXJpYW50IC0gdmFyaWFudCBvYmplY3RcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBpdGVtLnF1YW50aXR5IC0gcXVhbnRpdHlcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBbbW9yZUl0ZW1zLi4uXSAtIGZ1cnRoZXIgb2JqZWN0cyBkZWZpbmluZyBgdmFyaWFudGAgYW5kIGBxdWFudGl0eWAgbWF5YmUgcGFzc2VkIGluXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdGhlIGNhcnQgaW5zdGFuY2UuXG4gICovXG4gIGFkZFZhcmlhbnRzOiBmdW5jdGlvbiBhZGRWYXJpYW50cygpIHtcbiAgICBsb2dnZXIud2FybignQ2FydE1vZGVsIC0gJywgJ2FkZFZhcmlhbnRzIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzIGluc3RlYWQnKTtcblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBBZGQgaXRlbXMgdG8gdGhlIGNhcnQuIFVwZGF0ZXMgY2FydCdzIGBsaW5lSXRlbXNgIGJhc2VkIG9uIHZhcmlhbnRzIHBhc3NlZCBpbi5cbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIGNhcnQuY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzKHt2YXJpYW50OiB2YXJpYW50T2JqZWN0LCBxdWFudGl0eTogMX0pLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyBjcmVhdGVkIGxpbmUgaXRlbXNcbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKiBAbWV0aG9kIGNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c1xuICAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW0gLSBPbmUgb3IgbW9yZSB2YXJpYW50c1xuICAgICogQHBhcmFtIHtQcm9kdWN0VmFyaWFudE1vZGVsfSBpdGVtLnZhcmlhbnQgLSB2YXJpYW50IG9iamVjdFxuICAgICogQHBhcmFtIHtOdW1iZXJ9IGl0ZW0ucXVhbnRpdHkgLSBxdWFudGl0eVxuICAgICogQHBhcmFtIHtPYmplY3R9IFttb3JlSXRlbXMuLi5dIC0gZnVydGhlciBvYmplY3RzIGRlZmluaW5nIGB2YXJpYW50YCBhbmQgYHF1YW50aXR5YCBtYXliZSBwYXNzZWQgaW5cbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHRoZSBjYXJ0IGluc3RhbmNlLlxuICAqL1xuICBjcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHM6IGZ1bmN0aW9uIGNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cygpIHtcbiAgICB2YXIgbmV3TGluZUl0ZW1zID0gW10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGxpbmVJdGVtID0ge1xuICAgICAgICBpbWFnZTogaXRlbS52YXJpYW50LmltYWdlLFxuICAgICAgICBpbWFnZV92YXJpYW50czogaXRlbS52YXJpYW50LmltYWdlVmFyaWFudHMsXG4gICAgICAgIHZhcmlhbnRfaWQ6IGl0ZW0udmFyaWFudC5pZCxcbiAgICAgICAgcHJvZHVjdF9pZDogaXRlbS52YXJpYW50LnByb2R1Y3RJZCxcbiAgICAgICAgdGl0bGU6IGl0ZW0udmFyaWFudC5wcm9kdWN0VGl0bGUsXG4gICAgICAgIHF1YW50aXR5OiBwYXJzZUludChpdGVtLnF1YW50aXR5LCAxMCksXG4gICAgICAgIHByb3BlcnRpZXM6IGl0ZW0ucHJvcGVydGllcyB8fCB7fSxcbiAgICAgICAgdmFyaWFudF90aXRsZTogaXRlbS52YXJpYW50LnRpdGxlLFxuICAgICAgICBwcmljZTogaXRlbS52YXJpYW50LnByaWNlLFxuICAgICAgICBjb21wYXJlX2F0X3ByaWNlOiBpdGVtLnZhcmlhbnQuY29tcGFyZUF0UHJpY2UsXG4gICAgICAgIGdyYW1zOiBpdGVtLnZhcmlhbnQuZ3JhbXNcbiAgICAgIH07XG5cbiAgICAgIHNldEd1aWRGb3IobGluZUl0ZW0pO1xuXG4gICAgICByZXR1cm4gbGluZUl0ZW07XG4gICAgfSk7XG4gICAgdmFyIGV4aXN0aW5nTGluZUl0ZW1zID0gdGhpcy5hdHRycy5saW5lX2l0ZW1zO1xuXG4gICAgZXhpc3RpbmdMaW5lSXRlbXMucHVzaC5hcHBseShleGlzdGluZ0xpbmVJdGVtcywgX3RvQ29uc3VtYWJsZUFycmF5KG5ld0xpbmVJdGVtcykpO1xuXG4gICAgdmFyIGRlZHVwZWRMaW5lSXRlbXMgPSBleGlzdGluZ0xpbmVJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW1BY2MsIGl0ZW0pIHtcbiAgICAgIHZhciBtYXRjaGluZ0l0ZW0gPSBpdGVtQWNjLmZpbHRlcihmdW5jdGlvbiAoZXhpc3RpbmdJdGVtKSB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0l0ZW0udmFyaWFudF9pZCA9PT0gaXRlbS52YXJpYW50X2lkICYmIG9iamVjdHNFcXVhbChleGlzdGluZ0l0ZW0ucHJvcGVydGllcywgaXRlbS5wcm9wZXJ0aWVzKTtcbiAgICAgIH0pWzBdO1xuXG4gICAgICBpZiAobWF0Y2hpbmdJdGVtKSB7XG4gICAgICAgIG1hdGNoaW5nSXRlbS5xdWFudGl0eSA9IG1hdGNoaW5nSXRlbS5xdWFudGl0eSArIGl0ZW0ucXVhbnRpdHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtQWNjLnB1c2goaXRlbSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpdGVtQWNjO1xuICAgIH0sIFtdKTtcblxuICAgIC8vIFVzZXJzIG1heSBwYXNzIG5lZ2F0aXZlIG51bWJlcnMgYW5kIHJlbW92ZSBpdGVtcy4gVGhpcyBlbnN1cmVzIHRoZXJlJ3Mgbm9cbiAgICAvLyBpdGVtIHdpdGggYSBxdWFudGl0eSBvZiB6ZXJvIG9yIGxlc3MuXG4gICAgdGhpcy5hdHRycy5saW5lX2l0ZW1zID0gZGVkdXBlZExpbmVJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW1BY2MsIGl0ZW0pIHtcbiAgICAgIGlmIChpdGVtLnF1YW50aXR5ID49IDEpIHtcbiAgICAgICAgaXRlbUFjYy5wdXNoKGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbUFjYztcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBVcGRhdGUgYSBsaW5lIGl0ZW0gcXVhbnRpdHkgYmFzZWQgb24gbGluZSBpdGVtIGlkXG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiAvLyBUaGlzIGV4YW1wbGUgY2hhbmdlcyB0aGUgcXVhbnRpdHkgZm9yIHRoZSBmaXJzdCBsaW5lIGl0ZW0gdG8gMlxuICAgICogY29uc3QgZmlyc3RMaW5lSXRlbUlkID0gY2FydC5saW5lSXRlbXNbMF0uaWQ7XG4gICAgKlxuICAgICogY2FydC51cGRhdGVMaW5lSXRlbShmaXJzdExpbmVJdGVtSWQsIDIpLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyB1cGRhdGVkIHRoZSBsaW5lIGl0ZW1cbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKiBAbWV0aG9kIHVwZGF0ZUxpbmVJdGVtXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBsaW5lIGl0ZW0gSURcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBxdWFudGl0eSAtIG5ldyBxdWFudGl0eSBmb3IgbGluZSBpdGVtXG4gICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgbGluZSBpdGVtIHdpdGggSUQgaXMgbm90IGluIGNhcnQuXG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB0aGUgY2FydCBpbnN0YW5jZVxuICAqL1xuICB1cGRhdGVMaW5lSXRlbTogZnVuY3Rpb24gdXBkYXRlTGluZUl0ZW0oaWQsIHF1YW50aXR5KSB7XG4gICAgaWYgKHF1YW50aXR5IDwgMSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTGluZUl0ZW0oaWQpO1xuICAgIH1cblxuICAgIHZhciBsaW5lSXRlbSA9IHRoaXMubGluZUl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGlkO1xuICAgIH0pWzBdO1xuXG4gICAgaWYgKGxpbmVJdGVtKSB7XG4gICAgICBsaW5lSXRlbS5xdWFudGl0eSA9IHF1YW50aXR5O1xuXG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdsaW5lIGl0ZW0gd2l0aCBpZDogJyArIGlkICsgJyBub3QgZm91bmQgaW4gY2FydCMnICsgdGhpcy5pZCkpO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBSZW1vdmUgYSBsaW5lIGl0ZW0gZnJvbSBjYXJ0IGJhc2VkIG9uIGxpbmUgaXRlbSBpZFxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogLy8gVGhpcyBleGFtcGxlIHJlbW92ZXMgdGhlIGZpcnN0IGxpbmUgaXRlbVxuICAgICogY29uc3QgZmlyc3RMaW5lSXRlbUlkID0gY2FydC5saW5lSXRlbXNbMF0uaWQ7XG4gICAgKlxuICAgICogY2FydC5yZW1vdmVMaW5lSXRlbShmaXJzdExpbmVJdGVtSWQpLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyByZW1vdmVkIHRoZSBsaW5lIGl0ZW1cbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKlxuICAgICogQG1ldGhvZCByZW1vdmVMaW5lSXRlbVxuICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gbGluZSBpdGVtIElEXG4gICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgbGluZSBpdGVtIHdpdGggSUQgaXMgbm90IGluIGNhcnQuXG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB0aGUgY2FydCBpbnN0YW5jZVxuICAqL1xuICByZW1vdmVMaW5lSXRlbTogZnVuY3Rpb24gcmVtb3ZlTGluZUl0ZW0oaWQpIHtcbiAgICB2YXIgb2xkTGVuZ3RoID0gdGhpcy5saW5lSXRlbXMubGVuZ3RoO1xuICAgIHZhciBuZXdMaW5lSXRlbXMgPSB0aGlzLmxpbmVJdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLmlkICE9PSBpZDtcbiAgICB9KTtcbiAgICB2YXIgbmV3TGVuZ3RoID0gbmV3TGluZUl0ZW1zLmxlbmd0aDtcblxuICAgIGlmIChuZXdMZW5ndGggPCBvbGRMZW5ndGgpIHtcbiAgICAgIHRoaXMuYXR0cnMubGluZV9pdGVtcyA9IG5ld0xpbmVJdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uYXR0cnM7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignbGluZSBpdGVtIHdpdGggaWQ6ICcgKyBpZCArICcgbm90IGZvdW5kIGluIGNhcnQjJyArIHRoaXMuaWQpKTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogUmVtb3ZlIGFsbCBsaW5lIGl0ZW1zIGZyb20gY2FydFxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogLy8gVGhpcyBleGFtcGxlIHJlbW92ZXMgYWxsIGxpbmUgaXRlbXMgZnJvbSB0aGUgY2FydFxuICAgICogY2FydC5jbGVhckxpbmVJdGVtcygpLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyByZW1vdmVkIGFsbCBsaW5lIGl0ZW1zXG4gICAgKiB9KTtcbiAgICAqIEBtZXRob2QgY2xlYXJMaW5lSXRlbXNcbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHRoZSBjYXJ0IGluc3RhbmNlXG4gICovXG4gIGNsZWFyTGluZUl0ZW1zOiBmdW5jdGlvbiBjbGVhckxpbmVJdGVtcygpIHtcbiAgICB0aGlzLmF0dHJzLmxpbmVfaXRlbXMgPSBbXTtcblxuICAgIHJldHVybiB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIEZvcmNlIHVwZGF0ZSBvZiBjYXJ0IG1vZGVsIG9uIHNlcnZlci4gVGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgYmUgdXNlZCBpbiBhZHZhbmNlZCBzaXR1YXRpb25zIGFuZCBkb2VzIG5vdCBuZWVkIHRvIGJlIGNhbGxlZFxuICAgICogZXhwbGljaXRseSB0byB1cGRhdGUgbGluZSBpdGVtcy4gSXQgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgYWZ0ZXJcbiAgICAqIHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbC9jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHNcIn19e3svY3Jvc3NMaW5rfX0sXG4gICAgKiB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWwvdXBkYXRlTGluZUl0ZW1cIn19e3svY3Jvc3NMaW5rfX0sXG4gICAgKiB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWwvcmVtb3ZlTGluZUl0ZW1cIn19e3svY3Jvc3NMaW5rfX0sXG4gICAgKiBhbmQge3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL3JlbW92ZUxpbmVJdGVtXCJ9fXt7L2Nyb3NzTGlua319XG4gICAgKlxuICAgICogQG1ldGhvZCB1cGRhdGVNb2RlbFxuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdGhlIGNhcnQgaW5zdGFuY2VcbiAgKi9cbiAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHRoaXMuc2hvcENsaWVudC51cGRhdGUoJ2NhcnRzJywgdGhpcykudGhlbihmdW5jdGlvbiAodXBkYXRlQ2FydCkge1xuICAgICAgYXNzaWduJDEoX3RoaXM1LmF0dHJzLCB1cGRhdGVDYXJ0LmF0dHJzKTtcblxuICAgICAgcmV0dXJuIF90aGlzNTtcbiAgICB9KTtcbiAgfVxufSwge1xuICBpZDoge1xuXG4gICAgLyoqXG4gICAgICAqIGdldCBJRCBmb3IgY3VycmVudCBjYXJ0XG4gICAgICAqIEBwcm9wZXJ0eSBpZFxuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnNbR1VJRF9LRVldO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgbGluZUl0ZW1zOiB7XG5cbiAgICAvKipcbiAgICAgICogR2V0IGFuIGBBcnJheWAgb2Yge3sjY3Jvc3NMaW5rIFwiQ2FydExpbmVJdGVtTW9kZWxcIn19Q2FydExpbmVJdGVtTW9kZWwnc3t7L2Nyb3NzTGlua319XG4gICAgICAqIEBwcm9wZXJ0eSBsaW5lSXRlbXNcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuICh0aGlzLmF0dHJzLmxpbmVfaXRlbXMgfHwgW10pLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gbmV3IENhcnRMaW5lSXRlbU1vZGVsKGl0ZW0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBsaW5lSXRlbUNvdW50OiB7XG5cbiAgICAvKipcbiAgICAgICogR2V0cyB0aGUgdG90YWwgcXVhbnRpdHkgb2YgYWxsIGxpbmUgaXRlbXMuIEV4YW1wbGU6IHlvdSd2ZSBhZGRlZCB0d28gdmFyaWFudHMgd2l0aCBxdWFudGl0aWVzIDMgYW5kIDIuIGBsaW5lSXRlbUNvdW50YCB3aWxsIGJlIDUuXG4gICAgICAqIEBwcm9wZXJ0eSBsaW5lSXRlbUNvdW50XG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5saW5lSXRlbXMucmVkdWNlKGZ1bmN0aW9uICh0b3RhbCwgaXRlbSkge1xuICAgICAgICByZXR1cm4gdG90YWwgKyBpdGVtLnF1YW50aXR5O1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBzdWJ0b3RhbDoge1xuXG4gICAgLyoqXG4gICAgICAqIEdldCBjdXJyZW50IHN1YnRvdGFsIHByaWNlIGZvciBhbGwgbGluZSBpdGVtcy4gRXhhbXBsZTogdHdvIGl0ZW1zIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgY2FydCB0aGF0IGNvc3QgJDEuMjVcbiAgICAgICogdGhlbiB0aGUgc3VidG90YWwgd2lsbCBiZSBgMi41MGBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHN1YnRvdGFsXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgc3VidG90YWwgPSB0aGlzLmxpbmVJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHJ1bm5pbmdUb3RhbCwgbGluZUl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHJ1bm5pbmdUb3RhbCArIHBhcnNlRmxvYXQobGluZUl0ZW0ubGluZV9wcmljZSk7XG4gICAgICB9LCAwKTtcblxuICAgICAgcmV0dXJuIHN1YnRvdGFsLnRvRml4ZWQoMik7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBjaGVja291dFVybDoge1xuXG4gICAgLyoqXG4gICAgICAqIEdldCBjaGVja291dCBVUkwgZm9yIGN1cnJlbnQgY2FydFxuICAgICAgKiBAcHJvcGVydHkgY2hlY2tvdXRVcmxcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgIHZhciBiYXNlVXJsID0gJ2h0dHBzOi8vJyArIGNvbmZpZy5kb21haW4gKyAnL2NhcnQnO1xuICAgICAgdmFyIGdhID0gZ2xvYmFsVmFycy5nZXQoJ2dhJyk7XG5cbiAgICAgIHZhciB2YXJpYW50UGF0aCA9IHRoaXMubGluZUl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS52YXJpYW50X2lkICsgJzonICsgaXRlbS5xdWFudGl0eTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgcXVlcnkgPSAnYWNjZXNzX3Rva2VuPScgKyBjb25maWcuYXBpS2V5ICsgJyZfZmQ9MCc7XG5cbiAgICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIGxpbmtlclBhcmFtID0gdm9pZCAwO1xuXG4gICAgICAgIGdhKGZ1bmN0aW9uICh0cmFja2VyKSB7XG4gICAgICAgICAgbGlua2VyUGFyYW0gPSB0cmFja2VyLmdldCgnbGlua2VyUGFyYW0nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGxpbmtlclBhcmFtKSB7XG4gICAgICAgICAgcXVlcnkgKz0gJyYnICsgbGlua2VyUGFyYW07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJhc2VVcmwgKyAnLycgKyB2YXJpYW50UGF0aCArICc/JyArIHF1ZXJ5O1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG52YXIgQ2FydFNlcmlhbGl6ZXIgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfSxcbiAgcm9vdEtleUZvclR5cGU6IGZ1bmN0aW9uIHJvb3RLZXlGb3JUeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZS5zbGljZSgwLCAtMSk7XG4gIH0sXG4gIG1vZGVsRm9yVHlwZTogZnVuY3Rpb24gbW9kZWxGb3JUeXBlKCkgLyogdHlwZSAqL3tcbiAgICByZXR1cm4gQ2FydE1vZGVsO1xuICB9LFxuICBkZXNlcmlhbGl6ZVNpbmdsZTogZnVuY3Rpb24gZGVzZXJpYWxpemVTaW5nbGUodHlwZSkge1xuICAgIHZhciBzaW5nbGVQYXlsb2FkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB2YXIgbWV0YUF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAgIHZhciBtb2RlbEF0dHJzID0gc2luZ2xlUGF5bG9hZFt0aGlzLnJvb3RLZXlGb3JUeXBlKHR5cGUpXTtcbiAgICB2YXIgbW9kZWwgPSB0aGlzLm1vZGVsRnJvbUF0dHJzKHR5cGUsIG1vZGVsQXR0cnMsIG1ldGFBdHRycyk7XG5cbiAgICByZXR1cm4gbW9kZWw7XG4gIH0sXG4gIG1vZGVsRnJvbUF0dHJzOiBmdW5jdGlvbiBtb2RlbEZyb21BdHRycyh0eXBlLCBhdHRycywgbWV0YUF0dHJzKSB7XG4gICAgdmFyIE1vZGVsID0gdGhpcy5tb2RlbEZvclR5cGUodHlwZSk7XG5cbiAgICBtZXRhQXR0cnMuY29uZmlnID0gdGhpcy5jb25maWc7XG5cbiAgICByZXR1cm4gbmV3IE1vZGVsKGF0dHJzLCBtZXRhQXR0cnMpO1xuICB9LFxuICBzZXJpYWxpemU6IGZ1bmN0aW9uIHNlcmlhbGl6ZSh0eXBlLCBtb2RlbCkge1xuICAgIHZhciByb290ID0gdGhpcy5yb290S2V5Rm9yVHlwZSh0eXBlKTtcbiAgICB2YXIgcGF5bG9hZCA9IHt9O1xuICAgIHZhciBhdHRycyA9IGFzc2lnbiQxKHt9LCBtb2RlbC5hdHRycyk7XG5cbiAgICBwYXlsb2FkW3Jvb3RdID0gYXR0cnM7XG5cbiAgICBkZWxldGUgYXR0cnMuYXR0cmlidXRlcztcblxuICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGF0dHJzW2tleV07XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgYXR0cnNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBwYXlsb2FkO1xuICB9XG59KTtcblxudmFyIFJlZmVyZW5jZU1vZGVsID0gQmFzZU1vZGVsLmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG5cbiAgLyoqXG4gICAgKiBDbGFzcyBmb3IgcmVmZXJlbmNlIG1vZGVsXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQGNsYXNzIFJlZmVyZW5jZU1vZGVsXG4gICAgKiBAY29uc3RydWN0b3JcbiAgKi9cbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGF0dHJzKSB7XG4gICAgaWYgKE9iamVjdC5rZXlzKGF0dHJzKS5pbmRleE9mKCdyZWZlcmVuY2VJZCcpIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGtleSByZWZlcmVuY2VJZCBvZiByZWZlcmVuY2UuIFJlZmVyZW5jZXMgdG8gbnVsbCBhcmUgbm90IGFsbG93ZWQnKTtcbiAgICB9XG5cbiAgICB0aGlzWydzdXBlciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbn0sIHtcbiAgaWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBnZXQgdGhlIElEIGZvciBjdXJyZW50IHJlZmVyZW5jZSAobm90IHdoYXQgaXQgcmVmZXJzIHRvLCBidXQgaXRzIG93biB1bmlxdWUgaWRlbnRpZmllcilcbiAgICAgICogQHByb3BlcnR5IGlkXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzW0dVSURfS0VZXTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHJlZmVyZW5jZUlkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5yZWZlcmVuY2VJZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICB0aGlzLmF0dHJzLnJlZmVyZW5jZUlkID0gdmFsdWU7XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxudmFyIFJlZmVyZW5jZVNlcmlhbGl6ZXIgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfSxcbiAgbW9kZWxGb3JUeXBlOiBmdW5jdGlvbiBtb2RlbEZvclR5cGUoKSAvKiB0eXBlICove1xuICAgIHJldHVybiBSZWZlcmVuY2VNb2RlbDtcbiAgfSxcbiAgZGVzZXJpYWxpemVTaW5nbGU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplU2luZ2xlKHR5cGUpIHtcbiAgICB2YXIgc2luZ2xlUGF5bG9hZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdmFyIG1ldGFBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICB2YXIgTW9kZWwgPSB0aGlzLm1vZGVsRm9yVHlwZSh0eXBlKTtcblxuICAgIHJldHVybiBuZXcgTW9kZWwoc2luZ2xlUGF5bG9hZCwgbWV0YUF0dHJzKTtcbiAgfSxcbiAgc2VyaWFsaXplOiBmdW5jdGlvbiBzZXJpYWxpemUodHlwZSwgbW9kZWwpIHtcbiAgICB2YXIgYXR0cnMgPSBhc3NpZ24kMSh7fSwgbW9kZWwuYXR0cnMpO1xuXG4gICAgcmV0dXJuIGF0dHJzO1xuICB9XG59KTtcblxudmFyIFN0b3JlID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sb2NhbFN0b3JhZ2VBdmFpbGFibGUgPSB0aGlzLnN0b3JhZ2VBdmFpbGFibGUoJ2xvY2FsU3RvcmFnZScpO1xuICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgfSxcbiAgc2V0SXRlbTogZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlKSB7XG4gICAgaWYgKHRoaXMubG9jYWxTdG9yYWdlQXZhaWxhYmxlKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FjaGVba2V5XSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgZ2V0SXRlbTogZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHtcbiAgICBpZiAodGhpcy5sb2NhbFN0b3JhZ2VBdmFpbGFibGUpIHtcbiAgICAgIHZhciBzdHJpbmdWYWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0cmluZ1ZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlW2tleV0gfHwgbnVsbDtcbiAgICB9XG4gIH0sXG4gIHN0b3JhZ2VBdmFpbGFibGU6IGZ1bmN0aW9uIHN0b3JhZ2VBdmFpbGFibGUodHlwZSkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgc3RvcmFnZSA9IGdsb2JhbFZhcnMuZ2V0KHR5cGUpO1xuICAgICAgdmFyIHggPSAnX19zdG9yYWdlX3Rlc3RfXyc7XG5cbiAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcbiAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufSk7XG5cbnZhciBMb2NhbFN0b3JhZ2VBZGFwdGVyID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdG9yZSA9IG5ldyBTdG9yZSgpO1xuICB9LFxuICBpZEtleUZvclR5cGU6IGZ1bmN0aW9uIGlkS2V5Rm9yVHlwZSgpIC8qIHR5cGUgKi97XG4gICAgcmV0dXJuIEdVSURfS0VZO1xuICB9LFxuICBmZXRjaFNpbmdsZTogZnVuY3Rpb24gZmV0Y2hTaW5nbGUodHlwZSwgaWQpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgdmFsdWUgPSBfdGhpczYuc3RvcmUuZ2V0SXRlbShfdGhpczYuc3RvcmFnZUtleSh0eXBlLCBpZCkpO1xuXG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0eXBlICsgJyMnICsgaWQgKyAnIG5vdCBmb3VuZCcpKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9LFxuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh0eXBlLCBwYXlsb2FkKSB7XG4gICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIHZhciBpZCA9IF90aGlzNy5pZGVudGlmeShwYXlsb2FkKTtcblxuICAgICAgX3RoaXM3LnN0b3JlLnNldEl0ZW0oX3RoaXM3LnN0b3JhZ2VLZXkodHlwZSwgaWQpLCBwYXlsb2FkKTtcbiAgICAgIHJlc29sdmUocGF5bG9hZCk7XG4gICAgfSk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHR5cGUsIGlkLCBwYXlsb2FkKSB7XG4gICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIF90aGlzOC5zdG9yZS5zZXRJdGVtKF90aGlzOC5zdG9yYWdlS2V5KHR5cGUsIGlkKSwgcGF5bG9hZCk7XG4gICAgICByZXNvbHZlKHBheWxvYWQpO1xuICAgIH0pO1xuICB9LFxuICBzdG9yYWdlS2V5OiBmdW5jdGlvbiBzdG9yYWdlS2V5KHR5cGUsIGlkKSB7XG4gICAgcmV0dXJuIHR5cGUgKyAnLicgKyBpZDtcbiAgfSxcbiAgaWRlbnRpZnk6IGZ1bmN0aW9uIGlkZW50aWZ5KHBheWxvYWQpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHBheWxvYWQpO1xuXG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAxICYmIF90eXBlb2YocGF5bG9hZFtrZXlzWzBdXSkgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gc2V0R3VpZEZvcihwYXlsb2FkW2tleXNbMF1dKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2V0R3VpZEZvcihwYXlsb2FkKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQG1vZHVsZSBzaG9waWZ5LWJ1eVxuICogQHN1Ym1vZHVsZSBzaG9wLWNsaWVudFxuICovXG5cbmZ1bmN0aW9uIGZldGNoRmFjdG9yeShmZXRjaFR5cGUsIHR5cGUpIHtcbiAgdmFyIGZ1bmMgPSB2b2lkIDA7XG5cbiAgc3dpdGNoIChmZXRjaFR5cGUpIHtcbiAgICBjYXNlICdhbGwnOlxuICAgICAgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoQWxsKHR5cGUpO1xuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ29uZSc6XG4gICAgICBmdW5jID0gZnVuY3Rpb24gZnVuYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2guYXBwbHkodGhpcywgW3R5cGVdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncXVlcnknOlxuICAgICAgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoUXVlcnkuYXBwbHkodGhpcywgW3R5cGVdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gZnVuYztcbn1cblxudmFyIFNob3BDbGllbnQgPSBDb3JlT2JqZWN0LmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIC8qKlxuICAgKiBAY2xhc3MgU2hvcENsaWVudFxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcblxuICAgIHRoaXMuc2VyaWFsaXplcnMgPSB7XG4gICAgICBwcm9kdWN0czogTGlzdGluZ3NTZXJpYWxpemVyLFxuICAgICAgY29sbGVjdGlvbnM6IExpc3RpbmdzU2VyaWFsaXplcixcbiAgICAgIGNhcnRzOiBDYXJ0U2VyaWFsaXplcixcbiAgICAgIHJlZmVyZW5jZXM6IFJlZmVyZW5jZVNlcmlhbGl6ZXJcbiAgICB9O1xuXG4gICAgdGhpcy5hZGFwdGVycyA9IHtcbiAgICAgIHByb2R1Y3RzOiBMaXN0aW5nc0FkYXB0ZXIsXG4gICAgICBjb2xsZWN0aW9uczogTGlzdGluZ3NBZGFwdGVyLFxuICAgICAgY2FydHM6IExvY2FsU3RvcmFnZUFkYXB0ZXIsXG4gICAgICByZWZlcmVuY2VzOiBMb2NhbFN0b3JhZ2VBZGFwdGVyXG4gICAgfTtcbiAgfSxcblxuXG4gIGNvbmZpZzogbnVsbCxcblxuICAvKipcbiAgICogRmV0Y2ggYWxsIG9mIGEgYHR5cGVgLCByZXR1cm5pbmcgYSBwcm9taXNlLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaEFsbCgncHJvZHVjdHMnKS50aGVuKHByb2R1Y3RzID0+IHtcbiAgICogICAvLyBkbyB0aGluZ3Mgd2l0aCBwcm9kdWN0c1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hBbGxcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHBsdXJhbGl6ZWQgbmFtZSBvZiB0aGUgdHlwZSwgaW4gbG93ZXIgY2FzZS5cbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGFuIGFycmF5IG9mIGB0eXBlYFxuICAgKi9cbiAgZmV0Y2hBbGw6IGZ1bmN0aW9uIGZldGNoQWxsKHR5cGUpIHtcbiAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgIHZhciBhZGFwdGVyID0gbmV3IHRoaXMuYWRhcHRlcnNbdHlwZV0odGhpcy5jb25maWcpO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIuZmV0Y2hNdWx0aXBsZSh0eXBlKS50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gX3RoaXM5LmRlc2VyaWFsaXplKHR5cGUsIHBheWxvYWQsIGFkYXB0ZXIsIG51bGwsIHsgbXVsdGlwbGU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogRmV0Y2ggb25lIG9mIGEgYHR5cGVgLCByZXR1cm5pbmcgYSBwcm9taXNlLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaCgncHJvZHVjdHMnLCAxMjMpLnRoZW4ocHJvZHVjdCA9PiB7XG4gICAqICAgLy8gZG8gdGhpbmdzIHdpdGggdGhlIHByb2R1Y3RcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBwbHVyYWxpemVkIG5hbWUgb2YgdGhlIHR5cGUsIGluIGxvd2VyIGNhc2UuXG4gICAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gaWQgYSB1bmlxdWUgaWRlbnRpZmllclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEJhc2VNb2RlbH0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGEgc2luZ2xlIGluc3RhbmNlIG9mXG4gICAqIGB0eXBlYCBleHByZXNzZWQgYXMgYSBgQmFzZU1vZGVsYC5cbiAgICovXG4gIGZldGNoOiBmdW5jdGlvbiBmZXRjaCh0eXBlLCBpZCkge1xuICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgIHZhciBhZGFwdGVyID0gbmV3IHRoaXMuYWRhcHRlcnNbdHlwZV0odGhpcy5jb25maWcpO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIuZmV0Y2hTaW5nbGUodHlwZSwgaWQpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgIHJldHVybiBfdGhpczEwLmRlc2VyaWFsaXplKHR5cGUsIHBheWxvYWQsIGFkYXB0ZXIsIG51bGwsIHsgc2luZ2xlOiB0cnVlIH0pO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEZldGNoIG1hbnkgb2YgYSBgdHlwZWAsIHRoYXQgbWF0Y2ggYHF1ZXJ5YFxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFF1ZXJ5KCdwcm9kdWN0cycsIHsgY29sbGVjdGlvbl9pZDogNDU2IH0pLnRoZW4ocHJvZHVjdHMgPT4ge1xuICAgKiAgIC8vIGRvIHRoaW5ncyB3aXRoIHRoZSBwcm9kdWN0c1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hRdWVyeVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgcGx1cmFsaXplZCBuYW1lIG9mIHRoZSB0eXBlLCBpbiBsb3dlciBjYXNlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnkgYSBxdWVyeSBzZW50IHRvIHRoZSBhcGkgc2VydmVyLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEFycmF5fSBhIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYW4gYXJyYXkgb2YgYHR5cGVgLlxuICAgKi9cbiAgZmV0Y2hRdWVyeTogZnVuY3Rpb24gZmV0Y2hRdWVyeSh0eXBlLCBxdWVyeSkge1xuICAgIHZhciBfdGhpczExID0gdGhpcztcblxuICAgIHZhciBhZGFwdGVyID0gbmV3IHRoaXMuYWRhcHRlcnNbdHlwZV0odGhpcy5jb25maWcpO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIuZmV0Y2hNdWx0aXBsZSh0eXBlLCBxdWVyeSkudGhlbihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgcmV0dXJuIF90aGlzMTEuZGVzZXJpYWxpemUodHlwZSwgcGF5bG9hZCwgYWRhcHRlciwgbnVsbCwgeyBtdWx0aXBsZTogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgYHR5cGVgLCBvcHRpb25hbGx5IGluY2x1ZGluZyBgbW9kZWxBdHRyc2AuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmNyZWF0ZSgnY2FydHMnLCB7IGxpbmVfaXRlbXM6IFsgLi4uIF0gfSkudGhlbihjYXJ0ID0+IHtcbiAgICogICAvLyBkbyB0aGluZ3Mgd2l0aCB0aGUgY2FydC5cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGNyZWF0ZVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgcGx1cmFsaXplZCBuYW1lIG9mIHRoZSB0eXBlLCBpbiBsb3dlciBjYXNlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW21vZGVsQXR0cnM9e31dIGF0dHJpYnV0ZXMgcmVwcmVzZW50aW5nIHRoZSBpbnRlcm5hbCBzdGF0ZVxuICAgKiBvZiB0aGUgbW9kZWwgdG8gYmUgcGVyc2lzdGVkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGEgc2luZ2xlIGluc3RhbmNlIG9mXG4gICAqIGB0eXBlYFxuICAgKi9cbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodHlwZSkge1xuICAgIHZhciBfdGhpczEyID0gdGhpcztcblxuICAgIHZhciBtb2RlbEF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHZhciBhZGFwdGVyID0gbmV3IHRoaXMuYWRhcHRlcnNbdHlwZV0odGhpcy5jb25maWcpO1xuICAgIHZhciBzZXJpYWxpemVyID0gbmV3IHRoaXMuc2VyaWFsaXplcnNbdHlwZV0odGhpcy5jb25maWcpO1xuICAgIHZhciBNb2RlbCA9IHNlcmlhbGl6ZXIubW9kZWxGb3JUeXBlKHR5cGUpO1xuICAgIHZhciBtb2RlbCA9IG5ldyBNb2RlbChtb2RlbEF0dHJzLCB7IHNob3BDbGllbnQ6IHRoaXMgfSk7XG4gICAgdmFyIGF0dHJzID0gc2VyaWFsaXplci5zZXJpYWxpemUodHlwZSwgbW9kZWwpO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIuY3JlYXRlKHR5cGUsIGF0dHJzKS50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gX3RoaXMxMi5kZXNlcmlhbGl6ZSh0eXBlLCBwYXlsb2FkLCBhZGFwdGVyLCBzZXJpYWxpemVyLCB7IHNpbmdsZTogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgYHR5cGVgLCBvcHRpb25hbGx5IGluY2x1ZGluZyBgYXR0cnNgLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5jcmVhdGUoJ2NhcnRzJywgeyBsaW5lX2l0ZW1zOiBbIC4uLiBdIH0pLnRoZW4oY2FydCA9PiB7XG4gICAqICAgLy8gZG8gdGhpbmdzIHdpdGggdGhlIGNhcnQuXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCB1cGRhdGVcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHBsdXJhbGl6ZWQgbmFtZSBvZiB0aGUgdHlwZSwgaW4gbG93ZXIgY2FzZS5cbiAgICogQHBhcmFtIHtCYXNlTW9kZWx9IHVwZGF0ZWRNb2RlbCBUaGUgbW9kZWwgdGhhdCByZXByZXNlbnRzIG5ldyBzdGF0ZSB0b1xuICAgKiB0byBwZXJzaXN0LlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGEgc2luZ2xlIGluc3RhbmNlIG9mXG4gICAqIGB0eXBlYFxuICAgKi9cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodHlwZSwgdXBkYXRlZE1vZGVsKSB7XG4gICAgdmFyIF90aGlzMTMgPSB0aGlzO1xuXG4gICAgdmFyIGFkYXB0ZXIgPSB1cGRhdGVkTW9kZWwuYWRhcHRlcjtcbiAgICB2YXIgc2VyaWFsaXplciA9IHVwZGF0ZWRNb2RlbC5zZXJpYWxpemVyO1xuICAgIHZhciBzZXJpYWxpemVkTW9kZWwgPSBzZXJpYWxpemVyLnNlcmlhbGl6ZSh0eXBlLCB1cGRhdGVkTW9kZWwpO1xuICAgIHZhciBpZCA9IHVwZGF0ZWRNb2RlbC5hdHRyc1thZGFwdGVyLmlkS2V5Rm9yVHlwZSh0eXBlKV07XG5cbiAgICByZXR1cm4gYWRhcHRlci51cGRhdGUodHlwZSwgaWQsIHNlcmlhbGl6ZWRNb2RlbCkudGhlbihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgcmV0dXJuIF90aGlzMTMuZGVzZXJpYWxpemUodHlwZSwgcGF5bG9hZCwgYWRhcHRlciwgc2VyaWFsaXplciwgeyBzaW5nbGU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogUHJveHkgdG8gc2VyaWFsaXplcidzIGRlc2VyaWFsaXplLlxuICAgKlxuICAgKiBAbWV0aG9kIGRlc2VyaWFsaXplXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBwbHVyYWxpemVkIG5hbWUgb2YgdGhlIHR5cGUsIGluIGxvd2VyIGNhc2UuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIFRoZSByYXcgcGF5bG9hZCByZXR1cm5lZCBieSB0aGUgYWRhcHRlci5cbiAgICogQHBhcmFtIHtCYXNlQWRhcHRlcn0gYWRhcHRlciBUaGUgYWRhcHRlciB0aGF0IHlpZWxkZWQgdGhlIHBheWxvYWQuXG4gICAqIEBwYXJhbSB7QmFzZVNlcmlhbGl6ZXJ9IGV4aXN0aW5nU2VyaWFsaXplciBUaGUgc2VyaWFsaXplciB0byBhdHRhY2guIElmXG4gICAqIG5vbmUgaXMgcGFzc2VkLCB0aGVuIGB0aGlzLmRlc2VyaWFsaXplYCB3aWxsIGNyZWF0ZSBvbmUgZm9yIHRoZSB0eXBlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25zIHRoYXQgZGV0ZXJtaW5lIHdoaWNoIGRlc2VyaWFsaXphdGlvbiBtZXRob2QgdG9cbiAgICogdXNlLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdHMubXVsdGlwbGUgdHJ1ZSB3aGVuIHRoZSBwYXlsb2FkIHJlcHJlc2VudHMgbXVsdGlwbGVcbiAgICogbW9kZWxzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0cy5zaW5nbGUgdHJ1ZSB3aGVuIHRoZSBwYXlsb2FkIHJlcHJlc2VudHMgb25lIG1vZGVsLlxuICAgKiBAcmV0dXJuIHtCYXNlTW9kZWx9IGFuIGluc3RhbmNlIG9mIGB0eXBlYCByZWlmaWVkIGludG8gYSBtb2RlbC5cbiAgICovXG4gIGRlc2VyaWFsaXplOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZSh0eXBlLCBwYXlsb2FkLCBhZGFwdGVyLCBleGlzdGluZ1NlcmlhbGl6ZXIpIHtcbiAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge307XG5cbiAgICB2YXIgc2VyaWFsaXplciA9IGV4aXN0aW5nU2VyaWFsaXplciB8fCBuZXcgdGhpcy5zZXJpYWxpemVyc1t0eXBlXSh0aGlzLmNvbmZpZyk7XG4gICAgdmFyIG1ldGEgPSB7IHNob3BDbGllbnQ6IHRoaXMsIGFkYXB0ZXI6IGFkYXB0ZXIsIHNlcmlhbGl6ZXI6IHNlcmlhbGl6ZXIsIHR5cGU6IHR5cGUgfTtcbiAgICB2YXIgc2VyaWFsaXplZFBheWxvYWQgPSB2b2lkIDA7XG5cbiAgICBpZiAob3B0cy5tdWx0aXBsZSkge1xuICAgICAgc2VyaWFsaXplZFBheWxvYWQgPSBzZXJpYWxpemVyLmRlc2VyaWFsaXplTXVsdGlwbGUodHlwZSwgcGF5bG9hZCwgbWV0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlcmlhbGl6ZWRQYXlsb2FkID0gc2VyaWFsaXplci5kZXNlcmlhbGl6ZVNpbmdsZSh0eXBlLCBwYXlsb2FkLCBtZXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VyaWFsaXplZFBheWxvYWQ7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIENyZWF0ZXMgYSB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWxcIn19Q2FydE1vZGVse3svY3Jvc3NMaW5rfX0gaW5zdGFuY2UuXG4gICAgKlxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogY2xpZW50LmNyZWF0ZUNhcnQoKS50aGVuKGNhcnQgPT4ge1xuICAgICogICAvLyBkbyBzb21ldGhpbmcgd2l0aCBjYXJ0XG4gICAgKiB9KTtcbiAgICAqIGBgYFxuICAgICpcbiAgICAqIEBtZXRob2QgY3JlYXRlQ2FydFxuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gbmV3IGNhcnQgaW5zdGFuY2UuXG4gICovXG4gIGNyZWF0ZUNhcnQ6IGZ1bmN0aW9uIGNyZWF0ZUNhcnQoKSB7XG4gICAgdmFyIHVzZXJBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICB2YXIgYmFzZUF0dHJzID0ge1xuICAgICAgbGluZV9pdGVtczogW11cbiAgICB9O1xuICAgIHZhciBhdHRycyA9IHt9O1xuXG4gICAgYXNzaWduJDEoYXR0cnMsIGJhc2VBdHRycyk7XG4gICAgYXNzaWduJDEoYXR0cnMsIHVzZXJBdHRycyk7XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGUoJ2NhcnRzJywgYXR0cnMpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBVcGRhdGVzIGFuIGV4aXN0aW5nIHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbFwifX1DYXJ0TW9kZWx7ey9jcm9zc0xpbmt9fSBpbnN0YW5jZSBhbmQgcGVyc2lzdHMgaXQgdG8gbG9jYWxTdG9yYWdlLlxuICAgICpcbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIGNsaWVudC5jcmVhdGVDYXJ0KCkudGhlbihjYXJ0ID0+IHtcbiAgICAqICAgY2FydC5saW5lSXRlbXMgPSBbXG4gICAgKiAgICAgLy8gLi4uXG4gICAgKiAgIF07XG4gICAgKiAgIGNsaWVudC51cGRhdGVDYXJ0KGNhcnQpO1xuICAgICogfSk7XG4gICAgKiBgYGBcbiAgICAqXG4gICAgKiBAcGFyYW0ge0NhcnRNb2RlbH0gdXBkYXRlZENhcnQgYW4gdXBkYXRlZCBDYXJ0TW9kZWxcbiAgICAqIEBtZXRob2QgdXBkYXRlQ2FydFxuICAgICogQHByaXZhdGVcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHVwZGF0ZWQgY2FydCBpbnN0YW5jZS5cbiAgKi9cbiAgdXBkYXRlQ2FydDogZnVuY3Rpb24gdXBkYXRlQ2FydCh1cGRhdGVkQ2FydCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZSgnY2FydHMnLCB1cGRhdGVkQ2FydCk7XG4gIH0sXG5cblxuICAvKipcbiAgICogUmV0cmlldmUgYSBwcmV2aW91c2x5IGNyZWF0ZWQgY2FydCBieSBpdHMga2V5LlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaENhcnQoJ3Nob3BpZnktYnV5LjE0NTk4MDQ2OTkxMTguMicpLnRoZW4oY2FydCA9PiB7XG4gICAqICAgY29uc29sZS5sb2coY2FydCk7IC8vIFRoZSByZXRyaWV2ZWQgY2FydFxuICAgKiB9KTtcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaENhcnRcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgVGhlIGNhcnQncyB1bmlxdWUgaWRlbnRpZmllclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gVGhlIGNhcnQgbW9kZWwuXG4gICAqXG4gICAqL1xuICBmZXRjaENhcnQ6IGZldGNoRmFjdG9yeSgnb25lJywgJ2NhcnRzJyksXG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYW4gYEFycmF5YCBvZiBwcm9kdWN0cyBmcm9tIHlvdXIgc3RvcmVcbiAgICogYGBgXG4gICAqIGNsaWVudC5mZXRjaEFsbFByb2R1Y3RzKClcbiAgICogLnRoZW4oZnVuY3Rpb24ocHJvZHVjdHMpIHtcbiAgICogICAvLyBhbGwgcHJvZHVjdHMgaW4gc3RvcmVcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoQWxsUHJvZHVjdHNcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJuIHtQcm9taXNlfEFycmF5fSBUaGUgcHJvZHVjdCBtb2RlbHMuXG4gICAqL1xuICBmZXRjaEFsbFByb2R1Y3RzOiBmZXRjaEZhY3RvcnkoJ2FsbCcsICdwcm9kdWN0cycpLFxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGFuIGBBcnJheWAgb2YgY29sbGVjdGlvbnMgZnJvbSB5b3VyIHN0b3JlXG4gICAqIGBgYFxuICAgKiBjbGllbnQuZmV0Y2hBbGxDb2xsZWN0aW9ucygpXG4gICAqIC50aGVuKGZ1bmN0aW9uKGNvbGxlY3Rpb25zKSB7XG4gICAqXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaEFsbENvbGxlY3Rpb25zXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gVGhlIGNvbGxlY3Rpb24gbW9kZWxzLlxuICAgKi9cbiAgZmV0Y2hBbGxDb2xsZWN0aW9uczogZmV0Y2hGYWN0b3J5KCdhbGwnLCAnY29sbGVjdGlvbnMnKSxcblxuICAvKipcbiAgICogRmV0Y2ggb25lIHByb2R1Y3QgYnkgaXRzIElELlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFByb2R1Y3QoJzg1Njk5MTE1NTgnKS50aGVuKHByb2R1Y3QgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHByb2R1Y3QpOyAvLyBUaGUgcHJvZHVjdCB3aXRoIGFuIElEIG9mICc4NTY5OTExNTU4J1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hQcm9kdWN0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBpZCBhIHVuaXF1ZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QmFzZU1vZGVsfSBUaGUgcHJvZHVjdCBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgSUQuXG4gICAqL1xuICBmZXRjaFByb2R1Y3Q6IGZldGNoRmFjdG9yeSgnb25lJywgJ3Byb2R1Y3RzJyksXG5cbiAgLyoqXG4gICAqIEZldGNoIG9uZSBjb2xsZWN0aW9uIGJ5IGl0cyBJRC5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hDb2xsZWN0aW9uKCczMzY5MDM0OTQnKS50aGVuKGNvbGxlY3Rpb24gPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKGNvbGxlY3Rpb24pOyAvLyBUaGUgY29sbGVjdGlvbiB3aXRoIGFuIElEIG9mICczMzY5MDM0OTQnXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaENvbGxlY3Rpb25cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IGlkIGEgdW5pcXVlIGlkZW50aWZpZXJcbiAgICogQHJldHVybiB7UHJvbWlzZXxCYXNlTW9kZWx9IFRoZSBjb2xsZWN0aW9uIG1vZGVsIHdpdGggdGhlIHNwZWNpZmllZCBJRC5cbiAgICovXG4gIGZldGNoQ29sbGVjdGlvbjogZmV0Y2hGYWN0b3J5KCdvbmUnLCAnY29sbGVjdGlvbnMnKSxcblxuICAvKipcbiAgICogRmV0Y2hlcyBhIGxpc3Qgb2YgcHJvZHVjdHMgbWF0Y2hpbmcgYSBzcGVjaWZpZWQgcXVlcnkuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoUXVlcnlQcm9kdWN0cyh7IGNvbGxlY3Rpb25faWQ6ICczMzY5MDM0OTQnLCB0YWc6IFsnaGF0cyddIH0pLnRoZW4ocHJvZHVjdHMgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHByb2R1Y3RzKTsgLy8gQW4gYXJyYXkgb2YgcHJvZHVjdHMgaW4gY29sbGVjdGlvbiAnMzM2OTAzNDk0JyBoYXZpbmcgdGhlIHRhZyAnaGF0cydcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBAbWV0aG9kIGZldGNoUXVlcnlQcm9kdWN0c1xuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyeSBBIHF1ZXJ5IHNlbnQgdG8gdGhlIGFwaSBzZXJ2ZXIgY29udGFpbmluZyBvbmUgb3IgbW9yZSBvZjpcbiAgICogICBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IFtxdWVyeS5jb2xsZWN0aW9uX2lkXSBUaGUgSUQgb2YgYSBjb2xsZWN0aW9uIHRvIHJldHJpZXZlIHByb2R1Y3RzIGZyb21cbiAgICogICBAcGFyYW0ge0FycmF5fSBbcXVlcnkudGFnXSBBIGxpc3Qgb2YgdGFncyB0byBmaWx0ZXIgdGhlIHByb2R1Y3RzIGJ5LiBBY2NlcHRzIHVwIHRvIDEwIHRhZ3MuXG4gICAqICAgQHBhcmFtIHtBcnJheX0gW3F1ZXJ5LnByb2R1Y3RfaWRzXSBBIGxpc3Qgb2YgcHJvZHVjdCBJRHMgdG8gcmV0cmlldmVcbiAgICogICBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IFtxdWVyeS5wYWdlPTFdIFRoZSBwYWdlIG9mZnNldCBudW1iZXIgb2YgdGhlIGN1cnJlbnQgbG9va3VwIChiYXNlZCBvbiB0aGUgYGxpbWl0YClcbiAgICogICBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IFtxdWVyeS5saW1pdD01MF0gVGhlIG51bWJlciBvZiBwcm9kdWN0cyB0byByZXRyaWV2ZSBwZXIgcGFnZVxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBbcXVlcnkuaGFuZGxlXSBUaGUgaGFuZGxlIG9mIHRoZSBwcm9kdWN0IHRvIGxvb2sgdXBcbiAgICogICBAcGFyYW0ge1N0cmluZ30gW3F1ZXJ5LnVwZGF0ZWRfYXRfbWluXSBQcm9kdWN0cyB1cGRhdGVkIHNpbmNlIHRoZSBzdXBwbGllZCB0aW1lc3RhbXAgKGZvcm1hdDogMjAwOC0xMi0zMSAwMzowMClcbiAgICogICBAcGFyYW0ge1N0cmluZ30gW3F1ZXJ5LnNvcnRfYnldIFdpbGwgbW9kaWZ5IGhvdyBwcm9kdWN0cyBhcmUgb3JkZXJlZC4gUG9zc2libGUgdmFsdWVzIGFyZTpcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcInVwZGF0ZWRfYXRcImAsIGBcImJlc3Qtc2VsbGluZ1wiYCwgYFwidGl0bGUtYXNjZW5kaW5nXCJgLCBgXCJ0aXRsZS1kZXNjZW5kaW5nXCJgLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwicHJpY2UtZGVzY2VuZGluZ1wiYCwgYFwicHJpY2UtYXNjZW5kaW5nXCJgLCBgXCJjcmVhdGVkLWRlc2NlbmRpbmdcImAsIGBcImNyZWF0ZWQtYXNjZW5kaW5nXCJgLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYFwiY29sbGVjdGlvbi1kZWZhdWx0XCJgLiBVc2luZyBgXCJjb2xsZWN0aW9uLWRlZmF1bHRcImAgbWVhbnMgdGhhdCBwcm9kdWN0cyB3aWxsIGJlIG9yZGVyZWRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSB1c2luZyB0aGUgY3VzdG9tIG9yZGVyaW5nIGRlZmluZWQgaW4geW91ciBTaG9waWZ5IEFkbWluLiBEZWZhdWx0IHZhbHVlIGBcImNvbGxlY3Rpb24tZGVmYXVsdFwiYC5cbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gVGhlIHByb2R1Y3QgbW9kZWxzLlxuICAgKi9cbiAgZmV0Y2hRdWVyeVByb2R1Y3RzOiBmZXRjaEZhY3RvcnkoJ3F1ZXJ5JywgJ3Byb2R1Y3RzJyksXG5cbiAgLyoqXG4gICAqIEZldGNoZXMgYSBsaXN0IG9mIGNvbGxlY3Rpb25zIG1hdGNoaW5nIGEgc3BlY2lmaWVkIHF1ZXJ5LlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFF1ZXJ5Q29sbGVjdGlvbnMoe3BhZ2U6IDIsIGxpbWl0OiAyMH0pLnRoZW4oY29sbGVjdGlvbnMgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKGNvbGxlY3Rpb25zKTsgLy8gQW4gYXJyYXkgb2YgY29sbGVjdGlvbiByZXNvdXJjZXNcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoUXVlcnlDb2xsZWN0aW9uc1xuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyeSBhIHF1ZXJ5IHNlbnQgdG8gdGhlIGFwaSBzZXJ2ZXIuXG4gICAqICAgQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbcXVlcnkucGFnZT0xXSB0aGUgcGFnZSBvZmZzZXQgbnVtYmVyIG9mIHRoZSBjdXJyZW50IGxvb2t1cCAoYmFzZWQgb24gdGhlIGBsaW1pdGApXG4gICAqICAgQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbcXVlcnkubGltaXQ9NTBdIHRoZSBudW1iZXIgb2YgY29sbGVjdGlvbnMgdG8gcmV0cmlldmUgcGVyIHBhZ2VcbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gVGhlIGNvbGxlY3Rpb24gbW9kZWxzLlxuICAgKi9cbiAgZmV0Y2hRdWVyeUNvbGxlY3Rpb25zOiBmZXRjaEZhY3RvcnkoJ3F1ZXJ5JywgJ2NvbGxlY3Rpb25zJyksXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGxvb2tzIHVwIGEgcmVmZXJlbmNlIGluIGxvY2FsU3RvcmFnZSB0byB0aGUgbW9zdCByZWNlbnQgY2FydC5cbiAgICogSWYgb25lIGlzIG5vdCBmb3VuZCwgY3JlYXRlcyBvbmUuIElmIHRoZSBjYXJ0IHRoZSByZWZlcmVuY2UgcG9pbnRzIHRvXG4gICAqIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBvbmUgYW5kIHN0b3JlIHRoZSBuZXcgcmVmZXJlbmNlLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFJlY2VudENhcnQoKS50aGVuKGNhcnQgPT4ge1xuICAgKiAgLy8gZG8gc3R1ZmYgd2l0aCB0aGUgY2FydFxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hSZWNlbnRDYXJ0XG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IFRoZSBjYXJ0LlxuICAgKi9cbiAgZmV0Y2hSZWNlbnRDYXJ0OiBmdW5jdGlvbiBmZXRjaFJlY2VudENhcnQoKSB7XG4gICAgdmFyIF90aGlzMTQgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goJ3JlZmVyZW5jZXMnLCB0aGlzLmNvbmZpZy5kb21haW4gKyAnLnJlY2VudC1jYXJ0JykudGhlbihmdW5jdGlvbiAocmVmZXJlbmNlKSB7XG4gICAgICB2YXIgY2FydElkID0gcmVmZXJlbmNlLnJlZmVyZW5jZUlkO1xuXG4gICAgICByZXR1cm4gX3RoaXMxNC5mZXRjaENhcnQoY2FydElkKTtcbiAgICB9KVsnY2F0Y2gnXShmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMxNC5jcmVhdGVDYXJ0KCkudGhlbihmdW5jdGlvbiAoY2FydCkge1xuICAgICAgICB2YXIgcmVmQXR0cnMgPSB7XG4gICAgICAgICAgcmVmZXJlbmNlSWQ6IGNhcnQuaWRcbiAgICAgICAgfTtcblxuICAgICAgICByZWZBdHRyc1tHVUlEX0tFWV0gPSBfdGhpczE0LmNvbmZpZy5kb21haW4gKyAnLnJlY2VudC1jYXJ0JztcblxuICAgICAgICBfdGhpczE0LmNyZWF0ZSgncmVmZXJlbmNlcycsIHJlZkF0dHJzKTtcblxuICAgICAgICByZXR1cm4gY2FydDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59LCB7XG4gIHNlcmlhbGl6ZXJzOiB7XG4gICAgLyoqXG4gICAgICogQGF0dHJpYnV0ZVxuICAgICAqIEBkZWZhdWx0IHtcbiAgICAgKiAgcHJvZHVjdHM6IExpc3RpbmdzQWRhcHRlcixcbiAgICAgKiAgY29sbGVjdGlvbnM6IExpc3RpbmdzQWRhcHRlcixcbiAgICAgKiAgY2FydHM6IENhcnRBZGFwdGVyXG4gICAgICogfVxuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICAvLyBQcmV2ZW50IGxlYWt5IHN0YXRlXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gYXNzaWduJDEoe30sIHRoaXMuc2hhZG93ZWRTZXJpYWxpemVycyk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZXMpIHtcbiAgICAgIHRoaXMuc2hhZG93ZWRTZXJpYWxpemVycyA9IGFzc2lnbiQxKHt9LCB2YWx1ZXMpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgYWRhcHRlcnM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBhc3NpZ24kMSh7fSwgdGhpcy5zaGFkb3dlZEFkYXB0ZXJzKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlcykge1xuICAgICAgdGhpcy5zaGFkb3dlZEFkYXB0ZXJzID0gYXNzaWduJDEoe30sIHZhbHVlcyk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbi8qIGdsb2JhbHMgcmVxdWlyZSAqL1xuXG5pZiAoaXNOb2RlTGlrZUVudmlyb25tZW50KCkpIHtcbiAgLyogdGhpcyBpbmRpcmVjdGlvbiBpcyBuZWVkZWQgYmVjYXVzZSBiYWJlbCB0aHJvd3MgZXJyb3JzIHdoZW5cbiAgICogdHJhbnNwaWxpbmcgcmVxdWlyZSgnbm9kZS1mZXRjaCcpIHVzaW5nIGBhbWRgIHBsdWdpbiB3aXRoIGJhYmVsNlxuICAgKi9cbiAgdmFyIGxvY2FsUmVxdWlyZSA9IHJlcXVpcmU7XG4gIHZhciBfZmV0Y2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0Mik7XG5cbiAgZ2xvYmFsVmFycy5zZXQoJ2ZldGNoJywgX2ZldGNoKTtcbiAgZ2xvYmFsVmFycy5zZXQoJ1Jlc3BvbnNlJywgX2ZldGNoLlJlc3BvbnNlKTtcbn1cblxuLyogZ2xvYmFsIEJ1ZmZlciAqL1xuXG5pZiAoaXNOb2RlTGlrZUVudmlyb25tZW50KCkpIHtcbiAgZ2xvYmFsVmFycy5zZXQoJ2J0b2EnLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoc3RyaW5nKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBtb2R1bGUgc2hvcGlmeS1idXlcbiAqIEBzdWJtb2R1bGUgc2hvcGlmeVxuICovXG5cbi8qKlxuICogYFNob3BpZnlCdXlgIG9ubHkgZGVmaW5lcyBvbmUgZnVuY3Rpb24ge3sjY3Jvc3NMaW5rIFwiU2hvcGlmeUJ1eS9idWlsZENsaWVudFwifX17ey9jcm9zc0xpbmt9fSB3aGljaCBjYW5cbiAqIGJlIHVzZWQgdG8gYnVpbGQgYSB7eyNjcm9zc0xpbmsgXCJTaG9wQ2xpZW50XCJ9fXt7L2Nyb3NzTGlua319IHRvIHF1ZXJ5IHlvdXIgc3RvcmUgdXNpbmcgdGhlXG4gKiBwcm92aWRlZFxuICoge3sjY3Jvc3NMaW5rIFwiU2hvcGlmeUJ1eS9idWlsZENsaWVudC9jb25maWdBdHRyczphcGlLZXlcIn19YGFwaUtleWB7ey9jcm9zc0xpbmt9fSxcbiAqIHt7I2Nyb3NzTGluayBcIlNob3BpZnlCdXkvYnVpbGRDbGllbnQvY29uZmlnQXR0cnM6YXBwSWRcIn19YGFwcElkYHt7L2Nyb3NzTGlua319LFxuICogYW5kIHt7I2Nyb3NzTGluayBcIlNob3BpZnlCdXkvYnVpbGRDbGllbnQvY29uZmlnQXR0cnM6ZG9tYWluXCJ9fWBkb21haW5ge3svY3Jvc3NMaW5rfX0uXG4gKiBAY2xhc3MgU2hvcGlmeUJ1eVxuICogQHN0YXRpY1xuICovXG52YXIgU2hvcGlmeSA9IHtcbiAgU2hvcENsaWVudDogU2hvcENsaWVudCxcbiAgQ29uZmlnOiBDb25maWcsXG4gIHZlcnNpb246IHZlcnNpb24sXG4gIE5PX0lNQUdFX1VSSTogTk9fSU1BR0VfVVJJLFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBTaG9wQ2xpZW50LiBUaGlzIGlzIHRoZSBtYWluIGVudHJ5IHBvaW50IHRvIHRoZSBTREsuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY29uc3QgY2xpZW50ID0gU2hvcGlmeUJ1eS5idWlsZENsaWVudCh7XG4gICAqICAgYXBpS2V5OiAnYmYwODFlODYwYmM5ZGMxY2UwNjU0ZmRmYmMyMDg5MmQnLFxuICAgKiAgIGFwcElkOiA2LFxuICAgKiAgIG15U2hvcGlmeURvbWFpbjogJ3lvdXItc2hvcC1zdWJkb21haW4ubXlzaG9waWZ5LmNvbScsIC8vRGVwcmVjYXRlZC4gVXNlIGBkb21haW5gIGluc3RlYWRcbiAgICogICBkb21haW46ICdlbWJlZHMubXlzaG9waWZ5LmNvbSdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGJ1aWxkQ2xpZW50XG4gICAqIEBmb3IgU2hvcGlmeUJ1eVxuICAgKiBAc3RhdGljXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ0F0dHJzIEFuIG9iamVjdCBvZiByZXF1aXJlZCBjb25maWcgZGF0YSBzdWNoIGFzOiBgYXBpS2V5YCwgYGFwcElkYCwgYGRvbWFpbmBcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZ0F0dHJzLmFwaUtleSBBbiBBUEkgS2V5IGZvciB5b3VyIHN0b3JlLiBEb2N1bWVudGF0aW9uIGhvdyB0byBnZXQgYW4gQVBJIEtleTpcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwczovL2hlbHAuc2hvcGlmeS5jb20vYXBpL3Nka3MvanMtYnV5LXNkay9nZXR0aW5nLXN0YXJ0ZWQjYXBpLWtleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnQXR0cnMuYXBwSWQgVHlwaWNhbGx5IHdpbGwgYmUgNiB3aGljaCBpcyB0aGUgQnV5IEJ1dHRvbiBBcHAgSWQuIEZvciBtb3JlIGluZm8gb24gQXBwIElkIHNlZTpcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvc2Rrcy9qcy1idXktc2RrL2dldHRpbmctc3RhcnRlZCNhcHAtaWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZ0F0dHJzLmRvbWFpbiBZb3VyIHNob3AncyBmdWxsIGBteXNob3BpZnkuY29tYCBkb21haW4uIEZvciBleGFtcGxlOiBgZW1iZWRzLm15c2hvcGlmeS5jb21gXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjb25maWdBdHRycy5teVNob3BpZnlEb21haW4gWW91IHNob3AncyBgbXlzaG9waWZ5LmNvbWAgZG9tYWluLiBbZGVwcmVjYXRlZCBVc2UgY29uZmlnQXR0cnMuZG9tYWluXVxuICAgKiBAcmV0dXJuIHtTaG9wQ2xpZW50fSBhIGNsaWVudCBmb3IgdGhlIHNob3AgdXNpbmcgeW91ciBhcGkgY3JlZGVudGlhbHMgd2hpY2ggeW91IGNhbiB1c2UgdG8gcXVlcnkgeW91ciBzdG9yZS5cbiAgICovXG4gIGJ1aWxkQ2xpZW50OiBmdW5jdGlvbiBidWlsZENsaWVudCgpIHtcbiAgICB2YXIgY29uZmlnQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgdmFyIGNvbmZpZyA9IG5ldyB0aGlzLkNvbmZpZyhjb25maWdBdHRycyk7XG5cbiAgICByZXR1cm4gbmV3IHRoaXMuU2hvcENsaWVudChjb25maWcpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNob3BpZnk7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KSwgX193ZWJwYWNrX3JlcXVpcmVfXygxNzApLkJ1ZmZlcikpXG5cbi8qKiovIH0pLFxuLyogMzM2ICovLFxuLyogMzM3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnZhciBjYW1lbDJoeXBoZW4gPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiBzdHJcbiAgICAgICAgICAucmVwbGFjZSgvW0EtWl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gJy0nICsgbWF0Y2gudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjYW1lbDJoeXBoZW47XG5cbi8qKiovIH0pLFxuLyogMzM4ICovLFxuLyogMzM5ICovLFxuLyogMzQwICovLFxuLyogMzQxICovLFxuLyogMzQyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qIChpZ25vcmVkKSAqL1xuXG4vKioqLyB9KSxcbi8qIDM0MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfc2hvcGlmeUFQSSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX3Nob3BpZnlBUEkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2hvcGlmeUFQSSk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMTUwKTtcblxudmFyIF9yb3V0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7XG5cbnZhciBfcm91dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JvdXRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBjYXJ0QWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xudmFyIHByb2R1Y3RBY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG52YXIgY29sbGVjdGlvbkFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcbnZhciBzdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpLmNvbmZpZ3VyZSgpO1xuXG5cbi8vIHN1YnNjcmliZSB0byB0aGUgcmVkdXggc3RvcmVcbnN0b3JlLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gIGNvbnNvbGUubG9nKCdOZXcgc3RhdGUnLCBzdGF0ZSk7XG59KTtcblxuLy8gYWRkIHByb2R1Y3RzIGFuZCBjb2xsZWN0aW9ucyB0byBzdG9yZVxuc3RvcmUuZGlzcGF0Y2gocHJvZHVjdEFjdGlvbnMuc3RhcnRBZGRQcm9kdWN0cygpKTtcbnN0b3JlLmRpc3BhdGNoKGNvbGxlY3Rpb25BY3Rpb25zLnN0YXJ0QWRkQ29sbGVjdGlvbnMoKSk7XG5cbi8vIGNyZWF0ZSBzaG9waWZ5IGNhcnQgaW5zdGFuY2UgYmFzZWQgb24gbGFzdCBzZXNzaW9uIChiYXNlZCBvbiBsb2NhbFN0b3JhZ2UpXG5pZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhc3RDYXJ0SWQnKSkge1xuICBfc2hvcGlmeUFQSTIuZGVmYXVsdC5yZXN0b3JlQ2FydCgpLnRoZW4oZnVuY3Rpb24gKGxvY2FsQ2FydCkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogJ1NFVF9JTklUSUFMX0NBUlRfU1RBVEUnLCBsb2NhbENhcnQ6IGxvY2FsQ2FydCB9KTtcbiAgfSk7XG59IGVsc2Uge1xuICBfc2hvcGlmeUFQSTIuZGVmYXVsdC5jcmVhdGVDYXJ0KCkudGhlbihmdW5jdGlvbiAobG9jYWxDYXJ0KSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0lOSVRJQUxfQ0FSVF9TVEFURScsIGxvY2FsQ2FydDogbG9jYWxDYXJ0IH0pO1xuICB9KTtcbn1cblxuLy8gQXBwIGNzc1xuLy8gcmVxdWlyZSgnc3R5bGUhY3NzIXNhc3MhYXBwbGljYXRpb25TdHlsZXMnKVxuXG5fcmVhY3REb20yLmRlZmF1bHQucmVuZGVyKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICBfcmVhY3RSZWR1eC5Qcm92aWRlcixcbiAgeyBzdG9yZTogc3RvcmUgfSxcbiAgX3JvdXRlcjIuZGVmYXVsdFxuKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpKTtcblxuLyoqKi8gfSlcbl0sWzM0M10pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBidW5kbGUubWluLjA0ZDJiOTAzOTZkZjRmNzI2ZWE3LmpzIiwiaW1wb3J0IHNob3BpZnlBUEkgZnJvbSAnc2hvcGlmeUFQSSc7XG5cbmV4cG9ydCB2YXIgc3RhcnRBZGRvclVwZGF0ZUNhcnRJdGVtID0gKHByb2R1Y3RWYXJpYW50LCBxdWFudGl0eSkgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGxldCBjYXJ0ID0gZ2V0U3RhdGUoKS5jYXJ0O1xuICAgIGxldCB2YXJpYW50SWQ7XG5cbiAgICAvLyBhc3NpZ24gdmFyaWFudCBpZCBiYXNlZCBvbiBpcyBwcm9kdWN0IG9yIGNhcnQgbGluZSBpdGVtXG4gICAgaWYocHJvZHVjdFZhcmlhbnQudmFyaWFudF9pZCl7XG4gICAgICB2YXJpYW50SWQgPSBwcm9kdWN0VmFyaWFudC52YXJpYW50X2lkO1xuICAgIH1lbHNle1xuICAgICAgdmFyaWFudElkID0gcHJvZHVjdFZhcmlhbnQuaWQ7XG4gICAgfVxuXG4gICAgbGV0IGNhcnRMaW5lSXRlbSA9IGZpbmRDYXJ0SXRlbUJ5VmFyaWFudElkKHZhcmlhbnRJZCk7XG5cbiAgICAvLyBmdW5jdGlvbiB0byBjaGVjayBpZiBwcm9kdWN0IHZhcmlhbnQgYWxyZWFkeSBleGlzdHMgaW4gY2FydFxuICAgIGZ1bmN0aW9uIGZpbmRDYXJ0SXRlbUJ5VmFyaWFudElkKHZhcmlhbnRJZCkge1xuICAgICAgcmV0dXJuIGNhcnQubGluZUl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnaXRlbS52YXJpYW50X2lkOiAnLCBpdGVtLnZhcmlhbnRfaWQpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygndmFyaWFudElkOiAnLCB2YXJpYW50SWQpO1xuICAgICAgICByZXR1cm4gKGl0ZW0udmFyaWFudF9pZCA9PT0gdmFyaWFudElkKTtcbiAgICAgIH0pWzBdO1xuICAgIH1cblxuICAgIGlmIChjYXJ0TGluZUl0ZW0pIHtcbiAgICAgIGRpc3BhdGNoKHVwZGF0ZUNhcnRJdGVtKGNhcnRMaW5lSXRlbSwgcGFyc2VJbnQocXVhbnRpdHkpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc3BhdGNoKGFkZFRvQ2FydChwcm9kdWN0VmFyaWFudCwgcXVhbnRpdHkpKTtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgdGhlIGNhcnQgc3VidG90YWxcbiAgICBkaXNwYXRjaCh1cGRhdGVDYXJ0U3VidG90YWwoKSk7XG5cbiAgICAvLyAgdXBkYXRlIHRoZSBjYXJ0IGl0ZW1zIGNvdW50XG4gICAgZGlzcGF0Y2godXBkYXRlQ2FydEl0ZW1zQ291bnQocXVhbnRpdHkpKTtcbiAgfVxufTtcblxuLy8gYWRkIHByb2R1Y3QgdG8gY2FydFxuZXhwb3J0IHZhciBhZGRUb0NhcnQgPSAocHJvZHVjdFZhcmlhbnQsIHF1YW50aXR5KSA9PiB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgc2hvcGlmeUFQSS5jYXJ0LmNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cyh7IHZhcmlhbnQ6IHByb2R1Y3RWYXJpYW50LCBxdWFudGl0eTogcXVhbnRpdHkgfSkudGhlbihmdW5jdGlvbih1cGRhdGVkQ2FydCkge1xuICAgICAgbGV0IHVwZGF0ZWRDYXJ0SXRlbXMgPSB1cGRhdGVkQ2FydC5saW5lSXRlbXM7XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfQ0FSVF9JVEVNUycsIHVwZGF0ZWRDYXJ0SXRlbXMgfSk7XG4gICAgICBkaXNwYXRjaChvcGVuQ2FydCgpKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3JzKSB7XG4gICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGFkZFRvQ2FydCcsIGVycm9ycyk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIHVwZGF0ZSBjYXJ0IHN1YnRvdGFsXG5leHBvcnQgdmFyIHVwZGF0ZUNhcnRTdWJ0b3RhbCA9ICgpID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBsZXQgbmV3U3VidG90YWwgPSBzaG9waWZ5QVBJLmNhcnQuc3VidG90YWw7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnVVBEQVRFX0NBUlRfU1VCVE9UQUwnLCBuZXdTdWJ0b3RhbCB9KTtcbiAgfVxufTtcblxuLy8gdXBkYXRlIGNhcnQgaXRlbXMgY291bnRcbmV4cG9ydCB2YXIgdXBkYXRlQ2FydEl0ZW1zQ291bnQgPSAocXVhbnRpdHkpID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBsZXQgY2FydCA9IGdldFN0YXRlKCkuY2FydDtcbiAgICBsZXQgdXBkYXRlZENhcnRJdGVtc0NvdW50ID0gcGFyc2VJbnQoY2FydC5saW5lSXRlbXNDb3VudCkgKyBwYXJzZUludChxdWFudGl0eSk7XG4gICAgY29uc29sZS5sb2coJ25ldyBxdWFudGl0eTogJywgcXVhbnRpdHkpO1xuICAgIGNvbnNvbGUubG9nKCdvbGQgcXVhbnRpdHk6ICcsIGNhcnQubGluZUl0ZW1zQ291bnQpO1xuICAgIGNvbnNvbGUubG9nKCd1cGRhdGVkQ2FydEl0ZW1zQ291bnQ6ICcsIHVwZGF0ZWRDYXJ0SXRlbXNDb3VudCk7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnVVBEQVRFX0NBUlRfSVRFTVNfQ09VTlQnLCB1cGRhdGVkQ2FydEl0ZW1zQ291bnQgfSk7XG5cbiAgICBpZihwYXJzZUludCh1cGRhdGVkQ2FydEl0ZW1zQ291bnQpIDwgMSkge1xuICAgICAgZGlzcGF0Y2goY2xvc2VDYXJ0KCkpO1xuICAgIH1lbHNle1xuICAgICAgZGlzcGF0Y2gob3BlbkNhcnQoKSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyB1cGRhdGUgYSBjYXJ0IGl0ZW1cbmV4cG9ydCB2YXIgdXBkYXRlQ2FydEl0ZW0gPSAoc2VsZWN0ZWRDYXJ0SXRlbSwgcXVhbnRpdHkpID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBsZXQgY2FydCA9IGdldFN0YXRlKCkuY2FydDtcbiAgICBsZXQgdXBkYXRlZFF1YW50aXR5ID0gc2VsZWN0ZWRDYXJ0SXRlbS5xdWFudGl0eSArIHF1YW50aXR5O1xuICAgIGxldCB1cGRhdGVkQ2FydEl0ZW1zID0gW107XG5cbiAgICAvLyBpZiB0aGUgbmV3IHF1YW50aXR5IGlzIG1vcmUgdGhhbiAwLCBrZWVwIGl0IGluIHRoZSBuZXcgYXJyYXlcbiAgICBjYXJ0LmxpbmVJdGVtcy5mb3JFYWNoKChjYXJ0SXRlbSkgPT4ge1xuICAgICAgaWYgKHNlbGVjdGVkQ2FydEl0ZW0uaWQgPT09IGNhcnRJdGVtLmlkKSB7XG4gICAgICAgIGlmICh1cGRhdGVkUXVhbnRpdHkgPiAwKSB7XG4gICAgICAgICAgbGV0IHVwZGF0ZWRDYXJ0SXRlbSA9IFtdO1xuXG4gICAgICAgICAgLy8gY2xvbmUgdGhlIGxpbmUgaXRlbVxuICAgICAgICAgIHVwZGF0ZWRDYXJ0SXRlbSA9IGNhcnRJdGVtO1xuXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSBxdWFudGl0eSBvZiB0aGUgbmV3IGNsb25lXG4gICAgICAgICAgdXBkYXRlZENhcnRJdGVtLnF1YW50aXR5ID0gdXBkYXRlZFF1YW50aXR5O1xuXG4gICAgICAgICAgLy8gcmV0dXJuIHRoZSB1cGRhdGVkIGNhcnQgaXRlbVxuICAgICAgICAgIHVwZGF0ZWRDYXJ0SXRlbXMucHVzaCh1cGRhdGVkQ2FydEl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9ZWxzZXtcbiAgICAgICAgLy8gcmV0dXJuIHRoZSB1bm1vZGlmaWVkIGl0ZW1cbiAgICAgICAgdXBkYXRlZENhcnRJdGVtcy5wdXNoKGNhcnRJdGVtKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHVwZGF0ZSB0aGUgc2hvcGlmeSBjYXJ0IGFwaSBzaW5nbGV0b25cbiAgICBzaG9waWZ5QVBJLmNhcnQudXBkYXRlTGluZUl0ZW0oc2VsZWN0ZWRDYXJ0SXRlbS5pZCwgdXBkYXRlZFF1YW50aXR5KS50aGVuKCgpID0+IHtcbiAgICAgIC8vIHVwZGF0ZSB0aGUgbG9jYWwgY2FydCBpdGVtcyAoaW4gcmVkdXggc3RvcmUpXG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfQ0FSVF9JVEVNUycsIHVwZGF0ZWRDYXJ0SXRlbXMgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIG9wZW4gY2FydFxuZXhwb3J0IHZhciBvcGVuQ2FydCA9ICgpID0+IHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnT1BFTl9DQVJUJ1xuICB9XG59O1xuXG4vLyBjbG9zZSBjYXJ0XG5leHBvcnQgdmFyIGNsb3NlQ2FydCA9ICgpID0+IHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQ0xPU0VfQ0FSVCdcbiAgfVxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9hY3Rpb25zL2NhcnRBY3Rpb25zLmpzeCIsImxldCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5sZXQgU2hvcGlmeUJ1eSA9IHJlcXVpcmUoJ3Nob3BpZnktYnV5Jyk7XG5sZXQgc3RvcmUgPSByZXF1aXJlKCdjb25maWd1cmVTdG9yZScpLmNvbmZpZ3VyZSgpO1xuXG5jbGFzcyBzaG9waWZ5QVBJIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jbGllbnQgPSBTaG9waWZ5QnV5LmJ1aWxkQ2xpZW50KHtcbiAgICAgIGFwaUtleTogJ2UwYWI4Y2Y5YjVhMzBjZWUyNjE2YmYxNTFhNTZjNzYzJyxcbiAgICAgIGRvbWFpbjogJ3JtYy1wcmV2aWV3Lm15c2hvcGlmeS5jb20nLFxuICAgICAgYXBwSWQ6ICc2J1xuICAgIH0pO1xuICAgIHRoaXMuY2FydCA9IHt9O1xuICB9XG5cbiAgY3JlYXRlQ2FydCgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5jbGllbnQuY3JlYXRlQ2FydCgpLnRoZW4oKG5ld0NhcnQpID0+IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xhc3RDYXJ0SWQnLCBuZXdDYXJ0LmlkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZWQgbmV3IGNhcnQnLCBuZXdDYXJ0KTtcbiAgICAgICAgLy8gc2V0IHNpbmdsZXRvbiBjYXJ0IG9iamVjdCB0byByZWZlcmVuY2Ugc2hvcGlmeSBjYXJ0XG4gICAgICAgIHRoaXMuY2FydCA9IG5ld0NhcnQ7XG5cbiAgICAgICAgLy8gc2V0IGxvY2FsQ2FydCAocmVkdXggY29ubmVjdGVkKSB0byBrZWVwIHRyYWNrIG9mIHN0YXRlIGNoYW5nZXNcbiAgICAgICAgbGV0IGxvY2FsQ2FydCA9IHtcbiAgICAgICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgICAgIGxpbmVJdGVtc0NvdW50OiAwLFxuICAgICAgICAgIGxpbmVJdGVtczogW10sXG4gICAgICAgICAgc3VidG90YWw6IDBcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKGxvY2FsQ2FydCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlc3RvcmVDYXJ0KCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmNsaWVudC5mZXRjaENhcnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhc3RDYXJ0SWQnKSkudGhlbigocmVtb3RlQ2FydCkgPT4ge1xuICAgICAgICAvLyBzZXQgc2luZ2xldG9uIGNhcnQgb2JqZWN0IHRvIHJlZmVyZW5jZSBzaG9waWZ5IGNhcnRcbiAgICAgICAgdGhpcy5jYXJ0ID0gcmVtb3RlQ2FydDtcblxuICAgICAgICAvLyBzZXQgbG9jYWxDYXJ0IChyZWR1eCBjb25uZWN0ZWQpIHRvIGtlZXAgdHJhY2sgb2Ygc3RhdGUgY2hhbmdlc1xuICAgICAgICBsZXQgbG9jYWxDYXJ0ID0ge1xuICAgICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgICAgbGluZUl0ZW1zQ291bnQ6IHJlbW90ZUNhcnQubGluZUl0ZW1Db3VudCxcbiAgICAgICAgICBsaW5lSXRlbXM6IHJlbW90ZUNhcnQubGluZUl0ZW1zLFxuICAgICAgICAgIHN1YnRvdGFsOiByZW1vdGVDYXJ0LnN1YnRvdGFsXG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShsb2NhbENhcnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgKG5ldyBzaG9waWZ5QVBJKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9hcGkvc2hvcGlmeUFQSS5qc3giLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jbGFzc25hbWVzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJpbXBvcnQgc2hvcGlmeUFQSSBmcm9tICdzaG9waWZ5QVBJJztcblxuZXhwb3J0IHZhciBzZXRBY3RpdmVDb2xsZWN0aW9uID0gKGlkKSA9PiB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICByZXR1cm4gc2hvcGlmeUFQSS5jbGllbnQuZmV0Y2hDb2xsZWN0aW9uKGlkKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICBsZXQgY29sbGVjdGlvbiA9IGRhdGEgfHwge307XG4gICAgICBsZXQgcGFyc2VkQ29sbGVjdGlvbiA9IHsuLi5jb2xsZWN0aW9ufTtcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9BQ1RJVkVfQ09MTEVDVElPTicsIHBhcnNlZENvbGxlY3Rpb24gfSk7XG4gICAgfSk7XG4gIH07XG59O1xuXG4vLyBBZGQgY29sbGVjdGlvbnMgdG8gc3RvcmVcbmV4cG9ydCB2YXIgc3RhcnRBZGRDb2xsZWN0aW9ucyA9ICgpID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIHJldHVybiBzaG9waWZ5QVBJLmNsaWVudC5mZXRjaEFsbENvbGxlY3Rpb25zKCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdmFyIGNvbGxlY3Rpb25zID0gZGF0YSB8fCB7fTtcbiAgICAgIHZhciBwYXJzZWRDb2xsZWN0aW9ucyA9IFtdO1xuXG4gICAgICBPYmplY3Qua2V5cyhjb2xsZWN0aW9ucykuZm9yRWFjaCgoY29sbGVjdGlvbklkKSA9PiB7XG4gICAgICAgIHBhcnNlZENvbGxlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIGtleTogY29sbGVjdGlvbklkLFxuICAgICAgICAgIC4uLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25JZF1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGlzcGF0Y2goYWRkQ29sbGVjdGlvbnMocGFyc2VkQ29sbGVjdGlvbnMpKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbmV4cG9ydCB2YXIgYWRkQ29sbGVjdGlvbnMgPSAoY29sbGVjdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQUREX0NPTExFQ1RJT05TJyxcbiAgICBjb2xsZWN0aW9uc1xuICB9O1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9hY3Rpb25zL2NvbGxlY3Rpb25BY3Rpb25zLmpzeCIsImltcG9ydCBzaG9waWZ5QVBJIGZyb20gJ3Nob3BpZnlBUEknO1xuXG4vLyBBZGQgcHJvZHVjdHMgdG8gc3RvcmVcbmV4cG9ydCB2YXIgc3RhcnRBZGRQcm9kdWN0cyA9ICgpID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIHJldHVybiBzaG9waWZ5QVBJLmNsaWVudC5mZXRjaEFsbFByb2R1Y3RzKCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgbGV0IHByb2R1Y3RzID0gZGF0YSB8fCB7fTtcbiAgICAgIGxldCBwYXJzZWRQcm9kdWN0cyA9IHByb2R1Y3RzLm1hcCgocHJvZHVjdCwgaW5kZXgpID0+IHtcbiAgICAgICAgbGV0IHVwZGF0ZWRQcm9kdWN0ID0gW107XG4gICAgICAgIHVwZGF0ZWRQcm9kdWN0ID0gcHJvZHVjdDtcbiAgICAgICAgdXBkYXRlZFByb2R1Y3Qua2V5ID0gaW5kZXg7XG4gICAgICAgIHJldHVybiB1cGRhdGVkUHJvZHVjdDtcbiAgICAgIH0pO1xuXG4gICAgICBkaXNwYXRjaChhZGRQcm9kdWN0cyhwYXJzZWRQcm9kdWN0cykpO1xuICAgICAgZGlzcGF0Y2gocHJlbG9hZFByb2R1Y3RJbWFnZXMoKSk7XG4gICAgfSk7XG4gIH07XG59O1xuXG5leHBvcnQgdmFyIGFkZFByb2R1Y3RzID0gKHByb2R1Y3RzKSA9PiB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0FERF9QUk9EVUNUUycsXG4gICAgcHJvZHVjdHNcbiAgfTtcbn07XG5cbmV4cG9ydCB2YXIgcHJlbG9hZFByb2R1Y3RJbWFnZXMgPSAoKSA9PiB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgbGV0IHByb2R1Y3RzID0gZ2V0U3RhdGUoKS5wcm9kdWN0cy5hbGw7XG4gICAgbGV0IGltYWdlcyA9IFtdO1xuICAgIHByb2R1Y3RzLm1hcCgocHJvZHVjdCwgaW5kZXgpID0+IHtcbiAgICAgIGltYWdlc1tpbmRleF0gPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltYWdlc1tpbmRleF0uc3JjID0gcHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQuaW1hZ2VWYXJpYW50c1s0XS5zcmM7XG4gICAgICByZXR1cm4gaW1hZ2VzW2luZGV4XTtcbiAgICB9KTtcbiAgfTtcbn07XG5cblxuLy8gc2V0IGFjdGl2ZSBwcm9kdWN0XG5leHBvcnQgdmFyIHNldEFjdGl2ZVByb2R1Y3QgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdTRVRfQUNUSVZFX1BST0RVQ1QnLFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbi8vIGNsZWFyIGFjdGl2ZSBwcm9kdWN0IGZyb20gcmVkdXhcbmV4cG9ydCB2YXIgY2xlYXJBY3RpdmVQcm9kdWN0ID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdDTEVBUl9BQ1RJVkVfUFJPRFVDVCdcbiAgfTtcbn07XG5cbi8vIHVwZGF0ZSBhY3RpdmUgcHJvZHVjdCBvcHRpb25cbmV4cG9ydCB2YXIgdXBkYXRlQWN0aXZlUHJvZHVjdE9wdGlvbnMgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdVUERBVEVfQUNUSVZFX1BST0RVQ1RfT1BUSU9OUycsXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9hY3Rpb25zL3Byb2R1Y3RBY3Rpb25zLmpzeCIsImltcG9ydCAqIGFzIHJlZHV4IGZyb20gJ3JlZHV4JztcbmltcG9ydCB0aHVuayBmcm9tICdyZWR1eC10aHVuayc7XG5cbmltcG9ydCB7cHJvZHVjdHNSZWR1Y2VyLCBjb2xsZWN0aW9uc1JlZHVjZXIsIGNhcnRSZWR1Y2VyLCBuYXZSZWR1Y2VyfSBmcm9tICdyZWR1Y2Vycyc7XG5cbmV4cG9ydCBsZXQgY29uZmlndXJlID0gKGluaXRpYWxTdGF0ZSA9IHt9KSA9PiB7XG4gIHZhciByZWR1Y2VyID0gcmVkdXguY29tYmluZVJlZHVjZXJzKHtcbiAgICBwcm9kdWN0czogcHJvZHVjdHNSZWR1Y2VyLFxuICAgIGNvbGxlY3Rpb25zOiBjb2xsZWN0aW9uc1JlZHVjZXIsXG4gICAgY2FydDogY2FydFJlZHVjZXIsXG4gICAgbmF2OiBuYXZSZWR1Y2VyXG4gIH0pO1xuXG4gIHZhciBzdG9yZSA9IHJlZHV4LmNyZWF0ZVN0b3JlKHJlZHVjZXIsIGluaXRpYWxTdGF0ZSwgcmVkdXguY29tcG9zZShcbiAgICByZWR1eC5hcHBseU1pZGRsZXdhcmUodGh1bmspLFxuICAgIHdpbmRvdy5kZXZUb29sc0V4dGVuc2lvbiA/IHdpbmRvdy5kZXZUb29sc0V4dGVuc2lvbigpIDogZiA9PiBmXG4gICkpO1xuXG4gIHJldHVybiBzdG9yZTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc3RvcmUvY29uZmlndXJlU3RvcmUuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTG9hZGVyKCl7XG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImxvYWRlclwiPjxpIGNsYXNzTmFtZT1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gZmEtM3ggZmEtZndcIj48L2k+PC9kaXY+XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvcHJlc2VudGF0aW9uYWwvTG9hZGVyLmpzIiwiY2xhc3MgRm9ybWF0e1xuICBjb25zdHJ1Y3Rvcigpe1xuICB9XG5cbiAgLy8gZm9ybWF0IGFtb3VudCBhcyBjdXJyZW5jeVxuICBhc01vbmV5KGFtb3VudCwgY3VycmVuY3ksIHRob3VzYW5kU2VwYXJhdG9yLCBkZWNpbWFsU2VwYXJhdG9yLCBsb2NhbGVEZWNpbWFsU2VwYXJhdG9yKSB7XG4gICAgY3VycmVuY3kgPSBjdXJyZW5jeSB8fCAnJCc7XG4gICAgdGhvdXNhbmRTZXBhcmF0b3IgPSB0aG91c2FuZFNlcGFyYXRvciB8fCAnLCc7XG4gICAgZGVjaW1hbFNlcGFyYXRvciA9IGRlY2ltYWxTZXBhcmF0b3IgfHwgJy4nO1xuICAgIGxvY2FsZURlY2ltYWxTZXBhcmF0b3IgPSBsb2NhbGVEZWNpbWFsU2VwYXJhdG9yIHx8ICcuJztcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCcoXFxcXGQpKD89KFxcXFxkezN9KStcXFxcLiknLCAnZycpO1xuXG4gICAgcmV0dXJuIGN1cnJlbmN5ICsgcGFyc2VGbG9hdChhbW91bnQsIDEwKS50b0ZpeGVkKDIpXG4gICAgICAucmVwbGFjZShsb2NhbGVEZWNpbWFsU2VwYXJhdG9yLCBkZWNpbWFsU2VwYXJhdG9yKVxuICAgICAgLnJlcGxhY2UocmVnZXgsICckMScgKyB0aG91c2FuZFNlcGFyYXRvcilcbiAgICAgIC50b1N0cmluZygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IChuZXcgRm9ybWF0KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC91dGlscy9mb3JtYXQuanN4IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfdHJhY2tIZWxwZXIgPSByZXF1aXJlKCcuL3RyYWNrSGVscGVyJyk7XG5cbnZhciBfb2JqZWN0QXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG52YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgaGVscGVycyA9IHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShwcm9wcykge1xuICAgIHZhciBzbGlja0xpc3QgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5saXN0KTtcblxuICAgIHZhciBzbGlkZUNvdW50ID0gX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KHByb3BzLmNoaWxkcmVuKTtcbiAgICB2YXIgbGlzdFdpZHRoID0gdGhpcy5nZXRXaWR0aChzbGlja0xpc3QpO1xuICAgIHZhciB0cmFja1dpZHRoID0gdGhpcy5nZXRXaWR0aChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy50cmFjaykpO1xuICAgIHZhciBzbGlkZVdpZHRoO1xuXG4gICAgaWYgKCFwcm9wcy52ZXJ0aWNhbCkge1xuICAgICAgdmFyIGNlbnRlclBhZGRpbmdBZGogPSBwcm9wcy5jZW50ZXJNb2RlICYmIHBhcnNlSW50KHByb3BzLmNlbnRlclBhZGRpbmcpICogMjtcbiAgICAgIHNsaWRlV2lkdGggPSAodGhpcy5nZXRXaWR0aChfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcykpIC0gY2VudGVyUGFkZGluZ0FkaikgLyBwcm9wcy5zbGlkZXNUb1Nob3c7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlV2lkdGggPSB0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKSk7XG4gICAgfVxuXG4gICAgdmFyIHNsaWRlSGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoc2xpY2tMaXN0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWluZGV4PVwiMFwiXScpKTtcbiAgICB2YXIgbGlzdEhlaWdodCA9IHNsaWRlSGVpZ2h0ICogcHJvcHMuc2xpZGVzVG9TaG93O1xuXG4gICAgdmFyIGN1cnJlbnRTbGlkZSA9IHByb3BzLnJ0bCA/IHNsaWRlQ291bnQgLSAxIC0gcHJvcHMuaW5pdGlhbFNsaWRlIDogcHJvcHMuaW5pdGlhbFNsaWRlO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzbGlkZUNvdW50OiBzbGlkZUNvdW50LFxuICAgICAgc2xpZGVXaWR0aDogc2xpZGVXaWR0aCxcbiAgICAgIGxpc3RXaWR0aDogbGlzdFdpZHRoLFxuICAgICAgdHJhY2tXaWR0aDogdHJhY2tXaWR0aCxcbiAgICAgIGN1cnJlbnRTbGlkZTogY3VycmVudFNsaWRlLFxuICAgICAgc2xpZGVIZWlnaHQ6IHNsaWRlSGVpZ2h0LFxuICAgICAgbGlzdEhlaWdodDogbGlzdEhlaWdodFxuICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgdmFyIHRhcmdldExlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgICAgc2xpZGVJbmRleDogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgICB9LCBwcm9wcywgdGhpcy5zdGF0ZSkpO1xuICAgICAgLy8gZ2V0Q1NTIGZ1bmN0aW9uIG5lZWRzIHByZXZpb3VzbHkgc2V0IHN0YXRlXG4gICAgICB2YXIgdHJhY2tTdHlsZSA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IHRhcmdldExlZnQgfSwgcHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRyYWNrU3R5bGU6IHRyYWNrU3R5bGUgfSk7XG5cbiAgICAgIHRoaXMuYXV0b1BsYXkoKTsgLy8gb25jZSB3ZSdyZSBzZXQgdXAsIHRyaWdnZXIgdGhlIGluaXRpYWwgYXV0b3BsYXkuXG4gICAgfSk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHByb3BzKSB7XG4gICAgdmFyIHNsaWNrTGlzdCA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLmxpc3QpO1xuICAgIC8vIFRoaXMgbWV0aG9kIGhhcyBtb3N0bHkgc2FtZSBjb2RlIGFzIGluaXRpYWxpemUgbWV0aG9kLlxuICAgIC8vIFJlZmFjdG9yIGl0XG4gICAgdmFyIHNsaWRlQ291bnQgPSBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uY291bnQocHJvcHMuY2hpbGRyZW4pO1xuICAgIHZhciBsaXN0V2lkdGggPSB0aGlzLmdldFdpZHRoKHNsaWNrTGlzdCk7XG4gICAgdmFyIHRyYWNrV2lkdGggPSB0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLnRyYWNrKSk7XG4gICAgdmFyIHNsaWRlV2lkdGg7XG5cbiAgICBpZiAoIXByb3BzLnZlcnRpY2FsKSB7XG4gICAgICB2YXIgY2VudGVyUGFkZGluZ0FkaiA9IHByb3BzLmNlbnRlck1vZGUgJiYgcGFyc2VJbnQocHJvcHMuY2VudGVyUGFkZGluZykgKiAyO1xuICAgICAgc2xpZGVXaWR0aCA9ICh0aGlzLmdldFdpZHRoKF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKSkgLSBjZW50ZXJQYWRkaW5nQWRqKSAvIHByb3BzLnNsaWRlc1RvU2hvdztcbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpKTtcbiAgICB9XG5cbiAgICB2YXIgc2xpZGVIZWlnaHQgPSB0aGlzLmdldEhlaWdodChzbGlja0xpc3QucXVlcnlTZWxlY3RvcignW2RhdGEtaW5kZXg9XCIwXCJdJykpO1xuICAgIHZhciBsaXN0SGVpZ2h0ID0gc2xpZGVIZWlnaHQgKiBwcm9wcy5zbGlkZXNUb1Nob3c7XG5cbiAgICAvLyBwYXVzZSBzbGlkZXIgaWYgYXV0b3BsYXkgaXMgc2V0IHRvIGZhbHNlXG4gICAgaWYgKHByb3BzLmF1dG9wbGF5KSB7XG4gICAgICB0aGlzLnBhdXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXV0b1BsYXkoKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNsaWRlQ291bnQ6IHNsaWRlQ291bnQsXG4gICAgICBzbGlkZVdpZHRoOiBzbGlkZVdpZHRoLFxuICAgICAgbGlzdFdpZHRoOiBsaXN0V2lkdGgsXG4gICAgICB0cmFja1dpZHRoOiB0cmFja1dpZHRoLFxuICAgICAgc2xpZGVIZWlnaHQ6IHNsaWRlSGVpZ2h0LFxuICAgICAgbGlzdEhlaWdodDogbGlzdEhlaWdodFxuICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgdmFyIHRhcmdldExlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgICAgc2xpZGVJbmRleDogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgICB9LCBwcm9wcywgdGhpcy5zdGF0ZSkpO1xuICAgICAgLy8gZ2V0Q1NTIGZ1bmN0aW9uIG5lZWRzIHByZXZpb3VzbHkgc2V0IHN0YXRlXG4gICAgICB2YXIgdHJhY2tTdHlsZSA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IHRhcmdldExlZnQgfSwgcHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRyYWNrU3R5bGU6IHRyYWNrU3R5bGUgfSk7XG4gICAgfSk7XG4gIH0sXG4gIGdldFdpZHRoOiBmdW5jdGlvbiBnZXRXaWR0aChlbGVtKSB7XG4gICAgcmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggfHwgZWxlbS5vZmZzZXRXaWR0aCB8fCAwO1xuICB9LFxuICBnZXRIZWlnaHQ6IGZ1bmN0aW9uIGdldEhlaWdodChlbGVtKSB7XG4gICAgcmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IHx8IGVsZW0ub2Zmc2V0SGVpZ2h0IHx8IDA7XG4gIH0sXG5cbiAgYWRhcHRIZWlnaHQ6IGZ1bmN0aW9uIGFkYXB0SGVpZ2h0KCkge1xuICAgIGlmICh0aGlzLnByb3BzLmFkYXB0aXZlSGVpZ2h0KSB7XG4gICAgICB2YXIgc2VsZWN0b3IgPSAnW2RhdGEtaW5kZXg9XCInICsgdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgKyAnXCJdJztcbiAgICAgIGlmICh0aGlzLmxpc3QpIHtcbiAgICAgICAgdmFyIHNsaWNrTGlzdCA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLmxpc3QpO1xuICAgICAgICBzbGlja0xpc3Quc3R5bGUuaGVpZ2h0ID0gc2xpY2tMaXN0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBjYW5Hb05leHQ6IGZ1bmN0aW9uIGNhbkdvTmV4dChvcHRzKSB7XG4gICAgdmFyIGNhbkdvID0gdHJ1ZTtcbiAgICBpZiAoIW9wdHMuaW5maW5pdGUpIHtcbiAgICAgIGlmIChvcHRzLmNlbnRlck1vZGUpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgY3VycmVudCBzbGlkZSBpcyBsYXN0IHNsaWRlXG4gICAgICAgIGlmIChvcHRzLmN1cnJlbnRTbGlkZSA+PSBvcHRzLnNsaWRlQ291bnQgLSAxKSB7XG4gICAgICAgICAgY2FuR28gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgYWxsIHNsaWRlcyBhcmUgc2hvd24gaW4gc2xpZGVyXG4gICAgICAgIGlmIChvcHRzLnNsaWRlQ291bnQgPD0gb3B0cy5zbGlkZXNUb1Nob3cgfHwgb3B0cy5jdXJyZW50U2xpZGUgPj0gb3B0cy5zbGlkZUNvdW50IC0gb3B0cy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgICBjYW5HbyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYW5HbztcbiAgfSxcbiAgc2xpZGVIYW5kbGVyOiBmdW5jdGlvbiBzbGlkZUhhbmRsZXIoaW5kZXgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy8gRnVuY3Rpb25hbGl0eSBvZiBhbmltYXRlU2xpZGUgYW5kIHBvc3RTbGlkZSBpcyBtZXJnZWQgaW50byB0aGlzIGZ1bmN0aW9uXG4gICAgLy8gY29uc29sZS5sb2coJ3NsaWRlSGFuZGxlcicsIGluZGV4KTtcbiAgICB2YXIgdGFyZ2V0U2xpZGUsIGN1cnJlbnRTbGlkZTtcbiAgICB2YXIgdGFyZ2V0TGVmdCwgY3VycmVudExlZnQ7XG4gICAgdmFyIGNhbGxiYWNrO1xuXG4gICAgaWYgKHRoaXMucHJvcHMud2FpdEZvckFuaW1hdGUgJiYgdGhpcy5zdGF0ZS5hbmltYXRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5mYWRlKSB7XG4gICAgICBjdXJyZW50U2xpZGUgPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZTtcblxuICAgICAgLy8gRG9uJ3QgY2hhbmdlIHNsaWRlIGlmIGl0J3Mgbm90IGluZml0ZSBhbmQgY3VycmVudCBzbGlkZSBpcyB0aGUgZmlyc3Qgb3IgbGFzdCBzbGlkZS5cbiAgICAgIGlmICh0aGlzLnByb3BzLmluZmluaXRlID09PSBmYWxzZSAmJiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuc3RhdGUuc2xpZGVDb3VudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyAgU2hpZnRpbmcgdGFyZ2V0U2xpZGUgYmFjayBpbnRvIHRoZSByYW5nZVxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICB0YXJnZXRTbGlkZSA9IGluZGV4ICsgdGhpcy5zdGF0ZS5zbGlkZUNvdW50O1xuICAgICAgfSBlbHNlIGlmIChpbmRleCA+PSB0aGlzLnN0YXRlLnNsaWRlQ291bnQpIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBpbmRleCAtIHRoaXMuc3RhdGUuc2xpZGVDb3VudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFNsaWRlID0gaW5kZXg7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmxhenlMb2FkICYmIHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QuaW5kZXhPZih0YXJnZXRTbGlkZSkgPCAwKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGxhenlMb2FkZWRMaXN0OiB0aGlzLnN0YXRlLmxhenlMb2FkZWRMaXN0LmNvbmNhdCh0YXJnZXRTbGlkZSlcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBhbmltYXRpbmc6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMuYWZ0ZXJDaGFuZ2UpIHtcbiAgICAgICAgICBfdGhpcy5wcm9wcy5hZnRlckNoYW5nZSh0YXJnZXRTbGlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIF90aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFuaW1hdGluZzogdHJ1ZSxcbiAgICAgICAgY3VycmVudFNsaWRlOiB0YXJnZXRTbGlkZVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrID0gc2V0VGltZW91dChjYWxsYmFjaywgdGhpcy5wcm9wcy5zcGVlZCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMuYmVmb3JlQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYmVmb3JlQ2hhbmdlKHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLCB0YXJnZXRTbGlkZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYXV0b1BsYXkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0YXJnZXRTbGlkZSA9IGluZGV4O1xuICAgIGlmICh0YXJnZXRTbGlkZSA8IDApIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnNsaWRlQ291bnQgJSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudCAtIHRoaXMuc3RhdGUuc2xpZGVDb3VudCAlIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSB0aGlzLnN0YXRlLnNsaWRlQ291bnQgKyB0YXJnZXRTbGlkZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRhcmdldFNsaWRlID49IHRoaXMuc3RhdGUuc2xpZGVDb3VudCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaW5maW5pdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudCAtIHRoaXMucHJvcHMuc2xpZGVzVG9TaG93O1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnNsaWRlQ291bnQgJSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50U2xpZGUgPSB0YXJnZXRTbGlkZSAtIHRoaXMuc3RhdGUuc2xpZGVDb3VudDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFNsaWRlID0gdGFyZ2V0U2xpZGU7XG4gICAgfVxuXG4gICAgdGFyZ2V0TGVmdCA9ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tMZWZ0KSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgc2xpZGVJbmRleDogdGFyZ2V0U2xpZGUsXG4gICAgICB0cmFja1JlZjogdGhpcy50cmFja1xuICAgIH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgIGN1cnJlbnRMZWZ0ID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0xlZnQpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7XG4gICAgICBzbGlkZUluZGV4OiBjdXJyZW50U2xpZGUsXG4gICAgICB0cmFja1JlZjogdGhpcy50cmFja1xuICAgIH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKTtcblxuICAgIGlmICh0aGlzLnByb3BzLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgdGFyZ2V0TGVmdCA9IGN1cnJlbnRMZWZ0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmJlZm9yZUNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5iZWZvcmVDaGFuZ2UodGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsIGN1cnJlbnRTbGlkZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMubGF6eUxvYWQpIHtcbiAgICAgIHZhciBsb2FkZWQgPSB0cnVlO1xuICAgICAgdmFyIHNsaWRlc1RvTG9hZCA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IHRhcmdldFNsaWRlOyBpIDwgdGFyZ2V0U2xpZGUgKyB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdzsgaSsrKSB7XG4gICAgICAgIGxvYWRlZCA9IGxvYWRlZCAmJiB0aGlzLnN0YXRlLmxhenlMb2FkZWRMaXN0LmluZGV4T2YoaSkgPj0gMDtcbiAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICBzbGlkZXNUb0xvYWQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgbGF6eUxvYWRlZExpc3Q6IHRoaXMuc3RhdGUubGF6eUxvYWRlZExpc3QuY29uY2F0KHNsaWRlc1RvTG9hZClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2xpZGUgVHJhbnNpdGlvbiBoYXBwZW5zIGhlcmUuXG4gICAgLy8gYW5pbWF0ZWQgdHJhbnNpdGlvbiBoYXBwZW5zIHRvIHRhcmdldCBTbGlkZSBhbmRcbiAgICAvLyBub24gLSBhbmltYXRlZCB0cmFuc2l0aW9uIGhhcHBlbnMgdG8gY3VycmVudCBTbGlkZVxuICAgIC8vIElmIENTUyB0cmFuc2l0aW9ucyBhcmUgZmFsc2UsIGRpcmVjdGx5IGdvIHRoZSBjdXJyZW50IHNsaWRlLlxuXG4gICAgaWYgKHRoaXMucHJvcHMudXNlQ1NTID09PSBmYWxzZSkge1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY3VycmVudFNsaWRlOiBjdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrU3R5bGU6ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IGN1cnJlbnRMZWZ0IH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hZnRlckNoYW5nZSkge1xuICAgICAgICAgIHRoaXMucHJvcHMuYWZ0ZXJDaGFuZ2UoY3VycmVudFNsaWRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcblxuICAgICAgdmFyIG5leHRTdGF0ZUNoYW5nZXMgPSB7XG4gICAgICAgIGFuaW1hdGluZzogZmFsc2UsXG4gICAgICAgIGN1cnJlbnRTbGlkZTogY3VycmVudFNsaWRlLFxuICAgICAgICB0cmFja1N0eWxlOiAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiBjdXJyZW50TGVmdCB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSksXG4gICAgICAgIHN3aXBlTGVmdDogbnVsbFxuICAgICAgfTtcblxuICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUobmV4dFN0YXRlQ2hhbmdlcyk7XG4gICAgICAgIGlmIChfdGhpcy5wcm9wcy5hZnRlckNoYW5nZSkge1xuICAgICAgICAgIF90aGlzLnByb3BzLmFmdGVyQ2hhbmdlKGN1cnJlbnRTbGlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIF90aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFuaW1hdGluZzogdHJ1ZSxcbiAgICAgICAgY3VycmVudFNsaWRlOiBjdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrU3R5bGU6ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tBbmltYXRlQ1NTKSgoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoeyBsZWZ0OiB0YXJnZXRMZWZ0IH0sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrID0gc2V0VGltZW91dChjYWxsYmFjaywgdGhpcy5wcm9wcy5zcGVlZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmF1dG9QbGF5KCk7XG4gIH0sXG4gIHN3aXBlRGlyZWN0aW9uOiBmdW5jdGlvbiBzd2lwZURpcmVjdGlvbih0b3VjaE9iamVjdCkge1xuICAgIHZhciB4RGlzdCwgeURpc3QsIHIsIHN3aXBlQW5nbGU7XG5cbiAgICB4RGlzdCA9IHRvdWNoT2JqZWN0LnN0YXJ0WCAtIHRvdWNoT2JqZWN0LmN1clg7XG4gICAgeURpc3QgPSB0b3VjaE9iamVjdC5zdGFydFkgLSB0b3VjaE9iamVjdC5jdXJZO1xuICAgIHIgPSBNYXRoLmF0YW4yKHlEaXN0LCB4RGlzdCk7XG5cbiAgICBzd2lwZUFuZ2xlID0gTWF0aC5yb3VuZChyICogMTgwIC8gTWF0aC5QSSk7XG4gICAgaWYgKHN3aXBlQW5nbGUgPCAwKSB7XG4gICAgICBzd2lwZUFuZ2xlID0gMzYwIC0gTWF0aC5hYnMoc3dpcGVBbmdsZSk7XG4gICAgfVxuICAgIGlmIChzd2lwZUFuZ2xlIDw9IDQ1ICYmIHN3aXBlQW5nbGUgPj0gMCB8fCBzd2lwZUFuZ2xlIDw9IDM2MCAmJiBzd2lwZUFuZ2xlID49IDMxNSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMucnRsID09PSBmYWxzZSA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gICAgfVxuICAgIGlmIChzd2lwZUFuZ2xlID49IDEzNSAmJiBzd2lwZUFuZ2xlIDw9IDIyNSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMucnRsID09PSBmYWxzZSA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsU3dpcGluZyA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHN3aXBlQW5nbGUgPj0gMzUgJiYgc3dpcGVBbmdsZSA8PSAxMzUpIHtcbiAgICAgICAgcmV0dXJuICdkb3duJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAndXAnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAndmVydGljYWwnO1xuICB9LFxuICBwbGF5OiBmdW5jdGlvbiBwbGF5KCkge1xuICAgIHZhciBuZXh0SW5kZXg7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUubW91bnRlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLnJ0bCkge1xuICAgICAgbmV4dEluZGV4ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgLSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5jYW5Hb05leHQoX2V4dGVuZHMoe30sIHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpKSkge1xuICAgICAgICBuZXh0SW5kZXggPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSArIHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zbGlkZUhhbmRsZXIobmV4dEluZGV4KTtcbiAgfSxcbiAgYXV0b1BsYXk6IGZ1bmN0aW9uIGF1dG9QbGF5KCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmF1dG9QbGF5VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YXRlLmF1dG9QbGF5VGltZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvcGxheSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGF1dG9QbGF5VGltZXI6IHNldFRpbWVvdXQodGhpcy5wbGF5LCB0aGlzLnByb3BzLmF1dG9wbGF5U3BlZWQpXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5hdXRvUGxheVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zdGF0ZS5hdXRvUGxheVRpbWVyKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhdXRvUGxheVRpbWVyOiBudWxsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGhlbHBlcnM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXNsaWNrL2xpYi9taXhpbnMvaGVscGVycy5qc1xuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmxldCB7IGNvbm5lY3QgfSA9IHJlcXVpcmUoJ3JlYWN0LXJlZHV4Jyk7XG5sZXQgYWN0aW9ucyA9IHJlcXVpcmUoJ2NvbGxlY3Rpb25BY3Rpb25zJyk7XG5cbmNsYXNzIENvbGxlY3Rpb24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsTW91bnQoKXtcbiAgICBsZXQge2Rpc3BhdGNofSA9IHRoaXMucHJvcHM7XG4gICAgZGlzcGF0Y2goYWN0aW9ucy5zZXRBY3RpdmVDb2xsZWN0aW9uKHRoaXMucHJvcHMucGFyYW1zLmNvbGxlY3Rpb25JZCkpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBjb2xsZWN0aW9uO1xuICAgIGNvbGxlY3Rpb24gPSB0aGlzLnByb3BzLmNvbGxlY3Rpb247XG4gICAgaWYgKGNvbGxlY3Rpb24pe1xuICAgICAgbGV0IHtkaXNwYXRjaH0gPSB0aGlzLnByb3BzO1xuICAgICAgbGV0IHtjb2xsZWN0aW9uX2lkLCB0aXRsZX0gPSBjb2xsZWN0aW9uO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbGxlY3Rpb24taW5kZXhcIj5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj57dGl0bGV9PC9oMT5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PkxvYWRpbmcgY29sbGVjdGlvbi4uLjwvZGl2PlxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY29sbGVjdGlvbjogc3RhdGUuY29sbGVjdGlvbnMuYWN0aXZlXG4gICAgfVxuICB9XG4pKENvbGxlY3Rpb24pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbnRhaW5lcnMvQ29sbGVjdGlvbi5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xubGV0IHtjb25uZWN0fSA9IHJlcXVpcmUoJ3JlYWN0LXJlZHV4Jyk7XG5sZXQgcHJvZHVjdEFjdGlvbnMgPSByZXF1aXJlKCdwcm9kdWN0QWN0aW9ucycpO1xubGV0IGNhcnRBY3Rpb25zID0gcmVxdWlyZSgnY2FydEFjdGlvbnMnKTtcbmltcG9ydCB7YnJvd3Nlckhpc3Rvcnl9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgRm9ybWF0IGZyb20gJ2Zvcm1hdCc7XG5pbXBvcnQgTW9kYWwgZnJvbSAncmVhY3QtbW9kYWwnO1xuaW1wb3J0IHNob3BpZnlBUEkgZnJvbSAnc2hvcGlmeUFQSSc7XG5pbXBvcnQgTG9hZGVyIGZyb20gJ0xvYWRlcic7XG5cbmNsYXNzIFByb2R1Y3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbW9kYWxJc09wZW46IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5vcGVuTW9kYWwgPSB0aGlzLm9wZW5Nb2RhbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2xvc2VNb2RhbCA9IHRoaXMuY2xvc2VNb2RhbC5iaW5kKHRoaXMpO1xuXG4gICAgbGV0IGRpc3BhdGNoO1xuICAgIGxldCBwcm9kdWN0O1xuICB9XG5cbiAgY29tcG9uZW50V2lsbE1vdW50KCl7XG4gICAgdGhpcy5kaXNwYXRjaCA9IHRoaXMucHJvcHMuZGlzcGF0Y2g7XG5cbiAgICBzaG9waWZ5QVBJLmNsaWVudC5mZXRjaFByb2R1Y3QodGhpcy5wcm9wcy5wYXJhbXMucHJvZHVjdElkKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICBsZXQgcHJvZHVjdCA9IGRhdGEgfHwge307XG4gICAgICB0aGlzLnByb2R1Y3QgPSBwcm9kdWN0O1xuICAgICAgdGhpcy5kaXNwYXRjaChwcm9kdWN0QWN0aW9ucy5zZXRBY3RpdmVQcm9kdWN0KHByb2R1Y3Qub3B0aW9ucykpO1xuICAgIH0pO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKXtcbiAgICB0aGlzLmRpc3BhdGNoKHByb2R1Y3RBY3Rpb25zLmNsZWFyQWN0aXZlUHJvZHVjdCgpKTtcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bW9kYWxJc09wZW46IGZhbHNlfSk7XG4gIH1cblxuICBvcGVuTW9kYWwoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bW9kYWxJc09wZW46IHRydWV9KTtcbiAgfVxuXG4gIGhhbmRsZU9wdGlvbkNoYW5nZShvcHRpb25OYW1lLCB2YWx1ZSkge1xuICAgIC8vIHVwZGF0ZSBwcm9kdWN0IG9wdGlvbnMgaW4gdGhlIFNob3BpZnkgc2luZ2xldG9uXG4gICAgdGhpcy5wcm9kdWN0Lm9wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+IHtcbiAgICAgIHJldHVybiBvcHRpb24ubmFtZSA9PT0gb3B0aW9uTmFtZTtcbiAgICB9KVswXS5zZWxlY3RlZCA9IHZhbHVlO1xuXG4gICAgLy8gdXBkYXRlIHByb2R1Y3Qgb3B0aW9uc1xuICAgIHRoaXMuZGlzcGF0Y2gocHJvZHVjdEFjdGlvbnMudXBkYXRlQWN0aXZlUHJvZHVjdE9wdGlvbnModGhpcy5wcm9kdWN0Lm9wdGlvbnMpKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgYWN0aXZlUHJvZHVjdDtcbiAgICBhY3RpdmVQcm9kdWN0ID0gdGhpcy5wcm9kdWN0O1xuICAgIGlmIChhY3RpdmVQcm9kdWN0KSB7XG4gICAgICBsZXQge2Rpc3BhdGNofSA9IHRoaXMucHJvcHM7XG4gICAgICBsZXQge3Byb2R1Y3RfaWQsIHRpdGxlLCBpbWFnZXMsIG9wdGlvbnN9ID0gYWN0aXZlUHJvZHVjdC5hdHRycztcbiAgICAgIGxldCB7ZGVzY3JpcHRpb24sIHNlbGVjdGVkVmFyaWFudCwgc2VsZWN0ZWRWYXJpYW50SW1hZ2V9ID0gYWN0aXZlUHJvZHVjdDtcblxuICAgICAgbGV0IHJlbmRlck9wdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0LW9wdGlvbnNcIj5cbiAgICAgICAgICAgIHthY3RpdmVQcm9kdWN0Lm9wdGlvbnMubWFwKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChvcHRpb24ubmFtZSAhPSBcIlNpemVcIiAmJiBvcHRpb24ubmFtZSAhPSBcIlRpdGxlXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPHNlbGVjdCBrZXk9e2luZGV4fSBuYW1lPXtvcHRpb24ubmFtZX0gdmFsdWU9e29wdGlvbi5zZWxlY3RlZH0gb25DaGFuZ2U9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU9wdGlvbkNoYW5nZShvcHRpb24ubmFtZSwgZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgICAgICB7b3B0aW9uLnZhbHVlcy5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aW5kZXh9IHZhbHVlPXt2YWx1ZX0+e3ZhbHVlfTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGxldCByZW5kZXJTaXplcyA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBhY3RpdmVQcm9kdWN0Lm9wdGlvbnMubWFwKChvcHRpb24sIG9wdGlvbnNJbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5uYW1lID09IFwiU2l6ZVwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHVsIGtleT17b3B0aW9uc0luZGV4fSBjbGFzc05hbWU9XCJwcm9kdWN0LXNpemVzXCI+XG4gICAgICAgICAgICAgICAgICB7b3B0aW9uLnZhbHVlcy5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHByb2R1Y3Qtc2l6ZSAke29wdGlvbi5zZWxlY3RlZCA9PT0gdmFsdWUgPyAnc2VsZWN0ZWQnIDogJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVPcHRpb25DaGFuZ2Uob3B0aW9uLm5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3ZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvbGk+KTtcbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdhY3RpdmVQcm9kdWN0OiAnLCBhY3RpdmVQcm9kdWN0KTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBtZWRpdW0tOCBjb2x1bW5cIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXticm93c2VySGlzdG9yeS5nb0JhY2t9IGNsYXNzTmFtZT1cImJ1dHRvbiBob2xsb3dcIj4mbHNhcXVvOyBCYWNrIHRvIHByb2R1Y3RzPC9idXR0b24+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+PGltZyBzcmM9e3NlbGVjdGVkVmFyaWFudEltYWdlLnNyY30gYWx0PVwiXCIgLz48L3A+XG4gICAgICAgICAgICAgIHsvKiA8cD5DdXJyZW50IG9wdGlvbnM6PC9wPiAqL31cbiAgICAgICAgICAgICAgey8qIHtvcHRpb25zLm1hcChvcHRpb24gPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiA8cD57b3B0aW9uLm5hbWV9PC9wPlxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAge2ltYWdlcy5tYXAoaW1hZ2UgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiA8aW1nIGtleT17aW1hZ2UuaWR9IGhlaWdodD1cIjUwXCIgd2lkdGg9XCI1MFwiIHNyYz17aW1hZ2Uuc3JjfSBhbHQ9XCJcIiAvPlxuICAgICAgICAgICAgICB9KX0gKi99XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwtMTIgbWVkaXVtLTQgY29sdW1uXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJwcm9kdWN0LXRpdGxlXCI+e3RpdGxlfTwvaDE+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZHVjdC1pbmZvXCI+XG4gICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cInByb2R1Y3QtaW5mb19faGVhZGxpbmVcIj5BcnRpc3Q8L2g1PlxuICAgICAgICAgICAgICAgIDxwPkpXSVNIODg8L3A+XG5cbiAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwicHJvZHVjdC1pbmZvX19oZWFkbGluZVwiPkRlc2NyaXB0aW9uPC9oNT5cbiAgICAgICAgICAgICAgICA8ZGl2IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBkZXNjcmlwdGlvbn19PjwvZGl2PlxuXG4gICAgICAgICAgICAgICAge3JlbmRlck9wdGlvbnMoKX1cblxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3Qtc3R5bGVcIj5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiU2VsZWN0IHN0eWxlXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cInByb2R1Y3Qtc3R5bGVfX2J1dHRvblwiPjxpIGNsYXNzTmFtZT1cImZhIGZhLWNhcmV0LXJpZ2h0XCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cblxuICAgICAgICAgICAgICAgIHtyZW5kZXJTaXplcygpfVxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0LXByaWNlXCI+e0Zvcm1hdC5hc01vbmV5KHNlbGVjdGVkVmFyaWFudC5wcmljZSl9PC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3QtY2hhcml0eVwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJDaG9vc2UgQ2hhcml0eVwiIC8+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzc05hbWU9XCJwcm9kdWN0LWNoYXJpdHlfX2J1dHRvblwiPjxpIGNsYXNzTmFtZT1cImZhIGZhLWNhcmV0LXJpZ2h0XCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0LWNoYXJpdHlfX21vcmUtaW5mb1wiIG9uQ2xpY2s9e3RoaXMub3Blbk1vZGFsfT48aSBjbGFzc05hbWU9XCJmYSBmYS1pbmZvLWNpcmNsZVwiPjwvaT4gPGEgaHJlZj1cIiNcIj5tb3JlIGluZm88L2E+PC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgICAgICBpc09wZW49e3RoaXMuc3RhdGUubW9kYWxJc09wZW59XG4gICAgICAgICAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlPXt0aGlzLmNsb3NlTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRMYWJlbD1cIm1vcmUgaW5mb1wiXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlVGltZW91dE1TPXsyMDB9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIlJlYWN0TW9kYWxfX0NvbnRlbnRcIlxuICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgIDxwPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIFBlbGxlbnRlc3F1ZSBlZ2VzdGFzLCBuaWJoIHNlZCB0cmlzdGlxdWUgb3JuYXJlLCBudW5jIGR1aSBzb2xsaWNpdHVkaW4gZWxpdCwgaWQgY29uc2VjdGV0dXIgb2RpbyBsZWN0dXMgZXUgbnVsbGEuIFByb2luIGRhcGlidXMgY29udmFsbGlzIHVybmEgc2l0IGFtZXQgZGljdHVtLiBVdCBwb3J0dGl0b3IgbGlndWxhIGF0IHB1cnVzIGF1Y3RvciBtb2xlc3RpZS4gRXRpYW0gdmVsaXQgbmliaCwgcG9ydHRpdG9yIGF0IGlwc3VtIG1hdHRpcywgY29uc2VjdGV0dXIgZWdlc3RhcyBhcmN1LiBEb25lYyBwZWxsZW50ZXNxdWUgYXVndWUgc2l0IGFtZXQgZWxlbWVudHVtIGZhY2lsaXNpcy4gQWVuZWFuIHNlbXBlciBtYWxlc3VhZGEgbGlndWxhIGZhdWNpYnVzIHNvbGxpY2l0dWRpbi4gQ3VyYWJpdHVyIHV0IGxvcmVtIGFjIGVyYXQgcG9ydGEgbGFjaW5pYSBwdWx2aW5hciBldCByaXN1cy48L3A+XG4gICAgICAgICAgICAgICAgICAgICA8cD5TZWQgYXQgbnVsbGEgZG9sb3IuIFV0IHF1aXMgcXVhbSBmaW5pYnVzLCBlZmZpY2l0dXIgbWkgc2VkLCBzb2xsaWNpdHVkaW4gdXJuYS4gTnVuYyB2ZWwgdG9ydG9yIGNvbW1vZG8sIG1vbGxpcyBlc3QgZXUsIGJsYW5kaXQgbWFzc2EuIFZpdmFtdXMgc2VkIG1pIHZpdGFlIHNlbSBjb21tb2RvIGNvbnNlY3RldHVyIGV1IGluIHNlbS4gRG9uZWMgdXQgZmFjaWxpc2lzIG9kaW8uIE51bGxhbSBpZCBlbGVtZW50dW0gZXJvcywgbm9uIHRlbXB1cyB0b3J0b3IuIE51bGxhbSBpbiBtYXR0aXMgZmVsaXMuIFByYWVzZW50IGJpYmVuZHVtIGJsYW5kaXQgYW50ZSwgZXQgZWxlbWVudHVtIG1ldHVzIGNvbnNlY3RldHVyIHZpdGFlLjwvcD5cbiAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY2xvc2UtbW9kYWwtaWNvblwiIG9uQ2xpY2s9e3RoaXMuY2xvc2VNb2RhbH0+PGkgY2xhc3NOYW1lPVwiZmEgZmEtdGltZXNcIiAvPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGNhcnRBY3Rpb25zLnN0YXJ0QWRkb3JVcGRhdGVDYXJ0SXRlbShhY3RpdmVQcm9kdWN0LnNlbGVjdGVkVmFyaWFudCwgMSkpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbiBsYXJnZSBhZGQtdG8tY2FydFwiPkFkZCBUbyBDYXJ0PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvaW1hZ2VzL2NyZWRpdC1jYXJkcy5wbmdcIiBhbHQ9XCJBY2NlcHRlZCBjcmVkaXQgY2FyZHNcIiAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxMb2FkZXIgLz5cbiAgICAgIClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgKHN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZVByb2R1Y3Q6IHN0YXRlLnByb2R1Y3RzLmFjdGl2ZVxuICAgIH1cbiAgfVxuKShQcm9kdWN0KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL1Byb2R1Y3QuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TGlua30gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuY2xhc3MgUHJvZHVjdEl0ZW0gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICByZW5kZXIoKSB7XG4gICAgbGV0IHt0aXRsZSwgaWQsIGltYWdlfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0LWl0ZW1cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0LWl0ZW0taW5uZXJcIj5cbiAgICAgICAgICA8TGluayB0bz17YC9wcm9kdWN0LyR7aWR9YH0+PGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0LWl0ZW0taW1hZ2VcIiBzdHlsZT17e2JhY2tncm91bmRJbWFnZTogJ3VybCgnICsgaW1hZ2UgKyAnKSd9fT48L2Rpdj48L0xpbms+XG4gICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgPGg2IGNsYXNzTmFtZT1cInByb2R1Y3QtaXRlbS10aXRsZVwiPjxMaW5rIHRvPXtgL3Byb2R1Y3QvJHtpZH1gfT57dGl0bGV9PC9MaW5rPjwvaDY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdXRob3JcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXV0aG9yX19waG90b1wiIHN0eWxlPXt7YmFja2dyb3VuZEltYWdlOiAndXJsKCcgKyBpbWFnZSArICcpJ319PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdXRob3JfX2luZm9cIj5cbiAgICAgICAgICAgICAgPExpbmsgdG8gPXtgL2F1dGhvci9gfT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF1dGhvcl9fbmFtZVwiPkphbWVzODg8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF1dGhvcl9fbG9jYXRpb25cIj5DYW50b24gT2hpbzwvZGl2PlxuICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7LyogPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLnByb3BzLmFkZFRvQ2FydH0gY2xhc3NOYW1lPVwiYnRuXCI+QWRkIFRvIENhcnQ8L2J1dHRvbj4gKi99XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvZHVjdEl0ZW07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9Qcm9kdWN0SXRlbS5qc3giLCJ2YXIgY2FtZWwyaHlwaGVuID0gcmVxdWlyZSgnc3RyaW5nLWNvbnZlcnQvY2FtZWwyaHlwaGVuJyk7XG5cbnZhciBpc0RpbWVuc2lvbiA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciByZSA9IC9baGVpZ2h0fHdpZHRoXSQvO1xuICByZXR1cm4gcmUudGVzdChmZWF0dXJlKTtcbn07XG5cbnZhciBvYmoybXEgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBtcSA9ICcnO1xuICB2YXIgZmVhdHVyZXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlLCBpbmRleCkge1xuICAgIHZhciB2YWx1ZSA9IG9ialtmZWF0dXJlXTtcbiAgICBmZWF0dXJlID0gY2FtZWwyaHlwaGVuKGZlYXR1cmUpO1xuICAgIC8vIEFkZCBweCB0byBkaW1lbnNpb24gZmVhdHVyZXNcbiAgICBpZiAoaXNEaW1lbnNpb24oZmVhdHVyZSkgJiYgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgdmFsdWUgPSB2YWx1ZSArICdweCc7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgbXEgKz0gZmVhdHVyZTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgbXEgKz0gJ25vdCAnICsgZmVhdHVyZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbXEgKz0gJygnICsgZmVhdHVyZSArICc6ICcgKyB2YWx1ZSArICcpJztcbiAgICB9XG4gICAgaWYgKGluZGV4IDwgZmVhdHVyZXMubGVuZ3RoLTEpIHtcbiAgICAgIG1xICs9ICcgYW5kICdcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbXE7XG59O1xuXG52YXIganNvbjJtcSA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICB2YXIgbXEgPSAnJztcbiAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcXVlcnk7XG4gIH1cbiAgLy8gSGFuZGxpbmcgYXJyYXkgb2YgbWVkaWEgcXVlcmllc1xuICBpZiAocXVlcnkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHF1ZXJ5LmZvckVhY2goZnVuY3Rpb24gKHEsIGluZGV4KSB7XG4gICAgICBtcSArPSBvYmoybXEocSk7XG4gICAgICBpZiAoaW5kZXggPCBxdWVyeS5sZW5ndGgtMSkge1xuICAgICAgICBtcSArPSAnLCAnXG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1xO1xuICB9XG4gIC8vIEhhbmRsaW5nIHNpbmdsZSBtZWRpYSBxdWVyeVxuICByZXR1cm4gb2JqMm1xKHF1ZXJ5KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ganNvbjJtcTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vanNvbjJtcS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbnZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxcZCopJC87XG5cbi8qKlxuICogQSBmYXN0ZXIgYWx0ZXJuYXRpdmUgdG8gYEZ1bmN0aW9uI2FwcGx5YCwgdGhpcyBmdW5jdGlvbiBpbnZva2VzIGBmdW5jYFxuICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCB0aGUgYXJndW1lbnRzIG9mIGBhcmdzYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5KGZ1bmMsIHRoaXNBcmcsIGFyZ3MpIHtcbiAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnKTtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSk7XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgfVxuICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzXG4gKiBvciBtYXggYXJyYXkgbGVuZ3RoIGNoZWNrcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG4pO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShpbmRleCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7XG4gIH07XG59XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlS2V5cyA9IG92ZXJBcmcoT2JqZWN0LmtleXMsIE9iamVjdCksXG4gICAgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKiBEZXRlY3QgaWYgcHJvcGVydGllcyBzaGFkb3dpbmcgdGhvc2Ugb24gYE9iamVjdC5wcm90b3R5cGVgIGFyZSBub24tZW51bWVyYWJsZS4gKi9cbnZhciBub25FbnVtU2hhZG93cyA9ICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHsgJ3ZhbHVlT2YnOiAxIH0sICd2YWx1ZU9mJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiB0aGUgYXJyYXktbGlrZSBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5oZXJpdGVkIFNwZWNpZnkgcmV0dXJuaW5nIGluaGVyaXRlZCBwcm9wZXJ0eSBuYW1lcy5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGFycmF5TGlrZUtleXModmFsdWUsIGluaGVyaXRlZCkge1xuICAvLyBTYWZhcmkgOC4xIG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICAvLyBTYWZhcmkgOSBtYWtlcyBgYXJndW1lbnRzLmxlbmd0aGAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cbiAgdmFyIHJlc3VsdCA9IChpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpXG4gICAgPyBiYXNlVGltZXModmFsdWUubGVuZ3RoLCBTdHJpbmcpXG4gICAgOiBbXTtcblxuICB2YXIgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aCxcbiAgICAgIHNraXBJbmRleGVzID0gISFsZW5ndGg7XG5cbiAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYgKChpbmhlcml0ZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwga2V5KSkgJiZcbiAgICAgICAgIShza2lwSW5kZXhlcyAmJiAoa2V5ID09ICdsZW5ndGgnIHx8IGlzSW5kZXgoa2V5LCBsZW5ndGgpKSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQXNzaWducyBgdmFsdWVgIHRvIGBrZXlgIG9mIGBvYmplY3RgIGlmIHRoZSBleGlzdGluZyB2YWx1ZSBpcyBub3QgZXF1aXZhbGVudFxuICogdXNpbmcgW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gYXNzaWduLlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gYXNzaWduLlxuICovXG5mdW5jdGlvbiBhc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV07XG4gIGlmICghKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmIGVxKG9ialZhbHVlLCB2YWx1ZSkpIHx8XG4gICAgICAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSkge1xuICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzYCB3aGljaCBkb2Vzbid0IHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuICBpZiAoIWlzUHJvdG90eXBlKG9iamVjdCkpIHtcbiAgICByZXR1cm4gbmF0aXZlS2V5cyhvYmplY3QpO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIE9iamVjdChvYmplY3QpKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmIGtleSAhPSAnY29uc3RydWN0b3InKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnJlc3RgIHdoaWNoIGRvZXNuJ3QgdmFsaWRhdGUgb3IgY29lcmNlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUmVzdChmdW5jLCBzdGFydCkge1xuICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiBzdGFydCwgMCk7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gc3RhcnQsIDApLFxuICAgICAgICBhcnJheSA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgYXJyYXlbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcbiAgICB9XG4gICAgaW5kZXggPSAtMTtcbiAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcbiAgICB3aGlsZSAoKytpbmRleCA8IHN0YXJ0KSB7XG4gICAgICBvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07XG4gICAgfVxuICAgIG90aGVyQXJnc1tzdGFydF0gPSBhcnJheTtcbiAgICByZXR1cm4gYXBwbHkoZnVuYywgdGhpcywgb3RoZXJBcmdzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgcHJvcGVydGllcyBvZiBgc291cmNlYCB0byBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxuICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IGlkZW50aWZpZXJzIHRvIGNvcHkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdD17fV0gVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgdG8uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb3BpZWQgdmFsdWVzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gY29weU9iamVjdChzb3VyY2UsIHByb3BzLCBvYmplY3QsIGN1c3RvbWl6ZXIpIHtcbiAgb2JqZWN0IHx8IChvYmplY3QgPSB7fSk7XG5cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuXG4gICAgdmFyIG5ld1ZhbHVlID0gY3VzdG9taXplclxuICAgICAgPyBjdXN0b21pemVyKG9iamVjdFtrZXldLCBzb3VyY2Vba2V5XSwga2V5LCBvYmplY3QsIHNvdXJjZSlcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgYXNzaWduVmFsdWUob2JqZWN0LCBrZXksIG5ld1ZhbHVlID09PSB1bmRlZmluZWQgPyBzb3VyY2Vba2V5XSA6IG5ld1ZhbHVlKTtcbiAgfVxuICByZXR1cm4gb2JqZWN0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiBsaWtlIGBfLmFzc2lnbmAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGFzc2lnbmVyIFRoZSBmdW5jdGlvbiB0byBhc3NpZ24gdmFsdWVzLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYXNzaWduZXIgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUFzc2lnbmVyKGFzc2lnbmVyKSB7XG4gIHJldHVybiBiYXNlUmVzdChmdW5jdGlvbihvYmplY3QsIHNvdXJjZXMpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gc291cmNlcy5sZW5ndGgsXG4gICAgICAgIGN1c3RvbWl6ZXIgPSBsZW5ndGggPiAxID8gc291cmNlc1tsZW5ndGggLSAxXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZ3VhcmQgPSBsZW5ndGggPiAyID8gc291cmNlc1syXSA6IHVuZGVmaW5lZDtcblxuICAgIGN1c3RvbWl6ZXIgPSAoYXNzaWduZXIubGVuZ3RoID4gMyAmJiB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nKVxuICAgICAgPyAobGVuZ3RoLS0sIGN1c3RvbWl6ZXIpXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChzb3VyY2VzWzBdLCBzb3VyY2VzWzFdLCBndWFyZCkpIHtcbiAgICAgIGN1c3RvbWl6ZXIgPSBsZW5ndGggPCAzID8gdW5kZWZpbmVkIDogY3VzdG9taXplcjtcbiAgICAgIGxlbmd0aCA9IDE7XG4gICAgfVxuICAgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgc291cmNlID0gc291cmNlc1tpbmRleF07XG4gICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIGFzc2lnbmVyKG9iamVjdCwgc291cmNlLCBpbmRleCwgY3VzdG9taXplcik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH0pO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmXG4gICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSB2YWx1ZSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7Kn0gaW5kZXggVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBpbmRleCBvciBrZXkgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIG9iamVjdCBhcmd1bWVudC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgaW5kZXgsIG9iamVjdCkge1xuICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHR5cGUgPSB0eXBlb2YgaW5kZXg7XG4gIGlmICh0eXBlID09ICdudW1iZXInXG4gICAgICAgID8gKGlzQXJyYXlMaWtlKG9iamVjdCkgJiYgaXNJbmRleChpbmRleCwgb2JqZWN0Lmxlbmd0aCkpXG4gICAgICAgIDogKHR5cGUgPT0gJ3N0cmluZycgJiYgaW5kZXggaW4gb2JqZWN0KVxuICAgICAgKSB7XG4gICAgcmV0dXJuIGVxKG9iamVjdFtpbmRleF0sIHZhbHVlKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3RvdHlwZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkge1xuICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLFxuICAgICAgcHJvdG8gPSAodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSkgfHwgb2JqZWN0UHJvdG87XG5cbiAgcmV0dXJuIHZhbHVlID09PSBwcm90bztcbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBhXG4gKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICpcbiAqIF8uZXEob2JqZWN0LCBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoJ2EnLCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEoJ2EnLCBPYmplY3QoJ2EnKSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoTmFOLCBOYU4pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG4gIC8vIFNhZmFyaSA4LjEgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG4gIHJldHVybiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG4gICAgKCFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgfHwgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc1RhZyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3NcbiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3JcbiAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgXG4gKiBpcyBhbiBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNGdW5jdGlvbihfKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gU2FmYXJpIDgtOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBhbmQgb3RoZXIgY29uc3RydWN0b3JzLlxuICB2YXIgdGFnID0gaXNPYmplY3QodmFsdWUpID8gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTGVuZ3RoKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKCczJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmXG4gICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQXNzaWducyBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0cyB0byB0aGVcbiAqIGRlc3RpbmF0aW9uIG9iamVjdC4gU291cmNlIG9iamVjdHMgYXJlIGFwcGxpZWQgZnJvbSBsZWZ0IHRvIHJpZ2h0LlxuICogU3Vic2VxdWVudCBzb3VyY2VzIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyBzb3VyY2VzLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgIGFuZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYE9iamVjdC5hc3NpZ25gXShodHRwczovL21kbi5pby9PYmplY3QvYXNzaWduKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMTAuMFxuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICogQHNlZSBfLmFzc2lnbkluXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqIH1cbiAqXG4gKiBmdW5jdGlvbiBCYXIoKSB7XG4gKiAgIHRoaXMuYyA9IDM7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5iID0gMjtcbiAqIEJhci5wcm90b3R5cGUuZCA9IDQ7XG4gKlxuICogXy5hc3NpZ24oeyAnYSc6IDAgfSwgbmV3IEZvbywgbmV3IEJhcik7XG4gKiAvLyA9PiB7ICdhJzogMSwgJ2MnOiAzIH1cbiAqL1xudmFyIGFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKGZ1bmN0aW9uKG9iamVjdCwgc291cmNlKSB7XG4gIGlmIChub25FbnVtU2hhZG93cyB8fCBpc1Byb3RvdHlwZShzb3VyY2UpIHx8IGlzQXJyYXlMaWtlKHNvdXJjZSkpIHtcbiAgICBjb3B5T2JqZWN0KHNvdXJjZSwga2V5cyhzb3VyY2UpLCBvYmplY3QpO1xuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICBhc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgc291cmNlW2tleV0pO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcbiAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3Qua2V5cylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8ua2V5cygnaGknKTtcbiAqIC8vID0+IFsnMCcsICcxJ11cbiAqL1xuZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcbiAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iamVjdCkgPyBhcnJheUxpa2VLZXlzKG9iamVjdCkgOiBiYXNlS2V5cyhvYmplY3QpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc2lnbjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9sb2Rhc2guYXNzaWduL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA5NVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJmdW5jdGlvbiB3YXJuKHMpIHtcbiAgY29uc29sZS53YXJuKCdbcmVhY3QtZ2FdJywgcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2FybjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvY29uc29sZS93YXJuLmpzXG4vLyBtb2R1bGUgaWQgPSAxMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiLy8gR0Egc3RyaW5ncyBuZWVkIHRvIGhhdmUgbGVhZGluZy90cmFpbGluZyB3aGl0ZXNwYWNlIHRyaW1tZWQsIGFuZCBub3QgYWxsXG4vLyBicm93c2VycyBoYXZlIFN0cmluZy5wcm90b3RveXBlLnRyaW0oKS5cblxuZnVuY3Rpb24gdHJpbShzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmltO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWdhL3NyYy91dGlscy90cmltLmpzXG4vLyBtb2R1bGUgaWQgPSAxMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiLyohXG4gKiBBZGFwdGVkIGZyb20galF1ZXJ5IFVJIGNvcmVcbiAqXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NhdGVnb3J5L3VpLWNvcmUvXG4gKi9cblxuZnVuY3Rpb24gZm9jdXNhYmxlKGVsZW1lbnQsIGlzVGFiSW5kZXhOb3ROYU4pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChub2RlTmFtZSkgP1xuICAgICFlbGVtZW50LmRpc2FibGVkIDpcbiAgICBcImFcIiA9PT0gbm9kZU5hbWUgP1xuICAgICAgZWxlbWVudC5ocmVmIHx8IGlzVGFiSW5kZXhOb3ROYU4gOlxuICAgICAgaXNUYWJJbmRleE5vdE5hTikgJiYgdmlzaWJsZShlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gaGlkZGVuKGVsKSB7XG4gIHJldHVybiAoZWwub2Zmc2V0V2lkdGggPD0gMCAmJiBlbC5vZmZzZXRIZWlnaHQgPD0gMCkgfHxcbiAgICBlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZSc7XG59XG5cbmZ1bmN0aW9uIHZpc2libGUoZWxlbWVudCkge1xuICB3aGlsZSAoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KSBicmVhaztcbiAgICBpZiAoaGlkZGVuKGVsZW1lbnQpKSByZXR1cm4gZmFsc2U7XG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gdGFiYmFibGUoZWxlbWVudCkge1xuICB2YXIgdGFiSW5kZXggPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgaWYgKHRhYkluZGV4ID09PSBudWxsKSB0YWJJbmRleCA9IHVuZGVmaW5lZDtcbiAgdmFyIGlzVGFiSW5kZXhOYU4gPSBpc05hTih0YWJJbmRleCk7XG4gIHJldHVybiAoaXNUYWJJbmRleE5hTiB8fCB0YWJJbmRleCA+PSAwKSAmJiBmb2N1c2FibGUoZWxlbWVudCwgIWlzVGFiSW5kZXhOYU4pO1xufVxuXG5mdW5jdGlvbiBmaW5kVGFiYmFibGVEZXNjZW5kYW50cyhlbGVtZW50KSB7XG4gIHJldHVybiBbXS5zbGljZS5jYWxsKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpLCAwKS5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICByZXR1cm4gdGFiYmFibGUoZWwpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaW5kVGFiYmFibGVEZXNjZW5kYW50cztcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL3RhYmJhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gICAgY2xhc3NOYW1lOiAnJyxcbiAgICBhY2Nlc3NpYmlsaXR5OiB0cnVlLFxuICAgIGFkYXB0aXZlSGVpZ2h0OiBmYWxzZSxcbiAgICBhcnJvd3M6IHRydWUsXG4gICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgIGF1dG9wbGF5U3BlZWQ6IDMwMDAsXG4gICAgY2VudGVyTW9kZTogZmFsc2UsXG4gICAgY2VudGVyUGFkZGluZzogJzUwcHgnLFxuICAgIGNzc0Vhc2U6ICdlYXNlJyxcbiAgICBjdXN0b21QYWdpbmc6IGZ1bmN0aW9uIGN1c3RvbVBhZ2luZyhpKSB7XG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGkgKyAxXG4gICAgICAgICk7XG4gICAgfSxcbiAgICBkb3RzOiBmYWxzZSxcbiAgICBkb3RzQ2xhc3M6ICdzbGljay1kb3RzJyxcbiAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICBlZGdlRnJpY3Rpb246IDAuMzUsXG4gICAgZmFkZTogZmFsc2UsXG4gICAgZm9jdXNPblNlbGVjdDogZmFsc2UsXG4gICAgaW5maW5pdGU6IHRydWUsXG4gICAgaW5pdGlhbFNsaWRlOiAwLFxuICAgIGxhenlMb2FkOiBmYWxzZSxcbiAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgcmVzcG9uc2l2ZTogbnVsbCxcbiAgICBydGw6IGZhbHNlLFxuICAgIHNsaWRlOiAnZGl2JyxcbiAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgc3BlZWQ6IDUwMCxcbiAgICBzd2lwZTogdHJ1ZSxcbiAgICBzd2lwZVRvU2xpZGU6IGZhbHNlLFxuICAgIHRvdWNoTW92ZTogdHJ1ZSxcbiAgICB0b3VjaFRocmVzaG9sZDogNSxcbiAgICB1c2VDU1M6IHRydWUsXG4gICAgdmFyaWFibGVXaWR0aDogZmFsc2UsXG4gICAgdmVydGljYWw6IGZhbHNlLFxuICAgIHdhaXRGb3JBbmltYXRlOiB0cnVlLFxuICAgIGFmdGVyQ2hhbmdlOiBudWxsLFxuICAgIGJlZm9yZUNoYW5nZTogbnVsbCxcbiAgICBlZGdlRXZlbnQ6IG51bGwsXG4gICAgaW5pdDogbnVsbCxcbiAgICBzd2lwZUV2ZW50OiBudWxsLFxuICAgIC8vIG5leHRBcnJvdywgcHJldkFycm93IGFyZSByZWFjdCBjb21wb25ldHNcbiAgICBuZXh0QXJyb3c6IG51bGwsXG4gICAgcHJldkFycm93OiBudWxsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRQcm9wcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL2RlZmF1bHQtcHJvcHMuanNcbi8vIG1vZHVsZSBpZCA9IDEzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmdldFRyYWNrTGVmdCA9IGV4cG9ydHMuZ2V0VHJhY2tBbmltYXRlQ1NTID0gZXhwb3J0cy5nZXRUcmFja0NTUyA9IHVuZGVmaW5lZDtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBjaGVja1NwZWNLZXlzID0gZnVuY3Rpb24gY2hlY2tTcGVjS2V5cyhzcGVjLCBrZXlzQXJyYXkpIHtcbiAgcmV0dXJuIGtleXNBcnJheS5yZWR1Y2UoZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgc3BlYy5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICB9LCB0cnVlKSA/IG51bGwgOiBjb25zb2xlLmVycm9yKCdLZXlzIE1pc3NpbmcnLCBzcGVjKTtcbn07XG5cbnZhciBnZXRUcmFja0NTUyA9IGV4cG9ydHMuZ2V0VHJhY2tDU1MgPSBmdW5jdGlvbiBnZXRUcmFja0NTUyhzcGVjKSB7XG4gIGNoZWNrU3BlY0tleXMoc3BlYywgWydsZWZ0JywgJ3ZhcmlhYmxlV2lkdGgnLCAnc2xpZGVDb3VudCcsICdzbGlkZXNUb1Nob3cnLCAnc2xpZGVXaWR0aCddKTtcblxuICB2YXIgdHJhY2tXaWR0aCwgdHJhY2tIZWlnaHQ7XG5cbiAgdmFyIHRyYWNrQ2hpbGRyZW4gPSBzcGVjLnNsaWRlQ291bnQgKyAyICogc3BlYy5zbGlkZXNUb1Nob3c7XG5cbiAgaWYgKCFzcGVjLnZlcnRpY2FsKSB7XG4gICAgaWYgKHNwZWMudmFyaWFibGVXaWR0aCkge1xuICAgICAgdHJhY2tXaWR0aCA9IChzcGVjLnNsaWRlQ291bnQgKyAyICogc3BlYy5zbGlkZXNUb1Nob3cpICogc3BlYy5zbGlkZVdpZHRoO1xuICAgIH0gZWxzZSBpZiAoc3BlYy5jZW50ZXJNb2RlKSB7XG4gICAgICB0cmFja1dpZHRoID0gKHNwZWMuc2xpZGVDb3VudCArIDIgKiAoc3BlYy5zbGlkZXNUb1Nob3cgKyAxKSkgKiBzcGVjLnNsaWRlV2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYWNrV2lkdGggPSAoc3BlYy5zbGlkZUNvdW50ICsgMiAqIHNwZWMuc2xpZGVzVG9TaG93KSAqIHNwZWMuc2xpZGVXaWR0aDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdHJhY2tIZWlnaHQgPSB0cmFja0NoaWxkcmVuICogc3BlYy5zbGlkZUhlaWdodDtcbiAgfVxuXG4gIHZhciBzdHlsZSA9IHtcbiAgICBvcGFjaXR5OiAxLFxuICAgIFdlYmtpdFRyYW5zZm9ybTogIXNwZWMudmVydGljYWwgPyAndHJhbnNsYXRlM2QoJyArIHNwZWMubGVmdCArICdweCwgMHB4LCAwcHgpJyA6ICd0cmFuc2xhdGUzZCgwcHgsICcgKyBzcGVjLmxlZnQgKyAncHgsIDBweCknLFxuICAgIHRyYW5zZm9ybTogIXNwZWMudmVydGljYWwgPyAndHJhbnNsYXRlM2QoJyArIHNwZWMubGVmdCArICdweCwgMHB4LCAwcHgpJyA6ICd0cmFuc2xhdGUzZCgwcHgsICcgKyBzcGVjLmxlZnQgKyAncHgsIDBweCknLFxuICAgIHRyYW5zaXRpb246ICcnLFxuICAgIFdlYmtpdFRyYW5zaXRpb246ICcnLFxuICAgIG1zVHJhbnNmb3JtOiAhc3BlYy52ZXJ0aWNhbCA/ICd0cmFuc2xhdGVYKCcgKyBzcGVjLmxlZnQgKyAncHgpJyA6ICd0cmFuc2xhdGVZKCcgKyBzcGVjLmxlZnQgKyAncHgpJ1xuICB9O1xuXG4gIGlmICh0cmFja1dpZHRoKSB7XG4gICAgKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHN0eWxlLCB7IHdpZHRoOiB0cmFja1dpZHRoIH0pO1xuICB9XG5cbiAgaWYgKHRyYWNrSGVpZ2h0KSB7XG4gICAgKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHN0eWxlLCB7IGhlaWdodDogdHJhY2tIZWlnaHQgfSk7XG4gIH1cblxuICAvLyBGYWxsYmFjayBmb3IgSUU4XG4gIGlmICh3aW5kb3cgJiYgIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHdpbmRvdy5hdHRhY2hFdmVudCkge1xuICAgIGlmICghc3BlYy52ZXJ0aWNhbCkge1xuICAgICAgc3R5bGUubWFyZ2luTGVmdCA9IHNwZWMubGVmdCArICdweCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLm1hcmdpblRvcCA9IHNwZWMubGVmdCArICdweCc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufTtcblxudmFyIGdldFRyYWNrQW5pbWF0ZUNTUyA9IGV4cG9ydHMuZ2V0VHJhY2tBbmltYXRlQ1NTID0gZnVuY3Rpb24gZ2V0VHJhY2tBbmltYXRlQ1NTKHNwZWMpIHtcbiAgY2hlY2tTcGVjS2V5cyhzcGVjLCBbJ2xlZnQnLCAndmFyaWFibGVXaWR0aCcsICdzbGlkZUNvdW50JywgJ3NsaWRlc1RvU2hvdycsICdzbGlkZVdpZHRoJywgJ3NwZWVkJywgJ2Nzc0Vhc2UnXSk7XG5cbiAgdmFyIHN0eWxlID0gZ2V0VHJhY2tDU1Moc3BlYyk7XG4gIC8vIHVzZUNTUyBpcyB0cnVlIGJ5IGRlZmF1bHQgc28gaXQgY2FuIGJlIHVuZGVmaW5lZFxuICBzdHlsZS5XZWJraXRUcmFuc2l0aW9uID0gJy13ZWJraXQtdHJhbnNmb3JtICcgKyBzcGVjLnNwZWVkICsgJ21zICcgKyBzcGVjLmNzc0Vhc2U7XG4gIHN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtICcgKyBzcGVjLnNwZWVkICsgJ21zICcgKyBzcGVjLmNzc0Vhc2U7XG4gIHJldHVybiBzdHlsZTtcbn07XG5cbnZhciBnZXRUcmFja0xlZnQgPSBleHBvcnRzLmdldFRyYWNrTGVmdCA9IGZ1bmN0aW9uIGdldFRyYWNrTGVmdChzcGVjKSB7XG5cbiAgY2hlY2tTcGVjS2V5cyhzcGVjLCBbJ3NsaWRlSW5kZXgnLCAndHJhY2tSZWYnLCAnaW5maW5pdGUnLCAnY2VudGVyTW9kZScsICdzbGlkZUNvdW50JywgJ3NsaWRlc1RvU2hvdycsICdzbGlkZXNUb1Njcm9sbCcsICdzbGlkZVdpZHRoJywgJ2xpc3RXaWR0aCcsICd2YXJpYWJsZVdpZHRoJywgJ3NsaWRlSGVpZ2h0J10pO1xuXG4gIHZhciBzbGlkZU9mZnNldCA9IDA7XG4gIHZhciB0YXJnZXRMZWZ0O1xuICB2YXIgdGFyZ2V0U2xpZGU7XG4gIHZhciB2ZXJ0aWNhbE9mZnNldCA9IDA7XG5cbiAgaWYgKHNwZWMuZmFkZSkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgaWYgKHNwZWMuaW5maW5pdGUpIHtcbiAgICBpZiAoc3BlYy5zbGlkZUNvdW50ID49IHNwZWMuc2xpZGVzVG9TaG93KSB7XG4gICAgICBzbGlkZU9mZnNldCA9IHNwZWMuc2xpZGVXaWR0aCAqIHNwZWMuc2xpZGVzVG9TaG93ICogLTE7XG4gICAgICB2ZXJ0aWNhbE9mZnNldCA9IHNwZWMuc2xpZGVIZWlnaHQgKiBzcGVjLnNsaWRlc1RvU2hvdyAqIC0xO1xuICAgIH1cbiAgICBpZiAoc3BlYy5zbGlkZUNvdW50ICUgc3BlYy5zbGlkZXNUb1Njcm9sbCAhPT0gMCkge1xuICAgICAgaWYgKHNwZWMuc2xpZGVJbmRleCArIHNwZWMuc2xpZGVzVG9TY3JvbGwgPiBzcGVjLnNsaWRlQ291bnQgJiYgc3BlYy5zbGlkZUNvdW50ID4gc3BlYy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgaWYgKHNwZWMuc2xpZGVJbmRleCA+IHNwZWMuc2xpZGVDb3VudCkge1xuICAgICAgICAgIHNsaWRlT2Zmc2V0ID0gKHNwZWMuc2xpZGVzVG9TaG93IC0gKHNwZWMuc2xpZGVJbmRleCAtIHNwZWMuc2xpZGVDb3VudCkpICogc3BlYy5zbGlkZVdpZHRoICogLTE7XG4gICAgICAgICAgdmVydGljYWxPZmZzZXQgPSAoc3BlYy5zbGlkZXNUb1Nob3cgLSAoc3BlYy5zbGlkZUluZGV4IC0gc3BlYy5zbGlkZUNvdW50KSkgKiBzcGVjLnNsaWRlSGVpZ2h0ICogLTE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2xpZGVPZmZzZXQgPSBzcGVjLnNsaWRlQ291bnQgJSBzcGVjLnNsaWRlc1RvU2Nyb2xsICogc3BlYy5zbGlkZVdpZHRoICogLTE7XG4gICAgICAgICAgdmVydGljYWxPZmZzZXQgPSBzcGVjLnNsaWRlQ291bnQgJSBzcGVjLnNsaWRlc1RvU2Nyb2xsICogc3BlYy5zbGlkZUhlaWdodCAqIC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuXG4gICAgaWYgKHNwZWMuc2xpZGVDb3VudCAlIHNwZWMuc2xpZGVzVG9TY3JvbGwgIT09IDApIHtcbiAgICAgIGlmIChzcGVjLnNsaWRlSW5kZXggKyBzcGVjLnNsaWRlc1RvU2Nyb2xsID4gc3BlYy5zbGlkZUNvdW50ICYmIHNwZWMuc2xpZGVDb3VudCA+IHNwZWMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgIHZhciBzbGlkZXNUb09mZnNldCA9IHNwZWMuc2xpZGVzVG9TaG93IC0gc3BlYy5zbGlkZUNvdW50ICUgc3BlYy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgICAgc2xpZGVPZmZzZXQgPSBzbGlkZXNUb09mZnNldCAqIHNwZWMuc2xpZGVXaWR0aDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc3BlYy5jZW50ZXJNb2RlKSB7XG4gICAgaWYgKHNwZWMuaW5maW5pdGUpIHtcbiAgICAgIHNsaWRlT2Zmc2V0ICs9IHNwZWMuc2xpZGVXaWR0aCAqIE1hdGguZmxvb3Ioc3BlYy5zbGlkZXNUb1Nob3cgLyAyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVPZmZzZXQgPSBzcGVjLnNsaWRlV2lkdGggKiBNYXRoLmZsb29yKHNwZWMuc2xpZGVzVG9TaG93IC8gMik7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFzcGVjLnZlcnRpY2FsKSB7XG4gICAgdGFyZ2V0TGVmdCA9IHNwZWMuc2xpZGVJbmRleCAqIHNwZWMuc2xpZGVXaWR0aCAqIC0xICsgc2xpZGVPZmZzZXQ7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0TGVmdCA9IHNwZWMuc2xpZGVJbmRleCAqIHNwZWMuc2xpZGVIZWlnaHQgKiAtMSArIHZlcnRpY2FsT2Zmc2V0O1xuICB9XG5cbiAgaWYgKHNwZWMudmFyaWFibGVXaWR0aCA9PT0gdHJ1ZSkge1xuICAgIHZhciB0YXJnZXRTbGlkZUluZGV4O1xuICAgIGlmIChzcGVjLnNsaWRlQ291bnQgPD0gc3BlYy5zbGlkZXNUb1Nob3cgfHwgc3BlYy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHRhcmdldFNsaWRlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHNwZWMudHJhY2tSZWYpLmNoaWxkTm9kZXNbc3BlYy5zbGlkZUluZGV4XTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0U2xpZGVJbmRleCA9IHNwZWMuc2xpZGVJbmRleCArIHNwZWMuc2xpZGVzVG9TaG93O1xuICAgICAgdGFyZ2V0U2xpZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoc3BlYy50cmFja1JlZikuY2hpbGROb2Rlc1t0YXJnZXRTbGlkZUluZGV4XTtcbiAgICB9XG4gICAgdGFyZ2V0TGVmdCA9IHRhcmdldFNsaWRlID8gdGFyZ2V0U2xpZGUub2Zmc2V0TGVmdCAqIC0xIDogMDtcbiAgICBpZiAoc3BlYy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG4gICAgICBpZiAoc3BlYy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoc3BlYy50cmFja1JlZikuY2hpbGRyZW5bc3BlYy5zbGlkZUluZGV4XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFNsaWRlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHNwZWMudHJhY2tSZWYpLmNoaWxkcmVuW3NwZWMuc2xpZGVJbmRleCArIHNwZWMuc2xpZGVzVG9TaG93ICsgMV07XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXRTbGlkZSkge1xuICAgICAgICB0YXJnZXRMZWZ0ID0gdGFyZ2V0U2xpZGUub2Zmc2V0TGVmdCAqIC0xICsgKHNwZWMubGlzdFdpZHRoIC0gdGFyZ2V0U2xpZGUub2Zmc2V0V2lkdGgpIC8gMjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0TGVmdDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXNsaWNrL2xpYi9taXhpbnMvdHJhY2tIZWxwZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtSb3V0ZSwgUm91dGVyLCBJbmRleFJvdXRlLCBicm93c2VySGlzdG9yeX0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmxldCB7Y29ubmVjdH0gPSByZXF1aXJlKCdyZWFjdC1yZWR1eCcpO1xubGV0IHN0b3JlID0gcmVxdWlyZSgnY29uZmlndXJlU3RvcmUnKS5jb25maWd1cmUoKTtcblxuaW1wb3J0IERvY3VtZW50TWV0YSBmcm9tICdyZWFjdC1kb2N1bWVudC1tZXRhJztcbmltcG9ydCBNYWluIGZyb20gJ01haW4nO1xuaW1wb3J0IEluZGV4IGZyb20gJ0luZGV4JztcbmltcG9ydCBQcm9kdWN0cyBmcm9tICdQcm9kdWN0cyc7XG5pbXBvcnQgUHJvZHVjdCBmcm9tICdQcm9kdWN0JztcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tICdDb2xsZWN0aW9ucyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICdDb2xsZWN0aW9uJztcbmltcG9ydCBVcGxvYWQgZnJvbSAnVXBsb2FkJztcbmltcG9ydCBPcmRlclN0YXR1cyBmcm9tICdPcmRlclN0YXR1cyc7XG5pbXBvcnQgTWFwIGZyb20gJ01hcCc7XG5pbXBvcnQgTG9naW4gZnJvbSAnTG9naW4nO1xuaW1wb3J0IEFib3V0IGZyb20gJ0Fib3V0JztcbmltcG9ydCBDb250YWN0IGZyb20gJ0NvbnRhY3QnO1xuXG5pbXBvcnQgUmVhY3RHQSBmcm9tICdyZWFjdC1nYSc7XG4vLyBSZWFjdEdBLmluaXRpYWxpemUoJ1VBLTYyNDE4MjUtOScpOyAvLyBpbml0aWFsaXplIEdvb2dsZSBBbmFseXRpY3NcblxuZnVuY3Rpb24gbG9nUGFnZVZpZXcobG9jYXRpb24pIHtcbiAgUmVhY3RHQS5zZXQoeyBwYWdlOiBsb2NhdGlvbi5wYXRobmFtZSB9KTtcbiAgUmVhY3RHQS5wYWdldmlldyhsb2NhdGlvbi5wYXRobmFtZSk7XG59XG5cbmJyb3dzZXJIaXN0b3J5Lmxpc3RlbigobG9jYXRpb24pID0+IHtcbiAgbG9nUGFnZVZpZXcobG9jYXRpb24pO1xuXG4gIC8vIHNjcm9sbCB0byB0b3Agd2hlbiBjaGFuZ2luZyBwYWdlXG4gIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCAoXG4gIDxSb3V0ZXIgaGlzdG9yeT17YnJvd3Nlckhpc3Rvcnl9PlxuICAgIDxSb3V0ZSBwYXRoPVwiL1wiIGNvbXBvbmVudD17TWFpbn0+XG4gICAgICA8SW5kZXhSb3V0ZSBwYXRoPVwiL1wiIGNvbXBvbmVudD17SW5kZXh9IC8+XG4gICAgICA8Um91dGUgcGF0aD1cInByb2R1Y3RzXCIgY29tcG9uZW50PXtQcm9kdWN0c30gLz5cbiAgICAgIDxSb3V0ZSBwYXRoPVwicHJvZHVjdC86cHJvZHVjdElkXCIgY29tcG9uZW50PXtQcm9kdWN0fSAvPlxuICAgICAgPFJvdXRlIHBhdGg9J2NvbGxlY3Rpb25zJyBjb21wb25lbnQ9e0NvbGxlY3Rpb25zfSAvPlxuICAgICAgPFJvdXRlIHBhdGg9J2NvbGxlY3Rpb24vOmNvbGxlY3Rpb25JZCcgY29tcG9uZW50PXtDb2xsZWN0aW9ufSAvPlxuICAgICAgPFJvdXRlIHBhdGg9XCJteS1jaXR5XCIgY29tcG9uZW50PXtQcm9kdWN0c30gLz5cbiAgICAgIDxSb3V0ZSBwYXRoPVwidXBsb2FkXCIgY29tcG9uZW50PXtVcGxvYWR9IC8+XG4gICAgICA8Um91dGUgcGF0aD1cIm9yZGVyLXN0YXR1c1wiIGNvbXBvbmVudD17T3JkZXJTdGF0dXN9IC8+XG4gICAgICA8Um91dGUgcGF0aD1cIm1hcFwiIGNvbXBvbmVudD17TWFwfSAvPlxuICAgICAgPFJvdXRlIHBhdGg9XCJsb2dpblwiIGNvbXBvbmVudD17TG9naW59IC8+XG4gICAgICA8Um91dGUgcGF0aD1cImFib3V0XCIgY29tcG9uZW50PXtBYm91dH0gLz5cbiAgICAgIDxSb3V0ZSBwYXRoPVwiY29udGFjdFwiIGNvbXBvbmVudD17Q29udGFjdH0gLz5cbiAgICA8L1JvdXRlPlxuICA8L1JvdXRlcj5cbik7XG5cblxuLy8gY29uc3QgY29tcG9uZW50Um91dGVzID0ge1xuLy8gICBjb21wb25lbnQ6ICdNYWluJyxcbi8vICAgcGF0aDogJy8nLFxuLy8gICBpbmRleFJvdXRlOiB7IGNvbXBvbmVudDogJ0luZGV4JyB9LFxuLy8gICBjaGlsZFJvdXRlczogW1xuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdjb2xsZWN0aW9ucycsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0NvbGxlY3Rpb25zJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdjb2xsZWN0aW9uLzpjb2xsZWN0aW9uSWQnLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdDb2xsZWN0aW9uJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdwcm9kdWN0cycsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ1Byb2R1Y3RzJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdwcm9kdWN0L3Byb2R1Y3RJZCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ1Byb2R1Y3QnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ215LWNpdHknLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdQcm9kdWN0cycpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAnYWJvdXQnLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdBYm91dCcpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAnY29udGFjdCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0NvbnRhY3QnKVxuLy8gICAgICAgICAgIC50aGVuKG1vZHVsZSA9PiBjYihudWxsLCBtb2R1bGUuZGVmYXVsdCkpO1xuLy8gICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgcGF0aDogJ3VwbG9hZCcsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ1VwbG9hZCcpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICBwYXRoOiAnbWFwJyxcbi8vICAgICAgIGdldENvbXBvbmVudChsb2NhdGlvbiwgY2IpIHtcbi8vICAgICAgICAgU3lzdGVtLmltcG9ydCgnTWFwJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdsb2dpbicsXG4vLyAgICAgICBnZXRDb21wb25lbnQobG9jYXRpb24sIGNiKSB7XG4vLyAgICAgICAgIFN5c3RlbS5pbXBvcnQoJ0xvZ2luJylcbi8vICAgICAgICAgICAudGhlbihtb2R1bGUgPT4gY2IobnVsbCwgbW9kdWxlLmRlZmF1bHQpKTtcbi8vICAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgIHBhdGg6ICdvcmRlci1zdGF0dXMnLFxuLy8gICAgICAgZ2V0Q29tcG9uZW50KGxvY2F0aW9uLCBjYikge1xuLy8gICAgICAgICBTeXN0ZW0uaW1wb3J0KCdPcmRlclN0YXR1cycpXG4vLyAgICAgICAgICAgLnRoZW4obW9kdWxlID0+IGNiKG51bGwsIG1vZHVsZS5kZWZhdWx0KSk7XG4vLyAgICAgICB9XG4vLyAgICAgfVxuLy8gICBdXG4vLyB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3JvdXRlci9yb3V0ZXIuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGb3JtYXQgZnJvbSAnZm9ybWF0JztcbmxldCB7IGNvbm5lY3QgfSA9IHJlcXVpcmUoJ3JlYWN0LXJlZHV4Jyk7XG5sZXQgYWN0aW9ucyA9IHJlcXVpcmUoJ2NhcnRBY3Rpb25zJyk7XG5cbmNsYXNzIENhcnRJdGVtIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB7ZGlzcGF0Y2gsIGl0ZW0sIGluY3JlbWVudExpbmVJdGVtLCBxdWFudGl0eX0gPSB0aGlzLnByb3BzO1xuXG4gICAgbGV0IGNoYW5nZVF1YW50aXR5ID0gKHF1YW50aXR5KSA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnY2FydCBJdGVtIG9iamVjdDogJywgaXRlbSk7XG4gICAgICBkaXNwYXRjaChhY3Rpb25zLnN0YXJ0QWRkb3JVcGRhdGVDYXJ0SXRlbShpdGVtLCBwYXJzZUludChxdWFudGl0eSkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1fX2ltZ1wiIHN0eWxlPXt7YmFja2dyb3VuZEltYWdlOiAndXJsKCcgKyBpdGVtLmltYWdlVmFyaWFudHNbMl0uc3JjICsgJyknfX0+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FydC1pdGVtX19jb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1fX2NvbnRlbnQtcm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtaXRlbV9fdmFyaWFudC10aXRsZVwiPntpdGVtLnZhcmlhbnRfdGl0bGV9PC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1fX3RpdGxlXCI+e2l0ZW0udGl0bGV9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FydC1pdGVtX19jb250ZW50LXJvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1fX3F1YW50aXR5LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuLS1zZWFtbGVzcyBxdWFudGl0eS1kZWNyZW1lbnRcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtjaGFuZ2VRdWFudGl0eSgtMSl9fVxuICAgICAgICAgICAgICA+PHNwYW4+LTwvc3Bhbj48c3BhbiBjbGFzc05hbWU9XCJoaWRlXCI+RGVjcmVtZW50PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB2YWx1ZT17cXVhbnRpdHl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2FydC1pdGVtX19xdWFudGl0eVwiXG4gICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgICAgICAgcmVhZE9ubHlcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0bi0tc2VhbWxlc3MgcXVhbnRpdHktaW5jcmVtZW50XCJcbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7Y2hhbmdlUXVhbnRpdHkoMSl9fVxuICAgICAgICAgICAgICA+PHNwYW4+Kzwvc3Bhbj48c3BhbiBjbGFzc05hbWU9XCJoaWRlXCI+SW5jcmVtZW50PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjYXJ0LWl0ZW1fX3ByaWNlXCI+e0Zvcm1hdC5hc01vbmV5KGl0ZW0ucHJpY2UqcXVhbnRpdHkpfTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2FydDogc3RhdGUuY2FydFxuICAgIH1cbiAgfVxuKShDYXJ0SXRlbSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9DYXJ0LWl0ZW0uanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TGlua30gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuY2xhc3MgQ29sbGVjdGlvbkl0ZW0gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICByZW5kZXIoKSB7XG4gICAgbGV0IHt0aXRsZSwgaWR9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbGxlY3Rpb24taXRlbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbGxlY3Rpb24taXRlbS1pbm5lclwiPlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPjxMaW5rIHRvPXtgL2NvbGxlY3Rpb24vJHtpZH1gfT57dGl0bGV9PC9MaW5rPjwvaDI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29sbGVjdGlvbkl0ZW07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9Db2xsZWN0aW9uSXRlbS5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xubGV0IHsgY29ubmVjdCB9ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcbmxldCBhY3Rpb25zID0gcmVxdWlyZSgnY29sbGVjdGlvbkFjdGlvbnMnKTtcblxuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnQ29sbGVjdGlvbic7XG5pbXBvcnQgQ29sbGVjdGlvbkl0ZW0gZnJvbSAnQ29sbGVjdGlvbkl0ZW0nO1xuXG5jbGFzcyBDb2xsZWN0aW9ucyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQge2NvbGxlY3Rpb25zfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAoY29sbGVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICB7Y29sbGVjdGlvbnMubWFwKGNvbGxlY3Rpb24gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIDxDb2xsZWN0aW9uSXRlbSBrZXk9e2NvbGxlY3Rpb24uY29sbGVjdGlvbl9pZH0gaWQ9e2NvbGxlY3Rpb24uY29sbGVjdGlvbl9pZH0gdGl0bGU9e2NvbGxlY3Rpb24udGl0bGV9IC8+XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH1lbHNle1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5Mb2FkaW5nIGNvbGxlY3Rpb25zLi4uPC9kaXY+XG4gICAgICApXG4gICAgfVxuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgKHN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbGxlY3Rpb25zOiBzdGF0ZS5jb2xsZWN0aW9ucy5hbGxcbiAgICB9XG4gIH1cbikoQ29sbGVjdGlvbnMpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbnRhaW5lcnMvQ29sbGVjdGlvbnMuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TGluaywgSW5kZXhMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuXG5jbGFzcyBGb290ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxmb290ZXIgaWQ9XCJzaXRlLWZvb3RlclwiPlxuICAgICAgICA8bmF2IGNsYXNzTmFtZT1cImZvb3Rlci1uYXZcIj5cbiAgICAgICAgICA8bGk+XG4gICAgICAgICAgICA8TGluayB0bz1cIi9hYm91dFwiIGFjdGl2ZUNsYXNzTmFtZT1cImFjdGl2ZVwiPkFib3V0PC9MaW5rPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPGxpPlxuICAgICAgICAgICAgPExpbmsgdG89XCIvcHJvZHVjdHNcIiBhY3RpdmVDbGFzc05hbWU9XCJhY3RpdmVcIj5TaG9wIEFsbDwvTGluaz5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgIDxMaW5rIHRvPVwiL2NvbnRhY3RcIiBhY3RpdmVDbGFzc05hbWU9XCJhY3RpdmVcIj5Db250YWN0PC9MaW5rPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPGxpPlxuICAgICAgICAgICAgPExpbmsgdG89XCIvdXBsb2FkXCIgYWN0aXZlQ2xhc3NOYW1lPVwiYWN0aXZlXCI+VXBsb2FkIERlc2lnbjwvTGluaz5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L25hdj5cbiAgICAgICAgPHA+TG9yZW0gaXBzdW0gZG9sYXIgc2l0IGFtaXQuIFNlZCBkb25vIGF2ZWMuPC9wPlxuICAgICAgPC9mb290ZXI+XG4gICAgKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9vdGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbnRhaW5lcnMvRm9vdGVyLmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0xpbmssIEluZGV4TGlua30gZnJvbSAncmVhY3Qtcm91dGVyJztcbmxldCB7Y29ubmVjdH0gPSByZXF1aXJlKCdyZWFjdC1yZWR1eCcpO1xubGV0IGNhcnRBY3Rpb25zID0gcmVxdWlyZSgnY2FydEFjdGlvbnMnKTtcblxuY2xhc3MgSGVhZGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB7ZGlzcGF0Y2gsIGNhcnRJdGVtc30gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxoZWFkZXIgaWQ9XCJzaXRlLWhlYWRlclwiPlxuICAgICAgICA8dWwgY2xhc3NOYW1lPVwibWluaS1uYXZcIj5cbiAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwibWluaS1uYXYtaXRlbVwiPjxMaW5rIHRvPVwiL2Fib3V0XCIgYWN0aXZlQ2xhc3NOYW1lPVwiYWN0aXZlXCI+QWJvdXQ8L0xpbms+PC9saT5cbiAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwibWluaS1uYXYtaXRlbVwiPjxMaW5rIHRvPVwiL29yZGVyLXN0YXR1c1wiIGFjdGl2ZUNsYXNzTmFtZT1cImFjdGl2ZVwiPk9yZGVyIFN0YXR1czwvTGluaz48L2xpPlxuICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJtaW5pLW5hdi1pdGVtXCI+PExpbmsgdG89XCIvbWFwXCIgYWN0aXZlQ2xhc3NOYW1lPVwiYWN0aXZlXCI+TWFwPC9MaW5rPjwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cIm1pbmktbmF2LWl0ZW1cIj48TGluayB0bz1cIi9sb2dpblwiIGFjdGl2ZUNsYXNzTmFtZT1cImFjdGl2ZVwiPkxvZ2luPC9MaW5rPjwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cIm1pbmktbmF2LWl0ZW0gbWluaS1uYXYtaXRlbS1jYXJ0XCIgb25DbGljaz17KCk9PntcbiAgICAgICAgICAgIGRpc3BhdGNoKGNhcnRBY3Rpb25zLm9wZW5DYXJ0KCkpO1xuICAgICAgICAgIH19PjxpIGNsYXNzTmFtZT1cImZhIGZhLXNob3BwaW5nLWNhcnRcIj48L2k+IHtjYXJ0SXRlbXMgPiAwID8gJ1snICsgY2FydEl0ZW1zICsgJ10nIDogJyd9PC9saT5cbiAgICAgICAgPC91bD5cblxuICAgICAgICA8ZGl2IGlkPVwic2l0ZS1sb2dvXCI+XG4gICAgICAgICAgPEluZGV4TGluayB0bz1cIi9cIiBhY3RpdmVDbGFzc05hbWU9XCJhY3RpdmVcIiBhY3RpdmVTdHlsZT17e2ZvbnRXZWlnaHQ6ICdib2xkJ319PjxpbWcgc3JjPVwiL2ltYWdlcy9sb2dvLnBuZ1wiIC8+PC9JbmRleExpbms+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxuYXYgaWQ9XCJzaXRlLW5hdlwiPlxuICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJzaXRlLW5hdi1pdGVtXCI+PExpbmsgdG89XCIvcHJvZHVjdHNcIiBhY3RpdmVDbGFzc05hbWU9XCJhY3RpdmVcIj5TaG9wPC9MaW5rPjwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cInNpdGUtbmF2LWl0ZW1cIj48TGluayB0bz1cIi9teS1jaXR5XCIgYWN0aXZlQ2xhc3NOYW1lPVwiYWN0aXZlXCI+TXkgQ2l0eTwvTGluaz48L2xpPlxuICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJzaXRlLW5hdi1pdGVtXCI+PExpbmsgdG89XCIvY2F0ZWdvcmllc1wiIGFjdGl2ZUNsYXNzTmFtZT1cImFjdGl2ZVwiPkNhdGVnb3JpZXM8L0xpbms+PC9saT5cbiAgICAgICAgICA8ZGl2IGlkPVwic2l0ZS1uYXYtdXBsb2FkXCI+XG4gICAgICAgICAgICA8TGluayB0bz17YC91cGxvYWRgfT48aW1nIHNyYz1cIi9pbWFnZXMvdXBsb2FkLnBuZ1wiIC8+PC9MaW5rPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L25hdj5cbiAgICAgIDwvaGVhZGVyPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2FydEl0ZW1zOiBzdGF0ZS5jYXJ0LmxpbmVJdGVtc0NvdW50XG4gICAgfVxuICB9XG4pKEhlYWRlcik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9IZWFkZXIuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBTbGlkZXIgZnJvbSAncmVhY3Qtc2xpY2snO1xuaW1wb3J0IHtMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xubGV0IHtjb25uZWN0fSA9IHJlcXVpcmUoJ3JlYWN0LXJlZHV4Jyk7XG5sZXQgYWN0aW9ucyA9IHJlcXVpcmUoJ2NhcnRBY3Rpb25zJyk7XG5cbmltcG9ydCBMb2FkZXIgZnJvbSAnTG9hZGVyJztcbmltcG9ydCBQcm9kdWN0SXRlbSBmcm9tICdQcm9kdWN0SXRlbSc7XG5cbmNsYXNzIEluZGV4IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIGhhbmRsZUFkZFRvQ2FydChwcm9kdWN0KSB7XG4gICAgbGV0IHtkaXNwYXRjaH0gPSB0aGlzLnByb3BzO1xuICAgIGRpc3BhdGNoKGFjdGlvbnMuc3RhcnRBZGRvclVwZGF0ZUNhcnRJdGVtKHByb2R1Y3Quc2VsZWN0ZWRWYXJpYW50LCAxKSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHtwcm9kdWN0c30gPSB0aGlzLnByb3BzO1xuICAgIHByb2R1Y3RzID0gcHJvZHVjdHMuc2xpY2UoMCwgMTIpO1xuXG4gICAgLy8gc2xpZGVyIHNldHRpbmdzXG4gICAgdmFyIHNldHRpbmdzID0ge1xuICAgICAgY2xhc3NOYW1lOiAnY2VudGVyIHByb2R1Y3RzLWNhcm91c2VsJyxcbiAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgY2VudGVyUGFkZGluZzogJzYwcHgnLFxuICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICBzbGlkZXNUb1Nob3c6IDQsXG4gICAgICBzcGVlZDogNTAwLFxuICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgIGxhenlMb2FkOiB0cnVlLFxuICAgICAgcmVzcG9uc2l2ZTogW3tcbiAgICAgICAgYnJlYWtwb2ludDogMTAyNCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDMsXG4gICAgICAgICAgaW5maW5pdGU6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBicmVha3BvaW50OiA2MDAsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxuICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAyLFxuICAgICAgICAgIGluaXRpYWxTbGlkZTogMlxuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIGJyZWFrcG9pbnQ6IDQ4MCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDFcbiAgICAgICAgfVxuICAgICAgfV1cbiAgICB9O1xuXG4gICAgaWYgKHByb2R1Y3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPFNsaWRlciB7Li4uc2V0dGluZ3N9PlxuICAgICAgICAgICAge3Byb2R1Y3RzLm1hcCgocHJvZHVjdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cInByb2R1Y3RzLWNhcm91c2VsLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL3Byb2R1Y3QvJHtwcm9kdWN0LmF0dHJzLnByb2R1Y3RfaWR9YH0+PGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0LWl0ZW0taW1hZ2VcIiBzdHlsZT17e2JhY2tncm91bmRJbWFnZTogJ3VybCgnICsgcHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQuaW1hZ2VWYXJpYW50c1s1XS5zcmMgKyAnKSd9fT48L2Rpdj48L0xpbms+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvU2xpZGVyPlxuXG4gICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwic2VjdGlvbi1jYWxsb3V0XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwic2VjdGlvbi1oZWFkbGluZVwiPlNob3cgeW91ciBwcmlkZS4gRGlzcGxheSB5b3VyIHRhbGVudHMuIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtd2hpdGVcIj5SZXAgeW91ciBjaXR5Ljwvc3Bhbj48L2g0PlxuICAgICAgICAgICAgICA8cD5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBOdWxsYW0gc2VtcGVyIG51bGxhIHZlbCBlbGl0IGdyYXZpZGEsIHZlbCBwbGFjZXJhdCB0dXJwaXMgY29udmFsbGlzLiBQcmFlc2VudCBldSBsb3JlbSBzdXNjaXBpdCwgZ3JhdmlkYSBsZW8gc2VkLCBsdWN0dXMgZXJhdC4gTnVsbGFtIGNvbnNlY3RldHVyLCB0b3J0b3IgYSBmYWNpbGlzaXMgbG9ib3J0aXMsIHZlbGl0IG1hc3NhIG1hdHRpcyByaXN1cywgZWdldCBpbXBlcmRpZXQgdmVsaXQgYXJjdSBub24gbWF1cmlzLiBNYXVyaXMgYmliZW5kdW0gYmliZW5kdW0gbGlndWxhLCBuZWMgbWF4aW11cyBzYXBpZW4gcG9ydGEgbm9uLjwvcD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWN0aW9uLWNhbGxvdXRfX2N0YS1pdGVtc1wiPlxuICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL3Byb2R1Y3RzYH0+PGltZyBzcmM9XCIvaW1hZ2VzL2J1dHRvbi1zaG9wLnBuZ1wiIGFsdD1cIlNob3Agbm93XCIgLz48L0xpbms+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWFyY2gtYm94XCI+XG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1zZWFyY2hcIiAvPlxuICAgICAgICAgICAgICAgICAgPGlucHV0IHR5ZXA9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJLZXl3b3JkIFNlYXJjaFwiIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPExpbmsgdG89e2AvdXBsb2FkYH0+PGltZyBzcmM9XCIvaW1hZ2VzL2J1dHRvbi11cGxvYWQucG5nXCIgYWx0PVwiU2hvcCBub3dcIiAvPjwvTGluaz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L3NlY3Rpb24+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInByb2R1Y3RzLWdyaWQtdGl0bGVcIj5XaGF0J3MgaG90IC8gV2hhdCdzIG5ldzwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3RzLWdyaWRcIj5cbiAgICAgICAgICAgICAge3Byb2R1Y3RzLm1hcChwcm9kdWN0ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gPFByb2R1Y3RJdGVtIGtleT17cHJvZHVjdC5rZXl9IGFkZFRvQ2FydD17KCkgPT4gdGhpcy5oYW5kbGVBZGRUb0NhcnQocHJvZHVjdCl9IGlkPXtwcm9kdWN0LmF0dHJzLnByb2R1Y3RfaWR9IHRpdGxlPXtwcm9kdWN0LmF0dHJzLnRpdGxlfSBpbWFnZT17cHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQuaW1hZ2VWYXJpYW50c1s1XS5zcmN9IC8+XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH1lbHNle1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPExvYWRlciAvPlxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvZHVjdHM6IHN0YXRlLnByb2R1Y3RzLmFsbFxuICAgIH1cbiAgfVxuKShJbmRleCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvY29udGFpbmVycy9JbmRleC5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEhlYWRlciBmcm9tICdIZWFkZXInO1xuaW1wb3J0IEZvb3RlciBmcm9tICdGb290ZXInO1xuaW1wb3J0IERvY3VtZW50TWV0YSBmcm9tICdyZWFjdC1kb2N1bWVudC1tZXRhJztcbmltcG9ydCBDYXJ0IGZyb20gJ2NhcnQnO1xuXG5jbGFzcyBNYWluIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuICBjb25zdHJ1Y3Rvcihwcm9wcyl7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHRpdGxlOiAnJyxcbiAgICAgIGNvbnRlbnQ6ICcnXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBtZXRhID0ge1xuICAgICAgdGl0bGU6ICdSZXAgWW91ciBDaXR5JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVwIFlvdXIgQ2l0eSBkZXNjcmlwdGlvbicsXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGNoYXJzZXQ6ICd1dGYtOCdcbiAgICAgIH0sXG4gICAgICBhdXRvOiB7XG4gICAgICAgIG9ncmFwaDogdHJ1ZVxuICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgcGFnZU5hbWUgPSB0aGlzLnByb3BzLmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cigxKS5zcGxpdCgnLycpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgaWQ9XCJtYWluXCIgY2xhc3NOYW1lPXtgcGFnZS0ke3BhZ2VOYW1lWzBdID8gcGFnZU5hbWVbMF0gKyAnIHN1YnBhZ2UnIDogJ2hvbWUnfWB9PlxuICAgICAgICA8RG9jdW1lbnRNZXRhIHsuLi5tZXRhfSAvPlxuICAgICAgICA8SGVhZGVyIC8+XG4gICAgICAgIDxkaXYgaWQ9XCJtYWluLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxDYXJ0IC8+XG4gICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8Rm9vdGVyIC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWFpbjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL01haW4uanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmxldCB7Y29ubmVjdH0gPSByZXF1aXJlKCdyZWFjdC1yZWR1eCcpO1xubGV0IGFjdGlvbnMgPSByZXF1aXJlKCdjYXJ0QWN0aW9ucycpO1xuaW1wb3J0IExvYWRlciBmcm9tICdMb2FkZXInO1xuaW1wb3J0IFByb2R1Y3RJdGVtIGZyb20gJ1Byb2R1Y3RJdGVtJztcblxuY2xhc3MgUHJvZHVjdHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgaGFuZGxlQWRkVG9DYXJ0KHByb2R1Y3QpIHtcbiAgICBsZXQge2Rpc3BhdGNofSA9IHRoaXMucHJvcHM7XG4gICAgZGlzcGF0Y2goYWN0aW9ucy5zdGFydEFkZG9yVXBkYXRlQ2FydEl0ZW0ocHJvZHVjdC5zZWxlY3RlZFZhcmlhbnQsIDEpKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQge3Byb2R1Y3RzfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAocHJvZHVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBtZWRpdW0tMyBjb2x1bW5zXCI+XG4gICAgICAgICAgICAgIDxuYXYgY2xhc3NOYW1lPVwicHJvZHVjdHMtbmF2XCI+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInByb2R1Y3RzLW5hdl9faGVhZGxpbmVcIj5DYXRlZ29yaWVzPC9oND5cbiAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICA8bGk+Q2l0eSAvIHN0YXRlPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5TcG9ydHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPkhvYmJpZXM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPk11c2ljPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5BbmltYWxzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5TaG93IGFsbDwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cblxuICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJwcm9kdWN0cy1uYXZfX2hlYWRsaW5lXCI+U3R5bGU8L2g0PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZHVjdHMtbmF2X19zZWFyY2hcIj5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiU2VsZWN0IHN0eWxlXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cInByb2R1Y3RzLW5hdl9fc2VhcmNoLWJ1dHRvblwiPjxpIGNsYXNzTmFtZT1cImZhIGZhLXNlYXJjaFwiPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJwcm9kdWN0cy1uYXZfX2hlYWRsaW5lXCI+U2VhcmNoPC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2R1Y3RzLW5hdl9fc2VhcmNoXCI+XG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkVudGVyIGtleXdvcmRzXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cInByb2R1Y3RzLW5hdl9fc2VhcmNoLWJ1dHRvblwiPjxpIGNsYXNzTmFtZT1cImZhIGZhLXNlYXJjaFwiPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8L25hdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbC0xMiBtZWRpdW0tOSBjb2x1bW5cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0cy1ncmlkXCI+XG4gICAgICAgICAgICAgICAge3Byb2R1Y3RzLm1hcChwcm9kdWN0ID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiA8UHJvZHVjdEl0ZW0ga2V5PXtwcm9kdWN0LmtleX0gYWRkVG9DYXJ0PXsoKSA9PiB0aGlzLmhhbmRsZUFkZFRvQ2FydChwcm9kdWN0KX0gaWQ9e3Byb2R1Y3QuYXR0cnMucHJvZHVjdF9pZH0gdGl0bGU9e3Byb2R1Y3QuYXR0cnMudGl0bGV9IGltYWdlPXtwcm9kdWN0LnNlbGVjdGVkVmFyaWFudC5pbWFnZVZhcmlhbnRzWzRdLnNyY30gLz5cbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8TG9hZGVyIC8+XG4gICAgICApXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gIChzdGF0ZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9kdWN0czogc3RhdGUucHJvZHVjdHMuYWxsXG4gICAgfVxuICB9XG4pKFByb2R1Y3RzKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL1Byb2R1Y3RzLmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0xpbmt9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5sZXQge2Nvbm5lY3R9ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcbmxldCBwcm9kdWN0QWN0aW9ucyA9IHJlcXVpcmUoJ3Byb2R1Y3RBY3Rpb25zJyk7XG5sZXQgY2FydEFjdGlvbnMgPSByZXF1aXJlKCdjYXJ0QWN0aW9ucycpO1xuaW1wb3J0IHticm93c2VySGlzdG9yeX0gZnJvbSAncmVhY3Qtcm91dGVyJztcblxuY2xhc3MgVXBsb2FkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB7ZGlzcGF0Y2h9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lciB0ZXh0LWNlbnRlclwiPlxuICAgICAgICA8aW1nIHNyYz1cIi9pbWFnZXMvdXBsb2FkLXBsYWNlaG9sZGVyLnBuZ1wiIC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgKHN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZVByb2R1Y3Q6IHN0YXRlLnByb2R1Y3RzLmFjdGl2ZVxuICAgIH1cbiAgfVxuKShVcGxvYWQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbnRhaW5lcnMvVXBsb2FkLmpzeCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5sZXQgeyBjb25uZWN0IH0gPSByZXF1aXJlKCdyZWFjdC1yZWR1eCcpO1xubGV0IGFjdGlvbnMgPSByZXF1aXJlKCdjYXJ0QWN0aW9ucycpO1xuXG5pbXBvcnQgc2hvcGlmeUFQSSBmcm9tICdzaG9waWZ5QVBJJztcbmltcG9ydCBDYXJ0SXRlbSBmcm9tICdDYXJ0LWl0ZW0nO1xuXG5pbXBvcnQgRm9ybWF0IGZyb20gJ2Zvcm1hdCc7XG5cbmNsYXNzIENhcnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG5cbiAgICBsZXQgZGlzcGF0Y2g7XG4gICAgbGV0IGhhbmRsZUNoZWNrb3V0ID0gdGhpcy5oYW5kbGVDaGVja291dCgpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHRoaXMuZGlzcGF0Y2ggPSB0aGlzLnByb3BzLmRpc3BhdGNoO1xuICB9XG5cbiAgaGFuZGxlQ2xvc2VDYXJ0KCkge1xuICAgIHRoaXMuZGlzcGF0Y2goYWN0aW9ucy5jbG9zZUNhcnQoKSk7XG4gIH1cblxuICBoYW5kbGVDaGVja291dCgpIHtcbiAgICB3aW5kb3cub3BlbihzaG9waWZ5QVBJLmNhcnQuY2hlY2tvdXRVcmwsICdfc2VsZicpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB7aXNPcGVuLCBsaW5lSXRlbXMsIGxpbmVJdGVtQ291bnQsIHN1YnRvdGFsfSA9IHRoaXMucHJvcHMuY2FydDtcbiAgICBsZXQgcmVuZGVyTGluZUl0ZW1zID0gKCkgPT4ge1xuICAgICAgaWYgKGxpbmVJdGVtcy5sZW5ndGggPiAwKXtcbiAgICAgICAgcmV0dXJuIGxpbmVJdGVtcy5tYXAobGluZUl0ZW0gPT4ge1xuICAgICAgICAgIHJldHVybiA8Q2FydEl0ZW1cbiAgICAgICAgICAgIGtleT17bGluZUl0ZW0uaWR9XG4gICAgICAgICAgICBpdGVtPXtsaW5lSXRlbX1cbiAgICAgICAgICAgIHF1YW50aXR5PXtsaW5lSXRlbS5xdWFudGl0eX1cbiAgICAgICAgICAvPlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtcImNhcnQgXCIgKyAoaXNPcGVuID8gJ2pzLWFjdGl2ZScgOiAnJyApfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LXNlY3Rpb24gY2FydC1zZWN0aW9uLS10b3BcIj5cbiAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiY2FydC10aXRsZVwiPllvdXIgY2FydDoge2lzT3Blbn08L2gyPlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuLS1jbG9zZVwiPlxuICAgICAgICAgICAgPGRpdiBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsb3NlQ2FydC5iaW5kKHRoaXMpfT7DlzwvZGl2PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaGlkZVwiPkNsb3NlPC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtZm9ybVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FydC1pdGVtLWNvbnRhaW5lciBjYXJ0LXNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHtyZW5kZXJMaW5lSXRlbXMoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWJvdHRvbVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJ0LWluZm8gY2xlYXJmaXggY2FydC1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHlwZS0tY2FwcyBjYXJ0LWluZm9fX3RvdGFsIGNhcnQtaW5mb19fc21hbGxcIj5Ub3RhbDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcnQtaW5mb19fcHJpY2luZ1wiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNhcnQtaW5mb19fc21hbGwgY2FydC1pbmZvX190b3RhbFwiPlVTRDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwcmljaW5nIHByaWNpbmctLW5vLXBhZGRpbmdcIj57Rm9ybWF0LmFzTW9uZXkoc3VidG90YWwpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FydC1hY3Rpb25zLWNvbnRhaW5lciBjYXJ0LXNlY3Rpb24gdHlwZS0tY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FydC1kaXNjb3VudC1ub3RpY2UgY2FydC1pbmZvX19zbWFsbFwiPlNoaXBwaW5nIGFuZCBkaXNjb3VudCBjb2RlcyBhcmUgYWRkZWQgYXQgY2hlY2tvdXQuPC9kaXY+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tLWNhcnQtY2hlY2tvdXRcIlxuICAgICAgICAgICAgICAgIGlkPVwiY2hlY2tvdXRcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJjaGVja291dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9XCJDaGVja291dFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDaGVja291dH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICAoc3RhdGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2FydDogc3RhdGUuY2FydFxuICAgIH1cbiAgfVxuKShDYXJ0KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb250YWluZXJzL2NhcnQuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBEb2N1bWVudE1ldGEgZnJvbSAncmVhY3QtZG9jdW1lbnQtbWV0YSc7XG5cbmNsYXNzIEFib3V0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInNlY3Rpb25cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICA8aDE+QWJvdXQgdXM8L2gxPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICApXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBYm91dDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9wcmVzZW50YXRpb25hbC9BYm91dC5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IERvY3VtZW50TWV0YSBmcm9tICdyZWFjdC1kb2N1bWVudC1tZXRhJztcblxuY2xhc3MgQ29udGFjdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzZWN0aW9uXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgPGgxPkNvbnRhY3Q8L2gxPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICApXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb250YWN0O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3ByZXNlbnRhdGlvbmFsL0NvbnRhY3QuanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBEb2N1bWVudE1ldGEgZnJvbSAncmVhY3QtZG9jdW1lbnQtbWV0YSc7XG5cbmNsYXNzIExvZ2luIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInNlY3Rpb25cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICA8aDE+TG9naW48L2gxPlxuICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiIC8+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInBhc3N3b3JkXCIgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiIC8+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cImJ1dHRvblwiIHZhbHVlPVwiTG9naW5cIiAvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG4gICAgKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTG9naW47XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvcHJlc2VudGF0aW9uYWwvTG9naW4uanN4IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBEb2N1bWVudE1ldGEgZnJvbSAncmVhY3QtZG9jdW1lbnQtbWV0YSc7XG5cbmNsYXNzIE1hcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzZWN0aW9uXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgPGgxPk1hcCBwYWdlPC9oMT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG4gICAgKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWFwO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3ByZXNlbnRhdGlvbmFsL01hcC5qc3giLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IERvY3VtZW50TWV0YSBmcm9tICdyZWFjdC1kb2N1bWVudC1tZXRhJztcblxuY2xhc3MgT3JkZXJTdGF0dXMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwic2VjdGlvblwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxoMT5PcmRlciBTdGF0dXMgcGFnZTwvaDE+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9zZWN0aW9uPlxuICAgIClcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE9yZGVyU3RhdHVzO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3ByZXNlbnRhdGlvbmFsL09yZGVyU3RhdHVzLmpzeCIsImV4cG9ydCB2YXIgcHJvZHVjdHNSZWR1Y2VyID0gKHN0YXRlID0ge2FsbDogW10sIGFjdGl2ZTogbnVsbH0sIGFjdGlvbikgPT4ge1xuICBzd2l0Y2goYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdBRERfUFJPRFVDVFMnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGFsbDogYWN0aW9uLnByb2R1Y3RzXG4gICAgICB9O1xuICAgIGNhc2UgJ1NFVF9BQ1RJVkVfUFJPRFVDVCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYWN0aXZlOiB7XG4gICAgICAgICAgLi4uc3RhdGUuYWN0aXZlLFxuICAgICAgICAgIGZldGNoZWQ6IHRydWUsXG4gICAgICAgICAgb3B0aW9uczogYWN0aW9uLm9wdGlvbnNcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICBjYXNlICdDTEVBUl9BQ1RJVkVfUFJPRFVDVCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYWN0aXZlOiBudWxsXG4gICAgICB9O1xuICAgIGNhc2UgJ1VQREFURV9BQ1RJVkVfUFJPRFVDVF9PUFRJT05TJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBhY3RpdmU6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5hY3RpdmUsXG4gICAgICAgICAgb3B0aW9uczogYWN0aW9uLm9wdGlvbnNcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59O1xuXG5leHBvcnQgdmFyIGNvbGxlY3Rpb25zUmVkdWNlciA9IChzdGF0ZSA9IHthbGw6IFtdLCBhY3RpdmU6IG51bGx9LCBhY3Rpb24pID0+IHtcbiAgc3dpdGNoKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnQUREX0NPTExFQ1RJT05TJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBhbGw6IGFjdGlvbi5jb2xsZWN0aW9uc1xuICAgICAgfTtcbiAgICBjYXNlICdTRVRfQUNUSVZFX0NPTExFQ1RJT04nOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGFjdGl2ZTogYWN0aW9uLnBhcnNlZENvbGxlY3Rpb25cbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxuZXhwb3J0IHZhciBjYXJ0UmVkdWNlciA9IChzdGF0ZSA9IHtpc09wZW46IGZhbHNlLCBsaW5lSXRlbXM6IFtdfSwgYWN0aW9uKSA9PiB7XG4gIHN3aXRjaChhY3Rpb24udHlwZSkge1xuICAgIC8vIGNhc2UgJ1JFU1RPUkVfUFJFVklPVVNfQ0FSVCc6XG4gICAgLy8gICByZXR1cm4gYWN0aW9uLnJlbW90ZUNhcnQ7XG4gICAgY2FzZSAnU0VUX0lOSVRJQUxfQ0FSVF9TVEFURSc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5hY3Rpb24ubG9jYWxDYXJ0XG4gICAgICB9O1xuICAgIGNhc2UgJ1VQREFURV9DQVJUX0lURU1TJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBsaW5lSXRlbXM6IGFjdGlvbi51cGRhdGVkQ2FydEl0ZW1zXG4gICAgICB9O1xuICAgIGNhc2UgJ1VQREFURV9DQVJUX0lURU1TX0NPVU5UJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBsaW5lSXRlbXNDb3VudDogYWN0aW9uLnVwZGF0ZWRDYXJ0SXRlbXNDb3VudFxuICAgICAgfTtcbiAgICBjYXNlICdVUERBVEVfQ0FSVF9TVUJUT1RBTCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgc3VidG90YWw6IGFjdGlvbi5uZXdTdWJ0b3RhbFxuICAgICAgfTtcbiAgICBjYXNlICdPUEVOX0NBUlQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGlzT3BlbjogdHJ1ZVxuICAgICAgfTtcbiAgICBjYXNlICdDTE9TRV9DQVJUJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbmV4cG9ydCB2YXIgbmF2UmVkdWNlciA9IChzdGF0ZSA9IHtzaG93Q2xvc2U6IGZhbHNlLCBzaG93TmF2OiBmYWxzZX0sIGFjdGlvbikgPT4ge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnVE9HR0xFX05BVl9JQ09OJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBzaG93Q2xvc2U6ICFzdGF0ZS5zaG93Q2xvc2UsXG4gICAgICAgIHNob3dOYXY6IHN0YXRlLnNob3dOYXZcbiAgICAgIH07XG4gICAgY2FzZSAnVE9HR0xFX05BVic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgc2hvd0Nsb3NlOiAhc3RhdGUuc2hvd0Nsb3NlLFxuICAgICAgICBzaG93TmF2OiAhc3RhdGUuc2hvd05hdlxuICAgICAgfTtcbiAgICBjYXNlICdDTE9TRV9OQVYnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHNob3dDbG9zZTogZmFsc2UsXG4gICAgICAgIHNob3dOYXY6IGZhbHNlXG4gICAgICB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvcmVkdWNlcnMvcmVkdWNlcnMuanN4IiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gcGxhY2VIb2xkZXJzQ291bnQgKGI2NCkge1xuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuICB9XG5cbiAgLy8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcbiAgLy8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuICAvLyByZXByZXNlbnQgb25lIGJ5dGVcbiAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG4gIC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2VcbiAgcmV0dXJuIGI2NFtsZW4gLSAyXSA9PT0gJz0nID8gMiA6IGI2NFtsZW4gLSAxXSA9PT0gJz0nID8gMSA6IDBcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuICByZXR1cm4gYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxufVxuXG5mdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7XG4gIHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG4gIHBsYWNlSG9sZGVycyA9IHBsYWNlSG9sZGVyc0NvdW50KGI2NClcblxuICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG4gIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcbiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuXG5cbiAgdmFyIEwgPSAwXG5cbiAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgb3V0cHV0ID0gJydcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpKSlcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXVxuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDJdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gJz09J1xuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pXG4gICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMTBdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXVxuICAgIG91dHB1dCArPSAnPSdcbiAgfVxuXG4gIHBhcnRzLnB1c2gob3V0cHV0KVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Jhc2U2NC1qcy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5cbi8qKlxuICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcbiAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpXG4gKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG4gKlxuICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLFxuICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuICpcbiAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW5cbiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuICpcbiAqIE5vdGU6XG4gKlxuICogICAtIEZpcmVmb3ggNC0yOSBsYWNrcyBzdXBwb3J0IGZvciBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcyxcbiAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cbiAqXG4gKiAgIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cbiAqXG4gKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuICogICAgIGluY29ycmVjdCBsZW5ndGggaW4gc29tZSBzaXR1YXRpb25zLlxuXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgYmVoYXZlcyBjb3JyZWN0bHkuXG4gKi9cbkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuICA/IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gIDogdHlwZWRBcnJheVN1cHBvcnQoKVxuXG4vKlxuICogRXhwb3J0IGtNYXhMZW5ndGggYWZ0ZXIgdHlwZWQgYXJyYXkgc3VwcG9ydCBpcyBkZXRlcm1pbmVkLlxuICovXG5leHBvcnRzLmtNYXhMZW5ndGggPSBrTWF4TGVuZ3RoKClcblxuZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuICB0cnkge1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fVxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gICAgPyAweDdmZmZmZmZmXG4gICAgOiAweDNmZmZmZmZmXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7XG4gIGlmIChrTWF4TGVuZ3RoKCkgPCBsZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKVxuICB9XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIGlmICh0aGF0ID09PSBudWxsKSB7XG4gICAgICB0aGF0ID0gbmV3IEJ1ZmZlcihsZW5ndGgpXG4gICAgfVxuICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgaGF2ZSB0aGVpclxuICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZlxuICogYFVpbnQ4QXJyYXlgLCBzbyB0aGUgcmV0dXJuZWQgaW5zdGFuY2VzIHdpbGwgaGF2ZSBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgbWV0aG9kc1xuICogYW5kIHRoZSBgVWludDhBcnJheWAgbWV0aG9kcy4gU3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXRcbiAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuXG4gKlxuICogVGhlIGBVaW50OEFycmF5YCBwcm90b3R5cGUgcmVtYWlucyB1bm1vZGlmaWVkLlxuICovXG5cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBhbGxvY1Vuc2FmZSh0aGlzLCBhcmcpXG4gIH1cbiAgcmV0dXJuIGZyb20odGhpcywgYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG4vLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcbiAgfVxuXG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KVxuICB9XG5cbiAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpXG59XG5cbi8qKlxuICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3JcbiAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKVxuICogQnVmZmVyLmZyb20oYXJyYXkpXG4gKiBCdWZmZXIuZnJvbShidWZmZXIpXG4gKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSlcbiAqKi9cbkJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGZyb20obnVsbCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbiAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmXG4gICAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHtcbiAgICAvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKVxuICB9XG59XG5cbmZ1bmN0aW9uIGFsbG9jICh0aGF0LCBzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIGlmIChzaXplIDw9IDApIHtcbiAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG4gIH1cbiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIE9ubHkgcGF5IGF0dGVudGlvbiB0byBlbmNvZGluZyBpZiBpdCdzIGEgc3RyaW5nLiBUaGlzXG4gICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZFxuICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC5cbiAgICByZXR1cm4gdHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJ1xuICAgICAgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZylcbiAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbClcbiAgfVxuICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogYWxsb2Moc2l6ZVssIGZpbGxbLCBlbmNvZGluZ11dKVxuICoqL1xuQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIHJldHVybiBhbGxvYyhudWxsLCBzaXplLCBmaWxsLCBlbmNvZGluZylcbn1cblxuZnVuY3Rpb24gYWxsb2NVbnNhZmUgKHRoYXQsIHNpemUpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpIHtcbiAgICAgIHRoYXRbaV0gPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogRXF1aXZhbGVudCB0byBCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqICovXG5CdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcbn1cbi8qKlxuICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICB9XG5cbiAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImVuY29kaW5nXCIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpXG4gIH1cblxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG5cbiAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblxuICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHtcbiAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGxcbiAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLlxuICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKVxuICAgIHRoYXQgPSB0aGF0LnNsaWNlKDAsIGFjdHVhbClcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGggPCAwID8gMCA6IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgYXJyYXkuYnl0ZUxlbmd0aCAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyXG5cbiAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ29mZnNldFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KVxuICB9IGVsc2Uge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBhcnJheVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0ID0gZnJvbUFycmF5TGlrZSh0aGF0LCBhcnJheSlcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG4gICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG4gICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW4pXG5cbiAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGF0XG4gICAgfVxuXG4gICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKVxuICAgIHJldHVybiB0aGF0XG4gIH1cblxuICBpZiAob2JqKSB7XG4gICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IGlzbmFuKG9iai5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMClcbiAgICAgIH1cbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iailcbiAgICB9XG5cbiAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqLmRhdGEpKSB7XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmouZGF0YSlcbiAgICB9XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuJylcbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGgoKWAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkge1xuICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcbiAgICBsZW5ndGggPSAwXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV1cbiAgICAgIHkgPSBiW2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdsYXRpbjEnOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gIH1cblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApXG4gIH1cblxuICB2YXIgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgIHZhciBidWYgPSBsaXN0W2ldXG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgICB9XG4gICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpXG4gICAgcG9zICs9IGJ1Zi5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmZmVyXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgc3RyaW5nIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5ieXRlTGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgc3RyaW5nID0gJycgKyBzdHJpbmdcbiAgfVxuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXG4gIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG4gIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG4gIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICAvLyBSZXR1cm4gZWFybHkgaWYgc3RhcnQgPiB0aGlzLmxlbmd0aC4gRG9uZSBoZXJlIHRvIHByZXZlbnQgcG90ZW50aWFsIHVpbnQzMlxuICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChlbmQgPD0gMCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLy8gRm9yY2UgY29lcnNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC5cbiAgZW5kID4+Pj0gMFxuICBzdGFydCA+Pj49IDBcblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuLy8gVGhlIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgYW5kIGBpcy1idWZmZXJgIChpbiBTYWZhcmkgNS03KSB0byBkZXRlY3Rcbi8vIEJ1ZmZlciBpbnN0YW5jZXMuXG5CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWVcblxuZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuICB2YXIgaSA9IGJbbl1cbiAgYltuXSA9IGJbbV1cbiAgYlttXSA9IGlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDIgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAxKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA0ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgOCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gOCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDcpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpXG4gICAgc3dhcCh0aGlzLCBpICsgMiwgaSArIDUpXG4gICAgc3dhcCh0aGlzLCBpICsgMywgaSArIDQpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgfVxuXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzU3RhcnQgPSAwXG4gIH1cbiAgaWYgKHRoaXNFbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHtcbiAgICByZXR1cm4gLTFcbiAgfVxuICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIHN0YXJ0ID4+Pj0gMFxuICBlbmQgPj4+PSAwXG4gIHRoaXNTdGFydCA+Pj49IDBcbiAgdGhpc0VuZCA+Pj49IDBcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0KSByZXR1cm4gMFxuXG4gIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydFxuICB2YXIgeSA9IGVuZCAtIHN0YXJ0XG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuXG4gIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxuICB2YXIgdGFyZ2V0Q29weSA9IHRhcmdldC5zbGljZShzdGFydCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAodGhpc0NvcHlbaV0gIT09IHRhcmdldENvcHlbaV0pIHtcbiAgICAgIHggPSB0aGlzQ29weVtpXVxuICAgICAgeSA9IHRhcmdldENvcHlbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG4vLyBGaW5kcyBlaXRoZXIgdGhlIGZpcnN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA+PSBgYnl0ZU9mZnNldGAsXG4vLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuLy9cbi8vIEFyZ3VtZW50czpcbi8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG4vLyAtIHZhbCAtIGEgc3RyaW5nLCBCdWZmZXIsIG9yIG51bWJlclxuLy8gLSBieXRlT2Zmc2V0IC0gYW4gaW5kZXggaW50byBgYnVmZmVyYDsgd2lsbCBiZSBjbGFtcGVkIHRvIGFuIGludDMyXG4vLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuLy8gLSBkaXIgLSB0cnVlIGZvciBpbmRleE9mLCBmYWxzZSBmb3IgbGFzdEluZGV4T2ZcbmZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mIChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcbiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG4gIGlmICh0eXBlb2YgYnl0ZU9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IGJ5dGVPZmZzZXRcbiAgICBieXRlT2Zmc2V0ID0gMFxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7XG4gICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcbiAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgfVxuICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgIC8vIENvZXJjZSB0byBOdW1iZXIuXG4gIGlmIChpc05hTihieXRlT2Zmc2V0KSkge1xuICAgIC8vIGJ5dGVPZmZzZXQ6IGl0IGl0J3MgdW5kZWZpbmVkLCBudWxsLCBOYU4sIFwiZm9vXCIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlclxuICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXRcbiAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkge1xuICAgIGlmIChkaXIpIHJldHVybiAtMVxuICAgIGVsc2UgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggLSAxXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IDApIHtcbiAgICBpZiAoZGlyKSBieXRlT2Zmc2V0ID0gMFxuICAgIGVsc2UgcmV0dXJuIC0xXG4gIH1cblxuICAvLyBOb3JtYWxpemUgdmFsXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXG4gIH1cblxuICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZlxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcbiAgICAvLyBTcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZy9idWZmZXIgYWx3YXlzIGZhaWxzXG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMHhGRiAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXG4gICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoZGlyKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG5mdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIHZhciBpbmRleFNpemUgPSAxXG4gIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoXG4gIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoXG5cbiAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XG4gICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHtcbiAgICAgIGlmIChhcnIubGVuZ3RoIDwgMiB8fCB2YWwubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gLTFcbiAgICAgIH1cbiAgICAgIGluZGV4U2l6ZSA9IDJcbiAgICAgIGFyckxlbmd0aCAvPSAyXG4gICAgICB2YWxMZW5ndGggLz0gMlxuICAgICAgYnl0ZU9mZnNldCAvPSAyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZCAoYnVmLCBpKSB7XG4gICAgaWYgKGluZGV4U2l6ZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIGJ1ZltpXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpICogaW5kZXhTaXplKVxuICAgIH1cbiAgfVxuXG4gIHZhciBpXG4gIGlmIChkaXIpIHtcbiAgICB2YXIgZm91bmRJbmRleCA9IC0xXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aFxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgZm91bmQgPSB0cnVlXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIHRoaXMuaW5kZXhPZih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSAhPT0gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSlcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG4gIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG4gICAgKVxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKVxuICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgKytpKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZlxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IDBcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuICB2YXIgaVxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuICAgICAgdGFyZ2V0LFxuICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLFxuICAgICAgdGFyZ2V0U3RhcnRcbiAgICApXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIFVzYWdlOlxuLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydFxuICAgICAgc3RhcnQgPSAwXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH1cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdmFyIGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKVxuICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcbiAgICAgICAgdmFsID0gY29kZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nJylcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDI1NVxuICB9XG5cbiAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuXG4gIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzdGFydCA9IHN0YXJ0ID4+PiAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblxuICBpZiAoIXZhbCkgdmFsID0gMFxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICAgIHRoaXNbaV0gPSB2YWxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbClcbiAgICAgID8gdmFsXG4gICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSlcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG4gICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcbiAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gaXNuYW4gKHZhbCkge1xuICByZXR1cm4gdmFsICE9PSB2YWwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmVcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9idWZmZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9idWZmZXIvfi9pc2FycmF5L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwidmFyIGNhblVzZURPTSA9ICEhKFxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICB3aW5kb3cuZG9jdW1lbnQgJiZcbiAgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnRcbik7XG5cbm1vZHVsZS5leHBvcnRzID0gY2FuVXNlRE9NO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jYW4tdXNlLWRvbS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3B0cykge1xuICByZXR1cm4gbmV3IEVsZW1lbnRDbGFzcyhvcHRzKVxufVxuXG5mdW5jdGlvbiBpbmRleE9mKGFyciwgcHJvcCkge1xuICBpZiAoYXJyLmluZGV4T2YpIHJldHVybiBhcnIuaW5kZXhPZihwcm9wKVxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKVxuICAgIGlmIChhcnJbaV0gPT09IHByb3ApIHJldHVybiBpXG4gIHJldHVybiAtMVxufVxuXG5mdW5jdGlvbiBFbGVtZW50Q2xhc3Mob3B0cykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRWxlbWVudENsYXNzKSkgcmV0dXJuIG5ldyBFbGVtZW50Q2xhc3Mob3B0cylcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIGlmICghb3B0cykgb3B0cyA9IHt9XG5cbiAgLy8gc2ltaWxhciBkb2luZyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IGJ1dCB3b3JrcyBpbiBJRThcbiAgaWYgKG9wdHMubm9kZVR5cGUpIG9wdHMgPSB7ZWw6IG9wdHN9XG5cbiAgdGhpcy5vcHRzID0gb3B0c1xuICB0aGlzLmVsID0gb3B0cy5lbCB8fCBkb2N1bWVudC5ib2R5XG4gIGlmICh0eXBlb2YgdGhpcy5lbCAhPT0gJ29iamVjdCcpIHRoaXMuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuZWwpXG59XG5cbkVsZW1lbnRDbGFzcy5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gIHZhciBlbCA9IHRoaXMuZWxcbiAgaWYgKCFlbCkgcmV0dXJuXG4gIGlmIChlbC5jbGFzc05hbWUgPT09IFwiXCIpIHJldHVybiBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWVcbiAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoJyAnKVxuICBpZiAoaW5kZXhPZihjbGFzc2VzLCBjbGFzc05hbWUpID4gLTEpIHJldHVybiBjbGFzc2VzXG4gIGNsYXNzZXMucHVzaChjbGFzc05hbWUpXG4gIGVsLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpXG4gIHJldHVybiBjbGFzc2VzXG59XG5cbkVsZW1lbnRDbGFzcy5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gIHZhciBlbCA9IHRoaXMuZWxcbiAgaWYgKCFlbCkgcmV0dXJuXG4gIGlmIChlbC5jbGFzc05hbWUgPT09IFwiXCIpIHJldHVyblxuICB2YXIgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZS5zcGxpdCgnICcpXG4gIHZhciBpZHggPSBpbmRleE9mKGNsYXNzZXMsIGNsYXNzTmFtZSlcbiAgaWYgKGlkeCA+IC0xKSBjbGFzc2VzLnNwbGljZShpZHgsIDEpXG4gIGVsLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpXG4gIHJldHVybiBjbGFzc2VzXG59XG5cbkVsZW1lbnRDbGFzcy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gIHZhciBlbCA9IHRoaXMuZWxcbiAgaWYgKCFlbCkgcmV0dXJuXG4gIHZhciBjbGFzc2VzID0gZWwuY2xhc3NOYW1lLnNwbGl0KCcgJylcbiAgcmV0dXJuIGluZGV4T2YoY2xhc3NlcywgY2xhc3NOYW1lKSA+IC0xXG59XG5cbkVsZW1lbnRDbGFzcy5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gIHZhciBlbCA9IHRoaXMuZWxcbiAgaWYgKCFlbCkgcmV0dXJuXG4gIGlmICh0aGlzLmhhcyhjbGFzc05hbWUpKSB0aGlzLnJlbW92ZShjbGFzc05hbWUpXG4gIGVsc2UgdGhpcy5hZGQoY2xhc3NOYW1lKVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2VsZW1lbnQtY2xhc3MvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE1IEplZCBXYXRzb24uXG4gIEJhc2VkIG9uIGNvZGUgdGhhdCBpcyBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICBBbGwgcmlnaHRzIHJlc2VydmVkLlxuKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBjYW5Vc2VET00gPSAhIShcblx0XHR0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuXHRcdHdpbmRvdy5kb2N1bWVudCAmJlxuXHRcdHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50XG5cdCk7XG5cblx0dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0ge1xuXG5cdFx0Y2FuVXNlRE9NOiBjYW5Vc2VET00sXG5cblx0XHRjYW5Vc2VXb3JrZXJzOiB0eXBlb2YgV29ya2VyICE9PSAndW5kZWZpbmVkJyxcblxuXHRcdGNhblVzZUV2ZW50TGlzdGVuZXJzOlxuXHRcdFx0Y2FuVXNlRE9NICYmICEhKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IHdpbmRvdy5hdHRhY2hFdmVudCksXG5cblx0XHRjYW5Vc2VWaWV3cG9ydDogY2FuVXNlRE9NICYmICEhd2luZG93LnNjcmVlblxuXG5cdH07XG5cblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIEV4ZWN1dGlvbkVudmlyb25tZW50O1xuXHRcdH0pO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudDtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuRXhlY3V0aW9uRW52aXJvbm1lbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudDtcblx0fVxuXG59KCkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2V4ZW52L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNzVcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaWVlZTc1NC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTk0XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsInZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgYXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG52YXIgTkVXVEFCID0gJ19ibGFuayc7XG5cbnZhciBPdXRib3VuZExpbmsgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnT3V0Ym91bmRMaW5rJyxcbiAgcHJvcFR5cGVzOiB7XG4gICAgZXZlbnRMYWJlbDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gIH0sXG4gIHN0YXRpY3M6IHtcbiAgICB0cmFja0xpbms6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnNvbGUud2FybignZ2EgdHJhY2tpbmcgbm90IGVuYWJsZWQnKTtcbiAgICB9XG4gIH0sXG4gIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIHZhciBldmVudE1ldGEgPSB7IGxhYmVsOiBwcm9wcy5ldmVudExhYmVsIH07XG4gICAgT3V0Ym91bmRMaW5rLnRyYWNrTGluayhldmVudE1ldGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChwcm9wcy50YXJnZXQgPT09IE5FV1RBQikge1xuICAgICAgICB3aW5kb3cub3Blbihwcm9wcy50bywgTkVXVEFCKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcHJvcHMudG87XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAocHJvcHMub25DbGljaykge1xuICAgICAgcHJvcHMub25DbGljayhlKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCB0aGlzLnByb3BzLCB7XG4gICAgICBocmVmOiB0aGlzLnByb3BzLnRvLFxuICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDbGlja1xuICAgIH0pO1xuICAgIGRlbGV0ZSBwcm9wcy5ldmVudExhYmVsO1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdhJywgcHJvcHMpO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBPdXRib3VuZExpbms7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtZ2Evc3JjL2NvbXBvbmVudHMvT3V0Ym91bmRMaW5rLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiLyoqXG4gKiBSZWFjdCBHb29nbGUgQW5hbHl0aWNzIE1vZHVsZVxuICpcbiAqIEBwYWNrYWdlIHJlYWN0LWdhXG4gKiBAYXV0aG9yICBBZGFtIExvZnRpbmcgPGFkYW1AbW96aWxsYWZvdW5kYXRpb24ub3JnPlxuICogICAgICAgICAgQXR1bCBWYXJtYSA8YXR1bEBtb3ppbGxhZm91bmRhdGlvbi5vcmc+XG4gKi9cblxuLyoqXG4gKiBVdGlsaXRpZXNcbiAqL1xudmFyIGZvcm1hdCA9IHJlcXVpcmUoJy4vdXRpbHMvZm9ybWF0Jyk7XG52YXIgcmVtb3ZlTGVhZGluZ1NsYXNoID0gcmVxdWlyZSgnLi91dGlscy9yZW1vdmVMZWFkaW5nU2xhc2gnKTtcbnZhciB0cmltID0gcmVxdWlyZSgnLi91dGlscy90cmltJyk7XG5cbnZhciB3YXJuID0gcmVxdWlyZSgnLi91dGlscy9jb25zb2xlL3dhcm4nKTtcbnZhciBsb2cgPSByZXF1aXJlKCcuL3V0aWxzL2NvbnNvbGUvbG9nJyk7XG5cbnZhciBfZGVidWcgPSBmYWxzZTtcbnZhciBfdGl0bGVDYXNlID0gdHJ1ZTtcblxudmFyIF9mb3JtYXQgPSBmdW5jdGlvbiAocykge1xuICByZXR1cm4gZm9ybWF0KHMsIF90aXRsZUNhc2UpO1xufTtcblxudmFyIFJlYWN0R0EgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIChnYVRyYWNraW5nSUQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWdhVHJhY2tpbmdJRCkge1xuICAgICAgd2FybignZ2FUcmFja2luZ0lEIGlzIHJlcXVpcmVkIGluIGluaXRpYWxpemUoKScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucy5kZWJ1ZyAmJiBvcHRpb25zLmRlYnVnID09PSB0cnVlKSB7XG4gICAgICAgIF9kZWJ1ZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnRpdGxlQ2FzZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgX3RpdGxlQ2FzZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9cbiAgICAvLyBqc2NzOmRpc2FibGVcbiAgICAoZnVuY3Rpb24gKGksIHMsIG8sIGcsIHIsIGEsIG0pIHtcbiAgICAgIGlbJ0dvb2dsZUFuYWx5dGljc09iamVjdCddID0gcjtcbiAgICAgIGlbcl0gPSBpW3JdIHx8IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKGlbcl0ucSA9IGlbcl0ucSB8fCBbXSkucHVzaChhcmd1bWVudHMpO1xuICAgICAgfSwgaVtyXS5sID0gMSAqIG5ldyBEYXRlKCk7XG4gICAgICBhID0gcy5jcmVhdGVFbGVtZW50KG8pLFxuICAgICAgICAgIG0gPSBzLmdldEVsZW1lbnRzQnlUYWdOYW1lKG8pWzBdO1xuICAgICAgYS5hc3luYyA9IDE7XG4gICAgICBhLnNyYyA9IGc7XG4gICAgICBtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsIG0pO1xuICAgIH0pKHdpbmRvdywgZG9jdW1lbnQsICdzY3JpcHQnLCAnaHR0cHM6Ly93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vYW5hbHl0aWNzLmpzJywgJ2dhJyk7XG4gICAgLy8ganNjczplbmFibGVcblxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2FPcHRpb25zKSB7XG4gICAgICBnYSgnY3JlYXRlJywgZ2FUcmFja2luZ0lELCBvcHRpb25zLmdhT3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdhKCdjcmVhdGUnLCBnYVRyYWNraW5nSUQsICdhdXRvJyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBnYTpcbiAgICogUmV0dXJucyB0aGUgb3JpZ2luYWwgR0Egb2JqZWN0LlxuICAgKi9cbiAgZ2E6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGdhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJ2FyZ3VtZW50c1xcJyk7Jyk7XG4gICAgICAgIGxvZygnd2l0aCBhcmd1bWVudHM6ICcgKyBKU09OLnN0cmluZ2lmeShbXS5zbGljZS5hcHBseShhcmd1bWVudHMpKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2E7XG4gIH0sXG5cbiAgLyoqXG4gICAqIHNldDpcbiAgICogR0EgdHJhY2tlciBzZXQgbWV0aG9kXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZHNPYmplY3QgLSBhIGZpZWxkL3ZhbHVlIHBhaXIgb3IgYSBncm91cCBvZiBmaWVsZC92YWx1ZSBwYWlycyBvbiB0aGUgdHJhY2tlclxuICAgKi9cbiAgc2V0OiBmdW5jdGlvbiAoZmllbGRzT2JqZWN0KSB7XG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKCFmaWVsZHNPYmplY3QpIHtcbiAgICAgICAgd2FybignYGZpZWxkc09iamVjdGAgaXMgcmVxdWlyZWQgaW4gLnNldCgpJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBmaWVsZHNPYmplY3QgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHdhcm4oJ0V4cGVjdGVkIGBmaWVsZHNPYmplY3RgIGFyZyB0byBiZSBhbiBPYmplY3QnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZmllbGRzT2JqZWN0KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgd2FybignZW1wdHkgYGZpZWxkc09iamVjdGAgZ2l2ZW4gdG8gLnNldCgpJyk7XG4gICAgICB9XG5cbiAgICAgIGdhKCdzZXQnLCBmaWVsZHNPYmplY3QpO1xuXG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJ3NldFxcJywgZmllbGRzT2JqZWN0KTsnKTtcbiAgICAgICAgbG9nKCd3aXRoIGZpZWxkc09iamVjdDogJyArIEpTT04uc3RyaW5naWZ5KGZpZWxkc09iamVjdCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogc2VuZDpcbiAgICogQ2xvbmUgb2YgdGhlIGxvdyBsZXZlbCBgZ2Euc2VuZGAgbWV0aG9kXG4gICAqIFdBUk5JTkc6IE5vIHZhbGlkYXRpb25zIHdpbGwgYmUgYXBwbGllZCB0byB0aGlzXG4gICAqIEBwYXJhbSAge09iamVjdH0gZmllbGRPYmplY3QgLSBmaWVsZCBvYmplY3QgZm9yIHRyYWNraW5nIGRpZmZlcmVudCBhbmFseXRpY3NcbiAgICovXG4gIHNlbmQ6IGZ1bmN0aW9uIChmaWVsZE9iamVjdCkge1xuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGdhKCdzZW5kJywgZmllbGRPYmplY3QpO1xuXG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJ3NlbmRcXCcsIGZpZWxkT2JqZWN0KTsnKTtcbiAgICAgICAgbG9nKCd3aXRoIGZpZWxkT2JqZWN0OiAnICsgSlNPTi5zdHJpbmdpZnkoZmllbGRPYmplY3QpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIHBhZ2V2aWV3OlxuICAgKiBCYXNpYyBHQSBwYWdldmlldyB0cmFja2luZ1xuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHBhdGggLSB0aGUgY3VycmVudCBwYWdlIHBhZ2UgZS5nLiAnL2Fib3V0J1xuICAgKi9cbiAgcGFnZXZpZXc6IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB3YXJuKCdwYXRoIGlzIHJlcXVpcmVkIGluIC5wYWdldmlldygpJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcGF0aCA9IHRyaW0ocGF0aCk7XG4gICAgaWYgKHBhdGggPT09ICcnKSB7XG4gICAgICB3YXJuKCdwYXRoIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmcgaW4gLnBhZ2V2aWV3KCknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBnYSgnc2VuZCcsICdwYWdldmlldycsIHBhdGgpO1xuXG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJ3NlbmRcXCcsIFxcJ3BhZ2V2aWV3XFwnLCBwYXRoKTsnKTtcbiAgICAgICAgbG9nKCd3aXRoIHBhdGg6ICcgKyBwYXRoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIG1vZGFsdmlldzpcbiAgICogYSBwcm94eSB0byBiYXNpYyBHQSBwYWdldmlldyB0cmFja2luZyB0byBjb25zaXN0ZW50bHkgdHJhY2tcbiAgICogbW9kYWwgdmlld3MgdGhhdCBhcmUgYW4gZXF1aXZhbGVudCBVWCB0byBhIHRyYWRpdGlvbmFsIHBhZ2V2aWV3XG4gICAqIEBwYXJhbSAge1N0cmluZ30gbW9kYWxOYW1lIGUuZy4gJ2FkZC1vci1lZGl0LWNsdWInXG4gICAqL1xuICBtb2RhbHZpZXc6IGZ1bmN0aW9uIChtb2RhbE5hbWUpIHtcbiAgICBpZiAoIW1vZGFsTmFtZSkge1xuICAgICAgd2FybignbW9kYWxOYW1lIGlzIHJlcXVpcmVkIGluIC5tb2RhbHZpZXcobW9kYWxOYW1lKScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1vZGFsTmFtZSA9IHRyaW0obW9kYWxOYW1lKTtcbiAgICBtb2RhbE5hbWUgPSByZW1vdmVMZWFkaW5nU2xhc2gobW9kYWxOYW1lKTtcblxuICAgIGlmIChtb2RhbE5hbWUgPT09ICcnKSB7XG4gICAgICB3YXJuKCdtb2RhbE5hbWUgY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZyBvciBhIHNpbmdsZSAvIGluIC5tb2RhbHZpZXcoKScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG1vZGFsTmFtZSA9IHRyaW0obW9kYWxOYW1lKTtcbiAgICAgIHZhciBwYXRoID0gJy9tb2RhbC8nICsgbW9kYWxOYW1lO1xuICAgICAgZ2EoJ3NlbmQnLCAncGFnZXZpZXcnLCBwYXRoKTtcblxuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdzZW5kXFwnLCBcXCdwYWdldmlld1xcJywgcGF0aCk7Jyk7XG4gICAgICAgIGxvZygnd2l0aCBwYXRoOiAnICsgcGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiB0aW1pbmc6XG4gICAqIEdBIHRpbWluZ1xuICAgKiBAcGFyYW0gYXJncy5jYXRlZ29yeSB7U3RyaW5nfSByZXF1aXJlZFxuICAgKiBAcGFyYW0gYXJncy52YXJpYWJsZSB7U3RyaW5nfSByZXF1aXJlZFxuICAgKiBAcGFyYW0gYXJncy52YWx1ZSAge0ludH0gIHJlcXVpcmVkXG4gICAqIEBwYXJhbSBhcmdzLmxhYmVsICB7U3RyaW5nfSByZXF1aXJlZFxuICAgKi9cbiAgdGltaW5nOiBmdW5jdGlvbiAoYXJncykge1xuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmICghYXJncyB8fCAhYXJncy5jYXRlZ29yeSB8fCAhYXJncy52YXJpYWJsZVxuICAgICAgICAgIHx8ICFhcmdzLnZhbHVlIHx8IHR5cGVvZiBhcmdzLnZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICB3YXJuKCdhcmdzLmNhdGVnb3J5LCBhcmdzLnZhcmlhYmxlICcgK1xuICAgICAgICAgICAgICAnQU5EIGFyZ3MudmFsdWUgYXJlIHJlcXVpcmVkIGluIHRpbWluZygpICcgK1xuICAgICAgICAgICAgICAnQU5EIGFyZ3MudmFsdWUgaGFzIHRvIGJlIGEgbnVtYmVyJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy9SZXF1aXJlZCBGaWVsZHNcbiAgICAgIHZhciBmaWVsZE9iamVjdCA9IHtcbiAgICAgICAgaGl0VHlwZTogJ3RpbWluZycsXG4gICAgICAgIHRpbWluZ0NhdGVnb3J5OiBfZm9ybWF0KGFyZ3MuY2F0ZWdvcnkpLFxuICAgICAgICB0aW1pbmdWYXI6IF9mb3JtYXQoYXJncy52YXJpYWJsZSksXG4gICAgICAgIHRpbWluZ1ZhbHVlOiBhcmdzLnZhbHVlXG4gICAgICB9O1xuXG4gICAgICBpZiAoYXJncy5sYWJlbCkge1xuICAgICAgICBmaWVsZE9iamVjdC50aW1pbmdMYWJlbCA9IF9mb3JtYXQoYXJncy5sYWJlbCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2VuZChmaWVsZE9iamVjdCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBldmVudDpcbiAgICogR0EgZXZlbnQgdHJhY2tpbmdcbiAgICogQHBhcmFtIGFyZ3MuY2F0ZWdvcnkge1N0cmluZ30gcmVxdWlyZWRcbiAgICogQHBhcmFtIGFyZ3MuYWN0aW9uIHtTdHJpbmd9IHJlcXVpcmVkXG4gICAqIEBwYXJhbSBhcmdzLmxhYmVsIHtTdHJpbmd9IG9wdGlvbmFsXG4gICAqIEBwYXJhbSBhcmdzLnZhbHVlIHtJbnR9IG9wdGlvbmFsXG4gICAqIEBwYXJhbSBhcmdzLm5vbkludGVyYWN0aW9uIHtib29sZWFufSBvcHRpb25hbFxuICAgKi9cbiAgZXZlbnQ6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAvLyBTaW1wbGUgVmFsaWRhdGlvblxuICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLmNhdGVnb3J5IHx8ICFhcmdzLmFjdGlvbikge1xuICAgICAgICB3YXJuKCdhcmdzLmNhdGVnb3J5IEFORCBhcmdzLmFjdGlvbiBhcmUgcmVxdWlyZWQgaW4gZXZlbnQoKScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFJlcXVpcmVkIEZpZWxkc1xuICAgICAgdmFyIGZpZWxkT2JqZWN0ID0ge1xuICAgICAgICBoaXRUeXBlOiAnZXZlbnQnLFxuICAgICAgICBldmVudENhdGVnb3J5OiBfZm9ybWF0KGFyZ3MuY2F0ZWdvcnkpLFxuICAgICAgICBldmVudEFjdGlvbjogX2Zvcm1hdChhcmdzLmFjdGlvbilcbiAgICAgIH07XG5cbiAgICAgIC8vIE9wdGlvbmFsIEZpZWxkc1xuICAgICAgaWYgKGFyZ3MubGFiZWwpIHtcbiAgICAgICAgZmllbGRPYmplY3QuZXZlbnRMYWJlbCA9IF9mb3JtYXQoYXJncy5sYWJlbCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChhcmdzLnZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJncy52YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICB3YXJuKCdFeHBlY3RlZCBgYXJncy52YWx1ZWAgYXJnIHRvIGJlIGEgTnVtYmVyLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkT2JqZWN0LmV2ZW50VmFsdWUgPSBhcmdzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhcmdzLm5vbkludGVyYWN0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJncy5ub25JbnRlcmFjdGlvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgd2FybignYGFyZ3Mubm9uSW50ZXJhY3Rpb25gIG11c3QgYmUgYSBib29sZWFuLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkT2JqZWN0Lm5vbkludGVyYWN0aW9uID0gYXJncy5ub25JbnRlcmFjdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYXJncy50cmFuc3BvcnQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzLnRyYW5zcG9ydCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB3YXJuKCdgYXJncy50cmFuc3BvcnRgIG11c3QgYmUgYSBzdHJpbmcuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKFsnYmVhY29uJywgJ3hocicsICdpbWFnZSddLmluZGV4T2YoYXJncy50cmFuc3BvcnQpID09PSAtMSkge1xuICAgICAgICAgICAgd2FybignYGFyZ3MudHJhbnNwb3J0YCBtdXN0IGJlIGVpdGhlciBvbmUgb2YgdGhlc2UgdmFsdWVzOiBgYmVhY29uYCwgYHhocmAgb3IgYGltYWdlYCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZpZWxkT2JqZWN0LnRyYW5zcG9ydCA9IGFyZ3MudHJhbnNwb3J0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbmQgdG8gR0FcbiAgICAgIHRoaXMuc2VuZChmaWVsZE9iamVjdCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBleGNlcHRpb246XG4gICAqIEdBIGV4Y2VwdGlvbiB0cmFja2luZ1xuICAgKiBAcGFyYW0gYXJncy5kZXNjcmlwdGlvbiB7U3RyaW5nfSBvcHRpb25hbFxuICAgKiBAcGFyYW0gYXJncy5mYXRhbCB7Ym9vbGVhbn0gb3B0aW9uYWxcbiAgICovXG4gIGV4Y2VwdGlvbjogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgIC8vIFJlcXVpcmVkIEZpZWxkc1xuICAgICAgdmFyIGZpZWxkT2JqZWN0ID0ge1xuICAgICAgICBoaXRUeXBlOiAnZXhjZXB0aW9uJ1xuICAgICAgfTtcblxuICAgICAgLy8gT3B0aW9uYWwgRmllbGRzXG4gICAgICBpZiAoYXJncy5kZXNjcmlwdGlvbikge1xuICAgICAgICBmaWVsZE9iamVjdC5leERlc2NyaXB0aW9uID0gX2Zvcm1hdChhcmdzLmRlc2NyaXB0aW9uKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBhcmdzLmZhdGFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3MuZmF0YWwgIT09ICdib29sZWFuJykge1xuICAgICAgICAgIHdhcm4oJ2BhcmdzLmZhdGFsYCBtdXN0IGJlIGEgYm9vbGVhbi4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWVsZE9iamVjdC5leEZhdGFsID0gYXJncy5mYXRhbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTZW5kIHRvIEdBXG4gICAgICB0aGlzLnNlbmQoZmllbGRPYmplY3QpO1xuICAgIH1cbiAgfSxcblxuICBwbHVnaW46IHtcbiAgICAvKipcbiAgICAgKiByZXF1aXJlOlxuICAgICAqIEdBIHJlcXVpcmVzIGEgcGx1Z2luXG4gICAgICogQHBhcmFtIG5hbWUge1N0cmluZ30gZS5nLiAnZWNvbW1lcmNlJyBvciAnbXlwbHVnaW4nXG4gICAgICogQHBhcmFtIG9wdGlvbnMge09iamVjdH0gb3B0aW9uYWwgZS5nIHtwYXRoOiAnL2xvZycsIGRlYnVnOiB0cnVlfVxuICAgICAqL1xuICAgIHJlcXVpcmU6IGZ1bmN0aW9uIChuYW1lLCBvcHRpb25zKSB7XG4gICAgICBpZiAodHlwZW9mIGdhID09PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgICAgLy8gUmVxdWlyZWQgRmllbGRzXG4gICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgIHdhcm4oJ2BuYW1lYCBpcyByZXF1aXJlZCBpbiAucmVxdWlyZSgpJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbmFtZSA9IHRyaW0obmFtZSk7XG4gICAgICAgIGlmIChuYW1lID09PSAnJykge1xuICAgICAgICAgIHdhcm4oJ2BuYW1lYCBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nIGluIC5yZXF1aXJlKCknKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPcHRpb25hbCBGaWVsZHNcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB3YXJuKCdFeHBlY3RlZCBgb3B0aW9uc2AgYXJnIHRvIGJlIGFuIE9iamVjdCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhvcHRpb25zKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHdhcm4oJ0VtcHR5IGBvcHRpb25zYCBnaXZlbiB0byAucmVxdWlyZSgpJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZ2EoJ3JlcXVpcmUnLCBuYW1lLCBvcHRpb25zKTtcblxuICAgICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJ3JlcXVpcmVcXCcsIFxcJycgKyBuYW1lICsgJ1xcJywgJyArIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpICsgJyk7Jyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdhKCdyZXF1aXJlJywgbmFtZSk7XG5cbiAgICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCdyZXF1aXJlXFwnLCBcXCcnICsgbmFtZSArICdcXCcpOycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBleGVjdXRlOlxuICAgICAqIEdBIGV4ZWN1dGUgYWN0aW9uIGZvciBwbHVnaW5cbiAgICAgKiBUYWtlcyB2YXJpYWJsZSBudW1iZXIgb2YgYXJndW1lbnRzXG4gICAgICogQHBhcmFtIHBsdWdpbk5hbWUge1N0cmluZ30gZS5nLiAnZWNvbW1lcmNlJyBvciAnbXlwbHVnaW4nXG4gICAgICogQHBhcmFtIGFjdGlvbiB7U3RyaW5nfSBlLmcuICdhZGRJdGVtJyBvciAnbXlDdXN0b21BY3Rpb24nXG4gICAgICogQHBhcmFtIGFjdGlvblR5cGUge1N0cmluZ30gb3B0aW9uYWwgZS5nLiAnZGV0YWlsJ1xuICAgICAqIEBwYXJhbSBwYXlsb2FkIHtPYmplY3R9IG9wdGlvbmFsIGUuZyB7IGlkOiAnMXg1ZScsIG5hbWUgOiAnTXkgcHJvZHVjdCB0byB0cmFjaycgfVxuICAgICAqL1xuICAgIGV4ZWN1dGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblxuICAgICAgdmFyIHBsdWdpbk5hbWUgPSBhcmdzWzBdO1xuICAgICAgdmFyIGFjdGlvbiA9IGFyZ3NbMV07XG4gICAgICB2YXIgcGF5bG9hZDtcbiAgICAgIHZhciBhY3Rpb25UeXBlO1xuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgcGF5bG9hZCA9IGFyZ3NbMl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3Rpb25UeXBlID0gYXJnc1syXTtcbiAgICAgICAgcGF5bG9hZCA9IGFyZ3NbM107XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5OYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHdhcm4oJ0V4cGVjdGVkIGBwbHVnaW5OYW1lYCBhcmcgdG8gYmUgYSBTdHJpbmcuJyk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFjdGlvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB3YXJuKCdFeHBlY3RlZCBgYWN0aW9uYCBhcmcgdG8gYmUgYSBTdHJpbmcuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGNvbW1hbmQgPSBwbHVnaW5OYW1lICsgJzonICsgYWN0aW9uO1xuICAgICAgICAgIHBheWxvYWQgPSBwYXlsb2FkIHx8IG51bGw7XG4gICAgICAgICAgaWYgKGFjdGlvblR5cGUgJiYgcGF5bG9hZCkge1xuICAgICAgICAgICAgZ2EoY29tbWFuZCwgYWN0aW9uVHlwZSwgcGF5bG9hZCk7XG4gICAgICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICAgIGxvZygnY2FsbGVkIGdhKFxcJycgKyBjb21tYW5kICsgJ1xcJyk7Jyk7XG4gICAgICAgICAgICAgIGxvZygnYWN0aW9uVHlwZTogXCInICsgYWN0aW9uVHlwZSArICdcIiB3aXRoIHBheWxvYWQ6ICcgKyBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChwYXlsb2FkKSB7XG4gICAgICAgICAgICBnYShjb21tYW5kLCBwYXlsb2FkKTtcbiAgICAgICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgICAgbG9nKCdjYWxsZWQgZ2EoXFwnJyArIGNvbW1hbmQgKyAnXFwnKTsnKTtcbiAgICAgICAgICAgICAgbG9nKCd3aXRoIHBheWxvYWQ6ICcgKyBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdhKGNvbW1hbmQpO1xuICAgICAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgICBsb2coJ2NhbGxlZCBnYShcXCcnICsgY29tbWFuZCArICdcXCcpOycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBvdXRib3VuZExpbms6XG4gICAqIEdBIG91dGJvdW5kTGluayB0cmFja2luZ1xuICAgKiBAcGFyYW0gYXJncy5sYWJlbCB7U3RyaW5nfSBlLmcuIHVybCwgb3IgJ0NyZWF0ZSBhbiBBY2NvdW50J1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBoaXRDYWxsYmFjayAtIENhbGxlZCBhZnRlciBwcm9jZXNzaW5nIGEgaGl0LlxuICAgKi9cbiAgb3V0Ym91bmRMaW5rOiBmdW5jdGlvbiAoYXJncywgaGl0Q2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGhpdENhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3YXJuKCdoaXRDYWxsYmFjayBmdW5jdGlvbiBpcyByZXF1aXJlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcblxuICAgICAgLy8gU2ltcGxlIFZhbGlkYXRpb25cbiAgICAgIGlmICghYXJncyB8fCAhYXJncy5sYWJlbCkge1xuICAgICAgICB3YXJuKCdhcmdzLmxhYmVsIGlzIHJlcXVpcmVkIGluIG91dGJvdW5kTGluaygpJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUmVxdWlyZWQgRmllbGRzXG4gICAgICB2YXIgZmllbGRPYmplY3QgPSB7XG4gICAgICAgIGhpdFR5cGU6ICdldmVudCcsXG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdPdXRib3VuZCcsXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnQ2xpY2snLFxuICAgICAgICBldmVudExhYmVsOiBfZm9ybWF0KGFyZ3MubGFiZWwpXG4gICAgICB9O1xuXG4gICAgICB2YXIgc2FmZXR5Q2FsbGJhY2tDYWxsZWQgPSBmYWxzZTtcbiAgICAgIHZhciBzYWZldHlDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyBUaGlzIHByZXZlbnRzIGEgZGVsYXllZCByZXNwb25zZSBmcm9tIEdBXG4gICAgICAgIC8vIGNhdXNpbmcgaGl0Q2FsbGJhY2sgZnJvbSBiZWluZyBmaXJlZCB0d2ljZVxuICAgICAgICBzYWZldHlDYWxsYmFja0NhbGxlZCA9IHRydWU7XG5cbiAgICAgICAgaGl0Q2FsbGJhY2soKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFVzaW5nIGEgdGltZW91dCB0byBlbnN1cmUgdGhlIGV4ZWN1dGlvbiBvZiBjcml0aWNhbCBhcHBsaWNhdGlvbiBjb2RlXG4gICAgICAvLyBpbiB0aGUgY2FzZSB3aGVuIHRoZSBHQSBzZXJ2ZXIgbWlnaHQgYmUgZG93blxuICAgICAgLy8gb3IgYW4gYWQgYmxvY2tlciBwcmV2ZW50cyBzZW5kaW5nIHRoZSBkYXRhXG5cbiAgICAgIC8vIHJlZ2lzdGVyIHNhZmV0eSBuZXQgdGltZW91dDpcbiAgICAgIHZhciB0ID0gc2V0VGltZW91dChzYWZldHlDYWxsYmFjaywgMjUwKTtcblxuICAgICAgdmFyIGNsZWFyYWJsZUNhbGxiYWNrRm9yR0EgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgaWYgKCFzYWZldHlDYWxsYmFja0NhbGxlZCkge1xuICAgICAgICAgIGhpdENhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZpZWxkT2JqZWN0LmhpdENhbGxiYWNrID0gY2xlYXJhYmxlQ2FsbGJhY2tGb3JHQTtcblxuICAgICAgLy8gU2VuZCB0byBHQVxuICAgICAgdGhpcy5zZW5kKGZpZWxkT2JqZWN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgZ2EgaXMgbm90IGRlZmluZWQsIHJldHVybiB0aGUgY2FsbGJhY2sgc28gdGhlIGFwcGxpY2F0aW9uXG4gICAgICAvLyBjb250aW51ZXMgdG8gd29yayBhcyBleHBlY3RlZFxuICAgICAgc2V0VGltZW91dChoaXRDYWxsYmFjaywgMCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgT3V0Ym91bmRMaW5rID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL091dGJvdW5kTGluaycpO1xuT3V0Ym91bmRMaW5rLm9yaWdUcmFja0xpbmsgPSBPdXRib3VuZExpbmsudHJhY2tMaW5rO1xuT3V0Ym91bmRMaW5rLnRyYWNrTGluayA9IFJlYWN0R0Eub3V0Ym91bmRMaW5rLmJpbmQoUmVhY3RHQSk7XG5SZWFjdEdBLk91dGJvdW5kTGluayA9IE91dGJvdW5kTGluaztcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEdBO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWdhL3NyYy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsImZ1bmN0aW9uIGxvZyhzKSB7XG4gIGNvbnNvbGUuaW5mbygnW3JlYWN0LWdhXScsIHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxvZztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1nYS9zcmMvdXRpbHMvY29uc29sZS9sb2cuanNcbi8vIG1vZHVsZSBpZCA9IDI3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgbWlnaHRCZUVtYWlsID0gcmVxdWlyZSgnLi9taWdodEJlRW1haWwnKTtcbnZhciB0b1RpdGxlQ2FzZSA9IHJlcXVpcmUoJy4vdG9UaXRsZUNhc2UnKTtcbnZhciB3YXJuID0gcmVxdWlyZSgnLi9jb25zb2xlL3dhcm4nKTtcblxudmFyIF9yZWRhY3RlZCA9ICdSRURBQ1RFRCAoUG90ZW50aWFsIEVtYWlsIEFkZHJlc3MpJztcblxuZnVuY3Rpb24gZm9ybWF0KHMsIHRpdGxlQ2FzZSkge1xuICBpZiAobWlnaHRCZUVtYWlsKHMpKSB7XG4gICAgd2FybignVGhpcyBhcmcgbG9va3MgbGlrZSBhbiBlbWFpbCBhZGRyZXNzLCByZWRhY3RpbmcuJyk7XG4gICAgcmV0dXJuIF9yZWRhY3RlZDtcbiAgfVxuXG4gIGlmICh0aXRsZUNhc2UpIHtcbiAgICByZXR1cm4gdG9UaXRsZUNhc2Uocyk7XG4gIH1cblxuICByZXR1cm4gcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmb3JtYXQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtZ2Evc3JjL3V0aWxzL2Zvcm1hdC5qc1xuLy8gbW9kdWxlIGlkID0gMjc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIi8vIFNlZSBpZiBzIGNvdWxkIGJlIGFuIGVtYWlsIGFkZHJlc3MuIFdlIGRvbid0IHdhbnQgdG8gc2VuZCBwZXJzb25hbCBkYXRhIGxpa2UgZW1haWwuXG4vLyBodHRwczovL3N1cHBvcnQuZ29vZ2xlLmNvbS9hbmFseXRpY3MvYW5zd2VyLzI3OTU5ODM/aGw9ZW5cbmZ1bmN0aW9uIG1pZ2h0QmVFbWFpbChzKSB7XG4gIC8vIFRoZXJlJ3Mgbm8gcG9pbnQgdHJ5aW5nIHRvIHZhbGlkYXRlIHJmYzgyMiBmdWxseSwganVzdCBsb29rIGZvciAuLi5ALi4uXG4gIHJldHVybiAoL1teQF0rQFteQF0rLykudGVzdChzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtaWdodEJlRW1haWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtZ2Evc3JjL3V0aWxzL21pZ2h0QmVFbWFpbC5qc1xuLy8gbW9kdWxlIGlkID0gMjc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsImZ1bmN0aW9uIHJlbW92ZUxlYWRpbmdTbGFzaChzKSB7XG4gIGlmIChzLnN1YnN0cmluZygwLCAxKSA9PT0gJy8nKSB7XG4gICAgcyA9IHMuc3Vic3RyaW5nKDEpO1xuICB9XG5cbiAgcmV0dXJuIHM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVtb3ZlTGVhZGluZ1NsYXNoO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWdhL3NyYy91dGlscy9yZW1vdmVMZWFkaW5nU2xhc2guanNcbi8vIG1vZHVsZSBpZCA9IDI3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIvKipcbiAqIFRvIFRpdGxlIENhc2UgMi4xIC0gaHR0cDovL2luZGl2aWRlZC5jb20vY29kZS90by10aXRsZS1jYXNlL1xuICogQ29weXJpZ2h0IDIwMDgtMjAxMyBEYXZpZCBHb3VjaC4gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvdWNoL3RvLXRpdGxlLWNhc2VcbiAqL1xuXG52YXIgdHJpbSA9IHJlcXVpcmUoJy4vdHJpbScpO1xuXG5mdW5jdGlvbiB0b1RpdGxlQ2FzZShzKSB7XG4gIHZhciBzbWFsbFdvcmRzID0gL14oYXxhbnxhbmR8YXN8YXR8YnV0fGJ5fGVufGZvcnxpZnxpbnxub3J8b2Z8b258b3J8cGVyfHRoZXx0b3x2cz9cXC4/fHZpYSkkL2k7XG4gIHMgPSB0cmltKHMpO1xuXG4gIHJldHVybiBzLnJlcGxhY2UoL1tBLVphLXowLTlcXHUwMEMwLVxcdTAwRkZdK1teXFxzLV0qL2csIGZ1bmN0aW9uIChtYXRjaCwgaW5kZXgsIHRpdGxlKSB7XG4gICAgaWYgKGluZGV4ID4gMCAmJlxuICAgICAgICBpbmRleCArIG1hdGNoLmxlbmd0aCAhPT0gdGl0bGUubGVuZ3RoICYmXG4gICAgICAgIG1hdGNoLnNlYXJjaChzbWFsbFdvcmRzKSA+IC0xICYmXG4gICAgICAgIHRpdGxlLmNoYXJBdChpbmRleCAtIDIpICE9PSAnOicgJiZcbiAgICAgICAgKHRpdGxlLmNoYXJBdChpbmRleCArIG1hdGNoLmxlbmd0aCkgIT09ICctJyB8fCB0aXRsZS5jaGFyQXQoaW5kZXggLSAxKSA9PT0gJy0nKSAmJlxuICAgICAgICB0aXRsZS5jaGFyQXQoaW5kZXggLSAxKS5zZWFyY2goL1teXFxzLV0vKSA8IDApIHtcbiAgICAgIHJldHVybiBtYXRjaC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGlmIChtYXRjaC5zdWJzdHIoMSkuc2VhcmNoKC9bQS1aXXxcXC4uLykgPiAtMSkge1xuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cblxuICAgIHJldHVybiBtYXRjaC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1hdGNoLnN1YnN0cigxKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9UaXRsZUNhc2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3QtZ2Evc3JjL3V0aWxzL3RvVGl0bGVDYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzdcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwidmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBSZWFjdERPTSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZXhlbnYnKTtcbnZhciBNb2RhbFBvcnRhbCA9IFJlYWN0LmNyZWF0ZUZhY3RvcnkocmVxdWlyZSgnLi9Nb2RhbFBvcnRhbCcpKTtcbnZhciBhcmlhQXBwSGlkZXIgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2FyaWFBcHBIaWRlcicpO1xudmFyIGVsZW1lbnRDbGFzcyA9IHJlcXVpcmUoJ2VsZW1lbnQtY2xhc3MnKTtcbnZhciByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciA9IHJlcXVpcmUoXCJyZWFjdC1kb21cIikudW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXI7XG52YXIgQXNzaWduID0gcmVxdWlyZSgnbG9kYXNoLmFzc2lnbicpO1xuXG52YXIgU2FmZUhUTUxFbGVtZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gd2luZG93LkhUTUxFbGVtZW50IDoge307XG52YXIgQXBwRWxlbWVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IGRvY3VtZW50LmJvZHkgOiB7YXBwZW5kQ2hpbGQ6IGZ1bmN0aW9uKCkge319O1xuXG5mdW5jdGlvbiBnZXRQYXJlbnRFbGVtZW50KHBhcmVudFNlbGVjdG9yKSB7XG4gIHJldHVybiBwYXJlbnRTZWxlY3RvcigpO1xufVxuXG52YXIgTW9kYWwgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgZGlzcGxheU5hbWU6ICdNb2RhbCcsXG4gIHN0YXRpY3M6IHtcbiAgICBzZXRBcHBFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIEFwcEVsZW1lbnQgPSBhcmlhQXBwSGlkZXIuc2V0RWxlbWVudChlbGVtZW50KTtcbiAgICB9LFxuICAgIGluamVjdENTUzogZnVuY3Rpb24oKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gcHJvY2Vzcy5lbnYuTk9ERV9FTlZcbiAgICAgICAgJiYgY29uc29sZS53YXJuKCdSZWFjdC1Nb2RhbDogaW5qZWN0Q1NTIGhhcyBiZWVuIGRlcHJlY2F0ZWQgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnYW5kIG5vIGxvbmdlciBoYXMgYW55IGVmZmVjdC4gSXQgd2lsbCBiZSByZW1vdmVkIGluIGEgbGF0ZXIgdmVyc2lvbicpO1xuICAgIH1cbiAgfSxcblxuICBwcm9wVHlwZXM6IHtcbiAgICBpc09wZW46IFJlYWN0LlByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgc3R5bGU6IFJlYWN0LlByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBjb250ZW50OiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICAgICAgb3ZlcmxheTogUmVhY3QuUHJvcFR5cGVzLm9iamVjdFxuICAgIH0pLFxuICAgIHBvcnRhbENsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICBhcHBFbGVtZW50OiBSZWFjdC5Qcm9wVHlwZXMuaW5zdGFuY2VPZihTYWZlSFRNTEVsZW1lbnQpLFxuICAgIG9uQWZ0ZXJPcGVuOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBvblJlcXVlc3RDbG9zZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgY2xvc2VUaW1lb3V0TVM6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXG4gICAgYXJpYUhpZGVBcHA6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgIHBhcmVudFNlbGVjdG9yOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICByb2xlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNvbnRlbnRMYWJlbDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gIH0sXG5cbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICBwb3J0YWxDbGFzc05hbWU6ICdSZWFjdE1vZGFsUG9ydGFsJyxcbiAgICAgIGFyaWFIaWRlQXBwOiB0cnVlLFxuICAgICAgY2xvc2VUaW1lb3V0TVM6IDAsXG4gICAgICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiB0cnVlLFxuICAgICAgcGFyZW50U2VsZWN0b3I6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LmJvZHk7IH1cbiAgICB9O1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLm5vZGUuY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5wb3J0YWxDbGFzc05hbWU7XG5cbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50RWxlbWVudCh0aGlzLnByb3BzLnBhcmVudFNlbGVjdG9yKTtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB0aGlzLnJlbmRlclBvcnRhbCh0aGlzLnByb3BzKTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXdQcm9wcykge1xuICAgIHZhciBjdXJyZW50UGFyZW50ID0gZ2V0UGFyZW50RWxlbWVudCh0aGlzLnByb3BzLnBhcmVudFNlbGVjdG9yKTtcbiAgICB2YXIgbmV3UGFyZW50ID0gZ2V0UGFyZW50RWxlbWVudChuZXdQcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG5cbiAgICBpZihuZXdQYXJlbnQgIT09IGN1cnJlbnRQYXJlbnQpIHtcbiAgICAgIGN1cnJlbnRQYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgIG5ld1BhcmVudC5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuICAgIHRoaXMucmVuZGVyUG9ydGFsKG5ld1Byb3BzKTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYXJpYUhpZGVBcHApIHtcbiAgICAgIGFyaWFBcHBIaWRlci5zaG93KHRoaXMucHJvcHMuYXBwRWxlbWVudCk7XG4gICAgfVxuXG4gICAgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZSh0aGlzLm5vZGUpO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnRFbGVtZW50KHRoaXMucHJvcHMucGFyZW50U2VsZWN0b3IpO1xuICAgIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpO1xuICAgIGVsZW1lbnRDbGFzcyhkb2N1bWVudC5ib2R5KS5yZW1vdmUoJ1JlYWN0TW9kYWxfX0JvZHktLW9wZW4nKTtcbiAgfSxcblxuICByZW5kZXJQb3J0YWw6IGZ1bmN0aW9uKHByb3BzKSB7XG4gICAgaWYgKHByb3BzLmlzT3Blbikge1xuICAgICAgZWxlbWVudENsYXNzKGRvY3VtZW50LmJvZHkpLmFkZCgnUmVhY3RNb2RhbF9fQm9keS0tb3BlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50Q2xhc3MoZG9jdW1lbnQuYm9keSkucmVtb3ZlKCdSZWFjdE1vZGFsX19Cb2R5LS1vcGVuJyk7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLmFyaWFIaWRlQXBwKSB7XG4gICAgICBhcmlhQXBwSGlkZXIudG9nZ2xlKHByb3BzLmlzT3BlbiwgcHJvcHMuYXBwRWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5wb3J0YWwgPSByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcih0aGlzLCBNb2RhbFBvcnRhbChBc3NpZ24oe30sIHByb3BzLCB7ZGVmYXVsdFN0eWxlczogTW9kYWwuZGVmYXVsdFN0eWxlc30pKSwgdGhpcy5ub2RlKTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUmVhY3QuRE9NLm5vc2NyaXB0KCk7XG4gIH1cbn0pO1xuXG5Nb2RhbC5kZWZhdWx0U3R5bGVzID0ge1xuICBvdmVybGF5OiB7XG4gICAgcG9zaXRpb24gICAgICAgIDogJ2ZpeGVkJyxcbiAgICB0b3AgICAgICAgICAgICAgOiAwLFxuICAgIGxlZnQgICAgICAgICAgICA6IDAsXG4gICAgcmlnaHQgICAgICAgICAgIDogMCxcbiAgICBib3R0b20gICAgICAgICAgOiAwLFxuICAgIGJhY2tncm91bmRDb2xvciA6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpJ1xuICB9LFxuICBjb250ZW50OiB7XG4gICAgcG9zaXRpb24gICAgICAgICAgICAgICAgOiAnYWJzb2x1dGUnLFxuICAgIHRvcCAgICAgICAgICAgICAgICAgICAgIDogJzQwcHgnLFxuICAgIGxlZnQgICAgICAgICAgICAgICAgICAgIDogJzQwcHgnLFxuICAgIHJpZ2h0ICAgICAgICAgICAgICAgICAgIDogJzQwcHgnLFxuICAgIGJvdHRvbSAgICAgICAgICAgICAgICAgIDogJzQwcHgnLFxuICAgIGJvcmRlciAgICAgICAgICAgICAgICAgIDogJzFweCBzb2xpZCAjY2NjJyxcbiAgICBiYWNrZ3JvdW5kICAgICAgICAgICAgICA6ICcjZmZmJyxcbiAgICBvdmVyZmxvdyAgICAgICAgICAgICAgICA6ICdhdXRvJyxcbiAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZyA6ICd0b3VjaCcsXG4gICAgYm9yZGVyUmFkaXVzICAgICAgICAgICAgOiAnNHB4JyxcbiAgICBvdXRsaW5lICAgICAgICAgICAgICAgICA6ICdub25lJyxcbiAgICBwYWRkaW5nICAgICAgICAgICAgICAgICA6ICcyMHB4J1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTW9kYWxcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1tb2RhbC9saWIvY29tcG9uZW50cy9Nb2RhbC5qc1xuLy8gbW9kdWxlIGlkID0gMjc4XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsInZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgZGl2ID0gUmVhY3QuRE9NLmRpdjtcbnZhciBmb2N1c01hbmFnZXIgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2ZvY3VzTWFuYWdlcicpO1xudmFyIHNjb3BlVGFiID0gcmVxdWlyZSgnLi4vaGVscGVycy9zY29wZVRhYicpO1xudmFyIEFzc2lnbiA9IHJlcXVpcmUoJ2xvZGFzaC5hc3NpZ24nKTtcblxuLy8gc28gdGhhdCBvdXIgQ1NTIGlzIHN0YXRpY2FsbHkgYW5hbHl6YWJsZVxudmFyIENMQVNTX05BTUVTID0ge1xuICBvdmVybGF5OiB7XG4gICAgYmFzZTogJ1JlYWN0TW9kYWxfX092ZXJsYXknLFxuICAgIGFmdGVyT3BlbjogJ1JlYWN0TW9kYWxfX092ZXJsYXktLWFmdGVyLW9wZW4nLFxuICAgIGJlZm9yZUNsb3NlOiAnUmVhY3RNb2RhbF9fT3ZlcmxheS0tYmVmb3JlLWNsb3NlJ1xuICB9LFxuICBjb250ZW50OiB7XG4gICAgYmFzZTogJ1JlYWN0TW9kYWxfX0NvbnRlbnQnLFxuICAgIGFmdGVyT3BlbjogJ1JlYWN0TW9kYWxfX0NvbnRlbnQtLWFmdGVyLW9wZW4nLFxuICAgIGJlZm9yZUNsb3NlOiAnUmVhY3RNb2RhbF9fQ29udGVudC0tYmVmb3JlLWNsb3NlJ1xuICB9XG59O1xuXG52YXIgTW9kYWxQb3J0YWwgPSBtb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICBkaXNwbGF5TmFtZTogJ01vZGFsUG9ydGFsJyxcbiAgc2hvdWxkQ2xvc2U6IG51bGwsXG5cbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgb3ZlcmxheToge30sXG4gICAgICAgIGNvbnRlbnQ6IHt9XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhZnRlck9wZW46IGZhbHNlLFxuICAgICAgYmVmb3JlQ2xvc2U6IGZhbHNlXG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy8gRm9jdXMgbmVlZHMgdG8gYmUgc2V0IHdoZW4gbW91bnRpbmcgYW5kIGFscmVhZHkgb3BlblxuICAgIGlmICh0aGlzLnByb3BzLmlzT3Blbikge1xuICAgICAgdGhpcy5zZXRGb2N1c0FmdGVyUmVuZGVyKHRydWUpO1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jbG9zZVRpbWVyKTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXdQcm9wcykge1xuICAgIC8vIEZvY3VzIG9ubHkgbmVlZHMgdG8gYmUgc2V0IG9uY2Ugd2hlbiB0aGUgbW9kYWwgaXMgYmVpbmcgb3BlbmVkXG4gICAgaWYgKCF0aGlzLnByb3BzLmlzT3BlbiAmJiBuZXdQcm9wcy5pc09wZW4pIHtcbiAgICAgIHRoaXMuc2V0Rm9jdXNBZnRlclJlbmRlcih0cnVlKTtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5pc09wZW4gJiYgIW5ld1Byb3BzLmlzT3Blbikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5mb2N1c0FmdGVyUmVuZGVyKSB7XG4gICAgICB0aGlzLmZvY3VzQ29udGVudCgpO1xuICAgICAgdGhpcy5zZXRGb2N1c0FmdGVyUmVuZGVyKGZhbHNlKTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0Rm9jdXNBZnRlclJlbmRlcjogZnVuY3Rpb24gKGZvY3VzKSB7XG4gICAgdGhpcy5mb2N1c0FmdGVyUmVuZGVyID0gZm9jdXM7XG4gIH0sXG5cbiAgb3BlbjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYWZ0ZXJPcGVuICYmIHRoaXMuc3RhdGUuYmVmb3JlQ2xvc2UpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsb3NlVGltZXIpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGJlZm9yZUNsb3NlOiBmYWxzZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9jdXNNYW5hZ2VyLnNldHVwU2NvcGVkRm9jdXModGhpcy5ub2RlKTtcbiAgICAgIGZvY3VzTWFuYWdlci5tYXJrRm9yRm9jdXNMYXRlcigpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNPcGVuOiB0cnVlfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2FmdGVyT3BlbjogdHJ1ZX0pO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzT3BlbiAmJiB0aGlzLnByb3BzLm9uQWZ0ZXJPcGVuKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vbkFmdGVyT3BlbigpO1xuICAgICAgICB9XG4gICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cbiAgfSxcblxuICBjbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuY2xvc2VUaW1lb3V0TVMgPiAwKVxuICAgICAgdGhpcy5jbG9zZVdpdGhUaW1lb3V0KCk7XG4gICAgZWxzZVxuICAgICAgdGhpcy5jbG9zZVdpdGhvdXRUaW1lb3V0KCk7XG4gIH0sXG5cbiAgZm9jdXNDb250ZW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyBEb24ndCBzdGVhbCBmb2N1cyBmcm9tIGlubmVyIGVsZW1lbnRzXG4gICAgaWYgKCF0aGlzLmNvbnRlbnRIYXNGb2N1cygpKSB7XG4gICAgICB0aGlzLnJlZnMuY29udGVudC5mb2N1cygpO1xuICAgIH1cbiAgfSxcblxuICBjbG9zZVdpdGhUaW1lb3V0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtiZWZvcmVDbG9zZTogdHJ1ZX0sIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jbG9zZVRpbWVyID0gc2V0VGltZW91dCh0aGlzLmNsb3NlV2l0aG91dFRpbWVvdXQsIHRoaXMucHJvcHMuY2xvc2VUaW1lb3V0TVMpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH0sXG5cbiAgY2xvc2VXaXRob3V0VGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBiZWZvcmVDbG9zZTogZmFsc2UsXG4gICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgYWZ0ZXJPcGVuOiBmYWxzZSxcbiAgICB9LCB0aGlzLmFmdGVyQ2xvc2UpO1xuICB9LFxuXG4gIGFmdGVyQ2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgIGZvY3VzTWFuYWdlci5yZXR1cm5Gb2N1cygpO1xuICAgIGZvY3VzTWFuYWdlci50ZWFyZG93blNjb3BlZEZvY3VzKCk7XG4gIH0sXG5cbiAgaGFuZGxlS2V5RG93bjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSA5IC8qdGFiKi8pIHNjb3BlVGFiKHRoaXMucmVmcy5jb250ZW50LCBldmVudCk7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMjcgLyplc2MqLykge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMucmVxdWVzdENsb3NlKGV2ZW50KTtcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlT3ZlcmxheU1vdXNlRG93bjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5zaG91bGRDbG9zZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5zaG91bGRDbG9zZSA9IHRydWU7XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZU92ZXJsYXlNb3VzZVVwOiBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICh0aGlzLnNob3VsZENsb3NlICYmIHRoaXMucHJvcHMuc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljaykge1xuICAgICAgaWYgKHRoaXMub3duZXJIYW5kbGVzQ2xvc2UoKSlcbiAgICAgICAgdGhpcy5yZXF1ZXN0Q2xvc2UoZXZlbnQpO1xuICAgICAgZWxzZVxuICAgICAgICB0aGlzLmZvY3VzQ29udGVudCgpO1xuICAgIH1cbiAgICB0aGlzLnNob3VsZENsb3NlID0gbnVsbDtcbiAgfSxcblxuICBoYW5kbGVDb250ZW50TW91c2VEb3duOiBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuc2hvdWxkQ2xvc2UgPSBmYWxzZTtcbiAgfSxcblxuICBoYW5kbGVDb250ZW50TW91c2VVcDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLnNob3VsZENsb3NlID0gZmFsc2U7XG4gIH0sXG5cbiAgcmVxdWVzdENsb3NlOiBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICh0aGlzLm93bmVySGFuZGxlc0Nsb3NlKCkpXG4gICAgICB0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKGV2ZW50KTtcbiAgfSxcblxuICBvd25lckhhbmRsZXNDbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2U7XG4gIH0sXG5cbiAgc2hvdWxkQmVDbG9zZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAhdGhpcy5wcm9wcy5pc09wZW4gJiYgIXRoaXMuc3RhdGUuYmVmb3JlQ2xvc2U7XG4gIH0sXG5cbiAgY29udGVudEhhc0ZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5yZWZzLmNvbnRlbnQgfHwgdGhpcy5yZWZzLmNvbnRlbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG4gIH0sXG5cbiAgYnVpbGRDbGFzc05hbWU6IGZ1bmN0aW9uKHdoaWNoLCBhZGRpdGlvbmFsKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9IENMQVNTX05BTUVTW3doaWNoXS5iYXNlO1xuICAgIGlmICh0aGlzLnN0YXRlLmFmdGVyT3BlbilcbiAgICAgIGNsYXNzTmFtZSArPSAnICcrQ0xBU1NfTkFNRVNbd2hpY2hdLmFmdGVyT3BlbjtcbiAgICBpZiAodGhpcy5zdGF0ZS5iZWZvcmVDbG9zZSlcbiAgICAgIGNsYXNzTmFtZSArPSAnICcrQ0xBU1NfTkFNRVNbd2hpY2hdLmJlZm9yZUNsb3NlO1xuICAgIHJldHVybiBhZGRpdGlvbmFsID8gY2xhc3NOYW1lICsgJyAnICsgYWRkaXRpb25hbCA6IGNsYXNzTmFtZTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb250ZW50U3R5bGVzID0gKHRoaXMucHJvcHMuY2xhc3NOYW1lKSA/IHt9IDogdGhpcy5wcm9wcy5kZWZhdWx0U3R5bGVzLmNvbnRlbnQ7XG4gICAgdmFyIG92ZXJsYXlTdHlsZXMgPSAodGhpcy5wcm9wcy5vdmVybGF5Q2xhc3NOYW1lKSA/IHt9IDogdGhpcy5wcm9wcy5kZWZhdWx0U3R5bGVzLm92ZXJsYXk7XG5cbiAgICByZXR1cm4gdGhpcy5zaG91bGRCZUNsb3NlZCgpID8gZGl2KCkgOiAoXG4gICAgICBkaXYoe1xuICAgICAgICByZWY6IFwib3ZlcmxheVwiLFxuICAgICAgICBjbGFzc05hbWU6IHRoaXMuYnVpbGRDbGFzc05hbWUoJ292ZXJsYXknLCB0aGlzLnByb3BzLm92ZXJsYXlDbGFzc05hbWUpLFxuICAgICAgICBzdHlsZTogQXNzaWduKHt9LCBvdmVybGF5U3R5bGVzLCB0aGlzLnByb3BzLnN0eWxlLm92ZXJsYXkgfHwge30pLFxuICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVPdmVybGF5TW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlVXA6IHRoaXMuaGFuZGxlT3ZlcmxheU1vdXNlVXBcbiAgICAgIH0sXG4gICAgICAgIGRpdih7XG4gICAgICAgICAgcmVmOiBcImNvbnRlbnRcIixcbiAgICAgICAgICBzdHlsZTogQXNzaWduKHt9LCBjb250ZW50U3R5bGVzLCB0aGlzLnByb3BzLnN0eWxlLmNvbnRlbnQgfHwge30pLFxuICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENsYXNzTmFtZSgnY29udGVudCcsIHRoaXMucHJvcHMuY2xhc3NOYW1lKSxcbiAgICAgICAgICB0YWJJbmRleDogXCItMVwiLFxuICAgICAgICAgIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLFxuICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUNvbnRlbnRNb3VzZURvd24sXG4gICAgICAgICAgb25Nb3VzZVVwOiB0aGlzLmhhbmRsZUNvbnRlbnRNb3VzZVVwLFxuICAgICAgICAgIHJvbGU6IHRoaXMucHJvcHMucm9sZSxcbiAgICAgICAgICBcImFyaWEtbGFiZWxcIjogdGhpcy5wcm9wcy5jb250ZW50TGFiZWxcbiAgICAgICAgfSxcbiAgICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1tb2RhbC9saWIvY29tcG9uZW50cy9Nb2RhbFBvcnRhbC5qc1xuLy8gbW9kdWxlIGlkID0gMjc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsInZhciBfZWxlbWVudCA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgPyBkb2N1bWVudC5ib2R5IDogbnVsbDtcblxuZnVuY3Rpb24gc2V0RWxlbWVudChlbGVtZW50KSB7XG4gIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQgPSAnbGVuZ3RoJyBpbiBlbCA/IGVsWzBdIDogZWw7XG4gIH1cbiAgX2VsZW1lbnQgPSBlbGVtZW50IHx8IF9lbGVtZW50O1xuICByZXR1cm4gX2VsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGhpZGUoYXBwRWxlbWVudCkge1xuICB2YWxpZGF0ZUVsZW1lbnQoYXBwRWxlbWVudCk7XG4gIChhcHBFbGVtZW50IHx8IF9lbGVtZW50KS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbn1cblxuZnVuY3Rpb24gc2hvdyhhcHBFbGVtZW50KSB7XG4gIHZhbGlkYXRlRWxlbWVudChhcHBFbGVtZW50KTtcbiAgKGFwcEVsZW1lbnQgfHwgX2VsZW1lbnQpLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlKHNob3VsZEhpZGUsIGFwcEVsZW1lbnQpIHtcbiAgaWYgKHNob3VsZEhpZGUpXG4gICAgaGlkZShhcHBFbGVtZW50KTtcbiAgZWxzZVxuICAgIHNob3coYXBwRWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRWxlbWVudChhcHBFbGVtZW50KSB7XG4gIGlmICghYXBwRWxlbWVudCAmJiAhX2VsZW1lbnQpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZWFjdC1tb2RhbDogWW91IG11c3Qgc2V0IGFuIGVsZW1lbnQgd2l0aCBgTW9kYWwuc2V0QXBwRWxlbWVudChlbClgIHRvIG1ha2UgdGhpcyBhY2Nlc3NpYmxlJyk7XG59XG5cbmZ1bmN0aW9uIHJlc2V0Rm9yVGVzdGluZygpIHtcbiAgX2VsZW1lbnQgPSBkb2N1bWVudC5ib2R5O1xufVxuXG5leHBvcnRzLnRvZ2dsZSA9IHRvZ2dsZTtcbmV4cG9ydHMuc2V0RWxlbWVudCA9IHNldEVsZW1lbnQ7XG5leHBvcnRzLnNob3cgPSBzaG93O1xuZXhwb3J0cy5oaWRlID0gaGlkZTtcbmV4cG9ydHMucmVzZXRGb3JUZXN0aW5nID0gcmVzZXRGb3JUZXN0aW5nO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL2FyaWFBcHBIaWRlci5qc1xuLy8gbW9kdWxlIGlkID0gMjgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsInZhciBmaW5kVGFiYmFibGUgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3RhYmJhYmxlJyk7XG52YXIgbW9kYWxFbGVtZW50ID0gbnVsbDtcbnZhciBmb2N1c0xhdGVyRWxlbWVudCA9IG51bGw7XG52YXIgbmVlZFRvRm9jdXMgPSBmYWxzZTtcblxuZnVuY3Rpb24gaGFuZGxlQmx1cihldmVudCkge1xuICBuZWVkVG9Gb2N1cyA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvY3VzKGV2ZW50KSB7XG4gIGlmIChuZWVkVG9Gb2N1cykge1xuICAgIG5lZWRUb0ZvY3VzID0gZmFsc2U7XG4gICAgaWYgKCFtb2RhbEVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gbmVlZCB0byBzZWUgaG93IGpRdWVyeSBzaGltcyBkb2N1bWVudC5vbignZm9jdXNpbicpIHNvIHdlIGRvbid0IG5lZWQgdGhlXG4gICAgLy8gc2V0VGltZW91dCwgZmlyZWZveCBkb2Vzbid0IHN1cHBvcnQgZm9jdXNpbiwgaWYgaXQgZGlkLCB3ZSBjb3VsZCBmb2N1c1xuICAgIC8vIHRoZSBlbGVtZW50IG91dHNpZGUgb2YgYSBzZXRUaW1lb3V0LiBTaWRlLWVmZmVjdCBvZiB0aGlzIGltcGxlbWVudGF0aW9uIFxuICAgIC8vIGlzIHRoYXQgdGhlIGRvY3VtZW50LmJvZHkgZ2V0cyBmb2N1cywgYW5kIHRoZW4gd2UgZm9jdXMgb3VyIGVsZW1lbnQgcmlnaHQgXG4gICAgLy8gYWZ0ZXIsIHNlZW1zIGZpbmUuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChtb2RhbEVsZW1lbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIHZhciBlbCA9IChmaW5kVGFiYmFibGUobW9kYWxFbGVtZW50KVswXSB8fCBtb2RhbEVsZW1lbnQpO1xuICAgICAgZWwuZm9jdXMoKTtcbiAgICB9LCAwKTtcbiAgfVxufVxuXG5leHBvcnRzLm1hcmtGb3JGb2N1c0xhdGVyID0gZnVuY3Rpb24oKSB7XG4gIGZvY3VzTGF0ZXJFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbn07XG5cbmV4cG9ydHMucmV0dXJuRm9jdXMgPSBmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBmb2N1c0xhdGVyRWxlbWVudC5mb2N1cygpO1xuICB9XG4gIGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKCdZb3UgdHJpZWQgdG8gcmV0dXJuIGZvY3VzIHRvICcrZm9jdXNMYXRlckVsZW1lbnQrJyBidXQgaXQgaXMgbm90IGluIHRoZSBET00gYW55bW9yZScpO1xuICB9XG4gIGZvY3VzTGF0ZXJFbGVtZW50ID0gbnVsbDtcbn07XG5cbmV4cG9ydHMuc2V0dXBTY29wZWRGb2N1cyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgbW9kYWxFbGVtZW50ID0gZWxlbWVudDtcblxuICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGhhbmRsZUJsdXIsIGZhbHNlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGhhbmRsZUZvY3VzLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29uQmx1cicsIGhhbmRsZUJsdXIpO1xuICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KCdvbkZvY3VzJywgaGFuZGxlRm9jdXMpO1xuICB9XG59O1xuXG5leHBvcnRzLnRlYXJkb3duU2NvcGVkRm9jdXMgPSBmdW5jdGlvbigpIHtcbiAgbW9kYWxFbGVtZW50ID0gbnVsbDtcblxuICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIGhhbmRsZUJsdXIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgaGFuZGxlRm9jdXMpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5kZXRhY2hFdmVudCgnb25CbHVyJywgaGFuZGxlQmx1cik7XG4gICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoJ29uRm9jdXMnLCBoYW5kbGVGb2N1cyk7XG4gIH1cbn07XG5cblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL2ZvY3VzTWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMjgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsInZhciBmaW5kVGFiYmFibGUgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3RhYmJhYmxlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obm9kZSwgZXZlbnQpIHtcbiAgdmFyIHRhYmJhYmxlID0gZmluZFRhYmJhYmxlKG5vZGUpO1xuICBpZiAoIXRhYmJhYmxlLmxlbmd0aCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgfVxuICB2YXIgZmluYWxUYWJiYWJsZSA9IHRhYmJhYmxlW2V2ZW50LnNoaWZ0S2V5ID8gMCA6IHRhYmJhYmxlLmxlbmd0aCAtIDFdO1xuICB2YXIgbGVhdmluZ0ZpbmFsVGFiYmFibGUgPSAoXG4gICAgZmluYWxUYWJiYWJsZSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fFxuICAgIC8vIGhhbmRsZSBpbW1lZGlhdGUgc2hpZnQrdGFiIGFmdGVyIG9wZW5pbmcgd2l0aCBtb3VzZVxuICAgIG5vZGUgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgKTtcbiAgaWYgKCFsZWF2aW5nRmluYWxUYWJiYWJsZSkgcmV0dXJuO1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB2YXIgdGFyZ2V0ID0gdGFiYmFibGVbZXZlbnQuc2hpZnRLZXkgPyB0YWJiYWJsZS5sZW5ndGggLSAxIDogMF07XG4gIHRhcmdldC5mb2N1cygpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1tb2RhbC9saWIvaGVscGVycy9zY29wZVRhYi5qc1xuLy8gbW9kdWxlIGlkID0gMjgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL01vZGFsJyk7XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1tb2RhbC9saWIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCJ2YXIgY2FuVXNlRE9NID0gcmVxdWlyZSgnY2FuLXVzZS1kb20nKTtcbnZhciBlbnF1aXJlID0gY2FuVXNlRE9NICYmIHJlcXVpcmUoJ2VucXVpcmUuanMnKTtcbnZhciBqc29uMm1xID0gcmVxdWlyZSgnanNvbjJtcScpO1xuXG52YXIgUmVzcG9uc2l2ZU1peGluID0ge1xuICBtZWRpYTogZnVuY3Rpb24gKHF1ZXJ5LCBoYW5kbGVyKSB7XG4gICAgcXVlcnkgPSBqc29uMm1xKHF1ZXJ5KTtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGhhbmRsZXIgPSB7XG4gICAgICAgIG1hdGNoOiBoYW5kbGVyXG4gICAgICB9O1xuICAgIH1cbiAgICBjYW5Vc2VET00gJiYgZW5xdWlyZS5yZWdpc3RlcihxdWVyeSwgaGFuZGxlcik7XG5cbiAgICAvLyBRdWV1ZSB0aGUgaGFuZGxlcnMgdG8gdW5yZWdpc3RlciB0aGVtIGF0IHVubW91bnQgIFxuICAgIGlmICghIHRoaXMuX3Jlc3BvbnNpdmVNZWRpYUhhbmRsZXJzKSB7XG4gICAgICB0aGlzLl9yZXNwb25zaXZlTWVkaWFIYW5kbGVycyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLl9yZXNwb25zaXZlTWVkaWFIYW5kbGVycy5wdXNoKHtxdWVyeTogcXVlcnksIGhhbmRsZXI6IGhhbmRsZXJ9KTtcbiAgfSxcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fcmVzcG9uc2l2ZU1lZGlhSGFuZGxlcnMpIHtcbiAgICAgIHRoaXMuX3Jlc3BvbnNpdmVNZWRpYUhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIGNhblVzZURPTSAmJiBlbnF1aXJlLnVucmVnaXN0ZXIob2JqLnF1ZXJ5LCBvYmouaGFuZGxlcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVzcG9uc2l2ZU1peGluO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJlc3BvbnNpdmUtbWl4aW4vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI5MlxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLk5leHRBcnJvdyA9IGV4cG9ydHMuUHJldkFycm93ID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfY2xhc3NuYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcblxudmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXG52YXIgX2hlbHBlcnMgPSByZXF1aXJlKCcuL21peGlucy9oZWxwZXJzJyk7XG5cbnZhciBfaGVscGVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWxwZXJzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFByZXZBcnJvdyA9IGV4cG9ydHMuUHJldkFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdQcmV2QXJyb3cnLFxuXG5cbiAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIob3B0aW9ucywgZSkge1xuICAgIGlmIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMuY2xpY2tIYW5kbGVyKG9wdGlvbnMsIGUpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgcHJldkNsYXNzZXMgPSB7ICdzbGljay1hcnJvdyc6IHRydWUsICdzbGljay1wcmV2JzogdHJ1ZSB9O1xuICAgIHZhciBwcmV2SGFuZGxlciA9IHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcywgeyBtZXNzYWdlOiAncHJldmlvdXMnIH0pO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLmluZmluaXRlICYmICh0aGlzLnByb3BzLmN1cnJlbnRTbGlkZSA9PT0gMCB8fCB0aGlzLnByb3BzLnNsaWRlQ291bnQgPD0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cpKSB7XG4gICAgICBwcmV2Q2xhc3Nlc1snc2xpY2stZGlzYWJsZWQnXSA9IHRydWU7XG4gICAgICBwcmV2SGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHByZXZBcnJvd1Byb3BzID0ge1xuICAgICAga2V5OiAnMCcsXG4gICAgICAnZGF0YS1yb2xlJzogJ25vbmUnLFxuICAgICAgY2xhc3NOYW1lOiAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKHByZXZDbGFzc2VzKSxcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5wcm9wcy5jdXJyZW50U2xpZGUsXG4gICAgICBzbGlkZUNvdW50OiB0aGlzLnByb3BzLnNsaWRlQ291bnQsXG4gICAgICBzdHlsZTogeyBkaXNwbGF5OiAnYmxvY2snIH0sXG4gICAgICBvbkNsaWNrOiBwcmV2SGFuZGxlclxuICAgIH07XG4gICAgdmFyIHByZXZBcnJvdztcblxuICAgIGlmICh0aGlzLnByb3BzLnByZXZBcnJvdykge1xuICAgICAgcHJldkFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudCh0aGlzLnByb3BzLnByZXZBcnJvdywgcHJldkFycm93UHJvcHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgIF9leHRlbmRzKHsga2V5OiAnMCcsIHR5cGU6ICdidXR0b24nIH0sIHByZXZBcnJvd1Byb3BzKSxcbiAgICAgICAgJyBQcmV2aW91cydcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZBcnJvdztcbiAgfVxufSk7XG5cbnZhciBOZXh0QXJyb3cgPSBleHBvcnRzLk5leHRBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnTmV4dEFycm93JyxcblxuICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihvcHRpb25zLCBlKSB7XG4gICAgaWYgKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5jbGlja0hhbmRsZXIob3B0aW9ucywgZSk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBuZXh0Q2xhc3NlcyA9IHsgJ3NsaWNrLWFycm93JzogdHJ1ZSwgJ3NsaWNrLW5leHQnOiB0cnVlIH07XG4gICAgdmFyIG5leHRIYW5kbGVyID0gdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzLCB7IG1lc3NhZ2U6ICduZXh0JyB9KTtcblxuICAgIGlmICghX2hlbHBlcnMyLmRlZmF1bHQuY2FuR29OZXh0KHRoaXMucHJvcHMpKSB7XG4gICAgICBuZXh0Q2xhc3Nlc1snc2xpY2stZGlzYWJsZWQnXSA9IHRydWU7XG4gICAgICBuZXh0SGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG5leHRBcnJvd1Byb3BzID0ge1xuICAgICAga2V5OiAnMScsXG4gICAgICAnZGF0YS1yb2xlJzogJ25vbmUnLFxuICAgICAgY2xhc3NOYW1lOiAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKG5leHRDbGFzc2VzKSxcbiAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5wcm9wcy5jdXJyZW50U2xpZGUsXG4gICAgICBzbGlkZUNvdW50OiB0aGlzLnByb3BzLnNsaWRlQ291bnQsXG4gICAgICBzdHlsZTogeyBkaXNwbGF5OiAnYmxvY2snIH0sXG4gICAgICBvbkNsaWNrOiBuZXh0SGFuZGxlclxuICAgIH07XG5cbiAgICB2YXIgbmV4dEFycm93O1xuXG4gICAgaWYgKHRoaXMucHJvcHMubmV4dEFycm93KSB7XG4gICAgICBuZXh0QXJyb3cgPSBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KHRoaXMucHJvcHMubmV4dEFycm93LCBuZXh0QXJyb3dQcm9wcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHRBcnJvdyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgX2V4dGVuZHMoeyBrZXk6ICcxJywgdHlwZTogJ2J1dHRvbicgfSwgbmV4dEFycm93UHJvcHMpLFxuICAgICAgICAnIE5leHQnXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBuZXh0QXJyb3c7XG4gIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1zbGljay9saWIvYXJyb3dzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5Eb3RzID0gdW5kZWZpbmVkO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfY2xhc3NuYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcblxudmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZ2V0RG90Q291bnQgPSBmdW5jdGlvbiBnZXREb3RDb3VudChzcGVjKSB7XG4gIHZhciBkb3RzO1xuICBkb3RzID0gTWF0aC5jZWlsKHNwZWMuc2xpZGVDb3VudCAvIHNwZWMuc2xpZGVzVG9TY3JvbGwpO1xuICByZXR1cm4gZG90cztcbn07XG5cbnZhciBEb3RzID0gZXhwb3J0cy5Eb3RzID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdEb3RzJyxcblxuXG4gIGNsaWNrSGFuZGxlcjogZnVuY3Rpb24gY2xpY2tIYW5kbGVyKG9wdGlvbnMsIGUpIHtcbiAgICAvLyBJbiBBdXRvcGxheSB0aGUgZm9jdXMgc3RheXMgb24gY2xpY2tlZCBidXR0b24gZXZlbiBhZnRlciB0cmFuc2l0aW9uXG4gICAgLy8gdG8gbmV4dCBzbGlkZS4gVGhhdCBvbmx5IGdvZXMgYXdheSBieSBjbGljayBzb21ld2hlcmUgb3V0c2lkZVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnByb3BzLmNsaWNrSGFuZGxlcihvcHRpb25zKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBkb3RDb3VudCA9IGdldERvdENvdW50KHtcbiAgICAgIHNsaWRlQ291bnQ6IHRoaXMucHJvcHMuc2xpZGVDb3VudCxcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsXG4gICAgfSk7XG5cbiAgICAvLyBBcHBseSBqb2luICYgc3BsaXQgdG8gQXJyYXkgdG8gcHJlLWZpbGwgaXQgZm9yIElFOFxuICAgIC8vXG4gICAgLy8gQ3JlZGl0OiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzczNTQyNS8xODQ5NDU4XG4gICAgdmFyIGRvdHMgPSBBcnJheS5hcHBseShudWxsLCBBcnJheShkb3RDb3VudCArIDEpLmpvaW4oJzAnKS5zcGxpdCgnJykpLm1hcChmdW5jdGlvbiAoeCwgaSkge1xuXG4gICAgICB2YXIgbGVmdEJvdW5kID0gaSAqIF90aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsO1xuICAgICAgdmFyIHJpZ2h0Qm91bmQgPSBpICogX3RoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwgKyAoX3RoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwgLSAxKTtcbiAgICAgIHZhciBjbGFzc05hbWUgPSAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKHtcbiAgICAgICAgJ3NsaWNrLWFjdGl2ZSc6IF90aGlzLnByb3BzLmN1cnJlbnRTbGlkZSA+PSBsZWZ0Qm91bmQgJiYgX3RoaXMucHJvcHMuY3VycmVudFNsaWRlIDw9IHJpZ2h0Qm91bmRcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgZG90T3B0aW9ucyA9IHtcbiAgICAgICAgbWVzc2FnZTogJ2RvdHMnLFxuICAgICAgICBpbmRleDogaSxcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IF90aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsLFxuICAgICAgICBjdXJyZW50U2xpZGU6IF90aGlzLnByb3BzLmN1cnJlbnRTbGlkZVxuICAgICAgfTtcblxuICAgICAgdmFyIG9uQ2xpY2sgPSBfdGhpcy5jbGlja0hhbmRsZXIuYmluZChfdGhpcywgZG90T3B0aW9ucyk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2xpJyxcbiAgICAgICAgeyBrZXk6IGksIGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoX3RoaXMucHJvcHMuY3VzdG9tUGFnaW5nKGkpLCB7IG9uQ2xpY2s6IG9uQ2xpY2sgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAndWwnLFxuICAgICAgeyBjbGFzc05hbWU6IHRoaXMucHJvcHMuZG90c0NsYXNzLCBzdHlsZTogeyBkaXNwbGF5OiAnYmxvY2snIH0gfSxcbiAgICAgIGRvdHNcbiAgICApO1xuICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL2RvdHMuanNcbi8vIG1vZHVsZSBpZCA9IDMxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDEiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9zbGlkZXInKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpbml0aWFsU3RhdGUgPSB7XG4gICAgYW5pbWF0aW5nOiBmYWxzZSxcbiAgICBkcmFnZ2luZzogZmFsc2UsXG4gICAgYXV0b1BsYXlUaW1lcjogbnVsbCxcbiAgICBjdXJyZW50RGlyZWN0aW9uOiAwLFxuICAgIGN1cnJlbnRMZWZ0OiBudWxsLFxuICAgIGN1cnJlbnRTbGlkZTogMCxcbiAgICBkaXJlY3Rpb246IDEsXG4gICAgbGlzdFdpZHRoOiBudWxsLFxuICAgIGxpc3RIZWlnaHQ6IG51bGwsXG4gICAgLy8gbG9hZEluZGV4OiAwLFxuICAgIHNsaWRlQ291bnQ6IG51bGwsXG4gICAgc2xpZGVXaWR0aDogbnVsbCxcbiAgICBzbGlkZUhlaWdodDogbnVsbCxcbiAgICAvLyBzbGlkaW5nOiBmYWxzZSxcbiAgICAvLyBzbGlkZU9mZnNldDogMCxcbiAgICBzd2lwZUxlZnQ6IG51bGwsXG4gICAgdG91Y2hPYmplY3Q6IHtcbiAgICAgICAgc3RhcnRYOiAwLFxuICAgICAgICBzdGFydFk6IDAsXG4gICAgICAgIGN1clg6IDAsXG4gICAgICAgIGN1clk6IDBcbiAgICB9LFxuXG4gICAgbGF6eUxvYWRlZExpc3Q6IFtdLFxuXG4gICAgLy8gYWRkZWQgZm9yIHJlYWN0XG4gICAgaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgIGVkZ2VEcmFnZ2VkOiBmYWxzZSxcbiAgICBzd2lwZWQ6IGZhbHNlLCAvLyB1c2VkIGJ5IHN3aXBlRXZlbnQuIGRpZmZlcmVudGl0ZXMgYmV0d2VlbiB0b3VjaCBhbmQgc3dpcGUuXG4gICAgdHJhY2tTdHlsZToge30sXG4gICAgdHJhY2tXaWR0aDogMFxuXG4gICAgLy8gUmVtb3ZlZFxuICAgIC8vIHRyYW5zZm9ybXNFbmFibGVkOiBmYWxzZSxcbiAgICAvLyAkbmV4dEFycm93OiBudWxsLFxuICAgIC8vICRwcmV2QXJyb3c6IG51bGwsXG4gICAgLy8gJGRvdHM6IG51bGwsXG4gICAgLy8gJGxpc3Q6IG51bGwsXG4gICAgLy8gJHNsaWRlVHJhY2s6IG51bGwsXG4gICAgLy8gJHNsaWRlczogbnVsbCxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW5pdGlhbFN0YXRlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1zbGljay9saWIvaW5pdGlhbC1zdGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMzE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuSW5uZXJTbGlkZXIgPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9ldmVudEhhbmRsZXJzID0gcmVxdWlyZSgnLi9taXhpbnMvZXZlbnQtaGFuZGxlcnMnKTtcblxudmFyIF9ldmVudEhhbmRsZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V2ZW50SGFuZGxlcnMpO1xuXG52YXIgX2hlbHBlcnMgPSByZXF1aXJlKCcuL21peGlucy9oZWxwZXJzJyk7XG5cbnZhciBfaGVscGVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWxwZXJzKTtcblxudmFyIF9pbml0aWFsU3RhdGUgPSByZXF1aXJlKCcuL2luaXRpYWwtc3RhdGUnKTtcblxudmFyIF9pbml0aWFsU3RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5pdGlhbFN0YXRlKTtcblxudmFyIF9kZWZhdWx0UHJvcHMgPSByZXF1aXJlKCcuL2RlZmF1bHQtcHJvcHMnKTtcblxudmFyIF9kZWZhdWx0UHJvcHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmYXVsdFByb3BzKTtcblxudmFyIF9jbGFzc25hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuXG52YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cbnZhciBfb2JqZWN0QXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG52YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXG52YXIgX3RyYWNrID0gcmVxdWlyZSgnLi90cmFjaycpO1xuXG52YXIgX2RvdHMgPSByZXF1aXJlKCcuL2RvdHMnKTtcblxudmFyIF9hcnJvd3MgPSByZXF1aXJlKCcuL2Fycm93cycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgSW5uZXJTbGlkZXIgPSBleHBvcnRzLklubmVyU2xpZGVyID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdJbm5lclNsaWRlcicsXG5cbiAgbWl4aW5zOiBbX2hlbHBlcnMyLmRlZmF1bHQsIF9ldmVudEhhbmRsZXJzMi5kZWZhdWx0XSxcbiAgbGlzdDogbnVsbCxcbiAgdHJhY2s6IG51bGwsXG4gIGxpc3RSZWZIYW5kbGVyOiBmdW5jdGlvbiBsaXN0UmVmSGFuZGxlcihyZWYpIHtcbiAgICB0aGlzLmxpc3QgPSByZWY7XG4gIH0sXG4gIHRyYWNrUmVmSGFuZGxlcjogZnVuY3Rpb24gdHJhY2tSZWZIYW5kbGVyKHJlZikge1xuICAgIHRoaXMudHJhY2sgPSByZWY7XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgX2luaXRpYWxTdGF0ZTIuZGVmYXVsdCwge1xuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnByb3BzLmluaXRpYWxTbGlkZVxuICAgIH0pO1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4gX2RlZmF1bHRQcm9wczIuZGVmYXVsdDtcbiAgfSxcbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuaW5pdCkge1xuICAgICAgdGhpcy5wcm9wcy5pbml0KCk7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgbW91bnRlZDogdHJ1ZVxuICAgIH0pO1xuICAgIHZhciBsYXp5TG9hZGVkTGlzdCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KHRoaXMucHJvcHMuY2hpbGRyZW4pOyBpKyspIHtcbiAgICAgIGlmIChpID49IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlICYmIGkgPCB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSArIHRoaXMucHJvcHMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgIGxhenlMb2FkZWRMaXN0LnB1c2goaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMubGF6eUxvYWQgJiYgdGhpcy5zdGF0ZS5sYXp5TG9hZGVkTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBsYXp5TG9hZGVkTGlzdDogbGF6eUxvYWRlZExpc3RcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIEhhY2sgZm9yIGF1dG9wbGF5IC0tIEluc3BlY3QgTGF0ZXJcbiAgICB0aGlzLmluaXRpYWxpemUodGhpcy5wcm9wcyk7XG4gICAgdGhpcy5hZGFwdEhlaWdodCgpO1xuXG4gICAgLy8gVG8gc3VwcG9ydCBzZXJ2ZXItc2lkZSByZW5kZXJpbmdcbiAgICBpZiAoIXdpbmRvdykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uV2luZG93UmVzaXplZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb25yZXNpemUnLCB0aGlzLm9uV2luZG93UmVzaXplZCk7XG4gICAgfVxuICB9LFxuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2spIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmFuaW1hdGlvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuZGV0YWNoRXZlbnQoJ29ucmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZWQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS5hdXRvUGxheVRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3RhdGUuYXV0b1BsYXlUaW1lcik7XG4gICAgfVxuICB9LFxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmICh0aGlzLnByb3BzLnNsaWNrR29UbyAhPSBuZXh0UHJvcHMuc2xpY2tHb1RvKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3JlYWN0LXNsaWNrIGRlcHJlY2F0aW9uIHdhcm5pbmc6IHNsaWNrR29UbyBwcm9wIGlzIGRlcHJlY2F0ZWQgYW5kIGl0IHdpbGwgYmUgcmVtb3ZlZCBpbiBuZXh0IHJlbGVhc2UuIFVzZSBzbGlja0dvVG8gbWV0aG9kIGluc3RlYWQnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2hhbmdlU2xpZGUoe1xuICAgICAgICBtZXNzYWdlOiAnaW5kZXgnLFxuICAgICAgICBpbmRleDogbmV4dFByb3BzLnNsaWNrR29UbyxcbiAgICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSA+PSBuZXh0UHJvcHMuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICB0aGlzLnVwZGF0ZShuZXh0UHJvcHMpO1xuICAgICAgdGhpcy5jaGFuZ2VTbGlkZSh7XG4gICAgICAgIG1lc3NhZ2U6ICdpbmRleCcsXG4gICAgICAgIGluZGV4OiBuZXh0UHJvcHMuY2hpbGRyZW4ubGVuZ3RoIC0gbmV4dFByb3BzLnNsaWRlc1RvU2hvdyxcbiAgICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXBkYXRlKG5leHRQcm9wcyk7XG4gICAgfVxuICB9LFxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICB0aGlzLmFkYXB0SGVpZ2h0KCk7XG4gIH0sXG4gIG9uV2luZG93UmVzaXplZDogZnVuY3Rpb24gb25XaW5kb3dSZXNpemVkKCkge1xuICAgIHRoaXMudXBkYXRlKHRoaXMucHJvcHMpO1xuICAgIC8vIGFuaW1hdGluZyBzdGF0ZSBzaG91bGQgYmUgY2xlYXJlZCB3aGlsZSByZXNpemluZywgb3RoZXJ3aXNlIGF1dG9wbGF5IHN0b3BzIHdvcmtpbmdcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGFuaW1hdGluZzogZmFsc2VcbiAgICB9KTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5hbmltYXRpb25FbmRDYWxsYmFjayk7XG4gICAgZGVsZXRlIHRoaXMuYW5pbWF0aW9uRW5kQ2FsbGJhY2s7XG4gIH0sXG4gIHNsaWNrUHJldjogZnVuY3Rpb24gc2xpY2tQcmV2KCkge1xuICAgIHRoaXMuY2hhbmdlU2xpZGUoeyBtZXNzYWdlOiAncHJldmlvdXMnIH0pO1xuICB9LFxuICBzbGlja05leHQ6IGZ1bmN0aW9uIHNsaWNrTmV4dCgpIHtcbiAgICB0aGlzLmNoYW5nZVNsaWRlKHsgbWVzc2FnZTogJ25leHQnIH0pO1xuICB9LFxuICBzbGlja0dvVG86IGZ1bmN0aW9uIHNsaWNrR29UbyhzbGlkZSkge1xuICAgIHR5cGVvZiBzbGlkZSA9PT0gJ251bWJlcicgJiYgdGhpcy5jaGFuZ2VTbGlkZSh7XG4gICAgICBtZXNzYWdlOiAnaW5kZXgnLFxuICAgICAgaW5kZXg6IHNsaWRlLFxuICAgICAgY3VycmVudFNsaWRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZVxuICAgIH0pO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KSgnc2xpY2staW5pdGlhbGl6ZWQnLCAnc2xpY2stc2xpZGVyJywgdGhpcy5wcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICdzbGljay12ZXJ0aWNhbCc6IHRoaXMucHJvcHMudmVydGljYWxcbiAgICB9KTtcblxuICAgIHZhciB0cmFja1Byb3BzID0ge1xuICAgICAgZmFkZTogdGhpcy5wcm9wcy5mYWRlLFxuICAgICAgY3NzRWFzZTogdGhpcy5wcm9wcy5jc3NFYXNlLFxuICAgICAgc3BlZWQ6IHRoaXMucHJvcHMuc3BlZWQsXG4gICAgICBpbmZpbml0ZTogdGhpcy5wcm9wcy5pbmZpbml0ZSxcbiAgICAgIGNlbnRlck1vZGU6IHRoaXMucHJvcHMuY2VudGVyTW9kZSxcbiAgICAgIGZvY3VzT25TZWxlY3Q6IHRoaXMucHJvcHMuZm9jdXNPblNlbGVjdCA/IHRoaXMuc2VsZWN0SGFuZGxlciA6IG51bGwsXG4gICAgICBjdXJyZW50U2xpZGU6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLFxuICAgICAgbGF6eUxvYWQ6IHRoaXMucHJvcHMubGF6eUxvYWQsXG4gICAgICBsYXp5TG9hZGVkTGlzdDogdGhpcy5zdGF0ZS5sYXp5TG9hZGVkTGlzdCxcbiAgICAgIHJ0bDogdGhpcy5wcm9wcy5ydGwsXG4gICAgICBzbGlkZVdpZHRoOiB0aGlzLnN0YXRlLnNsaWRlV2lkdGgsXG4gICAgICBzbGlkZXNUb1Nob3c6IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93LFxuICAgICAgc2xpZGVzVG9TY3JvbGw6IHRoaXMucHJvcHMuc2xpZGVzVG9TY3JvbGwsXG4gICAgICBzbGlkZUNvdW50OiB0aGlzLnN0YXRlLnNsaWRlQ291bnQsXG4gICAgICB0cmFja1N0eWxlOiB0aGlzLnN0YXRlLnRyYWNrU3R5bGUsXG4gICAgICB2YXJpYWJsZVdpZHRoOiB0aGlzLnByb3BzLnZhcmlhYmxlV2lkdGhcbiAgICB9O1xuXG4gICAgdmFyIGRvdHM7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5kb3RzID09PSB0cnVlICYmIHRoaXMuc3RhdGUuc2xpZGVDb3VudCA+PSB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdykge1xuICAgICAgdmFyIGRvdFByb3BzID0ge1xuICAgICAgICBkb3RzQ2xhc3M6IHRoaXMucHJvcHMuZG90c0NsYXNzLFxuICAgICAgICBzbGlkZUNvdW50OiB0aGlzLnN0YXRlLnNsaWRlQ291bnQsXG4gICAgICAgIHNsaWRlc1RvU2hvdzogdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3csXG4gICAgICAgIGN1cnJlbnRTbGlkZTogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsLFxuICAgICAgICBjbGlja0hhbmRsZXI6IHRoaXMuY2hhbmdlU2xpZGUsXG4gICAgICAgIGNoaWxkcmVuOiB0aGlzLnByb3BzLmNoaWxkcmVuLFxuICAgICAgICBjdXN0b21QYWdpbmc6IHRoaXMucHJvcHMuY3VzdG9tUGFnaW5nXG4gICAgICB9O1xuXG4gICAgICBkb3RzID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2RvdHMuRG90cywgZG90UHJvcHMpO1xuICAgIH1cblxuICAgIHZhciBwcmV2QXJyb3csIG5leHRBcnJvdztcblxuICAgIHZhciBhcnJvd1Byb3BzID0ge1xuICAgICAgaW5maW5pdGU6IHRoaXMucHJvcHMuaW5maW5pdGUsXG4gICAgICBjZW50ZXJNb2RlOiB0aGlzLnByb3BzLmNlbnRlck1vZGUsXG4gICAgICBjdXJyZW50U2xpZGU6IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlLFxuICAgICAgc2xpZGVDb3VudDogdGhpcy5zdGF0ZS5zbGlkZUNvdW50LFxuICAgICAgc2xpZGVzVG9TaG93OiB0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyxcbiAgICAgIHByZXZBcnJvdzogdGhpcy5wcm9wcy5wcmV2QXJyb3csXG4gICAgICBuZXh0QXJyb3c6IHRoaXMucHJvcHMubmV4dEFycm93LFxuICAgICAgY2xpY2tIYW5kbGVyOiB0aGlzLmNoYW5nZVNsaWRlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLnByb3BzLmFycm93cykge1xuICAgICAgcHJldkFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Fycm93cy5QcmV2QXJyb3csIGFycm93UHJvcHMpO1xuICAgICAgbmV4dEFycm93ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Fycm93cy5OZXh0QXJyb3csIGFycm93UHJvcHMpO1xuICAgIH1cblxuICAgIHZhciB2ZXJ0aWNhbEhlaWdodFN0eWxlID0gbnVsbDtcblxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsKSB7XG4gICAgICB2ZXJ0aWNhbEhlaWdodFN0eWxlID0ge1xuICAgICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUubGlzdEhlaWdodFxuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgY2VudGVyUGFkZGluZ1N0eWxlID0gbnVsbDtcblxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsID09PSBmYWxzZSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjZW50ZXJQYWRkaW5nU3R5bGUgPSB7XG4gICAgICAgICAgcGFkZGluZzogJzBweCAnICsgdGhpcy5wcm9wcy5jZW50ZXJQYWRkaW5nXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmNlbnRlck1vZGUgPT09IHRydWUpIHtcbiAgICAgICAgY2VudGVyUGFkZGluZ1N0eWxlID0ge1xuICAgICAgICAgIHBhZGRpbmc6IHRoaXMucHJvcHMuY2VudGVyUGFkZGluZyArICcgMHB4J1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsaXN0U3R5bGUgPSAoMCwgX29iamVjdEFzc2lnbjIuZGVmYXVsdCkoe30sIHZlcnRpY2FsSGVpZ2h0U3R5bGUsIGNlbnRlclBhZGRpbmdTdHlsZSk7XG5cbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZGl2JyxcbiAgICAgIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIG9uTW91c2VFbnRlcjogdGhpcy5vbklubmVyU2xpZGVyRW50ZXIsXG4gICAgICAgIG9uTW91c2VMZWF2ZTogdGhpcy5vbklubmVyU2xpZGVyTGVhdmUsXG4gICAgICAgIG9uTW91c2VPdmVyOiB0aGlzLm9uSW5uZXJTbGlkZXJPdmVyXG4gICAgICB9LFxuICAgICAgcHJldkFycm93LFxuICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7XG4gICAgICAgICAgcmVmOiB0aGlzLmxpc3RSZWZIYW5kbGVyLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ3NsaWNrLWxpc3QnLFxuICAgICAgICAgIHN0eWxlOiBsaXN0U3R5bGUsXG4gICAgICAgICAgb25Nb3VzZURvd246IHRoaXMuc3dpcGVTdGFydCxcbiAgICAgICAgICBvbk1vdXNlTW92ZTogdGhpcy5zdGF0ZS5kcmFnZ2luZyA/IHRoaXMuc3dpcGVNb3ZlIDogbnVsbCxcbiAgICAgICAgICBvbk1vdXNlVXA6IHRoaXMuc3dpcGVFbmQsXG4gICAgICAgICAgb25Nb3VzZUxlYXZlOiB0aGlzLnN0YXRlLmRyYWdnaW5nID8gdGhpcy5zd2lwZUVuZCA6IG51bGwsXG4gICAgICAgICAgb25Ub3VjaFN0YXJ0OiB0aGlzLnN3aXBlU3RhcnQsXG4gICAgICAgICAgb25Ub3VjaE1vdmU6IHRoaXMuc3RhdGUuZHJhZ2dpbmcgPyB0aGlzLnN3aXBlTW92ZSA6IG51bGwsXG4gICAgICAgICAgb25Ub3VjaEVuZDogdGhpcy5zd2lwZUVuZCxcbiAgICAgICAgICBvblRvdWNoQ2FuY2VsOiB0aGlzLnN0YXRlLmRyYWdnaW5nID8gdGhpcy5zd2lwZUVuZCA6IG51bGwsXG4gICAgICAgICAgb25LZXlEb3duOiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHkgPyB0aGlzLmtleUhhbmRsZXIgOiBudWxsIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF90cmFjay5UcmFjayxcbiAgICAgICAgICBfZXh0ZW5kcyh7IHJlZjogdGhpcy50cmFja1JlZkhhbmRsZXIgfSwgdHJhY2tQcm9wcyksXG4gICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICApXG4gICAgICApLFxuICAgICAgbmV4dEFycm93LFxuICAgICAgZG90c1xuICAgICk7XG4gIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1zbGljay9saWIvaW5uZXItc2xpZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3RyYWNrSGVscGVyID0gcmVxdWlyZSgnLi90cmFja0hlbHBlcicpO1xuXG52YXIgX2hlbHBlcnMgPSByZXF1aXJlKCcuL2hlbHBlcnMnKTtcblxudmFyIF9oZWxwZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlbHBlcnMpO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEV2ZW50SGFuZGxlcnMgPSB7XG4gIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHByZXZpb3VzIGFuZCBuZXh0XG4gIGNoYW5nZVNsaWRlOiBmdW5jdGlvbiBjaGFuZ2VTbGlkZShvcHRpb25zKSB7XG4gICAgdmFyIGluZGV4T2Zmc2V0LCBwcmV2aW91c0ludCwgc2xpZGVPZmZzZXQsIHVuZXZlbk9mZnNldCwgdGFyZ2V0U2xpZGU7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgdmFyIHNsaWRlc1RvU2Nyb2xsID0gX3Byb3BzLnNsaWRlc1RvU2Nyb2xsO1xuICAgIHZhciBzbGlkZXNUb1Nob3cgPSBfcHJvcHMuc2xpZGVzVG9TaG93O1xuICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBzbGlkZUNvdW50ID0gX3N0YXRlLnNsaWRlQ291bnQ7XG4gICAgdmFyIGN1cnJlbnRTbGlkZSA9IF9zdGF0ZS5jdXJyZW50U2xpZGU7XG5cbiAgICB1bmV2ZW5PZmZzZXQgPSBzbGlkZUNvdW50ICUgc2xpZGVzVG9TY3JvbGwgIT09IDA7XG4gICAgaW5kZXhPZmZzZXQgPSB1bmV2ZW5PZmZzZXQgPyAwIDogKHNsaWRlQ291bnQgLSBjdXJyZW50U2xpZGUpICUgc2xpZGVzVG9TY3JvbGw7XG5cbiAgICBpZiAob3B0aW9ucy5tZXNzYWdlID09PSAncHJldmlvdXMnKSB7XG4gICAgICBzbGlkZU9mZnNldCA9IGluZGV4T2Zmc2V0ID09PSAwID8gc2xpZGVzVG9TY3JvbGwgOiBzbGlkZXNUb1Nob3cgLSBpbmRleE9mZnNldDtcbiAgICAgIHRhcmdldFNsaWRlID0gY3VycmVudFNsaWRlIC0gc2xpZGVPZmZzZXQ7XG4gICAgICBpZiAodGhpcy5wcm9wcy5sYXp5TG9hZCkge1xuICAgICAgICBwcmV2aW91c0ludCA9IGN1cnJlbnRTbGlkZSAtIHNsaWRlT2Zmc2V0O1xuICAgICAgICB0YXJnZXRTbGlkZSA9IHByZXZpb3VzSW50ID09PSAtMSA/IHNsaWRlQ291bnQgLSAxIDogcHJldmlvdXNJbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1lc3NhZ2UgPT09ICduZXh0Jykge1xuICAgICAgc2xpZGVPZmZzZXQgPSBpbmRleE9mZnNldCA9PT0gMCA/IHNsaWRlc1RvU2Nyb2xsIDogaW5kZXhPZmZzZXQ7XG4gICAgICB0YXJnZXRTbGlkZSA9IGN1cnJlbnRTbGlkZSArIHNsaWRlT2Zmc2V0O1xuICAgICAgaWYgKHRoaXMucHJvcHMubGF6eUxvYWQpIHtcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSAoY3VycmVudFNsaWRlICsgc2xpZGVzVG9TY3JvbGwpICUgc2xpZGVDb3VudCArIGluZGV4T2Zmc2V0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5tZXNzYWdlID09PSAnZG90cycgfHwgb3B0aW9ucy5tZXNzYWdlID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAvLyBDbGljayBvbiBkb3RzXG4gICAgICB0YXJnZXRTbGlkZSA9IG9wdGlvbnMuaW5kZXggKiBvcHRpb25zLnNsaWRlc1RvU2Nyb2xsO1xuICAgICAgaWYgKHRhcmdldFNsaWRlID09PSBvcHRpb25zLmN1cnJlbnRTbGlkZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1lc3NhZ2UgPT09ICdpbmRleCcpIHtcbiAgICAgIHRhcmdldFNsaWRlID0gcGFyc2VJbnQob3B0aW9ucy5pbmRleCk7XG4gICAgICBpZiAodGFyZ2V0U2xpZGUgPT09IG9wdGlvbnMuY3VycmVudFNsaWRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNsaWRlSGFuZGxlcih0YXJnZXRTbGlkZSk7XG4gIH0sXG5cbiAgLy8gQWNjZXNzaWJsaXR5IGhhbmRsZXIgZm9yIHByZXZpb3VzIGFuZCBuZXh0XG4gIGtleUhhbmRsZXI6IGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuICAgIC8vRG9udCBzbGlkZSBpZiB0aGUgY3Vyc29yIGlzIGluc2lkZSB0aGUgZm9ybSBmaWVsZHMgYW5kIGFycm93IGtleXMgYXJlIHByZXNzZWRcbiAgICBpZiAoIWUudGFyZ2V0LnRhZ05hbWUubWF0Y2goJ1RFWFRBUkVBfElOUFVUfFNFTEVDVCcpKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAzNyAmJiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VTbGlkZSh7XG4gICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy5ydGwgPT09IHRydWUgPyAnbmV4dCcgOiAncHJldmlvdXMnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM5ICYmIHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLnJ0bCA9PT0gdHJ1ZSA/ICdwcmV2aW91cycgOiAnbmV4dCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAvLyBGb2N1cyBvbiBzZWxlY3RpbmcgYSBzbGlkZSAoY2xpY2sgaGFuZGxlciBvbiB0cmFjaylcbiAgc2VsZWN0SGFuZGxlcjogZnVuY3Rpb24gc2VsZWN0SGFuZGxlcihvcHRpb25zKSB7XG4gICAgdGhpcy5jaGFuZ2VTbGlkZShvcHRpb25zKTtcbiAgfSxcbiAgc3dpcGVTdGFydDogZnVuY3Rpb24gc3dpcGVTdGFydChlKSB7XG4gICAgdmFyIHRvdWNoZXMsIHBvc1gsIHBvc1k7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5zd2lwZSA9PT0gZmFsc2UgfHwgJ29udG91Y2hlbmQnIGluIGRvY3VtZW50ICYmIHRoaXMucHJvcHMuc3dpcGUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmRyYWdnYWJsZSA9PT0gZmFsc2UgJiYgZS50eXBlLmluZGV4T2YoJ21vdXNlJykgIT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHBvc1ggPSBlLnRvdWNoZXMgIT09IHVuZGVmaW5lZCA/IGUudG91Y2hlc1swXS5wYWdlWCA6IGUuY2xpZW50WDtcbiAgICBwb3NZID0gZS50b3VjaGVzICE9PSB1bmRlZmluZWQgPyBlLnRvdWNoZXNbMF0ucGFnZVkgOiBlLmNsaWVudFk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkcmFnZ2luZzogdHJ1ZSxcbiAgICAgIHRvdWNoT2JqZWN0OiB7XG4gICAgICAgIHN0YXJ0WDogcG9zWCxcbiAgICAgICAgc3RhcnRZOiBwb3NZLFxuICAgICAgICBjdXJYOiBwb3NYLFxuICAgICAgICBjdXJZOiBwb3NZXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHN3aXBlTW92ZTogZnVuY3Rpb24gc3dpcGVNb3ZlKGUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZHJhZ2dpbmcpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuYW5pbWF0aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsICYmIHRoaXMucHJvcHMuc3dpcGVUb1NsaWRlICYmIHRoaXMucHJvcHMudmVydGljYWxTd2lwaW5nKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIHZhciBzd2lwZUxlZnQ7XG4gICAgdmFyIGN1ckxlZnQsIHBvc2l0aW9uT2Zmc2V0O1xuICAgIHZhciB0b3VjaE9iamVjdCA9IHRoaXMuc3RhdGUudG91Y2hPYmplY3Q7XG5cbiAgICBjdXJMZWZ0ID0gKDAsIF90cmFja0hlbHBlci5nZXRUcmFja0xlZnQpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7XG4gICAgICBzbGlkZUluZGV4OiB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSxcbiAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpO1xuICAgIHRvdWNoT2JqZWN0LmN1clggPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVggOiBlLmNsaWVudFg7XG4gICAgdG91Y2hPYmplY3QuY3VyWSA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5wYWdlWSA6IGUuY2xpZW50WTtcbiAgICB0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KE1hdGgucG93KHRvdWNoT2JqZWN0LmN1clggLSB0b3VjaE9iamVjdC5zdGFydFgsIDIpKSk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcpIHtcbiAgICAgIHRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID0gTWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3codG91Y2hPYmplY3QuY3VyWSAtIHRvdWNoT2JqZWN0LnN0YXJ0WSwgMikpKTtcbiAgICB9XG5cbiAgICBwb3NpdGlvbk9mZnNldCA9ICh0aGlzLnByb3BzLnJ0bCA9PT0gZmFsc2UgPyAxIDogLTEpICogKHRvdWNoT2JqZWN0LmN1clggPiB0b3VjaE9iamVjdC5zdGFydFggPyAxIDogLTEpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmVydGljYWxTd2lwaW5nKSB7XG4gICAgICBwb3NpdGlvbk9mZnNldCA9IHRvdWNoT2JqZWN0LmN1clkgPiB0b3VjaE9iamVjdC5zdGFydFkgPyAxIDogLTE7XG4gICAgfVxuXG4gICAgdmFyIGN1cnJlbnRTbGlkZSA9IHRoaXMuc3RhdGUuY3VycmVudFNsaWRlO1xuICAgIHZhciBkb3RDb3VudCA9IE1hdGguY2VpbCh0aGlzLnN0YXRlLnNsaWRlQ291bnQgLyB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsKTtcbiAgICB2YXIgc3dpcGVEaXJlY3Rpb24gPSB0aGlzLnN3aXBlRGlyZWN0aW9uKHRoaXMuc3RhdGUudG91Y2hPYmplY3QpO1xuICAgIHZhciB0b3VjaFN3aXBlTGVuZ3RoID0gdG91Y2hPYmplY3Quc3dpcGVMZW5ndGg7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChjdXJyZW50U2xpZGUgPT09IDAgJiYgc3dpcGVEaXJlY3Rpb24gPT09ICdyaWdodCcgfHwgY3VycmVudFNsaWRlICsgMSA+PSBkb3RDb3VudCAmJiBzd2lwZURpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgIHRvdWNoU3dpcGVMZW5ndGggPSB0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCAqIHRoaXMucHJvcHMuZWRnZUZyaWN0aW9uO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVkZ2VEcmFnZ2VkID09PSBmYWxzZSAmJiB0aGlzLnByb3BzLmVkZ2VFdmVudCkge1xuICAgICAgICAgIHRoaXMucHJvcHMuZWRnZUV2ZW50KHN3aXBlRGlyZWN0aW9uKTtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZWRnZURyYWdnZWQ6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5zd2lwZWQgPT09IGZhbHNlICYmIHRoaXMucHJvcHMuc3dpcGVFdmVudCkge1xuICAgICAgdGhpcy5wcm9wcy5zd2lwZUV2ZW50KHN3aXBlRGlyZWN0aW9uKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBzd2lwZWQ6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnByb3BzLnZlcnRpY2FsKSB7XG4gICAgICBzd2lwZUxlZnQgPSBjdXJMZWZ0ICsgdG91Y2hTd2lwZUxlbmd0aCAqIHBvc2l0aW9uT2Zmc2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZUxlZnQgPSBjdXJMZWZ0ICsgdG91Y2hTd2lwZUxlbmd0aCAqICh0aGlzLnN0YXRlLmxpc3RIZWlnaHQgLyB0aGlzLnN0YXRlLmxpc3RXaWR0aCkgKiBwb3NpdGlvbk9mZnNldDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcpIHtcbiAgICAgIHN3aXBlTGVmdCA9IGN1ckxlZnQgKyB0b3VjaFN3aXBlTGVuZ3RoICogcG9zaXRpb25PZmZzZXQ7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB0b3VjaE9iamVjdDogdG91Y2hPYmplY3QsXG4gICAgICBzd2lwZUxlZnQ6IHN3aXBlTGVmdCxcbiAgICAgIHRyYWNrU3R5bGU6ICgwLCBfdHJhY2tIZWxwZXIuZ2V0VHJhY2tDU1MpKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IGxlZnQ6IHN3aXBlTGVmdCB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSlcbiAgICB9KTtcblxuICAgIGlmIChNYXRoLmFicyh0b3VjaE9iamVjdC5jdXJYIC0gdG91Y2hPYmplY3Quc3RhcnRYKSA8IE1hdGguYWJzKHRvdWNoT2JqZWN0LmN1clkgLSB0b3VjaE9iamVjdC5zdGFydFkpICogMC44KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA+IDQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sXG4gIGdldE5hdmlnYWJsZUluZGV4ZXM6IGZ1bmN0aW9uIGdldE5hdmlnYWJsZUluZGV4ZXMoKSB7XG4gICAgdmFyIG1heCA9IHZvaWQgMDtcbiAgICB2YXIgYnJlYWtQb2ludCA9IDA7XG4gICAgdmFyIGNvdW50ZXIgPSAwO1xuICAgIHZhciBpbmRleGVzID0gW107XG5cbiAgICBpZiAoIXRoaXMucHJvcHMuaW5maW5pdGUpIHtcbiAgICAgIG1heCA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWtQb2ludCA9IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93ICogLTE7XG4gICAgICBjb3VudGVyID0gdGhpcy5wcm9wcy5zbGlkZXNUb1Nob3cgKiAtMTtcbiAgICAgIG1heCA9IHRoaXMuc3RhdGUuc2xpZGVDb3VudCAqIDI7XG4gICAgfVxuXG4gICAgd2hpbGUgKGJyZWFrUG9pbnQgPCBtYXgpIHtcbiAgICAgIGluZGV4ZXMucHVzaChicmVha1BvaW50KTtcbiAgICAgIGJyZWFrUG9pbnQgPSBjb3VudGVyICsgdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcblxuICAgICAgY291bnRlciArPSB0aGlzLnByb3BzLnNsaWRlc1RvU2Nyb2xsIDw9IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93ID8gdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbCA6IHRoaXMucHJvcHMuc2xpZGVzVG9TaG93O1xuICAgIH1cblxuICAgIHJldHVybiBpbmRleGVzO1xuICB9LFxuICBjaGVja05hdmlnYWJsZTogZnVuY3Rpb24gY2hlY2tOYXZpZ2FibGUoaW5kZXgpIHtcbiAgICB2YXIgbmF2aWdhYmxlcyA9IHRoaXMuZ2V0TmF2aWdhYmxlSW5kZXhlcygpO1xuICAgIHZhciBwcmV2TmF2aWdhYmxlID0gMDtcblxuICAgIGlmIChpbmRleCA+IG5hdmlnYWJsZXNbbmF2aWdhYmxlcy5sZW5ndGggLSAxXSkge1xuICAgICAgaW5kZXggPSBuYXZpZ2FibGVzW25hdmlnYWJsZXMubGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIG4gaW4gbmF2aWdhYmxlcykge1xuICAgICAgICBpZiAoaW5kZXggPCBuYXZpZ2FibGVzW25dKSB7XG4gICAgICAgICAgaW5kZXggPSBwcmV2TmF2aWdhYmxlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJldk5hdmlnYWJsZSA9IG5hdmlnYWJsZXNbbl07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9LFxuICBnZXRTbGlkZUNvdW50OiBmdW5jdGlvbiBnZXRTbGlkZUNvdW50KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgY2VudGVyT2Zmc2V0ID0gdGhpcy5wcm9wcy5jZW50ZXJNb2RlID8gdGhpcy5zdGF0ZS5zbGlkZVdpZHRoICogTWF0aC5mbG9vcih0aGlzLnByb3BzLnNsaWRlc1RvU2hvdyAvIDIpIDogMDtcblxuICAgIGlmICh0aGlzLnByb3BzLnN3aXBlVG9TbGlkZSkge1xuICAgICAgdmFyIHN3aXBlZFNsaWRlID0gdm9pZCAwO1xuXG4gICAgICB2YXIgc2xpY2tMaXN0ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMubGlzdCk7XG5cbiAgICAgIHZhciBzbGlkZXMgPSBzbGlja0xpc3QucXVlcnlTZWxlY3RvckFsbCgnLnNsaWNrLXNsaWRlJyk7XG5cbiAgICAgIEFycmF5LmZyb20oc2xpZGVzKS5ldmVyeShmdW5jdGlvbiAoc2xpZGUpIHtcbiAgICAgICAgaWYgKCFfdGhpcy5wcm9wcy52ZXJ0aWNhbCkge1xuICAgICAgICAgIGlmIChzbGlkZS5vZmZzZXRMZWZ0IC0gY2VudGVyT2Zmc2V0ICsgX3RoaXMuZ2V0V2lkdGgoc2xpZGUpIC8gMiA+IF90aGlzLnN0YXRlLnN3aXBlTGVmdCAqIC0xKSB7XG4gICAgICAgICAgICBzd2lwZWRTbGlkZSA9IHNsaWRlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc2xpZGUub2Zmc2V0VG9wICsgX3RoaXMuZ2V0SGVpZ2h0KHNsaWRlKSAvIDIgPiBfdGhpcy5zdGF0ZS5zd2lwZUxlZnQgKiAtMSkge1xuICAgICAgICAgICAgc3dpcGVkU2xpZGUgPSBzbGlkZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgc2xpZGVzVHJhdmVyc2VkID0gTWF0aC5hYnMoc3dpcGVkU2xpZGUuZGF0YXNldC5pbmRleCAtIHRoaXMuc3RhdGUuY3VycmVudFNsaWRlKSB8fCAxO1xuXG4gICAgICByZXR1cm4gc2xpZGVzVHJhdmVyc2VkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5zbGlkZXNUb1Njcm9sbDtcbiAgICB9XG4gIH0sXG5cbiAgc3dpcGVFbmQ6IGZ1bmN0aW9uIHN3aXBlRW5kKGUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZHJhZ2dpbmcpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLnN3aXBlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRvdWNoT2JqZWN0ID0gdGhpcy5zdGF0ZS50b3VjaE9iamVjdDtcbiAgICB2YXIgbWluU3dpcGUgPSB0aGlzLnN0YXRlLmxpc3RXaWR0aCAvIHRoaXMucHJvcHMudG91Y2hUaHJlc2hvbGQ7XG4gICAgdmFyIHN3aXBlRGlyZWN0aW9uID0gdGhpcy5zd2lwZURpcmVjdGlvbih0b3VjaE9iamVjdCk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52ZXJ0aWNhbFN3aXBpbmcpIHtcbiAgICAgIG1pblN3aXBlID0gdGhpcy5zdGF0ZS5saXN0SGVpZ2h0IC8gdGhpcy5wcm9wcy50b3VjaFRocmVzaG9sZDtcbiAgICB9XG5cbiAgICAvLyByZXNldCB0aGUgc3RhdGUgb2YgdG91Y2ggcmVsYXRlZCBzdGF0ZSB2YXJpYWJsZXMuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkcmFnZ2luZzogZmFsc2UsXG4gICAgICBlZGdlRHJhZ2dlZDogZmFsc2UsXG4gICAgICBzd2lwZWQ6IGZhbHNlLFxuICAgICAgc3dpcGVMZWZ0OiBudWxsLFxuICAgICAgdG91Y2hPYmplY3Q6IHt9XG4gICAgfSk7XG4gICAgLy8gRml4IGZvciAjMTNcbiAgICBpZiAoIXRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA+IG1pblN3aXBlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHZhciBzbGlkZUNvdW50ID0gdm9pZCAwLFxuICAgICAgICAgIG5ld1NsaWRlID0gdm9pZCAwO1xuXG4gICAgICBzd2l0Y2ggKHN3aXBlRGlyZWN0aW9uKSB7XG5cbiAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICAgIG5ld1NsaWRlID0gdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUgKyB0aGlzLmdldFNsaWRlQ291bnQoKTtcbiAgICAgICAgICBzbGlkZUNvdW50ID0gdGhpcy5wcm9wcy5zd2lwZVRvU2xpZGUgPyB0aGlzLmNoZWNrTmF2aWdhYmxlKG5ld1NsaWRlKSA6IG5ld1NsaWRlO1xuICAgICAgICAgIHRoaXMuc3RhdGUuY3VycmVudERpcmVjdGlvbiA9IDA7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICBjYXNlICd1cCc6XG4gICAgICAgICAgbmV3U2xpZGUgPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZSAtIHRoaXMuZ2V0U2xpZGVDb3VudCgpO1xuICAgICAgICAgIHNsaWRlQ291bnQgPSB0aGlzLnByb3BzLnN3aXBlVG9TbGlkZSA/IHRoaXMuY2hlY2tOYXZpZ2FibGUobmV3U2xpZGUpIDogbmV3U2xpZGU7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50RGlyZWN0aW9uID0gMTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHNsaWRlQ291bnQgPSB0aGlzLnN0YXRlLmN1cnJlbnRTbGlkZTtcblxuICAgICAgfVxuXG4gICAgICB0aGlzLnNsaWRlSGFuZGxlcihzbGlkZUNvdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQWRqdXN0IHRoZSB0cmFjayBiYWNrIHRvIGl0J3Mgb3JpZ2luYWwgcG9zaXRpb24uXG4gICAgICB2YXIgY3VycmVudExlZnQgPSAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrTGVmdCkoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgICAgc2xpZGVJbmRleDogdGhpcy5zdGF0ZS5jdXJyZW50U2xpZGUsXG4gICAgICAgIHRyYWNrUmVmOiB0aGlzLnRyYWNrXG4gICAgICB9LCB0aGlzLnByb3BzLCB0aGlzLnN0YXRlKSk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB0cmFja1N0eWxlOiAoMCwgX3RyYWNrSGVscGVyLmdldFRyYWNrQW5pbWF0ZUNTUykoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgbGVmdDogY3VycmVudExlZnQgfSwgdGhpcy5wcm9wcywgdGhpcy5zdGF0ZSkpXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIG9uSW5uZXJTbGlkZXJFbnRlcjogZnVuY3Rpb24gb25Jbm5lclNsaWRlckVudGVyKGUpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvcGxheSAmJiB0aGlzLnByb3BzLnBhdXNlT25Ib3Zlcikge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgIH1cbiAgfSxcbiAgb25Jbm5lclNsaWRlck92ZXI6IGZ1bmN0aW9uIG9uSW5uZXJTbGlkZXJPdmVyKGUpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvcGxheSAmJiB0aGlzLnByb3BzLnBhdXNlT25Ib3Zlcikge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgIH1cbiAgfSxcbiAgb25Jbm5lclNsaWRlckxlYXZlOiBmdW5jdGlvbiBvbklubmVyU2xpZGVyTGVhdmUoZSkge1xuICAgIGlmICh0aGlzLnByb3BzLmF1dG9wbGF5ICYmIHRoaXMucHJvcHMucGF1c2VPbkhvdmVyKSB7XG4gICAgICB0aGlzLmF1dG9QbGF5KCk7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBFdmVudEhhbmRsZXJzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1zbGljay9saWIvbWl4aW5zL2V2ZW50LWhhbmRsZXJzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfaW5uZXJTbGlkZXIgPSByZXF1aXJlKCcuL2lubmVyLXNsaWRlcicpO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxudmFyIF9qc29uMm1xID0gcmVxdWlyZSgnanNvbjJtcScpO1xuXG52YXIgX2pzb24ybXEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfanNvbjJtcSk7XG5cbnZhciBfcmVhY3RSZXNwb25zaXZlTWl4aW4gPSByZXF1aXJlKCdyZWFjdC1yZXNwb25zaXZlLW1peGluJyk7XG5cbnZhciBfcmVhY3RSZXNwb25zaXZlTWl4aW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RSZXNwb25zaXZlTWl4aW4pO1xuXG52YXIgX2RlZmF1bHRQcm9wcyA9IHJlcXVpcmUoJy4vZGVmYXVsdC1wcm9wcycpO1xuXG52YXIgX2RlZmF1bHRQcm9wczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZhdWx0UHJvcHMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgU2xpZGVyID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdTbGlkZXInLFxuXG4gIG1peGluczogW19yZWFjdFJlc3BvbnNpdmVNaXhpbjIuZGVmYXVsdF0sXG4gIGlubmVyU2xpZGVyOiBudWxsLFxuICBpbm5lclNsaWRlclJlZkhhbmRsZXI6IGZ1bmN0aW9uIGlubmVyU2xpZGVyUmVmSGFuZGxlcihyZWYpIHtcbiAgICB0aGlzLmlubmVyU2xpZGVyID0gcmVmO1xuICB9LFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYnJlYWtwb2ludDogbnVsbFxuICAgIH07XG4gIH0sXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5yZXNwb25zaXZlKSB7XG4gICAgICB2YXIgYnJlYWtwb2ludHMgPSB0aGlzLnByb3BzLnJlc3BvbnNpdmUubWFwKGZ1bmN0aW9uIChicmVha3B0KSB7XG4gICAgICAgIHJldHVybiBicmVha3B0LmJyZWFrcG9pbnQ7XG4gICAgICB9KTtcbiAgICAgIGJyZWFrcG9pbnRzLnNvcnQoZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHggLSB5O1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGJyZWFrcG9pbnQsIGluZGV4KSB7XG4gICAgICAgIHZhciBiUXVlcnk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgIGJRdWVyeSA9ICgwLCBfanNvbjJtcTIuZGVmYXVsdCkoeyBtaW5XaWR0aDogMCwgbWF4V2lkdGg6IGJyZWFrcG9pbnQgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYlF1ZXJ5ID0gKDAsIF9qc29uMm1xMi5kZWZhdWx0KSh7IG1pbldpZHRoOiBicmVha3BvaW50c1tpbmRleCAtIDFdLCBtYXhXaWR0aDogYnJlYWtwb2ludCB9KTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5tZWRpYShiUXVlcnksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGJyZWFrcG9pbnQ6IGJyZWFrcG9pbnQgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlZ2lzdGVyIG1lZGlhIHF1ZXJ5IGZvciBmdWxsIHNjcmVlbi4gTmVlZCB0byBzdXBwb3J0IHJlc2l6ZSBmcm9tIHNtYWxsIHRvIGxhcmdlXG4gICAgICB2YXIgcXVlcnkgPSAoMCwgX2pzb24ybXEyLmRlZmF1bHQpKHsgbWluV2lkdGg6IGJyZWFrcG9pbnRzLnNsaWNlKC0xKVswXSB9KTtcblxuICAgICAgdGhpcy5tZWRpYShxdWVyeSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGJyZWFrcG9pbnQ6IG51bGwgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgc2xpY2tQcmV2OiBmdW5jdGlvbiBzbGlja1ByZXYoKSB7XG4gICAgdGhpcy5pbm5lclNsaWRlci5zbGlja1ByZXYoKTtcbiAgfSxcblxuICBzbGlja05leHQ6IGZ1bmN0aW9uIHNsaWNrTmV4dCgpIHtcbiAgICB0aGlzLmlubmVyU2xpZGVyLnNsaWNrTmV4dCgpO1xuICB9LFxuXG4gIHNsaWNrR29UbzogZnVuY3Rpb24gc2xpY2tHb1RvKHNsaWRlKSB7XG4gICAgdGhpcy5pbm5lclNsaWRlci5zbGlja0dvVG8oc2xpZGUpO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHNldHRpbmdzO1xuICAgIHZhciBuZXdQcm9wcztcbiAgICBpZiAodGhpcy5zdGF0ZS5icmVha3BvaW50KSB7XG4gICAgICBuZXdQcm9wcyA9IHRoaXMucHJvcHMucmVzcG9uc2l2ZS5maWx0ZXIoZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgcmV0dXJuIHJlc3AuYnJlYWtwb2ludCA9PT0gX3RoaXMyLnN0YXRlLmJyZWFrcG9pbnQ7XG4gICAgICB9KTtcbiAgICAgIHNldHRpbmdzID0gbmV3UHJvcHNbMF0uc2V0dGluZ3MgPT09ICd1bnNsaWNrJyA/ICd1bnNsaWNrJyA6ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgdGhpcy5wcm9wcywgbmV3UHJvcHNbMF0uc2V0dGluZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXR0aW5ncyA9ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgX2RlZmF1bHRQcm9wczIuZGVmYXVsdCwgdGhpcy5wcm9wcyk7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgfVxuXG4gICAgLy8gQ2hpbGRyZW4gbWF5IGNvbnRhaW4gZmFsc2Ugb3IgbnVsbCwgc28gd2Ugc2hvdWxkIGZpbHRlciB0aGVtXG4gICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gISFjaGlsZDtcbiAgICB9KTtcblxuICAgIGlmIChzZXR0aW5ncyA9PT0gJ3Vuc2xpY2snKSB7XG4gICAgICAvLyBpZiAndW5zbGljaycgcmVzcG9uc2l2ZSBicmVha3BvaW50IHNldHRpbmcgdXNlZCwganVzdCByZXR1cm4gdGhlIDxTbGlkZXI+IHRhZyBuZXN0ZWQgSFRNTFxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX2lubmVyU2xpZGVyLklubmVyU2xpZGVyLFxuICAgICAgICBfZXh0ZW5kcyh7IHJlZjogdGhpcy5pbm5lclNsaWRlclJlZkhhbmRsZXIgfSwgc2V0dGluZ3MpLFxuICAgICAgICBjaGlsZHJlblxuICAgICAgKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNsaWRlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtc2xpY2svbGliL3NsaWRlci5qc1xuLy8gbW9kdWxlIGlkID0gMzE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuVHJhY2sgPSB1bmRlZmluZWQ7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbnZhciBfY2xhc3NuYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcblxudmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZ2V0U2xpZGVDbGFzc2VzID0gZnVuY3Rpb24gZ2V0U2xpZGVDbGFzc2VzKHNwZWMpIHtcbiAgdmFyIHNsaWNrQWN0aXZlLCBzbGlja0NlbnRlciwgc2xpY2tDbG9uZWQ7XG4gIHZhciBjZW50ZXJPZmZzZXQsIGluZGV4O1xuXG4gIGlmIChzcGVjLnJ0bCkge1xuICAgIGluZGV4ID0gc3BlYy5zbGlkZUNvdW50IC0gMSAtIHNwZWMuaW5kZXg7XG4gIH0gZWxzZSB7XG4gICAgaW5kZXggPSBzcGVjLmluZGV4O1xuICB9XG5cbiAgc2xpY2tDbG9uZWQgPSBpbmRleCA8IDAgfHwgaW5kZXggPj0gc3BlYy5zbGlkZUNvdW50O1xuICBpZiAoc3BlYy5jZW50ZXJNb2RlKSB7XG4gICAgY2VudGVyT2Zmc2V0ID0gTWF0aC5mbG9vcihzcGVjLnNsaWRlc1RvU2hvdyAvIDIpO1xuICAgIHNsaWNrQ2VudGVyID0gKGluZGV4IC0gc3BlYy5jdXJyZW50U2xpZGUpICUgc3BlYy5zbGlkZUNvdW50ID09PSAwO1xuICAgIGlmIChpbmRleCA+IHNwZWMuY3VycmVudFNsaWRlIC0gY2VudGVyT2Zmc2V0IC0gMSAmJiBpbmRleCA8PSBzcGVjLmN1cnJlbnRTbGlkZSArIGNlbnRlck9mZnNldCkge1xuICAgICAgc2xpY2tBY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzbGlja0FjdGl2ZSA9IHNwZWMuY3VycmVudFNsaWRlIDw9IGluZGV4ICYmIGluZGV4IDwgc3BlYy5jdXJyZW50U2xpZGUgKyBzcGVjLnNsaWRlc1RvU2hvdztcbiAgfVxuICByZXR1cm4gKDAsIF9jbGFzc25hbWVzMi5kZWZhdWx0KSh7XG4gICAgJ3NsaWNrLXNsaWRlJzogdHJ1ZSxcbiAgICAnc2xpY2stYWN0aXZlJzogc2xpY2tBY3RpdmUsXG4gICAgJ3NsaWNrLWNlbnRlcic6IHNsaWNrQ2VudGVyLFxuICAgICdzbGljay1jbG9uZWQnOiBzbGlja0Nsb25lZFxuICB9KTtcbn07XG5cbnZhciBnZXRTbGlkZVN0eWxlID0gZnVuY3Rpb24gZ2V0U2xpZGVTdHlsZShzcGVjKSB7XG4gIHZhciBzdHlsZSA9IHt9O1xuXG4gIGlmIChzcGVjLnZhcmlhYmxlV2lkdGggPT09IHVuZGVmaW5lZCB8fCBzcGVjLnZhcmlhYmxlV2lkdGggPT09IGZhbHNlKSB7XG4gICAgc3R5bGUud2lkdGggPSBzcGVjLnNsaWRlV2lkdGg7XG4gIH1cblxuICBpZiAoc3BlYy5mYWRlKSB7XG4gICAgc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIHN0eWxlLmxlZnQgPSAtc3BlYy5pbmRleCAqIHNwZWMuc2xpZGVXaWR0aDtcbiAgICBzdHlsZS5vcGFjaXR5ID0gc3BlYy5jdXJyZW50U2xpZGUgPT09IHNwZWMuaW5kZXggPyAxIDogMDtcbiAgICBzdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgJyArIHNwZWMuc3BlZWQgKyAnbXMgJyArIHNwZWMuY3NzRWFzZTtcbiAgICBzdHlsZS5XZWJraXRUcmFuc2l0aW9uID0gJ29wYWNpdHkgJyArIHNwZWMuc3BlZWQgKyAnbXMgJyArIHNwZWMuY3NzRWFzZTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn07XG5cbnZhciBnZXRLZXkgPSBmdW5jdGlvbiBnZXRLZXkoY2hpbGQsIGZhbGxiYWNrS2V5KSB7XG4gIC8vIGtleSBjb3VsZCBiZSBhIHplcm9cbiAgcmV0dXJuIGNoaWxkLmtleSA9PT0gbnVsbCB8fCBjaGlsZC5rZXkgPT09IHVuZGVmaW5lZCA/IGZhbGxiYWNrS2V5IDogY2hpbGQua2V5O1xufTtcblxudmFyIHJlbmRlclNsaWRlcyA9IGZ1bmN0aW9uIHJlbmRlclNsaWRlcyhzcGVjKSB7XG4gIHZhciBrZXk7XG4gIHZhciBzbGlkZXMgPSBbXTtcbiAgdmFyIHByZUNsb25lU2xpZGVzID0gW107XG4gIHZhciBwb3N0Q2xvbmVTbGlkZXMgPSBbXTtcbiAgdmFyIGNvdW50ID0gX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KHNwZWMuY2hpbGRyZW4pO1xuXG4gIF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5mb3JFYWNoKHNwZWMuY2hpbGRyZW4sIGZ1bmN0aW9uIChlbGVtLCBpbmRleCkge1xuICAgIHZhciBjaGlsZCA9IHZvaWQgMDtcbiAgICB2YXIgY2hpbGRPbkNsaWNrT3B0aW9ucyA9IHtcbiAgICAgIG1lc3NhZ2U6ICdjaGlsZHJlbicsXG4gICAgICBpbmRleDogaW5kZXgsXG4gICAgICBzbGlkZXNUb1Njcm9sbDogc3BlYy5zbGlkZXNUb1Njcm9sbCxcbiAgICAgIGN1cnJlbnRTbGlkZTogc3BlYy5jdXJyZW50U2xpZGVcbiAgICB9O1xuXG4gICAgaWYgKCFzcGVjLmxhenlMb2FkIHwgKHNwZWMubGF6eUxvYWQgJiYgc3BlYy5sYXp5TG9hZGVkTGlzdC5pbmRleE9mKGluZGV4KSA+PSAwKSkge1xuICAgICAgY2hpbGQgPSBlbGVtO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCBudWxsKTtcbiAgICB9XG4gICAgdmFyIGNoaWxkU3R5bGUgPSBnZXRTbGlkZVN0eWxlKCgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7fSwgc3BlYywgeyBpbmRleDogaW5kZXggfSkpO1xuICAgIHZhciBzbGlja0NsYXNzZXMgPSBnZXRTbGlkZUNsYXNzZXMoKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHsgaW5kZXg6IGluZGV4IH0sIHNwZWMpKTtcbiAgICB2YXIgY3NzQ2xhc3NlcztcblxuICAgIGlmIChjaGlsZC5wcm9wcy5jbGFzc05hbWUpIHtcbiAgICAgIGNzc0NsYXNzZXMgPSAoMCwgX2NsYXNzbmFtZXMyLmRlZmF1bHQpKHNsaWNrQ2xhc3NlcywgY2hpbGQucHJvcHMuY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3NzQ2xhc3NlcyA9IHNsaWNrQ2xhc3NlcztcbiAgICB9XG5cbiAgICB2YXIgb25DbGljayA9IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgY2hpbGQucHJvcHMgJiYgY2hpbGQucHJvcHMub25DbGljayAmJiBjaGlsZC5wcm9wcy5vbkNsaWNrKGUpO1xuICAgICAgaWYgKHNwZWMuZm9jdXNPblNlbGVjdCkge1xuICAgICAgICBzcGVjLmZvY3VzT25TZWxlY3QoY2hpbGRPbkNsaWNrT3B0aW9ucyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHNsaWRlcy5wdXNoKF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgIGtleTogJ29yaWdpbmFsJyArIGdldEtleShjaGlsZCwgaW5kZXgpLFxuICAgICAgJ2RhdGEtaW5kZXgnOiBpbmRleCxcbiAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3NlcyxcbiAgICAgIHRhYkluZGV4OiAnLTEnLFxuICAgICAgc3R5bGU6ICgwLCBfb2JqZWN0QXNzaWduMi5kZWZhdWx0KSh7IG91dGxpbmU6ICdub25lJyB9LCBjaGlsZC5wcm9wcy5zdHlsZSB8fCB7fSwgY2hpbGRTdHlsZSksXG4gICAgICBvbkNsaWNrOiBvbkNsaWNrXG4gICAgfSkpO1xuXG4gICAgLy8gdmFyaWFibGVXaWR0aCBkb2Vzbid0IHdyYXAgcHJvcGVybHkuXG4gICAgaWYgKHNwZWMuaW5maW5pdGUgJiYgc3BlYy5mYWRlID09PSBmYWxzZSkge1xuICAgICAgdmFyIGluZmluaXRlQ291bnQgPSBzcGVjLnZhcmlhYmxlV2lkdGggPyBzcGVjLnNsaWRlc1RvU2hvdyArIDEgOiBzcGVjLnNsaWRlc1RvU2hvdztcblxuICAgICAgaWYgKGluZGV4ID49IGNvdW50IC0gaW5maW5pdGVDb3VudCkge1xuICAgICAgICBrZXkgPSAtKGNvdW50IC0gaW5kZXgpO1xuICAgICAgICBwcmVDbG9uZVNsaWRlcy5wdXNoKF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgICAgICBrZXk6ICdwcmVjbG9uZWQnICsgZ2V0S2V5KGNoaWxkLCBrZXkpLFxuICAgICAgICAgICdkYXRhLWluZGV4Jzoga2V5LFxuICAgICAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3NlcyxcbiAgICAgICAgICBzdHlsZTogKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCBjaGlsZC5wcm9wcy5zdHlsZSB8fCB7fSwgY2hpbGRTdHlsZSksXG4gICAgICAgICAgb25DbGljazogb25DbGlja1xuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmRleCA8IGluZmluaXRlQ291bnQpIHtcbiAgICAgICAga2V5ID0gY291bnQgKyBpbmRleDtcbiAgICAgICAgcG9zdENsb25lU2xpZGVzLnB1c2goX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICAgIGtleTogJ3Bvc3RjbG9uZWQnICsgZ2V0S2V5KGNoaWxkLCBrZXkpLFxuICAgICAgICAgICdkYXRhLWluZGV4Jzoga2V5LFxuICAgICAgICAgIGNsYXNzTmFtZTogY3NzQ2xhc3NlcyxcbiAgICAgICAgICBzdHlsZTogKDAsIF9vYmplY3RBc3NpZ24yLmRlZmF1bHQpKHt9LCBjaGlsZC5wcm9wcy5zdHlsZSB8fCB7fSwgY2hpbGRTdHlsZSksXG4gICAgICAgICAgb25DbGljazogb25DbGlja1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAoc3BlYy5ydGwpIHtcbiAgICByZXR1cm4gcHJlQ2xvbmVTbGlkZXMuY29uY2F0KHNsaWRlcywgcG9zdENsb25lU2xpZGVzKS5yZXZlcnNlKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHByZUNsb25lU2xpZGVzLmNvbmNhdChzbGlkZXMsIHBvc3RDbG9uZVNsaWRlcyk7XG4gIH1cbn07XG5cbnZhciBUcmFjayA9IGV4cG9ydHMuVHJhY2sgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ1RyYWNrJyxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgc2xpZGVzID0gcmVuZGVyU2xpZGVzLmNhbGwodGhpcywgdGhpcy5wcm9wcyk7XG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICB7IGNsYXNzTmFtZTogJ3NsaWNrLXRyYWNrJywgc3R5bGU6IHRoaXMucHJvcHMudHJhY2tTdHlsZSB9LFxuICAgICAgc2xpZGVzXG4gICAgKTtcbiAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXNsaWNrL2xpYi90cmFjay5qc1xuLy8gbW9kdWxlIGlkID0gMzE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmZ1bmN0aW9uIGNyZWF0ZVRodW5rTWlkZGxld2FyZShleHRyYUFyZ3VtZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2gsXG4gICAgICAgIGdldFN0YXRlID0gX3JlZi5nZXRTdGF0ZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdGlvbihkaXNwYXRjaCwgZ2V0U3RhdGUsIGV4dHJhQXJndW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5leHQoYWN0aW9uKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcbn1cblxudmFyIHRodW5rID0gY3JlYXRlVGh1bmtNaWRkbGV3YXJlKCk7XG50aHVuay53aXRoRXh0cmFBcmd1bWVudCA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gdGh1bms7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlZHV4LXRodW5rL2xpYi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsIid1c2Ugc3RyaWN0JztcblxuLyogZXNsaW50IG5vLXVuZGVmaW5lZDogMCAqL1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG52YXIgYXNzaWduID0gdm9pZCAwO1xuXG5pZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gPT09ICdmdW5jdGlvbicpIHtcbiAgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcbn0gZWxzZSB7XG4gIGFzc2lnbiA9IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICB9XG5cbiAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG5cbiAgICB2YXIgcHJvcGVydHlPYmplY3RzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gICAgaWYgKHByb3BlcnR5T2JqZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBwcm9wZXJ0eU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICB2YXIgbmV4dEtleSA9IHZvaWQgMDtcblxuICAgICAgICAgIGZvciAobmV4dEtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkobmV4dEtleSkpIHtcbiAgICAgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcbn1cblxudmFyIGFzc2lnbiQxID0gYXNzaWduO1xuXG52YXIgaW5jbHVkZXMgPSB2b2lkIDA7XG5cbmlmICghQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzKSB7XG4gIGluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMoYXJyYXksIHNlYXJjaEVsZW1lbnQpIHtcbiAgICB2YXIgT2JqZWN0aWZpZWRBcnJheSA9IE9iamVjdChhcnJheSk7XG4gICAgdmFyIGxlbmd0aCA9IHBhcnNlSW50KE9iamVjdGlmaWVkQXJyYXkubGVuZ3RoLCAxMCkgfHwgMDtcblxuICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnRJbmRleCA9IHBhcnNlSW50KGFyZ3VtZW50c1syXSwgMTApIHx8IDA7XG4gICAgdmFyIGluZGV4ID0gdm9pZCAwO1xuXG4gICAgaWYgKHN0YXJ0SW5kZXggPj0gMCkge1xuICAgICAgaW5kZXggPSBzdGFydEluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbmRleCA9IGxlbmd0aCArIHN0YXJ0SW5kZXg7XG5cbiAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgICAgfVxuICAgIH1cblxuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgdmFyIGN1cnJlbnRFbGVtZW50ID0gT2JqZWN0aWZpZWRBcnJheVtpbmRleF07XG5cbiAgICAgIC8qIGVzbGludCBuby1zZWxmLWNvbXBhcmU6MCAqL1xuICAgICAgaWYgKHNlYXJjaEVsZW1lbnQgPT09IGN1cnJlbnRFbGVtZW50IHx8IHNlYXJjaEVsZW1lbnQgIT09IHNlYXJjaEVsZW1lbnQgJiYgY3VycmVudEVsZW1lbnQgIT09IGN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgIC8vIE5hTiAhPT0gTmFOXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG59IGVsc2Uge1xuICBpbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzKGFycmF5KSB7XG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzLmFwcGx5KGFycmF5LCBhcmdzKTtcbiAgfTtcbn1cblxudmFyIGluY2x1ZGVzJDEgPSBpbmNsdWRlcztcblxuZnVuY3Rpb24gd3JhcChmdW5jLCBzdXBlckZ1bmMpIHtcbiAgZnVuY3Rpb24gc3VwZXJXcmFwcGVyKCkge1xuICAgIHZhciBvcmlnaW5hbFN1cGVyID0gdGhpc1snc3VwZXInXTtcblxuICAgIHRoaXNbJ3N1cGVyJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc3VwZXJGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIHZhciByZXQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzWydzdXBlciddID0gb3JpZ2luYWxTdXBlcjtcblxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICBzdXBlcldyYXBwZXIud3JhcHBlZEZ1bmN0aW9uID0gZnVuYztcblxuICByZXR1cm4gc3VwZXJXcmFwcGVyO1xufVxuXG5mdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKG5hbWVzLCBwcm90bywgZGVzdGluYXRpb24pIHtcbiAgdmFyIHBhcmVudFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGRlc3RpbmF0aW9uKTtcblxuICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBuYW1lKTtcbiAgICB2YXIgcGFyZW50RGVzY3JpcHRvciA9IHBhcmVudFByb3RvLmhhc093blByb3BlcnR5KG5hbWUpICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocGFyZW50UHJvdG8sIG5hbWUpO1xuXG4gICAgaWYgKHR5cGVvZiBwYXJlbnREZXNjcmlwdG9yLnZhbHVlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZXNjcmlwdG9yLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgd3JhcHBlZEZ1bmN0aW9uID0gd3JhcChkZXNjcmlwdG9yLnZhbHVlLCBwYXJlbnREZXNjcmlwdG9yLnZhbHVlKTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRlc3RpbmF0aW9uLCBuYW1lLCB7IHZhbHVlOiB3cmFwcGVkRnVuY3Rpb24gfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZXN0aW5hdGlvbiwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2xhc3MocHJvcHMpIHtcbiAgdmFyIHBhcmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogT2JqZWN0O1xuXG4gIHZhciBDb25zdHJ1Y3RvciA9IHdyYXAocHJvcHMuY29uc3RydWN0b3IsIHBhcmVudCk7XG4gIHZhciBpbnN0YW5jZVByb3BlcnR5TmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm9wcykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gIWluY2x1ZGVzJDEoWydjb25zdHJ1Y3RvcicsICdzdGF0aWMnXSwga2V5KTtcbiAgfSk7XG5cbiAgYXNzaWduJDEoQ29uc3RydWN0b3IsIHBhcmVudCk7XG5cbiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQucHJvdG90eXBlKTtcbiAgZGVmaW5lUHJvcGVydGllcyhpbnN0YW5jZVByb3BlcnR5TmFtZXMsIHByb3BzLCBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpO1xuICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcblxuICB2YXIgc3RhdGljUHJvcHMgPSBwcm9wc1snc3RhdGljJ107XG5cbiAgaWYgKHN0YXRpY1Byb3BzKSB7XG4gICAgdmFyIHN0YXRpY1Byb3BlcnR5TmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzdGF0aWNQcm9wcyk7XG5cbiAgICBkZWZpbmVQcm9wZXJ0aWVzKHN0YXRpY1Byb3BlcnR5TmFtZXMsIHN0YXRpY1Byb3BzLCBDb25zdHJ1Y3Rvcik7XG4gIH1cblxuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbnZhciBDb3JlT2JqZWN0ID0gY3JlYXRlQ2xhc3Moe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7fSxcblxuXG4gICdzdGF0aWMnOiB7XG4gICAgZXh0ZW5kOiBmdW5jdGlvbiBleHRlbmQoc3ViQ2xhc3NQcm9wcykge1xuICAgICAgcmV0dXJuIGNyZWF0ZUNsYXNzKHN1YkNsYXNzUHJvcHMsIHRoaXMpO1xuICAgIH1cbiAgfVxufSk7XG5cbmZ1bmN0aW9uIHdyYXBDb25zb2xlKGxvZ0NvbW1hbmQpIHtcbiAgdmFyIGxvZ01ldGhvZCA9IGZ1bmN0aW9uIGxvZ01ldGhvZCgpIHtcbiAgICB2YXIgbG9nID0gdm9pZCAwO1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuICAgIGlmIChjb25zb2xlW2xvZ0NvbW1hbmRdKSB7XG4gICAgICBsb2cgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGVbbG9nQ29tbWFuZF0sIGNvbnNvbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2cgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUubG9nLCBjb25zb2xlKTtcbiAgICB9XG4gICAgbG9nLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXG4gICAgYXJncy51bnNoaWZ0KCdbSlMtQlVZLVNES106ICcpO1xuICAgIGxvZ01ldGhvZC5hcHBseSh1bmRlZmluZWQsIF90b0NvbnN1bWFibGVBcnJheShhcmdzKSk7XG4gIH07XG59XG5cbnZhciBMb2dnZXIgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIC8qKlxuICAgKiBXcmFwcGVyIGFyb3VuZCB0aGUgY29uc29sZSBsb2cgc28gaW4gdGhlIGZ1dHVyZSB3ZSBjYW4gaGF2ZSBiZXR0ZXIgZGV2IG91dHB1dC5cbiAgICogQWxzbyBhbGxvd3MgdXMgdG8gZGlzYWJsZSBvdXRwdXQgaW4gcHJvZHVjdGlvbi5cbiAgICogQHByaXZhdGVcbiAgICogQGNsYXNzIExvZ2dlclxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHt9LFxuXG4gIGRlYnVnOiB3cmFwQ29uc29sZSgnZGVidWcnKSxcbiAgaW5mbzogd3JhcENvbnNvbGUoJ2luZm8nKSxcbiAgd2Fybjogd3JhcENvbnNvbGUoJ3dhcm4nKSxcbiAgZXJyb3I6IHdyYXBDb25zb2xlKCdlcnJvcicpXG59KTtcblxudmFyIGxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcblxudmFyIENvbmZpZyA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGF0dHJzKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIE9iamVjdC5rZXlzKHRoaXMuZGVwcmVjYXRlZFByb3BlcnRpZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybU5hbWUgPSBfdGhpcy5kZXByZWNhdGVkUHJvcGVydGllc1trZXldO1xuICAgICAgICB2YXIgdHJhbnNmb3JtID0gX3RoaXNbdHJhbnNmb3JtTmFtZV07XG5cbiAgICAgICAgdHJhbnNmb3JtKGF0dHJzW2tleV0sIGF0dHJzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnJlcXVpcmVkUHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmICghYXR0cnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25ldyBDb25maWcoKSByZXF1aXJlcyB0aGUgb3B0aW9uIFxcJycgKyBrZXkgKyAnXFwnJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpc1trZXldID0gYXR0cnNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLm9wdGlvbmFsUHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIF90aGlzW2tleV0gPSBhdHRyc1trZXldO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCB3aXRoIGtleXMgZm9yIGRlcHJlY2F0ZWQgcHJvcGVydGllcyBhbmQgdmFsdWVzIGFzIGZ1bmN0aW9ucyB0aGF0XG4gICAqIHdpbGwgdHJhbnNmb3JtIHRoZSB2YWx1ZSBpbnRvIGEgdXNhYmxlIHZhbHVlLiBBIGRlcHJhY2F0aW9uIHRyYW5zZm9ybSBzaG91bGRcbiAgICogaGF2ZSB0aGUgdmFsdWUgc2lnbmF0dXJlIGZ1bmN0aW9uKGRlcHJlY2F0ZWRfdmFsdWUsIGNvbmZpZ190b19iZV90cmFuc2Zvcm1lZClcbiAgICogQGF0dHJpYnV0ZSBkZXByZWNhdGVkUHJvcGVydGllc1xuICAgKiBAZGVmYXVsdCB7IG15U2hvcGlmeURvbWFpbjogdGhpcy50cmFuc2Zvcm1NeVNob3BpZnlEb21haW4gfVxuICAgKiBAdHlwZSBPYmplY3RcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlcHJlY2F0ZWRQcm9wZXJ0aWVzOiB7XG4gICAgbXlTaG9waWZ5RG9tYWluOiAndHJhbnNmb3JtTXlTaG9waWZ5RG9tYWluJ1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gdGhlIG15U2hvcGlmeURvbWFpbiBjb25maWcgdG8gYSBkb21haW4gY29uZmlnLlxuICAgKiBAbWV0aG9kIHRyYW5zZm9ybU15U2hvcGlmeURvbWFpblxuICAgKiBAc3RhdGljXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdWJkb21haW4gVGhlIG9yaWdpbmFsIHN1YmRvbWFpbiBvbiBteXNob3BpZnkuY29tXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycy4gVGhlIGNvbmZpZyBhdHRyaWJ1dGVzIHRvIGJlIHRyYW5zZm9ybWVkIHRvIGFcbiAgICogbm9uLWRlcHJlY2F0ZWQgc3RhdGUuXG4gICAqIEByZXR1cm4ge09iamVjdH0gdGhlIHRyYW5zZm9ybWVkIGNvbmZpZyBhdHRyaWJ1dGVzLlxuICAgKi9cbiAgdHJhbnNmb3JtTXlTaG9waWZ5RG9tYWluOiBmdW5jdGlvbiB0cmFuc2Zvcm1NeVNob3BpZnlEb21haW4oc3ViZG9tYWluLCBhdHRycykge1xuICAgIGxvZ2dlci53YXJuKCdDb25maWcgLSAnLCAnbXlTaG9waWZ5RG9tYWluIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgZG9tYWluIGFuZCBwcm92aWRlIHRoZSBmdWxsIHNob3AgZG9tYWluLicpO1xuICAgIGF0dHJzLmRvbWFpbiA9IHN1YmRvbWFpbiArICcubXlzaG9waWZ5LmNvbSc7XG4gIH0sXG5cblxuICAvKipcbiAgICogUHJvcGVydGllcyB0aGF0IG11c3QgYmUgc2V0IG9uIGluaXRpYWxpemF0aW9uc1xuICAgKiBAYXR0cmlidXRlIHJlcXVpcmVkUHJvcGVydGllc1xuICAgKiBAZGVmYXVsdCBbJ2FwaUtleScsICdhcHBJZCcsICdteVNob3BpZnlEb21haW4nXVxuICAgKiBAdHlwZSBBcnJheVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVxdWlyZWRQcm9wZXJ0aWVzOiBbJ2FwaUtleScsICdhcHBJZCcsICdkb21haW4nXSxcblxuICAvKipcbiAgICogUHJvcGVydGllcyB0aGF0IG1heSBiZSBzZXQgb24gaW5pdGlhbGl6YXRpb25zXG4gICAqIEBhdHRyaWJ1dGUgcmVxdWlyZWRQcm9wZXJ0aWVzXG4gICAqIEBkZWZhdWx0IFsnYWpheEhlYWRlcnMnXVxuICAgKiBAdHlwZSBBcnJheVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb3B0aW9uYWxQcm9wZXJ0aWVzOiBbJ2FqYXhIZWFkZXJzJ10sXG5cbiAgLyoqXG4gICAqIFRoZSBhcGlLZXkgZm9yIGF1dGhlbnRpY2F0aW5nIGFnYWluc3Qgc2hvcGlmeS4gVGhpcyBpcyB5b3VyIGFwaSBjbGllbnQnc1xuICAgKiBwdWJsaWMgYXBpIHRva2VuLiBOb3QgdGhlIHNoYXJlZCBzZWNyZXQuIFNldCBkdXJpbmcgaW5pdGlhbGF0aW9uLlxuICAgKiBAYXR0cmlidXRlIGFwaUtleVxuICAgKiBAZGVmYXVsdCAnJ1xuICAgKiBAdHlwZSBTdHJpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFwaUtleTogJycsXG5cbiAgLyoqXG4gICAqIEBhdHRyaWJ1dGUgYXBwSWRcbiAgICogQGRlZmF1bHQgJydcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcHBJZDogJycsXG5cbiAgLyoqXG4gICAqIFRoZSBkb21haW4gdGhhdCBhbGwgdGhlIGFwaSByZXF1ZXN0cyB3aWxsIGdvIHRvXG4gICAqIEBhdHRyaWJ1dGUgZG9tYWluXG4gICAqIEBkZWZhdWx0ICcnXG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZG9tYWluOiAnJyxcblxuICAvKipcbiAgICogVGhlIHN1YmRvbWFpbiBvZiBteXNob3BpZnkuaW8gdGhhdCBhbGwgdGhlIGFwaSByZXF1ZXN0cyB3aWxsIGdvIHRvXG4gICAqIEBhdHRyaWJ1dGUgbXlTaG9waWZ5RG9tYWluXG4gICAqIEBkZWZhdWx0ICcnXG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKiBAcHJpdmF0ZVxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYGNvbmZpZy5kb21haW5gIGluc3RlYWQuXG4gICAqL1xuICBteVNob3BpZnlEb21haW46ICcnLFxuXG4gIC8qKlxuICAgKiBAYXR0cmlidXRlIGFqYXhIZWFkZXJzXG4gICAqIEBkZWZhdWx0IHt9XG4gICAqIEB0eXBlIE9iamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWpheEhlYWRlcnM6IHt9XG59KTtcblxudmFyIHZlcnNpb24gPSAndjAuNi4yLWM4ZjQzOGYnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbnZhciBCYXNlTW9kZWwgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB2YXIgYXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciBtZXRhQXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgdGhpcy5hdHRycyA9IGF0dHJzO1xuXG4gICAgYXNzaWduJDEodGhpcywgbWV0YUF0dHJzKTtcbiAgfSxcblxuICBhdHRyczogbnVsbCxcbiAgc2VyaWFsaXplcjogbnVsbCxcbiAgYWRhcHRlcjogbnVsbCxcbiAgc2hvcENsaWVudDogbnVsbFxufSk7XG5cbi8qKlxuICAqIENsYXNzIGZvciBwcm9kdWN0IG9wdGlvblxuICAqIEBjbGFzcyBQcm9kdWN0T3B0aW9uTW9kZWxcbiAgKiBAY29uc3RydWN0b3JcbiovXG52YXIgUHJvZHVjdE9wdGlvbk1vZGVsID0gQmFzZU1vZGVsLmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzWydzdXBlciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy52YWx1ZXNbMF07XG4gIH1cbn0sIHtcbiAgbmFtZToge1xuXG4gICAgLyoqXG4gICAgICAqIG5hbWUgb2Ygb3B0aW9uLiBFeGFtcGxlIHZhbHVlczogYFwiU2l6ZVwiYCwgYFwiQ29sb3JcImAsIGV0Yy5cbiAgICAgICogQHByb3BlcnR5IG5hbWVcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5uYW1lO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdmFsdWVzOiB7XG5cbiAgICAvKipcbiAgICAgICogYW4gQXJyYXkgcG9zc2libGUgdmFsdWVzIGZvciBvcHRpb24uIEZvciBpbnN0YW5jZSBpZiB0aGlzIG9wdGlvbiBpcyBhIFwiU2l6ZVwiIG9wdGlvbiBhbiBleGFtcGxlIHZhbHVlXG4gICAgICAqIGZvciB2YWx1ZXMgY291bGQgYmU6IGBbXCJMYXJnZVwiLCBcIk1lZGl1bVwiLCBcIlNtYWxsXCJdYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgdmFsdWVzXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSBBcnJheVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YWx1ZXM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBzZWxlY3RlZDoge1xuXG4gICAgLyoqXG4gICAgICAqIGdldC9zZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb24gdmFsdWUgd2l0aCBvbmUgb2YgdGhlIHZhbHVlcyBmcm9tIHRoZVxuICAgICAgKiB7eyNjcm9zc0xpbmsgXCJQcm9kdWN0T3B0aW9uTW9kZWwvdmFsdWVzXCJ9fVByb2R1Y3RPcHRpb25Nb2RlbC52YWx1ZXN7ey9jcm9zc0xpbmt9fSBhcnJheS4gRm9yXG4gICAgICAqIGluc3RhbmNlIGlmIHRoZSBvcHRpb24gdmFsdWVzIGFycmF5IGhhZCB0aGUgZm9sbG93aW5nIGBbXCJMYXJnZVwiLCBcIk1lZGl1bVwiLCBcIlNtYWxsXCJdYCBzZXR0aW5nIGBzZWxlY3RlZGAgdG8gYmVcbiAgICAgICogYFwiTGFyZ2VcImAsIGBcIk1lZGl1bVwiYCwgb3IgYFwiU21hbGxcImAgd291bGQgYmUgdmFsaWQgYW55IG90aGVyIHZhbHVlIHdvdWxkIHRocm93IGFuIGBFcnJvcmAuXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBzZWxlY3RlZFxuICAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgIGlmIChpbmNsdWRlcyQxKHRoaXMudmFsdWVzLCB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWQgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBvcHRpb24gc2VsZWN0aW9uIGZvciAnICsgdGhpcy5uYW1lICsgJy4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG52YXIgdmFyaWFudHMgPSBbeyBuYW1lOiAncGljbycsIGRpbWVuc2lvbjogJzE2eDE2JyB9LCB7IG5hbWU6ICdpY29uJywgZGltZW5zaW9uOiAnMzJ4MzInIH0sIHsgbmFtZTogJ3RodW1iJywgZGltZW5zaW9uOiAnNTB4NTAnIH0sIHsgbmFtZTogJ3NtYWxsJywgZGltZW5zaW9uOiAnMTAweDEwMCcgfSwgeyBuYW1lOiAnY29tcGFjdCcsIGRpbWVuc2lvbjogJzE2MHgxNjAnIH0sIHsgbmFtZTogJ21lZGl1bScsIGRpbWVuc2lvbjogJzI0MHgyNDAnIH0sIHsgbmFtZTogJ2xhcmdlJywgZGltZW5zaW9uOiAnNDgweDQ4MCcgfSwgeyBuYW1lOiAnZ3JhbmRlJywgZGltZW5zaW9uOiAnNjAweDYwMCcgfSwgeyBuYW1lOiAnMTAyNHgxMDI0JywgZGltZW5zaW9uOiAnMTAyNHgxMDI0JyB9LCB7IG5hbWU6ICcyMDQ4eDIwNDgnLCBkaW1lbnNpb246ICcyMDQ4eDIwNDgnIH1dO1xuXG52YXIgSW1hZ2VNb2RlbCA9IENvcmVPYmplY3QuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGF0dHJzKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBfdGhpczJba2V5XSA9IGF0dHJzW2tleV07XG4gICAgfSk7XG4gIH1cbn0sIHtcbiAgdmFyaWFudHM6IHtcblxuICAgIC8qKlxuICAgICAgKiBJbWFnZSB2YXJpYW50cyBhdmFpbGFibGUgZm9yIGFuIGltYWdlLiBBbiBleGFtcGxlIHZhbHVlIG9mIGBpbWFnZVZhcmlhbnRgOlxuICAgICAgKiBgYGBcbiAgICAgICogW1xuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcInBpY29cIixcbiAgICAgICogICAgIFwiZGltZW5zaW9uc1wiOiBcIjE2eDE2XCIsXG4gICAgICAqICAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvYWxpZW5fMTQ2ZWY3YzEtMjZlOS00ZTk2LTk2ZTYtOWQzNzEyOGQwMDA1X3BpY28uanBnP3Y9MTQ2OTA0NjQyM1wiXG4gICAgICAqICAgfSxcbiAgICAgICogICB7XG4gICAgICAqICAgICBcIm5hbWVcIjogXCJjb21wYWN0XCIsXG4gICAgICAqICAgICBcImRpbWVuc2lvbnNcIjogXCIxNjB4MTYwXCIsXG4gICAgICAqICAgICBcInNyY1wiOiBcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8xMDE5LzA0OTUvcHJvZHVjdHMvYWxpZW5fMTQ2ZWY3YzEtMjZlOS00ZTk2LTk2ZTYtOWQzNzEyOGQwMDA1X2NvbXBhY3QuanBnP3Y9MTQ2OTA0NjQyM1wiXG4gICAgICAqICAgfVxuICAgICAgKiBdXG4gICAgICAqIGBgYFxuICAgICAgKlxuICAgICAgKiBAYXR0cmlidXRlIHZhcmlhbnRzXG4gICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIHNyYyA9IHRoaXMuc3JjO1xuICAgICAgdmFyIGV4dGVuc2lvbkluZGV4ID0gc3JjLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICB2YXIgcGF0aEFuZEJhc2VuYW1lID0gc3JjLnNsaWNlKDAsIGV4dGVuc2lvbkluZGV4KTtcbiAgICAgIHZhciBleHRlbnNpb24gPSBzcmMuc2xpY2UoZXh0ZW5zaW9uSW5kZXgpO1xuXG4gICAgICB2YXJpYW50cy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYW50KSB7XG4gICAgICAgIHZhcmlhbnQuc3JjID0gcGF0aEFuZEJhc2VuYW1lICsgJ18nICsgdmFyaWFudC5uYW1lICsgZXh0ZW5zaW9uO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB2YXJpYW50cztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxuLyoqXG4gICogTW9kZWwgZm9yIHByb2R1Y3QgdmFyaWFudFxuICAqIEBjbGFzcyBQcm9kdWN0VmFyaWFudE1vZGVsXG4gICogQGNvbnN0cnVjdG9yXG4qL1xudmFyIFByb2R1Y3RWYXJpYW50TW9kZWwgPSBCYXNlTW9kZWwuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXNbJ3N1cGVyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogR2V0IGEgY2hlY2tvdXQgdXJsIGZvciBhIHNwZWNpZmljIHByb2R1Y3QgdmFyaWFudC4gWW91IGNhblxuICAgICogb3B0aW9uYWxseSBwYXNzIGEgcXVhbnRpdHkuIElmIG5vIHF1YW50aXR5IGlzIHBhc3NlZCB0aGVuIHF1YW50aXR5XG4gICAgKiB3aWxsIGRlZmF1bHQgdG8gMS4gVGhlIGV4YW1wbGUgYmVsb3cgd2lsbCBncmFiIGEgY2hlY2tvdXQgdXJsIGZvclxuICAgICogMyBjb3BpZXMgb2YgdGhlIGZpcnN0IHZhcmlhbnQ6XG4gICAgKiBgYGBcbiAgICAqIGNvbnN0IGNoZWNrb3V0VVJMID0gcHJvZHVjdC52YXJpYW50c1sgMCBdLmNoZWNrb3V0VXJsKDMpO1xuICAgICogYGBgXG4gICAgKlxuICAgICogQG1ldGhvZCBjaGVja291dFVybFxuICAgICogQHBhcmFtIHtOdW1iZXJ9IFtxdWFudGl0eSA9IDFdIHF1YW50aXR5IG9mIHZhcmlhbnRzXG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtTdHJpbmd9IENoZWNrb3V0IFVSTFxuICAqL1xuICBjaGVja291dFVybDogZnVuY3Rpb24gY2hlY2tvdXRVcmwoKSB7XG4gICAgdmFyIHF1YW50aXR5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxO1xuXG4gICAgdmFyIGNvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgIHZhciBiYXNlVXJsID0gJ2h0dHBzOi8vJyArIGNvbmZpZy5kb21haW4gKyAnL2NhcnQnO1xuXG4gICAgdmFyIHZhcmlhbnRQYXRoID0gdGhpcy5pZCArICc6JyArIHBhcnNlSW50KHF1YW50aXR5LCAxMCk7XG5cbiAgICB2YXIgcXVlcnkgPSAnYWNjZXNzX3Rva2VuPScgKyBjb25maWcuYXBpS2V5ICsgJyZfZmQ9MCc7XG5cbiAgICByZXR1cm4gYmFzZVVybCArICcvJyArIHZhcmlhbnRQYXRoICsgJz8nICsgcXVlcnk7XG4gIH1cbn0sIHtcbiAgaWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBWYXJpYW50IHVuaXF1ZSBJRFxuICAgICAgKiBAcHJvcGVydHkgaWRcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5pZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHByb2R1Y3RJZDoge1xuXG4gICAgLyoqXG4gICAgICAqIElEIG9mIHByb2R1Y3QgdmFyaWFudCBiZWxvbmdzIHRvXG4gICAgICAqIEBwcm9wZXJ0eSBwcm9kdWN0SWRcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucHJvZHVjdC5pZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHRpdGxlOiB7XG5cbiAgICAvKipcbiAgICAgICogVGl0bGUgb2YgdmFyaWFudFxuICAgICAgKiBAcHJvcGVydHkgdGl0bGVcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC50aXRsZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHByb2R1Y3RUaXRsZToge1xuXG4gICAgLyoqXG4gICAgICAqIFRpdGxlIG9mIHByb2R1Y3QgdmFyaWFudCBiZWxvbmdzIHRvXG4gICAgICAqIEBwcm9wZXJ0eSBwcm9kdWN0VGl0bGVcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMucHJvZHVjdC50aXRsZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGNvbXBhcmVBdFByaWNlOiB7XG5cbiAgICAvKipcbiAgICAgICogQ29tcGFyZSBhdCBwcmljZSBmb3IgdmFyaWFudC4gVGhlIGBjb21wYXJlQXRQcmljZWAgd291bGQgYmVcbiAgICAgICogdGhlIHByaWNlIG9mIHRoZSBwcm9kdWN0IHByZXZpb3VzbHkgYmVmb3JlIHRoZSBwcm9kdWN0IHdlbnQgb24gc2FsZS4gRm9yIG1vcmUgaW5mb1xuICAgICAgKiBnbyA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLnNob3BpZnkuY29tL21hbnVhbC9wcm9kdWN0cy9wcm9tb3RpbmctbWFya2V0aW5nL3NhbGVzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+aGVyZTwvYT4uXG4gICAgICAqXG4gICAgICAqIElmIG5vIGBjb21wYXJlQXRQcmljZWAgaXMgc2V0IHRoZW4gdGhpcyB2YWx1ZSB3aWxsIGJlIGBudWxsYC4gQW4gZXhhbXBsZSB2YWx1ZTogYFwiNS4wMFwiYFxuICAgICAgKiBAcHJvcGVydHkgY29tcGFyZUF0UHJpY2VcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5jb21wYXJlX2F0X3ByaWNlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcHJpY2U6IHtcblxuICAgIC8qKlxuICAgICAgKiBQcmljZSBvZiB0aGUgdmFyaWFudC4gVGhlIHByaWNlIHdpbGwgYmUgaW4gdGhlIGZvbGxvd2luZyBmb3JtOiBgXCIxMC4wMFwiYFxuICAgICAgKlxuICAgICAgKiBAcHJvcGVydHkgcHJpY2VcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5wcmljZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGZvcm1hdHRlZFByaWNlOiB7XG5cbiAgICAvKipcbiAgICAgICogUHJpY2Ugb2YgdmFyaWFudCwgZm9ybWF0dGVkIGFjY29yZGluZyB0byBzaG9wIGN1cnJlbmN5IGZvcm1hdCBzdHJpbmcuXG4gICAgICAqIEZvciBpbnN0YW5jZSBgXCIkMTAuMDBcImBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IGZvcm1hdHRlZFByaWNlXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnQuZm9ybWF0dGVkX3ByaWNlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgZ3JhbXM6IHtcblxuICAgIC8qKlxuICAgICAgKiBWYXJpYW50IHdlaWdodCBpbiBncmFtcy4gSWYgbm8gd2VpZ2h0IGlzIGRlZmluZWQgZ3JhbXMgd2lsbCBiZSBgMGAuXG4gICAgICAqIEBwcm9wZXJ0eSBncmFtc1xuICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50LmdyYW1zO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgb3B0aW9uVmFsdWVzOiB7XG5cbiAgICAvKipcbiAgICAgICogT3B0aW9uIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyB2YXJpYW50LiBFeGFtcGxlIGBvcHRpb25WYWx1ZXNgOlxuICAgICAgKiBgYGBcbiAgICAgICogW1xuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcIlNpemVcIixcbiAgICAgICogICAgIFwib3B0aW9uX2lkXCI6IDkxNjUzMzY1MTgsXG4gICAgICAqICAgICBcInZhbHVlXCI6IFwic21hbGxcIlxuICAgICAgKiAgIH0sXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwiQ29sb3JcIixcbiAgICAgICogICAgIFwib3B0aW9uX2lkXCI6IDk2NDA1MzIzNTgsXG4gICAgICAqICAgICBcInZhbHVlXCI6IFwiYmx1ZVwiXG4gICAgICAqICAgfVxuICAgICAgKiBdXG4gICAgICAqIGBgYGBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IG9wdGlvblZhbHVlc1xuICAgICAgKiBAdHlwZSB7QXJyYXl8T2JqZWN0fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy52YXJpYW50Lm9wdGlvbl92YWx1ZXM7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBhdmFpbGFibGU6IHtcblxuICAgIC8qKlxuICAgICAgKiBWYXJpYW50IGluIHN0b2NrLiBBbHdheXMgYHRydWVgIGlmIGludmVudG9yeSB0cmFja2luZyBpcyBkaXNhYmxlZC5cbiAgICAgICogQHByb3BlcnR5IGF2YWlsYWJsZVxuICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudC5hdmFpbGFibGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBpbWFnZToge1xuXG4gICAgLyoqXG4gICAgICAqIEltYWdlIGZvciB2YXJpYW50LiBBbiBleGFtcGxlIGltYWdlIGBPYmplY3RgOlxuICAgICAgKiBgYGBcbiAgICAgICoge1xuICAgICAgKiAgIGNyZWF0ZWRfYXQ6IFwiMjAxNi0wOC0yOVQxMjozNTowOS0wNDowMFwiLFxuICAgICAgKiAgIGlkOiAxNzY5MDU1MzM1MCxcbiAgICAgICogICBwb3NpdGlvbjogMSxcbiAgICAgICogICBwcm9kdWN0X2lkOiA4MjkxMDI5NDQ2LFxuICAgICAgKiAgIHNyYzogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2kxMV9jMzMzNDMyNS0yZDY3LTQ2MjMtOGNkNC0wYTZiMDhhYTFiODMuanBnP3Y9MTQ3MjQ4ODUwOVwiLFxuICAgICAgKiAgIHVwZGF0ZWRfYXQ6IFwiMjAxNi0wOC0yOVQxMjozNTowOS0wNDowMFwiLFxuICAgICAgKiAgIHZhcmlhbnRfaWRzOiBbIDI3NjkwMTAzMjM4IF1cbiAgICAgICogfVxuICAgICAgKiBgYGBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IGltYWdlXG4gICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBpZCA9IHRoaXMuaWQ7XG4gICAgICB2YXIgaW1hZ2VzID0gdGhpcy5hdHRycy5wcm9kdWN0LmltYWdlcztcblxuICAgICAgdmFyIHByaW1hcnlJbWFnZSA9IGltYWdlc1swXTtcbiAgICAgIHZhciB2YXJpYW50SW1hZ2UgPSBpbWFnZXMuZmlsdGVyKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICByZXR1cm4gaW1hZ2UudmFyaWFudF9pZHMuaW5kZXhPZihpZCkgIT09IC0xO1xuICAgICAgfSlbMF07XG5cbiAgICAgIHZhciBpbWFnZSA9IHZhcmlhbnRJbWFnZSB8fCBwcmltYXJ5SW1hZ2U7XG5cbiAgICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgSW1hZ2VNb2RlbChpbWFnZSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBpbWFnZVZhcmlhbnRzOiB7XG5cbiAgICAvKipcbiAgICAgICogSW1hZ2UgdmFyaWFudHMgYXZhaWxhYmxlIGZvciBhIHZhcmlhbnQuIEFuIGV4YW1wbGUgdmFsdWUgb2YgYGltYWdlVmFyaWFudGA6XG4gICAgICAqIGBgYFxuICAgICAgKiBbXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwicGljb1wiLFxuICAgICAgKiAgICAgXCJkaW1lbnNpb25zXCI6IFwiMTZ4MTZcIixcbiAgICAgICogICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9hbGllbl8xNDZlZjdjMS0yNmU5LTRlOTYtOTZlNi05ZDM3MTI4ZDAwMDVfcGljby5qcGc/dj0xNDY5MDQ2NDIzXCJcbiAgICAgICogICB9LFxuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcImNvbXBhY3RcIixcbiAgICAgICogICAgIFwiZGltZW5zaW9uc1wiOiBcIjE2MHgxNjBcIixcbiAgICAgICogICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9hbGllbl8xNDZlZjdjMS0yNmU5LTRlOTYtOTZlNi05ZDM3MTI4ZDAwMDVfY29tcGFjdC5qcGc/dj0xNDY5MDQ2NDIzXCJcbiAgICAgICogICB9XG4gICAgICAqIF1cbiAgICAgICogYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBpbWFnZVZhcmlhbnRcbiAgICAgICogQHR5cGUge0FycmF5fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoIXRoaXMuaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5pbWFnZS52YXJpYW50cztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxudmFyIHVuaXEgPSBmdW5jdGlvbiB1bmlxKGFycmF5KSB7XG4gIHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24gKHVuaXF1ZUFycmF5LCBpdGVtKSB7XG4gICAgaWYgKHVuaXF1ZUFycmF5LmluZGV4T2YoaXRlbSkgPCAwKSB7XG4gICAgICB1bmlxdWVBcnJheS5wdXNoKGl0ZW0pO1xuICAgIH1cblxuICAgIHJldHVybiB1bmlxdWVBcnJheTtcbiAgfSwgW10pO1xufTtcblxudmFyIE5PX0lNQUdFX1VSSSA9ICdodHRwczovL3dpZGdldHMuc2hvcGlmeWFwcHMuY29tL2Fzc2V0cy9uby1pbWFnZS5zdmcnO1xuXG4vKipcbiAgICogQ2xhc3MgZm9yIHByb2R1Y3RzIHJldHVybmVkIGJ5IGZldGNoKCdwcm9kdWN0JylcbiAgICogQGNsYXNzIFByb2R1Y3RNb2RlbFxuICAgKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIFByb2R1Y3RNb2RlbCA9IEJhc2VNb2RlbC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1snc3VwZXInXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG59LCB7XG4gIGlkOiB7XG5cbiAgICAvKipcbiAgICAgICogUHJvZHVjdCB1bmlxdWUgSURcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IGlkXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByb2R1Y3RfaWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB0aXRsZToge1xuXG4gICAgLyoqXG4gICAgICAqIFRoZSBwcm9kdWN0IHRpdGxlXG4gICAgICAqIEBwcm9wZXJ0eSB0aXRsZVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy50aXRsZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGRlc2NyaXB0aW9uOiB7XG5cbiAgICAvKipcbiAgICAgICogQSBwcm9kdWN0IGRlc2NyaXB0aW9uLlxuICAgICAgKiBAcHJvcGVydHkgZGVzY3JpcHRpb25cbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMuYm9keV9odG1sO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaW1hZ2VzOiB7XG5cbiAgICAvKipcbiAgICAgICogQW4gYEFycmF5YCBvZiBgT2JqZWN0c2AgdGhhdCBjb250YWluIG1ldGEgZGF0YSBhYm91dCBhbiBpbWFnZSBpbmNsdWRpbmcgYHNyY2Agb2YgdGhlIGltYWdlcy5cbiAgICAgICpcbiAgICAgICogQW4gZXhhbXBsZSBpbWFnZSBgT2JqZWN0YDpcbiAgICAgICogYGBgXG4gICAgICAqIHtcbiAgICAgICogICBjcmVhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICBpZDogMTc2OTA1NTMzNTAsXG4gICAgICAqICAgcG9zaXRpb246IDEsXG4gICAgICAqICAgcHJvZHVjdF9pZDogODI5MTAyOTQ0NixcbiAgICAgICogICBzcmM6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9pMTFfYzMzMzQzMjUtMmQ2Ny00NjIzLThjZDQtMGE2YjA4YWExYjgzLmpwZz92PTE0NzI0ODg1MDlcIixcbiAgICAgICogICB1cGRhdGVkX2F0OiBcIjIwMTYtMDgtMjlUMTI6MzU6MDktMDQ6MDBcIixcbiAgICAgICogICB2YXJpYW50X2lkczogWyAyNzY5MDEwMzIzOCBdXG4gICAgICAqIH1cbiAgICAgICogYGBgXG4gICAgICAqIEBwcm9wZXJ0eSBpbWFnZXNcbiAgICAgICogQHR5cGUge0FycmF5fSBhcnJheSBvZiBpbWFnZSBvYmplY3RzLlxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5pbWFnZXMubWFwKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICByZXR1cm4gbmV3IEltYWdlTW9kZWwoaW1hZ2UpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBtZW1vaXplZDoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdGhpcy5fbWVtb2l6ZWQgPSB0aGlzLl9tZW1vaXplZCB8fCB7fTtcblxuICAgICAgcmV0dXJuIHRoaXMuX21lbW9pemVkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgb3B0aW9uczoge1xuXG4gICAgLyoqXG4gICAgICogIEdldCBhbiBhcnJheSBvZiB7eyNjcm9zc0xpbmsgXCJQcm9kdWN0T3B0aW9uTW9kZWxcIn19UHJvZHVjdE9wdGlvbk1vZGVsc3t7L2Nyb3NzTGlua319LlxuICAgICAqICB7eyNjcm9zc0xpbmsgXCJQcm9kdWN0T3B0aW9uTW9kZWxcIn19UHJvZHVjdE9wdGlvbk1vZGVsc3t7L2Nyb3NzTGlua319IGNhbiBiZSB1c2VkIHRvXG4gICAgICogIGRlZmluZSB0aGUgY3VycmVudGx5IGBzZWxlY3RlZFZhcmlhbnRgIGZyb20gd2hpY2ggeW91IGNhbiBnZXQgYSBjaGVja291dCB1cmxcbiAgICAgKiAgKHt7I2Nyb3NzTGluayBcIlByb2R1Y3RWYXJpYW50TW9kZWwvY2hlY2tvdXRVcmxcIn19UHJvZHVjdFZhcmlhbnRNb2RlbC5jaGVja291dFVybHt7L2Nyb3NzTGlua319KSBvciBjYW5cbiAgICAgKiAgYmUgYWRkZWQgdG8gYSBjYXJ0ICh7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWwvY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzXCJ9fUNhcnRNb2RlbC5jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHN7ey9jcm9zc0xpbmt9fSkuXG4gICAgICpcbiAgICAgKiAgQmVsb3cgaXMgYW4gZXhhbXBsZSBvbiBob3cgdG8gY3JlYXRlIGh0bWwgZm9yIG9wdGlvbiBzZWxlY3Rpb25zOlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiAgLy8gdGhlIGZvbGxvd2luZyB3aWxsIGNyZWF0ZSBhbiBBcnJheSBvZiBIVE1MIHRvIGNyZWF0ZSBtdWx0aXBsZSBzZWxlY3QgaW5wdXRzXG4gICAgICogIC8vIGdsb2JhbCBjYWxsYmFja3MgYXJlIGFsc28gY3JlYXRlZCB3aGljaCB3aWxsIHNldCB0aGUgb3B0aW9uIGFzIHNlbGVjdGVkXG4gICAgICogIHZhciBlbGVtZW50cyA9IHByb2R1Y3Qub3B0aW9ucy5tYXAoZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICogICAgLy8gd2UnbGwgY3JlYXRlIGEgY2FsbGJhY2sgaW4gZ2xvYmFsIHNjb3BlXG4gICAgICogICAgLy8gd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgc2VsZWN0J3MgdmFsdWUgY2hhbmdlc1xuICAgICAqICAgIHZhciBjYWxsQmFja05hbWUgPSBvcHRpb24ubmFtZSArICdvbkNoYW5nZSc7XG4gICAgICogICAgd2luZG93WyBjYWxsQmFja05hbWUgXSA9IGZ1bmN0aW9uKHNlbGVjdCkge1xuICAgICAqICAgICAgLy8gc2V0IHRoZSBwcm9kdWN0cyBvcHRpb24gdG8gYmUgc2VsZWN0ZWRcbiAgICAgKiAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHNlbGVjdC52YWx1ZTtcbiAgICAgKiAgICB9O1xuICAgICAqXG4gICAgICogICAgLy8gcmV0dXJuIGEgc3RyaW5nIHdoaWNoIHdpbGwgYmUgSFRNTCBmb3IgdGhlIHNlbGVjdFxuICAgICAqICAgIHJldHVybiAnPHNlbGVjdCBuYW1lPVwiJyArIG9wdGlvbi5uYW1lICsgJ1wiIG9uY2hhbmdlPVwiJ2NhbGxCYWNrTmFtZScodGhpcylcIj4nICsgb3B0aW9uLnZhbHVlcy5tYXAoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgICAgIHJldHVybiAnPG9wdGlvbiB2YWx1ZT1cIicgKyB2YWx1ZSArICdcIj4nICsgdmFsdWUgKyAnPC9vcHRpb24+JztcbiAgICAgKiAgICB9KSArICc8L3NlbGVjdD4nO1xuICAgICAqICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBvcHRpb25zXG4gICAgICogQHR5cGUge0FycmF5fFByb2R1Y3RPcHRpb25Nb2RlbH1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICh0aGlzLm1lbW9pemVkLm9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZWQub3B0aW9ucztcbiAgICAgIH1cblxuICAgICAgdmFyIGJhc2VPcHRpb25zID0gdGhpcy5hdHRycy5vcHRpb25zO1xuICAgICAgdmFyIHZhcmlhbnRzJCQxID0gdGhpcy52YXJpYW50cztcblxuICAgICAgdGhpcy5tZW1vaXplZC5vcHRpb25zID0gYmFzZU9wdGlvbnMubWFwKGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgdmFyIG5hbWUgPSBvcHRpb24ubmFtZTtcblxuICAgICAgICB2YXIgZHVwZWRWYWx1ZXMgPSB2YXJpYW50cyQkMS5yZWR1Y2UoZnVuY3Rpb24gKHZhbHVlTGlzdCwgdmFyaWFudCkge1xuICAgICAgICAgIHZhciBvcHRpb25WYWx1ZUZvck9wdGlvbiA9IHZhcmlhbnQub3B0aW9uVmFsdWVzLmZpbHRlcihmdW5jdGlvbiAob3B0aW9uVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25WYWx1ZS5uYW1lID09PSBvcHRpb24ubmFtZTtcbiAgICAgICAgICB9KVswXTtcblxuICAgICAgICAgIHZhbHVlTGlzdC5wdXNoKG9wdGlvblZhbHVlRm9yT3B0aW9uLnZhbHVlKTtcblxuICAgICAgICAgIHJldHVybiB2YWx1ZUxpc3Q7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICB2YXIgdmFsdWVzID0gdW5pcShkdXBlZFZhbHVlcyk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9kdWN0T3B0aW9uTW9kZWwoeyBuYW1lOiBuYW1lLCB2YWx1ZXM6IHZhbHVlcyB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcy5tZW1vaXplZC5vcHRpb25zO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdmFyaWFudHM6IHtcblxuICAgIC8qKlxuICAgICAgKiBBbiBgQXJyYXlgIG9mIHt7I2Nyb3NzTGluayBcIlByb2R1Y3RWYXJpYW50TW9kZWxcIn19UHJvZHVjdFZhcmlhbnRNb2RlbCdze3svY3Jvc3NMaW5rfX1cbiAgICAgICogQHByb3BlcnR5IHZhcmlhbnRzXG4gICAgICAqIEB0eXBlIHtBcnJheXxQcm9kdWN0VmFyaWFudE1vZGVsfSBhcnJheSBvZiBQcm9kdWN0VmFyaWFudE1vZGVsIGluc3RhbmNlcy5cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnRzLm1hcChmdW5jdGlvbiAodmFyaWFudCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb2R1Y3RWYXJpYW50TW9kZWwoeyB2YXJpYW50OiB2YXJpYW50LCBwcm9kdWN0OiBfdGhpczMgfSwgeyBjb25maWc6IF90aGlzMy5jb25maWcgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHNlbGVjdGlvbnM6IHtcblxuICAgIC8qKlxuICAgICAgKiBBIHJlYWQgb25seSBgQXJyYXlgIG9mIFN0cmluZ3MgcmVwcmVzZW50ZWQgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbiB2YWx1ZXMuIGVnLiBgW1wiTGFyZ2VcIiwgXCJSZWRcIl1gXG4gICAgICAqIEBwcm9wZXJ0eSBzZWxlY3Rpb25zXG4gICAgICAqIEB0eXBlIHtBcnJheSB8IFN0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gb3B0aW9uLnNlbGVjdGVkO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBzZWxlY3RlZFZhcmlhbnQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBSZXRyaWV2ZSB2YXJpYW50IGZvciBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9ucy4gQnkgZGVmYXVsdCB0aGUgZmlyc3QgdmFsdWUgaW4gZWFjaFxuICAgICAgKiBvcHRpb24gaXMgc2VsZWN0ZWQgd2hpY2ggbWVhbnMgYHNlbGVjdGVkVmFyaWFudGAgd2lsbCBuZXZlciBiZSBgbnVsbGAuXG4gICAgICAqXG4gICAgICAqIFdpdGggYSBgc2VsZWN0ZWRWYXJpYW50YCB5b3UgY2FuIGNyZWF0ZSBjaGVja291dCB1cmxcbiAgICAgICogKHt7I2Nyb3NzTGluayBcIlByb2R1Y3RWYXJpYW50TW9kZWwvY2hlY2tvdXRVcmxcIn19UHJvZHVjdFZhcmlhbnRNb2RlbC5jaGVja291dFVybHt7L2Nyb3NzTGlua319KSBvciBpdCBjYW5cbiAgICAgICogYmUgYWRkZWQgdG8gYSBjYXJ0ICh7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWwvY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzXCJ9fUNhcnRNb2RlbC5jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHN7ey9jcm9zc0xpbmt9fSkuXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBzZWxlY3RlZFZhcmlhbnRcbiAgICAgICogQHR5cGUge1Byb2R1Y3RWYXJpYW50TW9kZWx9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciB2YXJpYW50VGl0bGUgPSB0aGlzLnNlbGVjdGlvbnMuam9pbignIC8gJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLnZhcmlhbnRzLmZpbHRlcihmdW5jdGlvbiAodmFyaWFudCkge1xuICAgICAgICByZXR1cm4gdmFyaWFudC50aXRsZSA9PT0gdmFyaWFudFRpdGxlO1xuICAgICAgfSlbMF0gfHwgbnVsbDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHNlbGVjdGVkVmFyaWFudEltYWdlOiB7XG5cbiAgICAvKipcbiAgICAgICogUmV0cmlldmUgaW1hZ2UgZm9yIGN1cnJlbnRseSBzZWxlY3RlZCB2YXJpYW50SW1hZ2UuIEFuIGV4YW1wbGUgaW1hZ2UgT2JqZWN0IHdvdWxkIGxvb2sgbGlrZSB0aGlzOlxuICAgICAgKiBgYGBcbiAgICAgICoge1xuICAgICAgKiAgIGNyZWF0ZWRfYXQ6IFwiMjAxNi0wOC0yOVQxMjozNTowOS0wNDowMFwiLFxuICAgICAgKiAgIGlkOiAxNzY5MDU1MzM1MCxcbiAgICAgICogICBwb3NpdGlvbjogMSxcbiAgICAgICogICBwcm9kdWN0X2lkOiA4MjkxMDI5NDQ2LFxuICAgICAgKiAgIHNyYzogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL2kxMV9jMzMzNDMyNS0yZDY3LTQ2MjMtOGNkNC0wYTZiMDhhYTFiODMuanBnP3Y9MTQ3MjQ4ODUwOVwiLFxuICAgICAgKiAgIHVwZGF0ZWRfYXQ6IFwiMjAxNi0wOC0yOVQxMjozNTowOS0wNDowMFwiLFxuICAgICAgKiAgIHZhcmlhbnRfaWRzOiBbIDI3NjkwMTAzMjM4IF1cbiAgICAgICogfVxuICAgICAgKiBgYGBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHNlbGVjdGVkVmFyaWFudEltYWdlXG4gICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZFZhcmlhbnQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFyaWFudC5pbWFnZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxudmFyIExpc3RpbmdzU2VyaWFsaXplciA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9LFxuICByb290S2V5Rm9yVHlwZTogZnVuY3Rpb24gcm9vdEtleUZvclR5cGUodHlwZSkge1xuICAgIHJldHVybiB0eXBlLnNsaWNlKDAsIC0xKSArICdfbGlzdGluZyc7XG4gIH0sXG5cblxuICBtb2RlbHM6IHtcbiAgICBjb2xsZWN0aW9uczogQmFzZU1vZGVsLFxuICAgIHByb2R1Y3RzOiBQcm9kdWN0TW9kZWxcbiAgfSxcblxuICBtb2RlbEZvclR5cGU6IGZ1bmN0aW9uIG1vZGVsRm9yVHlwZSh0eXBlKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWxzW3R5cGVdO1xuICB9LFxuICBkZXNlcmlhbGl6ZVNpbmdsZTogZnVuY3Rpb24gZGVzZXJpYWxpemVTaW5nbGUodHlwZSkge1xuICAgIHZhciBzaW5nbGVQYXlsb2FkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB2YXIgbWV0YUF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAgIHZhciBtb2RlbEF0dHJzID0gc2luZ2xlUGF5bG9hZFt0aGlzLnJvb3RLZXlGb3JUeXBlKHR5cGUpXTtcbiAgICB2YXIgbW9kZWwgPSB0aGlzLm1vZGVsRnJvbUF0dHJzKHR5cGUsIG1vZGVsQXR0cnMsIG1ldGFBdHRycyk7XG5cbiAgICByZXR1cm4gbW9kZWw7XG4gIH0sXG4gIGRlc2VyaWFsaXplTXVsdGlwbGU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplTXVsdGlwbGUodHlwZSkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgdmFyIGNvbGxlY3Rpb25QYXlsb2FkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB2YXIgbWV0YUF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAgIHZhciBtb2RlbHMgPSBjb2xsZWN0aW9uUGF5bG9hZFt0aGlzLnJvb3RLZXlGb3JUeXBlKHR5cGUpICsgJ3MnXTtcblxuICAgIHJldHVybiBtb2RlbHMubWFwKGZ1bmN0aW9uIChhdHRycykge1xuICAgICAgdmFyIG1vZGVsID0gX3RoaXM0Lm1vZGVsRnJvbUF0dHJzKHR5cGUsIGF0dHJzLCBtZXRhQXR0cnMpO1xuXG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfSk7XG4gIH0sXG4gIG1vZGVsRnJvbUF0dHJzOiBmdW5jdGlvbiBtb2RlbEZyb21BdHRycyh0eXBlLCBhdHRycywgbWV0YUF0dHJzKSB7XG4gICAgdmFyIE1vZGVsID0gdGhpcy5tb2RlbEZvclR5cGUodHlwZSk7XG5cbiAgICBtZXRhQXR0cnMuY29uZmlnID0gdGhpcy5jb25maWc7XG5cbiAgICByZXR1cm4gbmV3IE1vZGVsKGF0dHJzLCBtZXRhQXR0cnMpO1xuICB9XG59KTtcblxuZnVuY3Rpb24gYXV0aFRvVXJsKHVybCwgb3B0cykge1xuICB2YXIgYXV0aG9yaXphdGlvbiA9IHZvaWQgMDtcblxuICBpZiAob3B0cy5oZWFkZXJzKSB7XG4gICAgT2JqZWN0LmtleXMob3B0cy5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2F1dGhvcml6YXRpb24nKSB7XG4gICAgICAgIGF1dGhvcml6YXRpb24gPSBvcHRzLmhlYWRlcnNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChhdXRob3JpemF0aW9uKSB7XG4gICAgdmFyIGhhc2hlZEtleSA9IGF1dGhvcml6YXRpb24uc3BsaXQoJyAnKS5zbGljZSgtMSlbMF07XG5cbiAgICB0cnkge1xuICAgICAgdmFyIHBsYWluS2V5ID0gYXRvYihoYXNoZWRLZXkpO1xuXG4gICAgICB2YXIgbmV3VXJsID0gdm9pZCAwO1xuXG4gICAgICBpZiAodXJsLmluZGV4T2YoJz8nKSA+IC0xKSB7XG4gICAgICAgIG5ld1VybCA9IHVybCArICcmX3hfaHR0cF9hdXRob3JpemF0aW9uPScgKyBwbGFpbktleTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld1VybCA9IHVybCArICc/X3hfaHR0cF9hdXRob3JpemF0aW9uPScgKyBwbGFpbktleTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1VybDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBhdG9iIGNob2tlZCBvbiBub24tZW5jb2RlZCBkYXRhLiBUaGVyZWZvcmUsIG5vdCBhIGZvcm0gb2YgYXV0aCB3ZVxuICAgICAgLy8gc3VwcG9ydC5cbiAgICAgIC8vXG4gICAgICAvLyBOT09QXG4gICAgICAvL1xuICAgIH1cbiAgfVxuXG4gIC8qIGVzbGludCBuZXdsaW5lLWJlZm9yZS1yZXR1cm46IDAgKi9cbiAgcmV0dXJuIHVybDtcbn1cblxuZnVuY3Rpb24gaWU5QWpheChtZXRob2QsIHVybCwgb3B0cykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciB4ZHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKTtcblxuICAgIHhkci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UoeGRyLnJlc3BvbnNlVGV4dCk7XG5cbiAgICAgICAgcmVzb2x2ZSh7IGpzb246IGpzb24sIG9yaWdpbmFsUmVzcG9uc2U6IHhkciwgaXNKU09OOiB0cnVlIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXNvbHZlKHsgdGV4dDogeGRyLnJlc3BvbnNlVGV4dCwgb3JpZ2luYWxSZXNwb25zZTogeGRyLCBpc1RleHQ6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignVGhlcmUgd2FzIGFuIGVycm9yIHdpdGggdGhlIFhEUicpKTtcbiAgICB9XG5cbiAgICB4ZHIub25lcnJvciA9IGhhbmRsZUVycm9yO1xuICAgIHhkci5vbnRpbWVvdXQgPSBoYW5kbGVFcnJvcjtcblxuICAgIHhkci5vcGVuKG1ldGhvZCwgYXV0aFRvVXJsKHVybCwgb3B0cykpO1xuICAgIHhkci5zZW5kKG9wdHMuZGF0YSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpc05vZGVMaWtlRW52aXJvbm1lbnQoKSB7XG4gIHZhciB3aW5kb3dBYnNlbnQgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJztcbiAgdmFyIHJlcXVpcmVQcmVzZW50ID0gdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbic7XG5cbiAgcmV0dXJuIHdpbmRvd0Fic2VudCAmJiByZXF1aXJlUHJlc2VudDtcbn1cblxuZnVuY3Rpb24gY2hlY2tTdGF0dXMocmVzcG9uc2UpIHtcbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuXG4gIGVycm9yLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgdGhyb3cgZXJyb3I7XG59XG5cbmZ1bmN0aW9uIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uIChqc29uKSB7XG4gICAgcmV0dXJuIHsganNvbjoganNvbiwgb3JpZ2luYWxSZXNwb25zZTogcmVzcG9uc2UsIGlzSlNPTjogdHJ1ZSB9O1xuICB9KVsnY2F0Y2gnXShmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc3BvbnNlQ2xvbmUgPSByZXNwb25zZS5jbG9uZSgpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlQ2xvbmUudGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgIHJldHVybiB7IHRleHQ6IHRleHQsIG9yaWdpbmFsUmVzcG9uc2U6IHJlc3BvbnNlQ2xvbmUsIGlzVGV4dDogdHJ1ZSB9O1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYWpheChtZXRob2QsIHVybCkge1xuICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgLy8gd2UgbmVlZCB0byBjaGVjayB0aGF0IHdlJ3JlIG5vdCBydW5uaW5nIGluIE5vZGVcbiAgLy8gYmVmb3JlIHdlIHNob3VsZCBjaGVjayBpZiB0aGlzIGlzIGllOVxuICBpZiAoIWlzTm9kZUxpa2VFbnZpcm9ubWVudCgpKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKCEoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSkge1xuICAgICAgcmV0dXJuIGllOUFqYXguYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIG9wdHMubWV0aG9kID0gbWV0aG9kO1xuICBvcHRzLm1vZGUgPSAnY29ycyc7XG5cbiAgcmV0dXJuIGZldGNoKHVybCwgb3B0cykudGhlbihjaGVja1N0YXR1cykudGhlbihwYXJzZVJlc3BvbnNlKTtcbn1cblxudmFyIExpc3RpbmdzQWRhcHRlciA9IENvcmVPYmplY3QuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgYWpheDogYWpheCxcblxuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH0sXG4gIHBhdGhGb3JUeXBlOiBmdW5jdGlvbiBwYXRoRm9yVHlwZSh0eXBlKSB7XG4gICAgcmV0dXJuICcvJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJ19saXN0aW5ncyc7XG4gIH0sXG4gIGJ1aWxkVXJsOiBmdW5jdGlvbiBidWlsZFVybChzaW5nbGVPck11bHRpcGxlLCB0eXBlLCBpZE9yUXVlcnkpIHtcbiAgICBzd2l0Y2ggKHNpbmdsZU9yTXVsdGlwbGUpIHtcbiAgICAgIGNhc2UgJ211bHRpcGxlJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRNdWx0aXBsZVVybCh0eXBlLCBpZE9yUXVlcnkpO1xuICAgICAgY2FzZSAnc2luZ2xlJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRTaW5nbGVVcmwodHlwZSwgaWRPclF1ZXJ5KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0sXG4gIGJ1aWxkTXVsdGlwbGVVcmw6IGZ1bmN0aW9uIGJ1aWxkTXVsdGlwbGVVcmwodHlwZSkge1xuICAgIHZhciBxdWVyeSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICB2YXIgdXJsID0gJycgKyB0aGlzLmJhc2VVcmwgKyB0aGlzLnBhdGhGb3JUeXBlKHR5cGUpO1xuICAgIHZhciBwYXJhbU5hbWVzID0gT2JqZWN0LmtleXMocXVlcnkpO1xuXG4gICAgaWYgKHBhcmFtTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gcGFyYW1OYW1lcy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocXVlcnlba2V5XSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHF1ZXJ5W2tleV0uam9pbignLCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gcXVlcnlba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBrZXkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgfSkuam9pbignJicpO1xuXG4gICAgICByZXR1cm4gdXJsICsgJz8nICsgcXVlcnlTdHJpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybDtcbiAgfSxcbiAgYnVpbGRTaW5nbGVVcmw6IGZ1bmN0aW9uIGJ1aWxkU2luZ2xlVXJsKHR5cGUsIGlkKSB7XG4gICAgcmV0dXJuICcnICsgdGhpcy5iYXNlVXJsICsgdGhpcy5wYXRoRm9yVHlwZSh0eXBlKSArICcvJyArIGlkO1xuICB9LFxuICBmZXRjaE11bHRpcGxlOiBmdW5jdGlvbiBmZXRjaE11bHRpcGxlKCkgLyogdHlwZSwgW3F1ZXJ5XSAqL3tcbiAgICB2YXIgdXJsID0gdGhpcy5idWlsZFVybC5hcHBseSh0aGlzLCBbJ211bHRpcGxlJ10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcblxuICAgIHJldHVybiB0aGlzLmFqYXgoJ0dFVCcsIHVybCwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uO1xuICAgIH0pO1xuICB9LFxuICBmZXRjaFNpbmdsZTogZnVuY3Rpb24gZmV0Y2hTaW5nbGUoKSAvKiB0eXBlLCBpZCAqL3tcbiAgICB2YXIgdXJsID0gdGhpcy5idWlsZFVybC5hcHBseSh0aGlzLCBbJ3NpbmdsZSddLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG5cbiAgICByZXR1cm4gdGhpcy5hamF4KCdHRVQnLCB1cmwsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbjtcbiAgICB9KTtcbiAgfVxufSwge1xuICBiYXNlNjRBcGlLZXk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBidG9hKHRoaXMuY29uZmlnLmFwaUtleSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBiYXNlVXJsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgX2NvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgICAgdmFyIGRvbWFpbiA9IF9jb25maWcuZG9tYWluO1xuICAgICAgdmFyIGFwcElkID0gX2NvbmZpZy5hcHBJZDtcblxuXG4gICAgICByZXR1cm4gJ2h0dHBzOi8vJyArIGRvbWFpbiArICcvYXBpL2FwcHMvJyArIGFwcElkO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgaGVhZGVyczoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGFzc2lnbiQxKHt9LCB7XG4gICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgdGhpcy5iYXNlNjRBcGlLZXksXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdYLVNESy1WYXJpYW50JzogJ2phdmFzY3JpcHQnLFxuICAgICAgICAnWC1TREstVmVyc2lvbic6IHZlcnNpb25cblxuICAgICAgfSwgdGhpcy5jb25maWcuYWpheEhlYWRlcnMpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG52YXIgR1VJRF9LRVkgPSAnc2hvcGlmeS1idXktdXVpZCc7XG5cbi8qKlxuICogQSBjYXJ0IHN0b3JlcyBhbiBBcnJheSBvZiBgQ2FydExpbmVJdGVtTW9kZWxgJ3MgaW4gaXQncyBgbGluZUl0ZW1zYCBwcm9wZXJ0eS5cbiAqIEBjbGFzcyBDYXJ0TGluZUl0ZW1Nb2RlbFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBDYXJ0TGluZUl0ZW1Nb2RlbCA9IEJhc2VNb2RlbC5leHRlbmQoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1snc3VwZXInXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG59LCB7XG4gIGlkOiB7XG5cbiAgICAvKipcbiAgICAgKiBBIGxpbmUgaXRlbSBJRC5cbiAgICAgKiBAcHJvcGVydHkgaWRcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnNbR1VJRF9LRVldO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdmFyaWFudF9pZDoge1xuXG4gICAgLyoqXG4gICAgICogSUQgb2YgbGluZSBpdGVtIHZhcmlhbnQuXG4gICAgICogQHByb3BlcnR5IHZhcmlhbnRfaWRcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudmFyaWFudF9pZDtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHByb2R1Y3RfaWQ6IHtcblxuICAgIC8qKlxuICAgICAqIElEIG9mIHZhcmlhbnQncyBwcm9kdWN0LlxuICAgICAqIEBwcm9wZXJ0eSBwcm9kdWN0X2lkXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnByb2R1Y3RfaWQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBpbWFnZToge1xuXG4gICAgLyoqXG4gICAgICogVmFyaWFudCdzIGltYWdlLlxuICAgICAqIEV4YW1wbGUgYE9iamVjdGAgcmV0dXJuZWQ6XG4gICAgICogYGBgXG4gICAgICoge1xuICAgICAqICAgIFwiaWRcIjogMTg3MjMxODMyMzgsXG4gICAgICogICAgXCJjcmVhdGVkX2F0XCI6IFwiMjAxNi0wOS0xNFQxNzoxMjoxMi0wNDowMFwiLFxuICAgICAqICAgIFwicG9zaXRpb25cIjogMSxcbiAgICAgKiAgICBcInVwZGF0ZWRfYXRcIjogXCIyMDE2LTA5LTE0VDE3OjEyOjEyLTA0OjAwXCIsXG4gICAgICogICAgXCJwcm9kdWN0X2lkXCI6IDg1Njk5MTE1NTgsXG4gICAgICogICAgXCJzcmNcIjogXCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMTAxOS8wNDk1L3Byb2R1Y3RzL01vcF9fdGhyZWVfZGlmZmVyZW50X21vcF9oYW5kbGVzLmpwZz92PTE0NzM4ODc1MzJcIixcbiAgICAgKiAgICBcInZhcmlhbnRfaWRzXCI6IFtdXG4gICAgICogIH1cbiAgICAgKiBgYGBcbiAgICAgKiBAcHJvcGVydHkgaW1hZ2VcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCF0aGlzLmF0dHJzLmltYWdlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEltYWdlTW9kZWwodGhpcy5hdHRycy5pbWFnZSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBpbWFnZVZhcmlhbnRzOiB7XG5cbiAgICAvKipcbiAgICAgICogSW1hZ2UgdmFyaWFudHMgYXZhaWxhYmxlIGZvciBhIHZhcmlhbnQuIEFuIGV4YW1wbGUgdmFsdWUgb2YgYGltYWdlVmFyaWFudGA6XG4gICAgICAqIGBgYFxuICAgICAgKiBbXG4gICAgICAqICAge1xuICAgICAgKiAgICAgXCJuYW1lXCI6IFwicGljb1wiLFxuICAgICAgKiAgICAgXCJkaW1lbnNpb25zXCI6IFwiMTZ4MTZcIixcbiAgICAgICogICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9hbGllbl8xNDZlZjdjMS0yNmU5LTRlOTYtOTZlNi05ZDM3MTI4ZDAwMDVfcGljby5qcGc/dj0xNDY5MDQ2NDIzXCJcbiAgICAgICogICB9LFxuICAgICAgKiAgIHtcbiAgICAgICogICAgIFwibmFtZVwiOiBcImNvbXBhY3RcIixcbiAgICAgICogICAgIFwiZGltZW5zaW9uc1wiOiBcIjE2MHgxNjBcIixcbiAgICAgICogICAgIFwic3JjXCI6IFwiaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20vcy9maWxlcy8xLzEwMTkvMDQ5NS9wcm9kdWN0cy9hbGllbl8xNDZlZjdjMS0yNmU5LTRlOTYtOTZlNi05ZDM3MTI4ZDAwMDVfY29tcGFjdC5qcGc/dj0xNDY5MDQ2NDIzXCJcbiAgICAgICogICB9XG4gICAgICAqIF1cbiAgICAgICogYGBgXG4gICAgICAqXG4gICAgICAqIEBwcm9wZXJ0eSBpbWFnZVZhcmlhbnRcbiAgICAgICogQHR5cGUge0FycmF5fVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoIXRoaXMuaW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5pbWFnZS52YXJpYW50cztcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHRpdGxlOiB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWN0IHRpdGxlIG9mIHZhcmlhbnQncyBwYXJlbnQgcHJvZHVjdC5cbiAgICAgKiBAcHJvcGVydHkgdGl0bGVcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnMudGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBxdWFudGl0eToge1xuXG4gICAgLyoqXG4gICAgICogQ291bnQgb2YgdmFyaWFudHMgdG8gb3JkZXIuXG4gICAgICogQHByb3BlcnR5IHF1YW50aXR5XG4gICAgICogQHR5cGUge051bWJlcn1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnF1YW50aXR5O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgIHZhciBwYXJzZWRWYWx1ZSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cbiAgICAgIGlmIChwYXJzZWRWYWx1ZSA8IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWFudGl0aWVzIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgICAgIH0gZWxzZSBpZiAocGFyc2VkVmFsdWUgIT09IHBhcnNlRmxvYXQodmFsdWUpKSB7XG4gICAgICAgIC8qIGluY2lkZW50YWxseSwgdGhpcyBjb3ZlcnMgYWxsIE5hTiB2YWx1ZXMsIGJlY2F1c2UgTmFOICE9PSBOYW4gKi9cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWFudGl0aWVzIG11c3QgYmUgd2hvbGUgbnVtYmVycycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmF0dHJzLnF1YW50aXR5ID0gcGFyc2VkVmFsdWU7XG5cbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnF1YW50aXR5O1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgcHJvcGVydGllczoge1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9taXphdGlvbiBpbmZvcm1hdGlvbiBmb3IgYSBwcm9kdWN0LlxuICAgICAqIDxhIGhyZWY9XCJodHRwczovL2hlbHAuc2hvcGlmeS5jb20vdGhlbWVzL2N1c3RvbWl6YXRpb24vcHJvZHVjdHMvZ2V0LWN1c3RvbWl6YXRpb24taW5mb3JtYXRpb24tZm9yLXByb2R1Y3RzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+XG4gICAgICogU2VlIGhlcmUgZm9yIG1vcmUgaW5mb1xuICAgICAqIDwvYT4uXG4gICAgICogQHByb3BlcnR5IHByb3BlcnRpZXNcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgIHRoaXMuYXR0cnMucHJvcGVydGllcyA9IHZhbHVlIHx8IHt9O1xuXG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB2YXJpYW50X3RpdGxlOiB7XG5cbiAgICAvKipcbiAgICAgKiBUaXRsZSBvZiB2YXJpYW50LlxuICAgICAqIEBwcm9wZXJ0eSB2YXJpYW50X3RpdGxlXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLnZhcmlhbnRfdGl0bGU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBwcmljZToge1xuXG4gICAgLyoqXG4gICAgICogUHJpY2Ugb2YgdGhlIHZhcmlhbnQuIEZvciBleGFtcGxlOiBgXCI1LjAwXCJgLlxuICAgICAqIEBwcm9wZXJ0eSBwcmljZVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5wcmljZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIGNvbXBhcmVfYXRfcHJpY2U6IHtcblxuICAgIC8qKlxuICAgICAgKiBDb21wYXJlIGF0IHByaWNlIGZvciB2YXJpYW50LiBUaGUgYGNvbXBhcmVBdFByaWNlYCB3b3VsZCBiZVxuICAgICAgKiB0aGUgcHJpY2Ugb2YgdGhlIHByb2R1Y3QgcHJldmlvdXNseSBiZWZvcmUgdGhlIHByb2R1Y3Qgd2VudCBvbiBzYWxlLiBGb3IgbW9yZSBpbmZvXG4gICAgICAqIGdvIDxhIGhyZWY9XCJodHRwczovL2RvY3Muc2hvcGlmeS5jb20vbWFudWFsL3Byb2R1Y3RzL3Byb21vdGluZy1tYXJrZXRpbmcvc2FsZXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5oZXJlPC9hPi5cbiAgICAgICpcbiAgICAgICogSWYgbm8gYGNvbXBhcmVBdFByaWNlYCBpcyBzZXQgdGhlbiB0aGlzIHZhbHVlIHdpbGwgYmUgYG51bGxgLiBBbiBleGFtcGxlIHZhbHVlOiBgXCI1LjAwXCJgLlxuICAgICAgKiBAcHJvcGVydHkgY29tcGFyZUF0UHJpY2VcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLmNvbXBhcmVfYXRfcHJpY2U7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBsaW5lX3ByaWNlOiB7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgcHJpY2UgZm9yIHRoaXMgbGluZSBpdGVtLiBGb3IgaW5zdGFuY2UgaWYgdGhlIHZhcmlhbnQgY29zdHMgYDEuNTBgIGFuZCB5b3UgaGF2ZSBhIHF1YW50aXR5XG4gICAgICogb2YgMiB0aGVuIGBsaW5lX3ByaWNlYCB3aWxsIGJlIGAzLjAwYC5cbiAgICAgKiBAcHJvcGVydHkgbGluZV9wcmljZVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gKHRoaXMucXVhbnRpdHkgKiBwYXJzZUZsb2F0KHRoaXMucHJpY2UpKS50b0ZpeGVkKDIpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgZ3JhbXM6IHtcblxuICAgIC8qKlxuICAgICAqIFZhcmlhbnQncyB3ZWlnaHQgaW4gZ3JhbXMuIElmIG5vIHdlaWdodCBpcyBzZXQgdGhlbiBgMGAgaXMgcmV0dXJuZWQuXG4gICAgICogQHByb3BlcnR5IGdyYW1zXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHR5cGUge051bWJlcn1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzLmdyYW1zO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG4vKiBlc2xpbnQgbm8tdW5kZWZpbmVkOiAwIGNvbXBsZXhpdHk6IDAgKi9cbnZhciBHVUlEX1BSRUZJWCA9ICdzaG9waWZ5LWJ1eS4nICsgRGF0ZS5ub3coKTtcblxudmFyIEdVSURfREVTQyA9IHtcbiAgd3JpdGFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IG51bGxcbn07XG5cbnZhciB1dWlkU2VlZCA9IDA7XG5cbmZ1bmN0aW9uIHV1aWQoKSB7XG4gIHJldHVybiArK3V1aWRTZWVkO1xufVxuXG52YXIgbnVtYmVyQ2FjaGUgPSB7fTtcbnZhciBzdHJpbmdDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBzZXRHdWlkRm9yKG9iaikge1xuICBpZiAob2JqICYmIG9ialtHVUlEX0tFWV0pIHtcbiAgICByZXR1cm4gb2JqW0dVSURfS0VZXTtcbiAgfVxuXG4gIGlmIChvYmogPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnKHVuZGVmaW5lZCknO1xuICB9XG5cbiAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnKG51bGwpJztcbiAgfVxuXG4gIHZhciB0eXBlID0gdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yob2JqKTtcbiAgdmFyIGlkID0gdm9pZCAwO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICBpZCA9IG51bWJlckNhY2hlW29ial07XG5cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgaWQgPSBudW1iZXJDYWNoZVtvYmpdID0gJ251JyArIG9iajtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgaWQgPSBzdHJpbmdDYWNoZVtvYmpdO1xuXG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIGlkID0gc3RyaW5nQ2FjaGVbb2JqXSA9ICdzdCcgKyB1dWlkKCk7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICBpZiAob2JqKSB7XG4gICAgICAgIGlkID0gJyh0cnVlKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZCA9ICcoZmFsc2UpJztcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKG9iaiA9PT0gT2JqZWN0KSB7XG4gICAgICAgIGlkID0gJyhPYmplY3QpJztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChvYmogPT09IEFycmF5KSB7XG4gICAgICAgIGlkID0gJyhBcnJheSknO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWQgPSBHVUlEX1BSRUZJWCArICcuJyArIHV1aWQoKTtcblxuICAgICAgaWYgKG9ialtHVUlEX0tFWV0gPT09IG51bGwpIHtcbiAgICAgICAgb2JqW0dVSURfS0VZXSA9IGlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgR1VJRF9ERVNDLnZhbHVlID0gaWQ7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIEdVSURfS0VZLCBHVUlEX0RFU0MpO1xuICAgICAgfVxuICB9XG5cbiAgcmV0dXJuIGlkO1xufVxuXG4vKiBnbG9iYWwgZ2xvYmFsICovXG5cbnZhciBnbG9iYWxOYW1lc3BhY2UgPSB2b2lkIDA7XG5cbmlmICh0eXBlb2YgZ2xvYmFsID09PSAndW5kZWZpbmVkJykge1xuICBnbG9iYWxOYW1lc3BhY2UgPSB3aW5kb3c7XG59IGVsc2Uge1xuICBnbG9iYWxOYW1lc3BhY2UgPSBnbG9iYWw7XG59XG5cbmZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7XG4gIGlmICghZ2xvYmFsTmFtZXNwYWNlW2tleV0pIHtcbiAgICBnbG9iYWxOYW1lc3BhY2Vba2V5XSA9IHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldChrZXkpIHtcbiAgcmV0dXJuIGdsb2JhbE5hbWVzcGFjZVtrZXldO1xufVxuXG52YXIgZ2xvYmFsVmFycyA9IHsgc2V0OiBzZXQsIGdldDogZ2V0IH07XG5cbmZ1bmN0aW9uIG9iamVjdHNFcXVhbChvbmUsIHR3bykge1xuICBpZiAob25lID09PSB0d28pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3Qua2V5cyhvbmUpLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAob25lW2tleV0gaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gb25lW2tleV0udG9TdHJpbmcoKSA9PT0gdHdvW2tleV0udG9TdHJpbmcoKTtcbiAgICB9IGVsc2UgaWYgKF90eXBlb2Yob25lW2tleV0pID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIG9iamVjdHNFcXVhbChvbmVba2V5XSwgdHdvW2tleV0pO1xuICAgIH1cblxuICAgIHJldHVybiBvbmVba2V5XSA9PT0gdHdvW2tleV07XG4gIH0pO1xufVxuXG4vKipcbiogQ2xhc3MgZm9yIGNhcnQgbW9kZWxcbiogQGNsYXNzIENhcnRNb2RlbFxuKi9cbnZhciBDYXJ0TW9kZWwgPSBCYXNlTW9kZWwuZXh0ZW5kKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXNbJ3N1cGVyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogQWRkIGl0ZW1zIHRvIHRoZSBjYXJ0LiBVcGRhdGVzIGNhcnQncyBgbGluZUl0ZW1zYCBiYXNlZCBvbiB2YXJpYW50cyBwYXNzZWQgaW4uXG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiBjYXJ0LmFkZFZhcmlhbnRzKHt2YXJpYW50OiB2YXJpYW50T2JqZWN0LCBxdWFudGl0eTogMX0pLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyBjcmVhdGVkIGxpbmUgaXRlbXNcbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKiBAZGVwcmVjYXRlZCBgY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzYCB3aWxsIGJlIHVzZWQgaW4gdGhlIGZ1dHVyZSBhcyBpdCdzIG1vcmUgZGVzY3JpcHRpdmVcbiAgICAqIEBtZXRob2QgYWRkVmFyaWFudHNcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtIC0gT25lIG9yIG1vcmUgdmFyaWFudHNcbiAgICAqIEBwYXJhbSB7UHJvZHVjdFZhcmlhbnRNb2RlbH0gaXRlbS52YXJpYW50IC0gdmFyaWFudCBvYmplY3RcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBpdGVtLnF1YW50aXR5IC0gcXVhbnRpdHlcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBbbW9yZUl0ZW1zLi4uXSAtIGZ1cnRoZXIgb2JqZWN0cyBkZWZpbmluZyBgdmFyaWFudGAgYW5kIGBxdWFudGl0eWAgbWF5YmUgcGFzc2VkIGluXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdGhlIGNhcnQgaW5zdGFuY2UuXG4gICovXG4gIGFkZFZhcmlhbnRzOiBmdW5jdGlvbiBhZGRWYXJpYW50cygpIHtcbiAgICBsb2dnZXIud2FybignQ2FydE1vZGVsIC0gJywgJ2FkZFZhcmlhbnRzIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzIGluc3RlYWQnKTtcblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBBZGQgaXRlbXMgdG8gdGhlIGNhcnQuIFVwZGF0ZXMgY2FydCdzIGBsaW5lSXRlbXNgIGJhc2VkIG9uIHZhcmlhbnRzIHBhc3NlZCBpbi5cbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIGNhcnQuY3JlYXRlTGluZUl0ZW1zRnJvbVZhcmlhbnRzKHt2YXJpYW50OiB2YXJpYW50T2JqZWN0LCBxdWFudGl0eTogMX0pLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyBjcmVhdGVkIGxpbmUgaXRlbXNcbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKiBAbWV0aG9kIGNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50c1xuICAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW0gLSBPbmUgb3IgbW9yZSB2YXJpYW50c1xuICAgICogQHBhcmFtIHtQcm9kdWN0VmFyaWFudE1vZGVsfSBpdGVtLnZhcmlhbnQgLSB2YXJpYW50IG9iamVjdFxuICAgICogQHBhcmFtIHtOdW1iZXJ9IGl0ZW0ucXVhbnRpdHkgLSBxdWFudGl0eVxuICAgICogQHBhcmFtIHtPYmplY3R9IFttb3JlSXRlbXMuLi5dIC0gZnVydGhlciBvYmplY3RzIGRlZmluaW5nIGB2YXJpYW50YCBhbmQgYHF1YW50aXR5YCBtYXliZSBwYXNzZWQgaW5cbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHRoZSBjYXJ0IGluc3RhbmNlLlxuICAqL1xuICBjcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHM6IGZ1bmN0aW9uIGNyZWF0ZUxpbmVJdGVtc0Zyb21WYXJpYW50cygpIHtcbiAgICB2YXIgbmV3TGluZUl0ZW1zID0gW10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGxpbmVJdGVtID0ge1xuICAgICAgICBpbWFnZTogaXRlbS52YXJpYW50LmltYWdlLFxuICAgICAgICBpbWFnZV92YXJpYW50czogaXRlbS52YXJpYW50LmltYWdlVmFyaWFudHMsXG4gICAgICAgIHZhcmlhbnRfaWQ6IGl0ZW0udmFyaWFudC5pZCxcbiAgICAgICAgcHJvZHVjdF9pZDogaXRlbS52YXJpYW50LnByb2R1Y3RJZCxcbiAgICAgICAgdGl0bGU6IGl0ZW0udmFyaWFudC5wcm9kdWN0VGl0bGUsXG4gICAgICAgIHF1YW50aXR5OiBwYXJzZUludChpdGVtLnF1YW50aXR5LCAxMCksXG4gICAgICAgIHByb3BlcnRpZXM6IGl0ZW0ucHJvcGVydGllcyB8fCB7fSxcbiAgICAgICAgdmFyaWFudF90aXRsZTogaXRlbS52YXJpYW50LnRpdGxlLFxuICAgICAgICBwcmljZTogaXRlbS52YXJpYW50LnByaWNlLFxuICAgICAgICBjb21wYXJlX2F0X3ByaWNlOiBpdGVtLnZhcmlhbnQuY29tcGFyZUF0UHJpY2UsXG4gICAgICAgIGdyYW1zOiBpdGVtLnZhcmlhbnQuZ3JhbXNcbiAgICAgIH07XG5cbiAgICAgIHNldEd1aWRGb3IobGluZUl0ZW0pO1xuXG4gICAgICByZXR1cm4gbGluZUl0ZW07XG4gICAgfSk7XG4gICAgdmFyIGV4aXN0aW5nTGluZUl0ZW1zID0gdGhpcy5hdHRycy5saW5lX2l0ZW1zO1xuXG4gICAgZXhpc3RpbmdMaW5lSXRlbXMucHVzaC5hcHBseShleGlzdGluZ0xpbmVJdGVtcywgX3RvQ29uc3VtYWJsZUFycmF5KG5ld0xpbmVJdGVtcykpO1xuXG4gICAgdmFyIGRlZHVwZWRMaW5lSXRlbXMgPSBleGlzdGluZ0xpbmVJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW1BY2MsIGl0ZW0pIHtcbiAgICAgIHZhciBtYXRjaGluZ0l0ZW0gPSBpdGVtQWNjLmZpbHRlcihmdW5jdGlvbiAoZXhpc3RpbmdJdGVtKSB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0l0ZW0udmFyaWFudF9pZCA9PT0gaXRlbS52YXJpYW50X2lkICYmIG9iamVjdHNFcXVhbChleGlzdGluZ0l0ZW0ucHJvcGVydGllcywgaXRlbS5wcm9wZXJ0aWVzKTtcbiAgICAgIH0pWzBdO1xuXG4gICAgICBpZiAobWF0Y2hpbmdJdGVtKSB7XG4gICAgICAgIG1hdGNoaW5nSXRlbS5xdWFudGl0eSA9IG1hdGNoaW5nSXRlbS5xdWFudGl0eSArIGl0ZW0ucXVhbnRpdHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtQWNjLnB1c2goaXRlbSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpdGVtQWNjO1xuICAgIH0sIFtdKTtcblxuICAgIC8vIFVzZXJzIG1heSBwYXNzIG5lZ2F0aXZlIG51bWJlcnMgYW5kIHJlbW92ZSBpdGVtcy4gVGhpcyBlbnN1cmVzIHRoZXJlJ3Mgbm9cbiAgICAvLyBpdGVtIHdpdGggYSBxdWFudGl0eSBvZiB6ZXJvIG9yIGxlc3MuXG4gICAgdGhpcy5hdHRycy5saW5lX2l0ZW1zID0gZGVkdXBlZExpbmVJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW1BY2MsIGl0ZW0pIHtcbiAgICAgIGlmIChpdGVtLnF1YW50aXR5ID49IDEpIHtcbiAgICAgICAgaXRlbUFjYy5wdXNoKGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbUFjYztcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBVcGRhdGUgYSBsaW5lIGl0ZW0gcXVhbnRpdHkgYmFzZWQgb24gbGluZSBpdGVtIGlkXG4gICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgKiAvLyBUaGlzIGV4YW1wbGUgY2hhbmdlcyB0aGUgcXVhbnRpdHkgZm9yIHRoZSBmaXJzdCBsaW5lIGl0ZW0gdG8gMlxuICAgICogY29uc3QgZmlyc3RMaW5lSXRlbUlkID0gY2FydC5saW5lSXRlbXNbMF0uaWQ7XG4gICAgKlxuICAgICogY2FydC51cGRhdGVMaW5lSXRlbShmaXJzdExpbmVJdGVtSWQsIDIpLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyB1cGRhdGVkIHRoZSBsaW5lIGl0ZW1cbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKiBAbWV0aG9kIHVwZGF0ZUxpbmVJdGVtXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBsaW5lIGl0ZW0gSURcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBxdWFudGl0eSAtIG5ldyBxdWFudGl0eSBmb3IgbGluZSBpdGVtXG4gICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgbGluZSBpdGVtIHdpdGggSUQgaXMgbm90IGluIGNhcnQuXG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB0aGUgY2FydCBpbnN0YW5jZVxuICAqL1xuICB1cGRhdGVMaW5lSXRlbTogZnVuY3Rpb24gdXBkYXRlTGluZUl0ZW0oaWQsIHF1YW50aXR5KSB7XG4gICAgaWYgKHF1YW50aXR5IDwgMSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTGluZUl0ZW0oaWQpO1xuICAgIH1cblxuICAgIHZhciBsaW5lSXRlbSA9IHRoaXMubGluZUl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGlkO1xuICAgIH0pWzBdO1xuXG4gICAgaWYgKGxpbmVJdGVtKSB7XG4gICAgICBsaW5lSXRlbS5xdWFudGl0eSA9IHF1YW50aXR5O1xuXG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdsaW5lIGl0ZW0gd2l0aCBpZDogJyArIGlkICsgJyBub3QgZm91bmQgaW4gY2FydCMnICsgdGhpcy5pZCkpO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBSZW1vdmUgYSBsaW5lIGl0ZW0gZnJvbSBjYXJ0IGJhc2VkIG9uIGxpbmUgaXRlbSBpZFxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogLy8gVGhpcyBleGFtcGxlIHJlbW92ZXMgdGhlIGZpcnN0IGxpbmUgaXRlbVxuICAgICogY29uc3QgZmlyc3RMaW5lSXRlbUlkID0gY2FydC5saW5lSXRlbXNbMF0uaWQ7XG4gICAgKlxuICAgICogY2FydC5yZW1vdmVMaW5lSXRlbShmaXJzdExpbmVJdGVtSWQpLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyByZW1vdmVkIHRoZSBsaW5lIGl0ZW1cbiAgICAqIH0pO1xuICAgICogYGBgXG4gICAgKlxuICAgICogQG1ldGhvZCByZW1vdmVMaW5lSXRlbVxuICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gbGluZSBpdGVtIElEXG4gICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgbGluZSBpdGVtIHdpdGggSUQgaXMgbm90IGluIGNhcnQuXG4gICAgKiBAcHVibGljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gLSB0aGUgY2FydCBpbnN0YW5jZVxuICAqL1xuICByZW1vdmVMaW5lSXRlbTogZnVuY3Rpb24gcmVtb3ZlTGluZUl0ZW0oaWQpIHtcbiAgICB2YXIgb2xkTGVuZ3RoID0gdGhpcy5saW5lSXRlbXMubGVuZ3RoO1xuICAgIHZhciBuZXdMaW5lSXRlbXMgPSB0aGlzLmxpbmVJdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLmlkICE9PSBpZDtcbiAgICB9KTtcbiAgICB2YXIgbmV3TGVuZ3RoID0gbmV3TGluZUl0ZW1zLmxlbmd0aDtcblxuICAgIGlmIChuZXdMZW5ndGggPCBvbGRMZW5ndGgpIHtcbiAgICAgIHRoaXMuYXR0cnMubGluZV9pdGVtcyA9IG5ld0xpbmVJdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uYXR0cnM7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignbGluZSBpdGVtIHdpdGggaWQ6ICcgKyBpZCArICcgbm90IGZvdW5kIGluIGNhcnQjJyArIHRoaXMuaWQpKTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgICogUmVtb3ZlIGFsbCBsaW5lIGl0ZW1zIGZyb20gY2FydFxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogLy8gVGhpcyBleGFtcGxlIHJlbW92ZXMgYWxsIGxpbmUgaXRlbXMgZnJvbSB0aGUgY2FydFxuICAgICogY2FydC5jbGVhckxpbmVJdGVtcygpLnRoZW4oY2FydCA9PiB7XG4gICAgKiAgIC8vIHRoZSBjYXJ0IGhhcyByZW1vdmVkIGFsbCBsaW5lIGl0ZW1zXG4gICAgKiB9KTtcbiAgICAqIEBtZXRob2QgY2xlYXJMaW5lSXRlbXNcbiAgICAqIEBwdWJsaWNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHRoZSBjYXJ0IGluc3RhbmNlXG4gICovXG4gIGNsZWFyTGluZUl0ZW1zOiBmdW5jdGlvbiBjbGVhckxpbmVJdGVtcygpIHtcbiAgICB0aGlzLmF0dHJzLmxpbmVfaXRlbXMgPSBbXTtcblxuICAgIHJldHVybiB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIEZvcmNlIHVwZGF0ZSBvZiBjYXJ0IG1vZGVsIG9uIHNlcnZlci4gVGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgYmUgdXNlZCBpbiBhZHZhbmNlZCBzaXR1YXRpb25zIGFuZCBkb2VzIG5vdCBuZWVkIHRvIGJlIGNhbGxlZFxuICAgICogZXhwbGljaXRseSB0byB1cGRhdGUgbGluZSBpdGVtcy4gSXQgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgYWZ0ZXJcbiAgICAqIHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbC9jcmVhdGVMaW5lSXRlbXNGcm9tVmFyaWFudHNcIn19e3svY3Jvc3NMaW5rfX0sXG4gICAgKiB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWwvdXBkYXRlTGluZUl0ZW1cIn19e3svY3Jvc3NMaW5rfX0sXG4gICAgKiB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWwvcmVtb3ZlTGluZUl0ZW1cIn19e3svY3Jvc3NMaW5rfX0sXG4gICAgKiBhbmQge3sjY3Jvc3NMaW5rIFwiQ2FydE1vZGVsL3JlbW92ZUxpbmVJdGVtXCJ9fXt7L2Nyb3NzTGlua319XG4gICAgKlxuICAgICogQG1ldGhvZCB1cGRhdGVNb2RlbFxuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gdGhlIGNhcnQgaW5zdGFuY2VcbiAgKi9cbiAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHRoaXMuc2hvcENsaWVudC51cGRhdGUoJ2NhcnRzJywgdGhpcykudGhlbihmdW5jdGlvbiAodXBkYXRlQ2FydCkge1xuICAgICAgYXNzaWduJDEoX3RoaXM1LmF0dHJzLCB1cGRhdGVDYXJ0LmF0dHJzKTtcblxuICAgICAgcmV0dXJuIF90aGlzNTtcbiAgICB9KTtcbiAgfVxufSwge1xuICBpZDoge1xuXG4gICAgLyoqXG4gICAgICAqIGdldCBJRCBmb3IgY3VycmVudCBjYXJ0XG4gICAgICAqIEBwcm9wZXJ0eSBpZFxuICAgICAgKiBAcmVhZE9ubHlcbiAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cnNbR1VJRF9LRVldO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgbGluZUl0ZW1zOiB7XG5cbiAgICAvKipcbiAgICAgICogR2V0IGFuIGBBcnJheWAgb2Yge3sjY3Jvc3NMaW5rIFwiQ2FydExpbmVJdGVtTW9kZWxcIn19Q2FydExpbmVJdGVtTW9kZWwnc3t7L2Nyb3NzTGlua319XG4gICAgICAqIEBwcm9wZXJ0eSBsaW5lSXRlbXNcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuICh0aGlzLmF0dHJzLmxpbmVfaXRlbXMgfHwgW10pLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gbmV3IENhcnRMaW5lSXRlbU1vZGVsKGl0ZW0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBsaW5lSXRlbUNvdW50OiB7XG5cbiAgICAvKipcbiAgICAgICogR2V0cyB0aGUgdG90YWwgcXVhbnRpdHkgb2YgYWxsIGxpbmUgaXRlbXMuIEV4YW1wbGU6IHlvdSd2ZSBhZGRlZCB0d28gdmFyaWFudHMgd2l0aCBxdWFudGl0aWVzIDMgYW5kIDIuIGBsaW5lSXRlbUNvdW50YCB3aWxsIGJlIDUuXG4gICAgICAqIEBwcm9wZXJ0eSBsaW5lSXRlbUNvdW50XG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5saW5lSXRlbXMucmVkdWNlKGZ1bmN0aW9uICh0b3RhbCwgaXRlbSkge1xuICAgICAgICByZXR1cm4gdG90YWwgKyBpdGVtLnF1YW50aXR5O1xuICAgICAgfSwgMCk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBzdWJ0b3RhbDoge1xuXG4gICAgLyoqXG4gICAgICAqIEdldCBjdXJyZW50IHN1YnRvdGFsIHByaWNlIGZvciBhbGwgbGluZSBpdGVtcy4gRXhhbXBsZTogdHdvIGl0ZW1zIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgY2FydCB0aGF0IGNvc3QgJDEuMjVcbiAgICAgICogdGhlbiB0aGUgc3VidG90YWwgd2lsbCBiZSBgMi41MGBcbiAgICAgICpcbiAgICAgICogQHByb3BlcnR5IHN1YnRvdGFsXG4gICAgICAqIEByZWFkT25seVxuICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgc3VidG90YWwgPSB0aGlzLmxpbmVJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHJ1bm5pbmdUb3RhbCwgbGluZUl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHJ1bm5pbmdUb3RhbCArIHBhcnNlRmxvYXQobGluZUl0ZW0ubGluZV9wcmljZSk7XG4gICAgICB9LCAwKTtcblxuICAgICAgcmV0dXJuIHN1YnRvdGFsLnRvRml4ZWQoMik7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICBjaGVja291dFVybDoge1xuXG4gICAgLyoqXG4gICAgICAqIEdldCBjaGVja291dCBVUkwgZm9yIGN1cnJlbnQgY2FydFxuICAgICAgKiBAcHJvcGVydHkgY2hlY2tvdXRVcmxcbiAgICAgICogQHJlYWRPbmx5XG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgIHZhciBiYXNlVXJsID0gJ2h0dHBzOi8vJyArIGNvbmZpZy5kb21haW4gKyAnL2NhcnQnO1xuICAgICAgdmFyIGdhID0gZ2xvYmFsVmFycy5nZXQoJ2dhJyk7XG5cbiAgICAgIHZhciB2YXJpYW50UGF0aCA9IHRoaXMubGluZUl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS52YXJpYW50X2lkICsgJzonICsgaXRlbS5xdWFudGl0eTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgcXVlcnkgPSAnYWNjZXNzX3Rva2VuPScgKyBjb25maWcuYXBpS2V5ICsgJyZfZmQ9MCc7XG5cbiAgICAgIGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIGxpbmtlclBhcmFtID0gdm9pZCAwO1xuXG4gICAgICAgIGdhKGZ1bmN0aW9uICh0cmFja2VyKSB7XG4gICAgICAgICAgbGlua2VyUGFyYW0gPSB0cmFja2VyLmdldCgnbGlua2VyUGFyYW0nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGxpbmtlclBhcmFtKSB7XG4gICAgICAgICAgcXVlcnkgKz0gJyYnICsgbGlua2VyUGFyYW07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJhc2VVcmwgKyAnLycgKyB2YXJpYW50UGF0aCArICc/JyArIHF1ZXJ5O1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSkpO1xuXG52YXIgQ2FydFNlcmlhbGl6ZXIgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfSxcbiAgcm9vdEtleUZvclR5cGU6IGZ1bmN0aW9uIHJvb3RLZXlGb3JUeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZS5zbGljZSgwLCAtMSk7XG4gIH0sXG4gIG1vZGVsRm9yVHlwZTogZnVuY3Rpb24gbW9kZWxGb3JUeXBlKCkgLyogdHlwZSAqL3tcbiAgICByZXR1cm4gQ2FydE1vZGVsO1xuICB9LFxuICBkZXNlcmlhbGl6ZVNpbmdsZTogZnVuY3Rpb24gZGVzZXJpYWxpemVTaW5nbGUodHlwZSkge1xuICAgIHZhciBzaW5nbGVQYXlsb2FkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB2YXIgbWV0YUF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAgIHZhciBtb2RlbEF0dHJzID0gc2luZ2xlUGF5bG9hZFt0aGlzLnJvb3RLZXlGb3JUeXBlKHR5cGUpXTtcbiAgICB2YXIgbW9kZWwgPSB0aGlzLm1vZGVsRnJvbUF0dHJzKHR5cGUsIG1vZGVsQXR0cnMsIG1ldGFBdHRycyk7XG5cbiAgICByZXR1cm4gbW9kZWw7XG4gIH0sXG4gIG1vZGVsRnJvbUF0dHJzOiBmdW5jdGlvbiBtb2RlbEZyb21BdHRycyh0eXBlLCBhdHRycywgbWV0YUF0dHJzKSB7XG4gICAgdmFyIE1vZGVsID0gdGhpcy5tb2RlbEZvclR5cGUodHlwZSk7XG5cbiAgICBtZXRhQXR0cnMuY29uZmlnID0gdGhpcy5jb25maWc7XG5cbiAgICByZXR1cm4gbmV3IE1vZGVsKGF0dHJzLCBtZXRhQXR0cnMpO1xuICB9LFxuICBzZXJpYWxpemU6IGZ1bmN0aW9uIHNlcmlhbGl6ZSh0eXBlLCBtb2RlbCkge1xuICAgIHZhciByb290ID0gdGhpcy5yb290S2V5Rm9yVHlwZSh0eXBlKTtcbiAgICB2YXIgcGF5bG9hZCA9IHt9O1xuICAgIHZhciBhdHRycyA9IGFzc2lnbiQxKHt9LCBtb2RlbC5hdHRycyk7XG5cbiAgICBwYXlsb2FkW3Jvb3RdID0gYXR0cnM7XG5cbiAgICBkZWxldGUgYXR0cnMuYXR0cmlidXRlcztcblxuICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGF0dHJzW2tleV07XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgYXR0cnNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBwYXlsb2FkO1xuICB9XG59KTtcblxudmFyIFJlZmVyZW5jZU1vZGVsID0gQmFzZU1vZGVsLmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG5cbiAgLyoqXG4gICAgKiBDbGFzcyBmb3IgcmVmZXJlbmNlIG1vZGVsXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQGNsYXNzIFJlZmVyZW5jZU1vZGVsXG4gICAgKiBAY29uc3RydWN0b3JcbiAgKi9cbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKGF0dHJzKSB7XG4gICAgaWYgKE9iamVjdC5rZXlzKGF0dHJzKS5pbmRleE9mKCdyZWZlcmVuY2VJZCcpIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGtleSByZWZlcmVuY2VJZCBvZiByZWZlcmVuY2UuIFJlZmVyZW5jZXMgdG8gbnVsbCBhcmUgbm90IGFsbG93ZWQnKTtcbiAgICB9XG5cbiAgICB0aGlzWydzdXBlciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbn0sIHtcbiAgaWQ6IHtcblxuICAgIC8qKlxuICAgICAgKiBnZXQgdGhlIElEIGZvciBjdXJyZW50IHJlZmVyZW5jZSAobm90IHdoYXQgaXQgcmVmZXJzIHRvLCBidXQgaXRzIG93biB1bmlxdWUgaWRlbnRpZmllcilcbiAgICAgICogQHByb3BlcnR5IGlkXG4gICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJzW0dVSURfS0VZXTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHJlZmVyZW5jZUlkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRycy5yZWZlcmVuY2VJZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICB0aGlzLmF0dHJzLnJlZmVyZW5jZUlkID0gdmFsdWU7XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pKTtcblxudmFyIFJlZmVyZW5jZVNlcmlhbGl6ZXIgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfSxcbiAgbW9kZWxGb3JUeXBlOiBmdW5jdGlvbiBtb2RlbEZvclR5cGUoKSAvKiB0eXBlICove1xuICAgIHJldHVybiBSZWZlcmVuY2VNb2RlbDtcbiAgfSxcbiAgZGVzZXJpYWxpemVTaW5nbGU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplU2luZ2xlKHR5cGUpIHtcbiAgICB2YXIgc2luZ2xlUGF5bG9hZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdmFyIG1ldGFBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICB2YXIgTW9kZWwgPSB0aGlzLm1vZGVsRm9yVHlwZSh0eXBlKTtcblxuICAgIHJldHVybiBuZXcgTW9kZWwoc2luZ2xlUGF5bG9hZCwgbWV0YUF0dHJzKTtcbiAgfSxcbiAgc2VyaWFsaXplOiBmdW5jdGlvbiBzZXJpYWxpemUodHlwZSwgbW9kZWwpIHtcbiAgICB2YXIgYXR0cnMgPSBhc3NpZ24kMSh7fSwgbW9kZWwuYXR0cnMpO1xuXG4gICAgcmV0dXJuIGF0dHJzO1xuICB9XG59KTtcblxudmFyIFN0b3JlID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sb2NhbFN0b3JhZ2VBdmFpbGFibGUgPSB0aGlzLnN0b3JhZ2VBdmFpbGFibGUoJ2xvY2FsU3RvcmFnZScpO1xuICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgfSxcbiAgc2V0SXRlbTogZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlKSB7XG4gICAgaWYgKHRoaXMubG9jYWxTdG9yYWdlQXZhaWxhYmxlKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FjaGVba2V5XSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgZ2V0SXRlbTogZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHtcbiAgICBpZiAodGhpcy5sb2NhbFN0b3JhZ2VBdmFpbGFibGUpIHtcbiAgICAgIHZhciBzdHJpbmdWYWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0cmluZ1ZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlW2tleV0gfHwgbnVsbDtcbiAgICB9XG4gIH0sXG4gIHN0b3JhZ2VBdmFpbGFibGU6IGZ1bmN0aW9uIHN0b3JhZ2VBdmFpbGFibGUodHlwZSkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgc3RvcmFnZSA9IGdsb2JhbFZhcnMuZ2V0KHR5cGUpO1xuICAgICAgdmFyIHggPSAnX19zdG9yYWdlX3Rlc3RfXyc7XG5cbiAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcbiAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufSk7XG5cbnZhciBMb2NhbFN0b3JhZ2VBZGFwdGVyID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdG9yZSA9IG5ldyBTdG9yZSgpO1xuICB9LFxuICBpZEtleUZvclR5cGU6IGZ1bmN0aW9uIGlkS2V5Rm9yVHlwZSgpIC8qIHR5cGUgKi97XG4gICAgcmV0dXJuIEdVSURfS0VZO1xuICB9LFxuICBmZXRjaFNpbmdsZTogZnVuY3Rpb24gZmV0Y2hTaW5nbGUodHlwZSwgaWQpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgdmFsdWUgPSBfdGhpczYuc3RvcmUuZ2V0SXRlbShfdGhpczYuc3RvcmFnZUtleSh0eXBlLCBpZCkpO1xuXG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0eXBlICsgJyMnICsgaWQgKyAnIG5vdCBmb3VuZCcpKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9LFxuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh0eXBlLCBwYXlsb2FkKSB7XG4gICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIHZhciBpZCA9IF90aGlzNy5pZGVudGlmeShwYXlsb2FkKTtcblxuICAgICAgX3RoaXM3LnN0b3JlLnNldEl0ZW0oX3RoaXM3LnN0b3JhZ2VLZXkodHlwZSwgaWQpLCBwYXlsb2FkKTtcbiAgICAgIHJlc29sdmUocGF5bG9hZCk7XG4gICAgfSk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHR5cGUsIGlkLCBwYXlsb2FkKSB7XG4gICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIF90aGlzOC5zdG9yZS5zZXRJdGVtKF90aGlzOC5zdG9yYWdlS2V5KHR5cGUsIGlkKSwgcGF5bG9hZCk7XG4gICAgICByZXNvbHZlKHBheWxvYWQpO1xuICAgIH0pO1xuICB9LFxuICBzdG9yYWdlS2V5OiBmdW5jdGlvbiBzdG9yYWdlS2V5KHR5cGUsIGlkKSB7XG4gICAgcmV0dXJuIHR5cGUgKyAnLicgKyBpZDtcbiAgfSxcbiAgaWRlbnRpZnk6IGZ1bmN0aW9uIGlkZW50aWZ5KHBheWxvYWQpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHBheWxvYWQpO1xuXG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAxICYmIF90eXBlb2YocGF5bG9hZFtrZXlzWzBdXSkgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gc2V0R3VpZEZvcihwYXlsb2FkW2tleXNbMF1dKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2V0R3VpZEZvcihwYXlsb2FkKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQG1vZHVsZSBzaG9waWZ5LWJ1eVxuICogQHN1Ym1vZHVsZSBzaG9wLWNsaWVudFxuICovXG5cbmZ1bmN0aW9uIGZldGNoRmFjdG9yeShmZXRjaFR5cGUsIHR5cGUpIHtcbiAgdmFyIGZ1bmMgPSB2b2lkIDA7XG5cbiAgc3dpdGNoIChmZXRjaFR5cGUpIHtcbiAgICBjYXNlICdhbGwnOlxuICAgICAgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoQWxsKHR5cGUpO1xuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ29uZSc6XG4gICAgICBmdW5jID0gZnVuY3Rpb24gZnVuYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2guYXBwbHkodGhpcywgW3R5cGVdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncXVlcnknOlxuICAgICAgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoUXVlcnkuYXBwbHkodGhpcywgW3R5cGVdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gZnVuYztcbn1cblxudmFyIFNob3BDbGllbnQgPSBDb3JlT2JqZWN0LmV4dGVuZChPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG4gIC8qKlxuICAgKiBAY2xhc3MgU2hvcENsaWVudFxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbiBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcblxuICAgIHRoaXMuc2VyaWFsaXplcnMgPSB7XG4gICAgICBwcm9kdWN0czogTGlzdGluZ3NTZXJpYWxpemVyLFxuICAgICAgY29sbGVjdGlvbnM6IExpc3RpbmdzU2VyaWFsaXplcixcbiAgICAgIGNhcnRzOiBDYXJ0U2VyaWFsaXplcixcbiAgICAgIHJlZmVyZW5jZXM6IFJlZmVyZW5jZVNlcmlhbGl6ZXJcbiAgICB9O1xuXG4gICAgdGhpcy5hZGFwdGVycyA9IHtcbiAgICAgIHByb2R1Y3RzOiBMaXN0aW5nc0FkYXB0ZXIsXG4gICAgICBjb2xsZWN0aW9uczogTGlzdGluZ3NBZGFwdGVyLFxuICAgICAgY2FydHM6IExvY2FsU3RvcmFnZUFkYXB0ZXIsXG4gICAgICByZWZlcmVuY2VzOiBMb2NhbFN0b3JhZ2VBZGFwdGVyXG4gICAgfTtcbiAgfSxcblxuXG4gIGNvbmZpZzogbnVsbCxcblxuICAvKipcbiAgICogRmV0Y2ggYWxsIG9mIGEgYHR5cGVgLCByZXR1cm5pbmcgYSBwcm9taXNlLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaEFsbCgncHJvZHVjdHMnKS50aGVuKHByb2R1Y3RzID0+IHtcbiAgICogICAvLyBkbyB0aGluZ3Mgd2l0aCBwcm9kdWN0c1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hBbGxcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHBsdXJhbGl6ZWQgbmFtZSBvZiB0aGUgdHlwZSwgaW4gbG93ZXIgY2FzZS5cbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGFuIGFycmF5IG9mIGB0eXBlYFxuICAgKi9cbiAgZmV0Y2hBbGw6IGZ1bmN0aW9uIGZldGNoQWxsKHR5cGUpIHtcbiAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgIHZhciBhZGFwdGVyID0gbmV3IHRoaXMuYWRhcHRlcnNbdHlwZV0odGhpcy5jb25maWcpO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIuZmV0Y2hNdWx0aXBsZSh0eXBlKS50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gX3RoaXM5LmRlc2VyaWFsaXplKHR5cGUsIHBheWxvYWQsIGFkYXB0ZXIsIG51bGwsIHsgbXVsdGlwbGU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogRmV0Y2ggb25lIG9mIGEgYHR5cGVgLCByZXR1cm5pbmcgYSBwcm9taXNlLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaCgncHJvZHVjdHMnLCAxMjMpLnRoZW4ocHJvZHVjdCA9PiB7XG4gICAqICAgLy8gZG8gdGhpbmdzIHdpdGggdGhlIHByb2R1Y3RcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBwbHVyYWxpemVkIG5hbWUgb2YgdGhlIHR5cGUsIGluIGxvd2VyIGNhc2UuXG4gICAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gaWQgYSB1bmlxdWUgaWRlbnRpZmllclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEJhc2VNb2RlbH0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGEgc2luZ2xlIGluc3RhbmNlIG9mXG4gICAqIGB0eXBlYCBleHByZXNzZWQgYXMgYSBgQmFzZU1vZGVsYC5cbiAgICovXG4gIGZldGNoOiBmdW5jdGlvbiBmZXRjaCh0eXBlLCBpZCkge1xuICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgIHZhciBhZGFwdGVyID0gbmV3IHRoaXMuYWRhcHRlcnNbdHlwZV0odGhpcy5jb25maWcpO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIuZmV0Y2hTaW5nbGUodHlwZSwgaWQpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgIHJldHVybiBfdGhpczEwLmRlc2VyaWFsaXplKHR5cGUsIHBheWxvYWQsIGFkYXB0ZXIsIG51bGwsIHsgc2luZ2xlOiB0cnVlIH0pO1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEZldGNoIG1hbnkgb2YgYSBgdHlwZWAsIHRoYXQgbWF0Y2ggYHF1ZXJ5YFxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFF1ZXJ5KCdwcm9kdWN0cycsIHsgY29sbGVjdGlvbl9pZDogNDU2IH0pLnRoZW4ocHJvZHVjdHMgPT4ge1xuICAgKiAgIC8vIGRvIHRoaW5ncyB3aXRoIHRoZSBwcm9kdWN0c1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hRdWVyeVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgcGx1cmFsaXplZCBuYW1lIG9mIHRoZSB0eXBlLCBpbiBsb3dlciBjYXNlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnkgYSBxdWVyeSBzZW50IHRvIHRoZSBhcGkgc2VydmVyLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfEFycmF5fSBhIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYW4gYXJyYXkgb2YgYHR5cGVgLlxuICAgKi9cbiAgZmV0Y2hRdWVyeTogZnVuY3Rpb24gZmV0Y2hRdWVyeSh0eXBlLCBxdWVyeSkge1xuICAgIHZhciBfdGhpczExID0gdGhpcztcblxuICAgIHZhciBhZGFwdGVyID0gbmV3IHRoaXMuYWRhcHRlcnNbdHlwZV0odGhpcy5jb25maWcpO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIuZmV0Y2hNdWx0aXBsZSh0eXBlLCBxdWVyeSkudGhlbihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgcmV0dXJuIF90aGlzMTEuZGVzZXJpYWxpemUodHlwZSwgcGF5bG9hZCwgYWRhcHRlciwgbnVsbCwgeyBtdWx0aXBsZTogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgYHR5cGVgLCBvcHRpb25hbGx5IGluY2x1ZGluZyBgbW9kZWxBdHRyc2AuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmNyZWF0ZSgnY2FydHMnLCB7IGxpbmVfaXRlbXM6IFsgLi4uIF0gfSkudGhlbihjYXJ0ID0+IHtcbiAgICogICAvLyBkbyB0aGluZ3Mgd2l0aCB0aGUgY2FydC5cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGNyZWF0ZVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgcGx1cmFsaXplZCBuYW1lIG9mIHRoZSB0eXBlLCBpbiBsb3dlciBjYXNlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW21vZGVsQXR0cnM9e31dIGF0dHJpYnV0ZXMgcmVwcmVzZW50aW5nIHRoZSBpbnRlcm5hbCBzdGF0ZVxuICAgKiBvZiB0aGUgbW9kZWwgdG8gYmUgcGVyc2lzdGVkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGEgc2luZ2xlIGluc3RhbmNlIG9mXG4gICAqIGB0eXBlYFxuICAgKi9cbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodHlwZSkge1xuICAgIHZhciBfdGhpczEyID0gdGhpcztcblxuICAgIHZhciBtb2RlbEF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHZhciBhZGFwdGVyID0gbmV3IHRoaXMuYWRhcHRlcnNbdHlwZV0odGhpcy5jb25maWcpO1xuICAgIHZhciBzZXJpYWxpemVyID0gbmV3IHRoaXMuc2VyaWFsaXplcnNbdHlwZV0odGhpcy5jb25maWcpO1xuICAgIHZhciBNb2RlbCA9IHNlcmlhbGl6ZXIubW9kZWxGb3JUeXBlKHR5cGUpO1xuICAgIHZhciBtb2RlbCA9IG5ldyBNb2RlbChtb2RlbEF0dHJzLCB7IHNob3BDbGllbnQ6IHRoaXMgfSk7XG4gICAgdmFyIGF0dHJzID0gc2VyaWFsaXplci5zZXJpYWxpemUodHlwZSwgbW9kZWwpO1xuXG4gICAgcmV0dXJuIGFkYXB0ZXIuY3JlYXRlKHR5cGUsIGF0dHJzKS50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gX3RoaXMxMi5kZXNlcmlhbGl6ZSh0eXBlLCBwYXlsb2FkLCBhZGFwdGVyLCBzZXJpYWxpemVyLCB7IHNpbmdsZTogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgYHR5cGVgLCBvcHRpb25hbGx5IGluY2x1ZGluZyBgYXR0cnNgLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5jcmVhdGUoJ2NhcnRzJywgeyBsaW5lX2l0ZW1zOiBbIC4uLiBdIH0pLnRoZW4oY2FydCA9PiB7XG4gICAqICAgLy8gZG8gdGhpbmdzIHdpdGggdGhlIGNhcnQuXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCB1cGRhdGVcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHBsdXJhbGl6ZWQgbmFtZSBvZiB0aGUgdHlwZSwgaW4gbG93ZXIgY2FzZS5cbiAgICogQHBhcmFtIHtCYXNlTW9kZWx9IHVwZGF0ZWRNb2RlbCBUaGUgbW9kZWwgdGhhdCByZXByZXNlbnRzIG5ldyBzdGF0ZSB0b1xuICAgKiB0byBwZXJzaXN0LlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gYSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGEgc2luZ2xlIGluc3RhbmNlIG9mXG4gICAqIGB0eXBlYFxuICAgKi9cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodHlwZSwgdXBkYXRlZE1vZGVsKSB7XG4gICAgdmFyIF90aGlzMTMgPSB0aGlzO1xuXG4gICAgdmFyIGFkYXB0ZXIgPSB1cGRhdGVkTW9kZWwuYWRhcHRlcjtcbiAgICB2YXIgc2VyaWFsaXplciA9IHVwZGF0ZWRNb2RlbC5zZXJpYWxpemVyO1xuICAgIHZhciBzZXJpYWxpemVkTW9kZWwgPSBzZXJpYWxpemVyLnNlcmlhbGl6ZSh0eXBlLCB1cGRhdGVkTW9kZWwpO1xuICAgIHZhciBpZCA9IHVwZGF0ZWRNb2RlbC5hdHRyc1thZGFwdGVyLmlkS2V5Rm9yVHlwZSh0eXBlKV07XG5cbiAgICByZXR1cm4gYWRhcHRlci51cGRhdGUodHlwZSwgaWQsIHNlcmlhbGl6ZWRNb2RlbCkudGhlbihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgcmV0dXJuIF90aGlzMTMuZGVzZXJpYWxpemUodHlwZSwgcGF5bG9hZCwgYWRhcHRlciwgc2VyaWFsaXplciwgeyBzaW5nbGU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogUHJveHkgdG8gc2VyaWFsaXplcidzIGRlc2VyaWFsaXplLlxuICAgKlxuICAgKiBAbWV0aG9kIGRlc2VyaWFsaXplXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBwbHVyYWxpemVkIG5hbWUgb2YgdGhlIHR5cGUsIGluIGxvd2VyIGNhc2UuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIFRoZSByYXcgcGF5bG9hZCByZXR1cm5lZCBieSB0aGUgYWRhcHRlci5cbiAgICogQHBhcmFtIHtCYXNlQWRhcHRlcn0gYWRhcHRlciBUaGUgYWRhcHRlciB0aGF0IHlpZWxkZWQgdGhlIHBheWxvYWQuXG4gICAqIEBwYXJhbSB7QmFzZVNlcmlhbGl6ZXJ9IGV4aXN0aW5nU2VyaWFsaXplciBUaGUgc2VyaWFsaXplciB0byBhdHRhY2guIElmXG4gICAqIG5vbmUgaXMgcGFzc2VkLCB0aGVuIGB0aGlzLmRlc2VyaWFsaXplYCB3aWxsIGNyZWF0ZSBvbmUgZm9yIHRoZSB0eXBlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25zIHRoYXQgZGV0ZXJtaW5lIHdoaWNoIGRlc2VyaWFsaXphdGlvbiBtZXRob2QgdG9cbiAgICogdXNlLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdHMubXVsdGlwbGUgdHJ1ZSB3aGVuIHRoZSBwYXlsb2FkIHJlcHJlc2VudHMgbXVsdGlwbGVcbiAgICogbW9kZWxzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0cy5zaW5nbGUgdHJ1ZSB3aGVuIHRoZSBwYXlsb2FkIHJlcHJlc2VudHMgb25lIG1vZGVsLlxuICAgKiBAcmV0dXJuIHtCYXNlTW9kZWx9IGFuIGluc3RhbmNlIG9mIGB0eXBlYCByZWlmaWVkIGludG8gYSBtb2RlbC5cbiAgICovXG4gIGRlc2VyaWFsaXplOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZSh0eXBlLCBwYXlsb2FkLCBhZGFwdGVyLCBleGlzdGluZ1NlcmlhbGl6ZXIpIHtcbiAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge307XG5cbiAgICB2YXIgc2VyaWFsaXplciA9IGV4aXN0aW5nU2VyaWFsaXplciB8fCBuZXcgdGhpcy5zZXJpYWxpemVyc1t0eXBlXSh0aGlzLmNvbmZpZyk7XG4gICAgdmFyIG1ldGEgPSB7IHNob3BDbGllbnQ6IHRoaXMsIGFkYXB0ZXI6IGFkYXB0ZXIsIHNlcmlhbGl6ZXI6IHNlcmlhbGl6ZXIsIHR5cGU6IHR5cGUgfTtcbiAgICB2YXIgc2VyaWFsaXplZFBheWxvYWQgPSB2b2lkIDA7XG5cbiAgICBpZiAob3B0cy5tdWx0aXBsZSkge1xuICAgICAgc2VyaWFsaXplZFBheWxvYWQgPSBzZXJpYWxpemVyLmRlc2VyaWFsaXplTXVsdGlwbGUodHlwZSwgcGF5bG9hZCwgbWV0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlcmlhbGl6ZWRQYXlsb2FkID0gc2VyaWFsaXplci5kZXNlcmlhbGl6ZVNpbmdsZSh0eXBlLCBwYXlsb2FkLCBtZXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VyaWFsaXplZFBheWxvYWQ7XG4gIH0sXG5cblxuICAvKipcbiAgICAqIENyZWF0ZXMgYSB7eyNjcm9zc0xpbmsgXCJDYXJ0TW9kZWxcIn19Q2FydE1vZGVse3svY3Jvc3NMaW5rfX0gaW5zdGFuY2UuXG4gICAgKlxuICAgICogYGBgamF2YXNjcmlwdFxuICAgICogY2xpZW50LmNyZWF0ZUNhcnQoKS50aGVuKGNhcnQgPT4ge1xuICAgICogICAvLyBkbyBzb21ldGhpbmcgd2l0aCBjYXJ0XG4gICAgKiB9KTtcbiAgICAqIGBgYFxuICAgICpcbiAgICAqIEBtZXRob2QgY3JlYXRlQ2FydFxuICAgICogQHB1YmxpY1xuICAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IC0gbmV3IGNhcnQgaW5zdGFuY2UuXG4gICovXG4gIGNyZWF0ZUNhcnQ6IGZ1bmN0aW9uIGNyZWF0ZUNhcnQoKSB7XG4gICAgdmFyIHVzZXJBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICB2YXIgYmFzZUF0dHJzID0ge1xuICAgICAgbGluZV9pdGVtczogW11cbiAgICB9O1xuICAgIHZhciBhdHRycyA9IHt9O1xuXG4gICAgYXNzaWduJDEoYXR0cnMsIGJhc2VBdHRycyk7XG4gICAgYXNzaWduJDEoYXR0cnMsIHVzZXJBdHRycyk7XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGUoJ2NhcnRzJywgYXR0cnMpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAgKiBVcGRhdGVzIGFuIGV4aXN0aW5nIHt7I2Nyb3NzTGluayBcIkNhcnRNb2RlbFwifX1DYXJ0TW9kZWx7ey9jcm9zc0xpbmt9fSBpbnN0YW5jZSBhbmQgcGVyc2lzdHMgaXQgdG8gbG9jYWxTdG9yYWdlLlxuICAgICpcbiAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAqIGNsaWVudC5jcmVhdGVDYXJ0KCkudGhlbihjYXJ0ID0+IHtcbiAgICAqICAgY2FydC5saW5lSXRlbXMgPSBbXG4gICAgKiAgICAgLy8gLi4uXG4gICAgKiAgIF07XG4gICAgKiAgIGNsaWVudC51cGRhdGVDYXJ0KGNhcnQpO1xuICAgICogfSk7XG4gICAgKiBgYGBcbiAgICAqXG4gICAgKiBAcGFyYW0ge0NhcnRNb2RlbH0gdXBkYXRlZENhcnQgYW4gdXBkYXRlZCBDYXJ0TW9kZWxcbiAgICAqIEBtZXRob2QgdXBkYXRlQ2FydFxuICAgICogQHByaXZhdGVcbiAgICAqIEByZXR1cm4ge1Byb21pc2V8Q2FydE1vZGVsfSAtIHVwZGF0ZWQgY2FydCBpbnN0YW5jZS5cbiAgKi9cbiAgdXBkYXRlQ2FydDogZnVuY3Rpb24gdXBkYXRlQ2FydCh1cGRhdGVkQ2FydCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZSgnY2FydHMnLCB1cGRhdGVkQ2FydCk7XG4gIH0sXG5cblxuICAvKipcbiAgICogUmV0cmlldmUgYSBwcmV2aW91c2x5IGNyZWF0ZWQgY2FydCBieSBpdHMga2V5LlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaENhcnQoJ3Nob3BpZnktYnV5LjE0NTk4MDQ2OTkxMTguMicpLnRoZW4oY2FydCA9PiB7XG4gICAqICAgY29uc29sZS5sb2coY2FydCk7IC8vIFRoZSByZXRyaWV2ZWQgY2FydFxuICAgKiB9KTtcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaENhcnRcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgVGhlIGNhcnQncyB1bmlxdWUgaWRlbnRpZmllclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfENhcnRNb2RlbH0gVGhlIGNhcnQgbW9kZWwuXG4gICAqXG4gICAqL1xuICBmZXRjaENhcnQ6IGZldGNoRmFjdG9yeSgnb25lJywgJ2NhcnRzJyksXG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYW4gYEFycmF5YCBvZiBwcm9kdWN0cyBmcm9tIHlvdXIgc3RvcmVcbiAgICogYGBgXG4gICAqIGNsaWVudC5mZXRjaEFsbFByb2R1Y3RzKClcbiAgICogLnRoZW4oZnVuY3Rpb24ocHJvZHVjdHMpIHtcbiAgICogICAvLyBhbGwgcHJvZHVjdHMgaW4gc3RvcmVcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoQWxsUHJvZHVjdHNcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJuIHtQcm9taXNlfEFycmF5fSBUaGUgcHJvZHVjdCBtb2RlbHMuXG4gICAqL1xuICBmZXRjaEFsbFByb2R1Y3RzOiBmZXRjaEZhY3RvcnkoJ2FsbCcsICdwcm9kdWN0cycpLFxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGFuIGBBcnJheWAgb2YgY29sbGVjdGlvbnMgZnJvbSB5b3VyIHN0b3JlXG4gICAqIGBgYFxuICAgKiBjbGllbnQuZmV0Y2hBbGxDb2xsZWN0aW9ucygpXG4gICAqIC50aGVuKGZ1bmN0aW9uKGNvbGxlY3Rpb25zKSB7XG4gICAqXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaEFsbENvbGxlY3Rpb25zXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gVGhlIGNvbGxlY3Rpb24gbW9kZWxzLlxuICAgKi9cbiAgZmV0Y2hBbGxDb2xsZWN0aW9uczogZmV0Y2hGYWN0b3J5KCdhbGwnLCAnY29sbGVjdGlvbnMnKSxcblxuICAvKipcbiAgICogRmV0Y2ggb25lIHByb2R1Y3QgYnkgaXRzIElELlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFByb2R1Y3QoJzg1Njk5MTE1NTgnKS50aGVuKHByb2R1Y3QgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHByb2R1Y3QpOyAvLyBUaGUgcHJvZHVjdCB3aXRoIGFuIElEIG9mICc4NTY5OTExNTU4J1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hQcm9kdWN0XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBpZCBhIHVuaXF1ZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V8QmFzZU1vZGVsfSBUaGUgcHJvZHVjdCBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgSUQuXG4gICAqL1xuICBmZXRjaFByb2R1Y3Q6IGZldGNoRmFjdG9yeSgnb25lJywgJ3Byb2R1Y3RzJyksXG5cbiAgLyoqXG4gICAqIEZldGNoIG9uZSBjb2xsZWN0aW9uIGJ5IGl0cyBJRC5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjbGllbnQuZmV0Y2hDb2xsZWN0aW9uKCczMzY5MDM0OTQnKS50aGVuKGNvbGxlY3Rpb24gPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKGNvbGxlY3Rpb24pOyAvLyBUaGUgY29sbGVjdGlvbiB3aXRoIGFuIElEIG9mICczMzY5MDM0OTQnXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG1ldGhvZCBmZXRjaENvbGxlY3Rpb25cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IGlkIGEgdW5pcXVlIGlkZW50aWZpZXJcbiAgICogQHJldHVybiB7UHJvbWlzZXxCYXNlTW9kZWx9IFRoZSBjb2xsZWN0aW9uIG1vZGVsIHdpdGggdGhlIHNwZWNpZmllZCBJRC5cbiAgICovXG4gIGZldGNoQ29sbGVjdGlvbjogZmV0Y2hGYWN0b3J5KCdvbmUnLCAnY29sbGVjdGlvbnMnKSxcblxuICAvKipcbiAgICogRmV0Y2hlcyBhIGxpc3Qgb2YgcHJvZHVjdHMgbWF0Y2hpbmcgYSBzcGVjaWZpZWQgcXVlcnkuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY2xpZW50LmZldGNoUXVlcnlQcm9kdWN0cyh7IGNvbGxlY3Rpb25faWQ6ICczMzY5MDM0OTQnLCB0YWc6IFsnaGF0cyddIH0pLnRoZW4ocHJvZHVjdHMgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKHByb2R1Y3RzKTsgLy8gQW4gYXJyYXkgb2YgcHJvZHVjdHMgaW4gY29sbGVjdGlvbiAnMzM2OTAzNDk0JyBoYXZpbmcgdGhlIHRhZyAnaGF0cydcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBAbWV0aG9kIGZldGNoUXVlcnlQcm9kdWN0c1xuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyeSBBIHF1ZXJ5IHNlbnQgdG8gdGhlIGFwaSBzZXJ2ZXIgY29udGFpbmluZyBvbmUgb3IgbW9yZSBvZjpcbiAgICogICBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IFtxdWVyeS5jb2xsZWN0aW9uX2lkXSBUaGUgSUQgb2YgYSBjb2xsZWN0aW9uIHRvIHJldHJpZXZlIHByb2R1Y3RzIGZyb21cbiAgICogICBAcGFyYW0ge0FycmF5fSBbcXVlcnkudGFnXSBBIGxpc3Qgb2YgdGFncyB0byBmaWx0ZXIgdGhlIHByb2R1Y3RzIGJ5LiBBY2NlcHRzIHVwIHRvIDEwIHRhZ3MuXG4gICAqICAgQHBhcmFtIHtBcnJheX0gW3F1ZXJ5LnByb2R1Y3RfaWRzXSBBIGxpc3Qgb2YgcHJvZHVjdCBJRHMgdG8gcmV0cmlldmVcbiAgICogICBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IFtxdWVyeS5wYWdlPTFdIFRoZSBwYWdlIG9mZnNldCBudW1iZXIgb2YgdGhlIGN1cnJlbnQgbG9va3VwIChiYXNlZCBvbiB0aGUgYGxpbWl0YClcbiAgICogICBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IFtxdWVyeS5saW1pdD01MF0gVGhlIG51bWJlciBvZiBwcm9kdWN0cyB0byByZXRyaWV2ZSBwZXIgcGFnZVxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBbcXVlcnkuaGFuZGxlXSBUaGUgaGFuZGxlIG9mIHRoZSBwcm9kdWN0IHRvIGxvb2sgdXBcbiAgICogICBAcGFyYW0ge1N0cmluZ30gW3F1ZXJ5LnVwZGF0ZWRfYXRfbWluXSBQcm9kdWN0cyB1cGRhdGVkIHNpbmNlIHRoZSBzdXBwbGllZCB0aW1lc3RhbXAgKGZvcm1hdDogMjAwOC0xMi0zMSAwMzowMClcbiAgICogICBAcGFyYW0ge1N0cmluZ30gW3F1ZXJ5LnNvcnRfYnldIFdpbGwgbW9kaWZ5IGhvdyBwcm9kdWN0cyBhcmUgb3JkZXJlZC4gUG9zc2libGUgdmFsdWVzIGFyZTpcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcInVwZGF0ZWRfYXRcImAsIGBcImJlc3Qtc2VsbGluZ1wiYCwgYFwidGl0bGUtYXNjZW5kaW5nXCJgLCBgXCJ0aXRsZS1kZXNjZW5kaW5nXCJgLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwicHJpY2UtZGVzY2VuZGluZ1wiYCwgYFwicHJpY2UtYXNjZW5kaW5nXCJgLCBgXCJjcmVhdGVkLWRlc2NlbmRpbmdcImAsIGBcImNyZWF0ZWQtYXNjZW5kaW5nXCJgLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYFwiY29sbGVjdGlvbi1kZWZhdWx0XCJgLiBVc2luZyBgXCJjb2xsZWN0aW9uLWRlZmF1bHRcImAgbWVhbnMgdGhhdCBwcm9kdWN0cyB3aWxsIGJlIG9yZGVyZWRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSB1c2luZyB0aGUgY3VzdG9tIG9yZGVyaW5nIGRlZmluZWQgaW4geW91ciBTaG9waWZ5IEFkbWluLiBEZWZhdWx0IHZhbHVlIGBcImNvbGxlY3Rpb24tZGVmYXVsdFwiYC5cbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gVGhlIHByb2R1Y3QgbW9kZWxzLlxuICAgKi9cbiAgZmV0Y2hRdWVyeVByb2R1Y3RzOiBmZXRjaEZhY3RvcnkoJ3F1ZXJ5JywgJ3Byb2R1Y3RzJyksXG5cbiAgLyoqXG4gICAqIEZldGNoZXMgYSBsaXN0IG9mIGNvbGxlY3Rpb25zIG1hdGNoaW5nIGEgc3BlY2lmaWVkIHF1ZXJ5LlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFF1ZXJ5Q29sbGVjdGlvbnMoe3BhZ2U6IDIsIGxpbWl0OiAyMH0pLnRoZW4oY29sbGVjdGlvbnMgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKGNvbGxlY3Rpb25zKTsgLy8gQW4gYXJyYXkgb2YgY29sbGVjdGlvbiByZXNvdXJjZXNcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbWV0aG9kIGZldGNoUXVlcnlDb2xsZWN0aW9uc1xuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyeSBhIHF1ZXJ5IHNlbnQgdG8gdGhlIGFwaSBzZXJ2ZXIuXG4gICAqICAgQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbcXVlcnkucGFnZT0xXSB0aGUgcGFnZSBvZmZzZXQgbnVtYmVyIG9mIHRoZSBjdXJyZW50IGxvb2t1cCAoYmFzZWQgb24gdGhlIGBsaW1pdGApXG4gICAqICAgQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbcXVlcnkubGltaXQ9NTBdIHRoZSBudW1iZXIgb2YgY29sbGVjdGlvbnMgdG8gcmV0cmlldmUgcGVyIHBhZ2VcbiAgICogQHJldHVybiB7UHJvbWlzZXxBcnJheX0gVGhlIGNvbGxlY3Rpb24gbW9kZWxzLlxuICAgKi9cbiAgZmV0Y2hRdWVyeUNvbGxlY3Rpb25zOiBmZXRjaEZhY3RvcnkoJ3F1ZXJ5JywgJ2NvbGxlY3Rpb25zJyksXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGxvb2tzIHVwIGEgcmVmZXJlbmNlIGluIGxvY2FsU3RvcmFnZSB0byB0aGUgbW9zdCByZWNlbnQgY2FydC5cbiAgICogSWYgb25lIGlzIG5vdCBmb3VuZCwgY3JlYXRlcyBvbmUuIElmIHRoZSBjYXJ0IHRoZSByZWZlcmVuY2UgcG9pbnRzIHRvXG4gICAqIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBvbmUgYW5kIHN0b3JlIHRoZSBuZXcgcmVmZXJlbmNlLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsaWVudC5mZXRjaFJlY2VudENhcnQoKS50aGVuKGNhcnQgPT4ge1xuICAgKiAgLy8gZG8gc3R1ZmYgd2l0aCB0aGUgY2FydFxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgZmV0Y2hSZWNlbnRDYXJ0XG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybiB7UHJvbWlzZXxDYXJ0TW9kZWx9IFRoZSBjYXJ0LlxuICAgKi9cbiAgZmV0Y2hSZWNlbnRDYXJ0OiBmdW5jdGlvbiBmZXRjaFJlY2VudENhcnQoKSB7XG4gICAgdmFyIF90aGlzMTQgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goJ3JlZmVyZW5jZXMnLCB0aGlzLmNvbmZpZy5kb21haW4gKyAnLnJlY2VudC1jYXJ0JykudGhlbihmdW5jdGlvbiAocmVmZXJlbmNlKSB7XG4gICAgICB2YXIgY2FydElkID0gcmVmZXJlbmNlLnJlZmVyZW5jZUlkO1xuXG4gICAgICByZXR1cm4gX3RoaXMxNC5mZXRjaENhcnQoY2FydElkKTtcbiAgICB9KVsnY2F0Y2gnXShmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMxNC5jcmVhdGVDYXJ0KCkudGhlbihmdW5jdGlvbiAoY2FydCkge1xuICAgICAgICB2YXIgcmVmQXR0cnMgPSB7XG4gICAgICAgICAgcmVmZXJlbmNlSWQ6IGNhcnQuaWRcbiAgICAgICAgfTtcblxuICAgICAgICByZWZBdHRyc1tHVUlEX0tFWV0gPSBfdGhpczE0LmNvbmZpZy5kb21haW4gKyAnLnJlY2VudC1jYXJ0JztcblxuICAgICAgICBfdGhpczE0LmNyZWF0ZSgncmVmZXJlbmNlcycsIHJlZkF0dHJzKTtcblxuICAgICAgICByZXR1cm4gY2FydDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59LCB7XG4gIHNlcmlhbGl6ZXJzOiB7XG4gICAgLyoqXG4gICAgICogQGF0dHJpYnV0ZVxuICAgICAqIEBkZWZhdWx0IHtcbiAgICAgKiAgcHJvZHVjdHM6IExpc3RpbmdzQWRhcHRlcixcbiAgICAgKiAgY29sbGVjdGlvbnM6IExpc3RpbmdzQWRhcHRlcixcbiAgICAgKiAgY2FydHM6IENhcnRBZGFwdGVyXG4gICAgICogfVxuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICAvLyBQcmV2ZW50IGxlYWt5IHN0YXRlXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gYXNzaWduJDEoe30sIHRoaXMuc2hhZG93ZWRTZXJpYWxpemVycyk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZXMpIHtcbiAgICAgIHRoaXMuc2hhZG93ZWRTZXJpYWxpemVycyA9IGFzc2lnbiQxKHt9LCB2YWx1ZXMpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgYWRhcHRlcnM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBhc3NpZ24kMSh7fSwgdGhpcy5zaGFkb3dlZEFkYXB0ZXJzKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlcykge1xuICAgICAgdGhpcy5zaGFkb3dlZEFkYXB0ZXJzID0gYXNzaWduJDEoe30sIHZhbHVlcyk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KSk7XG5cbi8qIGdsb2JhbHMgcmVxdWlyZSAqL1xuXG5pZiAoaXNOb2RlTGlrZUVudmlyb25tZW50KCkpIHtcbiAgLyogdGhpcyBpbmRpcmVjdGlvbiBpcyBuZWVkZWQgYmVjYXVzZSBiYWJlbCB0aHJvd3MgZXJyb3JzIHdoZW5cbiAgICogdHJhbnNwaWxpbmcgcmVxdWlyZSgnbm9kZS1mZXRjaCcpIHVzaW5nIGBhbWRgIHBsdWdpbiB3aXRoIGJhYmVsNlxuICAgKi9cbiAgdmFyIGxvY2FsUmVxdWlyZSA9IHJlcXVpcmU7XG4gIHZhciBfZmV0Y2ggPSBsb2NhbFJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuICBnbG9iYWxWYXJzLnNldCgnZmV0Y2gnLCBfZmV0Y2gpO1xuICBnbG9iYWxWYXJzLnNldCgnUmVzcG9uc2UnLCBfZmV0Y2guUmVzcG9uc2UpO1xufVxuXG4vKiBnbG9iYWwgQnVmZmVyICovXG5cbmlmIChpc05vZGVMaWtlRW52aXJvbm1lbnQoKSkge1xuICBnbG9iYWxWYXJzLnNldCgnYnRvYScsIGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihzdHJpbmcpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQG1vZHVsZSBzaG9waWZ5LWJ1eVxuICogQHN1Ym1vZHVsZSBzaG9waWZ5XG4gKi9cblxuLyoqXG4gKiBgU2hvcGlmeUJ1eWAgb25seSBkZWZpbmVzIG9uZSBmdW5jdGlvbiB7eyNjcm9zc0xpbmsgXCJTaG9waWZ5QnV5L2J1aWxkQ2xpZW50XCJ9fXt7L2Nyb3NzTGlua319IHdoaWNoIGNhblxuICogYmUgdXNlZCB0byBidWlsZCBhIHt7I2Nyb3NzTGluayBcIlNob3BDbGllbnRcIn19e3svY3Jvc3NMaW5rfX0gdG8gcXVlcnkgeW91ciBzdG9yZSB1c2luZyB0aGVcbiAqIHByb3ZpZGVkXG4gKiB7eyNjcm9zc0xpbmsgXCJTaG9waWZ5QnV5L2J1aWxkQ2xpZW50L2NvbmZpZ0F0dHJzOmFwaUtleVwifX1gYXBpS2V5YHt7L2Nyb3NzTGlua319LFxuICoge3sjY3Jvc3NMaW5rIFwiU2hvcGlmeUJ1eS9idWlsZENsaWVudC9jb25maWdBdHRyczphcHBJZFwifX1gYXBwSWRge3svY3Jvc3NMaW5rfX0sXG4gKiBhbmQge3sjY3Jvc3NMaW5rIFwiU2hvcGlmeUJ1eS9idWlsZENsaWVudC9jb25maWdBdHRyczpkb21haW5cIn19YGRvbWFpbmB7ey9jcm9zc0xpbmt9fS5cbiAqIEBjbGFzcyBTaG9waWZ5QnV5XG4gKiBAc3RhdGljXG4gKi9cbnZhciBTaG9waWZ5ID0ge1xuICBTaG9wQ2xpZW50OiBTaG9wQ2xpZW50LFxuICBDb25maWc6IENvbmZpZyxcbiAgdmVyc2lvbjogdmVyc2lvbixcbiAgTk9fSU1BR0VfVVJJOiBOT19JTUFHRV9VUkksXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIFNob3BDbGllbnQuIFRoaXMgaXMgdGhlIG1haW4gZW50cnkgcG9pbnQgdG8gdGhlIFNESy5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjb25zdCBjbGllbnQgPSBTaG9waWZ5QnV5LmJ1aWxkQ2xpZW50KHtcbiAgICogICBhcGlLZXk6ICdiZjA4MWU4NjBiYzlkYzFjZTA2NTRmZGZiYzIwODkyZCcsXG4gICAqICAgYXBwSWQ6IDYsXG4gICAqICAgbXlTaG9waWZ5RG9tYWluOiAneW91ci1zaG9wLXN1YmRvbWFpbi5teXNob3BpZnkuY29tJywgLy9EZXByZWNhdGVkLiBVc2UgYGRvbWFpbmAgaW5zdGVhZFxuICAgKiAgIGRvbWFpbjogJ2VtYmVkcy5teXNob3BpZnkuY29tJ1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBtZXRob2QgYnVpbGRDbGllbnRcbiAgICogQGZvciBTaG9waWZ5QnV5XG4gICAqIEBzdGF0aWNcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnQXR0cnMgQW4gb2JqZWN0IG9mIHJlcXVpcmVkIGNvbmZpZyBkYXRhIHN1Y2ggYXM6IGBhcGlLZXlgLCBgYXBwSWRgLCBgZG9tYWluYFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnQXR0cnMuYXBpS2V5IEFuIEFQSSBLZXkgZm9yIHlvdXIgc3RvcmUuIERvY3VtZW50YXRpb24gaG93IHRvIGdldCBhbiBBUEkgS2V5OlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvc2Rrcy9qcy1idXktc2RrL2dldHRpbmctc3RhcnRlZCNhcGkta2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjb25maWdBdHRycy5hcHBJZCBUeXBpY2FsbHkgd2lsbCBiZSA2IHdoaWNoIGlzIHRoZSBCdXkgQnV0dG9uIEFwcCBJZC4gRm9yIG1vcmUgaW5mbyBvbiBBcHAgSWQgc2VlOlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zZGtzL2pzLWJ1eS1zZGsvZ2V0dGluZy1zdGFydGVkI2FwcC1pZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnQXR0cnMuZG9tYWluIFlvdXIgc2hvcCdzIGZ1bGwgYG15c2hvcGlmeS5jb21gIGRvbWFpbi4gRm9yIGV4YW1wbGU6IGBlbWJlZHMubXlzaG9waWZ5LmNvbWBcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZ0F0dHJzLm15U2hvcGlmeURvbWFpbiBZb3Ugc2hvcCdzIGBteXNob3BpZnkuY29tYCBkb21haW4uIFtkZXByZWNhdGVkIFVzZSBjb25maWdBdHRycy5kb21haW5dXG4gICAqIEByZXR1cm4ge1Nob3BDbGllbnR9IGEgY2xpZW50IGZvciB0aGUgc2hvcCB1c2luZyB5b3VyIGFwaSBjcmVkZW50aWFscyB3aGljaCB5b3UgY2FuIHVzZSB0byBxdWVyeSB5b3VyIHN0b3JlLlxuICAgKi9cbiAgYnVpbGRDbGllbnQ6IGZ1bmN0aW9uIGJ1aWxkQ2xpZW50KCkge1xuICAgIHZhciBjb25maWdBdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICB2YXIgY29uZmlnID0gbmV3IHRoaXMuQ29uZmlnKGNvbmZpZ0F0dHJzKTtcblxuICAgIHJldHVybiBuZXcgdGhpcy5TaG9wQ2xpZW50KGNvbmZpZyk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2hvcGlmeTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zaG9waWZ5LWJ1eS9saWIvc2hvcGlmeS5qc1xuLy8gbW9kdWxlIGlkID0gMzM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsInZhciBjYW1lbDJoeXBoZW4gPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiBzdHJcbiAgICAgICAgICAucmVwbGFjZSgvW0EtWl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gJy0nICsgbWF0Y2gudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjYW1lbDJoeXBoZW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3N0cmluZy1jb252ZXJ0L2NhbWVsMmh5cGhlbi5qc1xuLy8gbW9kdWxlIGlkID0gMzM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCB7UHJvdmlkZXJ9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBzaG9waWZ5QVBJIGZyb20gJ3Nob3BpZnlBUEknO1xuaW1wb3J0ICdhcHBsaWNhdGlvblN0eWxlcyc7XG5cbmxldCBjYXJ0QWN0aW9ucyA9IHJlcXVpcmUoJ2NhcnRBY3Rpb25zJyk7XG5sZXQgcHJvZHVjdEFjdGlvbnMgPSByZXF1aXJlKCdwcm9kdWN0QWN0aW9ucycpO1xubGV0IGNvbGxlY3Rpb25BY3Rpb25zID0gcmVxdWlyZSgnY29sbGVjdGlvbkFjdGlvbnMnKTtcbmxldCBzdG9yZSA9IHJlcXVpcmUoJ2NvbmZpZ3VyZVN0b3JlJykuY29uZmlndXJlKCk7XG5pbXBvcnQgcm91dGVyIGZyb20gJy4vcm91dGVyL3JvdXRlci5qc3gnO1xuXG5cbi8vIHN1YnNjcmliZSB0byB0aGUgcmVkdXggc3RvcmVcbnN0b3JlLnN1YnNjcmliZSgoKSA9PiB7XG4gIGxldCBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gIGNvbnNvbGUubG9nKCdOZXcgc3RhdGUnLCBzdGF0ZSk7XG59KTtcblxuLy8gYWRkIHByb2R1Y3RzIGFuZCBjb2xsZWN0aW9ucyB0byBzdG9yZVxuc3RvcmUuZGlzcGF0Y2gocHJvZHVjdEFjdGlvbnMuc3RhcnRBZGRQcm9kdWN0cygpKTtcbnN0b3JlLmRpc3BhdGNoKGNvbGxlY3Rpb25BY3Rpb25zLnN0YXJ0QWRkQ29sbGVjdGlvbnMoKSk7XG5cbi8vIGNyZWF0ZSBzaG9waWZ5IGNhcnQgaW5zdGFuY2UgYmFzZWQgb24gbGFzdCBzZXNzaW9uIChiYXNlZCBvbiBsb2NhbFN0b3JhZ2UpXG5pZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFzdENhcnRJZCcpKSB7XG4gIHNob3BpZnlBUEkucmVzdG9yZUNhcnQoKS50aGVuKChsb2NhbENhcnQpID0+IHtcbiAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6ICdTRVRfSU5JVElBTF9DQVJUX1NUQVRFJywgbG9jYWxDYXJ0IH0pO1xuICB9KTtcbn1lbHNle1xuICBzaG9waWZ5QVBJLmNyZWF0ZUNhcnQoKS50aGVuKChsb2NhbENhcnQpID0+IHtcbiAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6ICdTRVRfSU5JVElBTF9DQVJUX1NUQVRFJywgbG9jYWxDYXJ0IH0pO1xuICB9KTtcbn1cblxuLy8gQXBwIGNzc1xuLy8gcmVxdWlyZSgnc3R5bGUhY3NzIXNhc3MhYXBwbGljYXRpb25TdHlsZXMnKVxuXG5SZWFjdERPTS5yZW5kZXIoXG4gIDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxuICAgIHtyb3V0ZXJ9XG4gIDwvUHJvdmlkZXI+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJylcbik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvYXBwLmpzeCJdLCJzb3VyY2VSb290IjoiIn0=